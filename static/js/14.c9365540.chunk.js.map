{"version":3,"sources":["Components/CustomFormControl.tsx","Components/FieldDisplay.tsx","ReactHooks/useCharacterReducer.tsx","../node_modules/@restart/hooks/esm/useTimeout.js","../node_modules/react-bootstrap/esm/Tooltip.js","../node_modules/react-overlays/esm/Overlay.js","../node_modules/react-bootstrap/esm/Overlay.js","../node_modules/react-bootstrap/esm/OverlayTrigger.js","Conditional/ConditionalSelector.tsx","Components/ConditionalDisplay.tsx","Components/DocumentDisplay.tsx","../node_modules/react-bootstrap/esm/InputGroup.js","Weapon/WeaponStatsCard.tsx","Weapon/WeaponDisplayCard.tsx","../node_modules/react-bootstrap/esm/ListGroupItem.js","../node_modules/react-bootstrap/esm/ListGroup.js"],"names":["CustomFormControl","value","onChange","className","disabled","float","placeholder","allowEmpty","max","min","useState","state","setState","sendChange","useCallback","undefined","parseFunc","parseFloat","parseInt","useEffect","toString","aria-label","type","e","target","onBlur","onKeyDown","key","FieldDisplay","field","index","useContext","buildContext","newBuild","equippedBuild","compareBuild","build","canShow","useMemo","fixedVal","fixed","fieldVal","Character","getTalentFieldValue","formula","retVal","fieldEquippedVal","toFixed","diff","fieldText","fieldVariant","formulaTextOverlay","fieldFormulaText","placement","overlay","id","icon","faQuestionCircle","style","cursor","unit","Item","variant","useCharacterReducer","characterKey","database","DatabaseContext","action","setWeaponLocation","character","_getChar","statKey","bonusStats","overrideStatKeys","includes","characterBaseStats","updateChar","MAX_DELAY_MS","Math","pow","setChainedTimeout","handleRef","fn","timeoutAtMs","delayMs","Date","now","current","setTimeout","useTimeout","isMounted","useMounted","useRef","useWillUnmount","clearTimeout","clear","set","_excluded","Tooltip","React","forwardRef","_ref","ref","bsPrefix","children","arrowProps","props","popper","show","_objectWithoutPropertiesLoose","useBootstrapPrefix","primaryPlacement","split","createElement","_extends","role","classNames","defaultProps","displayName","Overlay","outerRef","flip","offset","_props$containerPaddi","containerPadding","_props$popperConfig","popperConfig","Transition","transition","_useCallbackRef","useCallbackRef","rootElement","attachRef","_useCallbackRef2","arrowElement","attachArrowRef","mergedRef","useMergedRefs","container","useWaitForDOMRef","_useState","exited","setExited","_usePopper","usePopper","mergeOptionsWithPopperConfig","enableEvents","styles","attributes","mountOverlay","useRootClose","onHide","rootClose","rootCloseDisabled","clickTrigger","rootCloseEvent","child","arrow","onExit","onExiting","onEnter","onEntering","onEntered","appear","onExited","apply","arguments","ReactDOM","createPortal","propTypes","PropTypes","bool","oneOf","placements","any","func","isRequired","number","object","_len","length","args","Array","_key","_PropTypes$func","concat","elementType","_excluded2","Fade","_ref$popperConfig","outerProps","popperRef","_usePopperMarginModif","usePopperMarginModifiers","marginModifiers","actualTransition","BaseOverlay","modifiers","_ref2","_state$modifiersData$","overlayProps","update","forceUpdate","aRef","__wrapped","r","safeFindDOMNode","wrapRefs","Object","assign","scheduleUpdate","outOfBoundaries","modifiersData","hide","isReferenceHidden","cloneElement","RefHolder","_React$Component","this","_inheritsLoose","prototype","render","Component","handleMouseOverOut","handler","relatedNative","currentTarget","related","relatedTarget","nativeEvent","contains","OverlayTrigger","trigger","propsShow","_ref$defaultShow","defaultShow","onToggle","propsDelay","delay","_ref$flip","indexOf","triggerNodeRef","timeout","hoverStateRef","_useUncontrolledProp","useUncontrolledProp","setShow","normalizeDelay","Children","only","onFocus","onClick","getTarget","handleShow","handleHide","handleFocus","handleBlur","_len2","_key2","handleClick","handleMouseOver","_len3","_key3","handleMouseOut","_len4","_key4","triggers","triggerProps","onMouseOver","onMouseOut","Fragment","ConditionalSelector","conditional","conditionalValue","setConditional","name","stats","conditionalNum","conditionalStateKey","states","values","text","evalIfFunc","maxStack","badge","Badge","Dropdown","Toggle","size","whiteSpace","Menu","entries","map","i","stateKey","condial","keys","v","stack","Button","faCheckSquare","faSquare","ConditionalDisplay","fieldClassName","characterDispatch","Conditional","resolve","conditionalStats","fields","conditionalFields","displayFields","statsToFields","condV","layeredAssignment","conditionalValues","deletePropPath","objClearEmpties","Card","bg","Header","ListGroup","DocumentDisplay","sections","section","talentText","InputGroupAppend","createWithBsPrefix","InputGroupPrepend","InputGroupText","InputGroup","hasValidation","_ref$as","as","InputGroupWithExtras","Text","Radio","Checkbox","Append","Prepend","WeaponStatsCard","title","statsVals","WeaponDisplayCard","propWeaponId","weaponId","charData","footer","onClose","useForceUpdate","databaseToken","onDatabaseUpdate","buildContextObj","weapon","_getWeapon","level","refinement","ascension","location","weaponSheet","usePromise","WeaponSheet","get","weaponTypeKey","weaponType","followWeapon","weaponDispatch","newWeapon","updateWeapon","setLevel","clamp","ascensionMaxLevel","findIndex","ascenML","setAscension","lowerAscension","refineIndex","characterSheet","CharacterSheet","weaponFilter","ws","Row","Col","ButtonGroup","WeaponSelection","onSelect","k","filter","ItemText","Divider","xs","ambiguousLevel","milestoneLevels","lv","lvlstr","faTimes","localDatabase","SwapBtn","onChangeId","Body","substatKey","getSubStatKey","weaponDisplayMainVal","getMainStatValue","weaponDisplaySubVal","getSubStatValue","weaponPassiveName","passiveName","weaponBonusStats","document","md","lg","Image","src","img","rarity","thumbnail","description","process","getLevelString","stars","passiveDescription","Provider","setCompareBuild","atk","Footer","EquipmentDropdown","onEquip","cKey","disableUnequip","close","clickHandler","weaponSheets","getAll","weaponIdList","weapons","wKey","dbWeapon","faExchangeAlt","Modal","contentClassName","Assets","weaponTypes","WeaponCard","cardClassName","active","ListGroupItem","event","preventDefault","stopPropagation","tabIndex","AbstractNavItem","href","horizontal","horizontalVariant","_useUncontrolled","useUncontrolled","activeKey","initialBsPrefix","_useUncontrolled$as","controlledProps","AbstractNav"],"mappings":"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","file":"static/js/14.c9365540.chunk.js","sourcesContent":["import { useCallback, useEffect, useState } from 'react'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\ntype props = {\r\n  value: number | undefined,\r\n  onChange: (newValue: number | undefined) => void,\r\n  className?: string\r\n  disabled?: boolean\r\n  float?: boolean,\r\n  placeholder?: string,\r\n  allowEmpty?: boolean,\r\n  max?: string | number,\r\n  min?: string | number,\r\n}\r\nexport default function CustomFormControl({ value, onChange, className = \"\", disabled = false, float = false, placeholder, allowEmpty = false, max, min }: props) {\r\n  const [state, setState] = useState(\"\")\r\n  const sendChange = useCallback(\r\n    () => {\r\n      if (allowEmpty && state === \"\") return onChange(undefined)\r\n      if (state === \"\") return onChange(0)\r\n      const parseFunc = float ? parseFloat : parseInt\r\n      onChange(parseFunc(state))\r\n    },\r\n    [onChange, state, float, allowEmpty],\r\n  )\r\n  useEffect(() => setState(value?.toString() ?? \"\"), [value, setState]) // update value on value change\r\n\r\n  return <FormControl\r\n    value={state}\r\n    aria-label=\"custom-input\"\r\n    className={`hide-appearance ${className}`}\r\n    type=\"number\"\r\n    placeholder={placeholder}\r\n    onChange={(e: any) => setState(e.target.value)}\r\n    onBlur={sendChange}\r\n    disabled={disabled}\r\n    onKeyDown={(e: any) => e.key === \"Enter\" && sendChange()}\r\n    max={max}\r\n    min={min}\r\n  />\r\n}","import { faQuestionCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useContext, useMemo } from 'react';\r\nimport { ListGroup, OverlayTrigger, Tooltip } from \"react-bootstrap\";\r\nimport { buildContext } from \"../Build/Build\";\r\nimport Character from \"../Character/Character\";\r\nimport { IFieldDisplay } from \"../Types/IFieldDisplay\";\r\n\r\nexport default function FieldDisplay({ field, index, className = \"p-2\" }: { field: IFieldDisplay, index: number, className?: string }) {\r\n  const { newBuild, equippedBuild, compareBuild } = useContext(buildContext)\r\n  const build = (newBuild ? newBuild : equippedBuild)\r\n  const canShow = useMemo(() => build ? field?.canShow?.(build) : false, [field, build])\r\n  const fixedVal = field?.fixed || 0\r\n  const fieldVal = useMemo(() => {\r\n    if (field.value) return Character.getTalentFieldValue(field, \"value\", build)\r\n    else if (field.formula) {\r\n      let retVal = Character.getTalentFieldValue(field, \"formula\", build)?.[0]?.(build)\r\n      //compareAgainstEquipped\r\n      if (compareBuild && equippedBuild && typeof retVal === \"number\") {\r\n        let fieldEquippedVal = field.value ? field.value : field.formula?.(equippedBuild)?.[0]?.(equippedBuild)\r\n        if (typeof fieldEquippedVal === \"function\")\r\n          fieldEquippedVal = parseInt(fieldEquippedVal?.(equippedBuild)?.toFixed?.(fixedVal))\r\n        let diff = retVal - fieldEquippedVal\r\n        retVal = <span>{fieldEquippedVal?.toFixed(fixedVal) ?? fieldEquippedVal}{diff ? <span className={diff > 0 ? \"text-success\" : \"text-danger\"}> ({diff > 0 ? \"+\" : \"\"}{diff?.toFixed?.(fixedVal) || diff})</span> : \"\"}</span>\r\n      }\r\n      return retVal\r\n    }\r\n  }, [compareBuild, fixedVal, equippedBuild, field, build])\r\n\r\n  const fieldText = useMemo(() => Character.getTalentFieldValue(field, \"text\", build), [field, build])\r\n  const fieldVariant = useMemo(() => Character.getTalentFieldValue(field, \"variant\", build), [field, build])\r\n\r\n  const formulaTextOverlay = useMemo(() => {\r\n    const fieldFormulaText = Character.getTalentFieldValue(field, \"formulaText\", build)\r\n    return fieldFormulaText ? <OverlayTrigger\r\n      placement=\"top\"\r\n      overlay={<Tooltip id=\"field-formula\">{fieldFormulaText}</Tooltip>}\r\n    >\r\n      <FontAwesomeIcon icon={faQuestionCircle} className=\"ml-2\" style={{ cursor: \"help\" }} />\r\n    </OverlayTrigger> : null\r\n  }, [field, build])\r\n\r\n  const unit = useMemo(() => Character.getTalentFieldValue(field, \"unit\", build), [field, build])\r\n\r\n  if (!canShow) return null\r\n  return <ListGroup.Item variant={index % 2 ? \"customdark\" : \"customdarker\"} className={className}>\r\n    <span><b>{fieldText}</b>{formulaTextOverlay}</span>\r\n    <span className={`float-right text-right text-${fieldVariant}`} >{fieldVal?.toFixed?.(fixedVal) ?? fieldVal}{unit}</span>\r\n  </ListGroup.Item>\r\n}\r\n","import { useCallback, useContext } from \"react\";\r\nimport { DatabaseContext } from \"../Database/Database\";\r\nimport { ICachedCharacter } from \"../Types/character\";\r\nimport { CharacterKey } from \"../Types/consts\";\r\nimport { characterBaseStats, overrideStatKeys } from \"../Util/StatUtil\";\r\n\r\ntype characterEquipWeapon = {\r\n  type: \"weapon\", id: string\r\n}\r\ntype characterReducerBonusStatsAction = {\r\n  type: \"bonusStats\",\r\n  statKey: string\r\n  value: any | undefined\r\n}\r\nexport type characterReducerAction = characterEquipWeapon | characterReducerBonusStatsAction | Partial<ICachedCharacter>\r\n\r\nexport default function useCharacterReducer(characterKey:CharacterKey){\r\n  const database = useContext(DatabaseContext) \r\n\r\n  return useCallback((action: characterReducerAction): void => {\r\n    if (!characterKey) return\r\n\r\n    if (\"type\" in action) switch (action.type) {\r\n      case \"weapon\":\r\n        database.setWeaponLocation(action.id, characterKey)\r\n        break\r\n      case \"bonusStats\": {\r\n        const character = database._getChar(characterKey)!\r\n        const { statKey, value } = action\r\n        const bonusStats = character.bonusStats\r\n        if (bonusStats[statKey] === value) return\r\n        if (!value || (overrideStatKeys.includes(statKey) && characterBaseStats(character)[statKey] === value)) {\r\n          delete bonusStats[statKey]\r\n        } else bonusStats[statKey] = value\r\n        database.updateChar({ ...character, bonusStats })\r\n        break\r\n      }\r\n    } else\r\n      database.updateChar({ ...database._getChar(characterKey)!, ...action })\r\n  }, [characterKey, database])\r\n\r\n}","import { useMemo, useRef } from 'react';\nimport useMounted from './useMounted';\nimport useWillUnmount from './useWillUnmount';\n/*\n * Browsers including Internet Explorer, Chrome, Safari, and Firefox store the\n * delay as a 32-bit signed integer internally. This causes an integer overflow\n * when using delays larger than 2,147,483,647 ms (about 24.8 days),\n * resulting in the timeout being executed immediately.\n *\n * via: https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout\n */\n\nvar MAX_DELAY_MS = Math.pow(2, 31) - 1;\n\nfunction setChainedTimeout(handleRef, fn, timeoutAtMs) {\n  var delayMs = timeoutAtMs - Date.now();\n  handleRef.current = delayMs <= MAX_DELAY_MS ? setTimeout(fn, delayMs) : setTimeout(function () {\n    return setChainedTimeout(handleRef, fn, timeoutAtMs);\n  }, MAX_DELAY_MS);\n}\n/**\n * Returns a controller object for setting a timeout that is properly cleaned up\n * once the component unmounts. New timeouts cancel and replace existing ones.\n *\n *\n *\n * ```tsx\n * const { set, clear } = useTimeout();\n * const [hello, showHello] = useState(false);\n * //Display hello after 5 seconds\n * set(() => showHello(true), 5000);\n * return (\n *   <div className=\"App\">\n *     {hello ? <h3>Hello</h3> : null}\n *   </div>\n * );\n * ```\n */\n\n\nexport default function useTimeout() {\n  var isMounted = useMounted(); // types are confused between node and web here IDK\n\n  var handleRef = useRef();\n  useWillUnmount(function () {\n    return clearTimeout(handleRef.current);\n  });\n  return useMemo(function () {\n    var clear = function clear() {\n      return clearTimeout(handleRef.current);\n    };\n\n    function set(fn, delayMs) {\n      if (delayMs === void 0) {\n        delayMs = 0;\n      }\n\n      if (!isMounted()) return;\n      clear();\n\n      if (delayMs <= MAX_DELAY_MS) {\n        // For simplicity, if the timeout is short, just set a normal timeout.\n        handleRef.current = setTimeout(fn, delayMs);\n      } else {\n        setChainedTimeout(handleRef, fn, Date.now() + delayMs);\n      }\n    }\n\n    return {\n      set: set,\n      clear: clear\n    };\n  }, []);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"placement\", \"className\", \"style\", \"children\", \"arrowProps\", \"popper\", \"show\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport isRequiredForA11y from 'prop-types-extra/lib/isRequiredForA11y';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  placement: 'right'\n};\nvar Tooltip = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      placement = _ref.placement,\n      className = _ref.className,\n      style = _ref.style,\n      children = _ref.children,\n      arrowProps = _ref.arrowProps,\n      _ = _ref.popper,\n      _2 = _ref.show,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'tooltip');\n\n  var _ref2 = (placement == null ? void 0 : placement.split('-')) || [],\n      primaryPlacement = _ref2[0];\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref,\n    style: style,\n    role: \"tooltip\",\n    \"x-placement\": primaryPlacement,\n    className: classNames(className, bsPrefix, \"bs-tooltip-\" + primaryPlacement)\n  }, props), /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: \"arrow\"\n  }, arrowProps)), /*#__PURE__*/React.createElement(\"div\", {\n    className: bsPrefix + \"-inner\"\n  }, children));\n});\nTooltip.defaultProps = defaultProps;\nTooltip.displayName = 'Tooltip';\nexport default Tooltip;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport useCallbackRef from '@restart/hooks/useCallbackRef';\nimport useMergedRefs from '@restart/hooks/useMergedRefs';\nimport { placements } from './popper';\nimport usePopper from './usePopper';\nimport useRootClose from './useRootClose';\nimport useWaitForDOMRef from './useWaitForDOMRef';\nimport mergeOptionsWithPopperConfig from './mergeOptionsWithPopperConfig';\n\n/**\n * Built on top of `Popper.js`, the overlay component is\n * great for custom tooltip overlays.\n */\nvar Overlay = /*#__PURE__*/React.forwardRef(function (props, outerRef) {\n  var flip = props.flip,\n      offset = props.offset,\n      placement = props.placement,\n      _props$containerPaddi = props.containerPadding,\n      containerPadding = _props$containerPaddi === void 0 ? 5 : _props$containerPaddi,\n      _props$popperConfig = props.popperConfig,\n      popperConfig = _props$popperConfig === void 0 ? {} : _props$popperConfig,\n      Transition = props.transition;\n\n  var _useCallbackRef = useCallbackRef(),\n      rootElement = _useCallbackRef[0],\n      attachRef = _useCallbackRef[1];\n\n  var _useCallbackRef2 = useCallbackRef(),\n      arrowElement = _useCallbackRef2[0],\n      attachArrowRef = _useCallbackRef2[1];\n\n  var mergedRef = useMergedRefs(attachRef, outerRef);\n  var container = useWaitForDOMRef(props.container);\n  var target = useWaitForDOMRef(props.target);\n\n  var _useState = useState(!props.show),\n      exited = _useState[0],\n      setExited = _useState[1];\n\n  var _usePopper = usePopper(target, rootElement, mergeOptionsWithPopperConfig({\n    placement: placement,\n    enableEvents: !!props.show,\n    containerPadding: containerPadding || 5,\n    flip: flip,\n    offset: offset,\n    arrowElement: arrowElement,\n    popperConfig: popperConfig\n  })),\n      styles = _usePopper.styles,\n      attributes = _usePopper.attributes,\n      popper = _objectWithoutPropertiesLoose(_usePopper, [\"styles\", \"attributes\"]);\n\n  if (props.show) {\n    if (exited) setExited(false);\n  } else if (!props.transition && !exited) {\n    setExited(true);\n  }\n\n  var handleHidden = function handleHidden() {\n    setExited(true);\n\n    if (props.onExited) {\n      props.onExited.apply(props, arguments);\n    }\n  }; // Don't un-render the overlay while it's transitioning out.\n\n\n  var mountOverlay = props.show || Transition && !exited;\n  useRootClose(rootElement, props.onHide, {\n    disabled: !props.rootClose || props.rootCloseDisabled,\n    clickTrigger: props.rootCloseEvent\n  });\n\n  if (!mountOverlay) {\n    // Don't bother showing anything if we don't have to.\n    return null;\n  }\n\n  var child = props.children(_extends({}, popper, {\n    show: !!props.show,\n    props: _extends({}, attributes.popper, {\n      style: styles.popper,\n      ref: mergedRef\n    }),\n    arrowProps: _extends({}, attributes.arrow, {\n      style: styles.arrow,\n      ref: attachArrowRef\n    })\n  }));\n\n  if (Transition) {\n    var onExit = props.onExit,\n        onExiting = props.onExiting,\n        onEnter = props.onEnter,\n        onEntering = props.onEntering,\n        onEntered = props.onEntered;\n    child = /*#__PURE__*/React.createElement(Transition, {\n      \"in\": props.show,\n      appear: true,\n      onExit: onExit,\n      onExiting: onExiting,\n      onExited: handleHidden,\n      onEnter: onEnter,\n      onEntering: onEntering,\n      onEntered: onEntered\n    }, child);\n  }\n\n  return container ? /*#__PURE__*/ReactDOM.createPortal(child, container) : null;\n});\nOverlay.displayName = 'Overlay';\nOverlay.propTypes = {\n  /**\n   * Set the visibility of the Overlay\n   */\n  show: PropTypes.bool,\n\n  /** Specify where the overlay element is positioned in relation to the target element */\n  placement: PropTypes.oneOf(placements),\n\n  /**\n   * A DOM Element, Ref to an element, or function that returns either. The `target` element is where\n   * the overlay is positioned relative to.\n   */\n  target: PropTypes.any,\n\n  /**\n   * A DOM Element, Ref to an element, or function that returns either. The `container` will have the Portal children\n   * appended to it.\n   */\n  container: PropTypes.any,\n\n  /**\n   * Enables the Popper.js `flip` modifier, allowing the Overlay to\n   * automatically adjust it's placement in case of overlap with the viewport or toggle.\n   * Refer to the [flip docs](https://popper.js.org/popper-documentation.html#modifiers..flip.enabled) for more info\n   */\n  flip: PropTypes.bool,\n\n  /**\n   * A render prop that returns an element to overlay and position. See\n   * the [react-popper documentation](https://github.com/FezVrasta/react-popper#children) for more info.\n   *\n   * @type {Function ({\n   *   show: boolean,\n   *   placement: Placement,\n   *   update: () => void,\n   *   forceUpdate: () => void,\n   *   props: {\n   *     ref: (?HTMLElement) => void,\n   *     style: { [string]: string | number },\n   *     aria-labelledby: ?string\n   *     [string]: string | number,\n   *   },\n   *   arrowProps: {\n   *     ref: (?HTMLElement) => void,\n   *     style: { [string]: string | number },\n   *     [string]: string | number,\n   *   },\n   * }) => React.Element}\n   */\n  children: PropTypes.func.isRequired,\n\n  /**\n   * Control how much space there is between the edge of the boundary element and overlay.\n   * A convenience shortcut to setting `popperConfig.modfiers.preventOverflow.padding`\n   */\n  containerPadding: PropTypes.number,\n\n  /**\n   * A set of popper options and props passed directly to react-popper's Popper component.\n   */\n  popperConfig: PropTypes.object,\n\n  /**\n   * Specify whether the overlay should trigger `onHide` when the user clicks outside the overlay\n   */\n  rootClose: PropTypes.bool,\n\n  /**\n   * Specify event for toggling overlay\n   */\n  rootCloseEvent: PropTypes.oneOf(['click', 'mousedown']),\n\n  /**\n   * Specify disabled for disable RootCloseWrapper\n   */\n  rootCloseDisabled: PropTypes.bool,\n\n  /**\n   * A Callback fired by the Overlay when it wishes to be hidden.\n   *\n   * __required__ when `rootClose` is `true`.\n   *\n   * @type func\n   */\n  onHide: function onHide(props) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (props.rootClose) {\n      var _PropTypes$func;\n\n      return (_PropTypes$func = PropTypes.func).isRequired.apply(_PropTypes$func, [props].concat(args));\n    }\n\n    return PropTypes.func.apply(PropTypes, [props].concat(args));\n  },\n\n  /**\n   * A `react-transition-group@2.0.0` `<Transition/>` component\n   * used to animate the overlay as it changes visibility.\n   */\n  // @ts-ignore\n  transition: PropTypes.elementType,\n\n  /**\n   * Callback fired before the Overlay transitions in\n   */\n  onEnter: PropTypes.func,\n\n  /**\n   * Callback fired as the Overlay begins to transition in\n   */\n  onEntering: PropTypes.func,\n\n  /**\n   * Callback fired after the Overlay finishes transitioning in\n   */\n  onEntered: PropTypes.func,\n\n  /**\n   * Callback fired right before the Overlay transitions out\n   */\n  onExit: PropTypes.func,\n\n  /**\n   * Callback fired as the Overlay begins to transition out\n   */\n  onExiting: PropTypes.func,\n\n  /**\n   * Callback fired after the Overlay finishes transitioning out\n   */\n  onExited: PropTypes.func\n};\nexport default Overlay;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"children\", \"transition\", \"popperConfig\"],\n    _excluded2 = [\"props\", \"arrowProps\", \"show\", \"update\", \"forceUpdate\", \"placement\", \"state\"];\nimport React, { useRef } from 'react';\nimport classNames from 'classnames';\nimport BaseOverlay from 'react-overlays/Overlay';\nimport safeFindDOMNode from 'react-overlays/safeFindDOMNode';\nimport usePopperMarginModifiers from './usePopperMarginModifiers';\nimport Fade from './Fade';\nvar defaultProps = {\n  transition: Fade,\n  rootClose: false,\n  show: false,\n  placement: 'top'\n};\n\nfunction wrapRefs(props, arrowProps) {\n  var ref = props.ref;\n  var aRef = arrowProps.ref;\n\n  props.ref = ref.__wrapped || (ref.__wrapped = function (r) {\n    return ref(safeFindDOMNode(r));\n  });\n\n  arrowProps.ref = aRef.__wrapped || (aRef.__wrapped = function (r) {\n    return aRef(safeFindDOMNode(r));\n  });\n}\n\nfunction Overlay(_ref) {\n  var overlay = _ref.children,\n      transition = _ref.transition,\n      _ref$popperConfig = _ref.popperConfig,\n      popperConfig = _ref$popperConfig === void 0 ? {} : _ref$popperConfig,\n      outerProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var popperRef = useRef({});\n\n  var _usePopperMarginModif = usePopperMarginModifiers(),\n      ref = _usePopperMarginModif[0],\n      marginModifiers = _usePopperMarginModif[1];\n\n  var actualTransition = transition === true ? Fade : transition || null;\n  return /*#__PURE__*/React.createElement(BaseOverlay, _extends({}, outerProps, {\n    ref: ref,\n    popperConfig: _extends({}, popperConfig, {\n      modifiers: marginModifiers.concat(popperConfig.modifiers || [])\n    }),\n    transition: actualTransition\n  }), function (_ref2) {\n    var _state$modifiersData$;\n\n    var overlayProps = _ref2.props,\n        arrowProps = _ref2.arrowProps,\n        show = _ref2.show,\n        update = _ref2.update,\n        _ = _ref2.forceUpdate,\n        placement = _ref2.placement,\n        state = _ref2.state,\n        props = _objectWithoutPropertiesLoose(_ref2, _excluded2);\n\n    wrapRefs(overlayProps, arrowProps);\n    var popper = Object.assign(popperRef.current, {\n      state: state,\n      scheduleUpdate: update,\n      placement: placement,\n      outOfBoundaries: (state == null ? void 0 : (_state$modifiersData$ = state.modifiersData.hide) == null ? void 0 : _state$modifiersData$.isReferenceHidden) || false\n    });\n    if (typeof overlay === 'function') return overlay(_extends({}, props, overlayProps, {\n      placement: placement,\n      show: show\n    }, !transition && show && {\n      className: 'show'\n    }, {\n      popper: popper,\n      arrowProps: arrowProps\n    }));\n    return /*#__PURE__*/React.cloneElement(overlay, _extends({}, props, overlayProps, {\n      placement: placement,\n      arrowProps: arrowProps,\n      popper: popper,\n      className: classNames(overlay.props.className, !transition && show && 'show'),\n      style: _extends({}, overlay.props.style, overlayProps.style)\n    }));\n  });\n}\n\nOverlay.defaultProps = defaultProps;\nexport default Overlay;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nvar _excluded = [\"trigger\", \"overlay\", \"children\", \"popperConfig\", \"show\", \"defaultShow\", \"onToggle\", \"delay\", \"placement\", \"flip\"];\nimport contains from 'dom-helpers/contains';\nimport React, { cloneElement, useCallback, useRef } from 'react';\nimport useTimeout from '@restart/hooks/useTimeout';\nimport safeFindDOMNode from 'react-overlays/safeFindDOMNode';\nimport warning from 'warning';\nimport { useUncontrolledProp } from 'uncontrollable';\nimport Overlay from './Overlay';\n\nvar RefHolder = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(RefHolder, _React$Component);\n\n  function RefHolder() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = RefHolder.prototype;\n\n  _proto.render = function render() {\n    return this.props.children;\n  };\n\n  return RefHolder;\n}(React.Component);\n\nfunction normalizeDelay(delay) {\n  return delay && typeof delay === 'object' ? delay : {\n    show: delay,\n    hide: delay\n  };\n} // Simple implementation of mouseEnter and mouseLeave.\n// React's built version is broken: https://github.com/facebook/react/issues/4251\n// for cases when the trigger is disabled and mouseOut/Over can cause flicker\n// moving from one child element to another.\n\n\nfunction handleMouseOverOut( // eslint-disable-next-line @typescript-eslint/no-shadow\nhandler, args, relatedNative) {\n  var e = args[0];\n  var target = e.currentTarget;\n  var related = e.relatedTarget || e.nativeEvent[relatedNative];\n\n  if ((!related || related !== target) && !contains(target, related)) {\n    handler.apply(void 0, args);\n  }\n}\n\nvar defaultProps = {\n  defaultShow: false,\n  trigger: ['hover', 'focus']\n};\n\nfunction OverlayTrigger(_ref) {\n  var trigger = _ref.trigger,\n      overlay = _ref.overlay,\n      children = _ref.children,\n      _ref$popperConfig = _ref.popperConfig,\n      popperConfig = _ref$popperConfig === void 0 ? {} : _ref$popperConfig,\n      propsShow = _ref.show,\n      _ref$defaultShow = _ref.defaultShow,\n      defaultShow = _ref$defaultShow === void 0 ? false : _ref$defaultShow,\n      onToggle = _ref.onToggle,\n      propsDelay = _ref.delay,\n      placement = _ref.placement,\n      _ref$flip = _ref.flip,\n      flip = _ref$flip === void 0 ? placement && placement.indexOf('auto') !== -1 : _ref$flip,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var triggerNodeRef = useRef(null);\n  var timeout = useTimeout();\n  var hoverStateRef = useRef('');\n\n  var _useUncontrolledProp = useUncontrolledProp(propsShow, defaultShow, onToggle),\n      show = _useUncontrolledProp[0],\n      setShow = _useUncontrolledProp[1];\n\n  var delay = normalizeDelay(propsDelay);\n\n  var _ref2 = typeof children !== 'function' ? React.Children.only(children).props : {},\n      onFocus = _ref2.onFocus,\n      onBlur = _ref2.onBlur,\n      onClick = _ref2.onClick;\n\n  var getTarget = useCallback(function () {\n    return safeFindDOMNode(triggerNodeRef.current);\n  }, []);\n  var handleShow = useCallback(function () {\n    timeout.clear();\n    hoverStateRef.current = 'show';\n\n    if (!delay.show) {\n      setShow(true);\n      return;\n    }\n\n    timeout.set(function () {\n      if (hoverStateRef.current === 'show') setShow(true);\n    }, delay.show);\n  }, [delay.show, setShow, timeout]);\n  var handleHide = useCallback(function () {\n    timeout.clear();\n    hoverStateRef.current = 'hide';\n\n    if (!delay.hide) {\n      setShow(false);\n      return;\n    }\n\n    timeout.set(function () {\n      if (hoverStateRef.current === 'hide') setShow(false);\n    }, delay.hide);\n  }, [delay.hide, setShow, timeout]);\n  var handleFocus = useCallback(function () {\n    handleShow();\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    onFocus == null ? void 0 : onFocus.apply(void 0, args);\n  }, [handleShow, onFocus]);\n  var handleBlur = useCallback(function () {\n    handleHide();\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    onBlur == null ? void 0 : onBlur.apply(void 0, args);\n  }, [handleHide, onBlur]);\n  var handleClick = useCallback(function () {\n    setShow(!show);\n    if (onClick) onClick.apply(void 0, arguments);\n  }, [onClick, setShow, show]);\n  var handleMouseOver = useCallback(function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    handleMouseOverOut(handleShow, args, 'fromElement');\n  }, [handleShow]);\n  var handleMouseOut = useCallback(function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    handleMouseOverOut(handleHide, args, 'toElement');\n  }, [handleHide]);\n  var triggers = trigger == null ? [] : [].concat(trigger);\n  var triggerProps = {};\n\n  if (triggers.indexOf('click') !== -1) {\n    triggerProps.onClick = handleClick;\n  }\n\n  if (triggers.indexOf('focus') !== -1) {\n    triggerProps.onFocus = handleFocus;\n    triggerProps.onBlur = handleBlur;\n  }\n\n  if (triggers.indexOf('hover') !== -1) {\n    process.env.NODE_ENV !== \"production\" ? warning(triggers.length > 1, '[react-bootstrap] Specifying only the `\"hover\"` trigger limits the visibility of the overlay to just mouse users. Consider also including the `\"focus\"` trigger so that touch and keyboard only users can see the overlay as well.') : void 0;\n    triggerProps.onMouseOver = handleMouseOver;\n    triggerProps.onMouseOut = handleMouseOut;\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, typeof children === 'function' ? children(_extends({}, triggerProps, {\n    ref: triggerNodeRef\n  })) : /*#__PURE__*/React.createElement(RefHolder, {\n    ref: triggerNodeRef\n  }, /*#__PURE__*/cloneElement(children, triggerProps)), /*#__PURE__*/React.createElement(Overlay, _extends({}, props, {\n    show: show,\n    onHide: handleHide,\n    flip: flip,\n    placement: placement,\n    popperConfig: popperConfig,\n    target: getTarget\n  }), overlay));\n}\n\nOverlayTrigger.defaultProps = defaultProps;\nexport default OverlayTrigger;","import { faCheckSquare, faSquare } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport Badge from 'react-bootstrap/Badge';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport { ICalculatedStats } from '../Types/stats';\r\nimport IConditional, { IConditionalValue } from '../Types/IConditional';\r\nimport { evalIfFunc } from '../Util/Util';\r\n\r\nexport default function ConditionalSelector({ conditional, conditionalValue, setConditional, name, disabled, stats }:\r\n  { conditional: IConditional, conditionalValue: IConditionalValue, setConditional: (newCond: IConditionalValue) => void, name: Displayable, disabled?: boolean, stats: ICalculatedStats }) {\r\n  const [conditionalNum = 0, conditionalStateKey] = conditionalValue\r\n  if (!conditional) return name as JSX.Element\r\n  if (\"states\" in conditional) {//complex conditional\r\n    const state = conditionalStateKey ? conditional.states[conditionalStateKey] : Object.values(conditional.states)[0]\r\n    const text = conditionalNum === 0 ? \"Not Active\" : <span>{state.name} {(evalIfFunc(state!.maxStack, stats) as number > 1 ? (`: ${conditionalNum} stack${conditionalNum > 1 ? \"s\" : \"\"}`) : \"\")}</span>\r\n    const badge = <Badge variant={conditionalNum === 0 ? \"secondary\" : \"success\"}>{text}</Badge>\r\n    return <Dropdown>\r\n      <Dropdown.Toggle size=\"sm\" disabled={disabled}>\r\n        <h6 className=\"mb-0 d-inline\" style={{ whiteSpace: \"normal\" }}>{name} {badge}</h6>\r\n      </Dropdown.Toggle>\r\n      <Dropdown.Menu>\r\n        <Dropdown.Item onClick={() => setConditional([0])}>\r\n          <span>Not Active</span>\r\n        </Dropdown.Item>\r\n        {Object.entries(conditional.states).map(([stateKey, condial]: any, i) =>\r\n          <React.Fragment key={i}>\r\n            {[...Array(condial.maxStack).keys()].map(v => v + 1).map((stack, i) =>\r\n              <Dropdown.Item key={stateKey + i} onClick={() => setConditional([stack, stateKey])}>\r\n                {condial.name}{condial.maxStack > 1 ? `: ${stack} stack${stack > 1 ? \"s\" : \"\"}` : \"\"}\r\n              </Dropdown.Item>)}\r\n          </React.Fragment>\r\n        )}\r\n      </Dropdown.Menu>\r\n    </Dropdown>\r\n  } else {\r\n    const maxStack = evalIfFunc(conditional!.maxStack, stats) as number\r\n    if (maxStack > 1) {\r\n      //stacking conditional\r\n      const badge = <Badge variant={conditionalNum === 0 ? \"secondary\" : \"success\"}>{conditionalNum > 0 ? `${conditionalNum} stack${conditionalNum > 1 ? \"s\" : \"\"}` : \"Not Active\"}</Badge>\r\n      return <Dropdown>\r\n        <Dropdown.Toggle size=\"sm\" disabled={disabled}>\r\n          <h6 className=\"mb-0 d-inline\" style={{ whiteSpace: \"normal\" }}>{name} {badge}</h6>\r\n        </Dropdown.Toggle>\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item onClick={() => setConditional([0])}>\r\n            <span>Not Active</span>\r\n          </Dropdown.Item>\r\n          {[...Array(maxStack).keys()].map(v => v + 1).map(stack =>\r\n            <Dropdown.Item key={stack} onClick={() => setConditional([stack])}>\r\n              {`${stack} stack${stack > 1 ? \"s\" : \"\"}`}\r\n            </Dropdown.Item>)}\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    } else if (maxStack === 1) {//single boolean conditional\r\n      return <Button size=\"sm\" onClick={() => setConditional([conditionalNum ? 0 : 1])} disabled={disabled}>\r\n        <h6 className=\"mb-0\"><FontAwesomeIcon icon={conditionalNum ? faCheckSquare : faSquare} /> {name}</h6>\r\n      </Button>\r\n    }\r\n  }\r\n  return null\r\n}","import { useCallback, useContext, useMemo } from \"react\"\r\nimport { Card, ListGroup } from \"react-bootstrap\"\r\nimport { CharacterKey } from \"../../pipeline\"\r\nimport { buildContext } from \"../Build/Build\"\r\nimport Conditional from \"../Conditional/Conditional\"\r\nimport ConditionalSelector from \"../Conditional/ConditionalSelector\"\r\nimport useCharacterReducer from \"../ReactHooks/useCharacterReducer\"\r\nimport IConditional from \"../Types/IConditional\"\r\nimport statsToFields from \"../Util/FieldUtil\"\r\nimport { deletePropPath, layeredAssignment, objClearEmpties } from \"../Util/Util\"\r\nimport FieldDisplay from \"./FieldDisplay\"\r\n\r\ntype ConditionalDisplayProps = {\r\n  conditional: IConditional,\r\n  characterKey: CharacterKey\r\n  fieldClassName?: string\r\n}\r\n\r\nexport default function ConditionalDisplay({ conditional, characterKey, fieldClassName }: ConditionalDisplayProps) {\r\n  const { newBuild, equippedBuild } = useContext(buildContext)\r\n  const characterDispatch = useCharacterReducer(characterKey)\r\n  const stats = newBuild ? newBuild : equippedBuild\r\n  const canShow = useMemo(() => Conditional.canShow(conditional, stats), [conditional, stats])\r\n  const { stats: conditionalStats = {}, fields: conditionalFields = [], conditionalValue } = useMemo(() => canShow && Conditional.resolve(conditional, stats, undefined), [canShow, conditional, stats])\r\n  const displayFields = useMemo(() => canShow && [...statsToFields(conditionalStats, stats), ...conditionalFields], [canShow, conditionalStats, stats, conditionalFields])\r\n  const setConditional = useCallback(condV => {\r\n    if (!stats) return\r\n    const [conditionalNum = 0] = condV\r\n    if (!conditionalNum) {\r\n      deletePropPath(stats.conditionalValues, conditional!.keys)\r\n      objClearEmpties(stats.conditionalValues)\r\n    } else if (conditional.keys)\r\n      layeredAssignment(stats.conditionalValues, conditional!.keys, condV)\r\n    characterDispatch({ conditionalValues: stats.conditionalValues })\r\n  }, [conditional, stats, characterDispatch])\r\n\r\n  if (!canShow || !stats) return null\r\n  return <Card bg=\"darkcontent\" text={\"lightfont\" as any} className=\"mb-2 w-100\">\r\n    <Card.Header className=\"p-2\">\r\n      <ConditionalSelector\r\n        conditional={conditional}\r\n        conditionalValue={conditionalValue}\r\n        setConditional={setConditional}\r\n        name={conditional.name}\r\n        stats={stats} />\r\n    </Card.Header>\r\n    <ListGroup className=\"text-white\" variant=\"flush\">\r\n      {displayFields.map((field, i) => <FieldDisplay key={i} index={i} field={field} className={fieldClassName} />)}\r\n    </ListGroup>\r\n  </Card>\r\n}","import { useContext } from \"react\"\r\nimport { ListGroup } from \"react-bootstrap\"\r\nimport { buildContext } from \"../Build/Build\"\r\nimport { DocumentSection } from \"../Types/character\"\r\nimport { CharacterKey } from \"../Types/consts\"\r\nimport { evalIfFunc } from \"../Util/Util\"\r\nimport ConditionalDisplay from \"./ConditionalDisplay\"\r\nimport FieldDisplay from \"./FieldDisplay\"\r\n\r\ntype SkillDisplayCardProps = {\r\n  sections: DocumentSection[],\r\n  characterKey: CharacterKey,\r\n}\r\nexport default function DocumentDisplay({ sections, characterKey }: SkillDisplayCardProps) {\r\n  const { newBuild, equippedBuild } = useContext(buildContext)\r\n  const build = newBuild ? newBuild : equippedBuild\r\n  if (!build) return null\r\n  return <div className=\"w-100\">{sections?.map((section, i) => {\r\n    if (!section.canShow!(build)) return null\r\n    const talentText = evalIfFunc(section.text, build)\r\n    const fields = section.fields ?? []\r\n    return <div className=\"my-2\" key={\"section\" + i}>\r\n      <div>\r\n        <div className=\"mb-2\">{talentText}</div>\r\n        {fields.length > 0 && <ListGroup className=\"text-white mb-2\">\r\n          {fields?.map?.((field, i) => <FieldDisplay key={i} index={i} field={field} />)}\r\n        </ListGroup>}\r\n      </div>\r\n      {!!section.conditional && <ConditionalDisplay conditional={section.conditional} characterKey={characterKey} />}\r\n    </div>\r\n  })}</div>\r\n}\r\n","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"bsPrefix\", \"size\", \"hasValidation\", \"className\", \"as\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar InputGroupAppend = createWithBsPrefix('input-group-append');\nvar InputGroupPrepend = createWithBsPrefix('input-group-prepend');\nvar InputGroupText = createWithBsPrefix('input-group-text', {\n  Component: 'span'\n});\n\nvar InputGroupCheckbox = function InputGroupCheckbox(props) {\n  return /*#__PURE__*/React.createElement(InputGroupText, null, /*#__PURE__*/React.createElement(\"input\", _extends({\n    type: \"checkbox\"\n  }, props)));\n};\n\nvar InputGroupRadio = function InputGroupRadio(props) {\n  return /*#__PURE__*/React.createElement(InputGroupText, null, /*#__PURE__*/React.createElement(\"input\", _extends({\n    type: \"radio\"\n  }, props)));\n};\n\n/**\n *\n * @property {InputGroupAppend} Append\n * @property {InputGroupPrepend} Prepend\n * @property {InputGroupText} Text\n * @property {InputGroupRadio} Radio\n * @property {InputGroupCheckbox} Checkbox\n */\nvar InputGroup = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      size = _ref.size,\n      hasValidation = _ref.hasValidation,\n      className = _ref.className,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'input-group');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, bsPrefix, size && bsPrefix + \"-\" + size, hasValidation && 'has-validation')\n  }));\n});\nInputGroup.displayName = 'InputGroup';\n\nvar InputGroupWithExtras = _extends({}, InputGroup, {\n  Text: InputGroupText,\n  Radio: InputGroupRadio,\n  Checkbox: InputGroupCheckbox,\n  Append: InputGroupAppend,\n  Prepend: InputGroupPrepend\n});\n\nexport default InputGroupWithExtras;","import React from \"react\"\r\nimport { Card, ListGroup } from \"react-bootstrap\"\r\nimport FieldDisplay from \"../Components/FieldDisplay\"\r\nimport { ICalculatedStats } from \"../Types/stats\"\r\nimport statsToFields from \"../Util/FieldUtil\"\r\nexport default function WeaponStatsCard({ title, statsVals = {}, stats }: { title: Displayable, statsVals?: object, stats: ICalculatedStats }) {\r\n  if ((Object.keys(statsVals ?? {}) as any).length === 0) return null\r\n  const fields = statsToFields(statsVals, stats)\r\n  return <Card bg=\"darkcontent\" text={\"lightfont\" as any} className=\"mb-2\">\r\n    <Card.Header className=\"py-2 px-3\">{title}</Card.Header>\r\n    <ListGroup className=\"text-white\" variant=\"flush\">\r\n      {fields.map((field, i) => <FieldDisplay key={i} index={i} field={field} className=\"px-3 py-2\" />)}\r\n    </ListGroup>\r\n  </Card>\r\n}","import { faExchangeAlt, faTimes } from \"@fortawesome/free-solid-svg-icons\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport { useCallback, useContext, useEffect, useMemo, useState } from \"react\"\r\nimport { Badge, Button, ButtonGroup, Card, Col, Dropdown, Image, InputGroup, Modal, Row } from \"react-bootstrap\"\r\nimport { CharacterKey } from \"../../pipeline\"\r\nimport Assets from \"../Assets/Assets\"\r\nimport { buildContext } from \"../Build/Build\"\r\nimport CharacterSheet from \"../Character/CharacterSheet\"\r\nimport CustomFormControl from \"../Components/CustomFormControl\"\r\nimport DocumentDisplay from \"../Components/DocumentDisplay\"\r\nimport EquipmentDropdown from \"../Components/EquipmentDropdown\"\r\nimport { Stars } from \"../Components/StarDisplay\"\r\nimport { ambiguousLevel, ascensionMaxLevel, milestoneLevels } from \"../Data/LevelData\"\r\nimport { database as localDatabase, DatabaseContext } from \"../Database/Database\"\r\nimport useForceUpdate from \"../ReactHooks/useForceUpdate\"\r\nimport usePromise from \"../ReactHooks/usePromise\"\r\nimport { ICachedCharacter } from \"../Types/character\"\r\nimport { ICalculatedStats } from \"../Types/stats\"\r\nimport { ICachedWeapon } from \"../Types/weapon\"\r\nimport { clamp } from \"../Util/Util\"\r\nimport WeaponCard from \"./WeaponCard\"\r\nimport { WeaponSelectionButton } from \"./WeaponSelection\"\r\nimport WeaponSheet from \"./WeaponSheet\"\r\nimport WeaponStatsCard from \"./WeaponStatsCard\"\r\n\r\ntype WeaponStatsEditorCardProps = {\r\n  weaponId: string\r\n  charData?: {\r\n    character: ICachedCharacter,\r\n    characterSheet: CharacterSheet,\r\n    equippedBuild?: ICalculatedStats\r\n    newBuild?: ICalculatedStats\r\n    characterDispatch: (any) => void\r\n  }\r\n  footer?: boolean\r\n  onClose?: () => void\r\n}\r\nexport default function WeaponDisplayCard({\r\n  weaponId: propWeaponId,\r\n  charData,\r\n  footer = false,\r\n  onClose\r\n}: WeaponStatsEditorCardProps) {\r\n  const database = useContext(DatabaseContext)\r\n  // Use databaseToken anywhere `database._get*` is used\r\n  // Use onDatabaseUpdate when `following` database entries\r\n  const [databaseToken, onDatabaseUpdate] = useForceUpdate()\r\n\r\n  const buildContextObj = useContext(buildContext)\r\n  const weapon = useMemo(() =>\r\n    databaseToken && database._getWeapon(propWeaponId!)!,\r\n    [propWeaponId, databaseToken, database])\r\n  const { key, level, refinement, ascension } = weapon\r\n  const { location = \"\", id } = weapon as Partial<ICachedWeapon>\r\n  const weaponSheet: WeaponSheet | undefined = usePromise(WeaponSheet.get(key), [key])\r\n  const weaponTypeKey = weaponSheet?.weaponType\r\n\r\n  useEffect(() =>\r\n    propWeaponId ? database.followWeapon(propWeaponId, onDatabaseUpdate) : undefined,\r\n    [propWeaponId, onDatabaseUpdate, database])\r\n\r\n  const weaponDispatch = useCallback((newWeapon: Partial<ICachedWeapon>) => {\r\n    database.updateWeapon(newWeapon, propWeaponId)\r\n  }, [propWeaponId, database])\r\n\r\n  const setLevel = useCallback(level => {\r\n    level = clamp(level, 1, 90)\r\n    const ascension = ascensionMaxLevel.findIndex(ascenML => level <= ascenML)\r\n    weaponDispatch({ level, ascension })\r\n  }, [weaponDispatch])\r\n\r\n  const setAscension = useCallback(() => {\r\n    const lowerAscension = ascensionMaxLevel.findIndex(ascenML => level !== 90 && level === ascenML)\r\n    if (ascension === lowerAscension) weaponDispatch({ ascension: ascension + 1 })\r\n    else weaponDispatch({ ascension: lowerAscension })\r\n  }, [weaponDispatch, ascension, level])\r\n\r\n  const build = { ...(charData ? (charData.newBuild ?? charData.equippedBuild) : { weapon: { refineIndex: refinement - 1, level, ascension } }) } as any\r\n\r\n  const characterSheet = usePromise(location ? CharacterSheet.get(location) : undefined, [location])\r\n  const weaponFilter = characterSheet ? (ws) => ws.weaponType === characterSheet.weaponTypeKey : undefined\r\n  return <Card bg=\"lightcontent\" text={\"lightfont\" as any} className=\"mb-2\">\r\n    <Card.Header>\r\n      <Row>\r\n        <Col>\r\n          <Row className=\"mb-n2\">\r\n            <Col className=\"mb-2\">\r\n              <InputGroup >\r\n                <ButtonGroup as={InputGroup.Prepend}>\r\n                  <WeaponSelectionButton weaponSheet={weaponSheet} onSelect={k => weaponDispatch({ key: k })} filter={weaponFilter} />\r\n                  <Dropdown as={ButtonGroup}>\r\n                    <Dropdown.Toggle as={Button}>Refinement {refinement}</Dropdown.Toggle>\r\n                    <Dropdown.Menu>\r\n                      <Dropdown.ItemText>\r\n                        <span>Select Weapon Refinement</span>\r\n                      </Dropdown.ItemText>\r\n                      <Dropdown.Divider />\r\n                      {[...Array(5).keys()].map(key =>\r\n                        <Dropdown.Item key={key} onClick={() => weaponDispatch({ refinement: key + 1 })}>\r\n                          {`Refinement ${key + 1}`}\r\n                        </Dropdown.Item>)}\r\n                    </Dropdown.Menu>\r\n                  </Dropdown>\r\n                </ButtonGroup>\r\n              </InputGroup>\r\n            </Col>\r\n            <Col className=\"mb-2\" xs=\"auto\">\r\n              <InputGroup >\r\n                <InputGroup.Prepend>\r\n                  <InputGroup.Text><strong>Lvl. </strong></InputGroup.Text>\r\n                </InputGroup.Prepend>\r\n                <InputGroup.Append>\r\n                  <CustomFormControl placeholder={undefined} onChange={setLevel} value={level} min={1} max={90} />\r\n                </InputGroup.Append>\r\n                <ButtonGroup as={InputGroup.Append}>\r\n                  <Button disabled={!ambiguousLevel(level)} onClick={setAscension}><strong>/ {ascensionMaxLevel[ascension]}</strong></Button>\r\n                  <Dropdown as={ButtonGroup}>\r\n                    <Dropdown.Toggle as={Button}>Select Level</Dropdown.Toggle>\r\n                    <Dropdown.Menu>\r\n                      {milestoneLevels.map(([lv, as]) => {\r\n                        const sameLevel = lv === ascensionMaxLevel[as]\r\n                        const lvlstr = sameLevel ? `Lv. ${lv}` : `Lv. ${lv}/${ascensionMaxLevel[as]}`\r\n                        return <Dropdown.Item key={`${lv}/${as}`} onClick={() => weaponDispatch({ level: lv, ascension: as })}>{lvlstr}</Dropdown.Item>\r\n                      })}\r\n                    </Dropdown.Menu>\r\n                  </Dropdown>\r\n                </ButtonGroup>\r\n              </InputGroup>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n        {!!onClose && <Col xs=\"auto\" >\r\n          <Button variant=\"danger\" onClick={onClose}>\r\n            <FontAwesomeIcon icon={faTimes} /></Button>\r\n        </Col>}\r\n        {!!charData && database === localDatabase && <Col xs=\"auto\">\r\n          <SwapBtn weaponTypeKey={weaponTypeKey} onChangeId={id => database.setWeaponLocation(id, charData.character.key)} />\r\n        </Col>}\r\n      </Row>\r\n    </Card.Header>\r\n    <Card.Body >\r\n      {(() => {\r\n        if (!weaponSheet) return null\r\n        const substatKey = weaponSheet.getSubStatKey()\r\n        const weaponDisplayMainVal = weaponSheet.getMainStatValue(level, ascension)\r\n        const weaponDisplaySubVal = weaponSheet.getSubStatValue(level, ascension)\r\n        const weaponPassiveName = weaponSheet.passiveName\r\n        const weaponBonusStats = weaponSheet.stats(build)\r\n        const sections = weaponSheet.document\r\n\r\n        return <Row className=\"mb-n2\">\r\n          <Col xs={12} md={3} lg={4}>\r\n            <Image src={weaponSheet.img} className={`w-100 h-auto grad-${weaponSheet.rarity}star`} thumbnail />\r\n            <small>{weaponSheet.description}</small>\r\n          </Col>\r\n          <Col>\r\n            <h5 className=\"mb-0\">{process.env.NODE_ENV === \"development\" && <span className=\"text-warning\">{id || `\"\"`} </span>}{weaponSheet.name} Lv. {WeaponSheet.getLevelString(weapon)} {weaponPassiveName && <Badge variant=\"info\">Refinement {refinement}</Badge>}</h5>\r\n            <div className=\"mb-2\"><Stars stars={weaponSheet.rarity} /></div>\r\n            <h6>{weaponPassiveName}</h6>\r\n            <div className=\"mb-2\">{weaponPassiveName && weaponSheet.passiveDescription(build)}</div>\r\n            {build && <buildContext.Provider value={charData ? buildContextObj : { equippedBuild: build, newBuild: undefined, compareBuild: false, setCompareBuild: undefined }}>\r\n              <WeaponStatsCard title={\"Main Stats\"} statsVals={{ atk: weaponDisplayMainVal, [substatKey]: substatKey ? weaponDisplaySubVal : undefined }} stats={build} />\r\n              <WeaponStatsCard title={\"Bonus Stats\"} statsVals={weaponBonusStats} stats={build} />\r\n            </buildContext.Provider>}\r\n            {charData && sections ? (() => {\r\n              const { equippedBuild, newBuild } = charData\r\n              const characterKey = (newBuild ? newBuild : equippedBuild)?.characterKey as CharacterKey | undefined\r\n              return !!characterKey && < DocumentDisplay  {...{ sections, equippedBuild, newBuild, characterKey }} />\r\n            })() : null}\r\n          </Col>\r\n        </Row>\r\n      })()}\r\n    </Card.Body>\r\n    {footer && id && <Card.Footer><Row>\r\n      <Col><EquipmentDropdown location={location} onEquip={cKey => database.setWeaponLocation(id, cKey)} weaponTypeKey={weaponSheet?.weaponType} disableUnequip={!!weapon.location} disabled={database === localDatabase} /></Col>\r\n      {!!onClose && <Col xs=\"auto\"><Button variant=\"danger\" onClick={onClose}>Close</Button></Col>}\r\n    </Row></Card.Footer>}\r\n  </Card>\r\n}\r\nfunction SwapBtn({ onChangeId, weaponTypeKey }) {\r\n  const database = useContext(DatabaseContext)\r\n  const [show, setShow] = useState(false)\r\n  const open = () => setShow(true)\r\n  const close = () => setShow(false)\r\n\r\n  const clickHandler = (id) => {\r\n    onChangeId(id)\r\n    close()\r\n  }\r\n\r\n  const weaponSheets = usePromise(WeaponSheet.getAll(), [])\r\n\r\n  const weaponIdList = database.weapons.keys.filter(wKey => {\r\n    const dbWeapon = database._getWeapon(wKey)\r\n    if (!dbWeapon) return false\r\n    if (weaponTypeKey && weaponTypeKey !== weaponSheets?.[dbWeapon.key]?.weaponType) return false\r\n    return true\r\n  })\r\n\r\n\r\n  return <>\r\n    <Button variant=\"info\" onClick={open} ><FontAwesomeIcon icon={faExchangeAlt} /> SWAP WEAPON</Button>\r\n    <Modal show={show} size=\"xl\" contentClassName=\"bg-transparent\" onHide={close}>\r\n      <Card bg=\"lightcontent\" text={\"lightfont\" as any}>\r\n        <Card.Header>\r\n          <Row>\r\n            <Col>{weaponTypeKey ? <Image src={Assets.weaponTypes[weaponTypeKey]} className=\"inline-icon\" /> : null} <h5 className=\"mb-0 d-inline\">Swap Weapon</h5></Col>\r\n            <Col xs=\"auto\">\r\n              <Button onClick={close} variant=\"danger\"><FontAwesomeIcon icon={faTimes} /></Button>\r\n            </Col>\r\n          </Row>\r\n        </Card.Header>\r\n        <Card.Body>\r\n          <Row>\r\n            {weaponIdList.map(weaponId =>\r\n              <Col key={weaponId} lg={4} md={6} className=\"mb-2\">\r\n                <WeaponCard\r\n                  weaponId={weaponId}\r\n                  cardClassName=\"h-100\"\r\n                  onClick={clickHandler}\r\n                  footer\r\n                />\r\n              </Col>)}\r\n          </Row>\r\n        </Card.Body>\r\n      </Card>\r\n    </Modal></>\r\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"active\", \"disabled\", \"className\", \"variant\", \"action\", \"as\", \"onClick\"];\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\nimport AbstractNavItem from './AbstractNavItem';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  variant: undefined,\n  active: false,\n  disabled: false\n};\nvar ListGroupItem = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      active = _ref.active,\n      disabled = _ref.disabled,\n      className = _ref.className,\n      variant = _ref.variant,\n      action = _ref.action,\n      as = _ref.as,\n      onClick = _ref.onClick,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'list-group-item');\n  var handleClick = useCallback(function (event) {\n    if (disabled) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n\n    if (onClick) onClick(event);\n  }, [disabled, onClick]);\n\n  if (disabled && props.tabIndex === undefined) {\n    props.tabIndex = -1;\n    props['aria-disabled'] = true;\n  }\n\n  return /*#__PURE__*/React.createElement(AbstractNavItem, _extends({\n    ref: ref\n  }, props, {\n    // eslint-disable-next-line no-nested-ternary\n    as: as || (action ? props.href ? 'a' : 'button' : 'div'),\n    onClick: handleClick,\n    className: classNames(className, bsPrefix, active && 'active', disabled && 'disabled', variant && bsPrefix + \"-\" + variant, action && bsPrefix + \"-action\")\n  }));\n});\nListGroupItem.defaultProps = defaultProps;\nListGroupItem.displayName = 'ListGroupItem';\nexport default ListGroupItem;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"bsPrefix\", \"variant\", \"horizontal\", \"as\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport warning from 'warning';\nimport { useUncontrolled } from 'uncontrollable';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AbstractNav from './AbstractNav';\nimport ListGroupItem from './ListGroupItem';\nvar defaultProps = {\n  variant: undefined,\n  horizontal: undefined\n};\nvar ListGroup = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useUncontrolled = useUncontrolled(props, {\n    activeKey: 'onSelect'\n  }),\n      className = _useUncontrolled.className,\n      initialBsPrefix = _useUncontrolled.bsPrefix,\n      variant = _useUncontrolled.variant,\n      horizontal = _useUncontrolled.horizontal,\n      _useUncontrolled$as = _useUncontrolled.as,\n      as = _useUncontrolled$as === void 0 ? 'div' : _useUncontrolled$as,\n      controlledProps = _objectWithoutPropertiesLoose(_useUncontrolled, _excluded);\n\n  var bsPrefix = useBootstrapPrefix(initialBsPrefix, 'list-group');\n  var horizontalVariant;\n\n  if (horizontal) {\n    horizontalVariant = horizontal === true ? 'horizontal' : \"horizontal-\" + horizontal;\n  } else {\n    horizontalVariant = null;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(!(horizontal && variant === 'flush'), '`variant=\"flush\"` and `horizontal` should not be used together.') : void 0;\n  return /*#__PURE__*/React.createElement(AbstractNav, _extends({\n    ref: ref\n  }, controlledProps, {\n    as: as,\n    className: classNames(className, bsPrefix, variant && bsPrefix + \"-\" + variant, horizontalVariant && bsPrefix + \"-\" + horizontalVariant)\n  }));\n});\nListGroup.defaultProps = defaultProps;\nListGroup.displayName = 'ListGroup';\nListGroup.Item = ListGroupItem;\nexport default ListGroup;"],"sourceRoot":""}