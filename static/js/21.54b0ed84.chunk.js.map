{"version":3,"sources":["Components/SqBadge.tsx","Character/Character.ts","ReactHooks/useCharacterReducer.tsx","Components/FieldDisplay.tsx","Components/CustomNumberInput.tsx","Components/BootstrapTooltip.tsx","Conditional/ConditionalSelector.tsx","Components/ConditionalDisplay.tsx","Components/DocumentDisplay.tsx","StatDependency.ts","Weapon/WeaponStatsCard.tsx","Weapon/WeaponDisplayCard.tsx","../node_modules/@mui/icons-material/esm/CheckBox.js","../node_modules/@mui/icons-material/esm/CheckBoxOutlineBlank.js","../node_modules/@mui/material/ListItem/listItemClasses.js","../node_modules/@mui/material/ListItemSecondaryAction/listItemSecondaryActionClasses.js","../node_modules/@mui/material/ListItemSecondaryAction/ListItemSecondaryAction.js","../node_modules/@mui/material/ListItem/ListItem.js","../node_modules/@mui/icons-material/esm/SwapHoriz.js"],"names":["SqBadge","styled","name","slot","theme","color","display","padding","fontSize","fontWeight","lineHeight","textAlign","whiteSpace","verticalAlign","borderRadius","backgroundColor","palette","main","contrastText","Character","this","Error","getElementalName","elementalKey","ElementalData","getLevelString","character","level","ascensionMaxLevel","ascension","getTalentFieldValue","field","key","stats","defVal","evalIfFunc","hasBonusStats","statKey","bonusStats","getStatValueWithBonus","characterBaseStats","calculateBuild","database","characterSheet","weaponSheet","artifactSheets","mainStatAssumptionLevel","artifacts","Object","fromEntries","entries","equippedArtifacts","map","artid","_getArt","initialStats","createInitialStats","calculateBuildwithArtifact","setToSlots","Artifact","artifactSetEffectsStats","ArtifactSheet","setEffectsStats","deepClone","values","forEach","art","mainStatKey","mainStatValue","rarity","Math","max","min","substats","substat","value","mergeStats","Conditional","parseConditionalValues","artifact","conditionalValues","conditional","conditionalValue","setKey","setNumKey","parseInt","length","condStats","resolve","val","id","dependencies","GetDependencies","modifiers","PreprocessFormulas","preprocessedStats","formula","characterKey","elementKey","hitMode","infusionAura","reactionMode","talent","constellation","equippedWeapon","weapon","_getWeapon","defaultInitialWeapon","weaponTypeKey","UIOverrideStatkeys","characterLevel","characterHP","getBase","characterDEF","characterATK","characterEle","weaponType","tlvl","refineIndex","refinement","specialStatKey","getSpecializedStat","specializedStatVal","getSpecializedStatVal","getTalentStatsAll","s","weaponATK","getMainStatValue","weaponSubKey","getSubStatKey","getSubStatValue","weaponCond","otherCond","keys","canShow","getDisplayStatKeys","eleKey","basicKeys","isAutoElemental","push","transReactions","ElementToReactionKeys","includes","charFormulas","talentSheet","getTalent","addFormula","fields","parseSection","section","sheets","talentKey","sections","formKey","document","num","artifactSheet","setEffects","setNum","useCharacterReducer","useContext","DatabaseContext","useCallback","action","type","setWeaponLocation","_getChar","updateChar","FieldDisplay","buildContext","newBuild","equippedBuild","compareBuild","build","useMemo","fixedVal","fixed","fieldVal","retVal","fieldEquippedVal","toFixed","diff","fieldText","fieldVariant","formulaTextOverlay","fieldFormulaText","placement","title","component","sx","cursor","ml","icon","faQuestionCircle","unit","justifyContent","FieldDisplayList","List","shape","overflow","margin","contentDark","contentDarker","StyledInputBase","InputBase","primary","transition","dark","CustomNumberInputButtonGroupWrapper","shouldForwardProp","prop","border","width","height","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","CustomNumberInput","onChange","disabled","float","props","useState","state","setState","sendChange","parseFunc","parseFloat","useEffect","toString","onInputChange","e","target","onKeyDOwn","aria-label","onBlur","onKeyDown","BootstrapTooltip","className","arrow","classes","popper","tooltipClasses","common","black","tooltip","ConditionalSelector","setConditional","conditionalNum","conditionalStateKey","states","text","maxStack","badge","DropdownButton","size","MenuItem","onClick","selected","Divider","flatMap","i","stateKey","condial","Array","v","stack","Button","startIcon","CheckBox","CheckBoxOutlineBlank","ConditionalDisplay","characterDispatch","undefined","conditionalStats","conditionalFields","displayFields","statsToFields","condV","layeredAssignment","deletePropPath","objClearEmpties","CardDark","CardContent","m","DocumentDisplay","talentText","Box","pb","mb","GetFormulaDependency","dependency","Set","Proxy","get","receiver","add","formulaKeyDependency","freeze","Formulas","baseStat","StatData","found","numStages","_","InsertDependencies","dep","has","k","path","Formula","getCurrent","getStage","WeaponStatsCard","statsVals","filter","Typography","WeaponDisplayCard","propWeaponId","weaponId","charData","footer","onClose","useForceUpdate","databaseToken","onDatabaseUpdate","buildContextObj","lock","location","usePromise","WeaponSheet","followWeapon","weaponDispatch","newWeapon","updateWeapon","setLevel","clamp","findIndex","ascenML","setAscension","lowerAscension","CharacterSheet","weaponFilter","ws","initialWeaponFilter","equipOnChar","charKey","cs","showModal","setshowModal","img","imgAwaken","CardLight","py","Grid","container","spacing","item","flexGrow","WeaponSelectionModal","show","onHide","onSelect","ButtonGroup","bgcolor","t","contentLight","startAdornment","inputProps","pl","ambiguousLevel","milestoneLevels","lv","as","lvlstr","Lock","LockOpen","CloseButton","localDatabase","SwapBtn","onChangeId","substatKey","weaponDisplayMainVal","weaponDisplaySubVal","weaponPassiveName","passiveName","weaponBonusStats","gap","xs","md","lg","maxWidth","flexShrink","minWidth","src","description","variant","process","stars","gutterBottom","passiveDescription","Provider","setCompareBuild","atk","CharacterDropdownButton","noUnselect","inventory","large","setShow","close","clickHandler","weaponSheets","getAll","weaponIdList","weapons","wKey","dbWeapon","SwapHoriz","ModalWrapper","open","ImgIcon","Assets","weaponTypes","sm","WeaponCard","createSvgIcon","_jsx","d","getListItemUtilityClass","generateUtilityClass","listItemClasses","generateUtilityClasses","getListItemSecondaryActionClassesUtilityClass","_excluded","ListItemSecondaryActionRoot","overridesResolver","styles","ownerState","root","disableGutters","_extends","position","right","top","transform","ListItemSecondaryAction","React","inProps","ref","useThemeProps","other","_objectWithoutPropertiesLoose","context","ListContext","slots","composeClasses","useUtilityClasses","clsx","muiName","_excluded2","ListItemRoot","dense","alignItems","alignItemsFlexStart","divider","gutters","disablePadding","button","hasSecondaryAction","secondaryAction","textDecoration","boxSizing","paddingTop","paddingBottom","paddingLeft","paddingRight","listItemButtonClasses","focusVisible","focus","alpha","selectedOpacity","focusOpacity","opacity","disabledOpacity","borderBottom","backgroundClip","transitions","create","duration","shortest","hover","hoverOpacity","ListItemContainer","ListItem","autoFocus","childrenProp","children","componentProp","components","componentsProps","ContainerComponent","ContainerProps","ContainerClassName","focusVisibleClassName","childContext","listItemRef","useEnhancedEffect","current","toArray","isMuiElement","handleRef","useForkRef","Root","rootProps","componentProps","Component","ButtonBase","_jsxs","isHostComponent","pop"],"mappings":"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","file":"static/js/21.54b0ed84.chunk.js","sourcesContent":["import { styled } from \"@mui/material\";\r\n\r\nconst SqBadge = styled(\"span\", {\r\n  name: 'SqBadge',\r\n  slot: 'Root',\r\n})(({ theme, color = \"primary\" }) => ({\r\n  display: \"inline-block\",\r\n  padding: \".25em .4em\",\r\n  fontSize: \"75%\",\r\n  fontWeight: 700,\r\n  lineHeight: 1,\r\n  textAlign: \"center\",\r\n  whiteSpace: \"nowrap\",\r\n  verticalAlign: \"baseline\",\r\n  borderRadius: \".25em\",\r\n  backgroundColor: theme.palette[color]?.main,\r\n  color: theme.palette[color]?.contrastText\r\n}))\r\nexport default SqBadge","import Artifact from \"../Artifact/Artifact\";\r\nimport { ArtifactSheet } from \"../Artifact/ArtifactSheet\";\r\nimport Conditional from \"../Conditional/Conditional\";\r\nimport { ascensionMaxLevel } from \"../Data/LevelData\";\r\nimport ElementalData from \"../Data/ElementalData\";\r\nimport { ArtCharDatabase } from \"../Database/Database\";\r\nimport { ElementToReactionKeys, PreprocessFormulas } from \"../StatData\";\r\nimport { GetDependencies } from \"../StatDependency\";\r\nimport { ICachedArtifact } from \"../Types/artifact\";\r\nimport { ICachedCharacter } from \"../Types/character\";\r\nimport { ArtifactSetKey, ElementKey, SlotKey } from \"../Types/consts\";\r\nimport { IFieldDisplay } from \"../Types/IFieldDisplay\";\r\nimport { ICalculatedStats } from \"../Types/stats\";\r\nimport { characterBaseStats, UIOverrideStatkeys, mergeStats } from \"../Util/StatUtil\";\r\nimport { deepClone, evalIfFunc } from \"../Util/Util\";\r\nimport WeaponSheet from \"../Weapon/WeaponSheet\";\r\nimport { defaultInitialWeapon } from \"../Weapon/WeaponUtil\";\r\nimport CharacterSheet from \"./CharacterSheet\";\r\n\r\nexport default class Character {\r\n  //do not instantiate.\r\n  constructor() { if (this instanceof Character) throw Error('A static class cannot be instantiated.'); }\r\n\r\n  static getElementalName = (elementalKey: ElementKey | \"physical\"): string =>\r\n    ElementalData[elementalKey].name\r\n  static getLevelString = (character: ICachedCharacter): string =>\r\n    `${character.level}/${ascensionMaxLevel[character.ascension]}`\r\n\r\n  static getTalentFieldValue = (field: IFieldDisplay, key: keyof IFieldDisplay, stats = {}, defVal = \"\"): any => {\r\n    if (!field[key]) return defVal\r\n    return evalIfFunc(field[key] as any, stats!)\r\n  }\r\n\r\n  static hasBonusStats = (character: ICachedCharacter, statKey): boolean => {\r\n    if (statKey === \"finalHP\")\r\n      return Character.hasBonusStats(character, \"hp\") || Character.hasBonusStats(character, \"hp_\") || Character.hasBonusStats(character, \"characterHP\")\r\n    if (statKey === \"finalDEF\")\r\n      return Character.hasBonusStats(character, \"def\") || Character.hasBonusStats(character, \"def_\") || Character.hasBonusStats(character, \"characterDEF\")\r\n    if (statKey === \"finalATK\")\r\n      return Character.hasBonusStats(character, \"atk\") || Character.hasBonusStats(character, \"atk_\") || Character.hasBonusStats(character, \"characterATK\")\r\n    return character?.bonusStats ? (statKey in character.bonusStats) : false;\r\n  }\r\n\r\n  static getStatValueWithBonus = (character: ICachedCharacter, statKey: string) => {\r\n    return character.bonusStats?.[statKey] ?? characterBaseStats(character)[statKey] ?? 0\r\n  }\r\n\r\n  static calculateBuild = (character: ICachedCharacter, database: ArtCharDatabase, characterSheet: CharacterSheet, weaponSheet: WeaponSheet, artifactSheets: StrictDict<ArtifactSetKey, ArtifactSheet>, mainStatAssumptionLevel = 0): ICalculatedStats => {\r\n    const artifacts = Object.fromEntries(Object.entries(character.equippedArtifacts).map(([key, artid]) => [key, database._getArt(artid)]))\r\n    const initialStats = Character.createInitialStats(character, database, characterSheet, weaponSheet)\r\n    initialStats.mainStatAssumptionLevel = mainStatAssumptionLevel\r\n    return Character.calculateBuildwithArtifact(initialStats, artifacts, artifactSheets)\r\n  }\r\n\r\n  static calculateBuildwithArtifact = (initialStats: ICalculatedStats, artifacts: Dict<SlotKey, ICachedArtifact>, artifactSheets: StrictDict<ArtifactSetKey, ArtifactSheet>): ICalculatedStats => {\r\n    const setToSlots = Artifact.setToSlots(artifacts)\r\n    const artifactSetEffectsStats = ArtifactSheet.setEffectsStats(artifactSheets, initialStats, setToSlots)\r\n\r\n    let stats = deepClone(initialStats)\r\n    //add artifact and artifactsets\r\n    Object.values(artifacts).forEach(art => {\r\n      if (!art) return\r\n      //main stats\r\n      stats[art.mainStatKey] = (stats[art.mainStatKey] || 0) + Artifact.mainStatValue(art.mainStatKey, art.rarity, Math.max(Math.min(stats.mainStatAssumptionLevel, art.rarity * 4), art.level))\r\n      //substats\r\n      art.substats.forEach((substat) =>\r\n        substat && substat.key && (stats[substat.key] = (stats[substat.key] || 0) + substat.value))\r\n    })\r\n    //setEffects\r\n    mergeStats(stats, artifactSetEffectsStats)\r\n    //setEffects conditionals\r\n    Conditional.parseConditionalValues({ artifact: stats?.conditionalValues?.artifact }, (conditional, conditionalValue, [, setKey, setNumKey]) => {\r\n      if (parseInt(setNumKey) > (setToSlots?.[setKey]?.length ?? 0)) return\r\n      const { stats: condStats } = Conditional.resolve(conditional, stats, conditionalValue)\r\n      mergeStats(stats, condStats)\r\n    })\r\n\r\n    stats.equippedArtifacts = Object.fromEntries(Object.entries(artifacts).map(([key, val]: any) => [key, val?.id]))\r\n    stats.setToSlots = setToSlots\r\n    let dependencies = GetDependencies(stats, stats?.modifiers)\r\n    const { initialStats: preprocessedStats, formula } = PreprocessFormulas(dependencies, stats)\r\n    formula(preprocessedStats)\r\n    return { ...stats, ...preprocessedStats }\r\n  }\r\n\r\n  static createInitialStats = (character: ICachedCharacter, database: ArtCharDatabase, characterSheet: CharacterSheet, weaponSheet: WeaponSheet): ICalculatedStats => {\r\n    const { key: characterKey, bonusStats = {}, elementKey, level, ascension, hitMode, infusionAura, reactionMode, talent, constellation, equippedArtifacts, conditionalValues = {}, equippedWeapon } = character\r\n    const weapon = database._getWeapon(equippedWeapon) ?? defaultInitialWeapon(characterSheet.weaponTypeKey) // need to ensure all characters have a weapon\r\n\r\n    //generate the initalStats obj with data from Character \r\n    const initialStats = characterBaseStats(character)\r\n    mergeStats(initialStats, bonusStats, UIOverrideStatkeys)\r\n    initialStats.characterKey = characterKey\r\n    initialStats.characterLevel = level\r\n    initialStats.characterHP = characterSheet.getBase(\"hp\", level, ascension)\r\n    initialStats.characterDEF = characterSheet.getBase(\"def\", level, ascension)\r\n    initialStats.characterATK = characterSheet.getBase(\"atk\", level, ascension)\r\n    initialStats.characterEle = characterSheet.elementKey ?? elementKey ?? \"anemo\";\r\n    initialStats.hitMode = hitMode;\r\n    initialStats.infusionAura = infusionAura\r\n    initialStats.reactionMode = reactionMode;\r\n    initialStats.conditionalValues = conditionalValues\r\n    initialStats.weaponType = characterSheet.weaponTypeKey\r\n    initialStats.tlvl = Object.fromEntries(Object.entries(talent ?? {}).map(([key, value]) => [key, value - 1])) as any;\r\n    initialStats.constellation = constellation\r\n    initialStats.ascension = ascension\r\n    initialStats.weapon = { key: weapon.key, refineIndex: weapon.refinement - 1 }\r\n    initialStats.equippedArtifacts = equippedArtifacts;\r\n\r\n    //add specialized stat\r\n    const specialStatKey = characterSheet.getSpecializedStat(ascension)\r\n    if (specialStatKey) {\r\n      const specializedStatVal = characterSheet.getSpecializedStatVal(ascension)\r\n      mergeStats(initialStats, { [specialStatKey]: specializedStatVal })\r\n    }\r\n\r\n    //add stats from all talents\r\n    characterSheet.getTalentStatsAll(initialStats as ICalculatedStats, initialStats.characterEle).forEach(s => mergeStats(initialStats, s))\r\n\r\n    //add levelBoosts, from Talent stats.\r\n    for (const key in initialStats.tlvl)\r\n      initialStats.tlvl[key] += initialStats[`${key}Boost`] ?? 0\r\n\r\n    //add stats from weapons\r\n    const weaponATK = weaponSheet.getMainStatValue(weapon.level, weapon.ascension)\r\n    initialStats.weaponATK = weaponATK\r\n    const weaponSubKey = weaponSheet.getSubStatKey()\r\n    if (weaponSubKey) mergeStats(initialStats, { [weaponSubKey]: weaponSheet.getSubStatValue(weapon.level, weapon.ascension) })\r\n    mergeStats(initialStats, weaponSheet.stats(initialStats as ICalculatedStats))\r\n\r\n\r\n    //Handle conditionals, without artifact, since the pipeline for that comes later.\r\n    const { artifact: artifactCond, weapon: weaponCond, ...otherCond } = conditionalValues\r\n\r\n    //handle conditionals. only the conditional applicable to the equipped weapon is parsed.\r\n    Conditional.parseConditionalValues({ ...weapon.key && { weapon: { [weapon.key]: weaponCond?.[weapon.key] } }, ...otherCond }, (conditional, conditionalValue, keys) => {\r\n      if (keys[0] === \"character\" && keys[3] === \"talents\" && keys[4] !== elementKey) return //fix for Traveler, make sure conditionals match element.\r\n      if (!Conditional.canShow(conditional, initialStats)) return\r\n      const { stats: condStats } = Conditional.resolve(conditional, initialStats, conditionalValue)\r\n      mergeStats(initialStats, condStats)\r\n    })\r\n    return initialStats as ICalculatedStats\r\n  }\r\n\r\n  static getDisplayStatKeys = (stats: ICalculatedStats, { characterSheet, weaponSheet, artifactSheets }: { characterSheet: CharacterSheet, weaponSheet: WeaponSheet, artifactSheets: StrictDict<ArtifactSetKey, ArtifactSheet> }) => {\r\n    const eleKey = stats.characterEle\r\n    const basicKeys = [\"finalHP\", \"finalATK\", \"finalDEF\", \"eleMas\", \"critRate_\", \"critDMG_\", \"heal_\", \"enerRech_\", `${eleKey}_dmg_`]\r\n    const isAutoElemental = characterSheet.isAutoElemental\r\n    if (!isAutoElemental) basicKeys.push(\"physical_dmg_\")\r\n\r\n    //show elemental interactions\r\n    const transReactions = deepClone(ElementToReactionKeys[eleKey])\r\n    const weaponTypeKey = characterSheet.weaponTypeKey\r\n    if (!transReactions.includes(\"shattered_hit\") && weaponTypeKey === \"claymore\") transReactions.push(\"shattered_hit\")\r\n    const charFormulas = {}\r\n    const talentSheet = characterSheet.getTalent(eleKey)\r\n    const addFormula = (fields, key) => fields.forEach(field => {\r\n      if (!field.formula || !field?.canShow?.(stats)) return\r\n      if (!charFormulas[key]) charFormulas[key] = []\r\n      charFormulas[key].push((field.formula as any).keys)\r\n    })\r\n    const parseSection = (section, key) => {\r\n      //conditional\r\n      if (section.conditional && Conditional.canShow(section.conditional, stats)) {\r\n        const { fields }: { fields?: Array<IFieldDisplay> } = Conditional.resolve(section.conditional, stats, null)\r\n        fields && addFormula(fields, key)\r\n      }\r\n      //fields\r\n      if (section.fields) addFormula(section.fields, key)\r\n    }\r\n    talentSheet && Object.entries(talentSheet.sheets).forEach(([talentKey, { sections }]) => {\r\n      if (talentKey === \"normal\" || talentKey === \"charged\" || talentKey === \"plunging\") talentKey = \"auto\"\r\n      sections.forEach(section => parseSection(section, `talentKey_${talentKey}`))\r\n    })\r\n\r\n    const formKey = `weapon_${stats.weapon.key}`\r\n    weaponSheet.document && weaponSheet.document.map(section => parseSection(section, formKey))\r\n\r\n    stats.setToSlots && Object.entries(stats.setToSlots).map(([setKey, slots]) => [setKey, slots.length]).forEach(([setKey, num]) => {\r\n      const artifactSheet = artifactSheets[setKey] as ArtifactSheet\r\n      if (!artifactSheet) return\r\n      Object.entries(artifactSheet.setEffects).forEach(([setNum, { document }]) => {\r\n        if (num < parseInt(setNum)) return\r\n        document && document.map(section => parseSection(section, `artifact_${setKey}_${setNum}`))\r\n      })\r\n    })\r\n\r\n    return { basicKeys, ...charFormulas, transReactions }\r\n  }\r\n}","import { useCallback, useContext } from \"react\";\r\nimport { DatabaseContext } from \"../Database/Database\";\r\nimport { ICachedCharacter } from \"../Types/character\";\r\nimport { CharacterKey } from \"../Types/consts\";\r\nimport { characterBaseStats } from \"../Util/StatUtil\";\r\n\r\ntype characterEquipWeapon = {\r\n  type: \"weapon\", id: string\r\n}\r\ntype characterReducerBonusStatsAction = {\r\n  type: \"bonusStats\",\r\n  statKey: string\r\n  value: any | undefined\r\n}\r\nexport type characterReducerAction = characterEquipWeapon | characterReducerBonusStatsAction | Partial<ICachedCharacter>\r\n\r\nexport default function useCharacterReducer(characterKey: CharacterKey) {\r\n  const database = useContext(DatabaseContext)\r\n\r\n  return useCallback((action: characterReducerAction): void => {\r\n    if (!characterKey) return\r\n\r\n    if (\"type\" in action) switch (action.type) {\r\n      case \"weapon\":\r\n        database.setWeaponLocation(action.id, characterKey)\r\n        break\r\n      case \"bonusStats\": {\r\n        const character = database._getChar(characterKey)!\r\n        const { statKey, value } = action\r\n        const bonusStats = character.bonusStats\r\n        if (bonusStats[statKey] === value) return\r\n\r\n        bonusStats[statKey] = value\r\n        if ((characterBaseStats(character)[statKey] ?? 0) === value)\r\n          delete bonusStats[statKey]\r\n\r\n        database.updateChar({ ...character, bonusStats })\r\n        break\r\n      }\r\n    } else\r\n      database.updateChar({ ...database._getChar(characterKey)!, ...action })\r\n  }, [characterKey, database])\r\n\r\n}","import { faQuestionCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Box, List, ListItem, styled, Typography } from \"@mui/material\";\r\nimport React, { useContext, useMemo } from 'react';\r\nimport { buildContext } from \"../Build/Build\";\r\nimport Character from \"../Character/Character\";\r\nimport { IFieldDisplay } from \"../Types/IFieldDisplay\";\r\nimport BootstrapTooltip from \"./BootstrapTooltip\";\r\nimport ColorText from \"./ColoredText\";\r\n\r\nexport default function FieldDisplay({ field }: { field: IFieldDisplay }) {\r\n  const { newBuild, equippedBuild, compareBuild } = useContext(buildContext)\r\n  const build = (newBuild ? newBuild : equippedBuild)\r\n  const canShow = useMemo(() => build ? field?.canShow?.(build) : false, [field, build])\r\n  const fixedVal = field?.fixed || 0\r\n  const fieldVal = useMemo(() => {\r\n    if (field.value) return Character.getTalentFieldValue(field, \"value\", build)\r\n    else if (field.formula) {\r\n      let retVal = Character.getTalentFieldValue(field, \"formula\", build)?.[0]?.(build)\r\n      //compareAgainstEquipped\r\n      if (compareBuild && equippedBuild && typeof retVal === \"number\") {\r\n        let fieldEquippedVal = field.value ? field.value : field.formula?.(equippedBuild)?.[0]?.(equippedBuild)\r\n        if (typeof fieldEquippedVal === \"function\")\r\n          fieldEquippedVal = parseInt(fieldEquippedVal?.(equippedBuild)?.toFixed?.(fixedVal))\r\n        let diff = retVal - fieldEquippedVal\r\n        retVal = <span>{fieldEquippedVal?.toFixed(fixedVal) ?? fieldEquippedVal}{diff ? <ColorText color={diff > 0 ? \"success\" : \"error\"}> ({diff > 0 ? \"+\" : \"\"}{diff?.toFixed?.(fixedVal) || diff})</ColorText> : \"\"}</span>\r\n      }\r\n      return retVal\r\n    }\r\n  }, [compareBuild, fixedVal, equippedBuild, field, build])\r\n\r\n  const fieldText = useMemo(() => Character.getTalentFieldValue(field, \"text\", build), [field, build])\r\n  const fieldVariant = useMemo(() => Character.getTalentFieldValue(field, \"variant\", build), [field, build])\r\n\r\n  const formulaTextOverlay = useMemo(() => {\r\n    const fieldFormulaText = Character.getTalentFieldValue(field, \"formulaText\", build)\r\n    return fieldFormulaText ? <BootstrapTooltip placement=\"top\" title={<Typography>{fieldFormulaText}</Typography>}>\r\n      <Box component=\"span\" sx={{ cursor: \"help\", ml: 1 }}><FontAwesomeIcon icon={faQuestionCircle} /></Box>\r\n    </BootstrapTooltip> : null\r\n  }, [field, build])\r\n\r\n  const unit = useMemo(() => Character.getTalentFieldValue(field, \"unit\", build), [field, build])\r\n\r\n  if (!canShow) return null\r\n  return <ListItem sx={{ display: \"flex\", justifyContent: \"space-between\" }}  >\r\n    <span><b>{fieldText}</b>{formulaTextOverlay}</span>\r\n    <Typography color={`${fieldVariant}.main`}>{fieldVal?.toFixed?.(fixedVal) ?? fieldVal}{unit}</Typography>\r\n  </ListItem>\r\n}\r\nexport const FieldDisplayList = styled(List)(({ theme }) => ({\r\n  borderRadius: theme.shape.borderRadius,\r\n  overflow: \"hidden\",\r\n  margin: 0,\r\n  '> .MuiListItem-root:nth-of-type(even)': {\r\n    backgroundColor: theme.palette.contentDark.main\r\n  },\r\n  '> .MuiListItem-root:nth-of-type(odd)': {\r\n    backgroundColor: theme.palette.contentDarker.main\r\n  },\r\n}));","import { InputBase, InputProps, styled } from '@mui/material'\r\nimport { useCallback, useEffect, useState } from 'react'\r\ntype props = Omit<InputProps, \"onChange\"> & {\r\n  value?: number | undefined,\r\n  onChange: (newValue: number | undefined) => void,\r\n  disabled?: boolean\r\n  float?: boolean,\r\n  allowEmpty?: boolean,\r\n}\r\n\r\nexport const StyledInputBase = styled(InputBase)(({ theme }) => ({\r\n  backgroundColor: theme.palette.primary.main,\r\n  transition: \"all 0.5s ease\",\r\n  \"&:hover\": {\r\n    backgroundColor: theme.palette.primary.dark,\r\n  },\r\n  \"&.Mui-focused\": {\r\n    backgroundColor: theme.palette.primary.dark,\r\n  },\r\n  \"&.Mui-disabled\": {\r\n    backgroundColor: theme.palette.primary.dark,\r\n  },\r\n}))\r\n\r\n// wrap the Input with this when using the input in a buttongroup\r\nexport const CustomNumberInputButtonGroupWrapper = styled(\"button\", {\r\n  shouldForwardProp: (prop) => ![\"fullWidth\", \"disableRipple\", \"disableFocusRipple\", \"disableElevation\"].includes(prop as string)\r\n})(({ theme }) => ({\r\n  backgroundColor: theme.palette.primary.main,\r\n  padding: 0,\r\n  overflow: \"hidden\",\r\n  border: \"none\",\r\n  borderRadius: theme.shape.borderRadius,\r\n  \"& div\": {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n  \"&.MuiButtonGroup-grouped:not(:last-of-type)\": {\r\n    borderTopRightRadius: 0,\r\n    borderBottomRightRadius: 0,\r\n  },\r\n  \"&.MuiButtonGroup-grouped:not(:first-of-type)\": {\r\n    borderTopLeftRadius: 0,\r\n    borderBottomLeftRadius: 0,\r\n  },\r\n}))\r\n\r\nexport default function CustomNumberInput({ value, onChange, disabled = false, float = false, ...props }: props) {\r\n  const [state, setState] = useState(\"\")\r\n  const sendChange = useCallback(\r\n    () => {\r\n      if (state === \"\") return onChange(0)\r\n      const parseFunc = float ? parseFloat : parseInt\r\n      onChange(parseFunc(state))\r\n    },\r\n    [onChange, state, float],\r\n  )\r\n  useEffect(() => setState(value?.toString() ?? \"\"), [value, setState]) // update value on value change\r\n  const onInputChange = useCallback(e => setState(e.target.value), [setState],)\r\n  const onKeyDOwn = useCallback(e => e.key === \"Enter\" && sendChange(), [sendChange],)\r\n  return <StyledInputBase\r\n    value={state}\r\n    aria-label=\"custom-input\"\r\n    type=\"number\"\r\n    onChange={onInputChange}\r\n    onBlur={sendChange}\r\n    disabled={disabled}\r\n    onKeyDown={onKeyDOwn}\r\n    {...props}\r\n  />\r\n}","import { styled, Tooltip, tooltipClasses, TooltipProps } from \"@mui/material\";\r\n\r\nconst BootstrapTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} arrow classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.arrow}`]: {\r\n    color: theme.palette.common.black,\r\n  },\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: theme.palette.common.black,\r\n  },\r\n}));\r\nexport default BootstrapTooltip","import { CheckBox, CheckBoxOutlineBlank } from '@mui/icons-material';\r\nimport { Button, Divider, MenuItem } from '@mui/material';\r\nimport React from 'react';\r\nimport DropdownButton from '../Components/DropdownMenu/DropdownButton';\r\nimport SqBadge from '../Components/SqBadge';\r\nimport IConditional, { IConditionalValue } from '../Types/IConditional';\r\nimport { ICalculatedStats } from '../Types/stats';\r\nimport { evalIfFunc } from '../Util/Util';\r\n\r\nexport default function ConditionalSelector({ conditional, conditionalValue, setConditional, name, disabled = false, stats }:\r\n  { conditional: IConditional, conditionalValue: IConditionalValue, setConditional: (newCond: IConditionalValue) => void, name: Displayable, disabled?: boolean, stats: ICalculatedStats }) {\r\n  const [conditionalNum = 0, conditionalStateKey] = conditionalValue\r\n  if (!conditional) return name as JSX.Element\r\n  if (\"states\" in conditional) {//complex conditional\r\n    const state = conditionalStateKey ? conditional.states[conditionalStateKey] : Object.values(conditional.states)[0]\r\n    const text = conditionalNum === 0 ? \"Not Active\" : <span>{state.name} {(evalIfFunc(state!.maxStack, stats) as number > 1 ? (`: ${conditionalNum} stack${conditionalNum > 1 ? \"s\" : \"\"}`) : \"\")}</span>\r\n    const badge = <SqBadge color={conditionalNum === 0 ? \"secondary\" : \"success\"}>{text}</SqBadge>\r\n    return <DropdownButton size=\"small\" title={<span>{name} {badge}</span>} disabled={disabled}>\r\n      <MenuItem onClick={() => setConditional([0])} selected={conditionalNum === 0} disabled={conditionalNum === 0}>\r\n        <span>Not Active</span>\r\n      </MenuItem>\r\n      <Divider />\r\n      {Object.entries(conditional.states).flatMap(([stateKey, condial]: any, i) =>\r\n        [...Array(condial.maxStack).keys()].map(v => v + 1).map((stack, i) =>\r\n          <MenuItem key={stateKey + i} onClick={() => setConditional([stack, stateKey])} selected={conditionalStateKey === stateKey && conditionalNum === stack} disabled={conditionalStateKey === stateKey && conditionalNum === stack} >\r\n            {condial.name}{condial.maxStack > 1 ? `: ${stack} stack${stack > 1 ? \"s\" : \"\"}` : \"\"}\r\n          </MenuItem>)\r\n      )}\r\n    </DropdownButton>\r\n  } else {\r\n    const maxStack = evalIfFunc(conditional!.maxStack, stats) as number\r\n    if (maxStack > 1) {\r\n      //stacking conditional\r\n      const badge = <SqBadge color={conditionalNum === 0 ? \"secondary\" : \"success\"}>{conditionalNum > 0 ? `${conditionalNum} stack${conditionalNum > 1 ? \"s\" : \"\"}` : \"Not Active\"}</SqBadge>\r\n      return <DropdownButton size=\"small\" title={<span>{name} {badge}</span>} disabled={disabled}>\r\n        <MenuItem onClick={() => setConditional([0])} selected={conditionalNum === 0} disabled={conditionalNum === 0}>\r\n          <span>Not Active</span>\r\n        </MenuItem>\r\n        <Divider />\r\n        {[...Array(maxStack).keys()].map(v => v + 1).map(stack =>\r\n          <MenuItem key={stack} onClick={() => setConditional([stack])} selected={conditionalNum === stack} disabled={conditionalNum === stack}>\r\n            {`${stack} stack${stack > 1 ? \"s\" : \"\"}`}\r\n          </MenuItem>)}\r\n      </DropdownButton>\r\n    } else if (maxStack === 1) {//single boolean conditional\r\n      return <Button size=\"small\" onClick={() => setConditional([conditionalNum ? 0 : 1])} disabled={disabled} startIcon={conditionalNum ? <CheckBox /> : <CheckBoxOutlineBlank />}>\r\n        {name}\r\n      </Button>\r\n    }\r\n  }\r\n  return null\r\n}","import { CardContent } from \"@mui/material\"\r\nimport { useCallback, useContext, useMemo } from \"react\"\r\nimport { buildContext } from \"../Build/Build\"\r\nimport Conditional from \"../Conditional/Conditional\"\r\nimport ConditionalSelector from \"../Conditional/ConditionalSelector\"\r\nimport useCharacterReducer from \"../ReactHooks/useCharacterReducer\"\r\nimport { CharacterKey } from \"../Types/consts\"\r\nimport IConditional from \"../Types/IConditional\"\r\nimport statsToFields from \"../Util/FieldUtil\"\r\nimport { deletePropPath, layeredAssignment, objClearEmpties } from \"../Util/Util\"\r\nimport CardDark from \"./Card/CardDark\"\r\nimport FieldDisplay, { FieldDisplayList } from \"./FieldDisplay\"\r\n\r\ntype ConditionalDisplayProps = {\r\n  conditional: IConditional,\r\n  characterKey: CharacterKey\r\n}\r\n\r\nexport default function ConditionalDisplay({ conditional, characterKey }: ConditionalDisplayProps) {\r\n  const { newBuild, equippedBuild } = useContext(buildContext)\r\n  const characterDispatch = useCharacterReducer(characterKey)\r\n  const stats = newBuild ? newBuild : equippedBuild\r\n  const canShow = useMemo(() => Conditional.canShow(conditional, stats), [conditional, stats])\r\n  const { stats: conditionalStats = {}, fields: conditionalFields = [], conditionalValue } = useMemo(() => canShow && Conditional.resolve(conditional, stats, undefined), [canShow, conditional, stats])\r\n  const displayFields = useMemo(() => canShow && [...statsToFields(conditionalStats, stats), ...conditionalFields], [canShow, conditionalStats, stats, conditionalFields])\r\n  const setConditional = useCallback(condV => {\r\n    if (!stats) return\r\n    const [conditionalNum = 0] = condV\r\n    if (!conditionalNum) {\r\n      deletePropPath(stats.conditionalValues, conditional!.keys)\r\n      objClearEmpties(stats.conditionalValues)\r\n    } else if (conditional.keys)\r\n      layeredAssignment(stats.conditionalValues, conditional!.keys, condV)\r\n    characterDispatch({ conditionalValues: stats.conditionalValues })\r\n  }, [conditional, stats, characterDispatch])\r\n\r\n  if (!canShow || !stats) return null\r\n  return <CardDark>\r\n    <CardContent>\r\n      <ConditionalSelector\r\n        conditional={conditional}\r\n        conditionalValue={conditionalValue}\r\n        setConditional={setConditional}\r\n        name={conditional.name}\r\n        stats={stats} />\r\n    </CardContent>\r\n    <FieldDisplayList sx={{ m: 0 }}>\r\n      {displayFields.map((field, i) => <FieldDisplay key={i} field={field} />)}\r\n    </FieldDisplayList>\r\n  </CardDark>\r\n}","import { Box } from \"@mui/material\"\r\nimport { useContext } from \"react\"\r\nimport { buildContext } from \"../Build/Build\"\r\nimport { DocumentSection } from \"../Types/character\"\r\nimport { CharacterKey } from \"../Types/consts\"\r\nimport { evalIfFunc } from \"../Util/Util\"\r\nimport ConditionalDisplay from \"./ConditionalDisplay\"\r\nimport FieldDisplay, { FieldDisplayList } from \"./FieldDisplay\"\r\n\r\ntype SkillDisplayCardProps = {\r\n  sections: DocumentSection[],\r\n  characterKey: CharacterKey,\r\n}\r\nexport default function DocumentDisplay({ sections, characterKey }: SkillDisplayCardProps) {\r\n  const { newBuild, equippedBuild } = useContext(buildContext)\r\n  const build = newBuild ? newBuild : equippedBuild\r\n  if (!build) return null\r\n  return <div>{sections?.map((section, i) => {\r\n    if (!section.canShow!(build)) return null\r\n    const talentText = evalIfFunc(section.text, build)\r\n    const fields = section.fields ?? []\r\n    return <Box key={\"section\" + i} sx={{\r\n      pb: -1,\r\n      \"& > *\": {\r\n        mb: 1\r\n      }\r\n    }}>\r\n      <div>{talentText}</div>\r\n      {fields.length > 0 && <FieldDisplayList>\r\n        {fields?.map?.((field, i) => <FieldDisplay key={i} field={field} />)}\r\n      </FieldDisplayList>}\r\n      {!!section.conditional && <ConditionalDisplay conditional={section.conditional} characterKey={characterKey} />}\r\n    </Box>\r\n  })}</div>\r\n}\r\n","import Formula from \"./Formula\"\r\nimport { Formulas, getStage, numStages, StatData } from \"./StatData\"\r\nimport { IBaseStat } from \"./Types/character\"\r\nimport { Modifier } from \"./Types/stats\"\r\n\r\n// Generate a statKey dependency, to reduce build generation calculation on a single stat.\r\nfunction GetFormulaDependency(formula: (s) => number) {\r\n  const dependency: Set<string> = new Set()\r\n  formula(new Proxy({}, { get: (target, prop, receiver) => { dependency.add(prop.toString()) } }))\r\n  return [...dependency]\r\n}\r\nconst formulaKeyDependency = Object.freeze(Object.fromEntries(\r\n  Object.entries(Formulas).map(([key, value]) => [key, GetFormulaDependency(value)])\r\n)) as Dict<string, string[]>\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  let statKeys = Object.keys(StatData)\r\n  Object.entries(formulaKeyDependency).forEach(([formulaKey, dependencies]) =>\r\n    dependencies.forEach(key =>\r\n      !statKeys.includes(key as any) &&\r\n      console.error(`Formula ${formulaKey} depends key ${key} that does not Exist in StatData.`))\r\n  )\r\n  Object.entries(formulaKeyDependency).forEach(([formulaKey, dependencies]) =>\r\n    StatData[formulaKey]?.const && dependencies.forEach(key =>\r\n      !StatData[key as any]?.const &&\r\n      console.error(`Constant formula ${formulaKey} depends on dynamic key ${key}.`)\r\n    )\r\n  )\r\n}\r\n\r\nfunction GetDependencies(baseStat: IBaseStat, modifiers: Modifier = {}, keys = Object.keys(StatData)): Dependencies {\r\n  const found = new Set<string>()\r\n  const dependencies = [...Array(numStages)].map(_ => new Set<string>())\r\n  keys.forEach(key => InsertDependencies(baseStat, key, modifiers, dependencies, found))\r\n  return dependencies.flatMap(dep => [...dep])\r\n}\r\nfunction InsertDependencies(baseStat: IBaseStat, key: string, modifiers: Modifier, dependencies: Set<string>[], found: Set<string>) {\r\n  if (found.has(key)) return\r\n  found.add(key)\r\n\r\n  formulaKeyDependency[key]?.forEach(k => InsertDependencies(baseStat, k, modifiers, dependencies, found));\r\n  (modifiers[key] ?? []).forEach(path => Formula.getCurrent(path, baseStat)[1].forEach(k =>\r\n    InsertDependencies(baseStat, k, modifiers, dependencies, found)))\r\n  dependencies[getStage(key)].add(key)\r\n}\r\n\r\ntype Dependencies = string[]\r\n\r\nexport {\r\n  GetFormulaDependency,\r\n  GetDependencies,\r\n}\r\n","import { CardContent, Typography } from \"@mui/material\"\r\nimport React from \"react\"\r\nimport CardDark from \"../Components/Card/CardDark\"\r\nimport FieldDisplay, { FieldDisplayList } from \"../Components/FieldDisplay\"\r\nimport { ICalculatedStats } from \"../Types/stats\"\r\nimport statsToFields from \"../Util/FieldUtil\"\r\nexport default function WeaponStatsCard({ title, statsVals = {}, stats }: { title: Displayable, statsVals?: object, stats: ICalculatedStats }) {\r\n  if ((Object.keys(statsVals) as string[]).filter(s => s !== \"modifiers\").length === 0) return null\r\n  const fields = statsToFields(statsVals, stats)\r\n  return <CardDark sx={{ mb: 1 }}>\r\n    <CardContent>\r\n      <Typography>{title}</Typography>\r\n    </CardContent>\r\n    <FieldDisplayList>\r\n      {fields.map((field, i) => <FieldDisplay key={i} field={field} />)}\r\n    </FieldDisplayList>\r\n  </CardDark>\r\n}","import { Lock, LockOpen, SwapHoriz } from \"@mui/icons-material\"\r\nimport { Box, Button, ButtonGroup, CardContent, Divider, Grid, MenuItem, Typography } from \"@mui/material\"\r\nimport { useCallback, useContext, useEffect, useMemo, useState } from \"react\"\r\nimport Assets from \"../Assets/Assets\"\r\nimport { buildContext } from \"../Build/Build\"\r\nimport CharacterSheet from \"../Character/CharacterSheet\"\r\nimport CardDark from \"../Components/Card/CardDark\"\r\nimport CardLight from \"../Components/Card/CardLight\"\r\nimport CharacterDropdownButton from \"../Components/Character/CharacterDropdownButton\"\r\nimport CloseButton from \"../Components/CloseButton\"\r\nimport ColorText from \"../Components/ColoredText\"\r\nimport CustomNumberInput, { CustomNumberInputButtonGroupWrapper } from \"../Components/CustomNumberInput\"\r\nimport DocumentDisplay from \"../Components/DocumentDisplay\"\r\nimport DropdownButton from \"../Components/DropdownMenu/DropdownButton\"\r\nimport ImgIcon from \"../Components/Image/ImgIcon\"\r\nimport ModalWrapper from \"../Components/ModalWrapper\"\r\nimport SqBadge from \"../Components/SqBadge\"\r\nimport { Stars } from \"../Components/StarDisplay\"\r\nimport WeaponSelectionModal from \"../Components/Weapon/WeaponSelectionModal\"\r\nimport { ambiguousLevel, ascensionMaxLevel, milestoneLevels } from \"../Data/LevelData\"\r\nimport { database as localDatabase, DatabaseContext } from \"../Database/Database\"\r\nimport useForceUpdate from \"../ReactHooks/useForceUpdate\"\r\nimport usePromise from \"../ReactHooks/usePromise\"\r\nimport { ICachedCharacter } from \"../Types/character\"\r\nimport { CharacterKey } from \"../Types/consts\"\r\nimport { ICalculatedStats } from \"../Types/stats\"\r\nimport { ICachedWeapon } from \"../Types/weapon\"\r\nimport { clamp } from \"../Util/Util\"\r\nimport WeaponCard from \"./WeaponCard\"\r\nimport WeaponSheet from \"./WeaponSheet\"\r\nimport WeaponStatsCard from \"./WeaponStatsCard\"\r\n\r\n\r\ntype WeaponStatsEditorCardProps = {\r\n  weaponId: string\r\n  charData?: {\r\n    character: ICachedCharacter,\r\n    characterSheet: CharacterSheet,\r\n    equippedBuild?: ICalculatedStats\r\n    newBuild?: ICalculatedStats\r\n    characterDispatch: (any) => void\r\n  }\r\n  footer?: boolean\r\n  onClose?: () => void\r\n}\r\nexport default function WeaponDisplayCard({\r\n  weaponId: propWeaponId,\r\n  charData,\r\n  footer = false,\r\n  onClose\r\n}: WeaponStatsEditorCardProps) {\r\n  const database = useContext(DatabaseContext)\r\n  // Use databaseToken anywhere `database._get*` is used\r\n  // Use onDatabaseUpdate when `following` database entries\r\n  const [databaseToken, onDatabaseUpdate] = useForceUpdate()\r\n\r\n  const buildContextObj = useContext(buildContext)\r\n  const weapon = useMemo(() =>\r\n    databaseToken && database._getWeapon(propWeaponId!)!,\r\n    [propWeaponId, databaseToken, database])\r\n  const { key, level, refinement, ascension, lock } = weapon\r\n  const { location = \"\", id } = weapon as Partial<ICachedWeapon>\r\n  const weaponSheet: WeaponSheet | undefined = usePromise(WeaponSheet.get(key), [key])\r\n  const weaponTypeKey = weaponSheet?.weaponType\r\n\r\n  useEffect(() =>\r\n    propWeaponId ? database.followWeapon(propWeaponId, onDatabaseUpdate) : undefined,\r\n    [propWeaponId, onDatabaseUpdate, database])\r\n\r\n  const weaponDispatch = useCallback((newWeapon: Partial<ICachedWeapon>) => {\r\n    database.updateWeapon(newWeapon, propWeaponId)\r\n  }, [propWeaponId, database])\r\n\r\n  const setLevel = useCallback(level => {\r\n    level = clamp(level, 1, 90)\r\n    const ascension = ascensionMaxLevel.findIndex(ascenML => level <= ascenML)\r\n    weaponDispatch({ level, ascension })\r\n  }, [weaponDispatch])\r\n\r\n  const setAscension = useCallback(() => {\r\n    const lowerAscension = ascensionMaxLevel.findIndex(ascenML => level !== 90 && level === ascenML)\r\n    if (ascension === lowerAscension) weaponDispatch({ ascension: ascension + 1 })\r\n    else weaponDispatch({ ascension: lowerAscension })\r\n  }, [weaponDispatch, ascension, level])\r\n\r\n  const build = { ...(charData ? (charData.newBuild ?? charData.equippedBuild) : { weapon: { refineIndex: refinement - 1, level, ascension } }) } as any\r\n\r\n  const characterSheet = usePromise(location ? CharacterSheet.get(location) : undefined, [location])\r\n  const weaponFilter = characterSheet ? (ws) => ws.weaponType === characterSheet.weaponTypeKey : undefined\r\n  const initialWeaponFilter = characterSheet && characterSheet.weaponTypeKey\r\n\r\n  const equipOnChar = useCallback((charKey: CharacterKey | \"\") => id && database.setWeaponLocation(id, charKey), [database, id])\r\n  const filter = useCallback(\r\n    (cs: CharacterSheet) => cs.weaponTypeKey === weaponSheet?.weaponType,\r\n    [weaponSheet],\r\n  )\r\n  const [showModal, setshowModal] = useState(false)\r\n  const img = ascension < 2 ? weaponSheet?.img : weaponSheet?.imgAwaken\r\n  return <CardLight>\r\n    <CardContent sx={{ py: 1 }}>\r\n      <Grid container spacing={1}>\r\n        <Grid item flexGrow={1}>\r\n          <Grid container spacing={1}>\r\n            <Grid item >\r\n              <WeaponSelectionModal show={showModal} onHide={() => setshowModal(false)} onSelect={k => weaponDispatch({ key: k })} filter={weaponFilter} weaponFilter={initialWeaponFilter} />\r\n              <ButtonGroup>\r\n                <Button onClick={() => setshowModal(true)} >{weaponSheet?.name ?? \"Select a Weapon\"}</Button>\r\n                <DropdownButton title={`Refinement ${refinement}`}>\r\n                  <MenuItem>Select Weapon Refinement</MenuItem>\r\n                  <Divider />\r\n                  {[...Array(5).keys()].map(key =>\r\n                    <MenuItem key={key} onClick={() => weaponDispatch({ refinement: key + 1 })} selected={refinement === (key + 1)} disabled={refinement === (key + 1)}>\r\n                      {`Refinement ${key + 1}`}\r\n                    </MenuItem>)}\r\n                </DropdownButton>\r\n              </ButtonGroup>\r\n            </Grid>\r\n            <Grid item >\r\n              <ButtonGroup sx={{ bgcolor: t => t.palette.contentLight.main }} >\r\n                <CustomNumberInputButtonGroupWrapper >\r\n                  <CustomNumberInput onChange={setLevel} value={level}\r\n                    startAdornment=\"Lvl. \"\r\n                    inputProps={{ min: 1, max: 90, sx: { textAlign: \"center\" } }}\r\n                    sx={{ width: \"100%\", height: \"100%\", pl: 2 }}\r\n                  />\r\n                </CustomNumberInputButtonGroupWrapper>\r\n                <Button sx={{ pl: 1 }} disabled={!ambiguousLevel(level)} onClick={setAscension}><strong>/ {ascensionMaxLevel[ascension]}</strong></Button>\r\n                <DropdownButton title={\"Select Level\"} >\r\n                  {milestoneLevels.map(([lv, as]) => {\r\n                    const sameLevel = lv === ascensionMaxLevel[as]\r\n                    const lvlstr = sameLevel ? `Lv. ${lv}` : `Lv. ${lv}/${ascensionMaxLevel[as]}`\r\n                    const selected = lv === level && as === ascension\r\n                    return <MenuItem key={`${lv}/${as}`} selected={selected} disabled={selected} onClick={() => weaponDispatch({ level: lv, ascension: as })}>{lvlstr}</MenuItem>\r\n                  })}\r\n                </DropdownButton>\r\n              </ButtonGroup>\r\n            </Grid>\r\n            <Grid item>\r\n              <Button color=\"error\" onClick={() => id && database.updateWeapon({ lock: !lock }, id)} startIcon={lock ? <Lock /> : <LockOpen />}>\r\n                {lock ? \"Locked\" : \"Unlocked\"}\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        {!!onClose && <Grid item  >\r\n          <CloseButton onClick={onClose} />\r\n        </Grid>}\r\n        {!!charData && database === localDatabase && <Grid item >\r\n          <SwapBtn weaponTypeKey={weaponTypeKey} onChangeId={id => database.setWeaponLocation(id, charData.character.key)} />\r\n        </Grid>}\r\n      </Grid>\r\n    </CardContent>\r\n    <Divider />\r\n    <CardContent >\r\n      {(() => {\r\n        if (!weaponSheet) return null\r\n        const substatKey = weaponSheet.getSubStatKey()\r\n        const weaponDisplayMainVal = weaponSheet.getMainStatValue(level, ascension)\r\n        const weaponDisplaySubVal = weaponSheet.getSubStatValue(level, ascension)\r\n        const weaponPassiveName = weaponSheet.passiveName\r\n        const weaponBonusStats = weaponSheet.stats(build)\r\n        const sections = weaponSheet.document\r\n        return <Box display=\"flex\" gap={{ xs: 1, md: 1.5, lg: 2 }} >\r\n          <Box sx={{ maxWidth: 256 }} flexShrink={1} minWidth=\"25%\">\r\n            <Box component=\"img\" src={img} className={`grad-${weaponSheet.rarity}star`} sx={{ maxWidth: 256, width: \"100%\", height: \"auto\", borderRadius: 1 }} />\r\n            <Typography><small>{weaponSheet.description}</small></Typography>\r\n          </Box>\r\n          <Box sx={{ mb: -1 }} flexGrow={1} >\r\n            <Typography variant=\"h6\" >{process.env.NODE_ENV === \"development\" && <ColorText color=\"warning\">{id || `\"\"`} </ColorText>}{weaponSheet.name} Lv. {WeaponSheet.getLevelString(weapon)} {weaponPassiveName && <SqBadge color=\"info\">Refinement {refinement}</SqBadge>}</Typography>\r\n            <Typography><Stars stars={weaponSheet.rarity} /></Typography>\r\n            <Typography variant=\"subtitle1\">{weaponPassiveName}</Typography>\r\n            <Typography gutterBottom>{weaponPassiveName && weaponSheet.passiveDescription(build)}</Typography>\r\n            {build && <buildContext.Provider value={charData ? buildContextObj : { equippedBuild: build, newBuild: undefined, compareBuild: false, setCompareBuild: undefined }}>\r\n              <WeaponStatsCard title={\"Main Stats\"} statsVals={{ atk: weaponDisplayMainVal, [substatKey]: substatKey ? weaponDisplaySubVal : undefined }} stats={build} />\r\n              <WeaponStatsCard title={\"Bonus Stats\"} statsVals={weaponBonusStats} stats={build} />\r\n            </buildContext.Provider>}\r\n            {charData && sections ? (() => {\r\n              const { equippedBuild, newBuild } = charData\r\n              const characterKey = (newBuild ? newBuild : equippedBuild)?.characterKey as CharacterKey | undefined\r\n              return !!characterKey && < DocumentDisplay  {...{ sections, equippedBuild, newBuild, characterKey }} />\r\n            })() : null}\r\n          </Box>\r\n        </Box>\r\n      })()}\r\n    </CardContent>\r\n    {footer && id && <CardContent sx={{ py: 1 }}>\r\n      <Grid container>\r\n        <Grid item flexGrow={1}>\r\n          <CharacterDropdownButton noUnselect inventory value={location} onChange={equipOnChar} filter={filter} />\r\n        </Grid>\r\n        {!!onClose && <Grid item><CloseButton large onClick={onClose} /></Grid>}\r\n      </Grid>\r\n    </CardContent>}\r\n  </CardLight>\r\n}\r\nfunction SwapBtn({ onChangeId, weaponTypeKey }) {\r\n  const database = useContext(DatabaseContext)\r\n  const [show, setShow] = useState(false)\r\n  const open = () => setShow(true)\r\n  const close = () => setShow(false)\r\n\r\n  const clickHandler = (id) => {\r\n    onChangeId(id)\r\n    close()\r\n  }\r\n\r\n  const weaponSheets = usePromise(WeaponSheet.getAll(), [])\r\n\r\n  const weaponIdList = database.weapons.keys.filter(wKey => {\r\n    const dbWeapon = database._getWeapon(wKey)\r\n    if (!dbWeapon) return false\r\n    if (weaponTypeKey && weaponTypeKey !== weaponSheets?.[dbWeapon.key]?.weaponType) return false\r\n    return true\r\n  })\r\n\r\n\r\n  return <>\r\n    <Button color=\"info\" onClick={open} startIcon={<SwapHoriz />} >SWAP WEAPON</Button>\r\n    <ModalWrapper open={show} onClose={close} >\r\n      <CardDark>\r\n        <CardContent sx={{ py: 1 }}>\r\n          <Grid container>\r\n            <Grid item flexGrow={1}>\r\n              <Typography variant=\"h6\">{weaponTypeKey ? <ImgIcon src={Assets.weaponTypes[weaponTypeKey]} /> : null} Swap Weapon</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              <CloseButton onClick={close} />\r\n            </Grid>\r\n          </Grid>\r\n        </CardContent>\r\n        <Divider />\r\n        <CardContent>\r\n          <Grid container spacing={1}>\r\n            {weaponIdList.map(weaponId =>\r\n              <Grid item key={weaponId} xs={6} sm={6} md={4} lg={3} >\r\n                <WeaponCard\r\n                  weaponId={weaponId}\r\n                  onClick={clickHandler}\r\n                />\r\n              </Grid>)}\r\n          </Grid>\r\n        </CardContent>\r\n      </CardDark>\r\n    </ModalWrapper>\r\n  </>\r\n}","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n}), 'CheckBox');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n}), 'CheckBoxOutlineBlank');","import { generateUtilityClass, generateUtilityClasses } from '@mui/core';\nexport function getListItemUtilityClass(slot) {\n  return generateUtilityClass('MuiListItem', slot);\n}\nconst listItemClasses = generateUtilityClasses('MuiListItem', ['root', 'container', 'focusVisible', 'dense', 'alignItemsFlexStart', 'disabled', 'divider', 'gutters', 'padding', 'button', 'secondaryAction', 'selected']);\nexport default listItemClasses;","import { generateUtilityClass, generateUtilityClasses } from '@mui/core';\nexport function getListItemSecondaryActionClassesUtilityClass(slot) {\n  return generateUtilityClass('MuiListItemSecondaryAction', slot);\n}\nconst listItemSecondaryActionClasses = generateUtilityClasses('MuiListItemSecondaryAction', ['root', 'disableGutters']);\nexport default listItemSecondaryActionClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"className\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/core';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport ListContext from '../List/ListContext';\nimport { getListItemSecondaryActionClassesUtilityClass } from './listItemSecondaryActionClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nconst useUtilityClasses = ownerState => {\n  const {\n    disableGutters,\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root', disableGutters && 'disableGutters']\n  };\n  return composeClasses(slots, getListItemSecondaryActionClassesUtilityClass, classes);\n};\n\nconst ListItemSecondaryActionRoot = styled('div', {\n  name: 'MuiListItemSecondaryAction',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, ownerState.disableGutters && styles.disableGutters];\n  }\n})(({\n  ownerState\n}) => _extends({\n  position: 'absolute',\n  right: 16,\n  top: '50%',\n  transform: 'translateY(-50%)'\n}, ownerState.disableGutters && {\n  right: 0\n}));\n/**\n * Must be used as the last child of ListItem to function properly.\n */\n\nconst ListItemSecondaryAction = /*#__PURE__*/React.forwardRef(function ListItemSecondaryAction(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiListItemSecondaryAction'\n  });\n\n  const {\n    className\n  } = props,\n        other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  const context = React.useContext(ListContext);\n\n  const ownerState = _extends({}, props, {\n    disableGutters: context.disableGutters\n  });\n\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(ListItemSecondaryActionRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? ListItemSecondaryAction.propTypes\n/* remove-proptypes */\n= {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component, normally an `IconButton` or selection control.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.object\n} : void 0;\nListItemSecondaryAction.muiName = 'ListItemSecondaryAction';\nexport default ListItemSecondaryAction;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"className\"],\n      _excluded2 = [\"alignItems\", \"autoFocus\", \"button\", \"children\", \"className\", \"component\", \"components\", \"componentsProps\", \"ContainerComponent\", \"ContainerProps\", \"dense\", \"disabled\", \"disableGutters\", \"disablePadding\", \"divider\", \"focusVisibleClassName\", \"secondaryAction\", \"selected\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses, isHostComponent } from '@mui/core';\nimport { chainPropTypes, elementTypeAcceptingRef } from '@mui/utils';\nimport { alpha } from '@mui/system';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport ButtonBase from '../ButtonBase';\nimport isMuiElement from '../utils/isMuiElement';\nimport useEnhancedEffect from '../utils/useEnhancedEffect';\nimport useForkRef from '../utils/useForkRef';\nimport ListContext from '../List/ListContext';\nimport listItemClasses, { getListItemUtilityClass } from './listItemClasses';\nimport { listItemButtonClasses } from '../ListItemButton';\nimport ListItemSecondaryAction from '../ListItemSecondaryAction';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const overridesResolver = (props, styles) => {\n  const {\n    ownerState\n  } = props;\n  return [styles.root, ownerState.dense && styles.dense, ownerState.alignItems === 'flex-start' && styles.alignItemsFlexStart, ownerState.divider && styles.divider, !ownerState.disableGutters && styles.gutters, !ownerState.disablePadding && styles.padding, ownerState.button && styles.button, ownerState.hasSecondaryAction && styles.secondaryAction];\n};\n\nconst useUtilityClasses = ownerState => {\n  const {\n    alignItems,\n    button,\n    classes,\n    dense,\n    disabled,\n    disableGutters,\n    disablePadding,\n    divider,\n    hasSecondaryAction,\n    selected\n  } = ownerState;\n  const slots = {\n    root: ['root', dense && 'dense', !disableGutters && 'gutters', !disablePadding && 'padding', divider && 'divider', disabled && 'disabled', button && 'button', alignItems === 'flex-start' && 'alignItemsFlexStart', hasSecondaryAction && 'secondaryAction', selected && 'selected'],\n    container: ['container']\n  };\n  return composeClasses(slots, getListItemUtilityClass, classes);\n};\n\nexport const ListItemRoot = styled('div', {\n  name: 'MuiListItem',\n  slot: 'Root',\n  overridesResolver\n})(({\n  theme,\n  ownerState\n}) => _extends({\n  display: 'flex',\n  justifyContent: 'flex-start',\n  alignItems: 'center',\n  position: 'relative',\n  textDecoration: 'none',\n  width: '100%',\n  boxSizing: 'border-box',\n  textAlign: 'left'\n}, !ownerState.disablePadding && _extends({\n  paddingTop: 8,\n  paddingBottom: 8\n}, ownerState.dense && {\n  paddingTop: 4,\n  paddingBottom: 4\n}, !ownerState.disableGutters && {\n  paddingLeft: 16,\n  paddingRight: 16\n}, !!ownerState.secondaryAction && {\n  // Add some space to avoid collision as `ListItemSecondaryAction`\n  // is absolutely positioned.\n  paddingRight: 48\n}), !!ownerState.secondaryAction && {\n  [`& > .${listItemButtonClasses.root}`]: {\n    paddingRight: 48\n  }\n}, {\n  [`&.${listItemClasses.focusVisible}`]: {\n    backgroundColor: theme.palette.action.focus\n  },\n  [`&.${listItemClasses.selected}`]: {\n    backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity),\n    [`&.${listItemClasses.focusVisible}`]: {\n      backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.focusOpacity)\n    }\n  },\n  [`&.${listItemClasses.disabled}`]: {\n    opacity: theme.palette.action.disabledOpacity\n  }\n}, ownerState.alignItems === 'flex-start' && {\n  alignItems: 'flex-start'\n}, ownerState.divider && {\n  borderBottom: `1px solid ${theme.palette.divider}`,\n  backgroundClip: 'padding-box'\n}, ownerState.button && {\n  transition: theme.transitions.create('background-color', {\n    duration: theme.transitions.duration.shortest\n  }),\n  '&:hover': {\n    textDecoration: 'none',\n    backgroundColor: theme.palette.action.hover,\n    // Reset on touch devices, it doesn't add specificity\n    '@media (hover: none)': {\n      backgroundColor: 'transparent'\n    }\n  },\n  [`&.${listItemClasses.selected}:hover`]: {\n    backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.hoverOpacity),\n    // Reset on touch devices, it doesn't add specificity\n    '@media (hover: none)': {\n      backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity)\n    }\n  }\n}, ownerState.hasSecondaryAction && {\n  // Add some space to avoid collision as `ListItemSecondaryAction`\n  // is absolutely positioned.\n  paddingRight: 48\n}));\nconst ListItemContainer = styled('li', {\n  name: 'MuiListItem',\n  slot: 'Container',\n  overridesResolver: (props, styles) => styles.container\n})({\n  position: 'relative'\n});\n/**\n * Uses an additional container component if `ListItemSecondaryAction` is the last child.\n */\n\nconst ListItem = /*#__PURE__*/React.forwardRef(function ListItem(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiListItem'\n  });\n\n  const {\n    alignItems = 'center',\n    autoFocus = false,\n    button = false,\n    children: childrenProp,\n    className,\n    component: componentProp,\n    components = {},\n    componentsProps = {},\n    ContainerComponent = 'li',\n    ContainerProps: {\n      className: ContainerClassName\n    } = {},\n    dense = false,\n    disabled = false,\n    disableGutters = false,\n    disablePadding = false,\n    divider = false,\n    focusVisibleClassName,\n    secondaryAction,\n    selected = false\n  } = props,\n        ContainerProps = _objectWithoutPropertiesLoose(props.ContainerProps, _excluded),\n        other = _objectWithoutPropertiesLoose(props, _excluded2);\n\n  const context = React.useContext(ListContext);\n  const childContext = {\n    dense: dense || context.dense || false,\n    alignItems,\n    disableGutters\n  };\n  const listItemRef = React.useRef(null);\n  useEnhancedEffect(() => {\n    if (autoFocus) {\n      if (listItemRef.current) {\n        listItemRef.current.focus();\n      } else if (process.env.NODE_ENV !== 'production') {\n        console.error('MUI: Unable to set focus to a ListItem whose component has not been rendered.');\n      }\n    }\n  }, [autoFocus]);\n  const children = React.Children.toArray(childrenProp); // v4 implementation, deprecated in v5, will be removed in v6\n\n  const hasSecondaryAction = children.length && isMuiElement(children[children.length - 1], ['ListItemSecondaryAction']);\n\n  const ownerState = _extends({}, props, {\n    alignItems,\n    autoFocus,\n    button,\n    dense: childContext.dense,\n    disabled,\n    disableGutters,\n    disablePadding,\n    divider,\n    hasSecondaryAction,\n    selected\n  });\n\n  const classes = useUtilityClasses(ownerState);\n  const handleRef = useForkRef(listItemRef, ref);\n  const Root = components.Root || ListItemRoot;\n  const rootProps = componentsProps.root || {};\n\n  const componentProps = _extends({\n    className: clsx(classes.root, rootProps.className, className),\n    disabled\n  }, other);\n\n  let Component = componentProp || 'li';\n\n  if (button) {\n    componentProps.component = componentProp || 'div';\n    componentProps.focusVisibleClassName = clsx(listItemClasses.focusVisible, focusVisibleClassName);\n    Component = ButtonBase;\n  } // v4 implementation, deprecated in v5, will be removed in v6\n\n\n  if (hasSecondaryAction) {\n    // Use div by default.\n    Component = !componentProps.component && !componentProp ? 'div' : Component; // Avoid nesting of li > li.\n\n    if (ContainerComponent === 'li') {\n      if (Component === 'li') {\n        Component = 'div';\n      } else if (componentProps.component === 'li') {\n        componentProps.component = 'div';\n      }\n    }\n\n    return /*#__PURE__*/_jsx(ListContext.Provider, {\n      value: childContext,\n      children: /*#__PURE__*/_jsxs(ListItemContainer, _extends({\n        as: ContainerComponent,\n        className: clsx(classes.container, ContainerClassName),\n        ref: handleRef,\n        ownerState: ownerState\n      }, ContainerProps, {\n        children: [/*#__PURE__*/_jsx(Root, _extends({}, rootProps, !isHostComponent(Root) && {\n          as: Component,\n          ownerState: _extends({}, ownerState, rootProps.ownerState)\n        }, componentProps, {\n          children: children\n        })), children.pop()]\n      }))\n    });\n  }\n\n  return /*#__PURE__*/_jsx(ListContext.Provider, {\n    value: childContext,\n    children: /*#__PURE__*/_jsxs(Root, _extends({}, rootProps, {\n      as: Component,\n      ref: handleRef,\n      ownerState: ownerState\n    }, !isHostComponent(Root) && {\n      ownerState: _extends({}, ownerState, rootProps.ownerState)\n    }, componentProps, {\n      children: [children, secondaryAction && /*#__PURE__*/_jsx(ListItemSecondaryAction, {\n        children: secondaryAction\n      })]\n    }))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? ListItem.propTypes\n/* remove-proptypes */\n= {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * Defines the `align-items` style property.\n   * @default 'center'\n   */\n  alignItems: PropTypes.oneOf(['center', 'flex-start']),\n\n  /**\n   * If `true`, the list item is focused during the first mount.\n   * Focus will also be triggered if the value changes from false to true.\n   * @default false\n   * @deprecated checkout [ListItemButton](/api/list-item-button/) instead\n   */\n  autoFocus: PropTypes.bool,\n\n  /**\n   * If `true`, the list item is a button (using `ButtonBase`). Props intended\n   * for `ButtonBase` can then be applied to `ListItem`.\n   * @default false\n   * @deprecated checkout [ListItemButton](/api/list-item-button/) instead\n   */\n  button: PropTypes.bool,\n\n  /**\n   * The content of the component if a `ListItemSecondaryAction` is used it must\n   * be the last child.\n   */\n  children: chainPropTypes(PropTypes.node, props => {\n    const children = React.Children.toArray(props.children); // React.Children.toArray(props.children).findLastIndex(isListItemSecondaryAction)\n\n    let secondaryActionIndex = -1;\n\n    for (let i = children.length - 1; i >= 0; i -= 1) {\n      const child = children[i];\n\n      if (isMuiElement(child, ['ListItemSecondaryAction'])) {\n        secondaryActionIndex = i;\n        break;\n      }\n    } //  is ListItemSecondaryAction the last child of ListItem\n\n\n    if (secondaryActionIndex !== -1 && secondaryActionIndex !== children.length - 1) {\n      return new Error('MUI: You used an element after ListItemSecondaryAction. ' + 'For ListItem to detect that it has a secondary action ' + 'you must pass it as the last child to ListItem.');\n    }\n\n    return null;\n  }),\n\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n\n  /**\n   * The components used for each slot inside the InputBase.\n   * Either a string to use a HTML element or a component.\n   * @default {}\n   */\n  components: PropTypes.shape({\n    Root: PropTypes.elementType\n  }),\n\n  /**\n   * The props used for each slot inside the Input.\n   * @default {}\n   */\n  componentsProps: PropTypes.object,\n\n  /**\n   * The container component used when a `ListItemSecondaryAction` is the last child.\n   * @default 'li'\n   * @deprecated\n   */\n  ContainerComponent: elementTypeAcceptingRef,\n\n  /**\n   * Props applied to the container component if used.\n   * @default {}\n   * @deprecated\n   */\n  ContainerProps: PropTypes.object,\n\n  /**\n   * If `true`, compact vertical padding designed for keyboard and mouse input is used.\n   * The prop defaults to the value inherited from the parent List component.\n   * @default false\n   */\n  dense: PropTypes.bool,\n\n  /**\n   * If `true`, the component is disabled.\n   * @default false\n   * @deprecated checkout [ListItemButton](/api/list-item-button/) instead\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, the left and right padding is removed.\n   * @default false\n   */\n  disableGutters: PropTypes.bool,\n\n  /**\n   * If `true`, all padding is removed.\n   * @default false\n   */\n  disablePadding: PropTypes.bool,\n\n  /**\n   * If `true`, a 1px light border is added to the bottom of the list item.\n   * @default false\n   */\n  divider: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  focusVisibleClassName: PropTypes.string,\n\n  /**\n   * The element to display at the end of ListItem.\n   */\n  secondaryAction: PropTypes.node,\n\n  /**\n   * Use to apply selected styling.\n   * @default false\n   * @deprecated checkout [ListItemButton](/api/list-item-button/) instead\n   */\n  selected: PropTypes.bool,\n\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.object\n} : void 0;\nexport default ListItem;","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z\"\n}), 'SwapHoriz');"],"sourceRoot":""}