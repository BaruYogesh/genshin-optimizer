"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[348],{31038:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(93433),i=t(1413),o=t(45987),a=t(53174),s=t(54483),u=t(63204),l=t(14361),c=t(13967),d=t(47047),p=t(94198),h=t(20890),f=t(68870),x=t(72791),v=t(22020),g=t(947),Z=t(56928),m=t(42320),y=t(24351),j=t(50921),w=t(46956),b=t(610),k=t(68244),C=t(2380),I=t(80184),P=["value","onChange","defaultText","defaultIcon","placeholderText","labelText","showDefault","showInventory","showEquipped","filter","disable"];function T(e){var n=e.value,t=e.onChange,T=e.defaultText,W=void 0===T?"":T,S=e.defaultIcon,_=void 0===S?"":S,N=e.placeholderText,E=void 0===N?"":N,M=e.labelText,L=void 0===M?"":M,D=e.showDefault,z=void 0!==D&&D,A=e.showInventory,G=void 0!==A&&A,q=e.showEquipped,F=void 0!==q&&q,R=e.filter,O=void 0===R?function(){return!0}:R,H=e.disable,V=void 0===H?function(){return!1}:H,X=(0,o.Z)(e,P),B=(0,v.$)(["ui","artifact","charNames_gen"]).t,$=(0,c.Z)(),K=(0,x.useContext)(Z.t).database,J=(0,m.Z)((function(){return g.Z.getAll}),[]),U=(0,x.useMemo)((function(){return J&&(0,j.zU)(K,J)}),[K,J]),Q=K._getCharKeys().filter((function(e){return(null===J||void 0===J?void 0:J[e])&&O(J[e],e)})).sort(),Y=(0,x.useCallback)((function(e){switch(e){case"Equipped":return B("artifact:filterLocation.currentlyEquipped");case"Inventory":return B("artifact:filterLocation.inventory");case"":return W;default:return B("charNames_gen:".concat(e))}}),[W,B]),ee=(0,x.useCallback)((function(e){var n;switch(e){case"Equipped":return(0,I.jsx)(s.G,{icon:a.caW});case"Inventory":return(0,I.jsx)(u.Z,{});case"":return _;default:return(0,I.jsx)(C.Z,{src:null===(n=J[e])||void 0===n?void 0:n.thumbImgSide,sx:{pr:1}})}}),[_,J]),ne=(0,x.useMemo)((function(){return U&&function(e,n,t,i,o,a){if(!n)return[];var s=[];i&&s.push({value:"",label:t("")});o&&s.push({value:"Inventory",label:t("Inventory")});a&&s.push({value:"Equipped",label:t("Equipped")});var u=e.filter((0,w.C)({element:(0,r.Z)(y.N),weaponType:(0,r.Z)(y.yd),favorite:"yes",name:""},n)).map((function(e){return{value:e,label:t(e)}})),l=e.filter((0,w.C)({element:(0,r.Z)(y.N),weaponType:(0,r.Z)(y.yd),favorite:"no",name:""},n)).map((function(e){return{value:e,label:t(e)}}));return s.concat(u).concat(l)}(Q,U,Y,z,G,F)}),[U,Q,z,G,F,Y]);return J&&ne?(0,I.jsx)(p.Z,(0,i.Z)({autoHighlight:!0,options:ne,clearIcon:n?void 0:"",getOptionLabel:function(e){return e.label},onChange:function(e,n,r){return("change"!==e.type||"clear"!==r)&&t(n?n.value:"")},isOptionEqualToValue:function(e,n){return e.value===n.value},getOptionDisabled:function(e){return V(e.value)},value:{value:n,label:Y(n)},renderInput:function(e){return(0,I.jsx)(k.Z,(0,i.Z)((0,i.Z)({},e),{},{label:L,placeholder:E,startAdornment:ee(n),hasValue:!!n}))},renderOption:function(e,t){var r,i="Equipped"!==t.value&&"Inventory"!==t.value&&""!==t.value&&(null===(r=K._getChar(t.value))||void 0===r?void 0:r.favorite);return(0,I.jsx)(b.Z,{value:t.value?t.value:"default",image:ee(t.value),text:(0,I.jsx)(x.Suspense,{fallback:(0,I.jsx)(d.Z,{variant:"text",width:100}),children:(0,I.jsx)(h.Z,{variant:"inherit",noWrap:!0,children:Y(t.value)})}),theme:$,isSelected:n===t.value,addlElement:(0,I.jsxs)(I.Fragment,{children:[i&&(0,I.jsx)(f.Z,{display:"flex",flexGrow:1}),i&&(0,I.jsx)(l.Z,{sx:{ml:1,mr:-.5}})]}),props:e},t.value?t.value:"default")}},X)):(0,I.jsx)(d.Z,{height:50})}},40020:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(63204),i=t(20890),o=t(22020),a=t(947),s=t(42320),u=t(80184);function l(e){var n=e.location,t=(0,o.$)("ui").t,l=(0,s.Z)((function(){return a.Z.get(null!==n&&void 0!==n?n:"")}),[n]);return(0,u.jsx)(i.Z,{component:"span",children:null!==l&&void 0!==l&&l.name?l.nameWIthIcon:(0,u.jsxs)("span",{children:[(0,u.jsx)(r.Z,{sx:{verticalAlign:"text-bottom"}})," ",t("inventory")]})})}},2380:function(e,n,t){var r=(0,t(93457).Z)("img")((function(e){var n=e.theme;return{display:"inline-block",width:"auto",height:"2.3em",lineHeight:1,verticalAlign:"text-bottom",marginTop:n.spacing(-3),marginLeft:n.spacing(-1.25),marginRight:n.spacing(-1),marginBottom:n.spacing(-1)}}));n.Z=r},610:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(1413),i=t(23786),o=t(57064),a=t(49900),s=t(80184);function u(e){var n=e.value,t=e.image,u=void 0===t?"":t,l=e.text,c=e.theme,d=e.isSelected,p=e.addlElement,h=e.props;return(0,s.jsxs)(i.Z,(0,r.Z)((0,r.Z)({value:n},h),{},{children:[(0,s.jsx)(o.Z,{children:u}),(0,s.jsx)(a.Z,{primaryTypographyProps:{style:{fontWeight:d?c.typography.fontWeightMedium:c.typography.fontWeightRegular}},children:l}),p&&p]}),n)}},68244:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(1413),i=t(45987),o=t(13967),a=t(58165),s=t(80184),u=["hasValue","startAdornment","InputProps","sx"];function l(e){var n=e.hasValue,t=e.startAdornment,l=e.InputProps,c=e.sx,d=(0,i.Z)(e,u),p=(0,o.Z)();return(0,s.jsx)(a.Z,(0,r.Z)((0,r.Z)({},d),{},{variant:"filled",color:n?"success":"primary",hiddenLabel:!d.label,type:"search",InputProps:(0,r.Z)((0,r.Z)({},l),{},{startAdornment:t}),InputLabelProps:{style:{color:p.palette.text.primary}},sx:(0,r.Z)((0,r.Z)({},c),{},{"& .MuiFilledInput-root":{backgroundColor:n?p.palette.success.main:p.palette.primary.main,paddingTop:d.label?void 0:0,paddingBottom:0},"& .MuiFilledInput-root.Mui-focused":{backgroundColor:n?p.palette.success.light:p.palette.primary.light},"& .MuiFilledInput-root:hover":{backgroundColor:n?p.palette.success.dark:p.palette.primary.dark},"& .MuiFilledInput-root:before":{border:"none"},"& .MuiFilledInput-root.Mui-disabled:before":{border:"none"},"& .MuiFilledInput-root:after":{border:"none"},"& .MuiFilledInput-root:hover:not(.Mui-disabled):before":{border:"none"},"& input[type=search]::-ms-clear":{display:"none",width:0,height:0},"& input[type=search]::-ms-reveal":{display:"none",width:0,height:0},"& input[type=search]::-webkit-search-decoration":{display:"none"},"& input[type=search]::-webkit-search-cancel-button":{display:"none"},"& input[type=search]::-webkit-search-results-button":{display:"none"},"& input[type=search]::-webkit-search-results-decoration":{display:"none"}})}))}},73578:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(1413),i=t(45987),o=t(93433),a=t(90388),s=t(2191),u=t(24351),l=t(75308),c=t(55942),d=t(91839),p=t(80184),h=["value","onChange"],f=(0,l.X)((0,o.Z)(u.yd));function x(e){var n=e.value,t=e.onChange,o=(0,i.Z)(e,h);return(0,p.jsx)(d.Z,(0,r.Z)((0,r.Z)({exclusive:!0,value:n},o),{},{children:u.yd.map((function(e){var r;return(0,p.jsx)(a.Z,{value:e,onClick:function(){return t(f(n,e))},children:(0,p.jsx)(c.Z,{src:null===(r=s.Z.weaponTypes)||void 0===r?void 0:r[e],size:2})},e)}))}))}},44361:function(e,n,t){t.d(n,{Z:function(){return I}});var r=t(93433),i=t(29439),o=t(39504),a=t(61889),s=t(58165),u=t(94721),l=t(66647),c=t(68870),d=t(20890),p=t(72791),h=t(22020),f=t(2191),x=t(66218),v=t(42320),g=t(24351),Z=t(3992),m=t(71310),y=t(68198),j=t(55942),w=t(9321),b=t(10157),k=t(73578),C=t(80184);function I(e){var n=e.show,t=e.ascension,I=void 0===t?0:t,P=e.onHide,T=e.onSelect,W=e.filter,S=void 0===W?function(){return!0}:W,_=e.weaponFilter,N=(0,h.$)(["page_weapon","weaponNames_gen"]).t,E=(0,v.Z)((function(){return x.Z.getAll}),[]),M=(0,p.useState)(_?[_]:(0,r.Z)(g.yd)),L=(0,i.Z)(M,2),D=L[0],z=L[1];(0,p.useEffect)((function(){return _&&z([_])}),[_]);var A=(0,p.useState)(""),G=(0,i.Z)(A,2),q=G[0],F=G[1],R=(0,p.useDeferredValue)(q),O=E?g.fG.filter((function(e){return S(E[e])})).filter((function(e){var n;return D.includes(null===E||void 0===E||null===(n=E[e])||void 0===n?void 0:n.weaponType)})).filter((function(e){return!R||N("weaponNames_gen:".concat(e)).toLowerCase().includes(R.toLowerCase())})).sort((function(e,n){var t,r,i,o;return(null!==(t=null===E||void 0===E||null===(r=E[n])||void 0===r?void 0:r.rarity)&&void 0!==t?t:0)-(null!==(i=null===E||void 0===E||null===(o=E[e])||void 0===o?void 0:o.rarity)&&void 0!==i?i:0)})):[];return E?(0,C.jsx)(w.Z,{open:n,onClose:P,children:(0,C.jsxs)(Z.Z,{children:[(0,C.jsx)(o.Z,{sx:{py:1},children:(0,C.jsxs)(a.ZP,{container:!0,spacing:1,children:[(0,C.jsx)(a.ZP,{item:!0,children:(0,C.jsx)(k.Z,{value:D,onChange:z,disabled:!!_,size:"small"})}),(0,C.jsx)(a.ZP,{item:!0,flexGrow:1,children:(0,C.jsx)(s.Z,{autoFocus:!0,size:"small",value:q,onChange:function(e){return F(e.target.value)},label:N("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,C.jsx)(a.ZP,{item:!0,children:(0,C.jsx)(y.Z,{onClick:P})})]})}),(0,C.jsx)(u.Z,{}),(0,C.jsx)(o.Z,{children:(0,C.jsx)(a.ZP,{container:!0,spacing:1,children:O.map((function(e){var n,t=E[e];return(0,C.jsx)(a.ZP,{item:!0,lg:3,md:4,children:(0,C.jsx)(m.Z,{sx:{height:"100%"},children:(0,C.jsxs)(l.Z,{onClick:function(){P(),T(e)},sx:{display:"flex"},children:[(0,C.jsx)(c.Z,{component:"img",src:t.getImg(I),sx:{width:100,height:"auto"},className:" grad-".concat(t.rarity,"star")}),(0,C.jsxs)(c.Z,{sx:{flexGrow:1,px:1},children:[(0,C.jsx)(d.Z,{variant:"subtitle1",children:t.name}),(0,C.jsxs)(d.Z,{children:[(0,C.jsx)(j.Z,{src:null===(n=f.Z.weaponTypes)||void 0===n?void 0:n[t.weaponType]})," ",(0,C.jsx)(b.t,{stars:t.rarity,colored:!0})]})]})]})})},e)}))})}),(0,C.jsx)(u.Z,{}),(0,C.jsx)(o.Z,{sx:{py:1},children:(0,C.jsx)(y.Z,{large:!0,onClick:P})})]})}):null}},66218:function(e,n,t){t.d(n,{X:function(){return f},Z:function(){return h}});var r=t(29439),i=t(15671),o=t(43144),a=t(55942),s=t(25617),u=t(66624),l=t(26138),c=t(2139),d=t(80184),p=t.e(460).then(t.bind(t,72953)).then((function(e){return e.default})),h=function(){function e(n,t,r,o){var a=this;(0,i.Z)(this,e),this.key=void 0,this.sheet=void 0,this.data=void 0,this.rarity=void 0,this.weaponType=void 0,this.tr=function(e){return(0,d.jsx)(u.v,{ns:"weapon_".concat(a.key,"_gen"),key18:e})},this.passiveDescription=function(e){return a.hasRefinement?a.tr("passiveDescription.".concat(e)):""},this.rarity=r.rarity,this.weaponType=r.weaponType,this.key=n,this.sheet=t,this.data=o}return(0,o.Z)(e,[{key:"name",get:function(){return this.tr("name")}},{key:"hasRefinement",get:function(){return this.rarity>2}},{key:"passiveName",get:function(){return this.hasRefinement?this.tr("passiveName"):""}},{key:"description",get:function(){return this.tr("description")}},{key:"document",get:function(){return this.sheet.document}},{key:"milestoneLevels",get:function(){return this.hasRefinement?c.D4:c.Xu}},{key:"ambiguousLevel",value:function(e){return this.hasRefinement?(0,c.ek)(e):(0,c.nB)(e)}},{key:"getImg",value:function(e){return e<2?this.sheet.icon:this.sheet.iconAwaken}}],[{key:"getAll",get:function(){return p}}]),e}();h.get=function(e){return e?p.then((function(n){return n[e]})):void 0},h.getWeaponsOfType=function(e,n){return Object.fromEntries(Object.entries(e).filter((function(e){var t=(0,r.Z)(e,2);t[0];return t[1].weaponType===n})))},h.getLevelString=function(e){return"".concat(e.level,"/").concat(c.SJ[e.ascension])};var f=function(e,n,t,r){var i=function(n){return(0,d.jsx)(u.v,{ns:"weapon_".concat(e,"_gen"),key18:n})};return{title:i("passiveName"),icon:function(e){return(0,d.jsx)(a.Z,{size:2,sx:{m:-1},src:e.get(l.qH.weapon.asc).value<2?n:t})},action:r&&(0,d.jsx)(s.Z,{color:"success",children:r}),description:function(e){return i("passiveDescription.".concat(e.get(l.qH.weapon.refineIndex).value))}}}},90543:function(e,n,t){t.d(n,{Z:function(){return A}});var r,i=t(30168),o=t(53174),a=t(54483),s=t(40117),u=t(62002),l=t(63204),c=t(66647),d=t(68870),p=t(47047),h=t(13400),f=t(20890),x=t(39504),v=t(2199),g=t(40165),Z=t(24518),m=t(72791),y=t(22020),j=t(2191),w=t(71310),b=t(31038),k=t(40020),C=t(20005),I=t(55942),P=t(10157),T=t(75545),W=t(2139),S=t(66218),_=t(56928),N=t(26138),E=t(73036),M=t(79406),L=t(42320),D=t(74480),z=t(80184);function A(e){var n,t=e.weaponId,A=e.onClick,G=e.onEdit,q=e.onDelete,F=e.canEquip,R=void 0!==F&&F,O=e.extraButtons,H=(0,y.$)(["page_weapon","ui"]).t,V=(0,m.useContext)(_.t).database,X=(0,D.Z)(t),B=(0,L.Z)((function(){return null!==X&&void 0!==X&&X.key?S.Z.get(X.key):void 0}),[null===X||void 0===X?void 0:X.key]),$=(0,m.useCallback)((function(e){return e.weaponTypeKey===(null===B||void 0===B?void 0:B.weaponType)}),[B]),K=(0,m.useCallback)((function(e){return(0,z.jsx)(c.Z,{onClick:function(){return null===A||void 0===A?void 0:A(t)},children:e})}),[A,t]),J=(0,m.useCallback)((function(e){return(0,z.jsx)(d.Z,{children:e})}),[]),U=(0,m.useCallback)((function(e){return V.setWeaponLocation(t,e)}),[V,t]),Q=(0,m.useMemo)((function(){return B&&X&&(0,E.mP)([B.data,(0,E.v0)(X)])}),[B,X]);if(!X||!B||!Q)return null;var Y=X.level,ee=X.ascension,ne=X.refinement,te=X.id,re=X.location,ie=void 0===re?"":re,oe=X.lock,ae=Q.get(N.ri.weapon.type).value,se=[N.ri.weapon.main,N.ri.weapon.sub,N.ri.weapon.sub2].map((function(e){return Q.get(e)})),ue=B.getImg(ee);return(0,z.jsx)(m.Suspense,{fallback:(0,z.jsx)(p.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,z.jsxs)(w.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,z.jsxs)(C.Z,{condition:!!A,wrapper:K,falseWrapper:J,children:[(0,z.jsxs)(d.Z,{className:"grad-".concat(B.rarity,"star"),sx:{position:"relative",pt:2,px:2},children:[!A&&(0,z.jsx)(h.Z,{color:"primary",onClick:function(){return V.updateWeapon({lock:!oe},te)},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:oe?(0,z.jsx)(s.Z,{}):(0,z.jsx)(u.Z,{})}),(0,z.jsxs)(d.Z,{sx:{position:"relative",zIndex:1},children:[(0,z.jsxs)(d.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,z.jsx)(I.Z,{sx:{fontSize:"1.5em"},src:null===(n=j.Z.weaponTypes)||void 0===n?void 0:n[ae]}),(0,z.jsx)(f.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,z.jsx)("strong",{children:B.name})})]}),(0,z.jsxs)(f.Z,{component:"span",variant:"h5",children:["Lv. ",Y]}),(0,z.jsxs)(f.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",W.SJ[ee]]}),(0,z.jsxs)(f.Z,{variant:"h6",children:["Refinement ",(0,z.jsx)("strong",{children:ne})]}),(0,z.jsx)(f.Z,{children:(0,z.jsx)(P.t,{stars:B.rarity,colored:!0})})]}),(0,z.jsx)(d.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,z.jsx)(d.Z,{component:"img",src:null!==ue&&void 0!==ue?ue:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,z.jsx)(x.Z,{children:se.map((function(e){if(!e.info.key)return null;var n=(0,M.EC)(e.value,e.unit,e.unit?void 0:0);return(0,z.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,z.jsxs)(f.Z,{flexGrow:1,children:[T.Z[e.info.key]," ",M.ZP.get(e.info.key)]}),(0,z.jsx)(f.Z,{children:n})]},e.info.key)}))})]}),(0,z.jsxs)(d.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[R?(0,z.jsx)(b.Z,{size:"small",sx:{flexGrow:1},disable:function(e){return""===e},showDefault:!0,defaultIcon:(0,z.jsx)(l.Z,{}),defaultText:H("ui:inventory"),value:ie,onChange:U,filter:$,disableClearable:!0}):(0,z.jsx)(k.Z,{location:ie}),(0,z.jsxs)(v.Z,{children:[!!G&&(0,z.jsx)(g.Z,{title:(0,z.jsx)(f.Z,{children:H(r||(r=(0,i.Z)(["page_weapon:edit"])))}),placement:"top",arrow:!0,children:(0,z.jsx)(Z.Z,{color:"info",onClick:function(){return G(te)},children:(0,z.jsx)(a.G,{icon:o.Xcf,className:"fa-fw"})})}),!!q&&(0,z.jsx)(Z.Z,{color:"error",onClick:function(){return q(te)},disabled:!!ie||oe,children:(0,z.jsx)(a.G,{icon:o.I7k,className:"fa-fw"})}),O]})]})]})})}},70348:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var r=t(74165),i=t(15861),o=t(29439),a=t(93433),s=t(53174),u=t(54483),l=t(68870),c=t(61889),d=t(90388),p=t(58165),h=t(57246),f=t(47047),x=t(39504),v=t(20890),g=t(24518),Z=t(72791),m=t(10757),y=t(22020),j=t(76899),w=t(3992),b=t(91839),k=t(59215),C=t(10157),I=t(73578),P=t(44361),T=t(66218),W=t(56928),S=t(17278),_=t(68544),N=t(70645),E=t(42320),M=t(24351),L=t(46956),D=t(60393),z=t(66045),A=t(11400),G=t(90543),q=t(80184),F=(0,Z.lazy)((function(){return Promise.all([t.e(913),t.e(476)]).then(t.bind(t,74476))})),R={xs:1,sm:2,md:3,lg:3,xl:4},O={xs:9,sm:11,md:23,lg:23,xl:23},H=function(){return{editWeaponId:"",sortType:z.Ol[0],ascending:!1,rarity:(0,a.Z)(M.wC),weaponType:(0,a.Z)(M.yd)}};function V(){var e=(0,y.$)(["page_weapon","ui","weaponNames_gen"]).t,n=(0,Z.useContext)(W.t).database,t=(0,S.Z)("WeaponDisplay",H),a=(0,o.Z)(t,2),j=a[0],V=a[1],B=(0,Z.useState)(!1),$=(0,o.Z)(B,2),K=$[0],J=$[1],U=(0,_.Z)(),Q=(0,o.Z)(U,2),Y=Q[0],ee=Q[1],ne=(0,Z.useRef)(null),te=(0,Z.useState)(0),re=(0,o.Z)(te,2),ie=re[0],oe=re[1];(0,Z.useEffect)((function(){return m.ZP.send({hitType:"pageview",page:"/weapon"}),n.followAnyWeapon(ee)}),[ee,n]);var ae=(0,N.Z)(),se=O[ae],ue=(0,E.Z)((function(){return T.Z.getAll}),[]),le=(0,Z.useCallback)(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){var o,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n._getWeapon(i)){t.next=3;break}return t.abrupt("return");case 3:if(a=e("weaponNames_gen:".concat(o.key)),window.confirm(e("removeWeapon",{value:a}))){t.next=6;break}return t.abrupt("return");case 6:n.removeWeapon(i),j.editWeaponId===i&&V({editWeaponId:""});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[j.editWeaponId,V,n,e]),ce=(0,Z.useCallback)((function(e){V({editWeaponId:e})}),[V]),de=(0,Z.useCallback)((function(e){ce(n.createWeapon((0,A.x)(e)))}),[n,ce]),pe=(0,Z.useState)(""),he=(0,o.Z)(pe,2),fe=he[0],xe=he[1],ve=(0,Z.useDeferredValue)(fe),ge=j.sortType,Ze=j.ascending,me=j.weaponType,ye=j.rarity,je=(0,Z.useMemo)((function(){return ue&&(0,z.Sn)(ue)}),[ue]),we=(0,Z.useMemo)((function(){return ue&&(0,z.Xg)(ue)}),[ue]),be=(0,Z.useMemo)((function(){var e=n._getWeapons(),t=e.length;if(!je||!we)return{weaponIdList:[],totalWeaponNum:t};var r=e.filter((0,L.C)({weaponType:me,rarity:ye,name:ve},we)).sort((0,L.e)(ge,Ze,je)).map((function(e){return e.id}));return Y&&{weaponIdList:r,totalWeaponNum:t}}),[Y,n,je,we,ge,Ze,ye,me,ve]),ke=be.weaponIdList,Ce=be.totalWeaponNum,Ie=(0,Z.useMemo)((function(){var e=Math.ceil(ke.length/se),n=(0,D.uZ)(ie,0,e-1);return{weaponIdsToShow:ke.slice(n*se,(n+1)*se),numPages:e,currentPageIndex:n}}),[ke,ie,se]),Pe=Ie.weaponIdsToShow,Te=Ie.numPages,We=Ie.currentPageIndex,Se=ke.length!==Ce?"".concat(ke.length,"/").concat(Ce):"".concat(Ce),_e=(0,Z.useCallback)((function(e,n){var t;null===(t=ne.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}),oe(n-1)}),[oe,ne]),Ne=(0,Z.useCallback)((function(){return V({editWeaponId:""})}),[V]),Ee=j.editWeaponId;return(0,Z.useEffect)((function(){Ee&&(n._getWeapon(Ee)||Ne())}),[n,Ee,Ne]),(0,q.jsxs)(l.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:[(0,q.jsx)(Z.Suspense,{fallback:!1,children:(0,q.jsx)(F,{weaponId:Ee,footer:!0,onClose:Ne})}),(0,q.jsxs)(w.Z,{ref:ne,sx:{p:2,pb:1},children:[(0,q.jsxs)(c.ZP,{container:!0,spacing:1,sx:{mb:1},children:[(0,q.jsx)(c.ZP,{item:!0,children:(0,q.jsx)(I.Z,{sx:{height:"100%"},onChange:function(e){return V({weaponType:e})},value:me,size:"small"})}),(0,q.jsx)(c.ZP,{item:!0,children:(0,q.jsx)(b.Z,{sx:{height:"100%"},onChange:function(e,n){return V({rarity:n})},value:ye,size:"small",children:M.wC.map((function(e){return(0,q.jsx)(d.Z,{value:e,children:(0,q.jsxs)(l.Z,{display:"flex",gap:1,children:[(0,q.jsx)("strong",{children:e}),(0,q.jsx)(C.t,{stars:1})]})},e)}))})}),(0,q.jsx)(c.ZP,{item:!0,flexGrow:1,children:(0,q.jsx)(p.Z,{autoFocus:!0,size:"small",value:fe,onChange:function(e){return xe(e.target.value)},label:e("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,q.jsx)(c.ZP,{item:!0,children:(0,q.jsx)(k.Z,{sx:{height:"100%"},sortKeys:z.Ol,value:ge,onChange:function(e){return V({sortType:e})},ascending:Ze,onChangeAsc:function(e){return V({ascending:e})}})})]}),(0,q.jsxs)(c.ZP,{container:!0,alignItems:"flex-end",children:[(0,q.jsx)(c.ZP,{item:!0,flexGrow:1,children:(0,q.jsx)(h.Z,{count:Te,page:We+1,onChange:_e})}),(0,q.jsx)(c.ZP,{item:!0,children:(0,q.jsx)(X,{numShowing:Pe.length,total:Se,t:e})})]})]}),(0,q.jsx)(Z.Suspense,{fallback:(0,q.jsx)(f.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:500}}),children:(0,q.jsxs)(c.ZP,{container:!0,spacing:1,columns:R,children:[(0,q.jsx)(c.ZP,{item:!0,xs:1,children:(0,q.jsxs)(w.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,q.jsx)(x.Z,{children:(0,q.jsx)(v.Z,{sx:{textAlign:"center"},children:e("page_weapon:addWeapon")})}),(0,q.jsx)(P.Z,{show:K,onHide:function(){return J(!1)},onSelect:de}),(0,q.jsx)(l.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,q.jsx)(g.Z,{onClick:function(){return J(!0)},color:"info",sx:{borderRadius:"1em"},children:(0,q.jsx)(v.Z,{variant:"h1",children:(0,q.jsx)(u.G,{icon:s.r8p,className:"fa-fw"})})})})]})}),Pe.map((function(e){return(0,q.jsx)(c.ZP,{item:!0,xs:1,children:(0,q.jsx)(G.Z,{weaponId:e,onDelete:le,onEdit:ce,canEquip:!0})},e)}))]})}),Te>1&&(0,q.jsx)(w.Z,{children:(0,q.jsx)(x.Z,{children:(0,q.jsxs)(c.ZP,{container:!0,alignItems:"flex-end",children:[(0,q.jsx)(c.ZP,{item:!0,flexGrow:1,children:(0,q.jsx)(h.Z,{count:Te,page:We+1,onChange:_e})}),(0,q.jsx)(c.ZP,{item:!0,children:(0,q.jsx)(X,{numShowing:Pe.length,total:Se,t:e})})]})})})]})}function X(e){var n=e.numShowing,t=e.total,r=e.t;return(0,q.jsx)(v.Z,{color:"text.secondary",children:(0,q.jsxs)(j.c,{t:r,i18nKey:"showingNum",count:n,value:t,children:["Showing ",(0,q.jsx)("b",{children:{count:n}})," out of ",{value:t}," Weapons"]})})}},74480:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(29439),i=t(72791),o=t(56928);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,i.useContext)(o.t),t=n.database,a=(0,i.useState)(t._getWeapon(e)),s=(0,r.Z)(a,2),u=s[0],l=s[1];return(0,i.useEffect)((function(){return l(t._getWeapon(e))}),[t,e]),(0,i.useEffect)((function(){return e?t.followWeapon(e,l):void 0}),[e,l,t]),u}},75308:function(e,n,t){t.d(n,{X:function(){return o}});var r=t(93433),i=t(60393);function o(e){return function(n,t){var o=n.length;return o===e.length?[t]:1===o&&n[0]===t?(0,r.Z)(e):(0,r.Z)(new Set((0,i.nh)(n,t)))}}},66045:function(e,n,t){t.d(n,{Ol:function(){return i},Sn:function(){return o},Xg:function(){return a}});var r=t(24710),i=["level","rarity"];function o(e){return{level:{getValue:function(e){var n;return null!==(n=e.level*e.ascension)&&void 0!==n?n:0},tieBreaker:"rarity"},rarity:{getValue:function(n){var t;return null===e||void 0===e||null===(t=e[n.key])||void 0===t?void 0:t.rarity},tieBreaker:"level"}}}function a(e){return{rarity:function(n,t){var r;return t.includes(null===e||void 0===e||null===(r=e[n.key])||void 0===r?void 0:r.rarity)},weaponType:function(n,t){var r;return t.includes(null===e||void 0===e||null===(r=e[n.key])||void 0===r?void 0:r.weaponType)},name:function(e,n){return r.Z.t("weaponNames_gen:".concat(e.key)).toLowerCase().includes(n.toLowerCase())}}}},15861:function(e,n,t){function r(e,n,t,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void t(l)}s.done?n(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(i,o){var a=e.apply(n,t);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}}t.d(n,{Z:function(){return i}})}}]);
//# sourceMappingURL=348.be07334b.chunk.js.map