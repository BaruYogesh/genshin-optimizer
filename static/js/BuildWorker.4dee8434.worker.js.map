{"version":3,"sources":["../webpack/bootstrap","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","Build/Build.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","Data/ElementalData.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/regenerator-runtime/runtime.js","WorkerHack.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","Util/Util.js","StatConstants.js","StatData.js","StatDependency.js","Formula.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","Build/BuildWorker.js"],"names":["self","chunkIds","moreModules","moduleId","modules","length","installedChunks","pop","installedModules","0","__webpack_require__","exports","module","i","l","call","e","chunkId","promises","push","Promise","resolve","then","importScripts","p","all","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","s","_slicedToArray","arr","Array","isArray","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","unsupportedIterableToArray","TypeError","_defineProperty","obj","configurable","writable","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","target","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_toConsumableArray","arrayLikeToArray","iter","from","pruneArtifacts","artifacts","artifactSetEffects","significantStats","ascending","alwaysAccepted","Set","shouldKeepFirst","first","second","preferFirst","firstBetter","entries","some","k","secondBetter","prunedSetEffects","set","num","effects","has","fromEntries","tmp","map","artifact","stats","setKey","mainStatKey","mainStatVal","substats","candidate","candidateStats","candidateSet","every","other","otherStats","otherSet","id","possibleStats","values","current","artifactSetPermutations","artifactsBySlot","setFilters","setKeys","filteredArtifactsBySlot","slotKeys","slotKey","artifactsBySet","freeze","setCount","accu","result","slotPerm","index","calculateTotalBuildNumber","reduce","artifactPermutations","initialStats","callback","newStats","accumulate","art","substat","setEffect","statKey","val","getTalentStatKey","skillKey","useCharElement","hitMode","infusionAura","infusionSelf","reactionMode","characterEle","weaponType","ElementalData","includes","startsWith","eleKey","_createForOfIteratorHelper","allowArrayLike","it","F","f","normalCompletion","didErr","step","_e2","_unsupportedIterableToArray","minLen","toString","slice","constructor","test","_arrayLikeToArray","len","arr2","physical","anemo","geo","electro","hydro","pyro","cryo","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","GenStateSuspendedYield","makeInvokeMethod","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","reject","__await","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","reverse","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","$RefreshReg$","$RefreshSig$","asyncGeneratorStep","gen","_next","_throw","clamp","low","high","objPathValue","a","crawlObject","validate","cb","hitTypes","hit","avgHit","critHit","hitMoves","normal","charged","plunging","elemental","skill","burst","hitElements","transformativeReactionLevelMultipliers","crystalizeLevelMultipliers","StatData","flat","default","characterHP","pretty","const","characterDEF","characterATK","characterLevel","weaponATK","baseATK","hp","hp_","unit","atk","atk_","def","def_","dmg_","finalHP","finalATK","finalDEF","critHit_base_multi","eleMas","enerRech_","critRate_","critDMG_","weakspotDMG_","heal_","incHeal_","powShield_","cdRed_","skillCDRed_","burstCDRed_","moveSPD_","atkSPD_","stamina","staminaDec_","staminaGlidingDec_","staminaChargedDec_","heal_multi","transformative_level_multi","amplificative_dmg_","transformative_dmg_","crystalize_eleMas_","variant","crystalize_multi","crystalize_dmg_","crystalize_hit","burning_dmg_","enemyLevel","enemyLevel_multi","enemyDEFRed_","Formulas","PreprocessFormulas","dependencyKeys","debug","modifiers","constData","formulaList","modifier","constModifier","dynamicModifier","constFunc","dynamicFunc","funcIndicator","func","console","log","formula","assign","move","moveName","ele","eleName","opt","res","typeName","overloaded","multi","variants","shattered","electrocharged","superconduct","swirl","reaction","vaporize","melt","baseMulti","GetFormulaDependency","dependency","Proxy","prop","receiver","add","formulaKeyDependency","GetDependencies","dependencies","InsertDependencies","CharacterFormulaImport","imp","src","Formula","formulas","instance","Constructor","defVal","onmessage","t1","performance","now","data","splitArtifacts","minFilters","maxFilters","maxBuildsToShow","optimizationTarget","turbo","targetKeys","targetFormula","postMessage","progress","timing","builds","oldCount","prunedArtifacts","newCount","prune","threshold","buildCount","skipped","gc","sort","b","buildFilterVal","splice","minimum","maximum","t2","args"],"mappings":"aAAEA,KAAmB,aAAI,SAA8BC,EAAUC,GAC9D,IAAI,IAAIC,KAAYD,EACnBE,EAAQD,GAAYD,EAAYC,GAEjC,KAAMF,EAASI,QACdC,EAAgBL,EAASM,OAAS,GAIpC,IAAIC,EAAmB,GAInBF,EAAkB,CACrBG,EAAG,GAIJ,SAASC,EAAoBP,GAG5B,GAAGK,EAAiBL,GACnB,OAAOK,EAAiBL,GAAUQ,QAGnC,IAAIC,EAASJ,EAAiBL,GAAY,CACzCU,EAAGV,EACHW,GAAG,EACHH,QAAS,IAUV,OANAP,EAAQD,GAAUY,KAAKH,EAAOD,QAASC,EAAQA,EAAOD,QAASD,GAG/DE,EAAOE,GAAI,EAGJF,EAAOD,QAKfD,EAAoBM,EAAI,SAAuBC,GAC9C,IAAIC,EAAW,GAOf,OANAA,EAASC,KAAKC,QAAQC,UAAUC,MAAK,WAEhChB,EAAgBW,IACnBM,cAAcb,EAAoBc,EAAI,cAAgB,GAAGP,IAAUA,GAAW,IAAM,CAAC,EAAI,YAAYA,GAAW,wBAG3GG,QAAQK,IAAIP,IAIpBR,EAAoBgB,EAAItB,EAGxBM,EAAoBiB,EAAInB,EAGxBE,EAAoBkB,EAAI,SAASjB,EAASkB,EAAMC,GAC3CpB,EAAoBqB,EAAEpB,EAASkB,IAClCG,OAAOC,eAAetB,EAASkB,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEpB,EAAoB0B,EAAI,SAASzB,GACX,qBAAX0B,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAetB,EAAS0B,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,KAQvD7B,EAAoB8B,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQ7B,EAAoB6B,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAlC,EAAoB0B,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAO7B,EAAoBkB,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRjC,EAAoBqC,EAAI,SAASnC,GAChC,IAAIkB,EAASlB,GAAUA,EAAO8B,WAC7B,WAAwB,OAAO9B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAF,EAAoBkB,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRpB,EAAoBqB,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAepC,KAAKiC,EAAQC,IAGzGvC,EAAoBc,EAAI,sBAIjBd,EAAoBA,EAAoB0C,EAAI,I,4ECxGtC,SAASC,EAAeC,EAAKzC,GAC1C,OCLa,SAAyByC,GACtC,GAAIC,MAAMC,QAAQF,GAAM,OAAOA,EDIxB,CAAeA,IELT,SAA+BA,EAAKzC,GACjD,GAAsB,qBAAXwB,QAA4BA,OAAOoB,YAAYzB,OAAOsB,GAAjE,CACA,IAAII,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAKC,EAET,IACE,IAAK,IAAiCC,EAA7BC,EAAKV,EAAIjB,OAAOoB,cAAmBE,GAAMI,EAAKC,EAAGC,QAAQC,QAChER,EAAKvC,KAAK4C,EAAGxB,QAET1B,GAAK6C,EAAKrD,SAAWQ,GAH8C8C,GAAK,IAK9E,MAAOQ,GACPP,GAAK,EACLC,EAAKM,EACL,QACA,IACOR,GAAsB,MAAhBK,EAAW,QAAWA,EAAW,SAC5C,QACA,GAAIJ,EAAI,MAAMC,GAIlB,OAAOH,GFnBuB,CAAqBJ,EAAKzC,IAAM,OAAAuD,EAAA,GAA2Bd,EAAKzC,IGLjF,WACb,MAAM,IAAIwD,UAAU,6IHIgF,K,6BILvF,SAASC,EAAgBC,EAAK1B,EAAKN,GAYhD,OAXIM,KAAO0B,EACTvC,OAAOC,eAAesC,EAAK1B,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZsC,cAAc,EACdC,UAAU,IAGZF,EAAI1B,GAAON,EAGNgC,ECVT,SAASG,EAAQ1B,EAAQ2B,GACvB,IAAIC,EAAO5C,OAAO4C,KAAK5B,GAEvB,GAAIhB,OAAO6C,sBAAuB,CAChC,IAAIC,EAAU9C,OAAO6C,sBAAsB7B,GACvC2B,IAAgBG,EAAUA,EAAQC,QAAO,SAAUC,GACrD,OAAOhD,OAAOiD,yBAAyBjC,EAAQgC,GAAK9C,eAEtD0C,EAAKzD,KAAK+D,MAAMN,EAAME,GAGxB,OAAOF,EAGM,SAASO,EAAeC,GACrC,IAAK,IAAIvE,EAAI,EAAGA,EAAIwE,UAAUhF,OAAQQ,IAAK,CACzC,IAAIyE,EAAyB,MAAhBD,UAAUxE,GAAawE,UAAUxE,GAAK,GAE/CA,EAAI,EACN6D,EAAQ1C,OAAOsD,IAAS,GAAMC,SAAQ,SAAU1C,GAC9C,EAAeuC,EAAQvC,EAAKyC,EAAOzC,OAE5Bb,OAAOwD,0BAChBxD,OAAOyD,iBAAiBL,EAAQpD,OAAOwD,0BAA0BF,IAEjEZ,EAAQ1C,OAAOsD,IAASC,SAAQ,SAAU1C,GACxCb,OAAOC,eAAemD,EAAQvC,EAAKb,OAAOiD,yBAAyBK,EAAQzC,OAKjF,OAAOuC,E,wHC7BM,SAASM,EAAmBpC,GACzC,OCJa,SAA4BA,GACzC,GAAIC,MAAMC,QAAQF,GAAM,OAAO,OAAAqC,EAAA,GAAiBrC,GDGzC,CAAkBA,IELZ,SAA0BsC,GACvC,GAAsB,qBAAXvD,QAA0BA,OAAOoB,YAAYzB,OAAO4D,GAAO,OAAOrC,MAAMsC,KAAKD,GFIvD,CAAgBtC,IAAQ,OAAAc,EAAA,GAA2Bd,IGLvE,WACb,MAAM,IAAIe,UAAU,wIHIwE,K,8OIKvF,SAASyB,EAAeC,EAAWC,EAAoBC,EAAkBC,GAAwC,IAA7BC,EAA4B,uDAAX,IAAIC,IAC9G,SAASC,EAAgBC,EAAOC,EAAQC,GACtC,IAAIC,EAAczE,OAAO0E,QAAQJ,GAAOK,MAAK,qCAAEC,EAAF,kBAAa,UAAIL,EAAOK,UAAX,QAAiB,MACvEC,EAAe7E,OAAO0E,QAAQH,GAAQI,MAAK,qCAAEC,EAAF,kBAAa,UAAIN,EAAMM,UAAV,QAAgB,MAC5E,GAAIV,EAAJ,OAA6C,CAACW,EAAcJ,GAA5CA,EAAhB,KAA6BI,EAA7B,KAEA,OAAOJ,IAAiBI,GAAgBL,EAI1C,IAAMM,EAAmB,CAAE,MAAS,IACpC,IAAK,IAAMC,KAAOf,EAChB,IAAK,IAAMgB,KAAOhB,EAAmBe,GAAM,CACzC,IACwB,EADlBE,EAAUjF,OAAO0E,QAAQV,EAAmBe,GAAKC,IAAMjC,QAAO,gBAAElC,EAAF,2BAAWoD,EAAiBiB,IAAIrE,MACpG,GAAIoE,EAAQ5G,OAAS,EACnByG,EAAiBC,GAAjB,UAAwBD,EAAiBC,UAAzC,QAAiD,GACjDD,EAAiBC,GAAKC,GAAOhF,OAAOmF,YAAYF,GAKtD,IAAIG,EAAMrB,EAAUsB,KAAI,SAAAC,GACtB,IAAIC,EAAQ,GAAIR,EAAOO,EAASE,UAAUV,EAAoBQ,EAASE,OAAS,QAC5EvB,EAAiBiB,IAAII,EAASG,eAChCF,EAAMD,EAASG,aAAeH,EAASI,aAHP,oBAILJ,EAASK,UAJJ,IAIlC,4CAAa9E,EAAb,EAAaA,IAAKN,EAAlB,EAAkBA,MACZ0D,EAAiBiB,IAAIrE,KACvB0E,EAAM1E,IAAO,UAAC0E,EAAM1E,UAAP,QAAe,GAAKN,IANH,8BAOlC,MAAO,CAAE+E,WAAUC,QAAOR,UA6B5B,OAzBAK,EAAMA,EAAIrC,QAAO,gBAAa6C,EAAb,EAAGN,SAA4BO,EAA/B,EAAwBN,MAA4BO,EAApD,EAA+Cf,IAA/C,OACfK,EAAIW,OAAM,gBAAaC,EAAb,EAAGV,SAAwBW,EAA3B,EAAoBV,MAAwBW,EAA5C,EAAuCnB,IAAvC,OACRe,IAAiBI,GAAY7B,EAAgBwB,EAAgBI,EAAYL,EAAUO,IAAMH,EAAMG,UAG9FjC,IAEHkB,EAAMA,EAAIrC,QAAO,YAAwE,IAA3D6C,EAA0D,EAApEN,SAA4BO,EAAwC,EAA/CN,MAA4BO,EAAmB,EAAxBf,IAE1DqB,EAAgB,sBAAIpG,OAAOqG,OAAOvB,EAAiBgB,KAAnC,CAAmD,KAAIT,KAAI,SAAA1F,GAC7E,IAAM2G,EAAO,eAAQT,GAErB,OADA7F,OAAO0E,QAAQ/E,GAAG4D,SAAQ,qCAAE1C,EAAF,KAAON,EAAP,YAAkB+F,EAAQzF,IAAO,UAACyF,EAAQzF,UAAT,QAAiB,GAAKN,KAC1E+F,KAET,OAAOlB,EAAIW,OAAM,YAA4D,IAA/CC,EAA8C,EAAxDV,SAAwBW,EAAgC,EAAvCV,MAAwBW,EAAe,EAApBnB,IACtD,OAAIe,IAAiBI,GAKW,KAFhCE,EAAgBA,EAAcrD,QAAO,SAAAuD,GAAO,OAC1CjC,EAAgBiC,EAASL,EAAYL,EAAUO,IAAMH,EAAMG,QACxC9H,cAKrB,GAAN,mBACK0F,EAAUhB,QAAO,SAAAuC,GAAQ,OAAInB,EAAee,IAAII,EAASE,YAD9D,YAEKJ,EAAIC,KAAI,SAAAD,GAAG,OAAIA,EAAIE,YAAUvC,QAAO,SAAAuC,GAAQ,OAAKnB,EAAee,IAAII,EAASE,aAU7E,SAASe,EAAwBC,EAAiBC,GAIvD,IAHA,IAAMC,EAAU,IAAItC,IAAIqC,EAAWpB,KAAI,SAAAxG,GAAC,OAAIA,EAAEgC,QAAO8F,EAA0B,GACzEC,EAAW5G,OAAO4C,KAAK4D,GAE7B,MAAsBI,EAAtB,eAAgC,CAA3B,IAA2B,EAArBC,EAAO,KACZC,EAAiB,GADS,cAEPN,EAAgBK,IAFT,IAE9B,2BAAiD,CAAC,IAAvCvB,EAAsC,QAC3CoB,EAAQxB,IAAII,EAASE,QACnBsB,EAAexB,EAASE,QAASsB,EAAexB,EAASE,QAAQrG,KAAKmG,GACrEwB,EAAexB,EAASE,QAAU,CAACF,GAEpCwB,EAAc,KAAQA,EAAc,KAAO3H,KAAKmG,GAC/CwB,EAAc,KAAS,CAACxB,IARH,8BAW9BqB,EAAwBE,GAAW7G,OAAO+G,OAAOD,GAGnD,IAAME,EAAW,GAAIC,EAAO,GAAIC,EAAS,GAsBzC,OApBA,SAASC,EAASC,GAChB,GAAIA,GAASR,EAASvI,OAAtB,CAA+B,IAAD,gBACDoI,GADC,IAC5B,4CAAa5F,EAAb,EAAaA,IAAKmE,EAAlB,EAAkBA,IAChB,IAAI,UAACgC,EAASnG,UAAV,QAAkB,GAAKmE,EACzB,QAHwB,8BAI5BkC,EAAO/H,KAAP,eAAiB8H,QAJnB,CAQA,IAAMJ,EAAUD,EAASQ,GACrBN,EAAiBH,EAAwBE,GAC7C,IAAK,IAAMrB,KAAUsB,EAAgB,CAAC,IAAD,EACnCE,EAASxB,IAAU,UAACwB,EAASxB,UAAV,QAAqB,GAAK,EAC7CyB,EAAKJ,GAAWC,EAAetB,GAC/B2B,EAASC,EAAQ,GACjBJ,EAASxB,IAAW,IAIxB2B,CAAS,GACFD,EAQF,SAASG,EAA0Bb,EAAiBC,GACzD,OAAOF,EAAwBC,EAAiBC,GAAYa,QAAO,SAACL,EAAMT,GAAP,OACjES,EAAOjH,OAAO0E,QAAQ8B,GAAiBc,QAAO,SAACL,EAAMlD,GAAP,OAAqBkD,EAAOlD,EAAU,GAAG1F,SAAQ,KAC7F,GAgBC,SAASkJ,EAAqBC,EAAchB,EAAiBxC,EAAoByD,GACtF,IAAMb,EAAW5G,OAAO4C,KAAK4D,GAAkBQ,EAAW,GAAIC,EAAO,IACrE,SAASE,EAASC,EAAO7B,GACvB,GAAI6B,GAASR,EAASvI,OACpBoJ,EAASR,EAAM1B,OADjB,CAKA,IAN8B,EAM1BsB,EAAUD,EAASQ,GANO,cAOPZ,EAAgBK,IAPT,IAO9B,2BAAiD,CAAC,IAAvCvB,EAAsC,QAC3CoC,EAAQ,eAAQnC,GACpBoC,EAAWd,EAASvB,EAAU0B,EAAUC,EAAMS,EAAU1D,GACxDmD,EAASC,EAAQ,EAAGM,GACpBV,EAAS1B,EAASE,SAAW,GAXD,gCAehC2B,CAAS,EAAGK,GAGd,SAASG,EAAWd,EAASe,EAAKZ,EAAUC,EAAM1B,EAAOvB,GAAqB,IAAD,IACvEwB,EAASoC,EAAIpC,OACjByB,EAAKJ,GAAWe,EAChBZ,EAASxB,IAAU,UAACwB,EAASxB,UAAV,QAAqB,GAAK,EAGzCoC,EAAInC,eAAeF,IAAOA,EAAMqC,EAAInC,cAAgBmC,EAAIlC,aAC5DkC,EAAIjC,SAASpC,SAAQ,SAACsE,IACT,OAAPA,QAAO,IAAPA,OAAA,EAAAA,EAAShH,OAAO0E,IAAOA,EAAMsC,EAAQhH,MAAQgH,EAAQtH,UAI3D,IAAIuH,EAAS,UAAG9D,EAAmBwB,UAAtB,aAAG,EAA6BwB,EAASxB,IACtDsC,GAAa9H,OAAO0E,QAAQoD,GAAWvE,SAAQ,YAAqB,IAAD,mBAAlBwE,EAAkB,KAATC,EAAS,KAC7DD,KAAWxC,IAAOA,EAAMwC,IAAYC,MAUrC,SAASC,EAAiBC,EAAU3C,GAAgC,IAAzB4C,EAAwB,0DAC0D5C,EAA1H6C,eADgE,MACtD,GADsD,IAC0D7C,EAA5G8C,oBADkD,MACnC,GADmC,IAC0D9C,EAAzF+C,oBAD+B,MAChB,GADgB,IAC0D/C,EAAtEgD,oBADY,MACG,KADH,IAC0DhD,EAAjDiD,oBADT,MACwB,QADxB,IAC0DjD,EAAzBkD,kBADjC,MAC8C,QAD9C,EAExE,GAAIzI,OAAO4C,KAAK8F,KAAeC,SAAST,GAAW,MAAM,GAAN,OAAUA,EAAV,sBAAgCE,GAGnF,GAFKD,IAAgBA,EAAgC,aAAfM,GAErB,cAAbP,GAAyC,UAAbA,GAAqC,UAAbA,GAAwBC,EAC9E,OAAII,GAAgBA,EAAaK,WAAWJ,GAAqB,GAAN,OAAUD,EAAV,YAA0BL,EAA1B,YAAsCE,GAC3F,GAAN,OAAUI,EAAV,YAA0BN,EAA1B,YAAsCE,GAGxC,IAAIS,EAAS,WAGb,OAFIP,EAAcO,EAASP,EAClBD,IAAcQ,EAASR,GAC5BE,GAAgBA,EAAaK,WAAWC,GAAe,GAAN,OAAUN,EAAV,YAA0BL,EAA1B,YAAsCE,GAErF,GAAN,OAAUS,EAAV,YAAoBX,EAApB,YAAgCE,K,6BC7MlC,6CACe,SAASU,EAA2B/I,EAAGgJ,GACpD,IAAIC,EAEJ,GAAsB,qBAAX3I,QAAgD,MAAtBN,EAAEM,OAAOoB,UAAmB,CAC/D,GAAIF,MAAMC,QAAQzB,KAAOiJ,EAAK,YAA2BjJ,KAAOgJ,GAAkBhJ,GAAyB,kBAAbA,EAAE1B,OAAqB,CAC/G2K,IAAIjJ,EAAIiJ,GACZ,IAAInK,EAAI,EAEJoK,EAAI,aAER,MAAO,CACL7H,EAAG6H,EACHlI,EAAG,WACD,OAAIlC,GAAKkB,EAAE1B,OAAe,CACxB6D,MAAM,GAED,CACLA,MAAM,EACN3B,MAAOR,EAAElB,OAGbG,EAAG,SAAW6C,GACZ,MAAMA,GAERqH,EAAGD,GAIP,MAAM,IAAI5G,UAAU,yIAGtB,IAEIF,EAFAgH,GAAmB,EACnBC,GAAS,EAEb,MAAO,CACLhI,EAAG,WACD4H,EAAKjJ,EAAEM,OAAOoB,aAEhBV,EAAG,WACD,IAAIsI,EAAOL,EAAG/G,OAEd,OADAkH,EAAmBE,EAAKnH,KACjBmH,GAETrK,EAAG,SAAWsK,GACZF,GAAS,EACTjH,EAAMmH,GAERJ,EAAG,WACD,IACOC,GAAoC,MAAhBH,EAAW,QAAWA,EAAW,SAC1D,QACA,GAAII,EAAQ,MAAMjH,O,6BCpD1B,6CACe,SAASoH,EAA4BxJ,EAAGyJ,GACrD,GAAKzJ,EAAL,CACA,GAAiB,kBAANA,EAAgB,OAAO,YAAiBA,EAAGyJ,GACtD,IAAIzI,EAAIf,OAAOkB,UAAUuI,SAAS1K,KAAKgB,GAAG2J,MAAM,GAAI,GAEpD,MADU,WAAN3I,GAAkBhB,EAAE4J,cAAa5I,EAAIhB,EAAE4J,YAAY9J,MAC7C,QAANkB,GAAqB,QAANA,EAAoBQ,MAAMsC,KAAK9D,GACxC,cAANgB,GAAqB,2CAA2C6I,KAAK7I,GAAW,YAAiBhB,EAAGyJ,QAAxG,K,6BCPa,SAASK,EAAkBvI,EAAKwI,IAClC,MAAPA,GAAeA,EAAMxI,EAAIjD,UAAQyL,EAAMxI,EAAIjD,QAE/C,IAAK,IAAIQ,EAAI,EAAGkL,EAAO,IAAIxI,MAAMuI,GAAMjL,EAAIiL,EAAKjL,IAC9CkL,EAAKlL,GAAKyC,EAAIzC,GAGhB,OAAOkL,EAPT,mC,6BCUerB,IAVO,CACpBsB,SAAU,CAAEnK,KAAM,YAClBoK,MAAO,CAAEpK,KAAM,SACfqK,IAAK,CAAErK,KAAM,OACbsK,QAAS,CAAEtK,KAAM,WACjBuK,MAAO,CAAEvK,KAAM,SACfwK,KAAM,CAAExK,KAAM,QACdyK,KAAM,CAAEzK,KAAM,U,gBCPhBjB,EAAOD,QAAU,EAAQ,I,gBCOzB,IAAI4L,EAAW,SAAU5L,GACvB,aAEA,IAEImD,EAFA0I,EAAKxK,OAAOkB,UACZuJ,EAASD,EAAGrJ,eAEZuJ,EAA4B,oBAAXrK,OAAwBA,OAAS,GAClDsK,EAAiBD,EAAQjJ,UAAY,aACrCmJ,EAAsBF,EAAQG,eAAiB,kBAC/CC,EAAoBJ,EAAQpK,aAAe,gBAE/C,SAASyK,EAAOxI,EAAK1B,EAAKN,GAOxB,OANAP,OAAOC,eAAesC,EAAK1B,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZsC,cAAc,EACdC,UAAU,IAELF,EAAI1B,GAEb,IAEEkK,EAAO,GAAI,IACX,MAAO5I,GACP4I,EAAS,SAASxI,EAAK1B,EAAKN,GAC1B,OAAOgC,EAAI1B,GAAON,GAItB,SAASyK,EAAKC,EAASC,EAASlN,EAAMmN,GAEpC,IAAIC,EAAiBF,GAAWA,EAAQhK,qBAAqBmK,EAAYH,EAAUG,EAC/EC,EAAYtL,OAAOY,OAAOwK,EAAelK,WACzCqK,EAAU,IAAIC,EAAQL,GAAe,IAMzC,OAFAG,EAAUG,QAsMZ,SAA0BR,EAASjN,EAAMuN,GACvC,IAAIG,EAAQC,EAEZ,OAAO,SAAgBC,EAAQC,GAC7B,GAAIH,IAAUI,EACZ,MAAM,IAAIC,MAAM,gCAGlB,GAAIL,IAAUM,EAAmB,CAC/B,GAAe,UAAXJ,EACF,MAAMC,EAKR,OAAOI,IAMT,IAHAV,EAAQK,OAASA,EACjBL,EAAQM,IAAMA,IAED,CACX,IAAIK,EAAWX,EAAQW,SACvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUX,GACnD,GAAIY,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,GAIX,GAAuB,SAAnBZ,EAAQK,OAGVL,EAAQe,KAAOf,EAAQgB,MAAQhB,EAAQM,SAElC,GAAuB,UAAnBN,EAAQK,OAAoB,CACrC,GAAIF,IAAUC,EAEZ,MADAD,EAAQM,EACFT,EAAQM,IAGhBN,EAAQiB,kBAAkBjB,EAAQM,SAEN,WAAnBN,EAAQK,QACjBL,EAAQkB,OAAO,SAAUlB,EAAQM,KAGnCH,EAAQI,EAER,IAAIY,EAASC,EAAS1B,EAASjN,EAAMuN,GACrC,GAAoB,WAAhBmB,EAAOE,KAAmB,CAO5B,GAJAlB,EAAQH,EAAQrJ,KACZ8J,EACAa,EAEAH,EAAOb,MAAQQ,EACjB,SAGF,MAAO,CACL9L,MAAOmM,EAAOb,IACd3J,KAAMqJ,EAAQrJ,MAGS,UAAhBwK,EAAOE,OAChBlB,EAAQM,EAGRT,EAAQK,OAAS,QACjBL,EAAQM,IAAMa,EAAOb,OA9QPiB,CAAiB7B,EAASjN,EAAMuN,GAE7CD,EAcT,SAASqB,EAASI,EAAIxK,EAAKsJ,GACzB,IACE,MAAO,CAAEe,KAAM,SAAUf,IAAKkB,EAAGhO,KAAKwD,EAAKsJ,IAC3C,MAAO1J,GACP,MAAO,CAAEyK,KAAM,QAASf,IAAK1J,IAhBjCxD,EAAQqM,KAAOA,EAoBf,IAAIW,EAAyB,iBACzBkB,EAAyB,iBACzBf,EAAoB,YACpBE,EAAoB,YAIpBK,EAAmB,GAMvB,SAAShB,KACT,SAAS2B,KACT,SAASC,KAIT,IAAIC,EAAoB,GACxBA,EAAkBvC,GAAkB,WAClC,OAAOwC,MAGT,IAAIC,EAAWpN,OAAOqN,eAClBC,EAA0BF,GAAYA,EAASA,EAAS/G,EAAO,MAC/DiH,GACAA,IAA4B9C,GAC5BC,EAAO1L,KAAKuO,EAAyB3C,KAGvCuC,EAAoBI,GAGtB,IAAIC,EAAKN,EAA2B/L,UAClCmK,EAAUnK,UAAYlB,OAAOY,OAAOsM,GAWtC,SAASM,EAAsBtM,GAC7B,CAAC,OAAQ,QAAS,UAAUqC,SAAQ,SAASqI,GAC3Cb,EAAO7J,EAAW0K,GAAQ,SAASC,GACjC,OAAOsB,KAAK1B,QAAQG,EAAQC,SAkClC,SAAS4B,EAAcnC,EAAWoC,GAChC,SAASC,EAAO/B,EAAQC,EAAKxM,EAASuO,GACpC,IAAIlB,EAASC,EAASrB,EAAUM,GAASN,EAAWO,GACpD,GAAoB,UAAhBa,EAAOE,KAEJ,CACL,IAAI1F,EAASwF,EAAOb,IAChBtL,EAAQ2G,EAAO3G,MACnB,OAAIA,GACiB,kBAAVA,GACPkK,EAAO1L,KAAKwB,EAAO,WACdmN,EAAYrO,QAAQkB,EAAMsN,SAASvO,MAAK,SAASiB,GACtDoN,EAAO,OAAQpN,EAAOlB,EAASuO,MAC9B,SAASzL,GACVwL,EAAO,QAASxL,EAAK9C,EAASuO,MAI3BF,EAAYrO,QAAQkB,GAAOjB,MAAK,SAASwO,GAI9C5G,EAAO3G,MAAQuN,EACfzO,EAAQ6H,MACP,SAAS6G,GAGV,OAAOJ,EAAO,QAASI,EAAO1O,EAASuO,MAvBzCA,EAAOlB,EAAOb,KA4BlB,IAAImC,EAgCJb,KAAK1B,QA9BL,SAAiBG,EAAQC,GACvB,SAASoC,IACP,OAAO,IAAIP,GAAY,SAASrO,EAASuO,GACvCD,EAAO/B,EAAQC,EAAKxM,EAASuO,MAIjC,OAAOI,EAaLA,EAAkBA,EAAgB1O,KAChC2O,EAGAA,GACEA,KAkHV,SAAS7B,EAAoBF,EAAUX,GACrC,IAAIK,EAASM,EAASzK,SAAS8J,EAAQK,QACvC,GAAIA,IAAW9J,EAAW,CAKxB,GAFAyJ,EAAQW,SAAW,KAEI,UAAnBX,EAAQK,OAAoB,CAE9B,GAAIM,EAASzK,SAAT,SAGF8J,EAAQK,OAAS,SACjBL,EAAQM,IAAM/J,EACdsK,EAAoBF,EAAUX,GAEP,UAAnBA,EAAQK,QAGV,OAAOS,EAIXd,EAAQK,OAAS,QACjBL,EAAQM,IAAM,IAAIxJ,UAChB,kDAGJ,OAAOgK,EAGT,IAAIK,EAASC,EAASf,EAAQM,EAASzK,SAAU8J,EAAQM,KAEzD,GAAoB,UAAhBa,EAAOE,KAIT,OAHArB,EAAQK,OAAS,QACjBL,EAAQM,IAAMa,EAAOb,IACrBN,EAAQW,SAAW,KACZG,EAGT,IAAI6B,EAAOxB,EAAOb,IAElB,OAAMqC,EAOFA,EAAKhM,MAGPqJ,EAAQW,EAASiC,YAAcD,EAAK3N,MAGpCgL,EAAQtJ,KAAOiK,EAASkC,QAQD,WAAnB7C,EAAQK,SACVL,EAAQK,OAAS,OACjBL,EAAQM,IAAM/J,GAUlByJ,EAAQW,SAAW,KACZG,GANE6B,GA3BP3C,EAAQK,OAAS,QACjBL,EAAQM,IAAM,IAAIxJ,UAAU,oCAC5BkJ,EAAQW,SAAW,KACZG,GAoDX,SAASgC,EAAaC,GACpB,IAAIC,EAAQ,CAAEC,OAAQF,EAAK,IAEvB,KAAKA,IACPC,EAAME,SAAWH,EAAK,IAGpB,KAAKA,IACPC,EAAMG,WAAaJ,EAAK,GACxBC,EAAMI,SAAWL,EAAK,IAGxBnB,KAAKyB,WAAWzP,KAAKoP,GAGvB,SAASM,EAAcN,GACrB,IAAI7B,EAAS6B,EAAMO,YAAc,GACjCpC,EAAOE,KAAO,gBACPF,EAAOb,IACd0C,EAAMO,WAAapC,EAGrB,SAASlB,EAAQL,GAIfgC,KAAKyB,WAAa,CAAC,CAAEJ,OAAQ,SAC7BrD,EAAY5H,QAAQ8K,EAAclB,MAClCA,KAAK4B,OAAM,GA8Bb,SAAS1I,EAAO2I,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAASrE,GAC9B,GAAIsE,EACF,OAAOA,EAAelQ,KAAKiQ,GAG7B,GAA6B,oBAAlBA,EAAS/M,KAClB,OAAO+M,EAGT,IAAKE,MAAMF,EAAS3Q,QAAS,CAC3B,IAAIQ,GAAK,EAAGoD,EAAO,SAASA,IAC1B,OAASpD,EAAImQ,EAAS3Q,QACpB,GAAIoM,EAAO1L,KAAKiQ,EAAUnQ,GAGxB,OAFAoD,EAAK1B,MAAQyO,EAASnQ,GACtBoD,EAAKC,MAAO,EACLD,EAOX,OAHAA,EAAK1B,MAAQuB,EACbG,EAAKC,MAAO,EAELD,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CAAEA,KAAMgK,GAIjB,SAASA,IACP,MAAO,CAAE1L,MAAOuB,EAAWI,MAAM,GA+MnC,OA5mBA8K,EAAkB9L,UAAYqM,EAAG5D,YAAcsD,EAC/CA,EAA2BtD,YAAcqD,EACzCA,EAAkBmC,YAAcpE,EAC9BkC,EACAnC,EACA,qBAaFnM,EAAQyQ,oBAAsB,SAASC,GACrC,IAAIC,EAAyB,oBAAXD,GAAyBA,EAAO1F,YAClD,QAAO2F,IACHA,IAAStC,GAG2B,uBAAnCsC,EAAKH,aAAeG,EAAKzP,QAIhClB,EAAQ4Q,KAAO,SAASF,GAQtB,OAPIrP,OAAOwP,eACTxP,OAAOwP,eAAeH,EAAQpC,IAE9BoC,EAAOI,UAAYxC,EACnBlC,EAAOsE,EAAQvE,EAAmB,sBAEpCuE,EAAOnO,UAAYlB,OAAOY,OAAO2M,GAC1B8B,GAOT1Q,EAAQ+Q,MAAQ,SAAS7D,GACvB,MAAO,CAAEgC,QAAShC,IAsEpB2B,EAAsBC,EAAcvM,WACpCuM,EAAcvM,UAAU0J,GAAuB,WAC7C,OAAOuC,MAETxO,EAAQ8O,cAAgBA,EAKxB9O,EAAQgR,MAAQ,SAAS1E,EAASC,EAASlN,EAAMmN,EAAauC,QACxC,IAAhBA,IAAwBA,EAActO,SAE1C,IAAIwE,EAAO,IAAI6J,EACbzC,EAAKC,EAASC,EAASlN,EAAMmN,GAC7BuC,GAGF,OAAO/O,EAAQyQ,oBAAoBlE,GAC/BtH,EACAA,EAAK3B,OAAO3C,MAAK,SAAS4H,GACxB,OAAOA,EAAOhF,KAAOgF,EAAO3G,MAAQqD,EAAK3B,WAuKjDuL,EAAsBD,GAEtBxC,EAAOwC,EAAIzC,EAAmB,aAO9ByC,EAAG5C,GAAkB,WACnB,OAAOwC,MAGTI,EAAG9D,SAAW,WACZ,MAAO,sBAkCT9K,EAAQiE,KAAO,SAAS5B,GACtB,IAAI4B,EAAO,GACX,IAAK,IAAI/B,KAAOG,EACd4B,EAAKzD,KAAK0B,GAMZ,OAJA+B,EAAKgN,UAIE,SAAS3N,IACd,KAAOW,EAAKvE,QAAQ,CAClB,IAAIwC,EAAM+B,EAAKrE,MACf,GAAIsC,KAAOG,EAGT,OAFAiB,EAAK1B,MAAQM,EACboB,EAAKC,MAAO,EACLD,EAQX,OADAA,EAAKC,MAAO,EACLD,IAsCXtD,EAAQ0H,OAASA,EAMjBmF,EAAQtK,UAAY,CAClByI,YAAa6B,EAEbuD,MAAO,SAASc,GAcd,GAbA1C,KAAK2C,KAAO,EACZ3C,KAAKlL,KAAO,EAGZkL,KAAKb,KAAOa,KAAKZ,MAAQzK,EACzBqL,KAAKjL,MAAO,EACZiL,KAAKjB,SAAW,KAEhBiB,KAAKvB,OAAS,OACduB,KAAKtB,IAAM/J,EAEXqL,KAAKyB,WAAWrL,QAAQsL,IAEnBgB,EACH,IAAK,IAAIhQ,KAAQsN,KAEQ,MAAnBtN,EAAKkQ,OAAO,IACZtF,EAAO1L,KAAKoO,KAAMtN,KACjBqP,OAAOrP,EAAK6J,MAAM,MACrByD,KAAKtN,GAAQiC,IAMrBkO,KAAM,WACJ7C,KAAKjL,MAAO,EAEZ,IACI+N,EADY9C,KAAKyB,WAAW,GACLE,WAC3B,GAAwB,UAApBmB,EAAWrD,KACb,MAAMqD,EAAWpE,IAGnB,OAAOsB,KAAK+C,MAGd1D,kBAAmB,SAAS2D,GAC1B,GAAIhD,KAAKjL,KACP,MAAMiO,EAGR,IAAI5E,EAAU4B,KACd,SAASiD,EAAOC,EAAKC,GAYnB,OAXA5D,EAAOE,KAAO,QACdF,EAAOb,IAAMsE,EACb5E,EAAQtJ,KAAOoO,EAEXC,IAGF/E,EAAQK,OAAS,OACjBL,EAAQM,IAAM/J,KAGNwO,EAGZ,IAAK,IAAIzR,EAAIsO,KAAKyB,WAAWvQ,OAAS,EAAGQ,GAAK,IAAKA,EAAG,CACpD,IAAI0P,EAAQpB,KAAKyB,WAAW/P,GACxB6N,EAAS6B,EAAMO,WAEnB,GAAqB,SAAjBP,EAAMC,OAIR,OAAO4B,EAAO,OAGhB,GAAI7B,EAAMC,QAAUrB,KAAK2C,KAAM,CAC7B,IAAIS,EAAW9F,EAAO1L,KAAKwP,EAAO,YAC9BiC,EAAa/F,EAAO1L,KAAKwP,EAAO,cAEpC,GAAIgC,GAAYC,EAAY,CAC1B,GAAIrD,KAAK2C,KAAOvB,EAAME,SACpB,OAAO2B,EAAO7B,EAAME,UAAU,GACzB,GAAItB,KAAK2C,KAAOvB,EAAMG,WAC3B,OAAO0B,EAAO7B,EAAMG,iBAGjB,GAAI6B,GACT,GAAIpD,KAAK2C,KAAOvB,EAAME,SACpB,OAAO2B,EAAO7B,EAAME,UAAU,OAG3B,KAAI+B,EAMT,MAAM,IAAIzE,MAAM,0CALhB,GAAIoB,KAAK2C,KAAOvB,EAAMG,WACpB,OAAO0B,EAAO7B,EAAMG,gBAU9BjC,OAAQ,SAASG,EAAMf,GACrB,IAAK,IAAIhN,EAAIsO,KAAKyB,WAAWvQ,OAAS,EAAGQ,GAAK,IAAKA,EAAG,CACpD,IAAI0P,EAAQpB,KAAKyB,WAAW/P,GAC5B,GAAI0P,EAAMC,QAAUrB,KAAK2C,MACrBrF,EAAO1L,KAAKwP,EAAO,eACnBpB,KAAK2C,KAAOvB,EAAMG,WAAY,CAChC,IAAI+B,EAAelC,EACnB,OAIAkC,IACU,UAAT7D,GACS,aAATA,IACD6D,EAAajC,QAAU3C,GACvBA,GAAO4E,EAAa/B,aAGtB+B,EAAe,MAGjB,IAAI/D,EAAS+D,EAAeA,EAAa3B,WAAa,GAItD,OAHApC,EAAOE,KAAOA,EACdF,EAAOb,IAAMA,EAET4E,GACFtD,KAAKvB,OAAS,OACduB,KAAKlL,KAAOwO,EAAa/B,WAClBrC,GAGFc,KAAKuD,SAAShE,IAGvBgE,SAAU,SAAShE,EAAQiC,GACzB,GAAoB,UAAhBjC,EAAOE,KACT,MAAMF,EAAOb,IAcf,MAXoB,UAAhBa,EAAOE,MACS,aAAhBF,EAAOE,KACTO,KAAKlL,KAAOyK,EAAOb,IACM,WAAhBa,EAAOE,MAChBO,KAAK+C,KAAO/C,KAAKtB,IAAMa,EAAOb,IAC9BsB,KAAKvB,OAAS,SACduB,KAAKlL,KAAO,OACa,WAAhByK,EAAOE,MAAqB+B,IACrCxB,KAAKlL,KAAO0M,GAGPtC,GAGTsE,OAAQ,SAASjC,GACf,IAAK,IAAI7P,EAAIsO,KAAKyB,WAAWvQ,OAAS,EAAGQ,GAAK,IAAKA,EAAG,CACpD,IAAI0P,EAAQpB,KAAKyB,WAAW/P,GAC5B,GAAI0P,EAAMG,aAAeA,EAGvB,OAFAvB,KAAKuD,SAASnC,EAAMO,WAAYP,EAAMI,UACtCE,EAAcN,GACPlC,IAKb,MAAS,SAASmC,GAChB,IAAK,IAAI3P,EAAIsO,KAAKyB,WAAWvQ,OAAS,EAAGQ,GAAK,IAAKA,EAAG,CACpD,IAAI0P,EAAQpB,KAAKyB,WAAW/P,GAC5B,GAAI0P,EAAMC,SAAWA,EAAQ,CAC3B,IAAI9B,EAAS6B,EAAMO,WACnB,GAAoB,UAAhBpC,EAAOE,KAAkB,CAC3B,IAAIgE,EAASlE,EAAOb,IACpBgD,EAAcN,GAEhB,OAAOqC,GAMX,MAAM,IAAI7E,MAAM,0BAGlB8E,cAAe,SAAS7B,EAAUb,EAAYC,GAa5C,OAZAjB,KAAKjB,SAAW,CACdzK,SAAU4E,EAAO2I,GACjBb,WAAYA,EACZC,QAASA,GAGS,SAAhBjB,KAAKvB,SAGPuB,KAAKtB,IAAM/J,GAGNuK,IAQJ1N,EA7sBM,CAotBgBC,EAAOD,SAGtC,IACEmS,mBAAqBvG,EACrB,MAAOwG,GAUPC,SAAS,IAAK,yBAAdA,CAAwCzG,K,cCzuB1C0G,aAAe,aACfC,aAAe,kBAAM,e,oFCFrB,SAASC,EAAmBC,EAAK/R,EAASuO,EAAQyD,EAAOC,EAAQzQ,EAAKgL,GACpE,IACE,IAAIqC,EAAOkD,EAAIvQ,GAAKgL,GAChBtL,EAAQ2N,EAAK3N,MACjB,MAAOwN,GAEP,YADAH,EAAOG,GAILG,EAAKhM,KACP7C,EAAQkB,GAERnB,QAAQC,QAAQkB,GAAOjB,KAAK+R,EAAOC,G,MCEhC,IAeMC,EAAQ,SAACvJ,EAAKwJ,EAAKC,GAC9B,OAAIzJ,EAAMwJ,EAAYA,EAClBxJ,EAAMyJ,EAAaA,EAChBzJ,GAgDF,SAAS0J,EAAanP,EAAKK,GAChC,OAAOA,EAAK0E,QAAO,SAACqK,EAAG/M,GAAJ,cAAU+M,QAAV,IAAUA,OAAV,EAAUA,EAAI/M,KAAIrC,GAiBhC,SAASqP,EAAYrP,EAAKK,EAAMiP,EAAUC,GAC3CD,EAAStP,GAAMuP,EAAGvP,EAAKK,GACtBL,GAAsB,kBAARA,GAAoBvC,OAAO0E,QAAQnC,GAAKgB,SAAQ,mCAAE1C,EAAF,YAAgB+Q,EAAhB,KAA2B,sBAAUhP,GAAV,CAAgB/B,IAAMgR,EAAUC,MAGzH,I,OCrGMC,EAAW,CAAEC,IAAK,MAAOC,OAAQ,WAAYC,QAAS,gBACtDC,EAAW,CAAEC,OAAQ,cAAeC,QAAS,eAAgBC,SAAU,gBAAiBC,UAAW,iBAAkBC,MAAO,aAAcC,MAAO,cACjJC,EAAchK,IAgBdiK,EAAyC,CAAE,EACtD,KAAO,KAAO,KAAO,KAAO,KAAO,KAAO,KAAO,KAAO,KAAO,KAC/D,KAAO,KAAO,KAAO,KAAO,KAAO,KAAO,KAAO,KAAO,KAAO,KAC/D,KAAO,KAAO,KAAM,MAAO,MAAO,MAAO,MAAO,IAAO,MAAO,MAC/D,MAAO,IAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAC/D,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,IAAO,MAAO,MAC/D,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAC/D,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAC/D,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAC/D,MAAO,IAAM,OAAO,OAAO,OAAO,KAAO,KAAO,OAAO,OAAO,OAC/D,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,KAAO,KAAO,OAAO,QAElDC,EAA6B,CAAE,EAC1C,GAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC7C,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC7C,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC7C,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC7C,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC7C,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC7C,IAAK,IAAK,IAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAC7C,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAC7C,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAC7C,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MCvCvCC,EAAW,CACfC,KAAM,CAAEjT,KAAM,GAAIkT,QAAS,GAG3BC,YAAa,CAAEnT,KAAM,KAAMoT,OAAQ,oBAAqBC,OAAO,GAC/DC,aAAc,CAAEtT,KAAM,MAAOoT,OAAQ,qBAAsBC,OAAO,GAClEE,aAAc,CAAEvT,KAAM,MAAOoT,OAAQ,qBAAsBC,OAAO,GAClE1K,aAAc,CAAE3I,KAAM,wBAAyBkT,QAAS,QAASG,OAAO,GACxEG,eAAgB,CAAExT,KAAM,kBAAmBkT,QAAS,EAAGG,OAAO,GAG9DI,UAAW,CAAEzT,KAAM,aAAcoT,OAAQ,aAAcC,OAAO,GAG9DK,QAAS,CAAE1T,KAAM,MAAOoT,OAAQ,WAAYC,OAAO,GAGnDM,GAAI,CAAE3T,KAAM,KAAMoT,OAAQ,WAC1BQ,IAAK,CAAE5T,KAAM,KAAM6T,KAAM,IAAKT,OAAQ,YACtCU,IAAK,CAAE9T,KAAM,MAAOoT,OAAQ,YAC5BW,KAAM,CAAE/T,KAAM,MAAO6T,KAAM,IAAKT,OAAQ,aACxCY,IAAK,CAAEhU,KAAM,MAAOoT,OAAQ,YAC5Ba,KAAM,CAAEjU,KAAM,MAAO6T,KAAM,IAAKT,OAAQ,aACxCc,KAAM,CAAElU,KAAM,gBAAiB6T,KAAM,KAGrCM,QAAS,CAAEnU,KAAM,KAAMoT,OAAQ,MAC/BgB,SAAU,CAAEpU,KAAM,MAAOoT,OAAQ,OACjCiB,SAAU,CAAErU,KAAM,MAAOoT,OAAQ,OAEjCkB,mBAAoB,CAAEtU,KAAK,kBAAoB6T,KAAM,SAErDU,OAAQ,CAAEvU,KAAM,qBAChBwU,UAAW,CAAExU,KAAM,kBAAmB6T,KAAM,IAAKX,QAAS,KAC1DuB,UAAW,CAAEzU,KAAM,YAAa6T,KAAM,IAAKX,QAAS,GAEpDwB,SAAU,CAAE1U,KAAM,WAAY6T,KAAM,IAAKX,QAAS,IAClDyB,aAAc,CAAE3U,KAAM,eAAgB6T,KAAM,KAG5Ce,MAAO,CAAE5U,KAAM,gBAAiB6T,KAAM,KACtCgB,SAAU,CAAE7U,KAAM,yBAA0B6T,KAAM,KAClDiB,WAAY,CAAE9U,KAAM,kBAAmB6T,KAAM,KAC7CkB,OAAQ,CAAE/U,KAAM,UAAW6T,KAAM,KACjCmB,YAAa,CAAEhV,KAAM,qBAAsB6T,KAAM,KACjDoB,YAAa,CAAEjV,KAAM,qBAAsB6T,KAAM,KACjDqB,SAAU,CAAElV,KAAM,eAAgB6T,KAAM,KACxCsB,QAAS,CAAEnV,KAAM,UAAW6T,KAAM,KAClCuB,QAAS,CAAEpV,KAAM,WACjBqV,YAAa,CAAErV,KAAM,2BAA4B6T,KAAM,KACvDyB,mBAAoB,CAAEtV,KAAM,mCAAoC6T,KAAM,KACtE0B,mBAAoB,CAAEvV,KAAM,0CAA2C6T,KAAM,KAE7E2B,WAAY,CAAExV,KAAM,kBAAmB6T,KAAM,SAG7C4B,2BAA4B,CAAEzV,KAAM,4BAA6B6T,KAAM,QAASR,OAAO,GACvFqC,mBAAoB,CAAE1V,KAAM,mCAAoC6T,KAAM,KACtE8B,oBAAqB,CAAE3V,KAAM,oCAAqC6T,KAAM,KACxE+B,mBAAoB,CAAE5V,KAAM,uCAAwC6T,KAAM,IAAKgC,QAAS,cACxFC,iBAAkB,CAAE9V,KAAM,wBAAyB6T,KAAM,QAASR,OAAO,EAAMwC,QAAS,cACxFE,gBAAiB,CAAE/V,KAAM,mBAAoB6T,KAAM,IAAKgC,QAAS,cACjEG,eAAgB,CAAEhW,KAAM,uBAAwB6V,QAAS,cACzDI,aAAc,CAAEjW,KAAM,oBAAqB6V,QAAS,WAGpDK,WAAY,CAAElW,KAAM,cAAeqT,OAAO,GAC1C8C,iBAAkB,CAAEnW,KAAM,6BAA8B6T,KAAM,QAASR,OAAO,GAC9E+C,aAAc,CAAEpW,KAAM,sBAAuB6T,KAAM,IAAKR,OAAO,GAG/D5K,aAAc,CAAEzI,KAAM,qBAAsBqT,OAAO,EAAMH,QAAS,KAE9DmD,EAAW,CAEf3C,QAAS,SAACnS,EAAGzB,GAAJ,OAAUA,EAAEyT,aAAezT,EAAE2T,WACtCW,SAAU,SAAC7S,EAAGzB,GAAJ,OAAUA,EAAE4T,SAAW,EAAInS,EAAEwS,KAAO,KAAOxS,EAAEuS,KACvDK,QAAS,SAAC5S,EAAGzB,GAAJ,OAAUA,EAAEqT,aAAe,EAAI5R,EAAEqS,IAAM,KAAOrS,EAAEoS,IACzDU,SAAU,SAAC9S,EAAGzB,GAAJ,OAAUA,EAAEwT,cAAgB,EAAI/R,EAAE0S,KAAO,KAAO1S,EAAEyS,KAE5DM,mBAAoB,SAAC/S,GAAD,OAAQ,EAAIA,EAAEmT,SAAW,KAE7CyB,iBAAkB,SAAC5U,EAAGzB,GAAJ,OAAW,IAAMA,EAAE0T,iBAAoB,IAAM1T,EAAE0T,gBAAmB,IAAM1T,EAAEoW,aAAe,EAAIpW,EAAEsW,aAAe,OAEhIZ,WAAY,SAACjU,GAAD,OAAQ,EAAIA,EAAEqT,MAAQ,IAAMrT,EAAEsT,SAAW,KAGrDY,2BAA4B,SAAClU,EAAGzB,GAAJ,OAAUgT,EAAuChT,EAAE0T,iBAC/EkC,mBAAoB,SAACnU,GAAD,OAAO,KAAO,EAAIA,EAAEgT,QAAU,KAAOhT,EAAEgT,SAC3DoB,oBAAqB,SAACpU,GAAD,OAAO,IAAO,EAAIA,EAAEgT,QAAU,KAAOhT,EAAEgT,SAE5DqB,mBAAoB,SAACrU,GAAD,OAAO,IAAO,EAAIA,EAAEgT,QAAU,KAAOhT,EAAEgT,SAC3DuB,iBAAkB,SAACvU,EAAGzB,GAAJ,OAAUiT,EAA2BjT,EAAE0T,iBACzDwC,eAAgB,SAACzU,EAAGzB,GAAJ,OAAW,IAAMyB,EAAEwU,gBAAkBxU,EAAEqU,oBAAsB,IAAM9V,EAAEgW,mBAqGvF,SAASQ,EAAmBC,EAAgB7Q,GAAuB,IAAhB8Q,EAAe,0DACrC9Q,EAAnB+Q,iBADwD,MAC5C,GAD4C,EAC9B9O,EAAe,GAAI+O,EAAY,GAC3DC,EAAcJ,EAAe/Q,KAAI,SAAAxE,GAAQ,IAAD,cAYxCuE,EAXEqR,EAAQ,UAAGH,EAAUzV,UAAb,QAAqB,GAC7B6V,EAAgB1W,OAAO0E,QAAQ+R,GAAU1T,QAAO,kBAAE6B,EAAF,qCAASiO,EAASjO,UAAlB,aAAS,EAAasO,SACtEyD,EAAkB3W,OAAO0E,QAAQ+R,GAAU1T,QAAO,kBAAE6B,EAAF,4BAAS,UAAEiO,EAASjO,UAAX,aAAE,EAAasO,UAC1E0D,EAAY,SAACxV,EAAGzB,GAAJ,OAAU+W,EAAcpP,QAAO,SAACL,EAAD,0BAAQrC,EAAR,KAAWlF,EAAX,YAAkBuH,EAAOtH,EAAEiF,GAAKlF,IAAG,IAC9EmX,EAAc,SAACzV,GAAD,OAAOuV,EAAgBrP,QAAO,SAACL,EAAD,0BAAQrC,EAAR,KAAWlF,EAAX,YAAkBuH,EAAO7F,EAAEwD,GAAKlF,IAAG,IAEjFoX,EAAgB,EAMpB,OALIJ,EAAcrY,SAAQyY,GAAiB,GACvCH,EAAgBtY,SAAQyY,GAAiB,GACxCZ,EAASrV,KAAMiW,IAAiB,UAAAjE,EAAShS,UAAT,eAAeqS,OAAQ,EAAI,GAGxD4D,GACN,KAAK,EAAG1R,EAAM8Q,EAASrV,GAAM,MAC7B,KAAK,EAAGuE,EAAM,SAAChE,EAAGzB,GAAJ,OAAUuW,EAASrV,GAAKO,EAAGzB,GAAKiX,EAAUxV,EAAGzB,IAAI,MAC/D,KAAK,EAAGyF,EAAM,SAAChE,EAAGzB,GAAJ,OAAUuW,EAASrV,GAAKO,EAAGzB,GAAKkX,EAAYzV,IAAO,MACjE,KAAK,EAAGgE,EAAM,SAAChE,EAAGzB,GAAJ,OAAUuW,EAASrV,GAAKO,EAAGzB,GAAKiX,EAAUxV,EAAGzB,GAAKkX,EAAYzV,IAAO,MACnF,KAAK,EAAGgE,EAAM,SAAChE,EAAGzB,GAAJ,OAAUA,EAAEkB,IAAM,MAChC,KAAK,EAAGuE,EAAM,SAAChE,EAAGzB,GAAJ,OAAUA,EAAEkB,GAAO+V,EAAUxV,EAAGzB,IAAI,MAClD,KAAK,EAAGyF,EAAM,SAAChE,EAAGzB,GAAJ,OAAUA,EAAEkB,GAAOgW,EAAYzV,IAAO,MACpD,KAAK,EAAGgE,EAAM,SAAChE,EAAGzB,GAAJ,OAAUA,EAAEkB,GAAO+V,EAAUxV,EAAGzB,GAAKkX,EAAYzV,IAAO,MACtE,KAAK,EAAGgE,EAAM,SAAChE,EAAGzB,GAAJ,OAAUyB,EAAEP,IAAM,MAChC,KAAK,EAAGuE,EAAM,SAAChE,EAAGzB,GAAJ,OAAUyB,EAAEP,GAAO+V,EAAUxV,EAAGzB,IAAI,MAClD,KAAK,GAAIyF,EAAM,SAAChE,EAAGzB,GAAJ,OAAUyB,EAAEP,GAAOgW,EAAYzV,IAAO,MACrD,QAASgE,EAAM,SAAChE,EAAGzB,GAAJ,OAAUyB,EAAEP,GAAO+V,EAAUxV,EAAGzB,GAAKkX,EAAYzV,IAElE,IAAM2V,EAAO3R,EAOb,OALIiR,GAAOW,QAAQC,KAAI,UAAApE,EAAShS,UAAT,eAAeqS,OAAQ,QAAU,UAAWrS,EAAK6V,EAAeC,EAAiB,GAAKT,EAASrV,IAEhHA,KAAOqV,IACX3Q,EAAM1E,GAAN,oBAAa0E,EAAM1E,UAAnB,kBAA2BgS,EAAShS,UAApC,aAA2B,EAAekS,eAA1C,QAAqD,IAEvD,UAAIF,EAAShS,UAAb,aAAI,EAAeqS,QACjBqD,EAAU1V,GAAO0E,EAAM1E,GACvB0V,EAAU1V,GAAOkW,EAAKxR,EAAOgR,GAC7BhR,EAAM1E,GAAO0V,EAAU1V,GACnB8V,EAAgBtY,QAClB2Y,QAAQjJ,MAAR,uBAA8BlN,EAA9B,yCAAkE8V,EAAlE,oCACK,OAGH9V,KAAOqV,IACX1O,EAAa3G,GAAO0E,EAAM1E,IAErB,CAACA,EAAKkW,OACZhU,QAAO,SAACgU,GAAD,OAAUA,KAIpB,OAFIV,GAAOW,QAAQC,IAAIzP,EAAc+O,GAE9B,CACL/O,eACA0P,QAAS,SAAA9V,GACPoV,EAAYjT,SAAQ,mCAAE1C,EAAF,KAAOqW,EAAP,YAAoB9V,EAAEP,GAAOqW,EAAQ9V,EAAGmV,MAE5DvW,OAAOmX,OAAO/V,EAAGmV,KA3IvBvW,OAAO0E,QAAQyN,GAAU5O,SAAQ,YAAuB,IAAD,mBAApB6T,EAAoB,KAAdC,EAAc,KACrDxE,EAAS,GAAD,OAAIuE,EAAJ,UAAmB,CAAEvX,KAAK,GAAD,OAAKwX,EAAL,cAA2B3D,KAAM,KAClEb,EAAS,GAAD,OAAIuE,EAAJ,eAAwB,CAAEvX,KAAK,GAAD,OAAKwX,EAAL,oBAAiC3D,KAAM,KAC7Eb,EAAS,SAAD,OAAUuE,EAAV,eAA8B,CAAEvX,KAAK,GAAD,OAAKwX,EAAL,cAA2B3D,KAAM,KAE7EwC,EAAS,SAAD,OAAUkB,EAAV,eAA8B,SAAChW,GAAD,OAAOmQ,EAAMnQ,EAAEkT,UAAYlT,EAAE,GAAD,OAAIgW,EAAJ,eAAuB,EAAG,SAG9FpX,OAAO0E,QAAQgO,GAAanP,SAAQ,YAA+B,IAAD,mBAA5B+T,EAA4B,KAAfC,EAAe,KAArB1X,KACrC2X,EAAM,CAAE9B,QAAS4B,GAEvBzE,EAAS,GAAD,OAAIyE,EAAJ,UAAR,aAA4BzX,KAAK,GAAD,OAAK0X,EAAL,cAA0B7D,KAAM,KAAQ8D,GACxE3E,EAAS,GAAD,OAAIyE,EAAJ,UAAR,aAA4BzX,KAAK,GAAD,OAAK0X,EAAL,YAAwB7D,KAAM,KAAQ8D,GAEtE3E,EAAS,GAAD,OAAIyE,EAAJ,eAAR,aAAiCzX,KAAK,SAAD,OAAW0X,EAAX,YAA8B7D,KAAM,IAAKX,QAAS,GAAIG,OAAO,GAASsE,GAC3G3E,EAAS,GAAD,OAAIyE,EAAJ,mBAAR,aAAqCzX,KAAK,SAAD,OAAW0X,EAAX,aAA+BxE,SAAS,EAAOG,OAAO,GAASsE,GAExG3E,EAAS,GAAD,OAAIyE,EAAJ,oBAAR,aAAsCzX,KAAK,SAAD,OAAW0X,EAAX,mBAAqC7D,KAAM,QAASR,OAAO,GAASsE,GAC9G3E,EAAS,GAAD,OAAIyE,EAAJ,iBAAR,aAAmCzX,KAAK,GAAD,OAAK0X,EAAL,gCAA4C7D,KAAM,SAAY8D,GAErGtB,EAAS,GAAD,OAAIoB,EAAJ,oBAA4B,SAAClW,EAAGzB,GAAJ,OAAUA,EAAE,GAAD,OAAI2X,EAAJ,mBAA2B,GA3BrDG,EA2BuE9X,EAAE,GAAD,OAAI2X,EAAJ,gBA1B7FG,GAAY,KACF,EAAU,EAAIA,EAAM,EACrBA,GAAO,IAAa,GAAW,EAANA,EAAU,GACrC,EAAIA,GAJb,IAAuBA,MA8BvBzX,OAAO0E,QAAQyN,GAAU5O,SAAQ,YAAuB,IAAD,mBAApB6T,EAAoB,KAAdC,EAAc,KACrDxE,EAAS,GAAD,OAAIuE,EAAJ,uBAAgC,CAAEvX,KAAK,GAAD,OAAKwX,EAAL,oBAAiC3D,KAAM,SACrFwC,EAAS,GAAD,OAAIkB,EAAJ,uBAAgC,SAAChW,GAAD,OAAQ,EAAIA,EAAEmT,SAAWnT,EAAE,SAAD,OAAUgW,EAAV,eAA8B,KAChGpX,OAAO0E,QAAQgO,GAAanP,SAAQ,YAA+B,IAAD,mBAA5B+T,EAA4B,KAC1DE,GAD0D,KAArB3X,KAC/B,CAAE6V,QAAS4B,IACvBzE,EAAS,GAAD,OAAIyE,EAAJ,YAAWF,EAAX,oBAAR,aAA8CvX,KAAK,GAAD,OAAKwX,EAAL,oBAAiC3D,KAAM,SAAY8D,GACrGtB,EAAS,GAAD,OAAIoB,EAAJ,YAAWF,EAAX,oBAAoC,SAAChW,EAAGzB,GAAJ,OAAW,IAAMyB,EAAE2S,KAAO3S,EAAE,GAAD,OAAIkW,EAAJ,UAAkBlW,EAAE,GAAD,OAAIgW,EAAJ,WAAoB,KAC9GpX,OAAO0E,QAAQqN,GAAUxO,SAAQ,YAAuB,IAAD,mBAApBqJ,EAAoB,KAAd8K,EAAc,KACrD7E,EAAS,GAAD,OAAIyE,EAAJ,YAAWF,EAAX,YAAmBxK,IAA3B,aAAuC/M,KAAK,GAAD,OAAKwX,EAAL,YAAiBK,IAAeF,GAC3EtB,EAAS,GAAD,OAAIoB,EAAJ,YAAWF,EAAX,YAAmBxK,IAAU,SAACxL,GAAD,OAAOA,EAAE6S,SAAW7S,EAAE,GAAD,OAAIkW,EAAJ,YAAWF,EAAX,YAAmBxK,EAAnB,YAC1DiG,EAAS,GAAD,OAAIyE,EAAJ,YAAWF,EAAX,YAAmBxK,EAAnB,WAAR,aAA6C/M,KAAK,GAAD,OAAKwX,EAAL,YAAiBK,EAAjB,eAAwChE,KAAM,SAAY8D,MAG7GtB,EAAS,GAAD,OAAIoB,EAAJ,YAAWF,EAAX,eAA+B,SAAChW,EAAGzB,GAAJ,OAAUyB,EAAE,GAAD,OAAIkW,EAAJ,YAAWF,EAAX,oBAAoCzX,EAAEqW,iBAAmBrW,EAAE,GAAD,OAAI2X,EAAJ,qBAC5GpB,EAAS,GAAD,OAAIoB,EAAJ,YAAWF,EAAX,mBAAmC,SAAChW,GAAD,OAAOA,EAAE,GAAD,OAAIkW,EAAJ,YAAWF,EAAX,eAA+BhW,EAAC,oBACnF8U,EAAS,GAAD,OAAIoB,EAAJ,YAAWF,EAAX,kBAAkC,SAAChW,GAAD,OAAOA,EAAE,GAAD,OAAIkW,EAAJ,YAAWF,EAAX,eAA+BhW,EAAE,GAAD,OAAIgW,EAAJ,8BAItFpX,OAAO0E,QDzJgC,CACrCiT,WAAY,CAAE9X,KAAM,aAAc+X,MAAO,EAAGC,SAAU,CAAE,SACxDC,UAAW,CAAEjY,KAAM,YAAa+X,MAAO,IAAKC,SAAU,CAAE,aACxDE,eAAgB,CAAElY,KAAM,kBAAmB+X,MAAO,IAAKC,SAAU,CAAE,YACnEG,aAAc,CAAEnY,KAAM,eAAgB+X,MAAO,GAAKC,SAAU,CAAE,SAC9DI,MAAO,CAAEpY,KAAM,QAAS+X,MAAO,GAAKC,SAAU,CAAE,OAAQ,QAAS,UAAW,WCoJtCtU,SAAQ,YAA4C,IAAD,mBAAzC2U,EAAyC,YAA7BrY,EAA6B,EAA7BA,KAAM+X,EAAuB,EAAvBA,MAAOC,EAAgB,EAAhBA,SACnEL,EAAM,CAAE9B,QAASwC,GAIvB,GAHArF,EAAS,GAAD,OAAIqF,EAAJ,UAAR,aAAiCrY,KAAK,GAAD,OAAKA,EAAL,cAAuB6T,KAAM,KAAQ8D,GAC1E3E,EAAS,GAAD,OAAIqF,EAAJ,WAAR,aAAkCrY,KAAK,GAAD,OAAKA,EAAL,eAAwB6T,KAAM,QAASR,OAAO,GAASsE,GAC7FtB,EAAS,GAAD,OAAIgC,EAAJ,WAAwB,SAAC9W,EAAGzB,GAAJ,OAAUiY,EAAQjY,EAAE2V,4BAC5B,IAApBuC,EAASxZ,OAAc,CAAC,IACnBiZ,EADkB,YACXO,EADW,MACDL,EAAM,CAAE9B,QAASwC,GACzCrF,EAAS,GAAD,OAAIqF,EAAJ,SAAR,aAAgCrY,KAAK,GAAD,OAAKA,EAAL,SAAoB2X,GACxDtB,EAAS,GAAD,OAAIgC,EAAJ,SAAsB,SAAC9W,EAAGzB,GAAJ,OAAW,IAAMyB,EAAEoU,oBAAsBpU,EAAE,GAAD,OAAI8W,EAAJ,WAAwB,IAAMvY,EAAE,GAAD,OAAIuY,EAAJ,WAAwBvY,EAAE,GAAD,OAAI2X,EAAJ,0BAEhIO,EAAStU,SAAQ,SAAA+T,GACf,IAAME,EAAM,CAAE9B,QAAS4B,GAEvBzE,EAAS,GAAD,OAAIyE,EAAJ,YAAWY,EAAX,SAAR,aAAuCrY,KAAK,GAAD,OAAK6S,EAAY4E,GAAKzX,KAAtB,YAA8BA,EAA9B,SAA6C2X,GACxFtB,EAAS,GAAD,OAAIoB,EAAJ,YAAWY,EAAX,SAA6B,SAAC9W,EAAGzB,GAAJ,OAAW,IAAMyB,EAAEoU,oBAAsBpU,EAAE,GAAD,OAAI8W,EAAJ,WAAwB,IAAMvY,EAAE,GAAD,OAAIuY,EAAJ,WAAwBvY,EAAE,GAAD,OAAI2X,EAAJ,2BAK7ItX,OAAO0E,QDrK4B,CACjCyT,SAAU,CAAEtY,KAAM,WAAYgY,SAAU,CAAExN,KAAM,IAAKD,MAAO,IAC5DgO,KAAM,CAAEvY,KAAM,OAAQgY,SAAU,CAAExN,KAAM,EAAGC,KAAM,QCmKf/G,SAAQ,YAAqC,IAAD,mBAAlC2U,EAAkC,YAAtBrY,EAAsB,EAAtBA,KAAMgY,EAAgB,EAAhBA,SACxDL,EAAM,CAAE9B,QAASwC,GACvBrF,EAAS,GAAD,OAAIqF,EAAJ,UAAR,aAAiCrY,KAAK,GAAD,OAAKA,EAAL,cAAuB6T,KAAM,KAAQ8D,GAC1ExX,OAAO0E,QAAQmT,GAAUtU,SAAQ,YAAuB,IAAD,mBAApB+T,EAAoB,KAAfe,EAAe,KACrDxF,EAAS,GAAD,OAAIyE,EAAJ,YAAWY,EAAX,WAAR,aAAyCrY,KAAK,GAAD,OAAKA,EAAL,eAAwB6T,KAAM,SAAY8D,GACvFtB,EAAS,GAAD,OAAIoB,EAAJ,YAAWY,EAAX,WAA+B,SAAC9W,GAAD,OAAOiX,GAAa,IAAMjX,EAAEmU,mBAAqBnU,EAAE,GAAD,OAAI8W,EAAJ,WAAwB,KACjHlY,OAAO0E,QAAQqN,GAAUxO,SAAQ,YAAuB,IAAD,mBAApBqJ,EAAoB,KAAd8K,EAAc,KACrD1X,OAAO0E,QAAQyN,GAAU5O,SAAQ,YAAuB,IAAD,mBAApB6T,EAAoB,KAAdC,EAAc,KACrDxE,EAAS,GAAD,OAAIyE,EAAJ,YAAWY,EAAX,YAAuBd,EAAvB,YAA+BxK,EAA/B,WAAR,aAAyD/M,KAAK,GAAD,OAAKA,EAAL,YAAawX,EAAb,YAAyBK,EAAzB,eAAgDhE,KAAM,SAAY8D,GAC/H3E,EAAS,GAAD,OAAIyE,EAAJ,YAAWY,EAAX,YAAuBd,EAAvB,YAA+BxK,IAAvC,aAAmD/M,KAAK,GAAD,OAAKA,EAAL,YAAawX,EAAb,YAAyBK,IAAeF,GAE/FtB,EAAS,GAAD,OAAIoB,EAAJ,YAAWY,EAAX,YAAuBd,EAAvB,YAA+BxK,EAA/B,WAA+C,SAACxL,GAAD,OAAOA,EAAE,GAAD,OAAIkW,EAAJ,YAAWF,EAAX,YAAmBxK,EAAnB,WAAmCxL,EAAE,GAAD,OAAIkW,EAAJ,YAAWY,EAAX,YACnGhC,EAAS,GAAD,OAAIoB,EAAJ,YAAWY,EAAX,YAAuBd,EAAvB,YAA+BxK,IAAU,SAACxL,GAAD,OAAOA,EAAE6S,SAAW7S,EAAE,GAAD,OAAIkW,EAAJ,YAAWY,EAAX,YAAuBd,EAAvB,YAA+BxK,EAA/B,wB,WC1L9E,SAAS0L,EAAqBpB,GAC5B,IAAMqB,EAAa,IAAInU,IAIvB,OAHA8S,EACE,IAAIsB,MAAM,GAAI,CAAErY,IAAK,SAACiD,EAAQqV,EAAMC,GAAeH,EAAWI,IAAIF,MAClE,IAAID,MAAM,GAAI,CAAErY,IAAK,SAACiD,EAAQqV,EAAMC,GAAeH,EAAWI,IAAIF,OAC7D,YAAIF,GAEb,IAAMK,EAAuB5Y,OAAO+G,OAAO/G,OAAOmF,YAChDnF,OAAO4C,KAAKsT,GAAU7Q,KAAI,SAAAxE,GAAG,MAAI,CAACA,EAAKyX,EAAqBpC,EAASrV,UAkBvE,SAASgY,IAA+D,IAA/CvC,EAA8C,uDAAlC,GAAI1T,EAA8B,uDAAvB5C,OAAO4C,KAAKiQ,GACtDiG,EAAe,IAAI1U,IAEvB,OADAxB,EAAKW,SAAQ,SAAA1C,GAAG,OAAIkY,EAAmBlY,EAAKyV,EAAWwC,MAChD,YAAIA,GAEb,SAASC,EAAmBlY,EAAKyV,EAAWwC,GAAe,IAAD,IACpDA,EAAa5T,IAAIrE,KACrB,UAAA+X,EAAqB/X,UAArB,SAA2B0C,SAAQ,SAAAqB,GAAC,OAAImU,EAAmBnU,EAAG0R,EAAWwC,MACzE9Y,OAAO4C,KAAP,UAAY0T,EAAUzV,UAAtB,QAA8B,IAAI0C,SAAQ,SAAAqB,GAAC,OAAImU,EAAmBnU,EAAG0R,EAAWwC,MAChFA,EAAaH,IAAI9X,ICrCZ,IAAImY,EAAyB,6BACpCA,EAAuB1Z,MAAK,SAAA2Z,GAU5B,IAAoBC,EAAKrY,EAALqY,EATPD,EAAIlG,QAUfoG,EAAQC,SADevY,EATC,aAUAqY,EACxBtH,EAAYsH,EAAK,CAACrY,IAAM,SAAAqI,GAAC,MAAiB,oBAANA,KAAkB,SAACgO,EAAStU,GAC9DsU,EAAQtU,KAAOA,KAXjBoW,EAAyB,Q,IAENG,EACnB,aAAgB,GCPH,SAAyBE,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIjX,UAAU,qCDKP,SAAK8K,gBAAgBgM,EAAS,MAAMpN,MAAM,2CADtCoN,EAEZC,SAAW,GAFCD,EAGZhZ,IAAM,SAACyC,GAAD,MAAO2W,EAAP,uDAAgB,KAAhB,iBAAyB7H,EAHnByH,EAGqCC,SAAUxW,UAArD,QAA8D2W,GEH7EC,UAAS,ePUiCzM,EOVjC,GPUiCA,EOVjC,UAAG,WAAO/N,GAAP,2FAAA2S,EAAA,yDACJ8H,EAAKC,YAAYC,MADb,EAEuK3a,EAAE4a,KAA3KC,EAFE,EAEFA,eAAgBpT,EAFd,EAEcA,WAFd,IAE0BqT,kBAF1B,MAEuC,GAFvC,MAE2CC,kBAF3C,MAEwD,GAFxD,EAE0ExU,EAF1E,EAE4DiC,aAAqBxD,EAFjF,EAEiFA,mBAAoBgW,EAFrG,EAEqGA,gBAAiBC,EAFtH,EAEsHA,mBAAoB/V,EAF1I,EAE0IA,UAF1I,IAEqJgW,aAFrJ,SAKwB,kBAAvBD,EALD,gBAMR7W,EAAS,SAACmC,GAAD,OAAWA,EAAM0U,IAC1BE,EAAa,CAACF,GAPN,uCASFjB,EATE,UAWqB,oBADvBoB,EAAgBjB,EAAQhZ,IAAI8Z,IAV1B,mBAYiBG,EAAc7U,GAZ/B,mBAYLnC,EAZK,KAYG+W,EAZH,oCAcNE,YAAY,CAAEC,SAAU,EAAGC,OAAQ,IACnCF,YAAY,CAAEG,OAAQ,GAAID,OAAQ,IAf5B,2BAkBkB,IAAtBJ,EAAW9b,SAEPwC,EAAMsZ,EAAW,GACvB/W,EAAS,SAACmC,GAAD,OAAWA,EAAM1E,KArBpB,QAyBJiY,EAAeD,EAAgBtT,EAAM+Q,UAAP,sBAAsB6D,GAAtB,YAAqCna,OAAO4C,KAAKkX,IAAjD,YAAiE9Z,OAAO4C,KAAKmX,MAC3GU,EAAWpT,YAA0BwS,EAAgBpT,GAEvDiU,EAAkBb,EAAgBc,EAAWF,EAC7CP,GAE8D,IAA5Dla,OAAO4C,KAAKsB,EAAY4V,EAAaC,GAAY1b,SAInDqc,GAHME,EAAQ,SAACzW,GAAD,OAAoBnE,OAAOmF,YAAYnF,OAAO0E,QAAQmV,GAAgBxU,KAAI,mCAAExE,EAAF,KAAOwF,EAAP,WACtF,CAACxF,EAAKiD,YAAeuC,EAAQrC,EAAoB,IAAII,IAAI0U,GAAe5U,EAAW,IAAIE,IAAID,WAErE,KACxBwW,EAAWtT,YAA0BqT,EAAiBjU,IAEvC,IAEbiU,EAAkBE,EAAMnU,EAAWpB,KAAI,SAAAN,GAAG,OAAIA,EAAIlE,QAClD8Z,EAAWtT,YAA0BqT,EAAiBjU,KAzClD,EA8CsB0P,EAAmB2C,EAAcvT,GAA3DiC,EA9CI,EA8CJA,aAAc0P,EA9CV,EA8CUA,QAChBsD,EAAS,GAAIK,GAAY,IACzBC,EAAa,EAAGC,EAAUN,EAAWE,EAEnCK,EAAK,WACTR,EAAOS,MAAK,SAACtJ,EAAGuJ,GAAJ,OAAWA,EAAEC,eAAiBxJ,EAAEwJ,kBAC5CX,EAAOY,OAAOpB,IAGVvS,EAAW,SAACR,EAAM1B,GAGtB,KAFQuV,EAAa,KAAQT,YAAY,CAAEC,SAAUQ,EAAYP,OAAQb,YAAYC,MAAQF,EAAIsB,YACjG7D,EAAQ3R,IACJvF,OAAO0E,QAAQoV,GAAYnV,MAAK,mCAAE9D,EAAF,KAAOwa,EAAP,YAAoB9V,EAAM1E,GAAOwa,OACjErb,OAAO0E,QAAQqV,GAAYpV,MAAK,mCAAE9D,EAAF,KAAOya,EAAP,YAAoB/V,EAAM1E,GAAOya,KAArE,CACA,IAAIH,EAAiBjX,GAAad,EAAOmC,GAASnC,EAAOmC,GACrD4V,GAAkBN,IACpBL,EAAOrb,KAAK,CAAEgc,iBAAgBpX,UAAU,eAAMkD,KAC1CuT,EAAOnc,QAAU,MACnB2c,IACAH,EAAYL,EAAOA,EAAOnc,OAAS,GAAG8c,mBAjElC,cAqEoB5U,YAAwBmU,EAAiBjU,IArE7D,IAqEV,2BAAWD,EAAX,QACEe,YAAqBC,EAAchB,EAAiBxC,EAAoByD,GAtEhE,8BAwEVuT,IAIId,IACFM,EAAS,CAACA,EAAO,KAGfe,EAAK7B,YAAYC,MACrBU,YAAY,CAAEC,SAAUQ,EAAYP,OAAQgB,EAAK9B,EAAIsB,YACrDV,YAAY,CAAEG,SAAQD,OAAQgB,EAAK9B,EAAIsB,YAlF7B,2CPWH,WACL,IAAI/c,EAAOmP,KACPqO,EAAOnY,UACX,OAAO,IAAIjE,SAAQ,SAAUC,EAASuO,GACpC,IAAIwD,EAAMrE,EAAG7J,MAAMlF,EAAMwd,GAEzB,SAASnK,EAAM9Q,GACb4Q,EAAmBC,EAAK/R,EAASuO,EAAQyD,EAAOC,EAAQ,OAAQ/Q,GAGlE,SAAS+Q,EAAOnP,GACdgP,EAAmBC,EAAK/R,EAASuO,EAAQyD,EAAOC,EAAQ,QAASnP,GAGnEkP,OAAMvP,QOzBH","file":"static/js/BuildWorker.4dee8434.worker.js","sourcesContent":[" \tself[\"webpackChunk\"] = function webpackChunkCallback(chunkIds, moreModules) {\n \t\tfor(var moduleId in moreModules) {\n \t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t}\n \t\twhile(chunkIds.length)\n \t\t\tinstalledChunks[chunkIds.pop()] = 1;\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded chunks\n \t// \"1\" means \"already loaded\"\n \tvar installedChunks = {\n \t\t0: 1\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n \t\tpromises.push(Promise.resolve().then(function() {\n \t\t\t// \"1\" is the signal for \"already loaded\"\n \t\t\tif(!installedChunks[chunkId]) {\n \t\t\t\timportScripts(__webpack_require__.p + \"static/js/\" + ({}[chunkId]||chunkId) + \".\" + {\"1\":\"e990aaf5\"}[chunkId] + \".chunk.worker.js\");\n \t\t\t}\n \t\t}));\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/genshin-optimizer/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import ElementalData from \"../Data/ElementalData\"\r\n\r\n/**\r\n * Remove artifacts that can never be used in optimized builds\r\n * @param {artifact[]} artifacts - List of artifacts of the same slot\r\n * @param {Object.<setKey, Object.<number, Object.<statKey, statValue>>>} artifactSetEffects - The list of the set effects\r\n * @param {Set.<statKey>} significantStats - A set of stats that pruning needs to take into consideration\r\n * @param {bool} ascending - Whether the sorting is ascending or descending\r\n * @param {Set.<setKey>} alwaysAccepted - The list of artifact sets that are always included\r\n */\r\nexport function pruneArtifacts(artifacts, artifactSetEffects, significantStats, ascending, alwaysAccepted = new Set()) {\r\n  function shouldKeepFirst(first, second, preferFirst) {\r\n    let firstBetter = Object.entries(first).some(([k, v]) => v > (second[k] ?? 0))\r\n    let secondBetter = Object.entries(second).some(([k, v]) => v > (first[k] ?? 0))\r\n    if (ascending) [firstBetter, secondBetter] = [secondBetter, firstBetter]\r\n    // Keep if first is strictly better, uncomparable, or equal + prefer first\r\n    return firstBetter || (!secondBetter && preferFirst)\r\n  }\r\n\r\n  // Prune unused set effects. Sets with no relevant effects are regrouped to \"other\"\r\n  const prunedSetEffects = { \"other\": {} }\r\n  for (const set in artifactSetEffects)\r\n    for (const num in artifactSetEffects[set]) {\r\n      const effects = Object.entries(artifactSetEffects[set][num]).filter(([key]) => significantStats.has(key))\r\n      if (effects.length > 0) {\r\n        prunedSetEffects[set] = prunedSetEffects[set] ?? {}\r\n        prunedSetEffects[set][num] = Object.fromEntries(effects)\r\n      }\r\n    }\r\n\r\n  // array of artifacts, artifact stats, and set (may be \"other\")\r\n  let tmp = artifacts.map(artifact => {\r\n    let stats = {}, set = (artifact.setKey in prunedSetEffects) ? artifact.setKey : \"other\"\r\n    if (significantStats.has(artifact.mainStatKey))\r\n      stats[artifact.mainStatKey] = artifact.mainStatVal\r\n    for (const { key, value } of artifact.substats)\r\n      if (significantStats.has(key))\r\n        stats[key] = (stats[key] ?? 0) + value\r\n    return { artifact, stats, set }\r\n  })\r\n\r\n  // Compare artifacts' base stats from the same set\r\n  tmp = tmp.filter(({ artifact: candidate, stats: candidateStats, set: candidateSet }) =>\r\n    tmp.every(({ artifact: other, stats: otherStats, set: otherSet }) =>\r\n      candidateSet !== otherSet || shouldKeepFirst(candidateStats, otherStats, candidate.id <= other.id)\r\n    ))\r\n\r\n  if (!ascending) {\r\n    // Cross-check with different sets\r\n    tmp = tmp.filter(({ artifact: candidate, stats: candidateStats, set: candidateSet }) => {\r\n      // Possible \"additional stats\" if a build equips `candidate` on an empty slot.\r\n      let possibleStats = [...Object.values(prunedSetEffects[candidateSet]), {}].map(c => {\r\n        const current = { ...candidateStats }\r\n        Object.entries(c).forEach(([key, value]) => current[key] = (current[key] ?? 0) + value)\r\n        return current\r\n      })\r\n      return tmp.every(({ artifact: other, stats: otherStats, set: otherSet }) => {\r\n        if (candidateSet === otherSet) return true // Already checked same-set\r\n\r\n        // Remove possibilities that shouldn't be kept\r\n        possibleStats = possibleStats.filter(current =>\r\n          shouldKeepFirst(current, otherStats, candidate.id <= other.id))\r\n        return possibleStats.length !== 0\r\n      })\r\n    })\r\n  }\r\n  // Reinstate `alwaysAccepted`\r\n  return [\r\n    ...artifacts.filter(artifact => alwaysAccepted.has(artifact.setKey)),\r\n    ...tmp.map(tmp => tmp.artifact).filter(artifact => !alwaysAccepted.has(artifact.setKey)),\r\n  ]\r\n}\r\n\r\n/**\r\n * Generate all set of artifacts-by-slots based on the filters\r\n * @param {Object.<slotKey, artifact[]>} artifactsBySlot - list of artifacts, separated by slots\r\n * @param {Object.<setKey, number>} setFilters - minimum number of artifacts in each set\r\n *\r\n */\r\nexport function artifactSetPermutations(artifactsBySlot, setFilters) {\r\n  const setKeys = new Set(setFilters.map(i => i.key)), filteredArtifactsBySlot = {}\r\n  const slotKeys = Object.keys(artifactsBySlot)\r\n\r\n  for (const slotKey of slotKeys) {\r\n    let artifactsBySet = {}\r\n    for (const artifact of artifactsBySlot[slotKey]) {\r\n      if (setKeys.has(artifact.setKey)) {\r\n        if (artifactsBySet[artifact.setKey]) artifactsBySet[artifact.setKey].push(artifact)\r\n        else artifactsBySet[artifact.setKey] = [artifact]\r\n      } else {\r\n        if (artifactsBySet[null]) artifactsBySet[null].push(artifact)\r\n        else artifactsBySet[null] = [artifact]\r\n      }\r\n    }\r\n    filteredArtifactsBySlot[slotKey] = Object.freeze(artifactsBySet)\r\n  }\r\n\r\n  const setCount = {}, accu = {}, result = []\r\n\r\n  function slotPerm(index) {\r\n    if (index >= slotKeys.length) {\r\n      for (const { key, num } of setFilters)\r\n        if ((setCount[key] ?? 0) < num)\r\n          return\r\n      result.push({ ...accu })\r\n      return\r\n    }\r\n\r\n    const slotKey = slotKeys[index]\r\n    let artifactsBySet = filteredArtifactsBySlot[slotKey]\r\n    for (const setKey in artifactsBySet) {\r\n      setCount[setKey] = (setCount[setKey] ?? 0) + 1\r\n      accu[slotKey] = artifactsBySet[setKey]\r\n      slotPerm(index + 1)\r\n      setCount[setKey] -= 1\r\n    }\r\n  }\r\n\r\n  slotPerm(0)\r\n  return result\r\n}\r\n\r\n/**\r\n * Compute number of all artifact permutations based on the filters\r\n * @param {Object.<slotKey, artifact[]>} artifactsBySlot - list of artifacts, separated by slots\r\n * @param {Object.<setKey, number>} setFilters - minimum number of artifacts in each set\r\n */\r\nexport function calculateTotalBuildNumber(artifactsBySlot, setFilters) {\r\n  return artifactSetPermutations(artifactsBySlot, setFilters).reduce((accu, artifactsBySlot) =>\r\n    accu + Object.entries(artifactsBySlot).reduce((accu, artifacts) => accu * artifacts[1].length, 1)\r\n    , 0)\r\n}\r\n\r\n/**\r\n * @callback artifactCallback\r\n * @param {Object.<artifactKey, artifact>} artifacts - the list of artifacts\r\n * @param {stats} stats - the total stats for the artifacts\r\n */\r\n\r\n/**\r\n * Generate all artifact permutations and accumulate the stats\r\n * @param {stats} initialStats - initial stats before any artifact is added\r\n * @param {Object.<slotKey, artifact[]>} artifactsBySlot - list of artifacts, separated by slots\r\n * @param {Object.<setKey, Object.<number, Object.<statKey, statValue>>>} artifactSetEffects - the list of the set effects\r\n * @param {artifactCallback} callback - the functions called with each permutation\r\n */\r\nexport function artifactPermutations(initialStats, artifactsBySlot, artifactSetEffects, callback) {\r\n  const slotKeys = Object.keys(artifactsBySlot), setCount = {}, accu = {}\r\n  function slotPerm(index, stats) {\r\n    if (index >= slotKeys.length) {\r\n      callback(accu, stats)\r\n      return\r\n    }\r\n\r\n    let slotKey = slotKeys[index]\r\n    for (const artifact of artifactsBySlot[slotKey]) {\r\n      let newStats = { ...stats }\r\n      accumulate(slotKey, artifact, setCount, accu, newStats, artifactSetEffects)\r\n      slotPerm(index + 1, newStats)\r\n      setCount[artifact.setKey] -= 1\r\n    }\r\n  }\r\n\r\n  slotPerm(0, initialStats)\r\n}\r\n\r\nfunction accumulate(slotKey, art, setCount, accu, stats, artifactSetEffects) {\r\n  let setKey = art.setKey\r\n  accu[slotKey] = art\r\n  setCount[setKey] = (setCount[setKey] ?? 0) + 1\r\n\r\n  // Add artifact stats\r\n  if (art.mainStatKey in stats) stats[art.mainStatKey] += art.mainStatVal\r\n  art.substats.forEach((substat) => {\r\n    if (substat?.key in stats) stats[substat.key] += substat.value\r\n  })\r\n\r\n  // Add set effects\r\n  let setEffect = artifactSetEffects[setKey]?.[setCount[setKey]]\r\n  setEffect && Object.entries(setEffect).forEach(([statKey, val]) => {\r\n    if (statKey in stats) stats[statKey] += val\r\n  })\r\n}\r\n\r\n/**\r\n  * Create statKey in the form of ${ele}_elemental_${type} for elemental DMG, ${ele}_${src}_${type} for talent DMG.\r\n  * @param {string} skillKey - The DMG src. Can be \"norm\",\"skill\". Use an elemental to specify a elemental hit \"physical\" -> physical_elemental_{type}. Use \"elemental\" here to specify a elemental hit of character's element/reactionMode\r\n  * @param {*} stats - The calcualted stats\r\n  * @param {*} useCharElement - Override the hit to be the character's elemental, that is not part of infusion.\r\n  */\r\nexport function getTalentStatKey(skillKey, stats, useCharElement = false) {\r\n  const { hitMode = \"\", infusionAura = \"\", infusionSelf = \"\", reactionMode = null, characterEle = \"anemo\", weaponType = \"sword\" } = stats\r\n  if (Object.keys(ElementalData).includes(skillKey)) return `${skillKey}_elemental_${hitMode}`//elemental DMG\r\n  if (!useCharElement) useCharElement = weaponType === \"catalyst\"\r\n\r\n  if (skillKey === \"elemental\" || skillKey === \"burst\" || skillKey === \"skill\" || useCharElement) {\r\n    if (reactionMode && reactionMode.startsWith(characterEle)) return `${reactionMode}_${skillKey}_${hitMode}`\r\n    return `${characterEle}_${skillKey}_${hitMode}`\r\n  }\r\n  //auto attacks\r\n  let eleKey = \"physical\"\r\n  if (infusionSelf) eleKey = infusionSelf\r\n  else if (infusionAura) eleKey = infusionAura\r\n  if (reactionMode && reactionMode.startsWith(eleKey)) return `${reactionMode}_${skillKey}_${hitMode}`\r\n\r\n  return `${eleKey}_${skillKey}_${hitMode}`\r\n}\r\n\r\nexport function getTalentStatKeyVariant(skillKey, stats, useCharElement = false) {\r\n  if (Object.keys(ElementalData).includes(skillKey)) return skillKey//elemental DMG\r\n  const { infusionAura = \"\", infusionSelf = \"\", reactionMode = null, characterEle = \"anemo\", weaponType = \"sword\" } = stats\r\n  if (!useCharElement) useCharElement = weaponType === \"catalyst\"\r\n\r\n  if (skillKey === \"elemental\" || skillKey === \"burst\" || skillKey === \"skill\" || useCharElement) {\r\n    if (reactionMode && reactionMode.startsWith(characterEle)) {\r\n      if ([\"pyro_vaporize\", \"hydro_vaporize\"].includes(reactionMode)) return \"vaporize\"\r\n      else if ([\"pyro_melt\", \"cryo_melt\"].includes(reactionMode)) return \"melt\"\r\n    }\r\n    return characterEle\r\n  }\r\n  //auto attacks\r\n  let eleKey = \"physical\"\r\n  if (infusionSelf) eleKey = infusionSelf\r\n  else if (infusionAura) eleKey = infusionAura\r\n  if (reactionMode && reactionMode.startsWith(eleKey)) {\r\n    if ([\"pyro_vaporize\", \"hydro_vaporize\"].includes(reactionMode)) return \"vaporize\"\r\n    else if ([\"pyro_melt\", \"cryo_melt\"].includes(reactionMode)) return \"melt\"\r\n  }\r\n  return eleKey\r\n}","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","const ElementalData = {\r\n  physical: { name: \"Physical\" },\r\n  anemo: { name: \"Anemo\" },\r\n  geo: { name: \"Geo\" },\r\n  electro: { name: \"Electro\" },\r\n  hydro: { name: \"Hydro\" },\r\n  pyro: { name: \"Pyro\" },\r\n  cryo: { name: \"Cryo\" },\r\n  // dendro: { name: \"Dendro\" }\r\n}\r\nexport default ElementalData","module.exports = require(\"regenerator-runtime\");\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","//why does this work? no idea. \r\n$RefreshReg$ = () => { };\r\n$RefreshSig$ = () => () => { };\r\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export const getRandomElementFromArray = (array) => array[Math.floor(Math.random() * array.length)];\r\nexport function getRandomInt(min, max) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive\r\n}\r\nexport function getRandomIntInclusive(min, max) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min + 1) + min); //The maximum is inclusive and the minimum is inclusive \r\n}\r\nexport function getRandomArbitrary(min, max) {\r\n  return Math.random() * (max - min) + min;\r\n}\r\nexport const loadFromLocalStorage = (key) => {\r\n  let data = localStorage.getItem(key)\r\n  if (!data) return null\r\n  return JSON.parse(data)\r\n}\r\nexport const saveToLocalStorage = (key, obj) =>\r\n  localStorage.setItem(key, JSON.stringify(obj));\r\nexport const deepClone = (obj) =>\r\n  JSON.parse(JSON.stringify(obj))\r\n\r\nexport const closeEnoughFloat = (a, b) =>\r\n  Math.abs(a - b) <= 0.101\r\n\r\nexport const closeEnoughInt = (a, b) =>\r\n  Math.abs(a - b) <= 1\r\nexport const clamp = (val, low, high) => {\r\n  if (val < low) return low;\r\n  if (val > high) return high;\r\n  return val\r\n}\r\nexport const getArrLastElement = (arr) =>\r\n  arr.length ? arr[arr.length - 1] : null\r\n\r\nexport const clamp01 = (val) => clamp(val, 0, 1)\r\nexport const clampPercent = (val) => clamp(val, 0, 100)\r\n\r\n//use to pretty print timestamps, or anything really.\r\nexport function strPadLeft(string, pad, length) {\r\n  return (new Array(length + 1).join(pad) + string).slice(-length);\r\n}\r\n\r\n//fuzzy compare strings. longer the distance, the higher the mismatch.\r\nexport function hammingDistance(str1, str2) {\r\n  var dist = 0;\r\n  str1 = str1.toLowerCase();\r\n  str2 = str2.toLowerCase();\r\n  for (var i = 0, j = Math.max(str1.length, str2.length); i < j; i++) {\r\n    let match = true\r\n    if (!str1[i] || !str2[i] || str1[i] !== str2[i])\r\n      match = false\r\n    if (str1[i - 1] === str2[i] || str1[i + 1] === str2[i])\r\n      match = true\r\n    if (!match) dist++\r\n  }\r\n  return dist;\r\n}\r\n\r\n//multiplies every numberical value in the obj by a multiplier.\r\nexport function objMultiplication(obj, multi) {\r\n  if (multi === 1) return obj\r\n  Object.keys(obj).forEach(prop => {\r\n    if (typeof obj[prop] === \"object\") objMultiplication(obj[prop], multi)\r\n    if (typeof obj[prop] === \"number\") obj[prop] = obj[prop] * multi\r\n  })\r\n  return obj\r\n}\r\n\r\n//assign obj.[keys...] = value\r\nexport function layeredAssignment(obj, keys, value) {\r\n  keys.reduce((accu, key, i, arr) => {\r\n    if (i === arr.length - 1) return (accu[key] = value)\r\n    if (!accu[key]) accu[key] = {}\r\n    return accu[key]\r\n  }, obj)\r\n  return obj\r\n}\r\nexport function objPathValue(obj, keys) {\r\n  return keys.reduce((a, k) => a?.[k], obj)\r\n}\r\n//delete the value denoted by the path. Will also delete empty objects as well.\r\nexport function deletePropPath(obj, path) {\r\n  const tempPath = [...path]\r\n  const lastKey = tempPath.pop()\r\n  const objPathed = objPathValue(obj, tempPath)\r\n  delete objPathed[lastKey];\r\n}\r\n\r\nexport function objClearEmpties(o) {\r\n  for (const k in o) {\r\n    if (typeof o[k] !== \"object\") continue\r\n    objClearEmpties(o[k])\r\n    if (!Object.keys(o[k]).length) delete o[k];\r\n  }\r\n}\r\nexport function crawlObject(obj, keys, validate, cb) {\r\n  if (validate(obj)) cb(obj, keys)\r\n  else obj && typeof obj === \"object\" && Object.entries(obj).forEach(([key, val]) => crawlObject(val, [...keys, key], validate, cb))\r\n}\r\n// const getObjectKeysRecursive = (obj) => Object.values(obj).reduce((a, prop) => typeof prop === \"object\" ? [...a, ...getObjectKeysRecursive(prop)] : a, Object.keys(obj))\r\nexport const getObjectKeysRecursive = (obj) => typeof obj === \"object\" ? Object.values(obj).flatMap(getObjectKeysRecursive).concat(Object.keys(obj)) : (typeof obj === \"string\" ? [obj] : [])\r\n","import ElementalData from \"./Data/ElementalData\";\r\n\r\nexport const hitTypes = { hit: \"DMG\", avgHit: \"Avg. DMG\", critHit: \"CRIT Hit DMG\" }\r\nexport const hitMoves = { normal: \"Normal Att.\", charged: \"Charged Att.\", plunging: \"Plunging Att.\", elemental: \"Elemental Att.\", skill: \"Ele. Skill\", burst: \"Ele. Burst\" }\r\nexport const hitElements = ElementalData\r\nexport const transformativeReactions = {\r\n  overloaded: { name: \"Overloaded\", multi: 2, variants: [ \"pyro\" ] },\r\n  shattered: { name: \"Shattered\", multi: 1.5, variants: [ \"physical\" ] },\r\n  electrocharged: { name: \"Electro-Charged\", multi: 1.2, variants: [ \"electro\" ] },\r\n  superconduct: { name: \"Superconduct\", multi: 0.5, variants: [ \"cryo\" ] },\r\n  swirl: { name: \"Swirl\", multi: 0.6, variants: [ \"pyro\", \"hydro\", \"electro\", \"cryo\" ] },\r\n}\r\nexport const amplifyingReactions = {\r\n  vaporize: { name: \"Vaporize\", variants: { pyro: 1.5, hydro: 2 } },\r\n  melt: { name: \"Melt\", variants: { pyro: 2, cryo: 1.5 } },\r\n}\r\nexport const otherReactions = {\r\n  burning: \"Burning\",\r\n  crystalize: \"Crystalize\",\r\n}\r\nexport const transformativeReactionLevelMultipliers = [ 0,\r\n  17.2,  18.5,  19.9,  21.3,  22.6,  24.6,  26.6,  28.9,  31.4,  34.1,\r\n  37.2,  40.7,  44.4,  48.6,  53.7,  59.1,  64.4,  69.7,  75.1,  80.6,\r\n  86.1,  91.7,  97.2, 102.8, 108.4, 113.2, 118.1, 123.0, 129.7, 136.3,\r\n 142.7, 149.0, 155.4, 161.8, 169.1, 176.5, 184.1, 191.7, 199.6, 207.4,\r\n 215.4, 224.2, 233.5, 243.4, 256.1, 268.5, 281.5, 295.0, 309.1, 323.6,\r\n 336.8, 350.5, 364.5, 378.6, 398.6, 416.4, 434.4, 452.6, 471.4, 490.5,\r\n 509.5, 532.8, 556.4, 580.1, 607.9, 630.2, 652.9, 675.2, 697.8, 720.2,\r\n 742.5, 765.2, 784.4, 803.4, 830.9, 854.4, 877.8, 900.1, 923.8, 946.4,\r\n 968.6, 991.0,1013.5,1036.1,1066.6,1090.0,1115.0,1141.7,1171.9,1202.8,\r\n1202.8,1233.9,1264.7,1305.7,1346.1,1468.9,1524.0,1577.0,1627.6,1674.8,\r\n]\r\nexport const crystalizeLevelMultipliers = [ 0,\r\n  91,  99, 106, 114, 121, 129, 136, 144, 151, 159,\r\n 170, 181, 192, 204, 216, 228, 248, 268, 287, 304,\r\n 320, 337, 352, 368, 384, 394, 405, 416, 427, 438,\r\n 448, 459, 470, 481, 490, 499, 513, 529, 544, 557,\r\n 574, 591, 607, 622, 638, 649, 667, 684, 702, 715,\r\n 733, 750, 767, 784, 800, 814, 834, 855, 876, 896,\r\n 915, 936, 956, 982,1003,1017,1036,1057,1075,1096,\r\n1114,1135,1149,1170,1191,1205,1224,1243,1260,1277,\r\n1293,1308,1317,1327,1336,1349,1366,1384,1403,1424,\r\n1450,1478,1507,1543,1570,1580,1589,1673,1682,1691,\r\n]","import { clamp } from \"./Util/Util\";\r\nimport { hitTypes, hitMoves, hitElements, transformativeReactions, amplifyingReactions, transformativeReactionLevelMultipliers, crystalizeLevelMultipliers } from \"./StatConstants\"\r\n\r\nconst StatData = {\r\n  flat: { name: \"\", default: 1 },\r\n\r\n  // Character Stats\r\n  characterHP: { name: \"HP\", pretty: \"Character Base HP\", const: true },\r\n  characterDEF: { name: \"DEF\", pretty: \"Character Base DEF\", const: true },\r\n  characterATK: { name: \"ATK\", pretty: \"Character Base ATK\", const: true },\r\n  characterEle: { name: \"Character Element Key\", default: \"anemo\", const: true },\r\n  characterLevel: { name: \"Character Level\", default: 1, const: true },\r\n\r\n  // Weapon Stats\r\n  weaponATK: { name: \"Weapon ATK\", pretty: \"ATK Weapon\", const: true },\r\n\r\n  // Character & Weapon Stats\r\n  baseATK: { name: \"ATK\", pretty: \"ATK Base\", const: true }, // characterATK + weaponATK\r\n\r\n  // Weapon & Artifact Stats\r\n  hp: { name: \"HP\", pretty: \"Flat HP\" },//flat hp\r\n  hp_: { name: \"HP\", unit: \"%\", pretty: \"HP Bonus\" },\r\n  atk: { name: \"ATK\", pretty: \"Flat ATK\" },\r\n  atk_: { name: \"ATK\", unit: \"%\", pretty: \"ATK Bonus\" },\r\n  def: { name: \"DEF\", pretty: \"Flat DEF\" },\r\n  def_: { name: \"DEF\", unit: \"%\", pretty: \"DEF Bonus\" },\r\n  dmg_: { name: \"All DMG Bonus\", unit: \"%\" },\r\n\r\n  // Attack-related Character, Weapon & Artifact Stats\r\n  finalHP: { name: \"HP\", pretty: \"HP\" },\r\n  finalATK: { name: \"ATK\", pretty: \"ATK\" },\r\n  finalDEF: { name: \"DEF\", pretty: \"DEF\" },\r\n\r\n  critHit_base_multi: { name: `Crit Multiplier`, unit: \"multi\" },\r\n\r\n  eleMas: { name: \"Elemental Mastery\", },\r\n  enerRech_: { name: \"Energy Recharge\", unit: \"%\", default: 100 },\r\n  critRate_: { name: \"CRIT Rate\", unit: \"%\", default: 5 },\r\n\r\n  critDMG_: { name: \"CRIT DMG\", unit: \"%\", default: 50 },\r\n  weakspotDMG_: { name: \"Weakspot DMG\", unit: \"%\" },\r\n\r\n  // Misc. Stats\r\n  heal_: { name: \"Healing Bonus\", unit: \"%\" },\r\n  incHeal_: { name: \"Incoming Healing Bonus\", unit: \"%\" },\r\n  powShield_: { name: \"Shield Strength\", unit: \"%\" },\r\n  cdRed_: { name: \"CD Red.\", unit: \"%\" },\r\n  skillCDRed_: { name: \"Ele. Skill CD Red.\", unit: \"%\" },\r\n  burstCDRed_: { name: \"Ele. Burst CD Red.\", unit: \"%\" },\r\n  moveSPD_: { name: \"Movement SPD\", unit: \"%\" },\r\n  atkSPD_: { name: \"ATK SPD\", unit: \"%\" },\r\n  stamina: { name: \"Stamina\" },\r\n  staminaDec_: { name: \"Stamina Consumption Dec.\", unit: \"%\" },\r\n  staminaGlidingDec_: { name: \"Gliding Stamina Consumption Dec.\", unit: \"%\" },\r\n  staminaChargedDec_: { name: \"Charged Attack Stamina Consumption Dec.\", unit: \"%\" },\r\n\r\n  heal_multi: { name: \"Heal multiplier\", unit: \"multi\" },\r\n\r\n  // Reaction\r\n  transformative_level_multi: { name: \"Reaction Level Multiplier\", unit: \"multi\", const: true },\r\n  amplificative_dmg_: { name: \"Amplificative Reaction DMG Bonus\", unit: \"%\" },\r\n  transformative_dmg_: { name: \"Transformative Reaction DMG Bonus\", unit: \"%\" },\r\n  crystalize_eleMas_: { name: \"Crystalize Bonus (Elemental Mastery)\", unit: \"%\", variant: \"crystalize\" },\r\n  crystalize_multi: { name: \"Crystalize Multiplier\", unit: \"multi\", const: true, variant: \"crystalize\" },\r\n  crystalize_dmg_: { name: \"Crystalize Bonus\", unit: \"%\", variant: \"crystalize\" },\r\n  crystalize_hit: { name: \"Crystalize Shield HP\", variant: \"crystalize\" },\r\n  burning_dmg_: { name: \"Burning DMG Bonus\", variant: \"burning\" },\r\n\r\n  // Enemy\r\n  enemyLevel: { name: \"Enemy Level\", const: true },\r\n  enemyLevel_multi: { name: \"Enemy Level RES Multiplier\", unit: \"multi\", const: true },\r\n  enemyDEFRed_: { name: \"Enemy DEF Reduction\", unit: \"%\", const: true },\r\n\r\n  //infusion\r\n  infusionSelf: { name: \"Elemental Infusion\", const: true, default: \"\" }\r\n}\r\nconst Formulas = {\r\n  // Basic Stats\r\n  baseATK: (s, c) => c.characterATK + c.weaponATK,\r\n  finalATK: (s, c) => c.baseATK * (1 + s.atk_ / 100) + s.atk,\r\n  finalHP: (s, c) => c.characterHP * (1 + s.hp_ / 100) + s.hp,\r\n  finalDEF: (s, c) => c.characterDEF * (1 + s.def_ / 100) + s.def,\r\n\r\n  critHit_base_multi: (s) => (1 + s.critDMG_ / 100),\r\n\r\n  enemyLevel_multi: (s, c) => (100 + c.characterLevel) / ((100 + c.characterLevel) + (100 + c.enemyLevel) * (1 - c.enemyDEFRed_ / 100)),\r\n\r\n  heal_multi: (s) => (1 + s.heal_ / 100 + s.incHeal_ / 100),\r\n\r\n  // Reactions\r\n  transformative_level_multi: (s, c) => transformativeReactionLevelMultipliers[c.characterLevel],\r\n  amplificative_dmg_: (s) => 2500 / 9 * s.eleMas / (1400 + s.eleMas),\r\n  transformative_dmg_: (s) => 6000 / 9 * s.eleMas / (1400 + s.eleMas),\r\n\r\n  crystalize_eleMas_: (s) => 4000 / 9 * s.eleMas / (1400 + s.eleMas),\r\n  crystalize_multi: (s, c) => crystalizeLevelMultipliers[c.characterLevel],\r\n  crystalize_hit: (s, c) => (100 + s.crystalize_dmg_ + s.crystalize_eleMas_) / 100 * c.crystalize_multi,\r\n}\r\n\r\nconst ElementToReactionKeys = {\r\n  physical: [],\r\n  anemo: [\"electro_swirl_hit\", \"pyro_swirl_hit\", \"cryo_swirl_hit\", \"hydro_swirl_hit\"],\r\n  geo: [\"crystalize_hit\", \"shattered_hit\"],\r\n  electro: [\"overloaded_hit\", \"electrocharged_hit\", \"superconduct_hit\"],\r\n  hydro: [\"electrocharged_hit\", \"shattered_hit\"],//\"hydro_vaporize_multi\",\r\n  pyro: [\"overloaded_hit\"],// \"burning_hit\",\"pyro_vaporize_multi\", \"pyro_melt_multi\", \r\n  cryo: [\"shattered_hit\", \"superconduct_hit\"],//\"cryo_melt_multi\", \r\n  dendro: []\r\n}\r\nfunction resMultiplier(res) {\r\n  res = res / 100\r\n  if (res < 0) return 1 - res / 2\r\n  else if (res >= 0.75) return 1 / (res * 4 + 1)\r\n  return 1 - res\r\n}\r\n\r\nObject.entries(hitMoves).forEach(([move, moveName]) => {\r\n  StatData[`${move}_dmg_`] = { name: `${moveName} DMG Bonus`, unit: \"%\" }\r\n  StatData[`${move}_critRate_`] = { name: `${moveName} CRIT Rate Bonus`, unit: \"%\" }\r\n  StatData[`final_${move}_critRate_`] = { name: `${moveName} CRIT Rate`, unit: \"%\" }\r\n\r\n  Formulas[`final_${move}_critRate_`] = (s) => clamp(s.critRate_ + s[`${move}_critRate_`], 0, 100)\r\n})\r\n\r\nObject.entries(hitElements).forEach(([ele, { name: eleName }]) => {\r\n  const opt = { variant: ele }\r\n  // DONT CHANGE. needed for screenshot parsing\r\n  StatData[`${ele}_dmg_`] = { name: `${eleName} DMG Bonus`, unit: \"%\", ...opt }\r\n  StatData[`${ele}_res_`] = { name: `${eleName} DMG RES`, unit: \"%\", ...opt }\r\n\r\n  StatData[`${ele}_enemyRes_`] = { name: `Enemy ${eleName} DMG RES`, unit: \"%\", default: 10, const: true, ...opt }\r\n  StatData[`${ele}_enemyImmunity`] = { name: `Enemy ${eleName} Immunity`, default: false, const: true, ...opt }\r\n\r\n  StatData[`${ele}_enemyRes_multi`] = { name: `Enemy ${eleName} RES Multiplier`, unit: \"multi\", const: true, ...opt }\r\n  StatData[`${ele}_bonus_multi`] = { name: `${eleName} Attack Bonus DMG Multiplier`, unit: \"multi\", ...opt }\r\n\r\n  Formulas[`${ele}_enemyRes_multi`] = (s, c) => c[`${ele}_enemyImmunity`] ? 0 : resMultiplier(c[`${ele}_enemyRes_`])\r\n})\r\n\r\nObject.entries(hitMoves).forEach(([move, moveName]) => {\r\n  StatData[`${move}_avgHit_base_multi`] = { name: `${moveName} Avg. Multiplier`, unit: \"multi\" }\r\n  Formulas[`${move}_avgHit_base_multi`] = (s) => (1 + s.critDMG_ * s[`final_${move}_critRate_`] / 10000)\r\n  Object.entries(hitElements).forEach(([ele, { name: eleName }]) => {\r\n    const opt = { variant: ele }\r\n    StatData[`${ele}_${move}_hit_base_multi`] = { name: `${moveName} Base Multiplier`, unit: \"multi\", ...opt }\r\n    Formulas[`${ele}_${move}_hit_base_multi`] = (s, c) => (100 + s.dmg_ + s[`${ele}_dmg_`] + s[`${move}_dmg_`]) / 100\r\n    Object.entries(hitTypes).forEach(([type, typeName]) => {\r\n      StatData[`${ele}_${move}_${type}`] = { name: `${moveName} ${typeName}`, ...opt }\r\n      Formulas[`${ele}_${move}_${type}`] = (s) => s.finalATK * s[`${ele}_${move}_${type}_multi`]\r\n      StatData[`${ele}_${move}_${type}_multi`] = { name: `${moveName} ${typeName} Multiplier`, unit: \"multi\", ...opt }\r\n    })\r\n\r\n    Formulas[`${ele}_${move}_hit_multi`] = (s, c) => s[`${ele}_${move}_hit_base_multi`] * c.enemyLevel_multi * c[`${ele}_enemyRes_multi`]\r\n    Formulas[`${ele}_${move}_critHit_multi`] = (s) => s[`${ele}_${move}_hit_multi`] * s[`critHit_base_multi`]\r\n    Formulas[`${ele}_${move}_avgHit_multi`] = (s) => s[`${ele}_${move}_hit_multi`] * s[`${move}_avgHit_base_multi`]\r\n  })\r\n})\r\n\r\nObject.entries(transformativeReactions).forEach(([reaction, { name, multi, variants }]) => {\r\n  const opt = { variant: reaction }\r\n  StatData[`${reaction}_dmg_`] = { name: `${name} DMG Bonus`, unit: \"%\", ...opt }\r\n  StatData[`${reaction}_multi`] = { name: `${name} Multiplier`, unit: \"multi\", const: true, ...opt }\r\n  Formulas[`${reaction}_multi`] = (s, c) => multi * c.transformative_level_multi\r\n  if (variants.length === 1) {\r\n    const [ele] = variants, opt = { variant: reaction }\r\n    StatData[`${reaction}_hit`] = { name: `${name} DMG`, ...opt }\r\n    Formulas[`${reaction}_hit`] = (s, c) => (100 + s.transformative_dmg_ + s[`${reaction}_dmg_`]) / 100 * c[`${reaction}_multi`] * c[`${ele}_enemyRes_multi`]\r\n  } else {\r\n    variants.forEach(ele => {\r\n      const opt = { variant: ele }\r\n\r\n      StatData[`${ele}_${reaction}_hit`] = { name: `${hitElements[ele].name} ${name} DMG`, ...opt }\r\n      Formulas[`${ele}_${reaction}_hit`] = (s, c) => (100 + s.transformative_dmg_ + s[`${reaction}_dmg_`]) / 100 * c[`${reaction}_multi`] * c[`${ele}_enemyRes_multi`]\r\n    })\r\n  }\r\n})\r\n\r\nObject.entries(amplifyingReactions).forEach(([reaction, { name, variants }]) => {\r\n  const opt = { variant: reaction }\r\n  StatData[`${reaction}_dmg_`] = { name: `${name} DMG Bonus`, unit: \"%\", ...opt }\r\n  Object.entries(variants).forEach(([ele, baseMulti]) => {\r\n    StatData[`${ele}_${reaction}_multi`] = { name: `${name} Multiplier`, unit: \"multi\", ...opt }\r\n    Formulas[`${ele}_${reaction}_multi`] = (s) => baseMulti * (100 + s.amplificative_dmg_ + s[`${reaction}_dmg_`]) / 100\r\n    Object.entries(hitTypes).forEach(([type, typeName]) => {\r\n      Object.entries(hitMoves).forEach(([move, moveName]) => {\r\n        StatData[`${ele}_${reaction}_${move}_${type}_multi`] = { name: `${name} ${moveName} ${typeName} Multiplier`, unit: \"multi\", ...opt }\r\n        StatData[`${ele}_${reaction}_${move}_${type}`] = { name: `${name} ${moveName} ${typeName}`, ...opt }\r\n\r\n        Formulas[`${ele}_${reaction}_${move}_${type}_multi`] = (s) => s[`${ele}_${move}_${type}_multi`] * s[`${ele}_${reaction}_multi`]\r\n        Formulas[`${ele}_${reaction}_${move}_${type}`] = (s) => s.finalATK * s[`${ele}_${reaction}_${move}_${type}_multi`]\r\n      })\r\n    })\r\n  })\r\n})\r\nif (process.env.NODE_ENV === \"development\") console.log(StatData)\r\n\r\n//assume all the dependency for the modifiers are part of the dependencyKeys as well\r\nfunction PreprocessFormulas(dependencyKeys, stats, debug = false) {\r\n  const { modifiers = {} } = stats, initialStats = {}, constData = {}\r\n  const formulaList = dependencyKeys.map(key => {\r\n    const modifier = modifiers[key] ?? {}\r\n    const constModifier = Object.entries(modifier).filter(([k]) => StatData[k]?.const)\r\n    const dynamicModifier = Object.entries(modifier).filter(([k]) => !(StatData[k]?.const))\r\n    const constFunc = (s, c) => constModifier.reduce((accu, [k, m]) => accu + c[k] * m, 0)\r\n    const dynamicFunc = (s) => dynamicModifier.reduce((accu, [k, m]) => accu + s[k] * m, 0)\r\n\r\n    let funcIndicator = 0\r\n    if (constModifier.length) funcIndicator += 1\r\n    if (dynamicModifier.length) funcIndicator += 2\r\n    if (!Formulas[key]) funcIndicator += StatData[key]?.const ? 4 : 8\r\n\r\n    let tmp\r\n    switch (funcIndicator) {\r\n      case 0: tmp = Formulas[key]; break\r\n      case 1: tmp = (s, c) => Formulas[key](s, c) + constFunc(s, c); break\r\n      case 2: tmp = (s, c) => Formulas[key](s, c) + dynamicFunc(s, c); break\r\n      case 3: tmp = (s, c) => Formulas[key](s, c) + constFunc(s, c) + dynamicFunc(s, c); break\r\n      case 4: tmp = (s, c) => c[key]; break\r\n      case 5: tmp = (s, c) => c[key] + constFunc(s, c); break\r\n      case 6: tmp = (s, c) => c[key] + dynamicFunc(s, c); break\r\n      case 7: tmp = (s, c) => c[key] + constFunc(s, c) + dynamicFunc(s, c); break\r\n      case 8: tmp = (s, c) => s[key]; break\r\n      case 9: tmp = (s, c) => s[key] + constFunc(s, c); break\r\n      case 10: tmp = (s, c) => s[key] + dynamicFunc(s, c); break\r\n      default: tmp = (s, c) => s[key] + constFunc(s, c) + dynamicFunc(s, c); break\r\n    }\r\n    const func = tmp\r\n\r\n    if (debug) console.log(StatData[key]?.const ? \"Const\" : \"Dynamic\", key, constModifier, dynamicModifier, \"\" + Formulas[key])\r\n\r\n    if (!(key in Formulas))\r\n      stats[key] = stats[key] ?? StatData[key]?.default ?? 0\r\n\r\n    if (StatData[key]?.const) {\r\n      constData[key] = stats[key]\r\n      constData[key] = func(stats, constData)\r\n      stats[key] = constData[key]\r\n      if (dynamicModifier.length)\r\n        console.error(`Constant key ${key} depends on a dynamic modifer ${dynamicModifier}. The result will be incorrect.`)\r\n      return null\r\n    }\r\n\r\n    if (!(key in Formulas))\r\n      initialStats[key] = stats[key]\r\n\r\n    return [key, func]\r\n  }).filter((func) => func)\r\n\r\n  if (debug) console.log(initialStats, constData)\r\n\r\n  return {\r\n    initialStats,\r\n    formula: s => {\r\n      formulaList.forEach(([key, formula]) => s[key] = formula(s, constData))\r\n      // TODO: we shouldn't need to copy *all* constData, only ones that are targets.\r\n      Object.assign(s, constData)\r\n    }\r\n  }\r\n}\r\n\r\nexport {\r\n  Formulas,\r\n  StatData,\r\n  ElementToReactionKeys,\r\n  PreprocessFormulas,\r\n}\r\n","import { Formulas, StatData } from \"./StatData\"\r\n\r\n//generate a statKey dependency, to reduce build generation calculation on a single stat.\r\nfunction GetFormulaDependency(formula) {\r\n  const dependency = new Set()\r\n  formula(\r\n    new Proxy({}, { get: (target, prop, receiver) => { dependency.add(prop) } }),\r\n    new Proxy({}, { get: (target, prop, receiver) => { dependency.add(prop) } }))\r\n  return [...dependency]\r\n}\r\nconst formulaKeyDependency = Object.freeze(Object.fromEntries(\r\n  Object.keys(Formulas).map(key => [key, GetFormulaDependency(Formulas[key])])\r\n))\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  let statKeys = Object.keys(StatData)\r\n  Object.entries(formulaKeyDependency).forEach(([formulaKey, dependencies]) =>\r\n    dependencies.forEach(key =>\r\n      !statKeys.includes(key) &&\r\n        console.error(`Formula ${formulaKey} depends key ${key} that does not Exist in StatData.`))\r\n  )\r\n  Object.entries(formulaKeyDependency).forEach(([formulaKey, dependencies]) =>\r\n    StatData[formulaKey]?.const && dependencies.forEach(key => \r\n      !StatData[key]?.const &&\r\n        console.error(`Constant formula ${formulaKey} depends on dynamic key ${key}.`)\r\n    )\r\n  )\r\n}\r\n\r\nfunction GetDependencies(modifiers = {}, keys = Object.keys(StatData)) {\r\n  let dependencies = new Set()\r\n  keys.forEach(key => InsertDependencies(key, modifiers, dependencies))\r\n  return [...dependencies]\r\n}\r\nfunction InsertDependencies(key, modifiers, dependencies) {\r\n  if (dependencies.has(key)) return\r\n  formulaKeyDependency[key]?.forEach(k => InsertDependencies(k, modifiers, dependencies))\r\n  Object.keys(modifiers[key] ?? {}).forEach(k => InsertDependencies(k, modifiers, dependencies))\r\n  dependencies.add(key)\r\n}\r\n\r\n//if the optimizationTarget is in the form of {dmg:0.6}, it can be reduced to \"dmg\" for the purpose to build generation.\r\nconst reduceOptimizationTarget = (optimizationTarget) =>\r\n  (typeof optimizationTarget === \"object\" && Object.keys(optimizationTarget).length === 1 && typeof optimizationTarget[Object.keys(optimizationTarget)[0]] === \"number\") ? Object.keys(optimizationTarget)[0] : optimizationTarget\r\n\r\n\r\nexport {\r\n  GetFormulaDependency,\r\n  GetDependencies,\r\n  reduceOptimizationTarget,\r\n}\r\n","import { crawlObject, objPathValue } from './Util/Util';\r\nexport let CharacterFormulaImport = import('./Data/Characters/formula')\r\nCharacterFormulaImport.then(imp => {\r\n  addFormula(imp.default, \"character\")\r\n  CharacterFormulaImport = null\r\n})\r\nexport default class Formula {\r\n  constructor() { if (this instanceof Formula) throw Error('A static class cannot be instantiated.'); }\r\n  static formulas = {}\r\n  static get = (keys, defVal = null) => objPathValue(this.formulas, keys) ?? defVal\r\n}\r\n\r\nfunction addFormula(src, key) {\r\n  Formula.formulas[key] = src\r\n  crawlObject(src, [key], f => typeof f === \"function\", (formula, keys) => {\r\n    formula.keys = keys\r\n  })\r\n}\r\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import '../WorkerHack'\r\nimport { PreprocessFormulas } from \"../StatData\";\r\nimport { artifactSetPermutations, artifactPermutations, pruneArtifacts, calculateTotalBuildNumber } from \"./Build\"\r\nimport { GetDependencies } from '../StatDependency';\r\nimport Formula, { CharacterFormulaImport } from '../Formula';\r\n\r\nonmessage = async (e) => {\r\n  const t1 = performance.now()\r\n  const { splitArtifacts, setFilters, minFilters = {}, maxFilters = {}, initialStats: stats, artifactSetEffects, maxBuildsToShow, optimizationTarget, ascending, turbo = false } = e.data;\r\n\r\n  let target, targetKeys;\r\n  if (typeof optimizationTarget === \"string\") {\r\n    target = (stats) => stats[optimizationTarget]\r\n    targetKeys = [optimizationTarget]\r\n  } else {\r\n    await CharacterFormulaImport\r\n    const targetFormula = Formula.get(optimizationTarget)\r\n    if (typeof targetFormula === \"function\")\r\n      [target, targetKeys] = targetFormula(stats)\r\n    else {\r\n      postMessage({ progress: 0, timing: 0 })\r\n      postMessage({ builds: [], timing: 0 })\r\n      return\r\n    }\r\n    if (targetKeys.length === 1) {\r\n      // CAUTION: This optimization works only with monotonic dependencies\r\n      const key = targetKeys[0]\r\n      target = (stats) => stats[key]\r\n    }\r\n  }\r\n\r\n  const dependencies = GetDependencies(stats.modifiers, [...targetKeys, ...Object.keys(minFilters), ...Object.keys(maxFilters)])\r\n  const oldCount = calculateTotalBuildNumber(splitArtifacts, setFilters)\r\n\r\n  let prunedArtifacts = splitArtifacts, newCount = oldCount\r\n  if (turbo) {\r\n    // Prune artifact with strictly inferior (relevant) stats.\r\n    if (Object.keys(ascending ? minFilters : maxFilters).length === 0) {\r\n      const prune = (alwaysAccepted) => Object.fromEntries(Object.entries(splitArtifacts).map(([key, values]) =>\r\n        [key, pruneArtifacts(values, artifactSetEffects, new Set(dependencies), ascending, new Set(alwaysAccepted))]))\r\n\r\n      prunedArtifacts = prune([])\r\n      newCount = calculateTotalBuildNumber(prunedArtifacts, setFilters)\r\n\r\n      if (newCount < 1) {\r\n        // over-pruned, try not to prune the set-filter\r\n        prunedArtifacts = prune(setFilters.map(set => set.key))\r\n        newCount = calculateTotalBuildNumber(prunedArtifacts, setFilters)\r\n      }\r\n    }\r\n  }\r\n\r\n  let { initialStats, formula } = PreprocessFormulas(dependencies, stats)\r\n  let builds = [], threshold = -Infinity\r\n  let buildCount = 0, skipped = oldCount - newCount\r\n\r\n  const gc = () => {\r\n    builds.sort((a, b) => (b.buildFilterVal - a.buildFilterVal))\r\n    builds.splice(maxBuildsToShow)\r\n  }\r\n\r\n  const callback = (accu, stats) => {\r\n    if (!(++buildCount % 10000)) postMessage({ progress: buildCount, timing: performance.now() - t1, skipped })\r\n    formula(stats)\r\n    if (Object.entries(minFilters).some(([key, minimum]) => stats[key] < minimum)) return\r\n    if (Object.entries(maxFilters).some(([key, maximum]) => stats[key] > maximum)) return\r\n    let buildFilterVal = ascending ? -target(stats) : target(stats)\r\n    if (buildFilterVal >= threshold) {\r\n      builds.push({ buildFilterVal, artifacts: { ...accu } })\r\n      if (builds.length >= 1000) {\r\n        gc()\r\n        threshold = builds[builds.length - 1].buildFilterVal\r\n      }\r\n    }\r\n  }\r\n  for (const artifactsBySlot of artifactSetPermutations(prunedArtifacts, setFilters))\r\n    artifactPermutations(initialStats, artifactsBySlot, artifactSetEffects, callback)\r\n\r\n  gc()\r\n\r\n  // We present ONLY the top build on turbo. Many assumptions\r\n  // break when we need to consider #2 and beyond.\r\n  if (turbo) {\r\n    builds = [builds[0]];\r\n  }\r\n\r\n  let t2 = performance.now()\r\n  postMessage({ progress: buildCount, timing: t2 - t1, skipped })\r\n  postMessage({ builds, timing: t2 - t1, skipped })\r\n}\r\n"],"sourceRoot":""}