(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[17],{192:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l}));var n=a(12),c=(a(17),a(97)),r=(a(3),a(80));a(44),a(10);function i(e,t){return function(e,t){for(var a=new Set(t.map((function(e){return e.key}))),r={},i=Object.keys(e),s=0,l=i;s<l.length;s++){var o,u,j=l[s],d={},b=Object(c.a)(null!==(o=e[j])&&void 0!==o?o:[]);try{for(b.s();!(u=b.n()).done;){var h=u.value;a.has(h.setKey)?d[h.setKey]?d[h.setKey].push(h):d[h.setKey]=[h]:d.null?d.null.push(h):d.null=[h]}}catch(x){b.e(x)}finally{b.f()}r[j]=Object.freeze(d)}var O={},m={},f=[];return function e(a){if(a>=i.length){var s,l=Object(c.a)(t);try{for(l.s();!(s=l.n()).done;){var o,u=s.value,j=u.key,d=u.num;if((null!==(o=O[j])&&void 0!==o?o:0)<d)return}}catch(x){l.e(x)}finally{l.f()}f.push(Object(n.a)({},m))}else{var b=i[a],h=r[b];for(var v in h){var p;O[v]=(null!==(p=O[v])&&void 0!==p?p:0)+1,m[b]=h[v],e(a+1),O[v]-=1}}}(0),f}(e,t).reduce((function(e,t){return e+Object.entries(t).reduce((function(e,t){return e*t[1].length}),1)}),0)}function s(e,t,a){var n=t.hitMode,c=void 0===n?"":n,i=t.infusionAura,s=void 0===i?"":i,l=t.infusionSelf,o=void 0===l?"":l,u=t.reactionMode,j=void 0===u?null:u,d=t.characterEle,b=void 0===d?"anemo":d,h=t.weaponType,O=void 0===h?"sword":h;if(Object.keys(r.a).includes(e))return"".concat(e,"_elemental_").concat(c);if(a||"catalyst"!==O||(a=b),"elemental"===e||"burst"===e||"skill"===e||a)return j&&j.startsWith(a||b)?"".concat(j,"_").concat(e,"_").concat(c):"".concat(a||b,"_").concat(e,"_").concat(c);var m="physical";return o?m=o:s&&(m=s),j&&j.startsWith(m)?"".concat(j,"_").concat(e,"_").concat(c):"".concat(m,"_").concat(e,"_").concat(c)}function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Object.keys(r.a).includes(e))return e;var n=t.infusionAura,c=void 0===n?"":n,i=t.infusionSelf,s=void 0===i?"":i,l=t.reactionMode,o=void 0===l?null:l,u=t.characterEle,j=void 0===u?"anemo":u,d=t.weaponType,b=void 0===d?"sword":d;if(a||"catalyst"!==b||(a=j),"elemental"===e||"burst"===e||"skill"===e||a){if(o&&o.startsWith(a||j)){if(["pyro_vaporize","hydro_vaporize"].includes(o))return"vaporize";if(["pyro_melt","cryo_melt"].includes(o))return"melt"}return a||j}var h="physical";if(s?h=s:c&&(h=c),o&&o.startsWith(h)){if(["pyro_vaporize","hydro_vaporize"].includes(o))return"vaporize";if(["pyro_melt","cryo_melt"].includes(o))return"melt"}return h}},228:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(10);function c(e){var t=e%1e3,a=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:n,seconds:a,milliseconds:t}}function r(e){var t=c(e),a=t.hours,r=t.minutes,i=t.seconds,s="Minutes";return a&&(s="Hours"),"".concat(a?"".concat(a,":"):"").concat(Object(n.q)(r,"0",2),":").concat(Object(n.q)(i,"0",2)," ").concat(s)}function i(e){var t=c(e),a=t.hours,r=t.minutes,i=t.seconds,s=t.milliseconds,l="Minutes";return a&&(l="Hours"),"".concat(a?"".concat(a,":"):"").concat(Object(n.q)(r,"0",2),":").concat(Object(n.q)(i,"0",2),".").concat(Object(n.q)(s,"0",3)," ").concat(l)}},349:function(e,t,a){"use strict";var n=a(2),c=a(5),r=a(7),i=a.n(r),s=a(0),l=a.n(s),o=a(8),u=a(200),j=["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"],d=["isChild"],b=["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"];function h(e,t,a){var n=(e-t)/(a-t)*100;return Math.round(1e3*n)/1e3}function O(e,t){var a,r=e.min,s=e.now,o=e.max,u=e.label,d=e.srOnly,b=e.striped,O=e.animated,m=e.className,f=e.style,x=e.variant,v=e.bsPrefix,p=Object(c.a)(e,j);return l.a.createElement("div",Object(n.a)({ref:t},p,{role:"progressbar",className:i()(m,v+"-bar",(a={},a["bg-"+x]=x,a[v+"-bar-animated"]=O,a[v+"-bar-striped"]=O||b,a)),style:Object(n.a)({width:h(s,r,o)+"%"},f),"aria-valuenow":s,"aria-valuemin":r,"aria-valuemax":o}),d?l.a.createElement("span",{className:"sr-only"},u):u)}var m=l.a.forwardRef((function(e,t){var a=e.isChild,r=Object(c.a)(e,d);if(r.bsPrefix=Object(o.a)(r.bsPrefix,"progress"),a)return O(r,t);var j=r.min,h=r.now,m=r.max,f=r.label,x=r.srOnly,v=r.striped,p=r.animated,g=r.bsPrefix,y=r.variant,S=r.className,k=r.children,N=Object(c.a)(r,b);return l.a.createElement("div",Object(n.a)({ref:t},N,{className:i()(S,g)}),k?Object(u.a)(k,(function(e){return Object(s.cloneElement)(e,{isChild:!0})})):O({min:j,now:h,max:m,label:f,srOnly:x,striped:v,animated:p,bsPrefix:g,variant:y},t))}));m.displayName="ProgressBar",m.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1},t.a=m},521:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ue}));var n=a(111),c=a(97),r=a(41),i=a.n(r),s=a(57),l=a(3),o=a(17),u=a(12),j=a(53),d=a(9),b=a(0),h=a.n(b),O=a(83),m=a(268),f=a(175),x=a(60),v=a(31),p=a(27),g=a(56),y=a(155),S=a(199),k=a(221),N=a(218),w=a(522),C=a(512),A=a(133),B=a(225),K=a(181),M=a(349),E=a(45);function F(){return new Worker(a.p+"static/js/BuildWorker.e6654026.worker.js")}var T=a(68),D=a(110),I=a(271),P=a(115),z=a(194),_=a(270),q=a(276),L=a(273),H=a(112),V=a(226),W=a(207),R=a(197),G=a(214),U=a(193),J=a(43),X=a(69),Y=a(30),Q=a(14),Z=a(81),$=a(228),ee=a(10),te=a(116),ae=a(192),ne=a(272),ce=a(1),re=h.a.lazy((function(){return a.e(20).then(a.bind(null,520))})),ie=Object(b.lazy)((function(){return Promise.resolve().then(a.bind(null,220))})),se=1e7,le=[1,2,3,4,5,8,10],oe=["sands","goblet","circlet"];function ue(e){var t,a=e.location.characterKey,n=Object(b.useState)((function(){var e,t=(null!==(e=Object(ee.l)("BuildsDisplay.state"))&&void 0!==e?e:{}).characterKey;return null!==a&&void 0!==a?a:void 0===t?"":t})),r=Object(l.a)(n,2),h=r[0],C=r[1],A=Object(b.useState)([]),B=Object(l.a)(A,2),K=B[0],M=B[1],q=Object(b.useState)((function(){var e,t=(null!==(e=Object(ee.l)("BuildsDisplay.state"))&&void 0!==e?e:{}).maxBuildsToShow;return void 0===t?5:t})),L=Object(l.a)(q,2),R=L[0],U=L[1],$=Object(b.useState)(null),ie=Object(l.a)($,2),ue=ie[0],he=ie[1],ve=Object(b.useState)(!1),ge=Object(l.a)(ve,2),ye=ge[0],Se=ge[1],ke=Object(b.useState)(!1),Ne=Object(l.a)(ke,2),we=Ne[0],Ce=Ne[1],Ae=Object(b.useState)(!1),Be=Object(l.a)(Ae,2),Ke=Be[0],Me=Be[1],Ee=Object(b.useState)(0),Fe=Object(l.a)(Ee,2),Te=Fe[0],De=Fe[1],Ie=Object(b.useState)(0),Pe=Object(l.a)(Ie,2),ze=Pe[0],_e=Pe[1],qe=Object(b.useState)(0),Le=Object(l.a)(qe,2),He=Le[0],Ve=Le[1],We=Object(Z.a)(),Re=Object(l.a)(We,2),Ge=Re[0],Ue=Re[1],Je=Object(Z.b)(D.a.getAll(),[]),Xe=Object(Z.a)(),Ye=Object(l.a)(Xe,2),Qe=Ye[0],Ze=Ye[1],$e=Object(b.useRef)(!1),et=Object(b.useRef)(null),tt=Object(b.useState)({}),at=Object(l.a)(tt,2),nt=at[0],ct=nt.character,rt=nt.characterSheet,it=nt.weaponSheet,st=nt.initialStats,lt=nt.statsDisplayKeys,ot=at[1],ut=Object(b.useMemo)((function(){var e;return null!==(e=null===ct||void 0===ct?void 0:ct.buildSettings)&&void 0!==e?e:Object(ne.a)()}),[ct]);0===ut.setFilters.length&&(ut.setFilters=Object(ne.a)().setFilters);var jt=ut.setFilters,dt=ut.statFilters,bt=ut.mainStatKeys,ht=ut.optimizationTarget,Ot=ut.mainStatAssumptionLevel,mt=ut.useLockedArts,ft=ut.useEquippedArts,xt=ut.ascending,vt=Object(b.useCallback)((function(e){ct&&(ct.buildSettings=function(e,t){switch(t.type){case"mainStatKey":var a=t.index,n=t.mainStatKey;return e.mainStatKeys[a]=n,Object(u.a)(Object(u.a)({},e),{},{mainStatKeys:Object(o.a)(e.mainStatKeys)});case"setFilter":var c=t.index,r=t.key,i=t.num,s=void 0===i?0:i;return e.setFilters[c]={key:r,num:s},Object(u.a)(Object(u.a)({},e),{},{setFilters:Object(o.a)(e.setFilters)})}return Object(u.a)(Object(u.a)({},e),t)}(ut,e),J.a.updateChar(ct))}),[ct,ut]);Object(b.useEffect)((function(){return E.a.pageview("/build")}),[]);var pt=Object(b.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";h!==e&&(C(e),M([]),Ue(),ot({}))}),[Ue,C,h]);Object(b.useEffect)((function(){Object(s.a)(i.a.mark((function e(){var t,a,n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&Je){e.next=2;break}return e.abrupt("return");case 2:if(t=J.a._getChar(h)){e.next=5;break}return e.abrupt("return",pt(""));case 5:return e.next=7,H.b.get(h);case 7:return a=e.sent,e.next=10,te.a.get(t.weapon.key);case 10:if(n=e.sent,a&&n){e.next=13;break}return e.abrupt("return");case 13:c=z.a.createInitialStats(t,a,n),r=z.a.getDisplayStatKeys(c,{characterSheet:a,weaponSheet:n,artifactSheets:Je}),ot({character:t,characterSheet:a,weaponSheet:n,initialStats:c,statsDisplayKeys:r});case 16:case"end":return e.stop()}}),e)})))()}),[Ge,h,Je]),Object(b.useEffect)((function(){return J.a.followAnyArt(Ze)}),[Ze]),Object(b.useEffect)((function(){return h?J.a.followChar(h,Ue):void 0}),[h,Ue]),Object(b.useEffect)((function(){return function(){var e;return null===(e=et.current)||void 0===e?void 0:e.terminate()}}),[]),Object(b.useEffect)((function(){$e.current?Object(ee.p)("BuildsDisplay.state",{characterKey:h,maxBuildsToShow:R}):$e.current=!0}),[h,R]),Object(b.useEffect)((function(){if(lt&&Array.isArray(ht)){for(var e in lt){var t,a=lt[e],n=Object(c.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(JSON.stringify(r)===JSON.stringify(ht))return}}catch(i){n.e(i)}finally{n.f()}}vt({optimizationTarget:Object(ne.a)().optimizationTarget})}}),[ht,lt,vt]);var gt=Object(b.useMemo)((function(){if(!h)return{split:Object.fromEntries(Q.h.map((function(e){return[e,[]]}))),totBuildNumber:0};var e=J.a._getArts().filter((function(e){return e.location===h||!(e.lock&&!mt)&&!(e.location&&!ft)})),t=T.a.splitArtifactsBySlot(e);oe.forEach((function(e,a){var n;return bt[a]&&(t[e]=null===(n=t[e])||void 0===n?void 0:n.filter((function(e){return e.mainStatKey===bt[a]})))}));var a=Object(ae.a)(t,jt);return Qe&&{split:t,totBuildNumber:a}}),[h,mt,ft,bt,jt,Qe]),yt=gt.split,St=gt.totBuildNumber,kt=Object(b.useCallback)((function(){var e;if(st&&Je){M([]),Me(!0),_e(0),De(0),Ve(0),st.mainStatAssumptionLevel=Ot;var t=T.a.setEffectsObjs(Je,st),a=Object(ee.d)(yt);Object.values(a).forEach((function(e){e.forEach((function(e){var t;e.mainStatVal=null!==(t=T.a.mainStatValue(e.mainStatKey,e.numStars,Math.max(Math.min(Ot,4*e.numStars),e.level)))&&void 0!==t?t:0}))}));var n=Object.fromEntries(Object.entries(dt).map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1].min]})).filter((function(e){return"number"===typeof Object(l.a)(e,2)[1]}))),c=Object.fromEntries(Object.entries(dt).map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1].max]})).filter((function(e){return"number"===typeof Object(l.a)(e,2)[1]}))),r={splitArtifacts:a,initialStats:st,artifactSetEffects:t,setFilters:jt,minFilters:n,maxFilters:c,maxBuildsToShow:R,optimizationTarget:ht,ascending:xt};null===(e=et.current)||void 0===e||e.terminate(),et.current=new F,et.current.onmessage=function(e){var t;if("number"===typeof e.data.progress){var a=e.data,n=a.progress,c=a.timing,r=void 0===c?0:c,i=a.skipped,s=void 0===i?0:i;return De(n),_e(r),void Ve(s)}E.a.timing({category:"Build Generation",variable:"timing",value:e.data.timing,label:St.toString()});var l=e.data.builds.map((function(e){return z.a.calculateBuildwithArtifact(st,e.artifacts,Je)}));M(l),Me(!1),null===(t=et.current)||void 0===t||t.terminate(),et.current=null},et.current.postMessage(r)}}),[Je,yt,St,Ot,xt,st,R,ht,jt,dt]);Object(b.useEffect)((function(){St&&St<=100?kt():M([])}),[h,yt,St,ut,kt]);var Nt=Object(b.useCallback)((function(e,t){return Je&&D.a.setsWithMaxRarity(Je,e).map((function(e){var a,n,c=Object(l.a)(e,2),r=c[0],i=c[1];if(jt.some((function(e){return e.key===r})))return!1;var s=Object.keys(null!==(a=null===Je||void 0===Je||null===(n=Je[r])||void 0===n?void 0:n.setEffects)&&void 0!==a?a:{}),o=jt.reduce((function(e,a,n){return a.key&&n!==t?e+a.num:e}),0);return!s.every((function(e){return parseInt(e)+o>5}))&&Object(ce.jsx)(O.a.Item,{onClick:function(){var e;return vt({type:"setFilter",index:t,key:r,num:null!==(e=parseInt(s[0]))&&void 0!==e?e:0})},children:i.nameWithIcon},r)}))}),[jt,vt,Je]),wt=null!==(t=null===rt||void 0===rt?void 0:rt.name)&&void 0!==t?t:"Character Name",Ct=Object(b.useMemo)((function(){return Object(ce.jsxs)(m.a,{title:wt,disabled:Ke,children:[Object(ce.jsx)(O.a.Item,{onClick:function(){return pt("")},children:"Unselect Character"}),Object(ce.jsx)(O.a.Divider,{}),Object(ce.jsx)(W.a,{onSelect:function(e){return pt(e)}})]})}),[wt,Ke,pt]),At=Object(Z.b)(Array.isArray(ht)?X.a.get(ht):void 0,[ht]),Bt=Object(b.useMemo)((function(){if(!Array.isArray(ht))return Object(ce.jsxs)("b",{children:["Basic Stat: ",Object(ce.jsx)("span",{className:"text-".concat(Y.b.getStatVariant(ht)),children:Y.b.getStatNamePretty(ht)})]});if(!At)return null;var e,t=At.keys,a=Object(l.a)(t,3),n=a[0],c=a[2],r=At.field,i=z.a.getTalentFieldValue(r,"variant",st),s=z.a.getTalentFieldValue(r,"text",st);return"character"===n?("normal"!==c&&"charged"!==c&&"plunging"!==c||(c="auto"),Object(ce.jsxs)("b",{children:[null===rt||void 0===rt||null===(e=rt.getTalentOfKey(c,null===st||void 0===st?void 0:st.characterEle))||void 0===e?void 0:e.name,": ",Object(ce.jsx)("span",{className:"text-".concat(i),children:s})]})):"weapon"===n?Object(ce.jsxs)("b",{children:[null===it||void 0===it?void 0:it.name,": ",Object(ce.jsx)("span",{className:"text-".concat(i),children:s})]}):void 0}),[ht,At,st,rt,it]),Kt=jt.reduce((function(e,t){return t.key?e+t.num:e}),0),Mt=Object(b.useMemo)((function(){var e,t=0;return Object(ee.c)(null===st||void 0===st||null===(e=st.conditionalValues)||void 0===e?void 0:e.artifact,[],(function(e){return Array.isArray(e)}),(function(){return t++})),t}),[null===st||void 0===st?void 0:st.conditionalValues]),Et=Object(b.useCallback)((function(e){return J.a.updateChar(Object(u.a)(Object(u.a)({},ct),e))}),[ct]);return Object(ce.jsxs)(f.a,{className:"mt-2",children:[Object(ce.jsx)(G.a,{pageKey:"buildPage",modalTitle:"Character Management Page Guide",text:["For self-infused attacks, like Noelle's Sweeping Time, enable the skill in the talent page.","You can compare the difference between equipped artifacts and generated builds.","The more complex the formula, the longer the generation time."],children:Object(ce.jsx)(re,{})}),Object(ce.jsx)(de,{build:ue,showCharacterModal:we,characterKey:h,selectCharacter:pt,setmodalBuild:he,setshowCharacterModal:Ce}),!!st&&Object(ce.jsx)(be,{showArtCondModal:ye,setshowArtCondModal:Se,initialStats:st,characterDispatch:Et,artifactCondCount:Mt}),Object(ce.jsx)(x.a,{className:"mt-2 mb-2",children:Object(ce.jsx)(v.a,{children:Object(ce.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(ce.jsx)(p.a.Header,{children:"Build Generator"}),Object(ce.jsxs)(p.a.Body,{children:[Object(ce.jsxs)(x.a,{children:[Object(ce.jsxs)(v.a,{xs:12,lg:6,children:[h?Object(ce.jsx)(_.a,{header:Ct,characterKey:h,bg:"lightcontent",cardClassName:"mb-2",onEdit:Ke?void 0:function(){return Ce(!0)}}):Object(ce.jsx)(p.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:Object(ce.jsx)(p.a.Header,{children:Ct})}),rt&&ct&&st&&Object(ce.jsx)(Oe,{build:st,characterSheet:rt,className:"mb-2",character:ct}),Boolean(lt)&&Object(ce.jsx)(me,{className:"mb-2",statFilters:dt,statKeys:null===lt||void 0===lt?void 0:lt.basicKeys,setStatFilters:function(e){return vt({statFilters:e})}})]}),Object(ce.jsx)(v.a,{xs:12,lg:6,children:Object(ce.jsxs)(x.a,{children:[Object(ce.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ce.jsx)(p.a,{bg:"lightcontent",text:"lightfont",children:Object(ce.jsx)(p.a.Body,{children:Object(ce.jsx)(g.a,{className:"w-100",onClick:function(){return Se(!0)},disabled:Ke,children:Object(ce.jsxs)("span",{children:["Default Artifact Set Effects ",Boolean(Mt)&&Object(ce.jsxs)(y.a,{variant:"success",children:[Mt," Selected"]})]})})})})}),jt.map((function(e,t){var a,n,c,r,i,s=e.key,l=e.num;return Object(ce.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ce.jsxs)(p.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(ce.jsx)(p.a.Header,{children:Object(ce.jsxs)(S.a,{children:[Object(ce.jsxs)(m.a,{as:S.a,title:null!==(a=null===Je||void 0===Je||null===(n=Je[s])||void 0===n?void 0:n.nameWithIcon)&&void 0!==a?a:"Artifact Set Filter",disabled:Ke,children:[Object(ce.jsx)(O.a.Item,{onClick:function(){return vt({type:"setFilter",index:t,key:""})},children:"Unselect Artifact"}),Object(ce.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),Nt(5,t),Object(ce.jsx)(O.a.Divider,{}),Object(ce.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),Nt(4,t),Object(ce.jsx)(O.a.Divider,{}),Object(ce.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca"}),Nt(3,t)]}),Object(ce.jsx)(m.a,{as:S.a,title:"".concat(l,"-set"),disabled:Ke||!s||Kt>=5,children:!!st&&Object.keys(null!==(c=null===Je||void 0===Je||null===(r=Je[s])||void 0===r?void 0:r.setEffects)&&void 0!==c?c:{}).map((function(e){var a=jt.reduce((function(e,t){return t.key&&t.key!==s?e+t.num:e}),0);return parseInt(e)+a<=5&&Object(ce.jsx)(O.a.Item,{onClick:function(){return vt({type:"setFilter",index:t,key:jt[t].key,num:parseInt(e)})},children:"".concat(e,"-set")},e)}))})]})}),s?Object(ce.jsx)(p.a.Body,{children:Object(ce.jsx)(x.a,{className:"mb-n2",children:!!st&&Object.keys(null!==(i=null===Je||void 0===Je?void 0:Je[s].setEffects)&&void 0!==i?i:{}).map((function(e){return parseInt(e)})).filter((function(e){return e<=l})).map((function(e){return Object(ce.jsx)(I.a,{newBuild:void 0,setKey:s,setNumKey:e,equippedBuild:st,characterDispatch:Et,editable:!0},s+e)}))})}):null]})},t)})),Object(ce.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ce.jsx)(p.a,{bg:"lightcontent",text:"lightfont",children:Object(ce.jsxs)(p.a.Body,{className:"mb-n2",children:[Object(ce.jsx)(g.a,{className:"w-100 mb-2",onClick:function(){return vt({useEquippedArts:!ft})},disabled:Ke,children:Object(ce.jsxs)("span",{children:[Object(ce.jsx)(d.a,{icon:ft?j.c:j.r})," Use Equipped Artifacts"]})}),Object(ce.jsx)(g.a,{className:"w-100 mb-2",onClick:function(){return vt({useLockedArts:!mt})},disabled:Ke,children:Object(ce.jsxs)("span",{children:[Object(ce.jsx)(d.a,{icon:mt?j.c:j.r})," Use Locked Artifacts"]})})]})})}),Object(ce.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ce.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",children:[Object(ce.jsx)(p.a.Header,{children:Object(ce.jsxs)(x.a,{children:[Object(ce.jsx)(v.a,{children:"Artifact Main Stat"}),Object(ce.jsx)(v.a,{xs:"auto",children:Object(ce.jsx)(pe,{mainStatAssumptionLevel:Ot,setmainStatAssumptionLevel:function(e){return vt({mainStatAssumptionLevel:e})}})})]})}),Object(ce.jsx)(p.a.Body,{className:"mb-n2",children:oe.map((function(e,t){return Object(ce.jsxs)("div",{className:"text-inline mb-1 d-flex justify-content-between",children:[Object(ce.jsx)("h6",{className:"d-inline mb-0",children:Object(ce.jsx)(P.b,{slotKey:e})}),Object(ce.jsxs)(m.a,{disabled:Ke,size:"sm",title:bt[t]?Y.b.getStatNameWithPercent(bt[t]):"Select a mainstat",className:"d-inline",children:[Object(ce.jsx)(O.a.Item,{onClick:function(){return vt({type:"mainStatKey",index:t,mainStatKey:""})},children:"No MainStat"}),T.a.slotMainStats(e).map((function(e){return Object(ce.jsx)(O.a.Item,{onClick:function(){return vt({type:"mainStatKey",index:t,mainStatKey:e})},children:Y.b.getStatNameWithPercent(e)},e)}))]})]},e)}))})]})})]})})]}),Object(ce.jsxs)(x.a,{className:"d-flex justify-content-between mb-2",children:[Object(ce.jsx)(v.a,{xs:"auto",children:Object(ce.jsxs)(S.a,{children:[Object(ce.jsx)(g.a,{className:"h-100",disabled:!h||Ke,variant:h&&St<=se?"success":"warning",onClick:kt,children:Object(ce.jsx)("span",{children:"Generate"})}),Object(ce.jsxs)(O.a,{as:S.a,children:[Object(ce.jsx)(k.a,{overlay:Object(ce.jsx)(N.a,{id:"max-build-tooltip",children:"Decreasing the number of generated build will decrease build calculation time for large number of builds."}),children:Object(ce.jsxs)(O.a.Toggle,{children:[Object(ce.jsx)("b",{children:R})," ",1===R?"Build":"Builds"]})}),Object(ce.jsx)(O.a.Menu,{children:le.map((function(e){return Object(ce.jsxs)(O.a.Item,{onClick:function(){return U(e)},children:[e," ",1===e?"Build":"Builds"]},e)}))})]}),Object(ce.jsx)(g.a,{className:"h-100",disabled:!Ke,variant:"danger",onClick:function(){et.current&&(et.current.terminate(),et.current=null,Me(!1),M([]),_e(0),De(0),Ve(0))},children:Object(ce.jsx)("span",{children:"Cancel"})})]})}),Object(ce.jsx)(v.a,{xs:"auto",children:Object(ce.jsxs)(S.a,{children:[Object(ce.jsxs)(O.a,{as:S.a,drop:"up",children:[Object(ce.jsx)(O.a.Toggle,{disabled:Ke,variant:"light",children:Object(ce.jsxs)("span",{children:["Optimization Target: ",Bt]})}),Object(ce.jsx)(O.a.Menu,{align:"right",style:{minWidth:"40rem"},children:Object(ce.jsx)(x.a,{children:!!lt&&Object.entries(lt).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1],c=rt&&it&&Je?Object(V.a)(a,{characterSheet:rt,weaponSheet:it,artifactSheets:Je},null===st||void 0===st?void 0:st.characterEle):a;return Object(ce.jsxs)(v.a,{xs:12,md:6,children:[Object(ce.jsx)(O.a.Header,{style:{overflow:"hidden",textOverflow:"ellipsis"},children:Object(ce.jsx)("b",{children:c})}),n.map((function(e,t){return Array.isArray(e)?Object(ce.jsx)(je,{target:e,buildSettingsDispatch:vt,initialStats:st},t):"string"===typeof e?Object(ce.jsx)(O.a.Item,{onClick:function(){return vt({optimizationTarget:e})},children:Y.b.getStatNamePretty(e)},t):null}))]},a)}))})})]}),Object(ce.jsxs)(g.a,{onClick:function(){return vt({ascending:!ut.ascending})},disabled:Ke,variant:xt?"danger":"primary",children:[Object(ce.jsx)(d.a,{icon:xt?j.p:j.q,className:"fa-fw"}),Object(ce.jsx)("span",{children:xt?"Ascending":"Descending"})]})]})})]}),Object(ce.jsx)(x.a,{className:"",children:Object(ce.jsx)(v.a,{children:!!h&&Object(ce.jsx)(xe,{totBuildNumber:St,generatingBuilds:Ke,generationSkipped:He,generationProgress:Te,generationDuration:ze,characterName:wt,maxBuildsToShow:R})})})]})]})})}),Object(ce.jsx)(x.a,{className:"mb-2",children:Object(ce.jsx)(v.a,{children:Object(ce.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(ce.jsx)(p.a.Header,{children:Object(ce.jsx)(x.a,{children:Object(ce.jsx)(v.a,{children:h?Object(ce.jsxs)("span",{children:["Showing ",Object(ce.jsx)("b",{children:K.length})," Builds generated for ",wt]}):Object(ce.jsx)("span",{children:"Select a character to generate builds."})})})}),Object(ce.jsx)(w.a,{children:K.map((function(e,t){return t<R&&rt&&it&&Je&&Object(ce.jsx)(fe,{sheets:{characterSheet:rt,weaponSheet:it,artifactSheets:Je},build:e,characterKey:h,index:t,statsDisplayKeys:lt,onClick:function(){return he(e)}},t)}))})]})})})]})}function je(e){var t=e.target,a=e.buildSettingsDispatch,n=e.initialStats,c=Object(Z.b)(X.a.get(t),[t]);if(!c)return null;var r=c.field;return Object(ce.jsx)(O.a.Item,{onClick:function(){return a({optimizationTarget:t})},style:{overflow:"hidden",textOverflow:"ellipsis"},children:Object(ce.jsx)("span",{className:"text-".concat(z.a.getTalentFieldValue(r,"variant",n)),children:z.a.getTalentFieldValue(r,"text",n)})})}function de(e){var t=e.build,a=e.showCharacterModal,n=e.characterKey,c=e.selectCharacter,r=e.setmodalBuild,i=e.setshowCharacterModal,s=Object(b.useCallback)((function(){r(null),i(!1)}),[r,i]);return Object(ce.jsx)(C.a,{show:Boolean(a||t),onHide:s,size:"xl",contentClassName:"bg-transparent",children:Object(ce.jsx)(h.a.Suspense,{fallback:Object(ce.jsx)("span",{children:"Loading..."}),children:Object(ce.jsx)(ie,{character:void 0,tabName:void 0,characterKey:n,setCharacterKey:function(e){return c(e)},newBuild:t,onClose:s,editable:a,footer:Object(ce.jsx)(g.a,{variant:"danger",onClick:s,children:"Close"})})})})}function be(e){var t=e.showArtCondModal,a=e.setshowArtCondModal,n=e.initialStats,c=e.characterDispatch,r=e.artifactCondCount,i=Object(b.useCallback)((function(){return a(!1)}),[a]),s=Object(Z.b)(D.a.getAll(),[]);if(!s)return null;var o=Object.entries(D.a.setKeysByRarities(s)).reverse().flatMap((function(e){return Object(l.a)(e,2)[1]}));return Object(ce.jsx)(C.a,{show:t,onHide:i,size:"xl",contentClassName:"bg-transparent",children:Object(ce.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(ce.jsx)(p.a.Header,{children:Object(ce.jsxs)(x.a,{children:[Object(ce.jsx)(v.a,{children:Object(ce.jsxs)("h5",{children:["Default Artifact Set Effects  ",Boolean(r)&&Object(ce.jsxs)(y.a,{variant:"success",children:[r," Selected"]})]})}),Object(ce.jsx)(v.a,{xs:"auto",children:Object(ce.jsx)(g.a,{onClick:function(){n.conditionalValues.artifact&&(n.conditionalValues.artifact={}),c({conditionalValues:n.conditionalValues})},children:Object(ce.jsxs)("span",{children:[Object(ce.jsx)(d.a,{icon:j.x})," Reset All"]})})}),Object(ce.jsx)(v.a,{xs:"auto",children:Object(ce.jsx)(g.a,{variant:"danger",onClick:i,children:Object(ce.jsx)(d.a,{icon:j.t})})})]})}),Object(ce.jsx)(p.a.Body,{children:Object(ce.jsx)(x.a,{children:o.map((function(e){var t,a=s[e],r=Object.values(a.slotIcons)[0],i=a.rarity,l=i[0];return Object(ce.jsx)(v.a,{className:"mb-2",xs:12,lg:6,xl:4,children:Object(ce.jsxs)(p.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(ce.jsx)(p.a.Header,{children:Object(ce.jsxs)(x.a,{children:[Object(ce.jsx)(v.a,{xs:"auto",className:"ml-n3 my-n2",children:Object(ce.jsx)(A.a,{src:r,className:"thumb-mid grad-".concat(l,"star m-1"),thumbnail:!0})}),Object(ce.jsxs)(v.a,{children:[Object(ce.jsx)("h6",{children:Object(ce.jsx)("b",{children:null!==(t=null===s||void 0===s?void 0:s[e].name)&&void 0!==t?t:""})}),Object(ce.jsx)("span",{children:i.map((function(e,t){return Object(ce.jsxs)("span",{children:[e,Object(ce.jsx)(U.a,{stars:1})," ",t<i.length-1?"/ ":null]},e)}))})]})]})}),Object(ce.jsx)(p.a.Body,{children:Object(ce.jsx)(x.a,{className:"mb-n2",children:Boolean(e)&&Object.keys(a.setEffects).map((function(e){return parseInt(e)})).map((function(t){return Object(ce.jsx)(I.a,{newBuild:void 0,setKey:e,setNumKey:t,equippedBuild:n,editable:!0,characterDispatch:c},e+t)}))})})]})},e)}))})}),Object(ce.jsx)(p.a.Footer,{children:Object(ce.jsxs)(g.a,{variant:"danger",onClick:i,children:[Object(ce.jsx)(d.a,{icon:j.t})," CLOSE"]})})]})})}function he(e){var t=e.statKey,a=e.statKeys,n=void 0===a?[]:a,c=e.min,r=e.max,i=e.close,s=e.setFilter,l="%"===Y.b.getStatUnit(t),o={disabled:!t,allowEmpty:!0,float:l},b=Object(u.a)(Object(u.a)({},o),{},{placeholder:"MIN",value:c,onChange:function(e){return s(t,e,r)}}),h=Object(u.a)(Object(u.a)({},o),{},{placeholder:"MAX",value:r,onChange:function(e){return s(t,c,e)}});return Object(ce.jsxs)(B.a,{className:"mb-2",children:[Object(ce.jsx)(m.a,{as:B.a.Prepend,title:Y.b.getStatNamePretty(t,"New Stat"),id:"input-group-dropdown-1",children:n.map((function(e){return Object(ce.jsx)(O.a.Item,{onClick:function(){null===i||void 0===i||i(),s(e,c,r)},children:Y.b.getStatNamePretty(e)},e)}))}),Object(ce.jsx)(R.a,Object(u.a)({},b)),Object(ce.jsx)(R.a,Object(u.a)({},h)),Boolean(i)&&Object(ce.jsx)(B.a.Append,{children:Object(ce.jsx)(g.a,{variant:"danger",onClick:i,children:Object(ce.jsx)(d.a,{icon:j.v})})})]})}function Oe(e){var t=e.characterSheet,a=e.character,n=e.build,c=e.className,r=Object(b.useCallback)((function(e){var t=e.hitMode;return J.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{hitMode:t}))}),[a]),i=Object(b.useCallback)((function(e){var t=e.reactionMode;return J.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{reactionMode:t}))}),[a]),s=Object(b.useCallback)((function(e){var t=e.infusionAura;return J.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{infusionAura:t}))}),[a]);return a?Object(ce.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",className:c,children:[Object(ce.jsx)(p.a.Header,{children:Object(ce.jsxs)(x.a,{children:[Object(ce.jsx)(v.a,{children:"Hit Mode Options"}),Object(ce.jsx)(v.a,{xs:"auto",children:Object(ce.jsx)(q.b,{characterSheet:t,character:a,characterDispatch:s})})]})}),Object(ce.jsxs)(p.a.Body,{className:"mb-n2",children:[Object(ce.jsx)(q.a,{hitMode:a.hitMode,characterDispatch:r,className:"w-100 mb-2"}),Object(ce.jsx)(q.c,{build:n,character:a,characterDispatch:i,className:"w-100 mb-2"})]})]}):null}function me(e){var t=e.statKeys,a=void 0===t?[]:t,c=e.statFilters,r=void 0===c?{}:c,i=e.setStatFilters,s=e.className,o=a.filter((function(e){return!Object.keys(r).some((function(t){return t===e}))})),j=function(e,t,a){return i(Object(u.a)(Object(u.a)({},r),{},Object(n.a)({},e,{min:t,max:a})))};return Object(ce.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",className:s,children:[Object(ce.jsx)(p.a.Header,{children:"Final Stat Filter"}),Object(ce.jsx)(p.a.Body,{children:Object(ce.jsxs)(x.a,{className:"mb-n2",children:[Object.entries(r).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1],c=n.min,s=n.max;return Object(ce.jsx)(v.a,{xs:12,children:Object(ce.jsx)(he,{statKey:a,statKeys:o,setFilter:j,min:c,max:s,close:function(){delete r[a],i(Object(u.a)({},r))}})},a)})),Object(ce.jsx)(v.a,{xs:12,children:Object(ce.jsx)(he,{min:void 0,max:void 0,close:void 0,statKeys:o,setFilter:j})})]})})]})}function fe(e){var t=e.sheets,a=e.sheets.artifactSheets,n=e.index,c=e.characterKey,r=e.build,i=e.statsDisplayKeys,s=e.onClick,o=J.a._getChar(c);if(!o)return null;var u=o.equippedArtifacts,j=Q.h.every((function(e){var t;return u[e]===(null===(t=r.equippedArtifacts)||void 0===t?void 0:t[e])}));return Object(ce.jsx)("div",{children:Object(ce.jsxs)(w.a.Item,{variant:n%2?"customdark":"customdarker",className:"text-white",action:!0,onClick:s,children:[Object(ce.jsx)("h5",{className:"mb-2",children:Object(ce.jsxs)(x.a,{children:[Object(ce.jsx)(v.a,{xs:"auto",children:Object(ce.jsx)(y.a,{variant:"info",children:Object(ce.jsxs)("strong",{children:[n+1,j?" (Equipped)":""]})})}),Object(ce.jsx)(v.a,{xs:"auto",children:Object.entries(r.setToSlots).sort((function(e,t){var a=Object(l.a)(e,2),n=(a[0],a[1]),c=Object(l.a)(t,2);c[0];return c[1].length-n.length})).map((function(e){var t,n=Object(l.a)(e,2),c=n[0],r=n[1];return Object(ce.jsxs)(y.a,{variant:j?"success":"primary",className:"mr-2",children:[r.map((function(e){return Object(P.a)(e)}))," ",null!==(t=null===a||void 0===a?void 0:a[c].name)&&void 0!==t?t:""]},c)}))})]})}),Object(ce.jsx)(L.a,{editable:!1,sheets:t,character:o,newBuild:r,statsDisplayKeys:i,cardbg:n%2?"lightcontent":"darkcontent"})]})})}function xe(e){var t,a,n,c,r=e.totBuildNumber,i=e.generatingBuilds,s=e.generationSkipped,l=e.generationProgress,o=e.generationDuration,u=e.characterName,j=e.maxBuildsToShow,d=null!==(t=null===r||void 0===r?void 0:r.toLocaleString())&&void 0!==t?t:r,b=r-s,h=null!==(a=null===l||void 0===l?void 0:l.toLocaleString())&&void 0!==a?a:l,O=null!==(n=null===s||void 0===s?void 0:s.toLocaleString())&&void 0!==n?n:s,m=null!==(c=null===b||void 0===b?void 0:b.toLocaleString())&&void 0!==c?c:b,f=Boolean(s)&&Object(ce.jsxs)("span",{children:["(",Object(ce.jsx)("b",{children:O})," skipped)"]});if(i){var x=100*l/b;return Object(ce.jsxs)(K.a,{variant:"success",children:[Object(ce.jsxs)("span",{children:["Generating and testing ",Object(ce.jsxs)("b",{className:"text-monospace",children:[h,"/",m]})," build configurations against the criteria for ",Object(ce.jsx)("b",{children:u}),". ",f]}),Object(ce.jsx)("br",{}),Object(ce.jsxs)("h6",{children:["Time elapsed: ",Object(ce.jsx)("strong",{className:"text-monospace",children:Object($.b)(o)})]}),Object(ce.jsx)(M.a,{now:x,label:"".concat(x.toFixed(1),"%")})]})}return!i&&l?Object(ce.jsxs)(K.a,{variant:"success",children:[Object(ce.jsxs)("span",{children:["Generated and tested ",Object(ce.jsx)("b",{className:"text-monospace",children:m})," Build configurations against the criteria for ",Object(ce.jsx)("b",{children:u}),". ",f]}),Object(ce.jsxs)("h6",{children:["Total duration: ",Object(ce.jsx)("strong",{className:"text-monospace",children:Object($.b)(o)})]}),Object(ce.jsx)(M.a,{now:100,variant:"success",label:"100%"})]}):0===r?Object(ce.jsx)(K.a,{variant:"warning",className:"mb-0",children:Object(ce.jsxs)("span",{children:["Current configuration will not generate any builds for ",Object(ce.jsx)("b",{children:u}),". Please change your Artifact configurations, or add/unlock more Artifacts."]})}):r>se?Object(ce.jsx)(K.a,{variant:"warning",className:"mb-0",children:Object(ce.jsxs)("span",{children:["Current configuration will generate ",Object(ce.jsx)("b",{children:d})," builds for ",Object(ce.jsx)("b",{children:u}),". This might take quite a while to generate..."]})}):Object(ce.jsx)(K.a,{variant:"success",className:"mb-0",children:Object(ce.jsxs)("span",{children:["Current configuration ",r<=j?"generated":"will generate"," ",Object(ce.jsx)("b",{children:d})," builds for ",Object(ce.jsx)("b",{children:u}),"."]})})}var ve={0:Object(ce.jsx)("span",{children:"No level assumption"}),4:Object(ce.jsx)("span",{children:"Assume at least level 4"}),8:Object(ce.jsx)("span",{children:"Assume at least level 8"}),12:Object(ce.jsx)("span",{children:"Assume at least level 12"}),16:Object(ce.jsx)("span",{children:"Assume at least level 16"}),20:Object(ce.jsx)("span",{children:"Assume at least level 20"})};function pe(e){var t=e.mainStatAssumptionLevel,a=void 0===t?0:t,n=e.setmainStatAssumptionLevel;return Object(ce.jsx)(k.a,{overlay:Object(ce.jsx)(N.a,{id:"assume-level-tooltip",children:"Change Main Stat value to be at least a specific level. Does not change substats."}),children:Object(ce.jsxs)(O.a,{children:[Object(ce.jsx)(O.a.Toggle,{variant:a?"orange":"primary",children:ve[a]}),Object(ce.jsx)(O.a.Menu,{children:Object.entries(ve).map((function(e){var t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(ce.jsx)(O.a.Item,{onClick:function(){return n(parseInt(a))},children:c},a)}))})]})})}}}]);
//# sourceMappingURL=17.cba3ff13.chunk.js.map