(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[20],{214:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n(3),a=n(190),c=n(60),o=n(15),i=n(1);function s(e,t){var n=t.characterSheet,c=t.weaponSheet,o=t.artifactSheets,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"anemo";if("basicKeys"===e)return"Basic Stats";if("genericAvgHit"===e)return"Generic Optimization Values";if("transReactions"===e)return"Transformation Reaction";if(e.startsWith("talentKey_")){var l,u,d=e.split("talentKey_")[1];return null!==(l=null===n||void 0===n||null===(u=n.getTalentOfKey(d,s))||void 0===u?void 0:u.name)&&void 0!==l?l:d}if(e.startsWith("weapon_")){var f,v=e.split("weapon_")[1];return null!==(f=null===c||void 0===c?void 0:c.name)&&void 0!==f?f:v}if(e.startsWith("artifact_")){var h,b=e.split("_"),p=Object(r.a)(b,3),y=p[1],j=p[2];return Object(i.jsxs)("span",{children:[null===(h=o[y])||void 0===h?void 0:h.name," ",Object(i.jsxs)(a.a,{variant:"success",children:[j,"-Set"]})]})}return""}function l(e){return{key:e,level:1,ascension:0,hitMode:"avgHit",reactionMode:null,equippedArtifacts:Object.fromEntries(o.h.map((function(e){return[e,""]}))),equippedWeapon:"",conditionalValues:{},baseStatOverrides:{},buildSettings:Object(c.a)(),talent:{auto:1,skill:1,burst:1},infusionAura:"",constellation:0}}},547:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Se}));var r=n(3),a=n(192),c=n(2),o=n(5),i=n(0),s=n.n(i),l=n(6),u=n.n(l),d=n(148),f=n(62),v=n(23),h=n(8),b=n(140),p=s.a.createContext({onClose:function(){}}),y=["bsPrefix","closeLabel","closeButton","className","children"],j=s.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.closeLabel,a=e.closeButton,l=e.className,d=e.children,f=Object(o.a)(e,y);n=Object(h.a)(n,"toast-header");var j=Object(i.useContext)(p),m=Object(v.a)((function(e){j&&j.onClose&&j.onClose(e)}));return s.a.createElement("div",Object(c.a)({ref:t},f,{className:u()(n,l)}),d,a&&s.a.createElement(b.a,{label:r,onClick:m,className:"ml-2 mb-1","data-dismiss":"toast"}))}));j.displayName="ToastHeader",j.defaultProps={closeLabel:"Close",closeButton:!0};var m=j,O=n(21),g=Object(O.a)("toast-body"),w=["bsPrefix","className","children","transition","show","animation","delay","autohide","onClose"],k=s.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.children,l=e.transition,v=void 0===l?f.a:l,b=e.show,y=void 0===b||b,j=e.animation,m=void 0===j||j,O=e.delay,g=void 0===O?3e3:O,k=e.autohide,_=void 0!==k&&k,x=e.onClose,S=Object(o.a)(e,w);n=Object(h.a)(n,"toast");var C=Object(i.useRef)(g),K=Object(i.useRef)(x);Object(i.useEffect)((function(){C.current=g,K.current=x}),[g,x]);var E=Object(d.a)(),L=!(!_||!y),A=Object(i.useCallback)((function(){L&&(null==K.current||K.current())}),[L]);Object(i.useEffect)((function(){E.set(A,C.current)}),[E,A]);var N=Object(i.useMemo)((function(){return{onClose:x}}),[x]),R=!(!v||!m),V=s.a.createElement("div",Object(c.a)({},S,{ref:t,className:u()(n,r,!R&&(y?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}),a);return s.a.createElement(p.Provider,{value:N},R&&v?s.a.createElement(v,{in:y,unmountOnExit:!0},V):V)}));k.displayName="Toast";var _=Object.assign(k,{Body:g,Header:m}),x=n(189),S=n(227),C=n(127),K=n(202),E=(n(201),n(19)),L=n(272),A=(n(230),n(17)),N=n(35),R=n(28),V=n(20),M=n(26);function T(e,t){var n=new U(e),r=P(n,t,null);return n.end(),r}function I(e,t,n){try{switch(t.encode&&(e=t.encode(e)),t.type){case"uint":return function(e,t){var n=D(e,t.length);return t.length?n:W(n.length)+n}(e,t);case"string":return function(e,t){if(!e.match(/^[a-z0-9\-_]*$/i))throw new Error("Cannot encode string ".concat(e,": not alphanumeric or -_"));return W(e.length)+e}(e);case"array":return function(e,t){var n=t.schemas,r=void 0===n?[]:n,a=t.defaultSchema;return W(e.length)+e.map((function(e,t){var n;return I(e,null!==(n=r[t])&&void 0!==n?n:a,t)})).join("")}(e,t);case"object":return function(e,t){var n=t.schemas,a=void 0===n?[]:n;return Object.entries(a).map((function(t){var n=Object(r.a)(t,2),a=n[0],c=n[1];return I(a in e?e[a]:c.default,c,a)})).join("")}(e,t);case"sparse":return function(e,t){var n=t.keySchema,a=t.keys,c=t.valueSchema,o=Object.entries(e).filter((function(e){var t,n=Object(r.a)(e,1)[0];return null===(t=null===a||void 0===a?void 0:a.includes(n))||void 0===t||t}));return W(o.length)+o.map((function(e){var t=Object(r.a)(e,2),a=t[0],o=t[1];return I(a,n,a)+I(o,c,a)})).join("")}(e,t);default:throw new Error("Unsupported schema type ".concat(t.type," on array"))}}catch(c){var a;throw c.path=null!==(a=c.path)&&void 0!==a?a:[],c.path.push(n),c}}function P(e,t,n){try{var a;switch(t.type){case"uint":a=function(e,t){var n=t.length||B(e);return z(e.take(n))}(e,t);break;case"string":a=function(e,t){var n=e.take(B(e));if(!n.match(/^[a-z0-9\-_]*$/i))throw new Error("Cannot decode string ".concat(n,": not alphanumeric or -_"));return n}(e);break;case"array":a=function(e,t){var n=t.schemas,r=void 0===n?[]:n,a=t.defaultSchema,c=B(e);return Object(A.a)(new Array(c)).map((function(t,n){var c;return P(e,null!==(c=r[n])&&void 0!==c?c:a,n)}))}(e,t);break;case"object":a=function(e,t){var n=t.schemas,a=void 0===n?[]:n;return Object.fromEntries(Object.entries(a).map((function(t){var n=Object(r.a)(t,2),a=n[0],c=n[1];return[a,P(e,c,a)]})))}(e,t);break;case"sparse":a=function(e,t){var n=t.keys,a=t.keySchema,c=t.valueSchema,o=B(e);return Object.fromEntries(Object(A.a)(new Array(o)).map((function(){var t=P(e,a,null);return[t,P(e,c,t)]})).filter((function(e){var t,a=Object(r.a)(e,1)[0];return null===(t=null===n||void 0===n?void 0:n.includes(a))||void 0===t||t})))}(e,t);break;default:throw new Error("Unsupported schema type ".concat(t.type," on array"))}return t.decode?t.decode(a):a}catch(o){var c;throw o.path=null!==(c=o.path)&&void 0!==c?c:[],o.path.push(n),o}}function W(e){if(e>=32)throw new Error("Length (".concat(e,") too large"));return D(e,1)}function B(e){var t=z(e.take(1));if(t>=32)throw new Error("Length (".concat(t,") too large"));return t}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e<0)throw new Error("Cannot encode negative number ".concat(e));for(var n="";e>0;){var r=e%64;e=Math.floor(e/64),r<10?n+=String.fromCharCode(r+48-0):r<36?n+=String.fromCharCode(r+97-10):r<62?n+=String.fromCharCode(r+65-36):62===r?n+="-":63===r&&(n+="_")}if(!t)return n;if(n.length>t)throw new Error("Cannot encode uint ".concat(e,": value too large"));return n.padEnd(t,"0")}function z(e){for(var t=0,n=1,r=0;r<e.length;r++){var a=e.charCodeAt(r);if(48<=a&&a<58)t+=n*(a-48+0);else if(97<=a&&a<123)t+=n*(a-97+10);else if(65<=a&&a<91)t+=n*(a-65+36);else if("-"===e[r])t+=62*n;else{if("_"!==e[r])throw new Error('Cannot parse UInt from "'.concat(e,'", which contains "').concat(String.fromCharCode(a),'"'));t+=63*n}n*=64}return t}var U=function(){function e(t){Object(V.a)(this,e),this.string=void 0,this.offset=void 0,this.string=t,this.offset=0}return Object(M.a)(e,[{key:"take",value:function(e){if(this.offset+e>this.string.length)throw new Error("Cannot take ".concat(e," items from ").concat(this.string.slice(this.offset)));var t=this.string.slice(this.offset,this.offset+e);return this.offset+=e,t}},{key:"end",value:function(){if(this.string.length!==this.offset)throw new Error("Unused string ".concat(this.string.slice(this.offset)))}}]),e}(),H=n(13),q=n(9),G=n(41),F=n(15),J=n(12),$=["","hp","hp_","atk","atk_","def","def_","eleMas","enerRech_","critRate_","critDMG_","heal_","physical_dmg_","anemo_dmg_","cryo_dmg_","dendro_dmg_","electro_dmg_","geo_dmg_","hydro_dmg_","pyro_dmg_"],Q=function(e){return{type:"uint",length:e}},X={type:"string",encode:function(e){return e.toString().replace(/\./g,"_")},decode:function(e){return parseFloat(e.replace(/_/g,"."))}},Y={type:"string"},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(q.a)({type:"array",defaultSchema:e},t)},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(q.a)({type:"object",schemas:e},t)},te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"sparse",keys:n,keySchema:e,valueSchema:t}},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{type:"uint",length:n,encode:function(t){return e.indexOf(t)+1},decode:function(n){var r;return null!==(r=e[n-1])&&void 0!==r?r:t}}},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:"uint",length:t,encode:function(t){return e.indexOf(t)},decode:function(t){return e[t]}}},ae=re($),ce=re(F.b),oe=re(F.h),ie=re(F.c),se=re(F.e),le=re([null].concat(Object(A.a)(F.g))),ue=ne(F.d,""),de=ee({key:ae,value:Q(2)},{encode:function(e){var t=e.key,n=e.value,r=t.endsWith("_")?10:1;return{key:t,value:n*r}},decode:function(e){var t=e.key,n=e.value,r=t.endsWith("_")?10:1;return{key:t,value:n/r}}}),fe=Z(ee({path:Z(Y),value:Z(Y)}),{encode:function(e){var t=[];return Object(J.c)(e,[],(function(e){return Array.isArray(e)}),(function(e,n){t.push({path:n,value:e.map((function(e){return e.toString()}))})})),t.filter((function(e){var t=e.path;switch(t[0]){case"character":t[0]="c",t[1]=D(F.c.indexOf(t[1]));break;case"weapon":t[0]="w";break;case"artifact":t[0]="a",t[1]=D(F.b.indexOf(t[1]));break;default:return!1}return!0})),t},decode:function(e){var t,n={weapon:{},artifact:{},character:{}},r=Object(H.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,c=a.path,o=a.value;switch(c[0]){case"c":c[0]="character",c[1]=F.c[z(c[1])];break;case"w":c[0]="weapon";break;case"a":c[0]="artifact",c[1]=F.b[z(c[1])];break;default:continue}var i,s=c.pop(),l=n,u=Object(H.a)(c);try{for(u.s();!(i=u.n()).done;){var d,f=i.value,v=null!==(d=l[f])&&void 0!==d?d:{};l[f]=v,l=v}}catch(h){u.e(h)}finally{u.f()}o[0]=parseFloat(o[0]),l[s]=o}}catch(h){r.e(h)}finally{r.f()}return n}}),ve=ee({setKey:ce,numStars:Q(1),level:Q(2),mainStatKey:ae,slotKey:oe,substats:Z(de)},{decode:function(e){return e.id="",e.lock=!1,e}}),he=ee({key:Y,levelKey:Y,refineIndex:Q(1),overrideMainVal:X,overrideSubVal:X},{decode:function(e){var t=e.levelKey;delete e.levelKey,delete e.overrideMainVal,delete e.overrideSubVal;var n=t.split("L"),a=Object(r.a)(n,2)[1],c=parseInt(a),o=G.b.findIndex((function(e){return c<=e})),i=a.includes("A");return c<0||c>90||o<0?(e.level=1,e.ascension=0):(e.level=c,e.ascension=o+(i?1:0)),e}}),be=ee({characterKey:ie,hitMode:se,reactionMode:le,constellation:Q(1),overrideLevel:Q(2),levelKey:Y,infusionAura:ue,talentLevelKeys:ee({auto:Q(1),skill:Q(1),burst:Q(1)}),baseStatOverrides:te(Y,X),weapon:he,conditionalValues:fe,reserved:Z(Q(1))},{decode:function(e){var t,n="A"===e.levelKey.slice(-1),r=n?e.levelKey.slice(1,-1):e.levelKey.slice(1);switch(e.level=parseInt(r),e.level){case 1:case 20:e.ascension=0;break;case 40:e.ascension=1;break;case 50:e.ascension=2;break;case 60:e.ascension=3;break;case 70:e.ascension=4;break;case 80:e.ascension=5;break;case 90:e.ascension=6}(n&&(e.ascension+=1),e.baseStatOverrides.characterLevel&&(e.level=e.baseStatOverrides.characterLevel,delete e.baseStatOverrides.characterLevel),e.baseStatOverrides.weaponLevel&&(e.weapon.level=e.baseStatOverrides.weaponLevel,delete e.baseStatOverrides.weaponLevel),e.overrideLevel&&(e.level=e.overrideLevel),delete e.overrideLevel,delete e.levelKey,"Traveler"===e.characterKey)&&(e.elementKey=null!==(t=F.d[e.reserved[0]-1])&&void 0!==t?t:"anemo");return delete e.reserved,e}}),pe=ee({artifacts:Z(ve),character:be}),ye=ee({setKey:ce,level:Q(2),mainStatKey:ae,substats:Z(de),location:ne(F.c),raritySlotKey:Q(1)},{encode:function(e){return e.raritySlotKey=8*F.h.indexOf(e.slotKey)+e.rarity,e},decode:function(e){return e.rarity=e.raritySlotKey%8,e.slotKey=F.h[(e.raritySlotKey-e.rarity)/8],e}}),je=ee({key:Y,location:ne(F.c),ascensionRefine:Q(1),levelDiff:Q(1)},{encode:function(e){return e.ascensionRefine=8*e.ascension+e.refine,e.levelDiff=G.b[e.ascension]-e.level,e},decode:function(e){return e.refine=e.ascensionRefine%8,e.ascension=(e.ascensionRefine-e.refine)/8,e.level=G.b[e.ascension]-e.levelDiff,e}}),me=ee({key:ie,hitMode:se,reactionMode:le,conditionalValues:fe,baseStatOverrides:te(Y,X),talent:ee({auto:Q(1),skill:Q(1),burst:Q(1)}),infusionAura:ue,levelDiff:Q(1),ascensionConstellation:Q(1),reserved:Z(Q(1))},{encode:function(e){return e.levelDiff=G.b[e.ascension]-e.level,e.ascensionConstellation=8*e.ascension+e.constellation,"Traveler"!==e.characterKey?e.reserved=[]:e.reserved=[F.d.indexOf(e.elementKey)],e},decode:function(e){var t;return e.constellation=e.ascensionConstellation%8,e.ascension=(e.ascensionConstellation-e.constellation)/8,e.level=G.b[e.ascension]-e.levelDiff,"Traveler"===e.characterKey&&(e.elementKey=null!==(t=F.d[e.reserved[0]])&&void 0!==t?t:"anemo"),e}}),Oe={flexV2:pe,flexV3:ee({characters:Z(me),artifacts:Z(ye),weapons:Z(je)})};[null].concat(Object(A.a)(F.g));function ge(e,t){var n=t._getChar(e);if(!n)return null;var r=t._getWeapon(n.equippedWeapon),a=Object.values(n.equippedArtifacts).filter((function(e){return e})).map((function(e){return t._getArt(e)}));try{return"v=3&d="+I({characters:[n],weapons:[r],artifacts:a},Oe.flexV3,null)}catch(c){return null}}function we(e){var t=Object.fromEntries(e.split("&").map((function(e){return e.split("=")})));try{switch(parseInt(t.v)){case 2:return[].concat(Object(A.a)(function(e){var t=T(e,Oe.flexV2),n=t.character,r=t.artifacts,a=n.characterKey,c=a.toLowerCase();n.characterKey=c;var o=new R.a;o.setString("db_ver","7"),o.set("char_".concat(c),n),r.forEach((function(e,t){e.location=c,o.set("artifact_".concat(t+1),e)}));var i=new N.a(o);if(!i._getChar(a))throw new Error("Invalid flex object");return[i,a]}(t.d)),[2]);case 3:return[].concat(Object(A.a)(function(e){var t=T(e,Oe.flexV3),n=t.characters,r=t.artifacts,a=t.weapons,c=n[0].key,o=new R.a;o.setString("db_ver","8"),n.forEach((function(e){return o.set("char_".concat(e.key),e)})),r.forEach((function(e,t){return o.set("artifact_".concat(t),e)})),a.forEach((function(e,t){return o.set("weapon_".concat(t),e)}));var i=new N.a(o);if(!i._getChar(c))throw new Error("Invalid flex object");return[i,c]}(t.d)),[3]);default:return}}catch(n){return void 0}}var ke=n(10),_e=n(25),xe=n(1);function Se(){var e=Object(E.h)(),t=Object(i.useContext)(N.b),n=e.search;if(n){var a=we(n.substring(1));if(!a)return Object(xe.jsx)(E.a,{to:"/"});var c=Object(r.a)(a,3),o=c[0],s=c[1];return 3!==c[2]?Object(xe.jsx)(E.a,{to:"/flex?".concat(ge(s,o))}):Object(xe.jsx)(N.b.Provider,{value:o,children:Object(xe.jsx)(Ce,{characterKey:s})})}var l=e.characterKey;if(!l)return Object(xe.jsx)(E.a,{to:"/"});var u=ge(l,t);return u?(window.scrollTo(0,0),Object(xe.jsx)(E.a,{to:"/flex?".concat(u)})):Object(xe.jsx)(E.a,{to:"/"})}function Ce(e){var t=e.characterKey,n=Object(i.useState)(!1),c=Object(r.a)(n,2),o=c[0],s=c[1],l=window.location.href;return Object(xe.jsxs)(a.a,{className:"my-2",children:[Object(xe.jsxs)(_,{onClose:function(){return s(!1)},show:o,delay:3e3,autohide:!0,style:{position:"absolute",top:50,right:50},children:[Object(xe.jsx)(_.Header,{children:Object(xe.jsx)("b",{className:"mr-auto",children:"Genshin Optimizer"})}),Object(xe.jsx)(_.Body,{children:"URL copied to clipboard."})]}),Object(xe.jsx)(x.a,{bg:"darkcontent",text:"lightfont",className:"mb-2",children:Object(xe.jsxs)(x.a.Body,{className:"p-2",children:[Object(xe.jsxs)(S.a,{className:"mb-0",children:[Object(xe.jsx)(S.a.Prepend,{children:Object(xe.jsx)(C.a,{onClick:function(){navigator.clipboard.writeText(l).then((function(){return s(!0)})).catch(console.error)},children:Object(xe.jsxs)("span",{children:[Object(xe.jsx)(ke.a,{icon:_e.r})," Copy URL to clipboard"]})})}),Object(xe.jsx)(K.a.Control,{readOnly:!0,value:window.location.href,onClick:function(e){return e.target.select()}})]}),!1]})}),Object(xe.jsx)(L.default,{characterKey:t})]})}}}]);
//# sourceMappingURL=20.ab56033f.chunk.js.map