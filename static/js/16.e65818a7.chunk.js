(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[16],{202:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(12),r=n(29),c=n(10),i=n(1),o=function(){return Object(i.jsx)(c.a,{icon:r.C})},s=function(e){var t=e.stars,n=e.colored,r=void 0!==n&&n;return Object(i.jsx)("span",{className:r?"text-5star":"",children:t?Object(a.a)(Array(t).keys()).map((function(e,t){return Object(i.jsx)(o,{},t)})):null})}},203:function(e,t,n){"use strict";var a={weaponTypes:{bow:n.p+"static/media/Weapon-class-bow-icon.b8e7b5ca.png",catalyst:n.p+"static/media/Weapon-class-catalyst-icon.2cbef800.png",claymore:n.p+"static/media/Weapon-class-claymore-icon.17418b20.png",polearm:n.p+"static/media/Weapon-class-polearm-icon.a4e7fffc.png",sword:n.p+"static/media/Weapon-class-sword-icon.4470b487.png"},resin:{fragile:n.p+"static/media/Item_Fragile_Resin.f9ec8223.png",condensed:n.p+"static/media/Item_Condensed_Resin.1cecf64a.png"},exp_books:{advice:n.p+"static/media/Item_Wanderer's_Advice.58c62cf7.png",wit:n.p+"static/media/Item_Hero's_Wit.a79e36d0.png",experience:n.p+"static/media/Item_Adventurer's_Experience.92b5d195.png"}};t.a=a},204:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(124),r=n(67),c=n(8),i=n(2),o=n(19),s=n(68),l=n(112),u=n(100),d=n(39),f=n(53),v=n(40),h=n(210),b=n(36),j=n(11),p=n(119),O=function e(){if(Object(o.a)(this,e),this instanceof e)throw Error("A static class cannot be instantiated.")};O.getElementalName=function(e){return f.a[e].name},O.getLevelString=function(e){return"".concat(e.level,"/").concat(d.b[e.ascension])},O.getTalentFieldValue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e[t]?Object(j.f)(e[t],n):a},O.hasBonusStats=function(e,t){return"finalHP"===t?O.hasBonusStats(e,"hp")||O.hasBonusStats(e,"hp_")||O.hasBonusStats(e,"characterHP"):"finalDEF"===t?O.hasBonusStats(e,"def")||O.hasBonusStats(e,"def_")||O.hasBonusStats(e,"characterDEF"):"finalATK"===t?O.hasBonusStats(e,"atk")||O.hasBonusStats(e,"atk_")||O.hasBonusStats(e,"characterATK"):!!(null===e||void 0===e?void 0:e.bonusStats)&&t in e.bonusStats},O.getStatValueWithBonus=function(e,t){var n,a,r;return null!==(n=null!==(a=null===(r=e.bonusStats)||void 0===r?void 0:r[t])&&void 0!==a?a:Object(b.a)(e)[t])&&void 0!==n?n:0},O.calculateBuild=function(e,t,n,a,r){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Object.fromEntries(Object.entries(e.equippedArtifacts).map((function(e){var n=Object(i.a)(e,2),a=n[0],r=n[1];return[a,t._getArt(r)]}))),s=O.createInitialStats(e,t,n,a);return s.mainStatAssumptionLevel=c,O.calculateBuildwithArtifact(s,o,r)},O.calculateBuildwithArtifact=function(e,t,n){var a,r=s.a.setToSlots(t),o=l.a.setEffectsStats(n,e,r),d=Object(j.d)(e);Object.values(t).forEach((function(e){e&&(d[e.mainStatKey]=(d[e.mainStatKey]||0)+s.a.mainStatValue(e.mainStatKey,e.rarity,Math.max(Math.min(d.mainStatAssumptionLevel,4*e.rarity),e.level)),e.substats.forEach((function(e){return e&&e.key&&(d[e.key]=(d[e.key]||0)+e.value)})))})),Object(b.c)(d,o),u.a.parseConditionalValues({artifact:null===d||void 0===d||null===(a=d.conditionalValues)||void 0===a?void 0:a.artifact},(function(e,t,n){var a,c,o=Object(i.a)(n,3),s=o[1],l=o[2];if(!(parseInt(l)>(null!==(a=null===r||void 0===r||null===(c=r[s])||void 0===c?void 0:c.length)&&void 0!==a?a:0))){var f=u.a.resolve(e,d,t).stats;Object(b.c)(d,f)}})),d.equippedArtifacts=Object.fromEntries(Object.entries(t).map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return[n,null===a||void 0===a?void 0:a.id]}))),d.setToSlots=r;var f=Object(h.a)(d,null===d||void 0===d?void 0:d.modifiers),p=Object(v.c)(f,d),O=p.initialStats;return(0,p.formula)(O),Object(c.a)(Object(c.a)({},d),O)},O.createInitialStats=function(e,t,n,o){var s,l,d,f=e.key,v=e.bonusStats,h=void 0===v?{}:v,j=e.elementKey,O=e.level,m=e.ascension,y=e.hitMode,g=e.infusionAura,x=e.reactionMode,w=e.talent,S=e.constellation,_=e.equippedArtifacts,k=e.conditionalValues,K=void 0===k?{}:k,C=e.equippedWeapon,E=null!==(s=t._getWeapon(C))&&void 0!==s?s:Object(p.a)(n.weaponTypeKey),A=Object(b.a)(e);Object(b.c)(A,h,b.b),A.characterKey=f,A.characterLevel=O,A.characterHP=n.getBase("hp",O,m),A.characterDEF=n.getBase("def",O,m),A.characterATK=n.getBase("atk",O,m),A.characterEle=null!==(l=null!==(d=n.elementKey)&&void 0!==d?d:j)&&void 0!==l?l:"anemo",A.hitMode=y,A.infusionAura=g,A.reactionMode=x,A.conditionalValues=K,A.weaponType=n.weaponTypeKey,A.tlvl=Object.fromEntries(Object.entries(null!==w&&void 0!==w?w:{}).map((function(e){var t=Object(i.a)(e,2);return[t[0],t[1]-1]}))),A.constellation=S,A.ascension=m,A.weapon={key:E.key,refineIndex:E.refinement-1},A.equippedArtifacts=_;var N=n.getSpecializedStat(m);if(N){var T=n.getSpecializedStatVal(m);Object(b.c)(A,Object(r.a)({},N,T))}for(var B in n.getTalentStatsAll(A,A.characterEle).forEach((function(e){return Object(b.c)(A,e)})),A.tlvl){var L;A.tlvl[B]+=null!==(L=A["".concat(B,"Boost")])&&void 0!==L?L:0}var V=o.getMainStatValue(E.level,E.ascension);A.weaponATK=V;var I=o.getSubStatKey();I&&Object(b.c)(A,Object(r.a)({},I,o.getSubStatValue(E.level,E.ascension))),Object(b.c)(A,o.stats(A));K.artifact;var M=K.weapon,W=Object(a.a)(K,["artifact","weapon"]);return u.a.parseConditionalValues(Object(c.a)(Object(c.a)({},E.key&&{weapon:Object(r.a)({},E.key,null===M||void 0===M?void 0:M[E.key])}),W),(function(e,t,n){if(("character"!==n[0]||"talents"!==n[3]||n[4]===j)&&u.a.canShow(e,A)){var a=u.a.resolve(e,A,t).stats;Object(b.c)(A,a)}})),A},O.getDisplayStatKeys=function(e,t){var n=t.characterSheet,a=t.weaponSheet,r=t.artifactSheets,o=e.characterEle,s=["finalHP","finalATK","finalDEF","eleMas","critRate_","critDMG_","heal_","enerRech_","".concat(o,"_dmg_")];n.isAutoElemental||s.push("physical_dmg_");var l=Object(j.d)(v.a[o]),d=n.weaponTypeKey;l.includes("shattered_hit")||"claymore"!==d||l.push("shattered_hit");var f={},h=n.getTalent(o),b=function(t,n){return t.forEach((function(t){var a;t.formula&&(null===t||void 0===t||null===(a=t.canShow)||void 0===a?void 0:a.call(t,e))&&(f[n]||(f[n]=[]),f[n].push(t.formula.keys))}))},p=function(t,n){if(t.conditional&&u.a.canShow(t.conditional,e)){var a=u.a.resolve(t.conditional,e,null).fields;a&&b(a,n)}t.fields&&b(t.fields,n)};h&&Object.entries(h.sheets).forEach((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1].sections;"normal"!==n&&"charged"!==n&&"plunging"!==n||(n="auto"),a.forEach((function(e){return p(e,"talentKey_".concat(n))}))}));var O="weapon_".concat(e.weapon.key);return a.document&&a.document.map((function(e){return p(e,O)})),e.setToSlots&&Object.entries(e.setToSlots).map((function(e){var t=Object(i.a)(e,2);return[t[0],t[1].length]})).forEach((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1],c=r[n];c&&Object.entries(c.setEffects).forEach((function(e){var t=Object(i.a)(e,2),r=t[0],c=t[1].document;a<parseInt(r)||c&&c.map((function(e){return p(e,"artifact_".concat(n,"_").concat(r))}))}))})),Object(c.a)(Object(c.a)({basicKeys:s},f),{},{transReactions:l})}},206:function(e,t,n){"use strict";n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return T})),n.d(t,"c",(function(){return V}));var a=n(12),r=n(2),c=n(29),i=n(10),o=n(0),s=n(142),l=n(118),u=n(547),d=n(187),f=n(121),v=n(70),h=n(226),b=n(540),j=n(334),p=n(188),O=n(186),m=n(112),y=n(203),g=n(202),x=n(115),w=n(45),S=n(111),_=n(15),k=n(114),K=n(204),C=n(113),E=n(1);function A(e){var t=e.onSelect,n=e.weaponTypeKey,a=Object(o.useContext)(w.b),r=Object(S.a)(C.b.getAll(),[]);return Object(E.jsx)(E.Fragment,{children:a._getCharKeys().filter((function(e){var t;return!n||(null===r||void 0===r||null===(t=r[e])||void 0===t?void 0:t.weaponTypeKey)===n})).sort().map((function(e){return Object(E.jsx)(N,{characterKey:e,onSelect:t},e)}))})}function N(e){var t=e.characterKey,n=e.onSelect,a=Object(S.a)(C.b.get(t),[t]);return a?Object(E.jsx)(O.a.Item,{onClick:function(){return n(t)},children:a.nameWIthIcon}):null}function T(e){var t=e.characterSheet,n=e.onSelect,a=e.filter,c=Object(o.useState)(!1),i=Object(r.a)(c,2),u=i[0],d=i[1],f=t?Object(E.jsxs)("span",{children:[Object(E.jsx)(s.a,{src:t.thumbImg,className:"thumb-small my-n1 ml-n2",roundedCircle:!0}),Object(E.jsxs)("h6",{className:"d-inline",children:[" ",t.name," "]})]}):Object(E.jsx)("span",{children:"Select a Character"});return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(l.a,{disabled:!n,onClick:function(){return d(!0)},children:f}),Object(E.jsx)(V,{show:u,onHide:function(){return d(!1)},onSelect:n,filter:a})]})}var B={rarity:"Rarity",level:"Level",name:"Name"};function L(e,t){return t===e?"":t}function V(e){var t=e.show,n=e.onHide,p=e.onSelect,O=e.filter,m=void 0===O?function(){return!0}:O,g=Object(o.useContext)(w.b),k=Object(o.useState)((function(){return Object.keys(B)[0]})),K=Object(r.a)(k,2),A=K[0],N=K[1],T=Object(o.useReducer)(L,""),V=Object(r.a)(T,2),M=V[0],W=V[1],R=Object(o.useReducer)(L,""),D=Object(r.a)(R,2),H=D[0],P=D[1],F=Object(S.a)(C.b.getAll(),[]),q=function(e){var t,n;return null!==(t=null===(n=g._getChar(e))||void 0===n?void 0:n.level)&&void 0!==t?t:0},z=function(e){var t;return null===F||void 0===F||null===(t=F[e])||void 0===t?void 0:t.star},U=F?Object(a.a)(new Set(_.c)).filter((function(e){return m(g._getChar(e),F[e])})).filter((function(e){var t,n;return(!M||M===(null===F||void 0===F||null===(t=F[e])||void 0===t?void 0:t.elementKey))&&(!H||H===(null===F||void 0===F||null===(n=F[e])||void 0===n?void 0:n.weaponTypeKey))})).sort((function(e,t){if("name"===A)return e<t?-1:e>t?1:0;if("level"===A){var n=q(t)-q(e);return n||z(t)-z(e)}var a=z(t)-z(e);return a||q(t)-q(e)})):[];return F?Object(E.jsx)(u.a,{show:t,size:"xl",contentClassName:"bg-transparent",onHide:n,children:Object(E.jsxs)(d.a,{bg:"lightcontent",text:"lightfont",children:[Object(E.jsx)(d.a.Header,{children:Object(E.jsxs)(f.a,{children:[Object(E.jsx)(v.a,{xs:"auto",children:Object(E.jsx)(h.a,{children:_.d.map((function(e){return Object(E.jsx)(l.a,{variant:M&&M!==e?"secondary":e,className:"py-1 px-2 text-white",onClick:function(){return W(e)},children:Object(E.jsx)("h3",{className:"mb-0",children:x.b[e]})},e)}))})}),Object(E.jsx)(v.a,{children:Object(E.jsx)(h.a,{children:_.j.map((function(e){var t;return Object(E.jsx)(l.a,{variant:H&&H!==e?"secondary":"success",className:"py-1 px-2",onClick:function(){return P(e)},children:Object(E.jsx)("h3",{className:"mb-0",children:Object(E.jsx)(s.a,{src:null===(t=y.a.weaponTypes)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(E.jsxs)(v.a,{xs:"auto",children:[Object(E.jsx)("span",{children:"Sort by: "}),Object(E.jsx)(b.a,{type:"radio",name:"level",value:A,onChange:N,children:Object.entries(B).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(E.jsx)(j.a,{value:n,variant:A===n?"success":"primary",children:Object(E.jsx)("h6",{className:"mb-0",children:a})},n)}))})]}),Object(E.jsx)(v.a,{xs:"auto",children:Object(E.jsx)(l.a,{onClick:n,variant:"danger",children:Object(E.jsx)(i.a,{icon:c.D})})})]})}),Object(E.jsx)(d.a.Body,{children:Object(E.jsx)(f.a,{children:U.map((function(e){return Object(E.jsx)(I,{characterKey:e,onClick:function(){n(),null===p||void 0===p||p(e)}},e)}))})})]})}):null}function I(e){var t,n=e.onClick,a=e.characterKey,r=Object(o.useContext)(w.b),c=r._getChar(a),i=Object(S.a)(C.b.get(a),[a]),u=(null===c||void 0===c?void 0:c.equippedWeapon)?r._getWeapon(c.equippedWeapon):void 0,d=Object(S.a)(u?k.a.get(u.key):void 0,[null===u||void 0===u?void 0:u.key]),h=Object(S.a)(m.a.getAll(),[]),b=Object(o.useMemo)((function(){return c&&i&&d&&h&&K.a.calculateBuild(c,r,i,d,h)}),[c,i,d,h,r]);return i?Object(E.jsx)(v.a,{lg:3,md:4,className:"mb-2",children:Object(E.jsxs)(l.a,{className:"w-100",variant:"darkcontent",onClick:n,children:[Object(E.jsx)("h5",{children:i.name}),Object(E.jsxs)(f.a,{children:[Object(E.jsx)(v.a,{xs:"auto",className:"pr-0",children:Object(E.jsx)(s.a,{src:i.thumbImg,className:"thumb-big grad-".concat(i.star,"star p-0"),thumbnail:!0})}),Object(E.jsxs)(v.a,{children:[b&&c?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("h5",{className:"mb-0",children:["Lv. ",K.a.getLevelString(c)," ","C".concat(c.constellation)]}),Object(E.jsxs)("h6",{className:"mb-0",children:[Object(E.jsx)(p.a,{variant:"secondary",children:Object(E.jsx)("strong",{className:"mx-1",children:b.tlvl.auto+1})})," ",Object(E.jsx)(p.a,{variant:"secondary",children:Object(E.jsx)("strong",{className:"mx-1",children:b.tlvl.skill+1})})," ",Object(E.jsx)(p.a,{variant:"secondary",children:Object(E.jsx)("strong",{className:"mx-1",children:b.tlvl.burst+1})})]})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("h4",{children:Object(E.jsx)(p.a,{variant:"primary",children:"NEW"})})}),Object(E.jsx)("h6",{className:"mb-0",children:Object(E.jsx)(g.a,{stars:i.star,colored:!0})}),Object(E.jsxs)("h3",{className:"mb-0",children:[i.elementKey&&x.a[i.elementKey]," ",Object(E.jsx)(s.a,{src:null===(t=y.a.weaponTypes)||void 0===t?void 0:t[i.weaponTypeKey],className:"inline-icon"})]})]})]})]})},a):null}},210:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(2),r=n(12),c=n(69),i=n(40);function o(e){var t=new Set;return e(new Proxy({},{get:function(e,n,a){t.add(n.toString())}})),Object(r.a)(t)}var s=Object.freeze(Object.fromEntries(Object.entries(i.b).map((function(e){var t=Object(a.a)(e,2);return[t[0],o(t[1])]}))));function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.keys(i.d),a=new Set,c=Object(r.a)(Array(i.f)).map((function(e){return new Set}));return n.forEach((function(n){return u(e,n,t,c,a)})),c.flatMap((function(e){return Object(r.a)(e)}))}function u(e,t,n,a,r){var o,l;r.has(t)||(r.add(t),null===(o=s[t])||void 0===o||o.forEach((function(t){return u(e,t,n,a,r)})),(null!==(l=n[t])&&void 0!==l?l:[]).forEach((function(t){return c.a.getCurrent(t,e)[1].forEach((function(t){return u(e,t,n,a,r)}))})),a[Object(i.e)(t)].add(t))}},212:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var a=n(2),r=n(188),c=n(59),i=n(15),o=n(11),s=n(1);function l(e,t){var n=t.characterSheet,c=t.weaponSheet,i=t.artifactSheets,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"anemo";if("basicKeys"===e)return"Basic Stats";if("genericAvgHit"===e)return"Generic Optimization Values";if("transReactions"===e)return"Transformation Reaction";if(e.startsWith("talentKey_")){var l,u,d=e.split("talentKey_")[1];return null!==(l=null===n||void 0===n||null===(u=n.getTalentOfKey(d,o))||void 0===u?void 0:u.name)&&void 0!==l?l:d}if(e.startsWith("weapon_")){var f,v=e.split("weapon_")[1];return null!==(f=null===c||void 0===c?void 0:c.name)&&void 0!==f?f:v}if(e.startsWith("artifact_")){var h,b=e.split("_"),j=Object(a.a)(b,3),p=j[1],O=j[2];return Object(s.jsxs)("span",{children:[null===(h=i[p])||void 0===h?void 0:h.name," ",Object(s.jsxs)(r.a,{variant:"success",children:[O,"-Set"]})]})}return""}function u(e){return{key:e,level:1,ascension:0,hitMode:"avgHit",reactionMode:null,equippedArtifacts:Object(o.o)(i.h,(function(){return""})),equippedWeapon:"",conditionalValues:{},bonusStats:{},buildSettings:Object(c.a)(),talent:{auto:1,skill:1,burst:1},infusionAura:"",constellation:0}}},550:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ke}));var a=n(2),r=n(189),c=n(3),i=n(5),o=n(0),s=n.n(o),l=n(7),u=n.n(l),d=n(216),f=n(99),v=n(23),h=n(9),b=n(140),j=s.a.createContext({onClose:function(){}}),p=["bsPrefix","closeLabel","closeButton","className","children"],O=s.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.closeLabel,r=e.closeButton,l=e.className,d=e.children,f=Object(i.a)(e,p);n=Object(h.a)(n,"toast-header");var O=Object(o.useContext)(j),m=Object(v.a)((function(e){O&&O.onClose&&O.onClose(e)}));return s.a.createElement("div",Object(c.a)({ref:t},f,{className:u()(n,l)}),d,r&&s.a.createElement(b.a,{label:a,onClick:m,className:"ml-2 mb-1","data-dismiss":"toast"}))}));O.displayName="ToastHeader",O.defaultProps={closeLabel:"Close",closeButton:!0};var m=O,y=n(21),g=Object(y.a)("toast-body"),x=["bsPrefix","className","children","transition","show","animation","delay","autohide","onClose"],w=s.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,r=e.children,l=e.transition,v=void 0===l?f.a:l,b=e.show,p=void 0===b||b,O=e.animation,m=void 0===O||O,y=e.delay,g=void 0===y?3e3:y,w=e.autohide,S=void 0!==w&&w,_=e.onClose,k=Object(i.a)(e,x);n=Object(h.a)(n,"toast");var K=Object(o.useRef)(g),C=Object(o.useRef)(_);Object(o.useEffect)((function(){K.current=g,C.current=_}),[g,_]);var E=Object(d.a)(),A=!(!S||!p),N=Object(o.useCallback)((function(){A&&(null==C.current||C.current())}),[A]);Object(o.useEffect)((function(){E.set(N,K.current)}),[E,N]);var T=Object(o.useMemo)((function(){return{onClose:_}}),[_]),B=!(!v||!m),L=s.a.createElement("div",Object(c.a)({},k,{ref:t,className:u()(n,a,!B&&(p?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}),r);return s.a.createElement(j.Provider,{value:T},B&&v?s.a.createElement(v,{in:p,unmountOnExit:!0},L):L)}));w.displayName="Toast";var S=Object.assign(w,{Body:g,Header:m}),_=n(187),k=n(230),K=n(118),C=n(199),E=(n(198),n(20)),A=n(274),N=(n(210),n(12)),T=n(45),B=n(34),L=n(85),V=n(19),I=n(24);function M(e,t){var n=new q(e),a=R(n,t,null);return n.end(),a}function W(e,t,n){try{switch(t.encode&&(e=t.encode(e)),t.type){case"uint":return function(e,t){var n=P(e,t.length);return t.length?n:D(n.length)+n}(e,t);case"string":return function(e,t){if(!e.match(/^[a-z0-9\-_]*$/i))throw new Error("Cannot encode string ".concat(e,": not alphanumeric or -_"));return D(e.length)+e}(e);case"array":return function(e,t){var n=t.schemas,a=void 0===n?[]:n,r=t.defaultSchema;return D(e.length)+e.map((function(e,t){var n;return W(e,null!==(n=a[t])&&void 0!==n?n:r,t)})).join("")}(e,t);case"object":return function(e,t){var n=t.schemas,r=void 0===n?[]:n;return Object.entries(r).map((function(t){var n=Object(a.a)(t,2),r=n[0],c=n[1];return W(r in e?e[r]:c.default,c,r)})).join("")}(e,t);case"sparse":return function(e,t){var n=t.keySchema,r=t.keys,c=t.valueSchema,i=Object.entries(e).filter((function(e){var t,n=Object(a.a)(e,1)[0];return null===(t=null===r||void 0===r?void 0:r.includes(n))||void 0===t||t}));return D(i.length)+i.map((function(e){var t=Object(a.a)(e,2),r=t[0],i=t[1];return W(r,n,r)+W(i,c,r)})).join("")}(e,t);default:throw new Error("Unsupported schema type ".concat(t.type," on array"))}}catch(c){var r;throw c.path=null!==(r=c.path)&&void 0!==r?r:[],c.path.push(n),c}}function R(e,t,n){try{var r;switch(t.type){case"uint":r=function(e,t){var n=t.length||H(e);return F(e.take(n))}(e,t);break;case"string":r=function(e,t){var n=e.take(H(e));if(!n.match(/^[a-z0-9\-_]*$/i))throw new Error("Cannot decode string ".concat(n,": not alphanumeric or -_"));return n}(e);break;case"array":r=function(e,t){var n=t.schemas,a=void 0===n?[]:n,r=t.defaultSchema,c=H(e);return Object(N.a)(new Array(c)).map((function(t,n){var c;return R(e,null!==(c=a[n])&&void 0!==c?c:r,n)}))}(e,t);break;case"object":r=function(e,t){var n=t.schemas,r=void 0===n?[]:n;return Object.fromEntries(Object.entries(r).map((function(t){var n=Object(a.a)(t,2),r=n[0],c=n[1];return[r,R(e,c,r)]})))}(e,t);break;case"sparse":r=function(e,t){var n=t.keys,r=t.keySchema,c=t.valueSchema,i=H(e);return Object.fromEntries(Object(N.a)(new Array(i)).map((function(){var t=R(e,r,null);return[t,R(e,c,t)]})).filter((function(e){var t,r=Object(a.a)(e,1)[0];return null===(t=null===n||void 0===n?void 0:n.includes(r))||void 0===t||t})))}(e,t);break;default:throw new Error("Unsupported schema type ".concat(t.type," on array"))}return t.decode?t.decode(r):r}catch(i){var c;throw i.path=null!==(c=i.path)&&void 0!==c?c:[],i.path.push(n),i}}function D(e){if(e>=32)throw new Error("Length (".concat(e,") too large"));return P(e,1)}function H(e){var t=F(e.take(1));if(t>=32)throw new Error("Length (".concat(t,") too large"));return t}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e<0)throw new Error("Cannot encode negative number ".concat(e));for(var n="";e>0;){var a=e%64;e=Math.floor(e/64),a<10?n+=String.fromCharCode(a+48-0):a<36?n+=String.fromCharCode(a+97-10):a<62?n+=String.fromCharCode(a+65-36):62===a?n+="-":63===a&&(n+="_")}if(!t)return n;if(n.length>t)throw new Error("Cannot encode uint ".concat(e,": value too large"));return n.padEnd(t,"0")}function F(e){for(var t=0,n=1,a=0;a<e.length;a++){var r=e.charCodeAt(a);if(48<=r&&r<58)t+=n*(r-48+0);else if(97<=r&&r<123)t+=n*(r-97+10);else if(65<=r&&r<91)t+=n*(r-65+36);else if("-"===e[a])t+=62*n;else{if("_"!==e[a])throw new Error('Cannot parse UInt from "'.concat(e,'", which contains "').concat(String.fromCharCode(r),'"'));t+=63*n}n*=64}return t}var q=function(){function e(t){Object(V.a)(this,e),this.string=void 0,this.offset=void 0,this.string=t,this.offset=0}return Object(I.a)(e,[{key:"take",value:function(e){if(this.offset+e>this.string.length)throw new Error("Cannot take ".concat(e," items from ").concat(this.string.slice(this.offset)));var t=this.string.slice(this.offset,this.offset+e);return this.offset+=e,t}},{key:"end",value:function(){if(this.string.length!==this.offset)throw new Error("Unused string ".concat(this.string.slice(this.offset)))}}]),e}(),z=n(14),U=n(8),G=n(39),J=n(15),$=n(11),Q=["","hp","hp_","atk","atk_","def","def_","eleMas","enerRech_","critRate_","critDMG_","heal_","physical_dmg_","anemo_dmg_","cryo_dmg_","dendro_dmg_","electro_dmg_","geo_dmg_","hydro_dmg_","pyro_dmg_"],X=function(e){return{type:"uint",length:e}},Y={type:"string",encode:function(e){return e.toString().replace(/\./g,"_")},decode:function(e){return parseFloat(e.replace(/_/g,"."))}},Z={type:"string"},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(U.a)({type:"array",defaultSchema:e},t)},te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(U.a)({type:"object",schemas:e},t)},ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"sparse",keys:n,keySchema:e,valueSchema:t}},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{type:"uint",length:n,encode:function(t){return e.indexOf(t)+1},decode:function(n){var a;return null!==(a=e[n-1])&&void 0!==a?a:t}}},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:"uint",length:t,encode:function(t){return e.indexOf(t)},decode:function(t){return e[t]}}},ce=re(Q),ie=re(J.b),oe=re(J.h),se=re(J.c),le=re(J.e),ue=re([null].concat(Object(N.a)(J.g))),de=ae(J.d,""),fe=te({key:ce,value:X(2)},{encode:function(e){var t=e.key,n=e.value,a=t.endsWith("_")?10:1;return{key:t,value:n*a}},decode:function(e){var t=e.key,n=e.value,a=t.endsWith("_")?10:1;return{key:t,value:n/a}}}),ve=ee(te({path:ee(Z),value:ee(Z)}),{encode:function(e){var t=[];return Object($.c)(e,[],(function(e){return Array.isArray(e)}),(function(e,n){t.push({path:n,value:e.map((function(e){return e.toString()}))})})),t.filter((function(e){var t=e.path;switch(t[0]){case"character":t[0]="c",t[1]=P(J.c.indexOf(t[1]));break;case"weapon":t[0]="w";break;case"artifact":t[0]="a",t[1]=P(J.b.indexOf(t[1]));break;default:return!1}return!0})),t},decode:function(e){var t,n={weapon:{},artifact:{},character:{}},a=Object(z.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,c=r.path,i=r.value;switch(c[0]){case"c":c[0]="character",c[1]=J.c[F(c[1])];break;case"w":c[0]="weapon";break;case"a":c[0]="artifact",c[1]=J.b[F(c[1])];break;default:continue}var o,s=c.pop(),l=n,u=Object(z.a)(c);try{for(u.s();!(o=u.n()).done;){var d,f=o.value,v=null!==(d=l[f])&&void 0!==d?d:{};l[f]=v,l=v}}catch(h){u.e(h)}finally{u.f()}i[0]=parseFloat(i[0]),l[s]=i}}catch(h){a.e(h)}finally{a.f()}return n}}),he=te({setKey:ie,numStars:X(1),level:X(2),mainStatKey:ce,slotKey:oe,substats:ee(fe)},{decode:function(e){return e.id="",e.lock=!1,e}}),be=te({key:Z,levelKey:Z,refineIndex:X(1),overrideMainVal:Y,overrideSubVal:Y},{decode:function(e){var t=e.levelKey;delete e.levelKey,delete e.overrideMainVal,delete e.overrideSubVal;var n=t.split("L"),r=Object(a.a)(n,2)[1],c=parseInt(r),i=G.b.findIndex((function(e){return c<=e})),o=r.includes("A");return c<0||c>90||i<0?(e.level=1,e.ascension=0):(e.level=c,e.ascension=i+(o?1:0)),e}}),je=te({characterKey:se,hitMode:le,reactionMode:ue,constellation:X(1),overrideLevel:X(2),levelKey:Z,infusionAura:de,talentLevelKeys:te({auto:X(1),skill:X(1),burst:X(1)}),baseStatOverrides:ne(Z,Y),weapon:be,conditionalValues:ve,reserved:ee(X(1))},{decode:function(e){var t,n="A"===e.levelKey.slice(-1),a=n?e.levelKey.slice(1,-1):e.levelKey.slice(1);switch(e.level=parseInt(a),e.level){case 1:case 20:e.ascension=0;break;case 40:e.ascension=1;break;case 50:e.ascension=2;break;case 60:e.ascension=3;break;case 70:e.ascension=4;break;case 80:e.ascension=5;break;case 90:e.ascension=6}(n&&(e.ascension+=1),e.baseStatOverrides.characterLevel&&(e.level=e.baseStatOverrides.characterLevel,delete e.baseStatOverrides.characterLevel),e.baseStatOverrides.weaponLevel&&(e.weapon.level=e.baseStatOverrides.weaponLevel,delete e.baseStatOverrides.weaponLevel),e.overrideLevel&&(e.level=e.overrideLevel),delete e.overrideLevel,delete e.levelKey,"Traveler"===e.characterKey)&&(e.elementKey=null!==(t=J.d[e.reserved[0]-1])&&void 0!==t?t:"anemo");return delete e.reserved,e}}),pe=te({artifacts:ee(he),character:je}),Oe=te({setKey:ie,level:X(2),mainStatKey:ce,substats:ee(fe),location:ae(J.c),raritySlotKey:X(1)},{encode:function(e){return e.raritySlotKey=8*J.h.indexOf(e.slotKey)+e.rarity,e},decode:function(e){return e.rarity=e.raritySlotKey%8,e.slotKey=J.h[(e.raritySlotKey-e.rarity)/8],e}}),me=te({key:Z,location:ae(J.c),ascensionRefine:X(1),levelDiff:X(1)},{encode:function(e){return e.ascensionRefine=8*e.ascension+e.refinement,e.levelDiff=G.b[e.ascension]-e.level,e},decode:function(e){return e.refinement=e.ascensionRefine%8,e.ascension=(e.ascensionRefine-e.refinement)/8,e.level=G.b[e.ascension]-e.levelDiff,e}}),ye=te({key:se,hitMode:le,reactionMode:ue,conditionalValues:ve,bonusStats:ne(Z,Y),talent:te({auto:X(1),skill:X(1),burst:X(1)}),infusionAura:de,levelDiff:X(1),ascensionConstellation:X(1),reserved:ee(X(1))},{encode:function(e){return e.levelDiff=G.b[e.ascension]-e.level,e.ascensionConstellation=8*e.ascension+e.constellation,"Traveler"!==e.characterKey?e.reserved=[]:e.reserved=[J.d.indexOf(e.elementKey)],e},decode:function(e){var t;return e.constellation=e.ascensionConstellation%8,e.ascension=(e.ascensionConstellation-e.constellation)/8,e.level=G.b[e.ascension]-e.levelDiff,"Traveler"===e.characterKey&&(e.elementKey=null!==(t=J.d[e.reserved[0]])&&void 0!==t?t:"anemo"),e}}),ge={flexV2:pe,flexV3:te({characters:ee(ye),artifacts:ee(Oe),weapons:ee(me)})};[null].concat(Object(N.a)(J.g));function xe(e,t){var n=t._getChar(e);if(!n)return null;var a=t._getWeapon(n.equippedWeapon),r=Object.values(n.equippedArtifacts).filter((function(e){return e})).map((function(e){return t._getArt(e)}));try{return"v=3&d="+W({characters:[n],weapons:[a],artifacts:r},ge.flexV3,null)}catch(c){return null}}function we(e){var t=Object.fromEntries(e.split("&").map((function(e){return e.split("=")})));try{switch(parseInt(t.v)){case 2:return[].concat(Object(N.a)(function(e){var t=M(e,ge.flexV2),n=t.character,a=t.artifacts,r=n.characterKey,c=r.toLowerCase();n.characterKey=c;var i=new B.a;i.setString("db_ver","7"),i.set("char_".concat(c),n),a.forEach((function(e,t){e.location=c,i.set("artifact_".concat(t+1),e)}));var o=new T.a(i);if(!o._getChar(r))throw new Error("Invalid flex object");return[o,r]}(t.d)),[2]);case 3:return[].concat(Object(N.a)(function(e){var t=M(e,ge.flexV3),n=t.characters,a=t.artifacts,r=t.weapons,c=n[0].key,i=new B.a;i.setString("db_ver","".concat(L.a)),n.forEach((function(e){return i.set("char_".concat(e.key),e)})),a.forEach((function(e,t){return i.set("artifact_".concat(t),e)})),r.forEach((function(e,t){return i.set("weapon_".concat(t),e)}));var o=new T.a(i);if(!o._getChar(c))throw new Error("Invalid flex object");return[o,c]}(t.d)),[3]);default:return}}catch(n){return void 0}}var Se=n(10),_e=n(29),ke=n(1);function Ke(){var e=Object(E.h)(),t=Object(o.useContext)(T.b),n=e.search;if(n){var r=we(n.substring(1));if(!r)return Object(ke.jsx)(E.a,{to:"/"});var c=Object(a.a)(r,3),i=c[0],s=c[1];return 3!==c[2]?Object(ke.jsx)(E.a,{to:"/flex?".concat(xe(s,i))}):Object(ke.jsx)(T.b.Provider,{value:i,children:Object(ke.jsx)(Ce,{characterKey:s})})}var l=e.characterKey;if(!l)return Object(ke.jsx)(E.a,{to:"/"});var u=xe(l,t);return u?(window.scrollTo(0,0),Object(ke.jsx)(E.a,{to:"/flex?".concat(u)})):Object(ke.jsx)(E.a,{to:"/"})}function Ce(e){var t=e.characterKey,n=Object(o.useState)(!1),c=Object(a.a)(n,2),i=c[0],s=c[1],l=window.location.href;return Object(ke.jsxs)(r.a,{className:"my-2",children:[Object(ke.jsxs)(S,{onClose:function(){return s(!1)},show:i,delay:3e3,autohide:!0,style:{position:"absolute",top:50,right:50},children:[Object(ke.jsx)(S.Header,{children:Object(ke.jsx)("b",{className:"mr-auto",children:"Genshin Optimizer"})}),Object(ke.jsx)(S.Body,{children:"URL copied to clipboard."})]}),Object(ke.jsx)(_.a,{bg:"darkcontent",text:"lightfont",className:"mb-2",children:Object(ke.jsxs)(_.a.Body,{className:"p-2",children:[Object(ke.jsxs)(k.a,{className:"mb-0",children:[Object(ke.jsx)(k.a.Prepend,{children:Object(ke.jsx)(K.a,{onClick:function(){navigator.clipboard.writeText(l).then((function(){return s(!0)})).catch(console.error)},children:Object(ke.jsxs)("span",{children:[Object(ke.jsx)(Se.a,{icon:_e.t})," Copy URL to clipboard"]})})}),Object(ke.jsx)(C.a.Control,{readOnly:!0,value:window.location.href,onClick:function(e){return e.target.select()}})]}),!1]})}),Object(ke.jsx)(A.default,{characterKey:t})]})}}}]);
//# sourceMappingURL=16.e65818a7.chunk.js.map