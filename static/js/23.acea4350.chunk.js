(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[23],{274:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var n=a(134),c=a.n(n),r=a(162),i=a(16),o=a(0),s=a(71),l=a(42),d=a(52),b=a(41),j=a(104),u=a(233),h=a(266),O=a(25),f=a(19),x=a(17),m=a(60),p=a(99),v=a(1);function g(){var e=Object(p.a)(),t=Object(i.a)(e,2)[1];return O.a.pageview("/setting"),Object(v.jsx)(s.a,{children:Object(v.jsxs)(l.a,{bg:"darkcontent",text:"lightfont",className:"mt-2",children:[Object(v.jsx)(l.a.Header,{children:"Database management"}),Object(v.jsxs)(l.a.Body,{children:[Object(v.jsx)(y,{forceUpdate:t}),Object(v.jsx)(C,{forceUpdate:t})]})]})})}function w(){navigator.clipboard.writeText(JSON.stringify(Object(m.d)())),alert("Copied database to clipboard.")}function y(e){var t=e.forceUpdate,a=x.a.getIdList().length,n=f.a.getIdList().length,c=Boolean(a||n);return Object(v.jsxs)(l.a,{bg:"lightcontent",text:"lightfont",className:"mb-3",children:[Object(v.jsx)(l.a.Header,{children:"Database Download"}),Object(v.jsxs)(l.a.Body,{children:[Object(v.jsxs)(d.a,{className:"mb-2",children:[Object(v.jsx)(b.a,{xs:12,md:6,children:Object(v.jsxs)("h6",{children:["Number of Characters: ",Object(v.jsx)("b",{children:a})]})}),Object(v.jsx)(b.a,{xs:12,md:6,children:Object(v.jsxs)("h6",{children:["Number of artifacts: ",Object(v.jsx)("b",{children:n})]})})]}),Object(v.jsx)("small",{children:'Notes: any data within the "Tools" page, e.g. Resin amount/timer, are not part of the downloaded database.'})]}),Object(v.jsx)(l.a.Footer,{children:Object(v.jsxs)(d.a,{children:[Object(v.jsx)(b.a,{xs:"auto",children:Object(v.jsx)(j.a,{disabled:!c,onClick:function(){return function(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data.json",c="application/json;charset=utf-8";if(null===(t=window)||void 0===t||null===(a=t.navigator)||void 0===a?void 0:a.msSaveOrOpenBlob){var r=new Blob([decodeURIComponent(encodeURI(e))],{type:c});navigator.msSaveOrOpenBlob(r,n)}else{var i=document.createElement("a");i.download=n,i.href="data:".concat(c,",").concat(encodeURIComponent(e)),i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}(JSON.stringify(Object(m.d)()))},children:"Download"})}),Object(v.jsx)(b.a,{children:Object(v.jsx)(j.a,{disabled:!c,variant:"info",onClick:w,children:"Copy to clipboard"})}),Object(v.jsx)(b.a,{xs:"auto",children:Object(v.jsx)(j.a,{disabled:!c,variant:"danger",onClick:function(){window.confirm("Are you sure you want to delete your database? All existing characters and artifacts will be deleted.")&&Object(m.c)(),t()},children:"Delete database"})})]})})]})}function N(){return(N=Object(r.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:(n=new FileReader).onload=function(){a(n.result)},n.readAsText(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){var t,a,n,c=e.forceUpdate,r=Object(o.useState)(""),s=Object(i.a)(r,2),O=s[0],f=s[1],x=Object(o.useState)(""),p=Object(i.a)(x,2),g=p[0],w=p[1],y="";if(O)try{var C=n=JSON.parse(O),k=C.characterDatabase,S=C.artifactDatabase;t=Object.keys(k).length,a=Object.keys(S).length}catch(B){y="Invalid JSON: ".concat(B)}var U=Boolean(t||a);return Object(v.jsxs)(l.a,{bg:"lightcontent",text:"lightfont",children:[Object(v.jsx)(l.a.Header,{children:"Database Upload"}),Object(v.jsxs)(l.a.Body,{children:[Object(v.jsxs)(d.a,{className:"mb-2",children:[Object(v.jsx)(u.a.File,{className:"mb-2",label:g||"Upload your JSON file here",onChange:function(e){var t=e.target.files[0];e.target.value=null,t&&w(t.name),function(e,t){N.apply(this,arguments)}(t,f)},custom:!0,accept:".json"}),Object(v.jsx)("h6",{children:"...or Paste your data below..."}),Object(v.jsx)("textarea",{className:"w-100 text-monospace",value:O,onChange:function(e){return f(e.target.value)},style:{minHeight:"10em"}})]}),U&&Object(v.jsxs)(d.a,{children:[Object(v.jsx)(b.a,{xs:12,md:6,children:Object(v.jsxs)("h6",{children:["Number of Characters: ",Object(v.jsx)("b",{children:t})]})}),Object(v.jsx)(b.a,{xs:12,md:6,children:Object(v.jsxs)("h6",{children:["Number of artifacts: ",Object(v.jsx)("b",{children:a})]})})]}),Boolean(O&&(y||!U))&&Object(v.jsx)(h.a,{variant:"danger",children:y||"Unable to parse character & artifact data from file."})]}),Object(v.jsx)(l.a.Footer,{children:Object(v.jsx)(j.a,{variant:U?"success":"danger",disabled:!U,onClick:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};window.confirm("Are you sure you want to replace your database? All existing characters and artifacts will be deleted before replacement.")&&(Object(m.e)(e),t())}(n),f(""),w(""),c()},children:"Replace database"})})]})}Object(m.b)()},99:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(16),c=a(0);function r(){var e=Object(c.useState)({}),t=Object(n.a)(e,2),a=t[0],r=t[1];return[a,Object(c.useCallback)((function(){return r({})}),[])]}function i(e){var t=Object(c.useState)(),a=Object(n.a)(t,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){var t,a=!0;return null!==(t=null===e||void 0===e?void 0:e.then((function(e){return a&&i((function(){return e}))}),console.error))&&void 0!==t||i(void 0),function(){a=!1}}),[e]),r}}}]);
//# sourceMappingURL=23.acea4350.chunk.js.map