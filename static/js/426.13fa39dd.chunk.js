"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[426],{17618:function(e,t,n){n.d(t,{K:function(){return r}});var r=(0,n(72791).createContext)({})},52991:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(68870),i=n(20890),a=n(2191),o=n(31148),s=n(79406),c=n(42320),u=n(24351),l=n(96106),d=n(3992),f=n(25617),h=n(75545),x=n(50428),v=n(80184);function p(e){var t=e.artifactObj,n=e.slotKey,p=(0,c.Z)((function(){return(null===t||void 0===t?void 0:t.setKey)&&o.y.get(t.setKey)}),[null===t||void 0===t?void 0:t.setKey]);if(!t||!p)return(0,v.jsx)(d.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:(0,v.jsx)(r.Z,{sx:{width:"100%",pb:"100%",position:"relative"},children:(0,v.jsx)(r.Z,{sx:{position:"absolute",width:"70%",height:"70%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.7},component:"img",src:a.Z.slot[n]})})});var m=t.mainStatKey,Z=t.rarity,g=t.level,j=t.mainStatVal,y="roll"+(Math.floor(Math.max(g,0)/4)+1),b=u.Kj.find((function(e){return t.mainStatKey.includes(e)})),k=null!==b&&void 0!==b?b:"secondary";return(0,v.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",position:"relative"},children:[(0,v.jsx)(x.Z,{slotKey:n,sheet:p,children:(0,v.jsx)(r.Z,{component:"img",className:"grad-".concat(Z,"star"),src:p.slotIcons[n],maxWidth:"100%",maxHeight:"100%"})}),(0,v.jsx)(i.Z,{sx:{position:"absolute",m:-.2,lineHeight:1,pointerEvents:"none"},variant:"subtitle2",children:(0,v.jsxs)(f.Z,{color:y,children:["+",g]})}),(0,v.jsx)(i.Z,{variant:"h6",sx:{position:"absolute",bottom:0,right:0,lineHeight:1},children:(0,v.jsx)(l.Z,{placement:"top",title:(0,v.jsxs)(i.Z,{children:[(0,s.qs)(j,s.ZP.unit(m)),s.ZP.unit(m)," ",s.ZP.getStr(m)]}),disableInteractive:!0,children:(0,v.jsx)(f.Z,{color:k,sx:{p:.25},children:b?h.h[b]:h.Z[m]})})})]})}},50428:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(68870),i=n(47047),a=n(20890),o=n(72791),s=n(96106),c=n(95614),u=n(80184);function l(e){var t,n=e.slotKey,l=e.sheet,d=e.children,f=(0,u.jsxs)(r.Z,{children:[(0,u.jsx)(i.Z,{variant:"text",width:100}),(0,u.jsx)(i.Z,{variant:"text",width:100})]}),h=(0,u.jsx)(o.Suspense,{fallback:f,children:(0,u.jsxs)(r.Z,{children:[(0,u.jsx)(a.Z,{children:(0,u.jsx)("strong",{children:null===l||void 0===l?void 0:l.name})}),(0,u.jsxs)(a.Z,{children:[(0,c.Ir)(n)," ",null===l||void 0===l||null===(t=l.getSlotName)||void 0===t?void 0:t.call(l,n)]})]})});return(0,u.jsx)(s.Z,{placement:"top",title:h,disableInteractive:!0,children:d})}},96106:function(e,t,n){var r=n(4942),i=n(1413),a=n(45987),o=n(66934),s=n(40165),c=n(69293),u=n(80184),l=["className"],d=(0,o.ZP)((function(e){var t=e.className,n=(0,a.Z)(e,l);return(0,u.jsx)(s.Z,(0,i.Z)((0,i.Z)({},n),{},{arrow:!0,classes:{popper:t}}))}))((function(e){var t,n=e.theme;return t={},(0,r.Z)(t,"& .".concat(c.Z.arrow),{color:n.palette.common.black}),(0,r.Z)(t,"& .".concat(c.Z.tooltip),{backgroundColor:n.palette.common.black,maxWidth:500}),t}));t.Z=d},30865:function(e,t,n){n.d(t,{Z:function(){return F}});var r=n(29439),i=n(14361),a=n(90690),o=n(66647),s=n(47047),c=n(68870),u=n(13400),l=n(39504),d=n(61889),f=n(81918),h=n(20890),x=n(72791),v=n(2139),p=n(56928),m=n(2693),Z=n(26138),g=n(79406),j=n(84684),y=n(50920),b=n(47639),k=n(24351),C=n(60393),w=n(52991),S=n(71310),K=n(20005),I=n(88034),_=n(25617),D=n(10157),P=n(75545),E=n(77208),W=n(66218),R=n(73036),N=n(42320),M=n(3992),T=n(80184);function H(e){var t=e.weaponId,n=(0,x.useContext)(p.t).database._getWeapon(t),r=(0,N.Z)((function(){return(null===n||void 0===n?void 0:n.key)&&W.Z.get(n.key)}),[null===n||void 0===n?void 0:n.key]),i=(0,x.useMemo)((function(){return r&&n&&(0,R.mP)([r.data,(0,R.v0)(n)])}),[r,n]);return n&&r&&i?(0,T.jsx)(M.Z,{children:(0,T.jsxs)(c.Z,{display:"flex",children:[(0,T.jsx)(c.Z,{flexShrink:1,maxWidth:"35%",display:"flex",flexDirection:"column",alignContent:"flex-end",className:"grad-".concat(r.rarity,"star"),children:(0,T.jsx)(c.Z,{component:"img",src:r.getImg(n.ascension),width:"100%",height:"auto",sx:{mt:"auto"}})}),(0,T.jsxs)(c.Z,{flexGrow:1,sx:{p:1},children:[(0,T.jsx)(h.Z,{variant:"body2",gutterBottom:!0,children:(0,T.jsx)("strong",{children:null===r||void 0===r?void 0:r.name})}),(0,T.jsxs)(h.Z,{variant:"subtitle1",sx:{display:"flex",gap:1},gutterBottom:!0,children:[(0,T.jsxs)(_.Z,{color:"primary",children:["Lv. ",W.Z.getLevelString(n)]}),r.hasRefinement&&(0,T.jsxs)(_.Z,{color:"info",children:["R",n.refinement]})]}),(0,T.jsxs)(h.Z,{variant:"subtitle1",sx:{display:"flex",gap:1},children:[(0,T.jsx)(O,{node:i.get(Z.ri.weapon.main)}),(0,T.jsx)(O,{node:i.get(Z.ri.weapon.sub)})]})]})]})}):null}function O(e){var t=e.node;if(!t.info.key)return null;var n=(0,g.EC)(t.value,t.unit,t.unit?void 0:0);return(0,T.jsxs)(_.Z,{color:"secondary",children:[P.Z[t.info.key]," ",n]})}var z=n(17618),B=n(947),A=n(13434);function F(e){var t,n,r=e.characterKey,f=e.artifactChildren,h=e.weaponChildren,v=e.characterChildren,p=e.onClick,Z=e.onClickHeader,g=e.onClickTeammate,k=e.footer,w=e.isTeammateCard,I=(0,x.useContext)(m.R).teamData,_=null!==(t=(0,b.Z)(I?"":r))&&void 0!==t?t:I,D=(0,A.Z)(r),P=(0,N.Z)((function(){return B.Z.get(r)}),[r]),W=(0,y.Z)(r),R=null===_||void 0===_||null===(n=_[r])||void 0===n?void 0:n.target,M=(0,x.useCallback)((function(){return r&&(null===p||void 0===p?void 0:p(r))}),[r,p]),O=(0,x.useCallback)((function(e){return(0,T.jsx)(o.Z,{onClick:M,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[M]),F=(0,x.useMemo)((function(){return D&&P&&{character:D,characterSheet:P,characterDispatch:W}}),[D,P,W]),q=(0,x.useMemo)((function(){return R&&_&&{data:R,teamData:_}}),[R,_]);return D&&q&&F?(0,T.jsx)(x.Suspense,{fallback:(0,T.jsx)(s.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:(0,T.jsx)(z.K.Provider,{value:F,children:(0,T.jsx)(m.R.Provider,{value:q,children:(0,T.jsxs)(S.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,T.jsx)(c.Z,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:(0,T.jsx)(u.Z,{sx:{p:.5},onClick:function(e){return W({favorite:!D.favorite})},children:D.favorite?(0,T.jsx)(i.Z,{}):(0,T.jsx)(a.Z,{})})}),(0,T.jsxs)(K.Z,{condition:!!p,wrapper:O,children:[(0,T.jsx)(L,{onClick:p?void 0:Z}),(0,T.jsxs)(l.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1},children:[(0,T.jsx)(Q,{}),!w&&(0,T.jsxs)(d.ZP,{container:!0,columns:4,spacing:.75,children:[(0,T.jsx)(d.ZP,{item:!0,xs:1,height:"100%",children:(0,T.jsx)(E.Z,{weaponId:D.equippedWeapon})}),(0,C.w6)(0,2).map((function(e){return(0,T.jsx)(d.ZP,{item:!0,xs:1,height:"100%",children:(0,T.jsx)(j.Z,{characterKey:D.team[e],onClick:p?void 0:g,index:e})},e)}))]}),w&&(0,T.jsx)(H,{weaponId:D.equippedWeapon}),!w&&(0,T.jsx)(V,{}),h,f,v]})]}),k]})})})}):null}function L(e){var t=e.onClick,n=(0,x.useContext)(z.K).characterSheet,r=(0,x.useContext)(m.R).data,i=r.get(Z.ri.charKey).value,a=r.get(Z.ri.charEle).value,s=r.get(Z.ri.lvl).value,u=r.get(Z.ri.constellation).value,l=r.get(Z.ri.asc).value,p=r.get(Z.ri.bonus.auto).value,g=r.get(Z.ri.bonus.skill).value,j=r.get(Z.ri.bonus.burst).value,y=r.get(Z.ri.total.auto).value,b=r.get(Z.ri.total.skill).value,k=r.get(Z.ri.total.burst).value,C=(0,x.useCallback)((function(e){return(0,T.jsx)(o.Z,{onClick:function(){return i&&(null===t||void 0===t?void 0:t(i))},sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[t,i]);return(0,T.jsx)(K.Z,{condition:!!t,wrapper:C,children:(0,T.jsxs)(c.Z,{display:"flex",position:"relative",className:"grad-".concat(n.rarity,"star"),sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:"url(".concat(n.bannerImg,")"),backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[(0,T.jsx)(c.Z,{flexShrink:1,sx:{maxWidth:{xs:"40%",lg:"40%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:(0,T.jsx)(c.Z,{component:"img",src:n.thumbImg,width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),(0,T.jsxs)(c.Z,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,children:[(0,T.jsx)(f.Z,{label:(0,T.jsx)(h.Z,{variant:"subtitle1",children:n.name}),size:"small",color:a,sx:{opacity:.85}}),(0,T.jsxs)(d.ZP,{container:!0,spacing:1,flexWrap:"nowrap",children:[(0,T.jsxs)(d.ZP,{item:!0,sx:{textShadow:"0 0 5px gray"},children:[(0,T.jsxs)(h.Z,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",s]}),(0,T.jsxs)(h.Z,{component:"span",variant:"h6",color:"text.secondary",children:["/",v.SJ[l]]})]}),(0,T.jsx)(d.ZP,{item:!0,children:(0,T.jsx)(h.Z,{variant:"h6",children:(0,T.jsxs)(_.Z,{children:["C",u]})})})]}),(0,T.jsxs)(d.ZP,{container:!0,spacing:1,flexWrap:"nowrap",children:[(0,T.jsx)(d.ZP,{item:!0,children:(0,T.jsx)(f.Z,{color:p?"info":"secondary",label:(0,T.jsx)("strong",{children:y})})}),(0,T.jsx)(d.ZP,{item:!0,children:(0,T.jsx)(f.Z,{color:g?"info":"secondary",label:(0,T.jsx)("strong",{children:b})})}),(0,T.jsx)(d.ZP,{item:!0,children:(0,T.jsx)(f.Z,{color:j?"info":"secondary",label:(0,T.jsx)("strong",{children:k})})})]}),(0,T.jsx)(h.Z,{mt:1,children:(0,T.jsx)(D.t,{stars:n.rarity,colored:!0})})]})]})})}function Q(){var e=(0,x.useContext)(p.t).database,t=(0,x.useContext)(m.R).data,n=(0,x.useMemo)((function(){return k.eV.map((function(n){var r;return[n,e._getArt(null!==(r=t.get(Z.ri.art[n].id).value)&&void 0!==r?r:"")]}))}),[t,e]);return(0,T.jsx)(d.ZP,{direction:"row",container:!0,spacing:.75,columns:5,children:n.map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,T.jsx)(d.ZP,{item:!0,xs:1,children:(0,T.jsx)(w.Z,{artifactObj:i,slotKey:n})},n)}))})}function V(){var e=(0,x.useContext)(m.R).data;return(0,T.jsxs)(c.Z,{sx:{width:"100%"},children:[Object.values(e.getDisplay().basic).map((function(e){return(0,T.jsx)(I.JW,{node:e},e.info.key)})),e.get(Z.ri.special).info.key&&(0,T.jsxs)(c.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,T.jsx)(h.Z,{flexGrow:1,children:(0,T.jsx)("strong",{children:"Specialized:"})}),P.Z[e.get(Z.ri.special).info.key],(0,T.jsx)(h.Z,{children:g.ZP.get(e.get(Z.ri.special).info.key)})]})]})}},84684:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(66647),i=n(47047),a=n(20890),o=n(68870),s=n(72791),c=n(2191),u=n(947),l=n(2139),d=n(13434),f=n(42320),h=n(96106),x=n(3992),v=n(20005),p=n(25617),m=n(75545),Z=n(80184);function g(e){var t=e.characterKey,n=void 0===t?"":t,g=e.index,j=void 0===g?-1:g,y=e.onClick,b=(0,f.Z)((function(){return u.Z.get(n)}),[n]),k=(0,d.Z)(n),C=(0,s.useCallback)((function(){return n&&(null===y||void 0===y?void 0:y(n))}),[n,y]),w=(0,s.useCallback)((function(e){return(0,Z.jsx)(r.Z,{onClick:C,children:e})}),[C]);if(b&&k){var S=(0,Z.jsx)(s.Suspense,{fallback:(0,Z.jsx)(i.Z,{variant:"text",width:100}),children:(0,Z.jsxs)(a.Z,{children:[b.elementKey&&m.Z[b.elementKey]," ",b.name]})});return(0,Z.jsx)(x.Z,{sx:{maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:(0,Z.jsxs)(v.Z,{condition:!!y,wrapper:w,children:[(0,Z.jsx)(h.Z,{placement:"top",title:S,children:(0,Z.jsx)(o.Z,{display:"flex",className:"grad-".concat(b.rarity,"star"),children:(0,Z.jsx)(o.Z,{component:"img",src:b.thumbImgSide,maxWidth:"100%",maxHeight:"100%",sx:{transform:"scale(1.4)",transformOrigin:"bottom"}})})}),(0,Z.jsx)(a.Z,{variant:"subtitle1",sx:{position:"absolute",top:0,mt:-.2,lineHeight:1,pointerEvents:"none"},children:(0,Z.jsxs)(p.Z,{color:"primary",children:[k.level,"/",l.SJ[k.ascension]]})}),(0,Z.jsx)(a.Z,{variant:"subtitle1",sx:{position:"absolute",bottom:0,right:0,lineHeight:1,pointerEvents:"none"},children:(0,Z.jsxs)(p.Z,{color:"secondary",children:["C",k.constellation]})})]})})}return(0,Z.jsx)(x.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:"12.5%"},children:(0,Z.jsx)(o.Z,{component:"img",src:c.Z.team["team".concat(j+2)],sx:{width:"75%",height:"auto",opacity:.7}})})}},3082:function(e,t,n){n.d(t,{w:function(){return A}});var r=n(93433),i=n(29439),a=n(14361),o=n(90690),s=n(39504),c=n(61889),u=n(58165),l=n(94721),d=n(47047),f=n(68870),h=n(13400),x=n(66647),v=n(20890),p=n(72791),m=n(22020),Z=n(2191),g=n(947),j=n(56928),y=n(26138),b=n(50920),k=n(68544),C=n(42320),w=n(47639),S=n(24351),K=n(50921),I=n(46956),_=n(3992),D=n(71310),P=n(68198),E=n(55942),W=n(9321),R=n(59215),N=n(25617),M=n(10157),T=n(75545),H=n(48510),O=n(73578),z=n(80184),B=["level","rarity","name"];function A(e){var t=e.show,n=e.onHide,a=e.onSelect,o=e.filter,d=void 0===o?function(){return!0}:o,f=e.newFirst,h=void 0!==f&&f,x=(0,p.useMemo)((function(){return h?["new"].concat(B):B}),[h]),v=(0,p.useContext)(j.t).database,Z=(0,m.$)(["page_character","charNames_gen"]).t,y=(0,p.useState)(x[0]),b=(0,i.Z)(y,2),w=b[0],D=b[1],E=(0,p.useState)(!1),N=(0,i.Z)(E,2),M=N[0],T=N[1],A=(0,p.useState)((0,r.Z)(S.N)),L=(0,i.Z)(A,2),Q=L[0],V=L[1],q=(0,p.useState)((0,r.Z)(S.yd)),G=(0,i.Z)(q,2),J=G[0],X=G[1],Y=(0,C.Z)((function(){return g.Z.getAll}),[]),U=(0,k.Z)(),$=(0,i.Z)(U,2),ee=$[0],te=$[1];(0,p.useEffect)((function(){return v.followAnyChar(te)}),[v,te]);var ne=(0,p.useState)(""),re=(0,i.Z)(ne,2),ie=re[0],ae=re[1],oe=(0,p.useDeferredValue)(ie),se=(0,p.useMemo)((function(){return Y&&(0,K._L)(v,Y)}),[v,Y]),ce=(0,p.useMemo)((function(){return Y&&ee&&(0,K.zU)(v,Y)}),[ee,v,Y]),ue=(0,p.useMemo)((function(){return Y?S.IV.filter((function(e){return d(v._getChar(e),Y[e])})):[]}),[v,Y,d]),le=(0,p.useMemo)((function(){return Y&&se&&ce?ue.filter((0,I.C)({element:Q,weaponType:J,favorite:"yes",name:oe},ce)).sort((0,I.e)(w,M,se)).concat(ue.filter((0,I.C)({element:Q,weaponType:J,favorite:"no",name:oe},ce)).sort((0,I.e)(w,M,se))):[]}),[Y,Q,J,w,M,se,ce,ue,oe]);return Y?(0,z.jsx)(W.Z,{open:t,onClose:n,sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:(0,z.jsxs)(_.Z,{children:[(0,z.jsx)(s.Z,{sx:{py:1},children:(0,z.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(c.ZP,{item:!0,children:(0,z.jsx)(O.Z,{sx:{height:"100%"},onChange:X,value:J,size:"small"})}),(0,z.jsx)(c.ZP,{item:!0,children:(0,z.jsx)(H.Z,{sx:{height:"100%"},onChange:V,value:Q,size:"small"})}),(0,z.jsx)(c.ZP,{item:!0,children:(0,z.jsx)(u.Z,{autoFocus:!0,value:ie,onChange:function(e){return ae(e.target.value)},label:Z("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,z.jsx)(c.ZP,{item:!0,flexGrow:1}),(0,z.jsx)(c.ZP,{item:!0,children:(0,z.jsx)(R.Z,{sx:{height:"100%"},sortKeys:x,value:w,onChange:D,ascending:M,onChangeAsc:T})}),(0,z.jsx)(c.ZP,{item:!0,children:(0,z.jsx)(P.Z,{onClick:n})})]})}),(0,z.jsx)(l.Z,{}),(0,z.jsx)(s.Z,{children:(0,z.jsx)(c.ZP,{container:!0,spacing:1,children:le.map((function(e){return(0,z.jsx)(c.ZP,{item:!0,xs:6,md:4,lg:3,children:(0,z.jsx)(F,{characterKey:e,characterSheet:Y[e],onClick:function(){n(),null===a||void 0===a||a(e)}},e)},e)}))})})]})}):null}function F(e){var t,n,r,i=e.onClick,s=e.characterKey,c=e.characterSheet,u=(0,w.Z)(s),l=(0,p.useContext)(j.t).database,m=(0,b.Z)(s),k=null===(t=l._getChar(s))||void 0===t?void 0:t.favorite,C=(null!==(n=null===u||void 0===u?void 0:u[s])&&void 0!==n?n:{}).target,S=c.rarity;return(0,z.jsx)(p.Suspense,{fallback:(0,z.jsx)(d.Z,{variant:"rectangular",height:130}),children:(0,z.jsxs)(f.Z,{children:[void 0!==k&&(0,z.jsx)(f.Z,{display:"flex",position:"absolute",alignSelf:"start",zIndex:1,children:(0,z.jsx)(h.Z,{sx:{p:.5},onClick:function(){return m({favorite:!k})},children:k?(0,z.jsx)(a.Z,{}):(0,z.jsx)(o.Z,{})})}),(0,z.jsx)(x.Z,{onClick:i,children:(0,z.jsxs)(D.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,z.jsx)(f.Z,{component:"img",src:c.thumbImg,sx:{width:130,height:"auto"},className:"grad-".concat(S,"star")}),(0,z.jsxs)(f.Z,{sx:{pl:1},children:[(0,z.jsx)(v.Z,{children:(0,z.jsx)("strong",{children:c.name})}),C?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(v.Z,{variant:"h6",children:[" ",c.elementKey&&T.Z[c.elementKey]," ",(0,z.jsx)(E.Z,{src:null===(r=Z.Z.weaponTypes)||void 0===r?void 0:r[c.weaponTypeKey]})," ",g.Z.getLevelString(C.get(y.ri.lvl).value,C.get(y.ri.asc).value)]}),(0,z.jsxs)(v.Z,{children:[(0,z.jsx)(N.Z,{color:"success",children:"C".concat(C.get(y.ri.constellation).value)})," ",(0,z.jsx)(N.Z,{color:C.get(y.ri.bonus.auto).value?"info":"secondary",children:(0,z.jsx)("strong",{children:C.get(y.ri.total.auto).value})})," ",(0,z.jsx)(N.Z,{color:C.get(y.ri.bonus.skill).value?"info":"secondary",children:(0,z.jsx)("strong",{children:C.get(y.ri.total.skill).value})})," ",(0,z.jsx)(N.Z,{color:C.get(y.ri.bonus.burst).value?"info":"secondary",children:(0,z.jsx)("strong",{children:C.get(y.ri.total.burst).value})})]})]}):(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(v.Z,{variant:"h6",children:(0,z.jsx)(N.Z,{color:"primary",children:"NEW"})})}),(0,z.jsx)("small",{children:(0,z.jsx)(M.t,{stars:S,colored:!0})})]})]})})]})})}},88034:function(e,t,n){n.d(t,{lD:function(){return I},JW:function(){return K},ZP:function(){return C}});var r=n(35893),i=n(15021),a=n(68870),o=n(20890),s=n(47047),c=n(66934),u=n(90493),l=n(72791),d=n(2693),f=n(79406),h=n(60393),x=n(91702),v=n(1413),p=n(45987),m=n(53174),Z=n(54483),g=n(96106),j=n(80184),y=["className"],b=function(e){var t=e.className,n=(0,p.Z)(e,y);return(0,j.jsx)(g.Z,(0,v.Z)((0,v.Z)({placement:"top"},n),{},{className:t,children:(0,j.jsx)(a.Z,{component:"span",sx:{cursor:"help"},children:(0,j.jsx)(Z.G,{icon:m.Fuz})})}))},k=n(75545);function C(e){var t=e.fields;return(0,j.jsx)(I,{sx:{m:0},children:t.map((function(e,t){return(0,j.jsx)(w,{field:e,component:i.ZP},t)}))})}function w(e){var t=e.field,n=e.component,r=(0,l.useContext)(d.R),i=r.data,a=r.oldData;if(!(0,l.useMemo)((function(){var e,n;return null===(e=null===t||void 0===t||null===(n=t.canShow)||void 0===n?void 0:n.call(t,i))||void 0===e||e}),[t,i]))return null;if("node"in t){var o=i.get(t.node);if(o.isEmpty)return null;if(a){var s=a.get(t.node),c=s.isEmpty?0:s.value;return(0,j.jsx)(K,{node:o,oldValue:c,suffix:t.textSuffix,component:n})}return(0,j.jsx)(K,{node:o,suffix:t.textSuffix,component:n})}return(0,j.jsx)(S,{field:t,component:n})}function S(e){var t,n=e.field,r=e.component,i=(0,l.useContext)(d.R).data,s=(0,h.mY)(n.value,i),c=(0,h.mY)(n.variant,i),u=n.text&&(0,j.jsx)("span",{children:n.text}),f=n.textSuffix&&(0,j.jsx)("span",{children:n.textSuffix});return(0,j.jsxs)(a.Z,{width:"100%",sx:{display:"flex",justifyContent:"space-between",gap:1},component:r,children:[(0,j.jsxs)(o.Z,{color:"".concat(c,".main"),sx:{display:"flex",gap:1,alignItems:"center"},children:[u,f]}),(0,j.jsxs)(o.Z,{children:["number"===typeof s?null===(t=s.toFixed)||void 0===t?void 0:t.call(s,n.fixed):s,n.unit]})]})}function K(e){var t=e.node,n=e.oldValue,i=e.suffix,c=e.component;if(t.isEmpty)return null;i=i&&(0,j.jsx)("span",{children:i});var u=t.info.key&&k.Z[t.info.key],d=t.info.key?f.ZP.get(t.info.key):"",h=t.info.isTeamBuff,v=t.formula,p="";if(n){var m=t.value-n;p=(0,j.jsxs)("span",{children:[(0,f.EC)(n,t.unit),m>1e-4||m<-1e-4?(0,j.jsxs)(x.Z,{color:m>0?"success":"error",children:[" ",m>0?"+":"",(0,f.EC)(m,t.unit)]}):""]})}else p=(0,f.EC)(t.value,t.unit);var Z=!!t.formula&&(0,j.jsx)(b,{title:(0,j.jsx)(o.Z,{children:(0,j.jsx)(l.Suspense,{fallback:(0,j.jsx)(s.Z,{variant:"rectangular",width:300,height:30}),children:v})})});return(0,j.jsxs)(a.Z,{width:"100%",sx:{display:"flex",justifyContent:"space-between",gap:1},component:c,children:[(0,j.jsxs)(o.Z,{color:"".concat(t.info.variant,".main"),sx:{display:"flex",gap:1,alignItems:"center"},children:[!!h&&(0,j.jsx)(r.Z,{}),u,d,i]}),(0,j.jsxs)(a.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,j.jsx)(o.Z,{noWrap:!0,children:p}),Z]})]})}var I=(0,c.ZP)(u.Z)((function(e){var t=e.theme;return{borderRadius:t.shape.borderRadius,overflow:"hidden",margin:0,"> .MuiListItem-root:nth-of-type(even)":{backgroundColor:t.palette.contentDark.main},"> .MuiListItem-root:nth-of-type(odd)":{backgroundColor:t.palette.contentDarker.main}}}))},48510:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(1413),i=n(45987),a=n(93433),o=n(72466),s=n(68870),c=n(24351),u=n(75308),l=n(66934),d=n(90388),f=(0,l.ZP)(d.Z,{shouldForwardProp:function(e){return"baseColor"!==e&&"selectedColor"!==e}})((function(e){var t=e.theme,n=e.baseColor,r=void 0===n?"secondary":n,i=e.selectedColor,a=void 0===i?"success":i;return{"&":{backgroundColor:t.palette[r].main,color:t.palette[r].contrastText},"&:hover":{backgroundColor:t.palette[r].dark},"&.Mui-selected":{backgroundColor:t.palette[a].main,color:t.palette[a].contrastText},"&.Mui-selected:hover":{backgroundColor:t.palette[a].dark},"&.Mui-disabled":{backgroundColor:t.palette[r].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:t.palette[a].dark}}})),h=n(75545),x=n(80184),v=["value","onChange"],p=(0,u.X)((0,a.Z)(c.N));function m(e){var t=e.value,n=e.onChange,a=(0,i.Z)(e,v);return(0,x.jsx)(o.Z,(0,r.Z)((0,r.Z)({exclusive:!0,value:t},a),{},{children:c.N.map((function(e){return(0,x.jsx)(f,{value:e,selectedColor:e,onClick:function(){return n(p(t,e))},children:(0,x.jsx)(s.Z,{sx:{fontSize:"2em",lineHeight:1},children:h.h[e]})},e)}))}))}},73578:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(1413),i=n(45987),a=n(93433),o=n(90388),s=n(2191),c=n(24351),u=n(75308),l=n(55942),d=n(91839),f=n(80184),h=["value","onChange"],x=(0,u.X)((0,a.Z)(c.yd));function v(e){var t=e.value,n=e.onChange,a=(0,i.Z)(e,h);return(0,f.jsx)(d.Z,(0,r.Z)((0,r.Z)({exclusive:!0,value:t},a),{},{children:c.yd.map((function(e){var r;return(0,f.jsx)(o.Z,{value:e,onClick:function(){return n(x(t,e))},children:(0,f.jsx)(l.Z,{src:null===(r=s.Z.weaponTypes)||void 0===r?void 0:r[e],size:2})},e)}))}))}},77208:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(68870),i=n(20890),a=n(72791),o=n(66218),s=n(56928),c=n(26138),u=n(73036),l=n(79406),d=n(42320),f=n(3992),h=n(25617),x=n(75545),v=n(41717),p=n(80184);function m(e){var t=e.weaponId,n=(0,a.useContext)(s.t).database._getWeapon(t),l=(0,d.Z)((function(){return(null===n||void 0===n?void 0:n.key)&&o.Z.get(n.key)}),[null===n||void 0===n?void 0:n.key]),x=(0,a.useMemo)((function(){return l&&n&&(0,u.mP)([l.data,(0,u.v0)(n)])}),[l,n]);if(!n||!l||!x)return null;var m=(0,p.jsxs)(r.Z,{children:[(0,p.jsx)(Z,{node:x.get(c.ri.weapon.main)}),(0,p.jsx)(Z,{node:x.get(c.ri.weapon.sub)})]});return(0,p.jsxs)(f.Z,{sx:{height:"100%",maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:[(0,p.jsx)(r.Z,{display:"flex",flexDirection:"column",alignContent:"flex-end",className:"grad-".concat(l.rarity,"star"),children:(0,p.jsx)(v.Z,{sheet:l,addlText:m,children:(0,p.jsx)(r.Z,{component:"img",src:l.getImg(n.ascension),maxWidth:"100%",maxHeight:"100%",sx:{mt:"auto"}})})}),(0,p.jsx)(i.Z,{variant:"subtitle1",sx:{position:"absolute",mt:-.2,lineHeight:1,pointerEvents:"none"},children:(0,p.jsx)(h.Z,{color:"primary",children:o.Z.getLevelString(n)})}),l.hasRefinement&&(0,p.jsx)(i.Z,{variant:"subtitle1",sx:{position:"absolute",bottom:0,right:0,lineHeight:1,pointerEvents:"none"},children:(0,p.jsxs)(h.Z,{color:"secondary",children:["R",n.refinement]})})]})}function Z(e){var t=e.node;if(!t.info.key)return null;var n=(0,l.EC)(t.value,t.unit,t.unit?void 0:0);return(0,p.jsxs)(i.Z,{children:[x.Z[t.info.key]," ",n]})}},41717:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(47047),i=n(20890),a=n(72791),o=n(2191),s=n(96106),c=n(55942),u=n(80184);function l(e){var t=e.sheet,n=e.addlText,l=e.children,d=(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(r.Z,{variant:"text",width:100}),children:[(0,u.jsxs)(i.Z,{children:[(0,u.jsx)(c.Z,{src:o.Z.weaponTypes[t.weaponType]})," ",t.name]}),n]});return(0,u.jsx)(s.Z,{placement:"top",title:d,disableInteractive:!0,children:l})}},2693:function(e,t,n){n.d(t,{R:function(){return r}});var r=(0,n(72791).createContext)({})},31148:function(e,t,n){n.d(t,{i:function(){return g},y:function(){return Z}});var r=n(29439),i=n(93433),a=n(15671),o=n(43144),s=n(55942),c=n(25617),u=n(66624),l=n(26138),d=n(73036),f=n(24351),h=n(53343),x=n(80184),v=n.e(94).then(n.bind(n,39896)).then((function(e){return e.default})),p=function(e,t){return(0,x.jsx)(u.v,{ns:"artifact_".concat(e,"_gen"),key18:t})},m=v.then((function(e){return(0,d.b3)(Object.values(e).map((function(e){return e.data})))})),Z=function(){function e(t,n,r){var i=this;(0,a.Z)(this,e),this.sheet=void 0,this.key=void 0,this.data=void 0,this.getSlotName=function(e){return p(i.key,"pieces.".concat(e,".name"))},this.getSlotDesc=function(e){return p(i.key,"pieces.".concat(e,".desc"))},this.setEffectDesc=function(e){return p(i.key,"setEffects.".concat(e))},this.setEffectDocument=function(e){var t;return null===(t=i.sheet.setEffects[e])||void 0===t?void 0:t.document},this.hasEnough=function(e,t){var n;return(null!==(n=t.get(l.qH.artSet[i.key]).value)&&void 0!==n?n:0)>=e},this.sheet=n,this.key=t,this.data=r}return(0,o.Z)(e,[{key:"name",get:function(){return p(this.key,"setName")}},{key:"defIconSrc",get:function(){var e=this.slots[0];if(this.slotIcons[e])return this.slotIcons[e]}},{key:"defIcon",get:function(){return(0,x.jsx)(s.Z,{src:this.defIconSrc,sx:{fontSize:"1.5em"}})}},{key:"nameWithIcon",get:function(){var e=this.slots[0];return(0,x.jsxs)("span",{children:[(0,x.jsx)(s.Z,{src:this.slotIcons[e]})," ",p(this.key,"setName")]})}},{key:"nameRaw",get:function(){return this.sheet.name}},{key:"rarity",get:function(){return this.sheet.rarity}},{key:"slots",get:function(){switch(this.key){case"PrayersForDestiny":case"PrayersForIllumination":case"PrayersForWisdom":case"PrayersToSpringtime":return["circlet"];default:return(0,i.Z)(f.eV)}}},{key:"slotIcons",get:function(){return this.sheet.icons}},{key:"setEffects",get:function(){return this.sheet.setEffects}}],[{key:"get",value:function(e){return e?v.then((function(t){return t[e]})):void 0}},{key:"getAll",get:function(){return v}},{key:"getAllData",get:function(){return m}},{key:"setKeysByRarities",value:function(e){var t={};return Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),a=n[0],o=n[1],s=Math.max.apply(Math,(0,i.Z)(o.rarity));t[s]?t[s].push(a):t[s]=[a]})),t}},{key:"setEffects",value:function(e,t){var n={};return Object.entries(e).forEach((function(e){var i=(0,r.Z)(e,2),a=i[0],o=i[1],s=Object.keys(o.setEffects).map((function(e){return parseInt(e)})).filter((function(e){return o.hasEnough(e,t)}));s.length&&(n[a]=s)})),n}}]),e}(),g=function(e,t){var n=function(t){return(0,x.jsx)(u.v,{ns:"artifact_".concat(e,"_gen"),key18:t})};return function(e){var r,i;return{title:n("setName"),icon:(0,x.jsx)(s.Z,{size:2,sx:{m:-1},src:null!==(r=null!==(i=t.flower)&&void 0!==i?i:t.circlet)&&void 0!==r?r:""}),action:(0,x.jsx)(c.Z,{color:"success",children:(0,h.st)("".concat(e,"set"))}),description:n("setEffects.".concat(e))}}}},11741:function(e,t,n){n.d(t,{J:function(){return N},Y:function(){return M}});var r,i=n(1413),a=n(75545),o=n(66624),s=n(26138),c=n(73036),u=n(78661),l=n(24351),d=n(60393),f=n(53343),h=n(80184),x=function(e){return(0,h.jsx)(o.v,{ns:"elementalResonance_gen",key18:e})},v=(0,d.Uq)(l.Kj,(function(e){return["".concat(e,"_res_"),(0,u.ew)(s.uK.ele,4,(0,u.aQ)(.15))]})),p={name:x("ProtectiveCanopy.name"),desc:x("ProtectiveCanopy.desc"),icon:(0,h.jsxs)("span",{children:[a.Z.anemo," ",a.Z.geo," ",a.Z.pyro," ",a.Z.hydro," ",a.Z.cryo," ",a.Z.electro," x4"]}),canShow:function(e){return 4===l.N.filter((function(t){return e.get(s.uK[t]).value>=1})).length},sections:[{teamBuff:!0,fields:Object.values(v).map((function(e){return{node:e}}))}]},m=(0,u.ew)(s.uK.pyro,2,(0,u.aQ)(.25)),Z={name:x("FerventFlames.name"),desc:x("FerventFlames.desc"),icon:(0,h.jsxs)("span",{children:[a.Z.pyro," ",a.Z.pyro]}),canShow:function(e){return e.get(s.uK.pyro).value>=2},sections:[{teamBuff:!0,fields:[{text:(0,f.st)("effectDuration.cryo"),value:-40,unit:"%"},{node:m}]}]},g=(0,u.ew)(s.uK.hydro,2,(0,u.aQ)(.3)),j={name:x("SoothingWater.name"),desc:x("SoothingWater.desc"),icon:(0,h.jsxs)("span",{children:[a.Z.hydro," ",a.Z.hydro]}),canShow:function(e){return e.get(s.uK.hydro).value>=2},sections:[{teamBuff:!0,fields:[{text:(0,f.st)("effectDuration.pyro"),value:-40,unit:"%"},{node:g}]}]},y=["resonance","ShatteringIce"],b=(0,f.v9)(y),k=(0,u.ew)(s.uK.cryo,2,(0,u.Dg)(b,"on",(0,u.aQ)(.15))),C={name:x("ShatteringIce.name"),desc:x("ShatteringIce.desc"),icon:(0,h.jsxs)("span",{children:[a.Z.cryo," ",a.Z.cryo]}),canShow:function(e){return e.get(s.uK.cryo).value>=2},sections:[{teamBuff:!0,fields:[{text:(0,f.st)("effectDuration.electro"),value:-40,unit:"%"}]},{teamBuff:!0,path:y,value:b,name:(r="ShatteringIce.cond",(0,h.jsx)(o.v,{ns:"elementalResonance",key18:r})),header:{title:x("ShatteringIce.name"),icon:a.Z.cryo},states:{on:{fields:[{node:k}]}}}]},w={name:x("HighVoltage.name"),desc:x("HighVoltage.desc"),icon:(0,h.jsxs)("span",{children:[a.Z.electro," ",a.Z.electro]}),canShow:function(e){return e.get(s.uK.electro).value>=2},sections:[{teamBuff:!0,fields:[{text:(0,f.st)("effectDuration.hydro"),value:-40,unit:"%"}]}]},S=(0,u.ew)(s.uK.anemo,2,(0,u.aQ)(-.15)),K=(0,u.ew)(s.uK.anemo,2,(0,u.aQ)(.1)),I=(0,u.ew)(s.uK.anemo,2,(0,u.aQ)(-.05)),_={name:x("ImpetuousWinds.name"),desc:x("ImpetuousWinds.desc"),icon:(0,h.jsxs)("span",{children:[a.Z.anemo," ",a.Z.anemo]}),canShow:function(e){return e.get(s.uK.anemo).value>=2},sections:[{teamBuff:!0,fields:[{node:S},{node:K},{node:I}]}]},D=["resonance","EnduringRock"],P=(0,f.v9)(D),E=(0,u.ew)(s.uK.geo,2,(0,u.aQ)(.15)),W=(0,u.ew)(s.uK.geo,2,(0,u.Dg)(P,"on",(0,u.aQ)(.15))),R=(0,u.ew)(s.uK.geo,2,(0,u.Dg)(P,"on",(0,u.aQ)(-.2))),N=[p,Z,j,C,w,_,{name:x("EnduringRock.name"),desc:x("EnduringRock.desc"),icon:(0,h.jsxs)("span",{children:[a.Z.geo," ",a.Z.geo]}),canShow:function(e){return e.get(s.uK.geo).value>=2},sections:[{teamBuff:!0,text:x("EnduringRock.desc"),fields:[{node:E}]},{teamBuff:!0,path:D,value:P,header:{title:x("EnduringRock.name"),icon:a.Z.geo},name:(0,f.st)("protectedByShield"),states:{on:{fields:[{node:W},{node:R},{text:(0,f.Oy)("duration"),value:15,unit:"s"}]}}}]}],M=(0,c.d1)({premod:(0,i.Z)((0,i.Z)({},v),{},{atk_:m,incHeal_:g,staminaDec_:S,moveSPD_:K,cdRed_:I,shield_:E,all_dmg_:W,geo_enemyRes_:R}),total:{critRate_:k}})},66218:function(e,t,n){n.d(t,{X:function(){return x},Z:function(){return h}});var r=n(29439),i=n(15671),a=n(43144),o=n(55942),s=n(25617),c=n(66624),u=n(26138),l=n(2139),d=n(80184),f=n.e(460).then(n.bind(n,72953)).then((function(e){return e.default})),h=function(){function e(t,n,r,a){var o=this;(0,i.Z)(this,e),this.key=void 0,this.sheet=void 0,this.data=void 0,this.rarity=void 0,this.weaponType=void 0,this.tr=function(e){return(0,d.jsx)(c.v,{ns:"weapon_".concat(o.key,"_gen"),key18:e})},this.passiveDescription=function(e){return o.hasRefinement?o.tr("passiveDescription.".concat(e)):""},this.rarity=r.rarity,this.weaponType=r.weaponType,this.key=t,this.sheet=n,this.data=a}return(0,a.Z)(e,[{key:"name",get:function(){return this.tr("name")}},{key:"hasRefinement",get:function(){return this.rarity>2}},{key:"passiveName",get:function(){return this.hasRefinement?this.tr("passiveName"):""}},{key:"description",get:function(){return this.tr("description")}},{key:"document",get:function(){return this.sheet.document}},{key:"milestoneLevels",get:function(){return this.hasRefinement?l.D4:l.Xu}},{key:"ambiguousLevel",value:function(e){return this.hasRefinement?(0,l.ek)(e):(0,l.nB)(e)}},{key:"getImg",value:function(e){return e<2?this.sheet.icon:this.sheet.iconAwaken}}],[{key:"getAll",get:function(){return f}}]),e}();h.get=function(e){return e?f.then((function(t){return t[e]})):void 0},h.getWeaponsOfType=function(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var n=(0,r.Z)(e,2);n[0];return n[1].weaponType===t})))},h.getLevelString=function(e){return"".concat(e.level,"/").concat(l.SJ[e.ascension])};var x=function(e,t,n,r){var i=function(t){return(0,d.jsx)(c.v,{ns:"weapon_".concat(e,"_gen"),key18:t})};return{title:i("passiveName"),icon:function(e){return(0,d.jsx)(o.Z,{size:2,sx:{m:-1},src:e.get(u.qH.weapon.asc).value<2?t:n})},action:r&&(0,d.jsx)(s.Z,{color:"success",children:r}),description:function(e){return i("passiveDescription.".concat(e.get(u.qH.weapon.refineIndex).value))}}}},566:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(74165),i=n(15861),a=n(72791),o=n(16871),s=n(947),c=n(56928),u=n(24351),l=n(11400),d=n(60393);function f(){var e,t=(0,a.useContext)(c.t).database,n=(0,o.s0)(),f=(null!==(e=(0,o.bS)({path:"/characters/:charKey/:tab",end:!1}))&&void 0!==e?e:{params:{tab:""}}).params.tab,h=void 0===f?"":f,x=(0,a.useCallback)(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i){var a,o,c,f,x,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t._getChar(i),o=h,a){e.next=14;break}return c={key:i,level:1,ascension:0,hitMode:"avgHit",reactionMode:"",equippedArtifacts:(0,d.O)(u.eV,(function(){return""})),equippedWeapon:"",conditional:{},bonusStats:{},enemyOverride:{},talent:{auto:1,skill:1,burst:1},infusionAura:"",constellation:0,team:["","",""],compareData:!1,favorite:!1},t.updateChar(c),e.next=7,s.Z.get(i);case 7:if(f=e.sent){e.next=10;break}return e.abrupt("return");case 10:x=(0,l.Q)(f.weaponTypeKey),v=t.createWeapon(x),t.setWeaponLocation(v,i),o="";case 14:n("/characters/".concat(i,"/").concat(o));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,t,h]);return x}},13434:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(29439),i=n(72791),a=n(56928);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,i.useContext)(a.t),n=t.database,o=(0,i.useState)(n._getChar(e)),s=(0,r.Z)(o,2),c=s[0],u=s[1];return(0,i.useEffect)((function(){return u(n._getChar(e))}),[n,e]),(0,i.useEffect)((function(){return e?n.followChar(e,u):void 0}),[e,u,n]),c}},50920:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(93433),i=n(4942),a=n(1413),o=n(72791),s=n(56928),c=n(60393);function u(e){var t=(0,o.useContext)(s.t).database;return(0,o.useCallback)((function(n){if(e)if("type"in n)switch(n.type){case"weapon":t.setWeaponLocation(n.id,e);break;case"enemyOverride":var o=t._getChar(e),s=o.enemyOverride,u=n.statKey,l=n.value;if(s[u]===l)break;t.updateChar((0,a.Z)((0,a.Z)({},o),{},{enemyOverride:(0,a.Z)((0,a.Z)({},s),{},(0,i.Z)({},u,l))}));break;case"editStats":var d=t._getChar(e),f=n.statKey,h=n.value,x=(0,c.I8)(d.bonusStats);if(x[f]===h)break;h?x[f]=h:delete x[f],t.updateChar((0,a.Z)((0,a.Z)({},d),{},{bonusStats:x}));break;case"resetStats":var v=t._getChar(e),p=n.statKey,m=v.bonusStats;delete m[p],t.updateChar((0,a.Z)((0,a.Z)({},v),{},{bonusStats:m}));break;case"team":var Z=t._getChar(e),g=Z.team,j=n.index,y=n.charKey,b=g[j];if(g[j]=y,b){var k=t._getChar(b);k&&t.updateChar((0,a.Z)((0,a.Z)({},k),{},{team:["","",""]}))}if(y){var C=t._getChar(y);C&&C.team.forEach((function(e){if(e){var n=t._getChar(e);n&&t.updateChar((0,a.Z)((0,a.Z)({},n),{},{team:n.team.map((function(e){return e===y?"":e}))}))}}))}g.forEach((function(n,i){if(n){var o=t._getChar(n);o&&t.updateChar((0,a.Z)((0,a.Z)({},o),{},{team:[e].concat((0,r.Z)(g)).filter((function(e,t){return t!==i+1}))}))}})),t.updateChar((0,a.Z)((0,a.Z)({},Z),{},{team:g}))}else t.updateChar((0,a.Z)((0,a.Z)({},t._getChar(e)),n))}),[e,t])}},47639:function(e,t,n){n.d(t,{V:function(){return w},Z:function(){return b}});var r=n(93433),i=n(4942),a=n(74165),o=n(1413),s=n(45987),c=n(15861),u=n(29439),l=n(72791),d=n(31148),f=n(947),h=n(11741),x=n(66218),v=n(56928),p=n(26138),m=n(73036),Z=n(60393),g=n(68544),j=n(42320),y=["data"];function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=(0,l.useContext)(v.t),a=i.database,o=(0,g.Z)(),s=(0,u.Z)(o,2),c=s[0],d=s[1],f=(0,l.useDeferredValue)(c),h=(0,j.Z)((function(){return k(a,e,t,n,r)}),[f,e,a,t,n,r]);(0,l.useEffect)((function(){return e?a.followChar(e,d):void 0}),[e,d,a]),(0,l.useEffect)((function(){return e?a.followAnyArt(d):void 0}),[e,d,a]);var x=Object.keys(null!==h&&void 0!==h?h:{}),p=(0,u.Z)(x,4),m=p[0],Z=p[1],y=p[2],b=p[3];return(0,l.useEffect)((function(){return m?a.followChar(m,d):void 0}),[m,d,a]),(0,l.useEffect)((function(){return Z?a.followChar(Z,d):void 0}),[Z,d,a]),(0,l.useEffect)((function(){return y?a.followChar(y,d):void 0}),[y,d,a]),(0,l.useEffect)((function(){return b?a.followChar(b,d):void 0}),[b,d,a]),h}function k(e,t){return C.apply(this,arguments)}function C(){return C=(0,c.Z)((0,a.Z)().mark((function e(t,n){var r,i,c,u,l,d,f,h,x,v,p=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=p.length>2&&void 0!==p[2]?p[2]:0,c=p.length>3?p[3]:void 0,u=p.length>4?p[4]:void 0,n){e.next=5;break}return e.abrupt("return");case 5:if(i||c||u){e.next=9;break}if(!(l=t._getTeamData(n))){e.next=9;break}return e.abrupt("return",l);case 9:return e.next=11,w(t,n,i,c,u);case 11:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=15;break}e.t0=void 0!==r;case 15:if(!e.t0){e.next=19;break}e.t2=r,e.next=20;break;case 19:e.t2={};case 20:if(d=e.t2,f=d.teamData,h=d.teamBundle,f&&h){e.next=25;break}return e.abrupt("return");case 25:return x=(0,m.Qo)(f,n),v=(0,Z.xh)(x,(function(e,t){var n=h[t],r=(n.data,(0,s.Z)(n,y));return(0,o.Z)((0,o.Z)({},e),r)})),i||c||u||t.cacheTeamData(n,v),e.abrupt("return",v);case 29:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function w(e,t){return S.apply(this,arguments)}function S(){return S=(0,c.Z)((0,a.Z)().mark((function e(t,n){var r,o,s,u,l,d,f=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>2&&void 0!==f[2]?f[2]:0,o=f.length>3?f[3]:void 0,s=f.length>4?f[4]:void 0,n){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,K(t,n,r,o,s);case 7:if(u=e.sent){e.next=10;break}return e.abrupt("return");case 10:return l=(0,i.Z)({},n,u),d=(0,i.Z)({},n,u.data),e.next=14,Promise.all(u.character.team.map(function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,K(t,n);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:l[n]=r,d[n]=r.data;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",{teamData:d,teamBundle:l});case 15:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function K(e,t){return I.apply(this,arguments)}function I(){return I=(0,c.Z)((0,a.Z)().mark((function e(t,n){var i,o,s,c,l,v,Z,g,j,y,b,k,C=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=C.length>2&&void 0!==C[2]?C[2]:0,o=C.length>3?C[3]:void 0,s=C.length>4?C[4]:void 0,n){e.next=5;break}return e.abrupt("return");case 5:if(c=t._getChar(n)){e.next=8;break}return e.abrupt("return");case 8:if(l=null!==s&&void 0!==s?s:t._getWeapon(c.equippedWeapon)){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,Promise.all([f.Z.get(n),x.Z.get(l.key),d.y.getAllData]);case 13:if(v=e.sent,Z=(0,u.Z)(v,3),g=Z[0],j=Z[1],y=Z[2],g&&j&&y){e.next=20;break}return e.abrupt("return");case 20:return b=(null!==o&&void 0!==o?o:Object.values(c.equippedArtifacts).map((function(e){return t._getArt(e)}))).filter((function(e){return e})),k=[].concat((0,r.Z)(b.map((function(e){return(0,m.n3)(e,i)}))),[(0,m.vn)(c),g.getData(c.elementKey),(0,m.v0)(l),j.data,y,p.y0,h.Y]),e.abrupt("return",{character:c,weapon:l,characterSheet:g,weaponSheet:j,data:k});case 23:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}},75308:function(e,t,n){n.d(t,{X:function(){return a}});var r=n(93433),i=n(60393);function a(e){return function(t,n){var a=t.length;return a===e.length?[n]:1===a&&t[0]===n?(0,r.Z)(e):(0,r.Z)(new Set((0,i.nh)(t,n)))}}}}]);
//# sourceMappingURL=426.13fa39dd.chunk.js.map