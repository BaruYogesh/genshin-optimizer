"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[418],{21977:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(29439),i=t(57621),a=t(10889),s=t(72791),l=t(60393),c=t(10600),o=t(80184);function u(e){var n=e.levelLow,t=e.levelHigh,u=e.setLow,d=e.setHigh,f=e.setBoth,h=e.dark,x=void 0!==h&&h,m=e.disabled,v=void 0!==m&&m,p=(0,s.useState)(n),Z=(0,r.Z)(p,2),j=Z[0],g=Z[1],b=(0,s.useState)(t),y=(0,r.Z)(b,2),k=y[0],w=y[1],C=(0,s.useCallback)((function(e,n){var t=(0,r.Z)(n,2),i=t[0],a=t[1];g(i),w(a)}),[g,w]);return(0,s.useEffect)((function(){return g(n)}),[g,n]),(0,s.useEffect)((function(){return w(t)}),[w,t]),(0,o.jsxs)(i.Z,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:x?"contentDark.main":"contentLight.main"},children:[(0,o.jsx)(c.ZP,{value:j,onChange:function(e){return u((0,l.uZ)(e,0,t))},sx:{pl:2,width:100},inputProps:{sx:{textAlign:"center"}},startAdornment:"Level: ",disabled:v}),(0,o.jsx)(a.ZP,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:function(){return"Arifact Level Range"},value:[j,k],onChange:C,onChangeCommitted:function(e,n){return f(n[0],n[1])},valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:v}),(0,o.jsx)(c.ZP,{value:k,onChange:function(e){return d((0,l.uZ)(e,n,20))},sx:{px:1,width:50},inputProps:{sx:{textAlign:"center"}},disabled:v})]})}},8375:function(e,n,t){t.d(n,{Z:function(){return C}});var r,i=t(1413),a=t(93433),s=t(29439),l=t(30168),c=t(45987),o=t(49670),u=t(23786),d=t(57064),f=t(49900),h=t(94721),x=t(20890),m=t(72791),v=t(22020),p=t(76899),Z=t(31148),j=t(42320),g=t(33890),b=t(55942),y=t(10157),k=t(80184),w=["selectedSetKey","onChange","artifactSetsByRarity","hasUnselect"];function C(e){var n,t=e.selectedSetKey,C=void 0===t?"":t,S=e.onChange,P=e.artifactSetsByRarity,O=e.hasUnselect,D=void 0!==O&&O,A=(0,c.Z)(e,w),E=(0,v.$)("artifact").t,K=(0,j.Z)(Z.y.getAll,[]),M=null===K||void 0===K?void 0:K[C],B=(0,m.useMemo)((function(){return P||(K?Z.y.setKeysByRarities(K):{})}),[K,P]);return(0,k.jsxs)(g.Z,(0,i.Z)((0,i.Z)({},A),{},{title:null!==(n=null===M||void 0===M?void 0:M.name)&&void 0!==n?n:E(r||(r=(0,l.Z)(["editor.set.artifactSet"]))),startIcon:(null===M||void 0===M?void 0:M.defIconSrc)&&(0,k.jsx)(b.Z,{src:null===M||void 0===M?void 0:M.defIconSrc}),color:M?"success":"primary",children:[D&&(0,k.jsxs)(u.Z,{onClick:function(){return S("")},selected:""===C,disabled:""===C,children:[(0,k.jsx)(d.Z,{children:(0,k.jsx)(o.Z,{})}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(p.c,{t:E,i18nKey:"ui:unselect",children:"Unselect"})})]}),!!Object.keys(B).length&&Object.entries(B).reverse().flatMap((function(e,n){var t=(0,s.Z)(e,2),r=t[0],i=t[1];return[].concat((0,a.Z)((n>0||D)&&i.length?[(0,k.jsx)(h.Z,{},"".concat(r,"divi"))]:[]),(0,a.Z)(i.length?[(0,k.jsx)(u.Z,{children:(0,k.jsx)(x.Z,{children:(0,k.jsxs)(p.c,{t:E,i18nKey:"editor.set.maxRarity",children:["Max Rarity ",(0,k.jsx)(y.t,{stars:parseInt(r)})]})})},"".concat(r,"header"))]:[]),(0,a.Z)(i.map((function(e){var n,t;return(0,k.jsxs)(u.Z,{onClick:function(){return S(e)},selected:C===e,disabled:C===e,children:[(0,k.jsx)(d.Z,{children:(0,k.jsx)(b.Z,{src:null===K||void 0===K||null===(n=K[e])||void 0===n?void 0:n.defIconSrc,sx:{fontSize:"1.5em"}})}),(0,k.jsx)(f.Z,{children:null===K||void 0===K||null===(t=K[e])||void 0===t?void 0:t.name})]},e)}))))}))]}))}},43568:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(4942),i=t(29439),a=t(53174),s=t(54483),l=t(61889),c=t(20890),o=t(24518),u=t(39504),d=t(94721),f=t(47047),h=t(72791),x=t(17278),m=t(60393),v=t(3992),p=t(68198),Z=t(9321),j=t(66624),g=t(80184);function b(){return{artifactPage:!0,buildPage:!0,characterPage:!0}}function y(e){var n=e.pageKey,t=e.text,y=void 0===t?"":t,k=e.modalTitle,w=void 0===k?"":k,C=e.children,S=(0,x.Z)("InfoShown",b),P=(0,i.Z)(S,2),O=P[0],D=P[1],A=O[n],E=(0,h.useCallback)((function(e){return D((0,r.Z)({},n,e))}),[D,n]),K=(0,h.useState)(Array.isArray(y)?(0,m.F_)(y):y),M=(0,i.Z)(K,1)[0],B=function(){return E(!1)};return(0,g.jsxs)(v.Z,{children:[(0,g.jsxs)(l.ZP,{container:!0,children:[(0,g.jsx)(l.ZP,{item:!0,flexGrow:1,children:(0,g.jsx)(c.Z,{variant:"caption",pl:1,children:M})}),(0,g.jsx)(l.ZP,{item:!0,xs:"auto",children:(0,g.jsx)(o.Z,{size:"small",color:"info",variant:"contained",onClick:function(){return E(!0)},startIcon:(0,g.jsx)(s.G,{icon:a.sph}),children:(0,g.jsx)(j.v,{ns:"ui",key18:"info"})})})]}),(0,g.jsx)(Z.Z,{containerProps:{maxWidth:"xl"},open:A,onClose:function(){return B()},children:(0,g.jsxs)(v.Z,{children:[(0,g.jsx)(u.Z,{sx:{py:1},children:(0,g.jsxs)(l.ZP,{container:!0,children:[(0,g.jsx)(l.ZP,{item:!0,flexGrow:1,children:(0,g.jsx)(c.Z,{variant:"h6",children:w})}),(0,g.jsx)(l.ZP,{item:!0,children:(0,g.jsx)(p.Z,{onClick:B})})]})}),(0,g.jsx)(d.Z,{}),(0,g.jsx)(u.Z,{children:(0,g.jsx)(h.Suspense,{fallback:(0,g.jsx)(f.Z,{variant:"rectangular",width:"100%",height:500}),children:C})}),(0,g.jsx)(d.Z,{}),(0,g.jsx)(u.Z,{sx:{py:1},children:(0,g.jsx)(p.Z,{large:!0,onClick:B})})]})})]})}},14525:function(e,n,t){t.d(n,{Z:function(){return k},b:function(){return w}});var r=t(29439),i=t(4942),a=t(1413),s=t(53174),l=t(54483),c=t(39504),o=t(20890),u=t(94721),d=t(61889),f=t(2199),h=t(23786),x=t(24518),m=t(72791),v=t(71310),p=t(10600),Z=t(33890),j=t(2693),g=t(26138),b=t(79406),y=t(80184);function k(e){var n=e.statFilters,t=void 0===n?{}:n,s=e.setStatFilters,l=e.disabled,f=void 0!==l&&l,h=(0,m.useContext)(j.R).data,x=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==h.get(g.ri.weaponType).value&&x.push("physical_dmg_");var p=h.get(g.ri.charEle).value;x.push("".concat(p,"_dmg_"));var Z=x.filter((function(e){return!Object.keys(t).some((function(n){return n===e}))})),b=(0,m.useCallback)((function(e,n){return s((0,a.Z)((0,a.Z)({},t),{},(0,i.Z)({},e,n)))}),[t,s]);return(0,y.jsxs)(v.Z,{children:[(0,y.jsx)(c.Z,{sx:{py:1},children:(0,y.jsx)(o.Z,{children:"Minimum Final Stat Filter"})}),(0,y.jsx)(u.Z,{}),(0,y.jsx)(c.Z,{children:(0,y.jsxs)(d.ZP,{container:!0,spacing:1,children:[Object.entries(t).map((function(e){var n=(0,r.Z)(e,2),i=n[0],l=n[1];return(0,y.jsx)(d.ZP,{item:!0,xs:12,children:(0,y.jsx)(w,{statKey:i,statKeys:Z,setFilter:b,disabled:f,value:l,close:function(){delete t[i],s((0,a.Z)({},t))}})},i)})),(0,y.jsx)(d.ZP,{item:!0,xs:12,children:(0,y.jsx)(w,{value:void 0,close:void 0,statKeys:Z,setFilter:b,disabled:f})})]})})]})}function w(e){var n=e.statKey,t=e.statKeys,r=void 0===t?[]:t,i=e.value,a=void 0===i?0:i,c=e.close,o=e.setFilter,u=e.disabled,d=void 0!==u&&u,v="%"===b.ZP.unit(n),j=(0,m.useCallback)((function(e){return n&&o(n,e)}),[o,n]);return(0,y.jsxs)(f.Z,{sx:{width:"100%"},children:[(0,y.jsx)(Z.Z,{title:n?b.ZP.get(n):"New Stat",disabled:d,children:r.map((function(e){return(0,y.jsx)(h.Z,{onClick:function(){null===c||void 0===c||c(),o(e,a)},children:b.ZP.get(e)},e)}))}),(0,y.jsx)(p.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,y.jsx)(p.ZP,{disabled:!n,float:v,value:a,placeholder:"Min Value",onChange:j,sx:{px:2}})}),!!c&&(0,y.jsx)(x.Z,{color:"error",onClick:c,disabled:d,children:(0,y.jsx)(l.G,{icon:s.I7k})})]})}},20323:function(e,n,t){function r(){return{tcMode:!1}}t.d(n,{c:function(){return r}})},23418:function(e,n,t){t.r(n),t.d(n,{default:function(){return ht}});var r=t(15861),i=t(29439),a=t(93433),s=t(1413),l=t(87757),c=t.n(l),o=t(53174),u=t(54483),d=t(72247),f=t(9912),h=t(96739),x=t(68870),m=t(19658),v=t(23060),p=t(39504),Z=t(20890),j=t(94721),g=t(61889),b=t(24518),y=t(2199),k=t(23786),w=t(90388),C=t(47047),S=t(72791),P=t(16129),O=t(91523);function D(){return new Worker(t.p+"static/js/BackgroundWorker.f9b19197.worker.js")}var A=t(21977),E=t(3992),K=t(71310),M=t(36944),B=t(33890),I=t(43568),R=t(91839),T=t(14525),L=t(3997),z=t(2693),G=t(87234),N=t(26138),F=t(69292),_=t(20323),V=t(79406),q=t(16134);var W=t(50920),H=t(53561),U=t(17278),Y=t(68544),J=t(47639),$=t(60393),Q=t(77474),X=t(39738),ee=t(37762),ne=t(94294),te=t(72456),re=t(18455),ie=t(56125),ae=t(66934),se=t(19913),le=t(37389),ce=t(82839),oe=t(90466),ue=t(12891),de=t(42633),fe=t(27281),he=t(64694),xe=t(62066),me=t(80184);function ve(e){var n=e.chartData,t=e.plotBase,r=e.setPlotBase,a=e.disabled,s=void 0!==a&&a,l=(0,S.useState)(!1),c=(0,i.Z)(l,2),o=c[0],u=c[1],h=(0,S.useState)(!0),x=(0,i.Z)(h,2),m=x[0],v=x[1],y=(0,S.useContext)(z.R).data,w=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==y.get(N.ri.weaponType).value&&w.push("physical_dmg_"),w.push("".concat(y.get(N.ri.charEle).value,"_dmg_"));var C=(0,S.useMemo)((function(){var e,t;if(!n)return{displayData:null,downloadData:null};var r,i=n.data.map((function(e){var n=e.value;return{x:e.plot,y:n}})).sort((function(e,n){return e.x-n.x})),a=[],s=(0,ee.Z)(i);try{for(s.s();!(r=s.n()).done;){for(var l=r.value,c=void 0;c=a.pop();)if(c.y>l.y){a.push(c);break}a.push(l)}}catch(u){s.e(u)}finally{s.f()}(null===(e=a[0])||void 0===e?void 0:e.x)!==(null===(t=i[0])||void 0===t?void 0:t.x)&&(i[0].min=a[0].y),a.forEach((function(e){e.min=e.y}));var o={minimum:a.map((function(e){return[e.x,e.y]})),allData:i.map((function(e){return[e.x,e.y]}))};return{displayData:i,downloadData:o}}),[n]),P=C.displayData,O=C.downloadData;return(0,me.jsxs)(K.Z,{children:[(0,me.jsx)(p.Z,{children:(0,me.jsxs)(g.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsx)(Z.Z,{variant:"h6",children:"Optimization Target vs"})}),(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsxs)(B.Z,{title:t?V.ZP.get(t):"Not Selected",color:t?"success":"primary",disabled:s,children:[(0,me.jsx)(k.Z,{onClick:function(){r("")},children:"Unselect"}),(0,me.jsx)(j.Z,{}),w.map((function(e){return(0,me.jsx)(k.Z,{onClick:function(){r(e)},children:V.ZP.get(e)},e)}))]})}),(0,me.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,me.jsx)(re.Z,{placement:"top",title:"Using data from the builder, this will generate a graph to visualize Optimization Target vs. a selected stat. The graph will show the maximum Optimization Target value per 0.01 of the selected stat.",children:(0,me.jsx)(ne.Z,{})})}),!!O&&(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsx)(b.Z,{startIcon:m?(0,me.jsx)(d.Z,{}):(0,me.jsx)(f.Z,{}),color:m?"success":"secondary",onClick:function(){return v(!m)},children:"Show Min Stat Threshold"})}),!!O&&(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsx)(b.Z,{color:"info",startIcon:(0,me.jsx)(te.Z,{}),onClick:function(){return u(!o)},children:"Download Data"})})]})}),!!P&&(0,me.jsx)(j.Z,{}),n&&!!P&&(0,me.jsxs)(p.Z,{children:[(0,me.jsx)(ie.Z,{in:!!O&&o,children:(0,me.jsx)(E.Z,{sx:{mb:2},children:(0,me.jsxs)(p.Z,{children:[(0,me.jsx)(Z.Z,{children:"Min Data"}),(0,me.jsx)(Ze,{data:null===O||void 0===O?void 0:O.minimum}),(0,me.jsx)(Z.Z,{children:"All Data"}),(0,me.jsx)(Ze,{data:null===O||void 0===O?void 0:O.allData})]})})}),(0,me.jsx)(je,{displayData:P,plotNode:n.plotNode,valueNode:n.valueNode,showMin:m})]})]})}var pe=(0,ae.ZP)("textarea")({width:"100%",fontFamily:"monospace",resize:"vertical",minHeight:"5em"});function Ze(e){var n=e.data;return(0,me.jsx)(pe,{readOnly:!0,value:JSON.stringify(n),onClick:function(e){var n=e.target;n.selectionStart=0,n.selectionEnd=n.value.length}})}function je(e){var n,t,r=e.displayData,i=e.plotNode,a=e.valueNode,s=e.showMin,l=V.ZP.unit(null===(n=i.info)||void 0===n?void 0:n.key),c=V.ZP.unit(null===(t=a.info)||void 0===t?void 0:t.key);return(0,me.jsx)(se.h,{width:"100%",height:600,children:(0,me.jsxs)(le.c,{data:r,children:[(0,me.jsx)(ce.q,{strokeDasharray:"3 3"}),(0,me.jsx)(oe.K,{dataKey:"x",scale:"linear",unit:l,domain:["auto","auto"],tick:{fill:"white"},type:"number",tickFormatter:function(e){return e>1e4?e.toFixed():e.toFixed(1)}}),(0,me.jsx)(ue.B,{name:"DMG",domain:["auto","auto"],unit:c,allowDecimals:!1,tick:{fill:"white"},type:"number"}),(0,me.jsx)(de.d,{dataKey:"y",range:[3,25]}),(0,me.jsx)(fe.D,{}),(0,me.jsx)(he.b,{name:"Optimization Target",dataKey:"y",fill:"#8884d8",line:!0,lineType:"fitting",isAnimationActive:!1}),s&&(0,me.jsx)(xe.x,{name:"Minimum Stat Requirement Threshold",dataKey:"min",stroke:"#ff7300",type:"stepBefore",connectNulls:!0,strokeWidth:2,isAnimationActive:!1})]})})}var ge=t(64737),be=t(78661),ye=t(24351);function ke(e,n,t,r,i,a){for(var l=a,c={pruneNodeRange:!0},o={pruneNodeRange:!0},u={reaffine:!0},d={pruneOrder:!0,pruneArtRange:!0,pruneNodeRange:!0},f=0;Object.values(l).some((function(e){return e}))&&f++<20;){if(l.pruneOrder){delete l.pruneOrder;var h=Ce(t,r,i);t!==h&&(t=h,l=(0,s.Z)((0,s.Z)({},l),c))}if(l.pruneArtRange){delete l.pruneArtRange;var x=Se(e,t,n);t!==x&&(t=x,l=(0,s.Z)((0,s.Z)({},l),o))}if(l.pruneNodeRange){delete l.pruneNodeRange;var m=Pe(e,t);e!==m&&(e=m,l=(0,s.Z)((0,s.Z)({},l),u))}if(l.reaffine){delete l.reaffine;var v=we(e,t),p=v.nodes,Z=v.arts;e===p&&t===Z||(e=p,t=Z,l=(0,s.Z)((0,s.Z)({},l),d))}}return{nodes:e,arts:t}}function we(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set,l=new Set;function c(e,n){n?r.add(e):e.operands.forEach((function(e){var n=e;r.has(n)&&l.add(n)}))}var o=new Set;if((0,ge.aD)(e,(function(e){}),(function(e){var n=e.operation;switch(n){case"read":if("number"!==e.type||"dyn"!==e.path[0]||"add"!==e.accu)throw new Error("Found unsupported ".concat(n," node at path ").concat(e.path," when computing affine nodes"));o.add(e.path[1]),c(e,!0);break;case"add":c(e,e.operands.every((function(e){return r.has(e)})));break;case"mul":var t=e.operands.filter((function(e){return"const"!==e.operation}));c(e,0===t.length||1===t.length&&r.has(t[0]));break;case"const":if("string"===typeof e.value||void 0===e.value)throw new Error("Found constant ".concat(e.value," while compacting"));c(e,!0);break;case"res":case"threshold":case"sum_frac":case"max":case"min":c(e,!1);break;case"data":case"subscript":case"lookup":case"match":case"prio":case"small":throw new Error("Found unsupported ".concat(n," node when computing affine nodes"));default:(0,$.UT)(n)}})),(0,a.Z)(l).every((function(e){var n=e.operation;return"read"===n||"const"===n}))&&Object.keys(n.base).length===o.size)return{nodes:e,arts:n};var u=-1;function d(){for(;o.has("".concat(++u)););return"".concat(u)}e.forEach((function(e){return r.has(e)&&l.add(e)}));var f=(0,a.Z)(l).filter((function(e){return"const"!==e.operation})),h=new Map(f.map((function(e){return[e,t||"read"!==e.operation||"dyn"!==e.path[0]?(0,s.Z)((0,s.Z)({},(0,be.UF)(["dyn","".concat(d())])),{},{accu:"add"}):e]})));function x(e){var n=(0,F.CG)((0,a.Z)(h.keys()),{dyn:(0,$.xh)(e,(function(e){return(0,be.a9)(e)}))},(function(e){return!0}));return Object.fromEntries((0,a.Z)(h.values()).map((function(e,t){return[e.path[1],n[t].value]})))}for(var m={nodes:e=(0,ge.uW)(e,(function(e){var n;return null!==(n=h.get(e))&&void 0!==n?n:e}),(function(e){return e})),arts:{base:x(n.base),values:(0,$.O)(ye.eV,(function(e){return n.values[e].map((function(e){return{id:e.id,set:e.set,values:x(e.values)}}))}))}},v=Object.entries(x({})),p=0,Z=Object.values(m.arts.values);p<Z.length;p++){var j,g=Z[p],b=(0,ee.Z)(g);try{for(b.s();!(j=b.n()).done;){var y,k=j.value.values,w=(0,ee.Z)(v);try{for(w.s();!(y=w.n()).done;){var C=(0,i.Z)(y.value,2),S=C[0],P=C[1];k[S]-=P}}catch(O){w.e(O)}finally{w.f()}}}catch(O){b.e(O)}finally{b.f()}}return m}function Ce(e,n,t){var r=!1,a=(0,$.O)(ye.eV,(function(a){var s=e.values[a],l=s.filter((function(e){var r=0;return s.every((function(a){var s=Object.entries(a.values).every((function(n){var t=(0,i.Z)(n,2),r=t[0];return t[1]>=e.values[r]})),l=Object.entries(a.values).some((function(n){var t=(0,i.Z)(n,2),r=t[0];return t[1]>e.values[r]}));return s&&(l||a.id>e.id)&&(!t.has(e.set)||t.has(a.set))&&r++,r<n}))}));return l.length!==s.length&&(r=!0),l}));return r?{base:e.base,values:a}:e}function Se(e,n,t){for(var r=Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[t,{min:r,max:r}]}))),a={arts:n},s=function(){var n=(0,$.O)(ye.eV,(function(e){return De(a.arts.values[e])})),i=(0,$.O)(ye.eV,(function(e){return Oe(Object.entries(n).map((function(n){return n[0]===e?r:n[1]})).filter((function(e){return e})))})),s=!1,l=(0,$.O)(ye.eV,(function(n){var r=a.arts.values[n].filter((function(r){var a=Oe([De([r]),i[n]]),s=Ae(e,a);return e.every((function(e,n){var r;return s.get(e).max>=(null!==(r=t[n])&&void 0!==r?r:-1/0)}))}));return r.length!==a.arts.values[n].length&&(s=!0),r}));if(!s)return"break";a.arts={base:a.arts.base,values:l}};;){if("break"===s())break}return a.arts}function Pe(e,n){var t=Ae(e,Oe([Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[t,{min:r,max:r}]})))].concat((0,a.Z)(Object.values(n.values).map((function(e){return De(e)}))))));return(0,ge.uW)(e,(function(e){var n=e.operation,r=e.operands.map((function(e){return t.get(e)}));switch(n){case"threshold":var s=(0,i.Z)(r,4),l=s[0],c=s[1],o=s[2],u=s[3];if(l.min>=c.max)return e.operands[2];if(l.max<c.min)return(0,be.a9)(0);if(o.max===o.min&&u.max===u.min&&o.min===u.min&&isFinite(o.min))return(0,be.a9)(o.max);break;case"min":var d=e.operands.filter((function(e,n){var t=r[n];return r.every((function(e,n){return t.min<=e.max}))}));if(d.length<r.length)return be.VV.apply(void 0,(0,a.Z)(d));break;case"max":var f=e.operands.filter((function(e,n){var t=r[n];return r.every((function(e){return t.max>=e.min}))}));if(f.length<r.length)return be.Fp.apply(void 0,(0,a.Z)(f))}return e}),(function(e){return e}))}function Oe(e){var n={};return e.forEach((function(e){Object.entries(e).forEach((function(e){var t=(0,i.Z)(e,2),r=t[0],a=t[1];n[r]?(n[r].min+=a.min,n[r].max+=a.max):n[r]=(0,s.Z)({},a)}))})),n}function De(e){var n={};return e.length&&(Object.keys(e[0].values).filter((function(n){return e.every((function(e){return e.values[n]}))})).forEach((function(t){return n[t]={min:e[0].values[t],max:e[0].values[t]}})),e.forEach((function(e){for(var t=e.values,r=0,a=Object.entries(t);r<a.length;r++){var s=(0,i.Z)(a[r],2),l=s[0],c=s[1];n[l]?(n[l].max<c&&(n[l].max=c),n[l].min>c&&(n[l].min=c)):n[l]={min:0,max:c}}}))),n}function Ae(e,n){var t=new Map;return(0,ge.aD)(e,(function(e){}),(function(e){var r,a,s=e,l=s.operation,c=s.operands.map((function(e){return t.get(e)}));switch(l){case"read":if("dyn"!==s.path[0])throw new Error("Found non-dyn path ".concat(s.path," while computing range"));a=null!==(r=n[s.path[1]])&&void 0!==r?r:{min:0,max:0};break;case"const":a=Ee([s.value]);break;case"subscript":a=Ee(s.list);break;case"add":case"min":case"max":a={min:F.aj[l](c.map((function(e){return e.min}))),max:F.aj[l](c.map((function(e){return e.max})))};break;case"res":a={min:F.aj[l]([c[0].max]),max:F.aj[l]([c[0].min])};break;case"mul":a=c.reduce((function(e,n){return Ee([e.min*n.min,e.min*n.max,e.max*n.min,e.max*n.max])}));break;case"threshold":a=c[0].min>=c[1].max?c[2]:c[0].max<c[1].min?Ee([0]):Ee([0],[c[2]]);break;case"sum_frac":var o=(0,i.Z)(c,2),u=o[0],d=o[1],f={min:u.min+d.min,max:u.max+d.max};a=f.min<=0&&f.max>=0?u.min<=0&&u.max>=0?{min:NaN,max:NaN}:{min:-1/0,max:1/0}:Ee([u.min/f.min,u.min/f.max,u.max/f.min,u.max/f.max]);break;case"data":case"lookup":case"match":throw new Error("Unsupported ".concat(l," node"));default:(0,$.UT)(l)}t.set(s,a)})),t}function Ee(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Math.max.apply(Math,(0,a.Z)(e).concat((0,a.Z)(n.map((function(e){return e.max}))))),r=Math.min.apply(Math,(0,a.Z)(e).concat((0,a.Z)(n.map((function(e){return e.min})))));return{min:r,max:t}}function Ke(e,n){return{base:e.base,values:(0,$.O)(ye.eV,(function(t){var r=n[t];switch(r.kind){case"id":return e.values[t].filter((function(e){return r.ids.has(e.id)}));case"exclude":return e.values[t].filter((function(e){return!r.sets.has(e.set)}));case"required":return e.values[t].filter((function(e){return r.sets.has(e.set)}))}}))}}function Me(e,n){return e.flatMap((function(e){return e})).sort((function(e,n){return n.value-e.value})).slice(0,n)}function Be(e){for(var n=.01,t=new Set(e.flatMap((function(e){return Object.values(e).map((function(e){return Math.round(e.plot/n)}))})));t.size>1500;)n*=2,t=new Set((0,a.Z)(t).map((function(e){return Math.round(e/2)})));var r,i={},s=(0,ee.Z)(e);try{for(s.s();!(r=s.n()).done;)for(var l=r.value,c=0,o=Object.values(l);c<o.length;c++){var u=o[c],d=Math.round(u.plot/n)*n;(!i[d]||i[d].value<u.value)&&(i[d]=u)}}catch(f){s.e(f)}finally{s.f()}return i}function Ie(e){return ye.eV.reduce((function(n,t){return n*e.values[t].length}),1)}var Re=t(98268),Te=t(52791),Le=t(79271),ze=t(63204),Ge=t(66647),Ne=t(42169),Fe=t(81918),_e=t(19272),Ve=t(31148),qe=t(947),We=t(63372),He=t(42320),Ue=t(96106),Ye=t(91702),Je=t(20005),$e=t(55942),Qe=t(75545);function Xe(e){var n,t,r=e.artifactId,i=e.mainStatAssumptionLevel,a=void 0===i?0:i,s=e.onClick,l=(0,We.Z)(r),c=(0,He.Z)(Ve.y.get(null===l||void 0===l?void 0:l.setKey),[l]),o=(0,S.useCallback)((function(e){return(0,me.jsx)(Ge.Z,{onClick:s,children:e})}),[s]);if(!l)return null;var u=l.slotKey,d=l.rarity,f=l.level,h=l.mainStatKey,m=l.substats,v=l.location,p=Math.max(Math.min(a,4*d),f),j=V.ZP.unit(h),b="roll"+(Math.floor(Math.max(f,0)/4)+1);return(0,me.jsx)(E.Z,{children:(0,me.jsxs)(Je.Z,{condition:!!s,wrapper:o,children:[(0,me.jsxs)(g.ZP,{container:!0,sx:{flexWrap:"nowrap"},className:"grad-".concat(d,"star"),children:[(0,me.jsx)(g.ZP,{item:!0,maxWidth:"40%",sx:{mt:-1,mb:-2},children:(0,me.jsx)(Ne.Z,{component:"img",image:null!==(n=null===c||void 0===c?void 0:c.slotIcons[u])&&void 0!==n?n:"",width:"100%",height:"auto"})}),(0,me.jsxs)(g.ZP,{item:!0,sx:{textAlign:"right",flexGrow:1,pr:1,pt:1},children:[(0,me.jsxs)(x.Z,{display:"flex",justifyContent:"flex-end",gap:1,children:[(0,me.jsx)(Fe.Z,{size:"small",label:(0,me.jsx)("strong",{children:" +".concat(f)}),color:b}),(0,me.jsx)(Fe.Z,{size:"small",label:(0,me.jsx)(nn,{location:v}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,me.jsxs)(Z.Z,{variant:"h6",sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[(0,me.jsx)(Ye.Z,{color:V.ZP.getVariant(h),children:Qe.Z[h]}),(0,me.jsxs)(Ye.Z,{color:p!==f?"warning":void 0,children:[(0,V.qs)(null!==(t=_e.Z.mainStatValue(h,d,p))&&void 0!==t?t:0,V.ZP.unit(h)),j]})]})]})]}),(0,me.jsx)(g.ZP,{container:!0,sx:{p:1,pl:2},children:m.map((function(e,n){return(0,me.jsx)(g.ZP,{item:!0,xs:6,children:(0,me.jsx)(en,{stat:e},e.key)},n+e.key)}))})]})})}function en(e){var n,t,r=e.stat;if(!r.value)return null;var i=null!==(n=null===(t=r.rolls)||void 0===t?void 0:t.length)&&void 0!==n?n:0,a="roll".concat((0,$.uZ)(i,1,6)),s=V.ZP.unit(r.key);return(0,me.jsx)(x.Z,{display:"flex",gap:1,alignContent:"center",children:(0,me.jsxs)(Z.Z,{sx:{flexGrow:1,display:"flex",gap:1},color:i?"".concat(a,".main"):"error.main",component:"span",children:[(0,me.jsx)(Ue.Z,{placement:"top",title:(0,me.jsx)(Z.Z,{children:r.key&&V.ZP.getArtStr(r.key)}),children:(0,me.jsx)("span",{children:Qe.Z[r.key]})}),(0,me.jsx)("span",{children:"".concat((0,V.qs)(r.value,V.ZP.unit(r.key))).concat(s)})]})})}function nn(e){var n=e.location,t=(0,He.Z)(qe.ZP.get(null!==n&&void 0!==n?n:""),[n]);return t?(0,me.jsx)($e.Z,{src:t.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}}):(0,me.jsx)(ze.Z,{})}var tn=t(95614),rn=t(71946),an=t(68198),sn=t(9321),ln=t(25617),cn=t(66218),on=t(74480);function un(e){var n=e.weaponId,t=(0,on.Z)(n),r=(0,He.Z)((null===t||void 0===t?void 0:t.key)&&cn.ZP.get(t.key),[null===t||void 0===t?void 0:t.key]),i=(0,S.useMemo)((function(){return r&&t&&(0,G.mP)([r.data,(0,G.v0)(t)])}),[r,t]);return t&&r&&i?(0,me.jsxs)(E.Z,{sx:{height:"100%"},children:[(0,me.jsxs)(g.ZP,{container:!0,sx:{flexWrap:"nowrap"},className:"grad-".concat(r.rarity,"star"),children:[(0,me.jsx)(g.ZP,{item:!0,maxWidth:"40%",sx:{},children:(0,me.jsx)(Ne.Z,{component:"img",image:r.img,width:"100%",height:"auto"})}),(0,me.jsxs)(g.ZP,{item:!0,sx:{textAlign:"right",flexGrow:1,pr:1,pt:1,display:"flex",flexDirection:"column",gap:1},children:[(0,me.jsx)(Fe.Z,{size:"small",label:(0,me.jsxs)("strong",{children:["Lv. ",cn.ZP.getLevelString(t)]}),color:"primary"}),r.hasRefinement&&(0,me.jsx)(Fe.Z,{size:"small",color:"info",label:(0,me.jsxs)("strong",{children:["R",t.refinement]})})]})]}),(0,me.jsxs)(g.ZP,{container:!0,sx:{p:1,pl:2},children:[(0,me.jsx)(g.ZP,{item:!0,xs:6,children:(0,me.jsx)(dn,{node:i.get(N.qH.weapon.main)})}),(0,me.jsx)(g.ZP,{item:!0,xs:6,children:(0,me.jsx)(dn,{node:i.get(N.qH.weapon.sub)})})]})]}):null}function dn(e){var n=e.node;if(!n.key)return null;var t=(0,V.EC)(n.value,n.unit,n.unit?void 0:0);return(0,me.jsx)(x.Z,{display:"flex",gap:1,alignContent:"center",children:(0,me.jsxs)(Z.Z,{sx:{flexGrow:1},component:"span",children:[Qe.Z[n.key]," ",t]})})}var fn=t(72838),hn=(0,S.lazy)((function(){return Promise.all([t.e(893),t.e(30),t.e(260)]).then(t.bind(t,2030))}));function xn(e){var n=e.index,t=e.compareBuild,r=e.disabled,a=(0,S.useContext)(L.t).database,l=(0,S.useContext)(z.R),c=(0,S.useState)(!1),o=(0,i.Z)(c,2),u=o[0],d=o[1],f=(0,S.useCallback)((function(){return d(!1)}),[d]),h=(0,S.useCallback)((function(){return d(!0)}),[d]),x=l.character,m=l.data,v=l.oldData,j=l.teamData,y=l.mainStatAssumptionLevel,k=(0,He.Z)(Ve.y.getAll,[]),w=(0,S.useState)(void 0),P=(0,i.Z)(w,2),O=P[0],D=P[1],A=(0,S.useCallback)((function(){return D(void 0)}),[D]),E=(0,S.useCallback)((function(){if(window.confirm("Do you want to equip this artifact build to this character?")){var e=Object.fromEntries(ye.eV.map((function(e){return[e,m.get(N.ri.art[e].id).value]})));a.equipArtifacts(x.key,e)}}),[x,m,a]);if(!x||!k||!v)return null;var M=ye.eV.every((function(e){return m.get(N.ri.art[e].id).value===v.get(N.ri.art[e].id).value})),B=(0,s.Z)({},l);t||(B.oldData=void 0);var I={};return ye.eV.forEach((function(e){var n=m.get(N.ri.art[e].set).value;n&&(I[n]?I[n].push(e):I[n]=[e])})),(0,me.jsx)(K.Z,{children:(0,me.jsxs)(S.Suspense,{fallback:(0,me.jsx)(C.Z,{variant:"rectangular",width:"100%",height:600}),children:[(0,me.jsx)(sn.Z,{open:u,onClose:f,containerProps:{maxWidth:"xl"},children:(0,me.jsx)(hn,{characterKey:x.key,newteamData:j,onClose:f,footer:(0,me.jsx)(an.Z,{large:!0,onClick:f})})}),O&&(0,me.jsx)(mn,{newOld:O,onClose:A}),(0,me.jsxs)(p.Z,{children:[(0,me.jsxs)(Te.Z,{display:"flex",gap:1,sx:{pb:1},children:[(0,me.jsx)(Z.Z,{variant:"h6",children:(0,me.jsx)(ln.Z,{color:"info",children:(0,me.jsxs)("strong",{children:["#",n+1,M?" (Equipped)":""]})})}),Object.entries(I).sort((function(e,n){var t=(0,i.Z)(e,2),r=(t[0],t[1]),a=(0,i.Z)(n,2);a[0];return a[1].length-r.length})).map((function(e){var n,t=(0,i.Z)(e,2),r=t[0],a=t[1];return(0,me.jsx)(Te.Z,{children:(0,me.jsx)(Z.Z,{variant:"h6",children:(0,me.jsxs)(ln.Z,{color:M?"success":"primary",children:[a.map((function(e){return(0,tn.Ir)(e)}))," ",null!==(n=null===k||void 0===k?void 0:k[r].name)&&void 0!==n?n:""]})})},r)})),(0,me.jsx)(Te.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),(0,me.jsx)(b.Z,{size:"small",color:"info",onClick:h,disabled:r||M,children:"Build Details"}),(0,me.jsx)(b.Z,{size:"small",color:"success",onClick:E,disabled:r||M,children:"Equip Artifacts"})]}),(0,me.jsxs)(g.ZP,{container:!0,spacing:1,sx:{pb:1},children:[ye.eV.map((function(e){return(0,me.jsx)(g.ZP,{item:!0,xs:6,sm:4,md:3,lg:2,children:(0,me.jsx)(Xe,{artifactId:m.get(N.ri.art[e].id).value,mainStatAssumptionLevel:y,onClick:function(){var n=x.equippedArtifacts[e],t=m.get(N.ri.art[e].id).value;D({oldId:n!==t?n:void 0,newId:t})}})},e)})),(0,me.jsx)(g.ZP,{item:!0,xs:6,sm:4,md:3,lg:2,children:(0,me.jsx)(un,{weaponId:x.equippedWeapon})})]}),(0,me.jsx)(z.R.Provider,{value:B,children:(0,me.jsx)(rn.Z,{})})]})]})})}function mn(e){var n=e.newOld,t=n.newId,r=n.oldId,i=e.onClose;console.log("newOld",t,r);var a=(0,Le.k6)(),s=(0,S.useCallback)((function(e){return a.push({pathname:"/artifact",state:{artToEditId:e}})}),[a]);return(0,me.jsx)(sn.Z,{open:!!t,onClose:i,containerProps:{maxWidth:r?"md":"xs"},children:(0,me.jsx)(E.Z,{children:(0,me.jsxs)(p.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:2},children:[r&&(0,me.jsx)(fn.Z,{artifactId:r,onEdit:s}),r&&(0,me.jsx)(K.Z,{sx:{display:"flex"},children:(0,me.jsx)(Re.Z,{sx:{fontSize:40}})}),(0,me.jsx)(fn.Z,{artifactId:t,onEdit:s})]})})})}var vn=t(49670),pn=t(31284),Zn=t(10157);function jn(e){var n=e.disabled,t=(0,S.useContext)(z.R).character,r=(0,S.useState)(!1),a=(0,i.Z)(r,2),s=a[0],l=a[1],c=(0,S.useCallback)((function(){return l(!0)}),[l]),o=(0,S.useCallback)((function(){return l(!1)}),[l]),u=(0,S.useMemo)((function(){return Object.keys(t.conditional).filter((function(e){return ye.q2.includes(e)})).length}),[t]);return(0,me.jsx)(K.Z,{children:(0,me.jsxs)(p.Z,{children:[(0,me.jsx)(b.Z,{fullWidth:!0,onClick:c,disabled:n,children:(0,me.jsxs)("span",{children:["Default Artifact Set Effects Conditionals ",!!u&&(0,me.jsxs)(ln.Z,{color:"success",children:[u," Selected"]})]})}),(0,me.jsx)(gn,{open:s,onClose:o,artifactCondCount:u})]})})}function gn(e){var n=e.open,t=e.onClose,r=e.artifactCondCount,a=(0,S.useContext)(z.R),s=a.character,l=a.characterDispatch,c=(0,He.Z)(Ve.y.getAll,[]),o=(0,S.useCallback)((function(){var e=Object.fromEntries(Object.entries(s.conditional).filter((function(e){var n=(0,i.Z)(e,2),t=n[0];n[1];return!ye.q2.includes(t)})));l({conditional:e})}),[s,l]);if(!c)return null;var u=Object.entries(Ve.y.setKeysByRarities(c)).reverse().flatMap((function(e){return(0,i.Z)(e,2)[1]}));return(0,me.jsx)(sn.Z,{open:n,onClose:t,children:(0,me.jsxs)(E.Z,{children:[(0,me.jsx)(p.Z,{children:(0,me.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,me.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,me.jsxs)(Z.Z,{variant:"h6",children:["Default Artifact Set Effects ",!!r&&(0,me.jsxs)(ln.Z,{color:"success",children:[r," Selected"]})]})}),(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsx)(b.Z,{onClick:o,startIcon:(0,me.jsx)(vn.Z,{}),children:"Reset All"})}),(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsx)(an.Z,{onClick:t})})]})}),(0,me.jsx)(j.Z,{}),(0,me.jsxs)(p.Z,{children:[(0,me.jsx)(K.Z,{sx:{mb:1},children:(0,me.jsx)(p.Z,{children:(0,me.jsx)(Z.Z,{children:"Some artifacts provide conditional stats. This windows allows you to select those stats, so they can take effect during build calculation, when artifact sets are not specified."})})}),(0,me.jsx)(g.ZP,{container:!0,spacing:1,children:u.map((function(e){var n,t=c[e];return Object.values(t.setEffects).some((function(e){return e.document&&e.document.some((function(e){return e.conditional}))}))?(0,me.jsx)(g.ZP,{item:!0,xs:6,lg:4,children:(0,me.jsxs)(K.Z,{sx:{height:"100%"},children:[(0,me.jsxs)(x.Z,{className:"grad-".concat(t.rarity[0],"star"),width:"100%",sx:{display:"flex"},children:[(0,me.jsx)(x.Z,{component:"img",src:t.defIconSrc,sx:{height:100,width:"auto"}}),(0,me.jsxs)(x.Z,{sx:{flexGrow:1,px:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,me.jsx)(Z.Z,{variant:"h6",children:null!==(n=null===c||void 0===c?void 0:c[e].name)&&void 0!==n?n:""}),(0,me.jsx)(Z.Z,{variant:"subtitle1",children:t.rarity.map((function(e,n){return(0,me.jsxs)("span",{children:[e,(0,me.jsx)(Zn.t,{stars:1})," ",n<t.rarity.length-1?"/ ":null]},e)}))})]})]}),(0,me.jsx)(p.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:Object.keys(t.setEffects).map((function(n){return(0,me.jsx)(pn.Z,{setKey:e,setNumKey:parseInt(n)},n)}))})]})},e):null}))})]}),(0,me.jsx)(j.Z,{}),(0,me.jsx)(p.Z,{sx:{py:1},children:(0,me.jsx)(an.Z,{large:!0,onClick:t})})]})})}var bn=t(8375);function yn(e){var n,t,r,a=e.index,s=e.setFilters,l=e.onChange,c=e.disabled,o=void 0!==c&&c,u=s[a],d=u.key,f=u.num,h=(0,He.Z)(Ve.y.getAll,[]),x=(0,S.useMemo)((function(){if(h){var e=Object.fromEntries(Object.entries(Ve.y.setKeysByRarities(h)).map((function(e){var n=(0,i.Z)(e,2);return[n[0],n[1].filter((function(e){var n,t;if(s.some((function(n){return n.key===e})))return!1;var r=Object.keys(null!==(n=null===h||void 0===h||null===(t=h[e])||void 0===t?void 0:t.setEffects)&&void 0!==n?n:{}),i=s.reduce((function(e,n,t){return n.key&&t!==a?e+n.num:e}),0);return!r.every((function(e){return parseInt(e)+i>5}))}))]})));return e}}),[h,s,a]),m=s.reduce((function(e,n){return n.key?e+n.num:e}),0);return(0,me.jsxs)(K.Z,{children:[(0,me.jsx)(p.Z,{children:(0,me.jsxs)(y.Z,{children:[h&&(0,me.jsx)(bn.Z,{hasUnselect:!0,selectedSetKey:d,artifactSetsByRarity:x,disabled:o,onChange:function(e){var n,t,r;return l(a,e,null!==(n=parseInt(Object.keys(null!==(t=null===(r=h[e])||void 0===r?void 0:r.setEffects)&&void 0!==t?t:{})[0]))&&void 0!==n?n:0)}}),(0,me.jsx)(B.Z,{title:"".concat(f,"-set"),disabled:o||!d||m>=5,children:Object.keys(null!==(n=null===h||void 0===h||null===(t=h[d])||void 0===t?void 0:t.setEffects)&&void 0!==n?n:{}).map((function(e){var n=s.reduce((function(e,n){return n.key&&n.key!==d?e+n.num:e}),0);return parseInt(e)+n<=5&&(0,me.jsx)(k.Z,{onClick:function(){var n;return l(a,s[a].key,null!==(n=parseInt(e))&&void 0!==n?n:0)},children:"".concat(e,"-set")},e)}))})]})}),!!d&&(0,me.jsx)(j.Z,{}),!!d&&(0,me.jsx)(p.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:Object.keys(null!==(r=null===h||void 0===h?void 0:h[d].setEffects)&&void 0!==r?r:{}).map((function(e){return parseInt(e)})).filter((function(e){return e<=f})).map((function(e){return(0,me.jsx)(pn.Z,{setKey:d,setNumKey:e},d+e)}))})]})}var kn=t(15021),wn=t(14763);function Cn(){var e=(0,S.useContext)(z.R),n=e.data,t=e.character,r=Object.keys(null===t||void 0===t?void 0:t.bonusStats);if(!r.length)return null;var i=r.map((function(e){return n.get(N.ri.customBonus[e])}));return(0,me.jsxs)(K.Z,{children:[(0,me.jsx)(p.Z,{sx:{py:1},children:(0,me.jsx)(Z.Z,{children:"Bonus Stats"})}),(0,me.jsx)(j.Z,{}),(0,me.jsx)(p.Z,{children:(0,me.jsx)(wn.lD,{sx:{my:0},children:i.map((function(e){return(0,me.jsx)(kn.ZP,{children:(0,me.jsx)(wn.JW,{node:e})},e.key)}))})})]})}var Sn=t(57482),Pn=t(52771),On=1e7,Dn=(0,ae.ZP)("strong")({fontFamily:"monospace"}),An=(0,ae.ZP)(Sn.Z)((function(e){e.theme;return{height:10,borderRadius:5}}));function En(e){var n,t,r,i,a=e.totBuildNumber,s=e.generatingBuilds,l=e.generationSkipped,c=e.generationProgress,o=e.generationDuration,u=e.characterName,d=e.maxBuildsToShow,f=null!==(n=null===a||void 0===a?void 0:a.toLocaleString())&&void 0!==n?n:a,h=a-l,x=null!==(t=null===c||void 0===c?void 0:c.toLocaleString())&&void 0!==t?t:c,v=null!==(r=null===l||void 0===l?void 0:l.toLocaleString())&&void 0!==r?r:l,p=null!==(i=null===h||void 0===h?void 0:h.toLocaleString())&&void 0!==i?i:h,j=!!l&&(0,me.jsxs)("span",{children:["(",(0,me.jsx)("b",{children:v})," skipped)"]}),b="success",y="",k="",w=void 0;return s?(w=100*c/h,y=(0,me.jsxs)(Z.Z,{children:["Generating and testing ",(0,me.jsxs)(Dn,{children:[x,"/",p]})," build configurations against the criteria for ",(0,me.jsx)("b",{children:u}),". ",j]}),k=(0,me.jsxs)(Z.Z,{children:["Time elapsed: ",(0,me.jsx)(Dn,{children:(0,Pn.e6)(Math.round(o))})]})):!s&&c?(w=100,y=(0,me.jsxs)(Z.Z,{children:["Generated and tested ",(0,me.jsx)(Dn,{children:p})," Build configurations against the criteria for ",(0,me.jsx)("b",{children:u}),". ",j]}),k=(0,me.jsxs)(Z.Z,{children:["Total duration: ",(0,me.jsx)(Dn,{children:(0,Pn.e6)(Math.round(o))})]})):0===a?(y=(0,me.jsxs)(Z.Z,{children:["Current configuration will not generate any builds for ",(0,me.jsx)("b",{children:u}),". Please change your Artifact configurations, or add/include more Artifacts."]}),b="error"):a>On?(y=(0,me.jsxs)(Z.Z,{children:["Current configuration will generate ",(0,me.jsx)(Dn,{children:f})," potential builds for ",(0,me.jsx)("b",{children:u}),". This might take quite a while to generate..."]}),b="warning"):y=(0,me.jsxs)(Z.Z,{children:["Current configuration ",a<=d?"generated":"will generate"," ",(0,me.jsx)(Dn,{children:f})," builds for ",(0,me.jsx)("b",{children:u}),"."]}),(0,me.jsxs)(m.Z,{severity:b,variant:"filled",sx:{"& .MuiAlert-message":{flexGrow:1}},children:[y&&y,k&&k,void 0!==w&&(0,me.jsxs)(g.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsx)(Z.Z,{children:"".concat(w.toFixed(1),"%")})}),(0,me.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,me.jsx)(An,{variant:"determinate",value:w,color:"primary"})})]})]})}var Kn=t(37355),Mn=t(9585),Bn=t(66887),In=t(91732);function Rn(){var e=(0,S.useState)(!1),n=(0,i.Z)(e,2),t=n[0],r=n[1],a=(0,S.useContext)(z.R).data,s=a.get(N.ri.enemy.level),l=a.get(N.ri.enemy.defRed),c=a.get(N.ri.enemy.defIgn);return(0,me.jsxs)(K.Z,{children:[(0,me.jsx)(Mn.Z,{action:(0,me.jsx)(In.Z,{expand:t,onClick:function(){return r(!t)},"aria-expanded":t,"aria-label":"show more",size:"small",children:(0,me.jsx)(Kn.Z,{})}),title:(0,me.jsxs)(Z.Z,{children:[V.ZP.get(s.key)," ",(0,me.jsx)("strong",{children:(0,V.EC)(s.value,s.unit,0)})]})}),(0,me.jsx)(j.Z,{}),(0,me.jsx)(p.Z,{children:(0,me.jsxs)(g.ZP,{container:!0,spacing:1,children:[ye.Kj.map((function(e){return(0,me.jsx)(g.ZP,{item:!0,xs:3,children:(0,me.jsx)(Bn.Q2,{element:e})},e)})),(0,me.jsx)(g.ZP,{item:!0,xs:4,children:(0,me.jsxs)(Z.Z,{children:["DEF Reduction ",(0,V.EC)(l.value,l.unit)]})}),(0,me.jsx)(g.ZP,{item:!0,xs:4,children:(0,me.jsxs)(Z.Z,{children:["DEF Reduction ",(0,V.EC)(c.value,c.unit)]})})]})}),(0,me.jsx)(ie.Z,{in:t,timeout:"auto",unmountOnExit:!0,children:(0,me.jsx)(p.Z,{sx:{pt:0},children:(0,me.jsx)(Bn.$r,{bsProps:{xs:12}})})})]})}var Tn=t(32490);function Ln(e){var n=e.disabled;return(0,me.jsxs)(K.Z,{children:[(0,me.jsx)(p.Z,{sx:{py:1},children:(0,me.jsxs)(g.ZP,{container:!0,children:[(0,me.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,me.jsx)(Z.Z,{children:"Hit Mode Options"})}),(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsx)(Tn.pg,{size:"small",disabled:n})})]})}),(0,me.jsx)(j.Z,{}),(0,me.jsxs)(p.Z,{children:[(0,me.jsx)(Tn.Hn,{fullWidth:!0,size:"small",disabled:n}),(0,me.jsx)(Tn.oX,{fullWidth:!0,size:"small",disabled:n,sx:{mt:1}})]})]})}var zn=["sands","goblet","circlet"];function Gn(e){var n=e.mainStatAssumptionLevel,t=e.mainStatKeys,r=e.onChangeMainStatKey,i=e.onChangeAssLevel,a=e.disabled,s=void 0!==a&&a;return(0,me.jsxs)(K.Z,{children:[(0,me.jsx)(p.Z,{sx:{py:1},children:(0,me.jsxs)(g.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,me.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,me.jsx)(Z.Z,{children:"Artifact Main Stat"})}),(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsx)(Ue.Z,{placement:"top",title:(0,me.jsxs)(Z.Z,{children:[(0,me.jsx)("strong",{children:"Level Assumption"})," changes mainstat value to be at least a specific level. Does not change substats."]}),children:(0,me.jsx)(ne.Z,{})})}),(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsx)(Fn,{mainStatAssumptionLevel:n,setmainStatAssumptionLevel:function(e){return i(e)},disabled:s})})]})}),(0,me.jsx)(j.Z,{}),(0,me.jsx)(p.Z,{sx:{"> div:nth-last-of-type(n+2)":{mb:1}},children:zn.map((function(e){var n=t[e].length;return(0,me.jsxs)(E.Z,{children:[(0,me.jsx)(p.Z,{sx:{py:1},children:(0,me.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsx)(tn.ZP,{slotKey:e})}),(0,me.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,me.jsx)(ln.Z,{color:"info",children:n?"".concat(n," Selected"):"Any"})}),(0,me.jsx)(g.ZP,{item:!0,children:(0,me.jsx)(b.Z,{color:"error",size:"small",disabled:!t[e].length||s,onClick:function(){return r(e)},children:(0,me.jsx)(vn.Z,{})})})]})}),(0,me.jsx)(j.Z,{}),(0,me.jsx)(p.Z,{children:(0,me.jsx)(g.ZP,{container:!0,spacing:1,children:_e.Z.slotMainStats(e).map((function(n,i){var a=t[e].includes(n);return(0,me.jsx)(g.ZP,{item:!0,xs:i<3?4:6,children:(0,me.jsx)(b.Z,{fullWidth:!0,size:"small",color:a?"success":"secondary",disabled:s,sx:{height:"100%"},onClick:function(){return r(e,n)},startIcon:Qe.Z[n],children:V.ZP.get(n)})},n)}))})})]},e)}))})]})}var Nn={0:(0,me.jsx)("span",{children:"No level assumption"}),4:(0,me.jsx)("span",{children:"Assume at least level 4"}),8:(0,me.jsx)("span",{children:"Assume at least level 8"}),12:(0,me.jsx)("span",{children:"Assume at least level 12"}),16:(0,me.jsx)("span",{children:"Assume at least level 16"}),20:(0,me.jsx)("span",{children:"Assume at least level 20"})};function Fn(e){var n=e.mainStatAssumptionLevel,t=void 0===n?0:n,r=e.setmainStatAssumptionLevel,a=e.disabled;return(0,me.jsx)(B.Z,{color:t?"warning":"primary",disabled:a,title:Nn[t],children:Object.entries(Nn).map((function(e){var n=(0,i.Z)(e,2),t=n[0],a=n[1];return(0,me.jsx)(k.Z,{onClick:function(){return r(parseInt(t))},children:a},t)}))})}var _n=t(78593),Vn=t(25028),qn=t(8430),Wn=(0,ae.ZP)(b.Z)({color:"black",backgroundColor:"white","&:hover":{backgroundColor:"#e1e1e1"}});function Hn(e){var n=e.optimizationTarget,t=e.setTarget,r=e.disabled,a=void 0!==r&&r,s=(0,S.useState)(!1),l=(0,i.Z)(s,2),c=l[0],o=l[1],u=(0,S.useCallback)((function(){return!a&&o(!0)}),[o,a]),d=(0,S.useCallback)((function(){return o(!1)}),[o]),f=(0,S.useCallback)((function(e){d(),t(e)}),[d,t]),h=(0,S.useContext)(z.R).data,x=(0,qn.U)(h);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Wn,{onClick:u,disabled:a,children:(0,me.jsx)(Jn,{optimizationTarget:n})}),(0,me.jsx)(sn.Z,{open:c,onClose:d,children:(0,me.jsx)(E.Z,{children:(0,me.jsx)(p.Z,{children:(0,me.jsx)(_n.ZP,{columns:{xs:1,sm:2,md:3},spacing:1,children:x.map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,me.jsx)(Un,{displayNs:r,sectionKey:t,setTarget:f},t)}))})})})})]})}function Un(e){var n=e.displayNs,t=e.sectionKey,r=e.setTarget,a=(0,S.useContext)(z.R).data,s=(0,He.Z)((0,qn.f)(a,t),[a,t]);return!s||Object.values(n).every((function(e){return e.isEmpty}))?null:(0,me.jsxs)(K.Z,{children:[(0,me.jsx)(Mn.Z,{avatar:s.icon&&(0,me.jsx)($e.Z,{size:2,sx:{m:-1},src:s.icon}),title:s.title,action:s.action,titleTypographyProps:{variant:"subtitle1"}}),(0,me.jsx)(j.Z,{}),(0,me.jsx)(Vn.Z,{children:Object.entries(n).map((function(e){var n=(0,i.Z)(e,2),a=n[0],s=n[1];return(0,me.jsx)($n,{node:s,onClick:function(){return r([t,a])}},a)}))})]},t)}function Yn(){return(0,me.jsx)("b",{children:"Please select an Optimization Target"})}function Jn(e){var n=e.optimizationTarget,t=(0,S.useContext)(z.R).data,r=(0,He.Z)(n&&(0,qn.f)(t,n[0]),[t,n]);if(!n||!r)return(0,me.jsx)(Yn,{});var i=(0,$.Hm)(t.getDisplay(),n);return i?(0,me.jsxs)("b",{children:[r.title," : ",(0,me.jsx)(Ye.Z,{color:i.variant,children:V.ZP.get(i.key)})]}):(0,me.jsx)(Yn,{})}function $n(e){var n=e.node,t=e.onClick;return n.isEmpty?null:(0,me.jsx)(k.Z,{onClick:t,style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,me.jsx)(Ye.Z,{color:n.variant,children:V.ZP.get(n.key)})})}function Qn(){var e,n,t,r=(0,S.useContext)(z.R).data.getTeamBuff(),i=[];return Object.values(null!==(e=r.total)&&void 0!==e?e:{}).forEach((function(e){return!e.isEmpty&&0!==e.value&&i.push(e)})),Object.values(null!==(n=r.premod)&&void 0!==n?n:{}).forEach((function(e){return!e.isEmpty&&0!==e.value&&i.push(e)})),Object.values(null!==(t=r.enemy)&&void 0!==t?t:{}).forEach((function(e){return!e.isEmpty&&0!==e.value&&i.push(e)})),i.length?(0,me.jsxs)(K.Z,{children:[(0,me.jsx)(p.Z,{sx:{py:1},children:(0,me.jsx)(Z.Z,{children:"Team Buff Stats"})}),(0,me.jsx)(j.Z,{}),(0,me.jsx)(p.Z,{children:(0,me.jsx)(wn.lD,{sx:{my:0},children:i.map((function(e,n){var t;return e&&(0,me.jsx)(wn.JW,{node:e,component:kn.ZP},n.toString()+(null!==(t=e.key)&&void 0!==t?t:""))}))})})]}):null}var Xn=t(4942);var et=t(50765),nt=c().mark(st),tt=c().mark(lt),rt=c().mark(ct),it=(0,be.yY)((0,$.I8)({dyn:(0,s.Z)((0,s.Z)({},N.qH.art),N.qH.artSet)})),at={art:(0,$.O)([].concat((0,a.Z)(et.r),(0,a.Z)(et.L)),(function(e){return it.dyn[e]})),artSet:(0,$.xh)(N.qH.artSet,(function(e,n){return it.dyn[n]}))};function st(e){var n,t;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=function(e,r,i){var a,l,o,u,d,f,h;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.length){n.next=2;break}return n.abrupt("return");case 2:if(!r.some((function(e){return!Object.keys(e).length}))){n.next=6;break}return n.next=5,e;case 5:return n.abrupt("return");case 6:a=ye.eV[i-1],l=new Set(r.flatMap((function(e){return Object.keys(e)}))),o=(0,ee.Z)(l),n.prev=9,d=c().mark((function n(){var l,o,d;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=u.value,o=(0,s.Z)((0,s.Z)({},e),{},(0,Xn.Z)({},a,{kind:"required",sets:new Set([l])})),d=r.filter((function(e){return e[l]})).map((function(e){var n=(0,s.Z)({},e);return n[l]-=1,n[l]||delete n[l],n})),n.delegateYield(t(o,d,i-1),"t0",4);case 4:case"end":return n.stop()}}),n)})),o.s();case 12:if((u=o.n()).done){n.next=16;break}return n.delegateYield(d(),"t0",14);case 14:n.next=12;break;case 16:n.next=21;break;case 18:n.prev=18,n.t1=n.catch(9),o.e(n.t1);case 21:return n.prev=21,o.f(),n.finish(21);case 24:return f=(0,s.Z)((0,s.Z)({},e),{},(0,Xn.Z)({},a,{kind:"exclude",sets:l})),h=r.filter((function(e){return Object.values(e).reduce((function(e,n){return e+n}),0)<i})),n.delegateYield(t(f,h,i-1),"t2",27);case 27:case"end":return n.stop()}}),n,null,[[9,18,21,24]])},n=c().mark(t),r.delegateYield(t((0,$.O)(ye.eV,(function(e){return ot})),e.map((function(e){var n={};return e.forEach((function(e){var t,r=e.key,i=e.num;return r&&i&&(n[r]=(null!==(t=n[r])&&void 0!==t?t:0)+i)})),n})),5),"t0",3);case 3:case"end":return r.stop()}}),nt)}function lt(e,n,t){var r,i,a;return c().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:t<1e4&&(t=1e4),r=(0,ee.Z)(n),l.prev=2,a=c().mark((function n(){var r,a,l;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=i.value,a=[r],l=c().mark((function n(){var r,i,l,o,u,d,f;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=a.pop(),i=Ke(e,r),!((l=Ie(i))<=t)){n.next=8;break}if(!l){n.next=7;break}return n.next=7,r;case 7:return n.abrupt("return","continue");case 8:if(o=ye.eV.map((function(e){return{slot:e,sets:new Set(i.values[e].map((function(e){return e.set})))}})).filter((function(e){return e.sets.size>1})),o.length){n.next=12;break}return n.delegateYield(ct(i,r,t),"t0",11);case 11:return n.abrupt("return","continue");case 12:u=o.reduce((function(e,n){return e.sets.size<n.sets.size?e:n})),d=u.sets,f=u.slot,d.forEach((function(e){return a.push((0,s.Z)((0,s.Z)({},r),{},(0,Xn.Z)({},f,{kind:"required",sets:new Set([e])})))}));case 14:case"end":return n.stop()}}),n)}));case 3:if(!a.length){n.next=10;break}return n.delegateYield(l(),"t0",5);case 5:if("continue"!==n.t0){n.next=8;break}return n.abrupt("continue",3);case 8:n.next=3;break;case 10:case"end":return n.stop()}}),n)})),r.s();case 5:if((i=r.n()).done){l.next=9;break}return l.delegateYield(a(),"t0",7);case 7:l.next=5;break;case 9:l.next=14;break;case 11:l.prev=11,l.t1=l.catch(2),r.e(l.t1);case 14:return l.prev=14,r.f(),l.finish(14);case 17:case"end":return l.stop()}}),tt,null,[[2,11,14,17]])}function ct(e,n,t){var r,i;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=[n],i=c().mark((function n(){var i,a,l,o,u,d,f,h,x,m,v,p,Z;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.pop(),a=Ke(e,i),!((l=Ie(a))<=t)){n.next=8;break}if(!l){n.next=7;break}return n.next=7,i;case 7:return n.abrupt("return","continue");case 8:if(o=ye.eV.map((function(e){return{slot:e,length:a.values[e].length}})).filter((function(e){return e.length>1})),u=o.reduce((function(e,n){return e.length<n.length?e:n})),d=u.slot,f=u.length,h=Math.ceil(l/t),x=Math.min(h,f),m=Array(x).fill(0).map((function(e){return new Set})),a.values[d].forEach((function(e,n){var t=e.id;return m[n%x].add(t)})),!(h>f)){n.next=18;break}m.forEach((function(e){return r.push((0,s.Z)((0,s.Z)({},i),{},(0,Xn.Z)({},d,{kind:"id",ids:e})))})),n.next=35;break;case 18:v=(0,ee.Z)(m),n.prev=19,v.s();case 21:if((p=v.n()).done){n.next=27;break}return Z=p.value,n.next=25,(0,s.Z)((0,s.Z)({},i),{},(0,Xn.Z)({},d,{kind:"id",ids:Z}));case 25:n.next=21;break;case 27:n.next=32;break;case 29:n.prev=29,n.t0=n.catch(19),v.e(n.t0);case 32:return n.prev=32,v.f(),n.finish(32);case 35:case"end":return n.stop()}}),n,null,[[19,29,32,35]])}));case 2:if(!r.length){a.next=9;break}return a.delegateYield(i(),"t0",4);case 4:if("continue"!==a.t0){a.next=7;break}return a.abrupt("continue",2);case 7:a.next=2;break;case 9:case"end":return a.stop()}}),rt)}var ot={kind:"exclude",sets:new Set};var ut=S.lazy((function(){return t.e(557).then(t.bind(t,98557))}));function dt(e,n){switch(n.type){case"mainStatKey":var t=n.slotKey,r=n.mainStatKey,i=(0,s.Z)({},e.mainStatKeys);return e.mainStatKeys[t].includes(r)?i[t]=i[t].filter((function(e){return e!==r})):i[t].push(r),(0,s.Z)((0,s.Z)({},e),{},{mainStatKeys:i});case"mainStatKeyReset":var l=n.slotKey,c=(0,s.Z)({},e.mainStatKeys);return c[l]=[],(0,s.Z)((0,s.Z)({},e),{},{mainStatKeys:c});case"setFilter":var o=n.index,u=n.key,d=n.num,f=void 0===d?0:d;return e.setFilters[o]={key:u,num:f},(0,s.Z)((0,s.Z)({},e),{},{setFilters:(0,a.Z)(e.setFilters)})}return(0,s.Z)((0,s.Z)({},e),n)}function ft(){return{characterKey:""}}function ht(e){var n,t,l,C,ne=e.location.characterKey,te=(0,U.Z)("GlobalSettings",_.c),re=(0,i.Z)(te,1)[0].tcMode,ie=(0,S.useContext)(L.t).database,ae=(0,U.Z)("BuildDisplay",ft),se=(0,i.Z)(ae,2),le=se[0].characterKey,ce=se[1],oe=(0,S.useCallback)((function(e){e&&ie._getChar(e)?ce({characterKey:e}):ce({characterKey:""})}),[ce,ie]);(0,S.useEffect)((function(){ne&&ne!==le&&oe(ne)}),[]);var ue=(0,S.useState)(!1),de=(0,i.Z)(ue,2),fe=de[0],he=de[1],xe=(0,S.useState)(0),pe=(0,i.Z)(xe,2),Ze=pe[0],je=pe[1],ge=(0,S.useState)(0),be=(0,i.Z)(ge,2),ye=be[0],we=be[1],Ce=(0,S.useState)(0),Se=(0,i.Z)(Ce,2),Pe=Se[0],Oe=Se[1],De=(0,S.useState)(void 0),Ae=(0,i.Z)(De,2),Ee=Ae[0],Re=Ae[1],Te=(0,Y.Z)(),Le=(0,i.Z)(Te,2),ze=Le[0],Ge=Le[1],Ne=(0,S.useState)(navigator.hardwareConcurrency||4),Fe=(0,i.Z)(Ne,2),Ve=Fe[0],qe=Fe[1],We=(0,H.Z)(),He=(0,W.Z)(le),Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,S.useContext)(L.t).database,t=(0,S.useState)(n._getChar(e)),r=(0,i.Z)(t,2),a=r[0],s=r[1];return(0,S.useEffect)((function(){return s(n._getChar(e))}),[n,e]),(0,S.useEffect)((function(){return e?n.followChar(e,s):void 0}),[e,s,n]),a}(le),Ye=null!==(n=null===Ue||void 0===Ue?void 0:Ue.buildSettings)&&void 0!==n?n:(0,X.$)(),Je=Ye.plotBase,$e=Ye.setFilters,Qe=Ye.statFilters,Xe=Ye.mainStatKeys,en=Ye.optimizationTarget,nn=Ye.mainStatAssumptionLevel,tn=Ye.useExcludedArts,rn=Ye.useEquippedArts,an=Ye.builds,sn=Ye.buildDate,ln=Ye.maxBuildsToShow,cn=Ye.levelLow,on=Ye.levelHigh,un=(0,S.useMemo)((function(){return an.map((function(e){return e.map((function(e){return ie._getArt(e)}))}))}),[an,ie]),dn=(0,J.Z)(le,nn),fn=null!==(t=null===dn||void 0===dn?void 0:dn[le])&&void 0!==t?t:{},hn=fn.characterSheet,xn=fn.target,mn=null!==(l=null===Ue||void 0===Ue?void 0:Ue.compareData)&&void 0!==l&&l,vn=(0,S.useMemo)((function(){return!ie._getCharKeys().length}),[ie]),pn=(0,S.useMemo)((function(){return!ie._getArts().length}),[ie]),Zn=(0,S.useCallback)((function(e){return He&&He({buildSettings:dt(Ye,e)})}),[He,Ye]);(0,S.useEffect)((function(){return P.ZP.pageview("/build")}),[]);var gn=(0,S.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";le!==e&&(oe(e),Re(void 0))}),[oe,le]);(0,S.useEffect)((function(){return ie.followAnyArt(Ge)}),[Ge,ie]);var bn=(0,S.useMemo)((function(){if(!le)return{totBuildNumber:0};var e=function(e,n){var t,r={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},i=new Set,l=(0,ee.Z)(e);try{for(l.s();!(t=l.n()).done;){var c,o=t.value,u=_e.Z.mainStatValue(o.mainStatKey,o.rarity,Math.max(Math.min(n,4*o.rarity),o.level)),d={id:o.id,set:o.setKey,values:(0,s.Z)((c={},(0,Xn.Z)(c,o.setKey,1),(0,Xn.Z)(c,o.mainStatKey,o.mainStatKey.endsWith("_")?u/100:u),c),Object.fromEntries(o.substats.map((function(e){return[e.key,e.key.endsWith("_")?e.accurateValue/100:e.accurateValue]}))))};delete d.values[""],r.values[o.slotKey].push(d),Object.keys(d.values).forEach((function(e){return i.add(e)}))}}catch(f){l.e(f)}finally{l.f()}return r.base=(0,$.O)((0,a.Z)(i),(function(e){return 0})),r}(ie._getArts().filter((function(e){if(e.level<cn)return!1;if(e.level>on)return!1;var n=Xe[e.slotKey];return!(null!==n&&void 0!==n&&n.length&&!n.includes(e.mainStatKey))&&(e.location===le||!(e.exclude&&!tn)&&!(e.location&&!rn))})),nn),n=(0,a.Z)(st([$e])),t=(0,a.Z)(n).map((function(n){return Ie(Ke(e,n))})).reduce((function(e,n){return e+n}),0);return ze&&{split:e,setPerms:n,totBuildNumber:t}}),[le,tn,rn,Xe,$e,cn,on,ze,ie,nn]),kn=bn.split,wn=bn.setPerms,Sn=bn.totBuildNumber;(0,S.useEffect)((function(){je(0)}),[Sn]);var Pn=(0,S.useRef)((function(){}));(0,S.useEffect)((function(){return function(){return Pn.current()}}),[]);var Dn=(0,S.useCallback)((0,r.Z)(c().mark((function e(){var n,t,s,l,o,u,d,f,h,x,m,v,p,Z,j,g,b,y,k,w,C,S,O,A,E,K,M,B,I,R,T;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y=function(){var e=b.next(),n=e.done,t=e.value;return n?void 0:{command:"request",threshold:g.buildValues[ln-1],filter:t}},le&&en&&kn&&wn){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,J.V)(ie,le,nn,[]);case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(l=null===(n=(0,G.Qo)(s.teamData,le)[le])||void 0===n?void 0:n.target.data[0]){e.next=11;break}return e.abrupt("return");case 11:if(Object.assign(l,(0,G.b3)([l,at])),o=(0,$.Hm)(null!==(t=l.display)&&void 0!==t?t:{},en)){e.next=15;break}return e.abrupt("return");case 15:for(u=o,d=Object.entries(Qe).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return t.endsWith("_")&&(r/=100),{value:N.ri.total[t],minimum:r}})).filter((function(e){return e.value&&e.minimum>-1/0})),f=performance.now(),he(!0),Re(void 0),we(0),je(0),Oe(0),h=new Promise((function(e){return Pn.current=e})),x=[].concat((0,a.Z)(d.map((function(e){return e.value}))),[o]),m=kn,v=Sn,p=[].concat((0,a.Z)(d.map((function(e){return e.minimum}))),[-1/0]),Je&&(x.push(N.ri.total[Je]),p.push(-1/0)),x=(0,F.tL)(x,l,(function(e){return"dyn"!==(0,i.Z)(e.path,1)[0]})),Z=ke(x,p,m,ln,new Set($e.map((function(e){return e.key}))),{reaffine:!0,pruneArtRange:!0,pruneNodeRange:!0,pruneOrder:!0}),x=Z.nodes,m=Z.arts,j=Je?x.pop():void 0,o=x.pop(),g={buildCount:0,failedCount:0,skippedCount:v,buildValues:Array(ln).fill(0).map((function(e){return-1/0}))},wn.forEach((function(e){return g.skippedCount-=Ie(Ke(m,e))})),b=lt(m,wn,1===Ve?1/0:Math.min(v/Ve/4,1e6))[Symbol.iterator](),k=x.map((function(e,n){return{value:e,min:p[n]}})).filter((function(e){return e.min>-1/0})),w=[],C=function(e){var n=new D,t={command:"setup",id:"".concat(e),arts:m,optimizationTarget:o,plotBase:j,maxBuilds:ln,filters:k};n.postMessage(t,void 0);var i=void 0,s=new Promise((function(e){return i=e}));n.onmessage=function(){var e=(0,r.Z)(c().mark((function e(t){var r,s,l,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.data,e.t0=r.command,e.next="interim"===e.t0?4:"request"===e.t0?9:"finalize"===e.t0?12:15;break;case 4:return g.buildCount+=r.buildCount,g.failedCount+=r.failedCount,g.skippedCount+=r.skippedCount,r.buildValues&&((s=g.buildValues).push.apply(s,(0,a.Z)(r.buildValues)),g.buildValues.sort((function(e,n){return n-e})).splice(ln)),e.abrupt("break",16);case 9:return(l=y())?n.postMessage(l):(o={command:"finalize"},n.postMessage(o)),e.abrupt("break",16);case 12:return n.terminate(),i(r),e.abrupt("break",16);case 15:console.log("DEBUG",r);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h.then((function(){return n.terminate()})),w.push(s)},S=0;S<Ve;S++)C(S);return O=setInterval((function(){je(g.buildCount),Oe(g.skippedCount),we(performance.now()-f)}),100),e.next=43,Promise.any([Promise.all(w),h]);case 43:A=e.sent,clearInterval(O),Pn.current=function(){},A?(Je&&(M=Be(A.map((function(e){return e.plotData}))),B=N.ri.total[Je],I=Object.values(M),"%"===V.ZP.unit(null===(E=u.info)||void 0===E?void 0:E.key)&&(I=I.map((function(e){return{value:100*e.value,plot:e.plot}}))),"%"===V.ZP.unit(null===(K=B.info)||void 0===K?void 0:K.key)&&(I=I.map((function(e){var n=e.value,t=e.plot;return{value:n,plot:100*(null!==t&&void 0!==t?t:0)}}))),Re({valueNode:u,plotNode:B,data:I})),R=Me(A.map((function(e){return e.builds})),ln),Zn({builds:R.map((function(e){return e.artifactIds})),buildDate:Date.now()}),T=performance.now()-f,je(g.buildCount),Oe(g.skippedCount),we(T),P.ZP.timing({category:"Build Generation",variable:"timing",value:T,label:Sn.toString()})):(we(0),je(0),Oe(0)),he(!1);case 48:case"end":return e.stop()}}),e)}))),[le,ie,Sn,nn,ln,en,Je,wn,kn,Zn,$e,Qe,Ve]),An=null!==(C=null===hn||void 0===hn?void 0:hn.name)&&void 0!==C?C:"Character Name",Kn=(0,S.useCallback)((function(e){Zn({plotBase:e}),Re(void 0)}),[Zn]),Mn=(0,S.useMemo)((function(){return xn&&hn&&Ue&&dn&&{data:xn,characterSheet:hn,character:Ue,mainStatAssumptionLevel:nn,teamData:dn,characterDispatch:He}}),[xn,hn,Ue,dn,He,nn]);return(0,me.jsxs)(x.Z,{display:"flex",flexDirection:"column",gap:1,sx:{my:1},children:[(0,me.jsx)(I.Z,{pageKey:"buildPage",modalTitle:"Character Management Page Guide",text:["For self-infused attacks, like Noelle's Sweeping Time, enable the skill in the character talent page.","You can compare the difference between equipped artifacts and generated builds.",'Rainbow builds can sometimes be "optimal". Good substat combinations can sometimes surpass set effects.',"The more complex the formula, the longer the generation time."],children:(0,me.jsx)(ut,{})}),vn&&(0,me.jsxs)(m.Z,{severity:"error",variant:"filled",children:[" Opps! It looks like you haven't added a character to GO yet! You should go to the ",(0,me.jsx)(v.Z,{component:O.rU,to:"/character",children:"Characters"})," page and add some!"]}),pn&&(0,me.jsxs)(m.Z,{severity:"warning",variant:"filled",children:[" Opps! It looks like you haven't added any artifacts to GO yet! You should go to the ",(0,me.jsx)(v.Z,{component:O.rU,to:"/artifact",children:"Artifacts"})," page and add some!"]}),!Mn&&(0,me.jsxs)(E.Z,{children:[(0,me.jsx)(p.Z,{sx:{py:1},children:(0,me.jsx)(Z.Z,{variant:"h6",children:"Build Generator"})}),(0,me.jsx)(j.Z,{}),(0,me.jsx)(p.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:(0,me.jsx)(K.Z,{children:(0,me.jsx)(p.Z,{children:(0,me.jsx)(M.Z,{fullWidth:!0,value:le,onChange:gn,disabled:fe})})})})]}),Mn&&(0,me.jsxs)(z.R.Provider,{value:Mn,children:[(0,me.jsxs)(E.Z,{children:[(0,me.jsx)(p.Z,{sx:{py:1},children:(0,me.jsx)(Z.Z,{variant:"h6",children:"Build Generator"})}),(0,me.jsx)(j.Z,{}),(0,me.jsxs)(p.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,me.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,me.jsxs)(g.ZP,{item:!0,xs:12,md:6,lg:5,display:"flex",flexDirection:"column",gap:1,children:[(0,me.jsx)(K.Z,{children:(0,me.jsx)(p.Z,{children:(0,me.jsx)(M.Z,{fullWidth:!0,value:le,onChange:gn,disabled:fe})})}),(0,me.jsx)(x.Z,{children:(0,me.jsx)(q.Z,{characterKey:le,onClick:fe?void 0:We})}),(0,me.jsx)(Cn,{}),(0,me.jsx)(Qn,{}),(0,me.jsx)(Rn,{}),(0,me.jsx)(T.Z,{statFilters:Qe,setStatFilters:function(e){return Zn({statFilters:e})},disabled:fe}),(0,me.jsx)(Ln,{disabled:fe})]}),(0,me.jsxs)(g.ZP,{item:!0,xs:12,md:6,lg:7,display:"flex",flexDirection:"column",gap:1,children:[(0,me.jsx)(jn,{disabled:fe}),$e.map((function(e,n){return n<=$e.filter((function(e){return e.key})).length&&(0,me.jsx)(yn,{index:n,setFilters:$e,disabled:fe,onChange:function(e,n,t){return Zn({type:"setFilter",index:e,key:n,num:t})}},n)})),le&&(0,me.jsx)(K.Z,{children:(0,me.jsx)(p.Z,{children:(0,me.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,me.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,me.jsx)(b.Z,{fullWidth:!0,onClick:function(){return Zn({useEquippedArts:!rn})},disabled:fe,startIcon:rn?(0,me.jsx)(d.Z,{}):(0,me.jsx)(f.Z,{}),children:"Use Equipped Artifacts"})}),(0,me.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,me.jsx)(b.Z,{fullWidth:!0,onClick:function(){return Zn({useExcludedArts:!tn})},disabled:fe,startIcon:tn?(0,me.jsx)(d.Z,{}):(0,me.jsx)(f.Z,{}),children:"Use Excluded Artifacts"})})]})})}),le&&(0,me.jsxs)(K.Z,{children:[(0,me.jsx)(p.Z,{sx:{py:1},children:"Artifact Level Filter"}),(0,me.jsx)(j.Z,{}),(0,me.jsx)(p.Z,{children:(0,me.jsx)(A.Z,{levelLow:cn,levelHigh:on,dark:!0,setLow:function(e){return Zn({levelLow:e})},setHigh:function(e){return Zn({levelHigh:e})},setBoth:function(e,n){return Zn({levelLow:e,levelHigh:n})},disabled:fe})})]}),le&&(0,me.jsx)(Gn,{mainStatAssumptionLevel:nn,mainStatKeys:Xe,onChangeMainStatKey:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;Zn(void 0===n?{type:"mainStatKeyReset",slotKey:e}:{type:"mainStatKey",slotKey:e,mainStatKey:n})},onChangeAssLevel:function(e){return Zn({mainStatAssumptionLevel:e})},disabled:fe})]})]}),(0,me.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,me.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,me.jsxs)(y.Z,{children:[(0,me.jsx)(b.Z,{disabled:!le||fe||!en||!Sn||!(0,$.Hm)(null===xn||void 0===xn?void 0:xn.getDisplay(),en),color:le&&Sn<=On?"success":"warning",onClick:Dn,startIcon:(0,me.jsx)(u.G,{icon:o.lTt}),children:"Generate"}),(0,me.jsxs)(B.Z,{disabled:fe||!le,title:(0,me.jsxs)("span",{children:[(0,me.jsx)("b",{children:ln})," ",1===ln?"Build":"Builds"]}),children:[(0,me.jsx)(k.Z,{children:(0,me.jsx)(Z.Z,{variant:"caption",color:"info.main",children:"Decreasing the number of generated build will decrease build calculation time for large number of builds."})}),(0,me.jsx)(j.Z,{}),Q.sY.map((function(e){return(0,me.jsxs)(k.Z,{onClick:function(){return Zn({maxBuildsToShow:e})},children:[e," ",1===e?"Build":"Builds"]},e)}))]}),(0,me.jsx)(B.Z,{disabled:fe||!le,color:"info",title:(0,me.jsxs)("span",{children:[(0,me.jsx)("b",{children:Ve})," ",1===ln?"Thread":"Threads"]}),children:(0,$.w6)(1,navigator.hardwareConcurrency||4).reverse().map((function(e){return(0,me.jsxs)(k.Z,{onClick:function(){return qe(e)},children:[e," ",1===e?"Thread":"Threads"]},e)}))}),(0,me.jsx)(b.Z,{disabled:!fe,color:"error",onClick:function(){return Pn.current()},startIcon:(0,me.jsx)(h.Z,{}),children:"Cancel"})]})}),(0,me.jsxs)(g.ZP,{item:!0,children:[(0,me.jsx)("span",{children:"Optimization Target: "}),(0,me.jsx)(Hn,{optimizationTarget:en,setTarget:function(e){return Zn({optimizationTarget:e})},disabled:!!fe})]})]}),!!le&&(0,me.jsx)(x.Z,{children:(0,me.jsx)(En,{totBuildNumber:Sn,generatingBuilds:fe,generationSkipped:Pe,generationProgress:Ze,generationDuration:ye,characterName:An,maxBuildsToShow:ln})}),re&&(0,me.jsx)(x.Z,{children:(0,me.jsx)(ve,{disabled:fe,chartData:Ee,plotBase:Je,setPlotBase:Kn})})]})]}),(0,me.jsx)(E.Z,{children:(0,me.jsx)(p.Z,{children:(0,me.jsxs)(x.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,me.jsx)(Z.Z,{sx:{flexGrow:1},children:an?(0,me.jsxs)("span",{children:["Showing ",(0,me.jsx)("strong",{children:an.length})," Builds generated for ",An,". ",!!sn&&(0,me.jsxs)("span",{children:["Build generated on: ",(0,me.jsx)("strong",{children:new Date(sn).toLocaleString()})]})]}):(0,me.jsx)("span",{children:"Select a character to generate builds."})}),(0,me.jsx)(b.Z,{disabled:!an.length,color:"error",onClick:function(){return Zn({builds:[],buildDate:0})},children:"Clear Builds"}),(0,me.jsxs)(R.Z,{exclusive:!0,value:mn,onChange:function(e,n){return He({compareData:n})},size:"small",children:[(0,me.jsx)(w.Z,{value:!1,disabled:!mn,children:(0,me.jsx)("small",{children:"Show New artifact Stats"})}),(0,me.jsx)(w.Z,{value:!0,disabled:mn,children:(0,me.jsx)("small",{children:"Compare against equipped artifacts"})})]})]})})}),(0,me.jsx)(xt,{buildsArts:un,character:Ue,characterKey:le,characterSheet:hn,data:xn,compareData:mn,mainStatAssumptionLevel:nn,characterDispatch:He,disabled:!!Dn})]})]})}function xt(e){var n=e.buildsArts,t=e.character,r=e.characterKey,i=e.characterSheet,a=e.data,s=e.compareData,l=e.mainStatAssumptionLevel,c=e.characterDispatch,o=e.disabled;return(0,S.useMemo)((function(){return(0,me.jsx)(S.Suspense,{fallback:(0,me.jsx)(C.Z,{variant:"rectangular",width:"100%",height:600}),children:null===n||void 0===n?void 0:n.map((function(e,n){return t&&r&&i&&a&&(0,me.jsx)(mt,{characterKey:r,character:t,build:e,characterSheet:i,oldData:a,mainStatAssumptionLevel:l,characterDispatch:c,children:(0,me.jsx)(xn,{index:n,compareBuild:s,disabled:o})},n+e.join())}))})}),[n,t,r,i,a,s,l,c,o])}function mt(e){var n=e.children,t=e.characterKey,r=e.character,i=e.build,a=e.characterDispatch,s=e.mainStatAssumptionLevel,l=void 0===s?0:s,c=e.characterSheet,o=e.oldData,u=(0,J.Z)(t,l,i);return u?(0,me.jsx)(z.R.Provider,{value:{characterSheet:c,character:r,characterDispatch:a,mainStatAssumptionLevel:l,data:u[t].target,teamData:u,oldData:o},children:n}):null}},17278:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(29439),i=t(72791),a=t(3997);function s(e,n){var t=(0,i.useContext)(a.t).database,s=(0,i.useState)(t._getState(e,n)),l=(0,r.Z)(s,2),c=l[0],o=l[1];return(0,i.useEffect)((function(){return o(t._getState(e,n))}),[t,e,n]),(0,i.useEffect)((function(){return e?t.followState(e,o):void 0}),[e,o,t]),[c,(0,i.useCallback)((function(n){return t.updateState(e,n)}),[t,e])]}},52771:function(e,n,t){t.d(n,{vL:function(){return i},g4:function(){return a},yJ:function(){return s},mf:function(){return l},JR:function(){return o},e6:function(){return u}});var r=t(60393),i=1e3,a=60*i,s=60*a,l=24*s;function c(e){var n=e%1e3,t=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:r,seconds:t,milliseconds:n}}function o(e){var n=c(e),t=n.hours,i=n.minutes,a=n.seconds,s="Minutes";return t&&(s="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2)," ").concat(s)}function u(e){var n=c(e),t=n.hours,i=n.minutes,a=n.seconds,s=n.milliseconds,l="Minutes";return t&&(l="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2),".").concat((0,r.H_)(s,"0",3)," ").concat(l)}}}]);
//# sourceMappingURL=418.46474e1d.chunk.js.map