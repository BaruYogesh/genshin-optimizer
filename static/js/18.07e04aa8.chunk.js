(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[18],{196:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var c=a(16),n=a(89),r=a(51),s=a(0),i=a(314),l=a(19),j=a(45),o=a(21),b=a(44),d=a(159),u=a(9),h=a(1);function O(e){var t,a,O=e.pageKey,x=void 0===O?"":O,m=e.text,v=void 0===m?"":m,f=e.modalTitle,p=void 0===f?"":f,g=e.children,y=Object(s.useState)(null===(t=null===(a=Object(u.n)("infoShown"))||void 0===a?void 0:a[x])||void 0===t||t),N=Object(c.a)(y,2),C=N[0],w=N[1],k=Object(s.useState)(Array.isArray(v)?Object(u.j)(v):v),S=Object(c.a)(k,1)[0],K=function(){var e,t=null!==(e=Object(u.n)("infoShown"))&&void 0!==e?e:{};t[x]=!1,Object(u.r)("infoShown",t),w(!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(i.a,{show:C,onHide:function(){return K()},size:"xl",variant:"success",contentClassName:"bg-transparent",children:Object(h.jsxs)(l.a,{bg:"darkcontent",text:"lightfont",children:[Object(h.jsx)(l.a.Header,{children:Object(h.jsxs)(j.a,{children:[Object(h.jsx)(o.a,{children:Object(h.jsx)(l.a.Title,{children:p})}),Object(h.jsx)(o.a,{xs:"auto",children:Object(h.jsx)(b.a,{variant:"danger",onClick:function(){return K()},children:Object(h.jsx)(r.a,{icon:n.B})})})]})}),Object(h.jsx)(l.a.Body,{children:Object(h.jsx)(s.Suspense,{fallback:Object(h.jsxs)("h3",{className:"text-center",children:["Loading... ",Object(h.jsx)(d.a,{animation:"border",variant:"primary"})]}),children:g})}),Object(h.jsx)(l.a.Footer,{children:Object(h.jsx)(b.a,{variant:"danger",onClick:function(){return K()},children:Object(h.jsx)("span",{children:"Close"})})})]})}),Object(h.jsx)(l.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:Object(h.jsx)(l.a.Body,{className:"pl-2 py-0 pr-0",children:Object(h.jsxs)(j.a,{children:[Object(h.jsx)(o.a,{children:Object(h.jsx)("small",{children:S})}),Object(h.jsx)(o.a,{xs:"auto",children:Object(h.jsx)(b.a,{size:"sm",variant:"info",className:"m-0 py-1",onClick:function(){return w(!0)},children:Object(h.jsx)(r.a,{icon:n.s})})})]})})})]})}},215:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var c=a(76),n=a(16),r=a(89),s=a(51),i=a(0),l=a(189),j=a(127),o=a(44),b=a(19),d=a(21),u=a(45),h=a(36),O=a(166),x=a(177),m=a(175),v=a(198),f=a(26),p=a(161),g=a(91),y=a(187),N=a(192),C=a(169),w=a(171),k=a(1);function S(e){var t,a=e.characterKey,S=e.onEdit,K=e.onDelete,T=e.cardClassName,B=void 0===T?"":T,E=e.bg,L=void 0===E?"":E,F=e.header,z=e.footer,A=void 0!==z&&z,M=Object(g.a)(),W=Object(n.a)(M,2)[1];Object(i.useEffect)((function(){return a&&f.a.registerCharListener(a,W),function(){a&&f.a.unregisterCharListener(a,W)}}),[a,W]);var D=Object(g.b)(O.a.getAll()),R=f.a.get(a),H=Object(g.b)(w.b.get(a)),I=Object(g.b)(R&&N.a.get(R.weapon.key)),_=Object(i.useMemo)((function(){return R&&H&&I&&D&&C.a.calculateBuild(R,H,I,D)}),[R,H,I,D]);if(!R||!H||!I||!_)return null;var P=R.weapon,G=R.constellation,U=H.name,V=_.characterEle,Y=H.weaponTypeKey,J=null===I||void 0===I?void 0:I.name,q=y.a.getWeaponMainStatValWithOverride(P,I),Q=y.a.getWeaponSubstatKey(I),X=y.a.getWeaponSubstatValWithOverride(P,I),Z=y.a.getLevelName(P.levelKey),$=null===I||void 0===I?void 0:I.passiveName;return Object(k.jsxs)(b.a,{className:B,bg:L||"darkcontent",text:"lightfont",children:[Object(k.jsx)(b.a.Header,{className:"pr-2",children:Object(k.jsxs)(u.a,{className:"no-gutters",children:[Object(k.jsx)(d.a,{children:F||Object(k.jsx)("h5",{children:Object(k.jsx)("b",{children:U})})}),Object(k.jsx)(d.a,{xs:"auto",children:Object(k.jsxs)("span",{className:"float-right align-top ml-1",children:[S&&Object(k.jsx)(o.a,{variant:"primary",size:"sm",className:"mr-1",onClick:function(){return S(a)},children:Object(k.jsx)(s.a,{icon:r.h})}),K&&Object(k.jsx)(o.a,{variant:"danger",size:"sm",onClick:function(){return K(a)},children:Object(k.jsx)(s.a,{icon:r.E})})]})})]})}),Object(k.jsxs)(b.a.Body,{onClick:function(){return null===S||void 0===S?void 0:S(a)},className:S?"cursor-pointer":"",children:[Object(k.jsxs)(u.a,{children:[Object(k.jsx)(d.a,{xs:"auto",className:"pr-0",children:Object(k.jsx)(l.a,{src:H.thumbImg,className:"thumb-big grad-".concat(H.star,"star p-0"),thumbnail:!0})}),Object(k.jsxs)(d.a,{children:[Object(k.jsxs)("h3",{className:"mb-0",children:[C.a.getLevelString(R,H,I)," ","C".concat(G)]}),Object(k.jsx)("h5",{className:"mb-0",children:Object(k.jsx)(m.a,{stars:H.star,colored:!0})}),Object(k.jsxs)("h2",{className:"mb-0",children:[Object(k.jsx)(l.a,{src:x.a.elements[V],className:"inline-icon"})," ",Object(k.jsx)(l.a,{src:null===(t=x.a.weaponTypes)||void 0===t?void 0:t[Y],className:"inline-icon"})]})]})]}),Object(k.jsx)(u.a,{className:"mb-2",children:Object(k.jsxs)(d.a,{children:[Object(k.jsxs)("h6",{className:"mb-0",children:[J,$&&"(".concat(P.refineIndex+1,")")," ",Z]}),Object(k.jsxs)("span",{children:["ATK: ",q,"  ",$&&Object(k.jsxs)("span",{children:[p.a.getStatName(Q),": ",X,p.a.getStatUnit(Q)]})]})]})}),Object(k.jsx)(u.a,{children:Object(k.jsx)(d.a,{children:D&&Object.entries(O.a.setEffects(D,_.setToSlots)).map((function(e){var t,a=Object(n.a)(e,2),r=a[0],s=a[1],i=null!==(t=null===D||void 0===D?void 0:D[r].name)&&void 0!==t?t:"",l=Math.max.apply(Math,Object(c.a)(s));return Object(k.jsx)("h5",{children:Object(k.jsxs)(j.a,{variant:"secondary",children:[i," ",Object(k.jsx)(j.a,{variant:"success",children:l})]})},r)}))})}),Object(k.jsx)(u.a,{children:["finalHP","finalATK","finalDEF","eleMas","critRate_","critDMG_","enerRech_"].map((function(e){var t=p.a.getStatUnit(e),a=_[e];return Object(k.jsxs)(d.a,{xs:12,children:[Object(k.jsxs)("h6",{className:"d-inline",children:[Object(v.a)(e)," ",p.a.getStatName(e)]}),Object(k.jsx)("span",{className:"float-right",children:(null===a||void 0===a?void 0:a.toFixed(p.a.fixedUnit(e)))+t})]},e)}))})]}),A&&Object(k.jsx)(b.a.Footer,{children:Object(k.jsx)(o.a,{as:h.b,to:{pathname:"/build",characterKey:a},children:"Generate Builds"})})]})}},311:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return R}));var c=a(78),n=a.n(c),r=a(101),s=a(16),i=a(89),l=a(51),j=a(0),o=a.n(j),b=a(147),d=a(45),u=a(21),h=a(19),O=a(159),x=a(182),m=a(44),v=a(189),f=a(231),p=a(202),g=a(35),y=a(36),N=a(177),C=a(26),w=a(196),k=a(90),S=a(91),K=a(9),T=a(187),B=a(169),E=a(215),L=a(171),F=a(83),z=a(1),A=o.a.lazy((function(){return a.e(23).then(a.bind(null,309))})),M=Object(j.lazy)((function(){return Promise.all([a.e(2),a.e(1)]).then(a.bind(null,210))})),W={level:"Level",rarity:"Rarity",name:"Name"};function D(e,t){return t===e?"":t}function R(e){var t,a=Object(j.useState)(""),c=Object(s.a)(a,2),y=c[0],R=c[1],I=Object(j.useState)((function(){return Object.keys(W)[0]})),_=Object(s.a)(I,2),P=_[0],G=_[1],U=Object(j.useReducer)(D,""),V=Object(s.a)(U,2),Y=V[0],J=V[1],q=Object(j.useReducer)(D,""),Q=Object(s.a)(q,2),X=Q[0],Z=Q[1],$=Object(j.useState)(!1),ee=Object(s.a)($,2),te=ee[0],ae=ee[1],ce=Object(S.a)(),ne=Object(s.a)(ce,2)[1],re=Object(j.useRef)(null);Object(j.useEffect)((function(){g.a.pageview("/character");var e=Object(K.n)("CharacterDisplay.state");if(e){var t=e.charIdToEdit,a=e.sortBy,c=e.elementalFilter,n=e.weaponFilter;R(t),G(a),k.d.includes(c)&&J(c),T.a.getWeaponTypeKeys().includes(n)&&Z(n)}return C.a.registerListener(ne),function(){return C.a.unregisterListener(ne)}}),[ne]);var se=null!==(t=Object(S.b)(L.b.getAll()))&&void 0!==t?t:{},ie=function(e){var t;return B.a.getLevel(null===(t=C.a.get(e))||void 0===t?void 0:t.levelKey)},le=function(e){var t;return null===(t=se[e])||void 0===t?void 0:t.star};Object(j.useEffect)((function(){var e={charIdToEdit:y,sortBy:P,elementalFilter:Y,weaponFilter:X};Object(K.r)("CharacterDisplay.state",e)}),[y,P,Y,X]);var je=Object(j.useCallback)(function(){var e=Object(r.a)(n.a.mark((function e(t){var a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.b.get(t);case 2:if(a=e.sent,"object"===typeof(c=null===a||void 0===a?void 0:a.name)&&(c=F.a.t("char_".concat(t,"_gen:name"))),window.confirm("Are you sure you want to remove ".concat(c,"?"))){e.next=7;break}return e.abrupt("return");case 7:B.a.remove(t),y===t&&R("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,R]),oe=Object(j.useCallback)((function(e){R(e),setTimeout((function(){var e;null===(e=re.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)}),[R,re]),be=Object(j.useCallback)((function(){R(""),ae(!1)}),[R]),de=C.a.getCharacterKeyList().filter((function(e){var t,a;return(!Y||Y===(null===(t=se[e])||void 0===t?void 0:t.elementKey))&&(!X||X===(null===(a=se[e])||void 0===a?void 0:a.weaponTypeKey))})).sort((function(e,t){if("name"===P)return e<t?-1:e>t?1:0;if("level"===P){var a=ie(t)-ie(e);return a||le(t)-le(e)}var c=le(t)-le(e);return c||ie(t)-ie(e)})),ue=Boolean(y||te);return Object(z.jsxs)(b.a,{ref:re,className:"mt-2",children:[Object(z.jsx)(w.a,{pageKey:"characterPage",modalTitle:"Character Management Page Guide",text:["Every character will be tested with in-game numbers for maximum accuracy.","You can see the details of the calculations of every number.","You need to manually enable auto infusion for characters like Choungyun or Noelle.",'You can change character constellations in both "Character" tab and in "Talents" tab.',"Modified character Stats show up in yellow."],children:Object(z.jsx)(A,{})}),ue?Object(z.jsx)(d.a,{className:"mt-2",children:Object(z.jsx)(u.a,{children:Object(z.jsx)(o.a.Suspense,{fallback:Object(z.jsx)(h.a,{bg:"darkcontent",text:"lightfont",children:Object(z.jsx)(h.a.Body,{children:Object(z.jsxs)("h3",{className:"text-center",children:["Loading... ",Object(z.jsx)(O.a,{animation:"border",variant:"primary"})]})})}),children:Object(z.jsx)(M,{character:void 0,newBuild:void 0,tabName:void 0,editable:!0,setCharacterKey:oe,characterKey:y,onClose:be,footer:Object(z.jsx)(H,{onClose:be,characterKey:y})})})})}):null,Object(z.jsx)(h.a,{bg:"darkcontent",text:"lightfont",className:"mt-2",children:Object(z.jsx)(h.a.Body,{className:"p-2",children:Object(z.jsxs)(d.a,{children:[Object(z.jsx)(u.a,{xs:"auto",children:Object(z.jsx)(x.a,{children:k.d.map((function(e){var t;return Object(z.jsx)(m.a,{variant:Y&&Y!==e?"primary":"success",className:"py-1 px-2",onClick:function(){return J(e)},children:Object(z.jsx)("h4",{className:"mb-0",children:Object(z.jsx)(v.a,{src:null===(t=N.a.elements)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(z.jsx)(u.a,{children:Object(z.jsx)(x.a,{children:T.a.getWeaponTypeKeys().map((function(e){var t;return Object(z.jsx)(m.a,{variant:X&&X!==e?"primary":"success",className:"py-1 px-2",onClick:function(){return Z(e)},children:Object(z.jsx)("h4",{className:"mb-0",children:Object(z.jsx)(v.a,{src:null===(t=N.a.weaponTypes)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(z.jsxs)(u.a,{xs:"auto",children:[Object(z.jsx)("span",{children:"Sort by: "}),Object(z.jsx)(f.a,{type:"radio",name:"level",value:P,onChange:G,children:Object.entries(W).map((function(e){var t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(z.jsx)(p.a,{value:a,variant:P===a?"success":"primary",children:c},a)}))})]})]})})}),Object(z.jsxs)(d.a,{className:"mt-2",children:[!ue&&Object(z.jsx)(u.a,{lg:4,md:6,className:"mb-2",children:Object(z.jsxs)(h.a,{className:"h-100",bg:"darkcontent",text:"lightfont",children:[Object(z.jsx)(h.a.Header,{className:"pr-2",children:Object(z.jsx)("span",{children:"Add New Character"})}),Object(z.jsx)(h.a.Body,{className:"d-flex flex-column justify-content-center",children:Object(z.jsx)(d.a,{className:"d-flex flex-row justify-content-center",children:Object(z.jsx)(u.a,{xs:"auto",children:Object(z.jsx)(m.a,{onClick:function(){return ae(!0)},children:Object(z.jsx)("h1",{children:Object(z.jsx)(l.a,{icon:i.r,className:"fa-fw"})})})})})})]})}),de.map((function(e){return Object(z.jsx)(u.a,{lg:4,md:6,className:"mb-2",children:Object(z.jsx)(E.a,{header:void 0,cardClassName:"h-100",characterKey:e,onDelete:je,onEdit:oe,footer:!0})},e)}))]})]})}function H(e){var t=e.onClose,a=e.characterKey;return Object(z.jsxs)(d.a,{children:[Object(z.jsx)(u.a,{children:Object(z.jsxs)(m.a,{variant:"info",as:y.b,to:{pathname:"/flex",characterKey:a},children:[Object(z.jsx)(l.a,{icon:i.n})," Share Character"]})}),Object(z.jsx)(u.a,{xs:"auto",children:Object(z.jsx)(m.a,{variant:"danger",onClick:t,children:"Close"})})]})}}}]);
//# sourceMappingURL=18.07e04aa8.chunk.js.map