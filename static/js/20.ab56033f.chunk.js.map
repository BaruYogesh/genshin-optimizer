{"version":3,"sources":["Character/CharacterUtil.tsx","../node_modules/react-bootstrap/esm/ToastContext.js","../node_modules/react-bootstrap/esm/ToastHeader.js","../node_modules/react-bootstrap/esm/ToastBody.js","../node_modules/react-bootstrap/esm/Toast.js","FlexPage/CodingUtil.ts","FlexPage/Schemas.ts","FlexPage/FlexUtil.ts","FlexPage/FlexDisplay.tsx"],"names":["getFormulaTargetsDisplayHeading","key","characterSheet","weaponSheet","artifactSheets","eleKey","startsWith","subkey","split","getTalentOfKey","name","setKey","num","variant","initialCharacter","level","ascension","hitMode","reactionMode","equippedArtifacts","Object","fromEntries","allSlotKeys","map","sKey","equippedWeapon","conditionalValues","baseStatOverrides","buildSettings","initialBuildSettings","talent","auto","skill","burst","infusionAura","constellation","ToastContext","React","createContext","onClose","_excluded","ToastHeader","forwardRef","_ref","ref","bsPrefix","closeLabel","closeButton","className","children","props","_objectWithoutPropertiesLoose","useBootstrapPrefix","context","useContext","handleClick","useEventCallback","e","createElement","_extends","classNames","CloseButton","label","onClick","displayName","defaultProps","createWithBsPrefix","Toast","_ref$transition","transition","Transition","Fade","_ref$show","show","_ref$animation","animation","_ref$delay","delay","_ref$autohide","autohide","delayRef","useRef","onCloseRef","useEffect","current","autohideTimeout","useTimeout","autohideToast","autohideFunc","useCallback","set","toastContext","useMemo","hasAnimation","toast","role","Provider","value","in","unmountOnExit","assign","Body","ToastBody","Header","decode","string","schema","stream","BlockStream","result","decodeItem","end","encodeItem","data","pathItem","encode","type","uint","uintToString","length","encodeLength","encodeUInt","match","Error","encodeString","schemas","defaultSchema","item","i","join","encodeArray","entries","default","encodeObject","keySchema","keys","valueSchema","items","filter","includes","encodeSparse","error","path","push","decodeLength","stringToUInt","take","decodeUInt","decodeString","Array","unused","decodeArray","decodeObject","decodeSparse","number","remainder","Math","floor","String","fromCharCode","padEnd","multiplier","code","charCodeAt","offset","this","count","slice","stats","float","toString","replace","parseFloat","array","other","object","sparse","optional","list","defaultValue","undefined","indexOf","index","fixed","stat","artifactSet","allArtifactSets","slot","characterKey","allCharacterKeys","allHitModes","allReactionModes","element","allElements","substat","factor","endsWith","crawlObject","c","isArray","pathvalues","weapon","artifact","character","last","pop","next","artifactV2","numStars","mainStatKey","slotKey","substats","art","id","lock","weaponV2","levelKey","refineIndex","overrideMainVal","overrideSubVal","lvla","parseInt","ascensionMaxLevel","findIndex","maxLevel","addAsc","characterV2","overrideLevel","talentLevelKeys","reserved","isAscended","levelString","characterLevel","weaponLevel","elementKey","flexV2","artifacts","artifactV3","location","raritySlotKey","rarity","weaponV3","ascensionRefine","levelDiff","refine","characterV3","ascensionConstellation","flexV3","characters","weapons","createFlexObj","database","_getChar","_getWeapon","values","_getArt","parseFlexObj","parameters","s","v","decoded","newCharacterKey","toLowerCase","storage","SandboxStorage","setString","forEach","ArtCharDatabase","parseFlexObjV2","d","charKey","parseFlexObjV3","FlexDisplay","useLocation","DatabaseContext","searchStr","search","flexResult","substring","to","Database","Display","flexObj","window","scrollTo","useState","settoast","url","href","Container","style","position","top","right","Card","bg","text","InputGroup","Prepend","Button","navigator","clipboard","writeText","then","catch","console","icon","faLink","Form","Control","readOnly","target","select","CharacterDisplayCard"],"mappings":"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","file":"static/js/20.ab56033f.chunk.js","sourcesContent":["import { Badge } from \"react-bootstrap\"\r\nimport { ArtifactSheet } from \"../Artifact/ArtifactSheet\"\r\nimport { initialBuildSettings } from \"../Build/BuildSetting\"\r\nimport { ICachedCharacter } from \"../Types/character\"\r\nimport { allSlotKeys, ArtifactSetKey, CharacterKey, ElementKey } from \"../Types/consts\"\r\nimport WeaponSheet from \"../Weapon/WeaponSheet\"\r\nimport CharacterSheet from \"./CharacterSheet\"\r\n\r\nexport function getFormulaTargetsDisplayHeading(key: string, { characterSheet, weaponSheet, artifactSheets }: { characterSheet: CharacterSheet, weaponSheet: WeaponSheet, artifactSheets: StrictDict<ArtifactSetKey, ArtifactSheet> }, eleKey: ElementKey = \"anemo\") {\r\n  if (key === \"basicKeys\") return \"Basic Stats\"\r\n  else if (key === \"genericAvgHit\") return \"Generic Optimization Values\"\r\n  else if (key === \"transReactions\") return \"Transformation Reaction\"\r\n  else if (key.startsWith(\"talentKey_\")) {\r\n    const subkey = key.split(\"talentKey_\")[1]\r\n    return (characterSheet?.getTalentOfKey(subkey, eleKey)?.name ?? subkey)\r\n  } else if (key.startsWith(\"weapon_\")) {\r\n    const subkey = key.split(\"weapon_\")[1]\r\n    return (weaponSheet?.name ?? subkey)\r\n  } else if (key.startsWith(\"artifact_\")) {\r\n    const [, setKey, num] = key.split('_')\r\n    return <span>{artifactSheets[setKey]?.name} <Badge variant=\"success\">{num}-Set</Badge></span>\r\n  }\r\n  return \"\"\r\n}\r\n\r\nexport function initialCharacter(key: CharacterKey): ICachedCharacter {\r\n  return {\r\n    key, // the game character this is based off\r\n    level: 1,\r\n    ascension: 0,\r\n    hitMode: \"avgHit\",\r\n    reactionMode: null,\r\n    equippedArtifacts: Object.fromEntries(allSlotKeys.map(sKey => [sKey, \"\"])) as any,\r\n    equippedWeapon: \"\",\r\n    conditionalValues: {},\r\n    baseStatOverrides: {}, // overriding the baseStat\r\n    buildSettings: initialBuildSettings(),\r\n    talent: {\r\n      auto: 1,\r\n      skill: 1,\r\n      burst: 1,\r\n    },\r\n    infusionAura: \"\",\r\n    constellation: 0,\r\n  }\r\n}","import React from 'react'; // TODO: check\n\nvar ToastContext = /*#__PURE__*/React.createContext({\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onClose: function onClose() {}\n});\nexport default ToastContext;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"closeLabel\", \"closeButton\", \"className\", \"children\"];\nimport classNames from 'classnames';\nimport React, { useContext } from 'react';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport CloseButton from './CloseButton';\nimport ToastContext from './ToastContext';\nvar defaultProps = {\n  closeLabel: 'Close',\n  closeButton: true\n};\nvar ToastHeader = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      closeLabel = _ref.closeLabel,\n      closeButton = _ref.closeButton,\n      className = _ref.className,\n      children = _ref.children,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'toast-header');\n  var context = useContext(ToastContext);\n  var handleClick = useEventCallback(function (e) {\n    if (context && context.onClose) {\n      context.onClose(e);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref\n  }, props, {\n    className: classNames(bsPrefix, className)\n  }), children, closeButton && /*#__PURE__*/React.createElement(CloseButton, {\n    label: closeLabel,\n    onClick: handleClick,\n    className: \"ml-2 mb-1\",\n    \"data-dismiss\": \"toast\"\n  }));\n});\nToastHeader.displayName = 'ToastHeader';\nToastHeader.defaultProps = defaultProps;\nexport default ToastHeader;","import createWithBsPrefix from './createWithBsPrefix';\nexport default createWithBsPrefix('toast-body');","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"className\", \"children\", \"transition\", \"show\", \"animation\", \"delay\", \"autohide\", \"onClose\"];\nimport React, { useEffect, useMemo, useRef, useCallback } from 'react';\nimport classNames from 'classnames';\nimport useTimeout from '@restart/hooks/useTimeout';\nimport Fade from './Fade';\nimport ToastHeader from './ToastHeader';\nimport ToastBody from './ToastBody';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport ToastContext from './ToastContext';\nvar Toast = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      children = _ref.children,\n      _ref$transition = _ref.transition,\n      Transition = _ref$transition === void 0 ? Fade : _ref$transition,\n      _ref$show = _ref.show,\n      show = _ref$show === void 0 ? true : _ref$show,\n      _ref$animation = _ref.animation,\n      animation = _ref$animation === void 0 ? true : _ref$animation,\n      _ref$delay = _ref.delay,\n      delay = _ref$delay === void 0 ? 3000 : _ref$delay,\n      _ref$autohide = _ref.autohide,\n      autohide = _ref$autohide === void 0 ? false : _ref$autohide,\n      onClose = _ref.onClose,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'toast'); // We use refs for these, because we don't want to restart the autohide\n  // timer in case these values change.\n\n  var delayRef = useRef(delay);\n  var onCloseRef = useRef(onClose);\n  useEffect(function () {\n    delayRef.current = delay;\n    onCloseRef.current = onClose;\n  }, [delay, onClose]);\n  var autohideTimeout = useTimeout();\n  var autohideToast = !!(autohide && show);\n  var autohideFunc = useCallback(function () {\n    if (autohideToast) {\n      onCloseRef.current == null ? void 0 : onCloseRef.current();\n    }\n  }, [autohideToast]);\n  useEffect(function () {\n    // Only reset timer if show or autohide changes.\n    autohideTimeout.set(autohideFunc, delayRef.current);\n  }, [autohideTimeout, autohideFunc]);\n  var toastContext = useMemo(function () {\n    return {\n      onClose: onClose\n    };\n  }, [onClose]);\n  var hasAnimation = !!(Transition && animation);\n  var toast = /*#__PURE__*/React.createElement(\"div\", _extends({}, props, {\n    ref: ref,\n    className: classNames(bsPrefix, className, !hasAnimation && (show ? 'show' : 'hide')),\n    role: \"alert\",\n    \"aria-live\": \"assertive\",\n    \"aria-atomic\": \"true\"\n  }), children);\n  return /*#__PURE__*/React.createElement(ToastContext.Provider, {\n    value: toastContext\n  }, hasAnimation && Transition ? /*#__PURE__*/React.createElement(Transition, {\n    in: show,\n    unmountOnExit: true\n  }, toast) : toast);\n});\nToast.displayName = 'Toast';\nexport default Object.assign(Toast, {\n  Body: ToastBody,\n  Header: ToastHeader\n});","// @ts-nocheck\r\n// The *type* of these data are in schema and so are unknown at compile time.\r\n// Type annotation here will only amount to adding `any` everywhere\r\n\r\n/// Schema keys\r\n/// Common {\r\n///   encode?: A function that transform encoding object into the specified format\r\n///   decode?: A function that transform object in the specified format into the decoded object\r\n/// }\r\n///\r\n/// UInt: { type: \"uint\",\r\n///   length?: number of bytes, uses variable-length format if not set,\r\n/// }\r\n/// String: { type: \"string\" }\r\n/// Array: { type: \"array\",\r\n///   schemas?: Array of schemas, in the same order as the item,\r\n///   defaultSchema?: Default schema for when `schemas[i]` is `null`,\r\n/// }\r\n/// Object: { type: \"object\",\r\n///   schemas: A key-schema dictionary. All keys are encoded\r\n///   default: default value if the object[key] doesn't exist\r\n/// }\r\n/// Sparse: { type: \"sparse\",\r\n///   keys?: A list of permitted keys, `null` if all keys are permitted,\r\n///   keySchema: Common schema for keys,\r\n///   valueSchema: Common schema for values,\r\n/// }\r\n\r\nexport function encode(data, schema) {\r\n  return encodeItem(data, schema, null)\r\n}\r\nexport function decode(string, schema) {\r\n  const stream = new BlockStream(string)\r\n  const result = decodeItem(stream, schema, null)\r\n  stream.end()\r\n  return result\r\n}\r\n\r\nfunction encodeItem(data, schema, pathItem) {\r\n  try {\r\n    if (schema.encode)\r\n      data = schema.encode(data)\r\n    switch (schema.type) {\r\n      case \"uint\": return encodeUInt(data, schema)\r\n      case \"string\": return encodeString(data, schema)\r\n      case \"array\": return encodeArray(data, schema)\r\n      case \"object\": return encodeObject(data, schema)\r\n      case \"sparse\": return encodeSparse(data, schema)\r\n      default: throw new Error(`Unsupported schema type ${schema.type} on array`)\r\n    }\r\n  } catch (error) {\r\n    error.path = error.path ?? []\r\n    error.path.push(pathItem)\r\n    throw error\r\n  }\r\n}\r\nfunction decodeItem(stream, schema, pathItem) {\r\n  try {\r\n    let result\r\n    switch (schema.type) {\r\n      case \"uint\": result = decodeUInt(stream, schema); break\r\n      case \"string\": result = decodeString(stream, schema); break\r\n      case \"array\": result = decodeArray(stream, schema); break\r\n      case \"object\": result = decodeObject(stream, schema); break\r\n      case \"sparse\": result = decodeSparse(stream, schema); break\r\n      default: throw new Error(`Unsupported schema type ${schema.type} on array`)\r\n    }\r\n    if (schema.decode)\r\n      return schema.decode(result)\r\n    return result\r\n  } catch (error) {\r\n    error.path = error.path ?? []\r\n    error.path.push(pathItem)\r\n    throw error\r\n  }\r\n}\r\n\r\nfunction encodeSparse(data, schema) {\r\n  const { keySchema, keys, valueSchema } = schema\r\n  const items = Object.entries(data).filter(([key]) => keys?.includes(key) ?? true)\r\n\r\n  return encodeLength(items.length) + items.map(([key, value]) =>\r\n    encodeItem(key, keySchema, key) + encodeItem(value, valueSchema, key)\r\n  ).join('')\r\n}\r\nfunction decodeSparse(stream, schema) {\r\n  const { keys, keySchema, valueSchema } = schema\r\n  const length = decodeLength(stream)\r\n\r\n  return Object.fromEntries([...new Array(length)].map(() => {\r\n    const key = decodeItem(stream, keySchema, null)\r\n    const value = decodeItem(stream, valueSchema, key)\r\n    return [key, value]\r\n  }).filter(([key]) => keys?.includes(key) ?? true))\r\n}\r\n\r\nfunction encodeObject(data, schema: { schemas: any[], default: any }) {\r\n  const { schemas = [] } = schema\r\n  return Object.entries(schemas).map(([key, schema]) =>\r\n    encodeItem(key in data ? data[key] : schema.default, schema, key)\r\n  ).join('')\r\n}\r\nfunction decodeObject(stream, schema) {\r\n  const { schemas = [] } = schema\r\n  return Object.fromEntries(Object.entries(schemas).map(([key, schema]) =>\r\n    [key, decodeItem(stream, schema, key)]\r\n  ))\r\n}\r\n\r\nfunction encodeArray(data, schema) {\r\n  const { schemas = [], defaultSchema } = schema\r\n  return encodeLength(data.length) + data.map((item, i) =>\r\n    encodeItem(item, schemas[i] ?? defaultSchema, i)\r\n  ).join('')\r\n}\r\nfunction decodeArray(stream, schema) {\r\n  const { schemas = [], defaultSchema } = schema, length = decodeLength(stream)\r\n  return [...new Array(length)].map((unused, i) =>\r\n    decodeItem(stream, schemas[i] ?? defaultSchema, i))\r\n}\r\n\r\nfunction encodeString(string, schema) {\r\n  if (!string.match(/^[a-z0-9\\-_]*$/i))\r\n    throw new Error(`Cannot encode string ${string}: not alphanumeric or -_`)\r\n  return encodeLength(string.length) + string\r\n}\r\nfunction decodeString(stream, schema) {\r\n  const string = stream.take(decodeLength(stream))\r\n  if (!string.match(/^[a-z0-9\\-_]*$/i))\r\n    throw new Error(`Cannot decode string ${string}: not alphanumeric or -_`)\r\n  return string\r\n}\r\n\r\nfunction encodeUInt(uint, schema) {\r\n  const string = uintToString(uint, schema.length)\r\n  return schema.length ? string : (encodeLength(string.length) + string)\r\n}\r\nfunction decodeUInt(stream, schema) {\r\n  let length = schema.length || decodeLength(stream)\r\n  return stringToUInt(stream.take(length))\r\n}\r\n\r\n// Keep the length low. We might want to reserve high bits for later extension.\r\nfunction encodeLength(length) {\r\n  if (length >= 32)\r\n    throw new Error(`Length (${length}) too large`)\r\n  return uintToString(length, 1)\r\n}\r\nfunction decodeLength(stream) {\r\n  let length = stringToUInt(stream.take(1))\r\n  if (length >= 32)\r\n    throw new Error(`Length (${length}) too large`)\r\n  return length\r\n}\r\n\r\nexport function uintToString(number, length = 0) {\r\n  if (number < 0) throw new Error(`Cannot encode negative number ${number}`)\r\n\r\n  var string = \"\"\r\n  while (number > 0) {\r\n    const remainder = number % 64\r\n    number = Math.floor(number / 64)\r\n    if (remainder < 10) // 0-9\r\n      string += String.fromCharCode(remainder + 48 - 0)\r\n    else if (remainder < 36) // a-z\r\n      string += String.fromCharCode(remainder + 97 - 10)\r\n    else if (remainder < 62) // A-Z\r\n      string += String.fromCharCode(remainder + 65 - 36)\r\n    else if (remainder === 62) // -\r\n      string += \"-\"\r\n    else if (remainder === 63) // _\r\n      string += \"_\"\r\n  }\r\n\r\n  if (!length)\r\n    return string\r\n\r\n  if (string.length > length)\r\n    throw new Error(`Cannot encode uint ${number}: value too large`)\r\n  return string.padEnd(length, \"0\")\r\n}\r\nexport function stringToUInt(string) {\r\n  let result = 0, multiplier = 1\r\n\r\n  for (let i = 0; i < string.length; i++) {\r\n    let code = string.charCodeAt(i)\r\n\r\n    if (48 <= code && code < 58) // 0-9\r\n      result += multiplier * (code - 48 + 0)\r\n    else if (97 <= code && code < 123) // a-z\r\n      result += multiplier * (code - 97 + 10)\r\n    else if (65 <= code && code < 91) // A-Z\r\n      result += multiplier * (code - 65 + 36)\r\n    else if (string[i] === '-')\r\n      result += multiplier * 62\r\n    else if (string[i] === '_')\r\n      result += multiplier * 63\r\n    else throw new Error(`Cannot parse UInt from \"${string}\", which contains \"${String.fromCharCode(code)}\"`)\r\n\r\n    multiplier *= 64\r\n  }\r\n\r\n  return result\r\n}\r\n\r\nclass BlockStream {\r\n  string: string\r\n  offset: number\r\n  constructor(string) {\r\n    this.string = string\r\n    this.offset = 0\r\n  }\r\n  take(count) {\r\n    if (this.offset + count > this.string.length)\r\n      throw new Error(`Cannot take ${count} items from ${this.string.slice(this.offset)}`)\r\n\r\n    const result = this.string.slice(this.offset, this.offset + count)\r\n    this.offset += count\r\n    return result\r\n  }\r\n  end() {\r\n    if (this.string.length !== this.offset)\r\n      throw new Error(`Unused string ${this.string.slice(this.offset)}`)\r\n  }\r\n}\r\n","import { ascensionMaxLevel } from \"../Data/CharacterData\"\r\nimport { allSlotKeys, allElements, allArtifactSets, allHitModes, allReactionModes, allCharacterKeys, CharacterKey } from \"../Types/consts\"\r\nimport { crawlObject } from \"../Util/Util\"\r\nimport { uintToString, stringToUInt } from \"./CodingUtil\"\r\n\r\n// DO NOT REMOVE ITEMS FROM THESE LISTS\r\n//        ONLY APPEND NEW ENTRIES\r\n// The index of items in this list is used to\r\n// compress the exported data. Removing an item\r\n// from this list will shift subsequent entries.\r\nconst stats = [\r\n  \"\", \"hp\", \"hp_\", \"atk\", \"atk_\", \"def\", \"def_\", \"eleMas\", \"enerRech_\", \"critRate_\", \"critDMG_\", \"heal_\",\r\n  \"physical_dmg_\", \"anemo_dmg_\", \"cryo_dmg_\", \"dendro_dmg_\", \"electro_dmg_\", \"geo_dmg_\", \"hydro_dmg_\", \"pyro_dmg_\",\r\n] as const\r\n\r\n// Common schemas\r\n\r\nconst uint = (length) => ({ type: \"uint\", length })\r\nconst float = {\r\n  type: \"string\",\r\n  encode: (value) => value.toString().replace(/\\./g, '_'),\r\n  decode: (string) => parseFloat(string.replace(/_/g, '.')),\r\n}\r\nconst string = { type: \"string\" }\r\nconst array = (defaultSchema, other = {}) => ({ type: \"array\", defaultSchema, ...other })\r\nconst object = (schemas, other = {}) => ({ type: \"object\", schemas, ...other })\r\nconst sparse = (keySchema, valueSchema, keys = null) => ({ type: \"sparse\", keys, keySchema, valueSchema })\r\n\r\n// Util schema\r\n\r\nconst optional = (list, defaultValue: any = undefined, length = 1) => ({\r\n  type: \"uint\", length,\r\n  encode: item => list.indexOf(item) + 1,\r\n  decode: index => list[index - 1] ?? defaultValue,\r\n})\r\nconst fixed = (list, length = 1) => ({\r\n  type: \"uint\", length,\r\n  encode: (item) => list.indexOf(item),\r\n  decode: (index) => list[index],\r\n})\r\nconst stat = fixed(stats)\r\nconst artifactSet = fixed(allArtifactSets)\r\nconst slot = fixed(allSlotKeys)\r\nconst characterKey = fixed(allCharacterKeys)\r\nconst hitMode = fixed(allHitModes)\r\nconst reactionMode = fixed([null, ...allReactionModes])\r\nconst element = optional(allElements, '')\r\n\r\n// Complex schema\r\n\r\nconst substat = object({\r\n  key: stat,\r\n  value: uint(2),\r\n}, {\r\n  encode: ({ key, value }) => {\r\n    let factor = key.endsWith(\"_\") ? 10 : 1 // one decimal place for percentage\r\n    return { key, value: value * factor }\r\n  },\r\n  decode: ({ key, value }) => {\r\n    let factor = key.endsWith(\"_\") ? 10 : 1 // one decomal place for percentage\r\n    return { key, value: value / factor }\r\n  }\r\n})\r\nconst conditionalValues = array(object({\r\n  path: array(string), value: array(string)\r\n}), {\r\n  encode: (conditionalValues) => {\r\n    let result: { path, value }[] = []\r\n    crawlObject(conditionalValues, [], c => Array.isArray(c), (value, path) => {\r\n      result.push({ path, value: value.map(item => item.toString()) })\r\n    })\r\n    result.filter(({ path }) => {\r\n      switch (path[0]) {\r\n        case \"character\":\r\n          path[0] = \"c\"\r\n          path[1] = uintToString(allCharacterKeys.indexOf(path[1]))\r\n          break\r\n        case \"weapon\":\r\n          path[0] = \"w\"\r\n          break\r\n        case \"artifact\":\r\n          path[0] = \"a\"\r\n          path[1] = uintToString(allArtifactSets.indexOf(path[1]))\r\n          break\r\n        default: return false\r\n      }\r\n      return true\r\n    })\r\n    return result\r\n  },\r\n  decode: (pathvalues) => {\r\n    const conditionalValues = { weapon: {}, artifact: {}, character: {} }\r\n    for (const { path, value } of pathvalues) {\r\n      switch (path[0]) {\r\n        case \"c\":\r\n          path[0] = \"character\"\r\n          path[1] = allCharacterKeys[stringToUInt(path[1])]\r\n          break\r\n        case \"w\":\r\n          path[0] = \"weapon\"\r\n          break\r\n        case \"a\":\r\n          path[0] = \"artifact\"\r\n          path[1] = allArtifactSets[stringToUInt(path[1])]\r\n          break\r\n        default:\r\n          continue\r\n      }\r\n      const last = path.pop()\r\n      let current = conditionalValues\r\n      for (const key of path) {\r\n        const next = current[key] ?? {}\r\n        current[key] = next\r\n        current = next\r\n      }\r\n      value[0] = parseFloat(value[0])\r\n      current[last] = value\r\n    }\r\n    return conditionalValues\r\n  }\r\n})\r\n\r\n// V2\r\n\r\nconst artifactV2 = object({\r\n  setKey: artifactSet,\r\n  numStars: uint(1),\r\n  level: uint(2),\r\n  mainStatKey: stat,\r\n  slotKey: slot,\r\n  substats: array(substat)\r\n}, {\r\n  decode: art => {\r\n    art.id = \"\"\r\n    art.lock = false\r\n    return art\r\n  }\r\n})\r\nconst weaponV2 = object({\r\n  key: string,\r\n  levelKey: string,\r\n  refineIndex: uint(1),\r\n  overrideMainVal: float,\r\n  overrideSubVal: float,\r\n}, {\r\n  decode: object => {\r\n    const levelKey = object.levelKey\r\n    delete object.levelKey\r\n    delete object.overrideMainVal\r\n    delete object.overrideSubVal\r\n    const [, lvla] = levelKey.split(\"L\")\r\n    const level = parseInt(lvla)\r\n    const ascension = ascensionMaxLevel.findIndex(maxLevel => level <= maxLevel)\r\n    const addAsc = lvla.includes(\"A\")\r\n    if (level < 0 || level > 90 || ascension < 0) {\r\n      object.level = 1\r\n      object.ascension = 0\r\n    } else {\r\n      object.level = level\r\n      object.ascension = ascension + (addAsc ? 1 : 0)\r\n    }\r\n    return object\r\n  }\r\n})\r\nconst characterV2 = object({\r\n  characterKey,\r\n  hitMode,\r\n  reactionMode,\r\n  constellation: uint(1),\r\n  overrideLevel: uint(2),\r\n  levelKey: string,\r\n  infusionAura: element,\r\n  talentLevelKeys: object({ auto: uint(1), skill: uint(1), burst: uint(1) }),\r\n  baseStatOverrides: sparse(string, float),\r\n  weapon: weaponV2,\r\n  conditionalValues,\r\n  reserved: array(uint(1)),\r\n}, {\r\n  decode: (value) => {\r\n    const isAscended = value.levelKey.slice(-1) === \"A\"\r\n    const levelString = isAscended ? value.levelKey.slice(1, -1) : value.levelKey.slice(1)\r\n    value.level = parseInt(levelString)\r\n    switch (value.level) {\r\n      case 1: value.ascension = 0; break\r\n      case 20: value.ascension = 0; break\r\n      case 40: value.ascension = 1; break\r\n      case 50: value.ascension = 2; break\r\n      case 60: value.ascension = 3; break\r\n      case 70: value.ascension = 4; break\r\n      case 80: value.ascension = 5; break\r\n      case 90: value.ascension = 6; break\r\n    }\r\n    if (isAscended) {\r\n      value.ascension += 1\r\n    }\r\n    if (value.baseStatOverrides.characterLevel) {\r\n      value.level = value.baseStatOverrides.characterLevel\r\n      delete value.baseStatOverrides.characterLevel\r\n    }\r\n    if (value.baseStatOverrides.weaponLevel) {\r\n      value.weapon.level = value.baseStatOverrides.weaponLevel\r\n      delete value.baseStatOverrides.weaponLevel\r\n    }\r\n    if (value.overrideLevel) {\r\n      value.level = value.overrideLevel\r\n    }\r\n    delete value.overrideLevel\r\n    delete value.levelKey\r\n\r\n    if (value.characterKey === \"Traveler\") {\r\n      value.elementKey = allElements[value.reserved[0] - 1] ?? \"anemo\"\r\n    }\r\n    delete value.reserved\r\n    return value\r\n  },\r\n})\r\n\r\nconst flexV2 = object({\r\n  artifacts: array(artifactV2),\r\n  character: characterV2,\r\n})\r\n\r\n// V3\r\n\r\nconst artifactV3 = object({\r\n  setKey: artifactSet,\r\n  // numStars\r\n  level: uint(2),\r\n  // slotKey\r\n  mainStatKey: stat,\r\n  substats: array(substat),\r\n  location: optional(allCharacterKeys),\r\n\r\n  // Mixed\r\n  raritySlotKey: uint(1),\r\n}, {\r\n  encode: value => {\r\n    value.raritySlotKey = allSlotKeys.indexOf(value.slotKey) * 8 + value.rarity\r\n    return value\r\n  },\r\n  decode: value => {\r\n    value.rarity = value.raritySlotKey % 8\r\n    value.slotKey = allSlotKeys[(value.raritySlotKey - value.rarity) / 8]\r\n    return value\r\n  }\r\n})\r\nconst weaponV3 = object({\r\n  key: string,\r\n  // level, ascension, refine\r\n  location: optional(allCharacterKeys),\r\n\r\n  // Mixed\r\n  ascensionRefine: uint(1),\r\n  levelDiff: uint(1),\r\n}, {\r\n  encode: object => {\r\n    object.ascensionRefine = object.ascension * 8 + object.refine\r\n    object.levelDiff = ascensionMaxLevel[object.ascension] - object.level\r\n    return object\r\n  },\r\n  decode: object => {\r\n    object.refine = object.ascensionRefine % 8\r\n    object.ascension = (object.ascensionRefine - object.refine) / 8\r\n    object.level = ascensionMaxLevel[object.ascension] - object.levelDiff\r\n    return object\r\n  }\r\n})\r\nconst characterV3 = object({\r\n  key: characterKey,\r\n  // level, ascension\r\n  hitMode,\r\n  // elementKey\r\n  reactionMode,\r\n  conditionalValues,\r\n  baseStatOverrides: sparse(string, float),\r\n  talent: object({ auto: uint(1), skill: uint(1), burst: uint(1) }),\r\n  infusionAura: element,\r\n  // constellation\r\n\r\n  // Mixed\r\n  levelDiff: uint(1),\r\n  ascensionConstellation: uint(1),\r\n  reserved: array(uint(1)),\r\n}, {\r\n  encode: (value) => {\r\n    value.levelDiff = ascensionMaxLevel[value.ascension] - value.level\r\n    value.ascensionConstellation = value.ascension * 8 + value.constellation\r\n\r\n    if ((value.characterKey as CharacterKey) !== \"Traveler\") value.reserved = []\r\n    else value.reserved = [allElements.indexOf(value.elementKey)]\r\n\r\n    return value\r\n  },\r\n  decode: (value) => {\r\n    value.constellation = value.ascensionConstellation % 8\r\n    value.ascension = (value.ascensionConstellation - value.constellation) / 8\r\n    value.level = ascensionMaxLevel[value.ascension] - value.levelDiff\r\n\r\n    if ((value.characterKey as CharacterKey) === \"Traveler\")\r\n      value.elementKey = allElements[value.reserved[0]] ?? \"anemo\"\r\n    return value\r\n  },\r\n})\r\n\r\nconst flexV3 = object({\r\n  characters: array(characterV3),\r\n  artifacts: array(artifactV3),\r\n  weapons: array(weaponV3),\r\n})\r\n\r\nexport const schemas = {\r\n  flexV2, flexV3\r\n}\r\n// For testing purpose only, no need to maintain strict ordering\r\nexport const constants = {\r\n  reactionModes: [null, ...allReactionModes], stats\r\n}\r\n","import { ArtCharDatabase } from \"../Database/Database\";\r\nimport { SandboxStorage } from \"../Database/DBStorage\";\r\nimport { IArtifact } from \"../Types/artifact\";\r\nimport { CharacterKey } from \"../Types/consts\";\r\nimport { decode, encode } from \"./CodingUtil\";\r\nimport { schemas } from \"./Schemas\";\r\n\r\nexport function createFlexObj(characterKey: CharacterKey, database: ArtCharDatabase): string | null {\r\n  const character = database._getChar(characterKey)\r\n  if (!character) return null;\r\n\r\n  const weapon = database._getWeapon(character.equippedWeapon)!\r\n  const artifacts = Object.values(character.equippedArtifacts)\r\n    .filter(art => art)\r\n    .map(id => database._getArt(id)!)\r\n\r\n  try {\r\n    return \"v=3&d=\" + encode({ characters: [character], weapons: [weapon], artifacts }, schemas.flexV3)\r\n  } catch (error) {\r\n    if (process.env.NODE_ENV === \"development\")\r\n      console.error(`Fail to encode data on path ${(error as any).path?.reverse() ?? []}: ${error}`)\r\n    return null\r\n  }\r\n}\r\n\r\nexport function parseFlexObj(string: string): [ArtCharDatabase, CharacterKey, number] | undefined {\r\n  const parameters = Object.fromEntries(string.split('&').map(s => s.split('=')))\r\n\r\n  try {\r\n    switch (parseInt(parameters.v)) {\r\n      case 2: return [...parseFlexObjV2(parameters.d), 2]\r\n      case 3: return [...parseFlexObjV3(parameters.d), 3]\r\n      default: return\r\n    }\r\n  } catch (error) {\r\n    if (process.env.NODE_ENV === \"development\")\r\n      console.error(`Fail to encode data on path ${(error as any).path?.reverse() ?? []}: ${error}`)\r\n    return\r\n  }\r\n}\r\n\r\nfunction parseFlexObjV2(string: string): [ArtCharDatabase, CharacterKey] {\r\n  const schema = schemas.flexV2\r\n  const decoded = decode(string, schema) as { character: any, artifacts: IArtifact[] }\r\n  const { character, artifacts } = decoded, newCharacterKey = character.characterKey, characterKey = newCharacterKey.toLowerCase() as CharacterKey\r\n  character.characterKey = characterKey\r\n\r\n  const storage = new SandboxStorage()\r\n  // DON'T CHANGE THIS.\r\n  // Flex v2 (decoding) scheme won't be updated even when newer\r\n  // db versions come along. So the object created from the url\r\n  // will remain a valid dbv7. The actual migration happens\r\n  // together with the validation down below.\r\n  storage.setString(\"db_ver\", \"7\")\r\n\r\n  storage.set(`char_${characterKey}`, character)\r\n  artifacts.forEach((artifact, i) => {\r\n    artifact.location = characterKey\r\n    storage.set(`artifact_${i + 1}`, artifact)\r\n  })\r\n\r\n  const database = new ArtCharDatabase(storage) // Validate storage\r\n\r\n  if (!database._getChar(newCharacterKey))\r\n    throw new Error(`Invalid flex object`)\r\n  return [database, newCharacterKey]\r\n}\r\n\r\nfunction parseFlexObjV3(string: string): [ArtCharDatabase, CharacterKey] {\r\n  const schema = schemas.flexV3\r\n  const { characters, artifacts, weapons } = decode(string, schema) as { characters: { key: CharacterKey }[], artifacts: any[], weapons: any[] }\r\n  const charKey = characters[0].key\r\n\r\n  const storage = new SandboxStorage()\r\n  // DON'T CHANGE THIS.\r\n  // Flex v3 (decoding) scheme won't be updated even when newer\r\n  // db versions come along. So the object created from the url\r\n  // will remain a valid dbv8. The actual migration happens\r\n  // together with the validation down below.\r\n  storage.setString(\"db_ver\", \"8\")\r\n\r\n  characters.forEach(character => storage.set(`char_${character.key}`, character))\r\n  artifacts.forEach((artifact, i) => storage.set(`artifact_${i}`, artifact))\r\n  weapons.forEach((weapon, i) => storage.set(`weapon_${i}`, weapon))\r\n\r\n  const database = new ArtCharDatabase(storage) // Validate storage\r\n\r\n  if (!database._getChar(charKey as any))\r\n    throw new Error(`Invalid flex object`)\r\n  return [database, charKey]\r\n}\r\n","import { Alert, Button, Card, Container, Form, InputGroup, Toast } from \"react-bootstrap\";\r\nimport { Redirect, useLocation } from \"react-router-dom\";\r\nimport CharacterDisplayCard from \"../Character/CharacterDisplayCard\";\r\nimport '../StatDependency'\r\nimport { createFlexObj, parseFlexObj } from \"./FlexUtil\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faLink } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useContext, useState } from \"react\";\r\nimport { DatabaseContext } from \"../Database/Database\";\r\n\r\nexport default function FlexDisplay() {\r\n  const location = useLocation()\r\n  const database = useContext(DatabaseContext)\r\n  const searchStr = location.search\r\n  if (searchStr) {\r\n    const flexResult = parseFlexObj(searchStr.substring(1))\r\n    if (!flexResult) return <Redirect to={`/`} />\r\n    const [database, charKey, version] = flexResult\r\n    if (version !== 3)\r\n      return <Redirect to={`/flex?${createFlexObj(charKey, database)}`} />\r\n    return <DatabaseContext.Provider value={database}><Display characterKey={charKey} /></DatabaseContext.Provider>\r\n  } else {\r\n    const characterKey = (location as any).characterKey\r\n    if (!characterKey) return <Redirect to={`/`} />\r\n    const flexObj = createFlexObj(characterKey, database)\r\n    if (!flexObj) return <Redirect to={`/`} />\r\n    window.scrollTo(0, 0)//sometimes the window isnt scrolled to the top on redirect.\r\n    return <Redirect to={`/flex?${flexObj}`} />\r\n  }\r\n}\r\nfunction Display({ characterKey }) {\r\n  const [toast, settoast] = useState(false)\r\n  const url = window.location.href\r\n  const copyToClipboard = () => {\r\n    navigator.clipboard.writeText(url).then(() => settoast(true)).catch(console.error)\r\n  }\r\n  const isUpToDate = false\r\n  return <Container className=\"my-2\">\r\n    <Toast onClose={() => settoast(false)} show={toast} delay={3000} autohide style={{\r\n      position: 'absolute',\r\n      top: 50,\r\n      right: 50,\r\n    }}>\r\n      <Toast.Header><b className=\"mr-auto\">Genshin Optimizer</b></Toast.Header>\r\n      <Toast.Body>URL copied to clipboard.</Toast.Body>\r\n    </Toast>\r\n    <Card bg=\"darkcontent\" text={\"lightfont\" as any} className=\"mb-2\">\r\n      <Card.Body className=\"p-2\">\r\n        <InputGroup className=\"mb-0\">\r\n          <InputGroup.Prepend>\r\n            <Button onClick={copyToClipboard}>\r\n              <span><FontAwesomeIcon icon={faLink} /> Copy URL to clipboard</span>\r\n            </Button>\r\n          </InputGroup.Prepend>\r\n          <Form.Control readOnly value={window.location.href} onClick={e => e.target.select()} />\r\n        </InputGroup>\r\n        {isUpToDate && <Alert variant=\"warning\" className=\"py-2 mt-2 mb-0\">This URL is generated on an older database version of Genshin Optimizer. The character data below might not be displayed as intended.</Alert>}\r\n      </Card.Body>\r\n    </Card>\r\n    <CharacterDisplayCard characterKey={characterKey} />\r\n  </Container>\r\n}"],"sourceRoot":""}