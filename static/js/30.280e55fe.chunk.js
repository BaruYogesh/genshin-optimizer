"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[30],{44361:function(e,n,t){t.d(n,{Z:function(){return b}});var i=t(93433),r=t(29439),s=t(39504),a=t(61889),l=t(94721),c=t(66647),o=t(68870),d=t(20890),u=t(72791),x=t(9350),h=t(42320),Z=t(24351),j=t(66218),v=t(3992),p=t(71310),m=t(68198),f=t(55942),g=t(9321),y=t(10157),P=t(73578),k=t(80184);function b(e){var n=e.show,t=e.onHide,b=e.onSelect,C=e.filter,w=void 0===C?function(){return!0}:C,S=e.weaponFilter,_=(0,h.Z)(j.ZP.getAll,[]),T=(0,u.useState)(null!==S&&void 0!==S?S:""),D=(0,r.Z)(T,2),E=D[0],R=D[1];(0,u.useEffect)((function(){return S&&R(S)}),[S]);var A=_?(0,i.Z)(new Set(Z.fG)).filter((function(e){return w(_[e])})).filter((function(e){var n;return!E||E===(null===_||void 0===_||null===(n=_[e])||void 0===n?void 0:n.weaponType)})).sort((function(e,n){var t,i,r,s;return(null!==(t=null===_||void 0===_||null===(i=_[n])||void 0===i?void 0:i.rarity)&&void 0!==t?t:0)-(null!==(r=null===_||void 0===_||null===(s=_[e])||void 0===s?void 0:s.rarity)&&void 0!==r?r:0)})):[];return _?(0,k.jsx)(g.Z,{open:n,onClose:t,children:(0,k.jsxs)(v.Z,{children:[(0,k.jsx)(s.Z,{sx:{py:1},children:(0,k.jsxs)(a.ZP,{container:!0,children:[(0,k.jsx)(a.ZP,{item:!0,flexGrow:1,children:(0,k.jsx)(P.Z,{value:E,onChange:R,disabled:!!S,size:"small"})}),(0,k.jsx)(a.ZP,{item:!0,children:(0,k.jsx)(m.Z,{onClick:t})})]})}),(0,k.jsx)(l.Z,{}),(0,k.jsx)(s.Z,{children:(0,k.jsx)(a.ZP,{container:!0,spacing:1,children:A.map((function(e){var n,i=_[e];return(0,k.jsx)(a.ZP,{item:!0,lg:3,md:4,children:(0,k.jsx)(p.Z,{sx:{height:"100%"},children:(0,k.jsxs)(c.Z,{onClick:function(){t(),b(e)},sx:{display:"flex"},children:[(0,k.jsx)(o.Z,{component:"img",src:i.img,sx:{width:100,height:"auto"},className:" grad-".concat(i.rarity,"star")}),(0,k.jsxs)(o.Z,{sx:{flexGrow:1,px:1},children:[(0,k.jsx)(d.Z,{variant:"subtitle1",children:i.name}),(0,k.jsxs)(d.Z,{children:[(0,k.jsx)(f.Z,{src:null===(n=x.Z.weaponTypes)||void 0===n?void 0:n[i.weaponType]})," ",(0,k.jsx)(y.t,{stars:i.rarity,colored:!0})]})]})]})})},e)}))})}),(0,k.jsx)(l.Z,{}),(0,k.jsx)(s.Z,{sx:{py:1},children:(0,k.jsx)(m.Z,{large:!0,onClick:t})})]})}):null}},2030:function(e,n,t){t.r(n),t.d(n,{default:function(){return rn}});var i=t(29439),r=t(1413),s=t(45987),a=t(37355),l=t(47047),c=t(39504),o=t(61889),d=t(90388),u=t(57621),x=t(20890),h=t(25228),Z=t(43896),j=t(94721),v=t(24518),p=t(2199),m=t(23786),f=t(68870),g=t(56125),y=t(9585),P=t(89673),k=t(55818),b=t(3721),C=t(72791),w=t(3992),S=t(71310),_=t(3082),T=t(2380),D=t(68198),E=t(91702),R=t(10600),A=t(33890),K=t(66887),O=t(91732),L=t(32490),I=t(55942),z=t(91839),W=t(2139),G=t(53343),M=t(2693),N=t(8430),B=t(79406),J=t(50920),U=t(53561),F=t(42320),H=t(47639),q=t(60393),V=t(79271),X=t(72838),$=t(31148),Q=t(31284),Y=t(3997),ee=t(26138),ne=t(68544),te=t(24351),ie=t(71946),re=t(80184);var se=function(e){var n=e.newBuild,t=void 0!==n&&n,r=(0,C.useContext)(M.R),s=r.data,a=r.character,l=r.mainStatAssumptionLevel,d=(0,C.useContext)(Y.t).database,h=(0,V.k6)(),Z=(0,C.useCallback)((function(e){return h.push({pathname:"/artifact",state:{artToEditId:e}})}),[h]),p=(0,F.Z)($.y.getAll,[]),m=(0,ne.Z)(),f=(0,i.Z)(m,2)[1];(0,C.useEffect)((function(){return d.followAnyArt(f)}));var g=(0,C.useCallback)((function(){if(window.confirm("Do you want to equip this artifact build to this character?")){var e=Object.fromEntries(te.eV.map((function(e){return[e,s.get(ee.ri.art[e].id).value]})));d.equipArtifacts(a.key,e)}}),[a,s,d]),P=(0,C.useCallback)((function(){a&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&d.equipArtifacts(a.key,(0,q.O)(te.eV,(function(e){return""})))}),[a,d]),k=te.eV.map((function(e){return s.get(ee.ri.art[e].id).value})),b=(0,C.useMemo)((function(){return p&&$.y.setEffects(p,s)}),[p,s]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(S.Z,{sx:{mb:1},children:[(0,re.jsx)(c.Z,{children:(0,re.jsx)(ie.Z,{})}),(0,re.jsx)(j.Z,{}),(0,re.jsx)(c.Z,{sx:{py:1},children:(0,re.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,re.jsx)(o.ZP,{item:!0,children:t?(0,re.jsx)(v.Z,{onClick:g,className:"mr-2",children:"Equip artifacts"}):(0,re.jsx)(v.Z,{color:"error",onClick:P,children:"Unequip all artifacts"})}),(0,re.jsx)(o.ZP,{item:!0,flexGrow:1}),(0,re.jsx)(o.ZP,{item:!0,children:!!l&&(0,re.jsx)(u.Z,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:(0,re.jsx)(x.Z,{children:(0,re.jsxs)("strong",{children:["Assume Main Stats are Level ",l]})})})})]})})]}),(0,re.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,re.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:p&&b&&Object.entries(b).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,re.jsxs)(S.Z,{sx:{flexGrow:1},children:[(0,re.jsx)(y.Z,{avatar:(0,re.jsx)(I.Z,{size:2,sx:{m:-1},src:p[t].defIconSrc}),title:p[t].name,titleTypographyProps:{variant:"subtitle1"}}),(0,re.jsx)(j.Z,{}),(0,re.jsx)(c.Z,{children:(0,re.jsx)(o.ZP,{container:!0,spacing:1,flexDirection:"column",height:"100%",children:(0,re.jsx)(o.ZP,{item:!0,display:"flex",flexDirection:"column",gap:2,children:r.map((function(e){return(0,re.jsx)(Q.Z,{setKey:t,setNumKey:e},t+e)}))})})})]},t)}))}),k.map((function(e){return!!e&&(0,re.jsx)(o.ZP,{item:!0,xs:6,md:4,children:(0,re.jsx)(X.Z,{artifactId:e,mainStatAssumptionLevel:l,onEdit:Z})},e)}))]})]})},ae=t(93433),le=t(53174),ce=t(54483),oe=t(42169),de=t(58751),ue=t(9350),xe=t(14763),he=t(10157),Ze=t(75545),je=t(74954),ve=t(90329),pe=t(947),me=t(94023),fe=t(43992),ge=t(52791),ye=t(36944),Pe=t(37503),ke=t(11741),be=t(16134);function Ce(){return(0,re.jsxs)(ge.Z,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:[(0,re.jsx)(Se,{}),(0,re.jsx)(_e,{}),(0,re.jsx)(o.ZP,{container:!0,spacing:1,children:(0,q.w6)(0,2).map((function(e){return(0,re.jsx)(o.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,re.jsx)(Te,{index:e})},e)}))})]})}var we={xs:12,sm:6,md:6,lg:4};function Se(){var e,n,t,s=(0,C.useContext)(M.R),a=s.data,l=s.oldData,d=a.getTeamBuff(),u=[];return Object.entries(null!==(e=d.total)&&void 0!==e?e:{}).forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return!r.isEmpty&&0!==r.value&&u.push([["total",t],r])})),Object.entries(null!==(n=d.premod)&&void 0!==n?n:{}).forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return!r.isEmpty&&0!==r.value&&u.push([["premod",t],r])})),Object.entries(null!==(t=d.enemy)&&void 0!==t?t:{}).forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return!r.isEmpty&&0!==r.value&&u.push([["enemy",t],r])})),u.length?(0,re.jsxs)(S.Z,{children:[(0,re.jsx)(c.Z,{children:"Team Buffs"}),(0,re.jsx)(j.Z,{}),(0,re.jsx)(c.Z,{children:(0,re.jsx)(o.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:u.map((function(e,n){var t,s=(0,i.Z)(e,2),a=s[0],c=s[1];return c&&(0,C.createElement)(o.ZP,(0,r.Z)((0,r.Z)({item:!0},we),{},{key:c.key}),(0,re.jsx)(xe.JW,{node:c,oldValue:null===(t=(0,q.Hm)(null===l||void 0===l?void 0:l.getTeamBuff(),a))||void 0===t?void 0:t.value}))}))})})]}):null}function _e(){var e=(0,C.useContext)(M.R).data;return(0,re.jsx)(o.ZP,{container:!0,spacing:1,children:ke.J.map((function(n,t){return(0,re.jsx)(o.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,re.jsxs)(S.Z,{sx:{opacity:n.canShow(e)?1:.5,height:"100%"},children:[(0,re.jsx)(y.Z,{title:n.name,action:n.icon,titleTypographyProps:{variant:"subtitle2"}}),n.canShow(e)&&(0,re.jsx)(j.Z,{}),n.canShow(e)&&(0,re.jsx)(c.Z,{children:(0,re.jsx)(Pe.Z,{sections:n.sections,teamBuffOnly:!0})})]})},t)}))})}function Te(e){var n=e.index,t=(0,C.useContext)(M.R),i=t.character,r=t.teamData,s=t.characterDispatch,a=i.key,l=i.team[n],o=(0,J.Z)(l),d=(0,U.Z)(),u=r[l],x=u&&o&&{character:u.character,characterSheet:u.characterSheet,data:u.target,teamData:r,mainStatAssumptionLevel:0,characterDispatch:o};return(0,re.jsxs)(S.Z,{children:[(0,re.jsx)(c.Z,{children:(0,re.jsx)(ye.Z,{fullWidth:!0,value:l,onChange:function(e){return s({type:"team",index:n,charKey:e})},filter:function(e,n){return n!==a&&!i.team.includes(n)},unSelectText:"Teammate ".concat(n+1),unSelectIcon:(0,re.jsx)(fe.Z,{})})}),x&&(0,re.jsx)(M.R.Provider,{value:x,children:(0,re.jsx)(be.Z,{characterKey:l,onClickHeader:d,artifactChildren:(0,re.jsx)(De,{}),weaponChildren:(0,re.jsx)(Ee,{}),characterChildren:(0,re.jsx)(Re,{})})})]})}function De(){var e=(0,C.useContext)(M.R).data,n=(0,F.Z)($.y.getAll,[]),t=(0,C.useMemo)((function(){return n&&Object.entries($.y.setEffects(n,e)).flatMap((function(e){var t=(0,i.Z)(e,2),r=t[0];return t[1].flatMap((function(e){return n[r].setEffectDocument(e)}))}))}),[n,e]);return t?(0,re.jsx)(Pe.Z,{sections:t,teamBuffOnly:!0}):null}function Ee(){var e=(0,C.useContext)(M.R),n=e.teamData[e.character.key].weaponSheet;return(0,re.jsx)(Pe.Z,{sections:n.document,teamBuffOnly:!0})}function Re(){var e=(0,C.useContext)(M.R),n=e.data,t=e.teamData[e.character.key].characterSheet.getTalent(n.get(ee.ri.charEle).value),i=Object.values(t.sheets).flatMap((function(e){return e.sections}));return(0,re.jsx)(Pe.Z,{sections:i,teamBuffOnly:!0})}function Ae(){var e,n=(0,C.useContext)(M.R),t=n.data,i=n.characterSheet,s=n.character,a=n.character.key,l=(0,J.Z)(a),d=t.get(ee.ri.charEle).value,u=i.weaponTypeKey,h=t.get(ee.ri.lvl).value,Z=t.get(ee.ri.asc).value,j=t.get(ee.ri.constellation).value,v={auto:t.get(ee.ri.total.auto).value,skill:t.get(ee.ri.total.skill).value,burst:t.get(ee.ri.total.burst).value},p={auto:t.get(ee.ri.bonus.auto).value,skill:t.get(ee.ri.bonus.skill).value,burst:t.get(ee.ri.bonus.burst).value};return(0,re.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,re.jsx)(o.ZP,{item:!0,xs:12,md:3,children:(0,re.jsxs)(S.Z,{children:[(0,re.jsx)(oe.Z,{src:i.cardImg,component:"img",width:"100%",height:"auto"}),(0,re.jsxs)(c.Z,{children:[(0,re.jsxs)(x.Z,{variant:"h4",children:[i.name," ",(0,re.jsx)(I.Z,{src:null===(e=ue.Z.weaponTypes)||void 0===e?void 0:e[u]})," ",Ze.Z[d]," "]}),(0,re.jsx)(x.Z,{variant:"h6",children:(0,re.jsx)(he.t,{stars:i.rarity,colored:!0})}),(0,re.jsxs)(x.Z,{variant:"h5",children:["Lvl. ",pe.ZP.getLevelString(h,Z)]}),(0,re.jsx)(o.ZP,{container:!0,spacing:1,mt:1,children:["auto","skill","burst"].map((function(e){var n;return(0,re.jsx)(o.ZP,{item:!0,xs:4,children:(0,re.jsx)(de.Z,{badgeContent:v[e],color:p[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,re.jsx)(f.Z,{component:"img",src:null===(n=i.getTalentOfKey(e,d))||void 0===n?void 0:n.img,width:"100%",height:"auto"})})},e)}))}),(0,re.jsx)(x.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:i.constellationName}),(0,re.jsx)(o.ZP,{container:!0,spacing:1,children:(0,q.w6)(1,6).map((function(e){var n;return(0,re.jsx)(o.ZP,{item:!0,xs:4,children:(0,re.jsx)(f.Z,{component:"img",src:null===(n=i.getTalentOfKey("constellation".concat(e),d))||void 0===n?void 0:n.img,sx:(0,r.Z)({cursor:"pointer"},j>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto",onClick:function(){return l({constellation:e===j?e-1:e})}})},e)}))})]})]})}),(0,re.jsxs)(o.ZP,{item:!0,xs:12,md:9,sx:{"> div:not(:last-child)":{mb:1}},children:[(0,re.jsx)(ve.default,{weaponId:s.equippedWeapon}),(0,re.jsx)(Be,{})]})]})}var Ke=["eleMas","critRate_","critDMG_","enerRech_","heal_"],Oe=[].concat(["atk","hp","def"],Ke).map((function(e){return ee.ri.total[e]})),Le=["atk_","atk","hp_","hp","def_","def"].concat(Ke),Ie=[].concat((0,ae.Z)(te.Kj.map((function(e){return ee.ri.total["".concat(e,"_dmg_")]}))),(0,ae.Z)(te.Kj.map((function(e){return ee.ri.total["".concat(e,"_res_")]}))),(0,ae.Z)(["stamina","incHeal_","shield_","cdRed_"].map((function(e){return ee.ri.total[e]})))),ze=Ie.map((function(e){return e.info.key})),We=[ee.ri.total.all_dmg_].concat((0,ae.Z)(te.Kj.map((function(e){return ee.ri.total["".concat(e,"_enemyRes_")]}))),[ee.ri.total.normal_dmg_,ee.ri.total.normal_critRate_,ee.ri.total.charged_dmg_,ee.ri.total.charged_critRate_,ee.ri.total.plunging_dmg_,ee.ri.total.plunging_critRate_,ee.ri.total.skill_dmg_,ee.ri.total.skill_critRate_,ee.ri.total.burst_dmg_,ee.ri.total.burst_critRate_],(0,ae.Z)(Object.keys(je.Ne).map((function(e){return ee.ri.total["".concat(e,"_dmg_")]}))),(0,ae.Z)(Object.keys(je.UT).map((function(e){return ee.ri.total["".concat(e,"_dmg_")]}))),(0,ae.Z)(["moveSPD_","atkSPD_","weakspotDMG_"].map((function(e){return ee.ri.total[e]}))),[ee.ri.total.dmgRed_]),Ge=We.map((function(e){return e.info.key})),Me={xs:12,sm:6,md:6,lg:4};function Ne(e){var n=e.nodes,t=e.statBreakpoint,i=e.extra,s=(0,C.useContext)(M.R),a=s.data,l=s.oldData;return(0,re.jsxs)(o.ZP,{container:!0,columnSpacing:{xs:2,lg:3},rowSpacing:1,children:[n.map((function(e){var n,i;return(0,re.jsx)(o.ZP,(0,r.Z)((0,r.Z)({item:!0},t),{},{children:(0,re.jsx)(xe.JW,{node:a.get(e),oldValue:null===l||void 0===l||null===(i=l.get(e))||void 0===i?void 0:i.value})}),null===(n=e.info)||void 0===n?void 0:n.key)})),i]})}function Be(){var e=(0,C.useContext)(M.R),n=e.data,t=e.character,i=e.character.key,s=(0,J.Z)(i),a=n.get(ee.ri.special);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(Se,{}),(0,re.jsx)(Je,{title:"Main Stats",content:(0,re.jsx)(Ne,{statBreakpoint:Me,nodes:Oe,extra:a&&(0,re.jsxs)(o.ZP,(0,r.Z)((0,r.Z)({item:!0},Me),{},{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[(0,re.jsxs)("span",{children:[(0,re.jsx)("b",{children:"Special:"})," ",(0,re.jsxs)(E.Z,{color:a.variant,children:[a.key&&Ze.Z[a.key]," ",a.key&&B.ZP.get(a.key)]})]}),(0,re.jsx)("span",{children:(0,B.EC)(a.value,a.unit)})]}))}),editContent:(0,re.jsx)(o.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:Le.map((function(e){var n,i=B.ZP.get(e);return(0,re.jsx)(o.ZP,{item:!0,xs:12,lg:6,children:(0,re.jsx)(me.Z,{name:(0,re.jsxs)("span",{children:[Ze.Z[e]," ",i]}),placeholder:B.ZP.getStr(e),value:null!==(n=t.bonusStats[e])&&void 0!==n?n:0,percent:"%"===B.ZP.unit(e),onValueChange:function(n){return s({type:"editStats",statKey:e,value:n})}})},e)}))})}),(0,re.jsx)(Je,{title:"Other Stats",content:(0,re.jsx)(Ne,{statBreakpoint:Me,nodes:Ie}),editContent:(0,re.jsx)(o.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:ze.map((function(e){var n,i=B.ZP.get(e);return(0,re.jsx)(o.ZP,{item:!0,xs:12,lg:6,children:(0,re.jsx)(me.Z,{name:(0,re.jsxs)("span",{children:[Ze.Z[e]," ",i]}),placeholder:B.ZP.getStr(e),value:null!==(n=t.bonusStats[e])&&void 0!==n?n:0,percent:"%"===B.ZP.unit(e),defaultValue:void 0,onValueChange:function(n){return s({type:"editStats",statKey:e,value:n})}})},e)}))})}),(0,re.jsx)(Je,{title:"Misc Stats",content:(0,re.jsx)(Ne,{statBreakpoint:{xs:12,sm:6,md:6},nodes:We}),editContent:(0,re.jsx)(o.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:Ge.map((function(e){var n,i=B.ZP.get(e);return(0,re.jsx)(o.ZP,{item:!0,xs:12,lg:6,children:(0,re.jsx)(me.Z,{name:(0,re.jsxs)("span",{children:[Ze.Z[e]," ",i]}),placeholder:B.ZP.getStr(e),value:null!==(n=t.bonusStats[e])&&void 0!==n?n:0,percent:"%"===B.ZP.unit(e),onValueChange:function(n){return s({type:"editStats",statKey:e,value:n})}})},e)}))})})]})}function Je(e){var n=e.title,t=e.content,r=e.editContent,s=(0,C.useState)(!1),a=(0,i.Z)(s,2),l=a[0],o=a[1];return(0,re.jsxs)(S.Z,{children:[(0,re.jsx)(c.Z,{sx:{py:1},children:(0,re.jsxs)(f.Z,{display:"flex",justifyContent:"space-between",children:[(0,re.jsx)(x.Z,{variant:"subtitle1",children:n}),(0,re.jsx)(v.Z,{size:"small",color:l?"error":"info",onClick:function(){return o(!l)},children:(0,re.jsxs)("span",{children:[(0,re.jsx)(ce.G,{icon:l?le.r6l:le.Xcf})," ",l?"EXIT":"Edit Stats"]})})]})}),(0,re.jsx)(j.Z,{}),(0,re.jsx)(c.Z,{children:l?r:t})]})}var Ue=t(66647),Fe=t(96106),He=t(20005);function qe(){var e=(0,C.useContext)(M.R),n=e.data,t=e.character,r=e.characterSheet,s=(0,J.Z)(t.key),a=n.get(ee.ri.charEle).value,l=n.get(ee.ri.asc).value,c=n.get(ee.ri.constellation).value;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(Xe,{}),(0,re.jsxs)(o.ZP,{container:!0,spacing:1,sx:{mb:1},children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,re.jsx)(o.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,re.jsx)(en,{talentKey:t,subtitle:r})},t)})),!!r.getTalentOfKey("sprint",a)&&(0,re.jsx)(o.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,re.jsx)(en,{talentKey:"sprint",subtitle:"Alternative Sprint"})}),!!r.getTalentOfKey("passive",a)&&(0,re.jsx)(o.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,re.jsx)(en,{talentKey:"passive",subtitle:"Passive"})})]}),(0,re.jsx)(o.ZP,{container:!0,spacing:1,children:[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var n=(0,i.Z)(e,3),t=n[0],s=n[1],c=n[2],d=l>=c;return r.getTalentOfKey(t,a)?(0,re.jsx)(o.ZP,{item:!0,style:{opacity:d?1:.5},xs:12,md:4,children:(0,re.jsx)(en,{talentKey:t,subtitle:s})},t):null}))}),(0,re.jsxs)(x.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",c]}),(0,re.jsx)(o.ZP,{container:!0,spacing:1,children:(0,q.w6)(1,6).map((function(e){var n="constellation".concat(e);return(0,re.jsx)(o.ZP,{item:!0,xs:12,md:4,sx:{opacity:c>=e?1:.5},children:(0,re.jsx)(en,{talentKey:n,subtitle:"Contellation Lv. ".concat(e),onClickTitle:function(){return s({constellation:e===c?e-1:e})}})},e)}))})]})}var Ve={superconduct:function(e){var n=e.node;return(0,re.jsx)(w.Z,{children:(0,re.jsx)(c.Z,{sx:{p:1},children:(0,re.jsxs)(x.Z,{color:"superconduct.main",children:[B.ZP.get(n.key)," ",Ze.Z.electro,"+",Ze.Z.cryo," ",(0,re.jsx)("strong",{children:(0,B.EC)(n.value,n.unit)})]})})})},electrocharged:function(e){var n=e.node;return(0,re.jsx)(w.Z,{children:(0,re.jsx)(c.Z,{sx:{p:1},children:(0,re.jsxs)(x.Z,{color:"electrocharged.main",children:[B.ZP.get(n.key)," ",Ze.Z.electro,"+",Ze.Z.hydro," ",(0,re.jsx)("strong",{children:(0,B.EC)(n.value,n.unit)})]})})})},overloaded:function(e){var n=e.node;return(0,re.jsx)(w.Z,{children:(0,re.jsx)(c.Z,{sx:{p:1},children:(0,re.jsxs)(x.Z,{color:"overloaded.main",children:[B.ZP.get(n.key)," ",Ze.Z.electro,"+",Ze.Z.pyro," ",(0,re.jsx)("strong",{children:(0,B.EC)(n.value,n.unit)})]})})})},pyroSwirl:function(){var e=(0,C.useState)(Object.keys($e)[0]),n=(0,i.Z)(e,2),t=n[0],r=n[1],s=(0,C.useContext)(M.R).data.getDisplay().reaction["".concat(t,"Swirl")];return(0,re.jsxs)(w.Z,{sx:{display:"flex"},children:[(0,re.jsx)(A.Z,{size:"small",title:$e[t],color:"success",children:Object.entries($e).map((function(e){var n=(0,i.Z)(e,2),s=n[0],a=n[1];return(0,re.jsx)(m.Z,{selected:t===s,disabled:t===s,onClick:function(){return r(s)},children:a},s)}))}),(0,re.jsx)(f.Z,{sx:{color:"".concat(t,".main"),p:1},children:(0,re.jsx)("strong",{children:(0,B.EC)(s.value,s.unit)})})]})},shattered:function(e){var n=e.node,t=(0,re.jsx)(Fe.Z,{placement:"top",title:(0,re.jsxs)(x.Z,{children:["Claymores, Plunging Attacks and ",(0,re.jsx)(E.Z,{color:"geo",children:"Geo DMG"})]}),children:(0,re.jsx)(f.Z,{component:"span",sx:{cursor:"help"},children:(0,re.jsx)(ce.G,{icon:le.sph})})});return(0,re.jsx)(w.Z,{children:(0,re.jsx)(c.Z,{sx:{p:1},children:(0,re.jsxs)(E.Z,{color:"shattered",children:[B.ZP.get(n.key)," ",Ze.Z.hydro,"+",Ze.Z.cryo,"+ ",(0,re.jsx)(E.Z,{color:"physical",children:(0,re.jsxs)("small",{children:["Heavy Attack",t," "]})})," ",(0,re.jsx)("strong",{children:(0,B.EC)(n.value,n.unit)})]})})})},crystallize:function(){var e=(0,C.useState)(Object.keys(Qe)[0]),n=(0,i.Z)(e,2),t=n[0],r=n[1],s=(0,C.useContext)(M.R).data,a="geo"===t?s.getDisplay().reaction.crystallize:s.getDisplay().reaction["".concat(t,"Crystallize")];return(0,re.jsxs)(w.Z,{sx:{display:"flex"},children:[(0,re.jsx)(A.Z,{size:"small",title:Qe[t],color:"success",children:Object.entries(Qe).map((function(e){var n=(0,i.Z)(e,2),s=n[0],a=n[1];return(0,re.jsx)(m.Z,{selected:t===s,disabled:t===s,onClick:function(){return r(s)},children:a},s)}))}),(0,re.jsx)(f.Z,{sx:{color:"".concat(t,".main"),p:1},children:(0,re.jsx)("strong",{children:(0,B.EC)(a.value,a.unit)})})]})}};function Xe(){var e=(0,C.useContext)(M.R).data.getDisplay().reaction;return(0,re.jsx)(S.Z,{sx:{mb:1},children:(0,re.jsx)(c.Z,{children:(0,re.jsx)(o.ZP,{container:!0,spacing:1,children:Object.entries(e).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1],s=Ve[t];return s?(0,re.jsx)(o.ZP,{item:!0,children:(0,re.jsx)(s,{node:r})},t):null}))})})})}var $e={pyro:(0,re.jsxs)("span",{children:[(0,re.jsx)(E.Z,{color:"pyro",children:B.ZP.get("pyro_swirl_hit")})," ",Ze.Z.pyro," + ",Ze.Z.anemo]}),electro:(0,re.jsxs)("span",{children:[(0,re.jsx)(E.Z,{color:"electro",children:B.ZP.get("electro_swirl_hit")})," ",Ze.Z.electro,"+",Ze.Z.anemo]}),cryo:(0,re.jsxs)("span",{children:[(0,re.jsx)(E.Z,{color:"cryo",children:B.ZP.get("cryo_swirl_hit")})," ",Ze.Z.cryo," + ",Ze.Z.anemo]}),hydro:(0,re.jsxs)("span",{children:[(0,re.jsx)(E.Z,{color:"hydro",children:B.ZP.get("hydro_swirl_hit")})," ",Ze.Z.hydro," + ",Ze.Z.anemo]})};var Qe={geo:(0,re.jsxs)(E.Z,{color:"crystallize",children:[B.ZP.get("crystallize")," ",Ze.Z.electro,"/",Ze.Z.hydro,"/",Ze.Z.pyro,"/",Ze.Z.cryo,"+",Ze.Z.geo]}),pyro:(0,re.jsxs)("span",{children:[(0,re.jsx)(E.Z,{color:"pyro",children:B.ZP.get("pyro_crystallize")})," ",Ze.Z.pyro,"+",Ze.Z.geo]}),electro:(0,re.jsxs)("span",{children:[(0,re.jsx)(E.Z,{color:"electro",children:B.ZP.get("electro_crystallize")})," ",Ze.Z.electro,"+",Ze.Z.geo]}),cryo:(0,re.jsxs)("span",{children:[(0,re.jsx)(E.Z,{color:"cryo",children:B.ZP.get("cryo_crystallize")})," ",Ze.Z.cryo,"+",Ze.Z.geo]}),hydro:(0,re.jsxs)("span",{children:[(0,re.jsx)(E.Z,{color:"hydro",children:B.ZP.get("hydro_crystallize")})," ",Ze.Z.hydro,"+",Ze.Z.geo]})};var Ye=[1,1,2,4,6,8,10];function en(e){var n=e.talentKey,t=e.subtitle,i=e.onClickTitle,r=(0,C.useContext)(M.R),s=r.data,a=r.character.talent,l=r.characterSheet,d=r.characterDispatch,u=(0,C.useCallback)((function(e){return(0,re.jsx)(Ue.Z,{onClick:i,children:e})}),[i]),h=null;if(n in a){var Z=s.get(ee.ri.bonus[n]).value,v=s.get(ee.ri.total[n]).value,p=s.get(ee.ri.asc).value;h=(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(c.Z,{sx:{py:1},children:(0,re.jsx)(A.Z,{fullWidth:!0,title:"Talent Lv. ".concat(v),color:Z?"info":"primary",children:(0,q.w6)(1,Ye[p]).map((function(e){return(0,re.jsxs)(m.Z,{selected:a[n]===e,disabled:a[n]===e,onClick:function(){return t=e,a[n]=t,void d({talent:a});var t},children:["Talent Lv. ",e+Z]},e)}))})}),(0,re.jsx)(j.Z,{})]})}var g=l.getTalentOfKey(n,s.get(ee.ri.charEle).value);return(0,re.jsxs)(S.Z,{sx:{height:"100%"},children:[h,(0,re.jsxs)(c.Z,{children:[(0,re.jsx)(He.Z,{condition:!!i,wrapper:u,children:(0,re.jsxs)(o.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,re.jsx)(o.ZP,{item:!0,children:(0,re.jsx)(f.Z,{component:"img",src:null===g||void 0===g?void 0:g.img,sx:{width:60,height:"auto"}})}),(0,re.jsxs)(o.ZP,{item:!0,flexGrow:1,sx:{pl:1},children:[(0,re.jsx)(x.Z,{variant:"h6",children:null===g||void 0===g?void 0:g.name}),(0,re.jsx)(x.Z,{variant:"subtitle1",children:t})]})]})}),null!==g&&void 0!==g&&g.sections?(0,re.jsx)(Pe.Z,{sections:g.sections}):null]})]})}var nn=["children","current","value"];function tn(e){var n=e.children,t=e.current,i=e.value,a=(0,s.Z)(e,nn);return i!==t?null:(0,re.jsx)(C.Suspense,{fallback:(0,re.jsx)(l.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,re.jsx)("div",(0,r.Z)((0,r.Z)({role:"tabpanel",hidden:i!==t,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i)},a),{},{children:n}))})}function rn(e){var n,t,s=e.characterKey,a=e.footer,l=e.newteamData,v=e.mainStatAssumptionLevel,p=void 0===v?0:v,m=e.onClose,f=e.tabName,g=(0,H.Z)(s,p),y=null!==(n=null===g||void 0===g?void 0:g[s])&&void 0!==n?n:{},P=y.character,k=y.characterSheet,b=y.target,_=(0,C.useState)(f||(l?"newartifacts":"character")),T=(0,i.Z)(_,2),E=T[0],R=T[1],A=(0,C.useCallback)((function(e,n){return R(n)}),[R]),O=(0,J.Z)(null!==(t=null===P||void 0===P?void 0:P.key)&&void 0!==t?t:""),L=(null!==P&&void 0!==P?P:{}).compareData,I=(0,C.useMemo)((function(){if(g&&P&&k&&b)return{character:P,characterSheet:k,mainStatAssumptionLevel:p,data:l?l[s].target:b,teamData:l||g,oldData:L&&l?b:void 0,characterDispatch:O}}),[P,k,p,l,b,g,O,s,L]);return g&&P&&k&&b&&I?(0,re.jsx)(w.Z,{children:(0,re.jsxs)(M.R.Provider,{value:I,children:[(0,re.jsxs)(c.Z,{sx:{"> div:not(:last-child)":{mb:1}},children:[(0,re.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,re.jsx)(o.ZP,{item:!0,children:(0,re.jsx)(sn,{})}),(0,re.jsx)(o.ZP,{item:!0,children:!!l&&(0,re.jsxs)(z.Z,{exclusive:!0,value:L,onChange:function(e,n){return O({compareData:n})},size:"small",children:[(0,re.jsx)(d.Z,{value:!1,disabled:!L,children:(0,re.jsx)("small",{children:"Show New artifact Stats"})}),(0,re.jsx)(d.Z,{value:!0,disabled:L,children:(0,re.jsx)("small",{children:"Compare against equipped artifacts"})})]})}),(0,re.jsx)(o.ZP,{item:!0,flexGrow:1}),!!p&&(0,re.jsx)(o.ZP,{item:!0,children:(0,re.jsx)(u.Z,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:(0,re.jsx)(x.Z,{children:(0,re.jsxs)("strong",{children:["Assume Main Stats are Level ",p]})})})}),!!m&&(0,re.jsx)(o.ZP,{item:!0,children:(0,re.jsx)(D.Z,{onClick:m})})]}),(0,re.jsx)(S.Z,{children:(0,re.jsxs)(h.Z,{onChange:A,value:E,variant:"fullWidth",children:[(0,re.jsx)(Z.Z,{value:"character",label:"Character"}),!!l&&(0,re.jsx)(Z.Z,{value:"newartifacts",label:"New Artifacts"}),(0,re.jsx)(Z.Z,{value:"artifacts",label:l?"Current Artifacts":"Artifacts"}),(0,re.jsx)(Z.Z,{value:"buffs",label:"Team Buffs"}),(0,re.jsx)(Z.Z,{value:"talent",label:"Talents"})]})}),(0,re.jsx)(an,{}),(0,re.jsx)(K.d3,{}),(0,re.jsx)(tn,{value:"character",current:E,children:(0,re.jsx)(Ae,{})}),(0,re.jsx)(M.R.Provider,{value:(0,r.Z)((0,r.Z)({},I),{},{data:b,oldData:void 0}),children:(0,re.jsx)(tn,{value:"artifacts",current:E,children:(0,re.jsx)(se,{})})}),(0,re.jsx)(tn,{value:"newartifacts",current:E,children:(0,re.jsx)(se,{newBuild:!0})}),(0,re.jsx)(tn,{value:"buffs",current:E,children:(0,re.jsx)(Ce,{})}),(0,re.jsx)(tn,{value:"talent",current:E,children:(0,re.jsx)(qe,{})})]}),!!a&&(0,re.jsx)(j.Z,{}),a&&(0,re.jsx)(c.Z,{children:a})]})}):(0,re.jsx)(re.Fragment,{})}function sn(){var e,n=(0,C.useContext)(M.R),t=n.character,r=n.characterSheet,s=n.characterDispatch,a=(0,C.useState)(!1),l=(0,i.Z)(a,2),c=l[0],d=l[1],u=(0,U.Z)(),x=(0,C.useCallback)((function(e){e=(0,q.uZ)(e,1,90);var n=W.SJ.findIndex((function(n){return e<=n}));s({level:e,ascension:n})}),[s]),h=(0,C.useCallback)((function(){if(t){var e=t.level,n=void 0===e?1:e,i=t.ascension,r=void 0===i?0:i,a=W.SJ.findIndex((function(e){return 90!==n&&n===e}));s(r===a?{ascension:r+1}:{ascension:a})}}),[s,t]),Z=t.elementKey,j=void 0===Z?"anemo":Z,f=t.level,g=void 0===f?1:f,y=t.ascension,P=void 0===y?0:y;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(_.w,{show:c,onHide:function(){return d(!1)},onSelect:u}),(0,re.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,re.jsx)(o.ZP,{item:!0,children:(0,re.jsx)(v.Z,{onClick:function(){return d(!0)},startIcon:(0,re.jsx)(T.Z,{src:null===r||void 0===r?void 0:r.thumbImgSide}),children:null!==(e=null===r||void 0===r?void 0:r.name)&&void 0!==e?e:"Select a Character"})}),(0,re.jsx)(o.ZP,{item:!0,children:(0,re.jsxs)(p.Z,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[(null===r||void 0===r?void 0:r.sheet)&&"talents"in(null===r||void 0===r?void 0:r.sheet)&&(0,re.jsx)(A.Z,{title:(0,re.jsx)("strong",{children:(0,re.jsx)(E.Z,{color:j,children:(0,G.Oy)("element.".concat(j))})}),children:Object.keys(r.sheet.talents).map((function(e){return(0,re.jsx)(m.Z,{selected:j===e,disabled:j===e,onClick:function(){return s({elementKey:e})},children:(0,re.jsx)("strong",{children:(0,re.jsx)(E.Z,{color:e,children:(0,G.Oy)("element.".concat(e))})})},e)}))}),(0,re.jsx)(R.CC,{children:(0,re.jsx)(R.ZP,{onChange:x,value:g,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2},disabled:!r})}),(0,re.jsx)(v.Z,{sx:{pl:1},disabled:!(0,W.ek)(g)||!r,onClick:h,children:(0,re.jsxs)("strong",{children:["/ ",W.SJ[P]]})}),(0,re.jsx)(A.Z,{title:"Select Level",disabled:!r,children:W.D4.map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1],a=t===W.SJ[r]?"Lv. ".concat(t):"Lv. ".concat(t,"/").concat(W.SJ[r]),l=t===g&&r===P;return(0,re.jsx)(m.Z,{selected:l,disabled:l,onClick:function(){return s({level:t,ascension:r})},children:a},"".concat(t,"/").concat(r))}))})]})})]})]})}function an(){var e=(0,C.useState)(!1),n=(0,i.Z)(e,2),t=n[0],r=n[1],s=(0,C.useCallback)((function(){return r(!t)}),[r,t]);return(0,re.jsxs)(S.Z,{children:[(0,re.jsxs)(c.Z,{sx:{display:"flex",gap:1},children:[(0,re.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,re.jsx)(o.ZP,{item:!0,children:(0,re.jsx)(L.Hn,{size:"small"})}),(0,re.jsx)(o.ZP,{item:!0,children:(0,re.jsx)(L.pg,{})}),(0,re.jsx)(o.ZP,{item:!0,children:(0,re.jsx)(L.oX,{size:"small"})})]}),(0,re.jsxs)(f.Z,{display:"flex",gap:1,children:[(0,re.jsxs)(f.Z,{children:[(0,re.jsxs)(x.Z,{variant:"subtitle2",children:["Formulas ","&"]}),(0,re.jsx)(x.Z,{variant:"subtitle2",children:"Calculations"})]}),(0,re.jsx)(O.Z,{expand:t,onClick:s,"aria-expanded":t,"aria-label":"show more",size:"small",sx:{p:0},children:(0,re.jsx)(a.Z,{})})]})]}),(0,re.jsx)(g.Z,{in:t,timeout:"auto",unmountOnExit:!0,children:(0,re.jsx)(c.Z,{sx:{pt:0},children:(0,re.jsx)(ln,{})})})]})}function ln(){var e=(0,C.useContext)(M.R).data,n=(0,N.U)(e);return(0,re.jsx)(C.Suspense,{fallback:(0,re.jsx)(l.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,re.jsx)(f.Z,{sx:{mr:-1,mb:-1},children:n.map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,re.jsx)(cn,{displayNs:r,sectionKey:t},t)}))})})}function cn(e){var n=e.sectionKey,t=e.displayNs,r=(0,C.useContext)(M.R).data,s=(0,F.Z)((0,N.f)(r,n),[r,n]);if(!s)return null;var l=s.title,o=s.icon,d=s.action;return(0,re.jsxs)(w.Z,{sx:{mb:1},children:[(0,re.jsx)(y.Z,{avatar:o&&(0,re.jsx)(I.Z,{size:2,sx:{m:-1},src:o}),title:l,action:d,titleTypographyProps:{variant:"subtitle1"}}),(0,re.jsx)(j.Z,{}),(0,re.jsx)(c.Z,{children:Object.entries(t).map((function(e){var n,t=(0,i.Z)(e,2),r=t[0],s=t[1];return!s.isEmpty&&(0,re.jsxs)(P.Z,{sx:{bgcolor:"contentLight.main"},children:[(0,re.jsx)(k.Z,{expandIcon:(0,re.jsx)(a.Z,{}),children:(0,re.jsxs)(x.Z,{children:[(0,re.jsx)(E.Z,{color:s.variant,children:B.ZP.get(null!==(n=s.key)&&void 0!==n?n:"")})," ",(0,re.jsx)("strong",{children:(0,B.EC)(s.value,s.unit)})]})}),(0,re.jsx)(b.Z,{children:s.formulas.map((function(e,n){return(0,re.jsx)(x.Z,{children:e},n)}))})]},r)}))})]})}},22776:function(e,n,t){t.d(n,{Z:function(){return Y}});var i,r,s,a,l=t(53174),c=t(54483),o=t(40117),d=t(62002),u=t(66647),x=t(47047),h=t(9585),Z=t(13400),j=t(61889),v=t(20890),p=t(68870),m=t(39504),f=t(2199),g=t(24518),y=t(72791),P=t(9350),k=t(71310),b=t(1413),C=t(30168),w=t(45987),S=t(63204),_=t(49670),T=t(23786),D=t(57064),E=t(94721),R=t(22020),A=t(947),K=t(3997),O=t(42320),L=t(33890),I=t(2380),z=t(80184),W=["value","onChange","unSelectText","unSelectIcon","inventory","noUnselect","filter"];function G(e){var n,t=e.value,l=e.onChange,c=e.unSelectText,o=e.unSelectIcon,d=e.inventory,u=void 0!==d&&d,x=e.noUnselect,h=void 0!==x&&x,Z=e.filter,j=void 0===Z?function(){return!0}:Z,p=(0,w.Z)(e,W),m=(0,R.$)("ui").t,f=(0,y.useContext)(K.t).database,g=(0,O.Z)(A.ZP.getAll,[]),P=(0,O.Z)(A.ZP.get(t),[t]),k=f._getCharKeys().filter((function(e){return(null===g||void 0===g?void 0:g[e])&&j(g[e],e)})).sort();return(0,z.jsxs)(L.Z,(0,b.Z)((0,b.Z)({},p),{},{title:null!==(n=null===P||void 0===P?void 0:P.name)&&void 0!==n?n:u?m(i||(i=(0,C.Z)(["inventory"]))):null!==c&&void 0!==c?c:m(r||(r=(0,C.Z)(["unselect"]))),color:t?"success":"primary",startIcon:null!==P&&void 0!==P&&P.thumbImg?(0,z.jsx)(I.Z,{src:P.thumbImgSide}):u?(0,z.jsx)(S.Z,{}):null!==o&&void 0!==o?o:(0,z.jsx)(_.Z,{}),children:[!h&&(u?(0,z.jsxs)(T.Z,{onClick:function(){return l("")},selected:""===t,disabled:""===t,children:[(0,z.jsx)(D.Z,{children:(0,z.jsx)(S.Z,{})}),(0,z.jsx)(v.Z,{variant:"inherit",noWrap:!0,children:m(s||(s=(0,C.Z)(["inventory"])))})]}):(0,z.jsxs)(T.Z,{onClick:function(){return l("")},selected:""===t,disabled:""===t,children:[(0,z.jsx)(D.Z,{children:(0,z.jsx)(_.Z,{})}),(0,z.jsx)(v.Z,{variant:"inherit",noWrap:!0,children:m(a||(a=(0,C.Z)(["unselect"])))})]})),!h&&(0,z.jsx)(E.Z,{},"div"),!!g&&M(g,k,l,t)]}))}function M(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return n.map((function(n){var r;return(0,z.jsxs)(T.Z,{onClick:function(){return t(n)},selected:i===n,disabled:i===n,children:[(0,z.jsx)(D.Z,{children:(0,z.jsx)(I.Z,{src:e[n].thumbImgSide})}),(0,z.jsx)(v.Z,{variant:"inherit",noWrap:!0,children:null===e||void 0===e||null===(r=e[n])||void 0===r?void 0:r.name})]},n)}))}var N=t(40020),B=t(20005),J=t(55942),U=t(10157),F=t(75545),H=t(2139),q=t(26138),V=t(87234),X=t(74480),$=t(79406),Q=t(66218);function Y(e){var n,t=e.weaponId,i=e.onClick,r=e.onEdit,s=e.onDelete,a=e.canEquip,b=void 0!==a&&a,C=(0,y.useContext)(K.t).database,w=(0,X.Z)(t),S=(0,O.Z)(null!==w&&void 0!==w&&w.key?Q.ZP.get(w.key):void 0,[null===w||void 0===w?void 0:w.key]),_=(0,y.useCallback)((function(e){return e.weaponTypeKey===(null===S||void 0===S?void 0:S.weaponType)}),[S]),T=(0,y.useCallback)((function(e){return(0,z.jsx)(u.Z,{onClick:function(){return null===i||void 0===i?void 0:i(t)},sx:{height:"100%"},children:e})}),[i,t]),D=(0,y.useCallback)((function(e){return C.setWeaponLocation(t,e)}),[C,t]),E=(0,y.useMemo)((function(){return S&&w&&(0,V.mP)([S.data,(0,V.v0)(w)])}),[S,w]);if(!w||!S||!E)return null;var R=w.level,A=w.ascension,L=w.refinement,I=w.id,W=w.location,M=void 0===W?"":W,Y=w.lock,ee=E.get(q.ri.weapon.type).value,ne=[q.ri.weapon.main,q.ri.weapon.sub,q.ri.weapon.sub2].map((function(e){return E.get(e)})),te=A<2?null===S||void 0===S?void 0:S.img:null===S||void 0===S?void 0:S.imgAwaken;return(0,z.jsx)(y.Suspense,{fallback:(0,z.jsx)(x.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,z.jsx)(B.Z,{condition:!!i,wrapper:T,children:(0,z.jsxs)(k.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,z.jsxs)("div",{className:"grad-".concat(S.rarity,"star"),children:[(0,z.jsx)(h.Z,{title:S.name,avatar:(0,z.jsx)(J.Z,{sx:{fontSize:"2em"},src:null===(n=P.Z.weaponTypes)||void 0===n?void 0:n[ee]}),titleTypographyProps:{variant:"h6"},action:!i&&(0,z.jsx)(Z.Z,{color:"primary",onClick:function(){return C.updateWeapon({lock:!Y},I)},children:Y?(0,z.jsx)(o.Z,{}):(0,z.jsx)(d.Z,{})})}),(0,z.jsxs)(j.ZP,{container:!0,sx:{flexWrap:"nowrap",pl:2},children:[(0,z.jsxs)(j.ZP,{item:!0,flexGrow:1,children:[(0,z.jsxs)(v.Z,{component:"span",variant:"h4",children:["Lv. ",R]}),(0,z.jsxs)(v.Z,{component:"span",variant:"h4",color:"text.secondary",children:["/",H.SJ[A]]}),(0,z.jsxs)(v.Z,{variant:"h6",children:["Refinement ",(0,z.jsx)("strong",{children:L})]}),(0,z.jsx)(v.Z,{children:(0,z.jsx)(U.t,{stars:S.rarity,colored:!0})})]}),(0,z.jsx)(j.ZP,{item:!0,container:!0,maxWidth:"40%",alignContent:"flex-end",sx:{mt:-3},children:(0,z.jsx)(p.Z,{component:"img",src:te,width:"100%",height:"auto"})})]})]}),(0,z.jsx)(m.Z,{children:ne.map((function(e){if(!e.key)return null;var n=(0,$.EC)(e.value,e.unit,e.unit?void 0:0);return(0,z.jsxs)(p.Z,{sx:{display:"flex"},children:[(0,z.jsxs)(v.Z,{flexGrow:1,children:[F.Z[e.key]," ",$.ZP.get(e.key)]}),(0,z.jsx)(v.Z,{children:n})]},e.key)}))}),(0,z.jsx)(p.Z,{flexGrow:1}),(0,z.jsx)(m.Z,{sx:{py:1},children:(0,z.jsxs)(j.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,z.jsx)(j.ZP,{item:!0,xs:"auto",flexShrink:1,children:b?(0,z.jsx)(G,{size:"small",noUnselect:!0,inventory:!0,value:M,onChange:D,filter:_}):(0,z.jsx)(N.Z,{location:M})}),(0,z.jsx)(j.ZP,{item:!0,flexGrow:1,sx:{mr:1}}),(0,z.jsx)(j.ZP,{item:!0,xs:"auto",children:(0,z.jsxs)(f.Z,{sx:{height:"100%"},children:[!!r&&(0,z.jsx)(g.Z,{color:"info",size:"small",onClick:function(){return r(I)},children:(0,z.jsx)(c.G,{icon:l.Xcf,className:"fa-fw"})}),!!s&&(0,z.jsx)(g.Z,{color:"error",size:"small",onClick:function(){return s(I)},disabled:!!M||Y,children:(0,z.jsx)(c.G,{icon:l.I7k,className:"fa-fw"})})]})})]})})]})})})}},90329:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var i=t(93433),r=t(29439),s=t(40117),a=t(62002),l=t(97719),c=t(39504),o=t(61889),d=t(2199),u=t(24518),x=t(23786),h=t(94721),Z=t(68870),j=t(20890),v=t(9585),p=t(15021),m=t(72791),f=t(9350),g=t(3992),y=t(71310),P=t(36944),k=t(68198),b=(t(91702),t(10600)),C=t(37503),w=t(33890),S=t(14763),_=t(55942),T=t(9321),D=t(25617),E=t(10157),R=t(44361),A=t(947),K=t(2139),O=t(66218),L=t(3997),I=t(2693),z=t(26138),W=t(87234),G=t(42320),M=t(74480),N=t(60393),B=t(22776),J=t(80184);function U(e){var n,t=e.weaponId,l=e.footer,f=void 0!==l&&l,_=e.onClose,T=(0,m.useContext)(I.R).data,B=(0,m.useContext)(L.t).database,U=(0,M.Z)(t),H=null!==U&&void 0!==U?U:{},q=H.key,V=void 0===q?"":q,X=H.level,$=void 0===X?0:X,Q=H.refinement,Y=void 0===Q?0:Q,ee=H.ascension,ne=void 0===ee?0:ee,te=H.lock,ie=H.location,re=void 0===ie?"":ie,se=H.id,ae=(0,G.Z)(O.ZP.get(V),[V]),le=null===ae||void 0===ae?void 0:ae.weaponType,ce=(0,m.useCallback)((function(e){B.updateWeapon(e,t)}),[t,B]),oe=(0,m.useCallback)((function(e){e=(0,N.uZ)(e,1,90);var n=K.SJ.findIndex((function(n){return e<=n}));ce({level:e,ascension:n})}),[ce]),de=(0,m.useCallback)((function(){var e=K.SJ.findIndex((function(e){return 90!==$&&$===e}));ce(ne===e?{ascension:ne+1}:{ascension:e})}),[ce,ne,$]),ue=(0,G.Z)(re?A.ZP.get(re):void 0,[re]),xe=ue?function(e){return e.weaponType===ue.weaponTypeKey}:void 0,he=ue&&ue.weaponTypeKey,Ze=(0,m.useCallback)((function(e){return se&&B.setWeaponLocation(se,e)}),[B,se]),je=(0,m.useCallback)((function(e){return e.weaponTypeKey===(null===ae||void 0===ae?void 0:ae.weaponType)}),[ae]),ve=(0,m.useState)(!1),pe=(0,r.Z)(ve,2),me=pe[0],fe=pe[1],ge=ne<2?null===ae||void 0===ae?void 0:ae.img:null===ae||void 0===ae?void 0:ae.imgAwaken;(0,m.useEffect)((function(){if(ae&&ce&&ae.key===(null===U||void 0===U?void 0:U.key)&&ae.rarity<=2&&($>70||ne>4)){var e=(0,r.Z)(K.Xu[0],2),n=e[0],t=e[1];ce({level:n,ascension:t})}}),[ae,U,ce,$,ne]);var ye=(0,m.useMemo)((function(){return ae&&U&&(0,W.mP)([ae.data,(0,W.v0)(U)])}),[ae,U]);return(0,J.jsxs)(y.Z,{children:[(0,J.jsx)(c.Z,{sx:{py:1},children:(0,J.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,J.jsx)(o.ZP,{item:!0,flexGrow:1,children:(0,J.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,J.jsxs)(o.ZP,{item:!0,children:[(0,J.jsx)(R.Z,{show:me,onHide:function(){return fe(!1)},onSelect:function(e){return ce({key:e})},filter:xe,weaponFilter:he}),(0,J.jsxs)(d.Z,{children:[(0,J.jsx)(u.Z,{onClick:function(){return fe(!0)},children:null!==(n=null===ae||void 0===ae?void 0:ae.name)&&void 0!==n?n:"Select a Weapon"}),(null===ae||void 0===ae?void 0:ae.hasRefinement)&&(0,J.jsxs)(w.Z,{title:"Refinement ".concat(Y),children:[(0,J.jsx)(x.Z,{children:"Select Weapon Refinement"}),(0,J.jsx)(h.Z,{}),(0,i.Z)(Array(5).keys()).map((function(e){return(0,J.jsx)(x.Z,{onClick:function(){return ce({refinement:e+1})},selected:Y===e+1,disabled:Y===e+1,children:"Refinement ".concat(e+1)},e)}))]})]})]}),(0,J.jsx)(o.ZP,{item:!0,children:(0,J.jsxs)(d.Z,{sx:{bgcolor:function(e){return e.palette.contentLight.main}},children:[(0,J.jsx)(b.CC,{children:(0,J.jsx)(b.ZP,{onChange:oe,value:$,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),ae&&(0,J.jsx)(u.Z,{sx:{pl:1},disabled:!ae.ambiguousLevel($),onClick:de,children:(0,J.jsxs)("strong",{children:["/ ",K.SJ[ne]]})}),ae&&(0,J.jsx)(w.Z,{title:"Select Level",children:ae.milestoneLevels.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],s=t===K.SJ[i]?"Lv. ".concat(t):"Lv. ".concat(t,"/").concat(K.SJ[i]),a=t===$&&i===ne;return(0,J.jsx)(x.Z,{selected:a,disabled:a,onClick:function(){return ce({level:t,ascension:i})},children:s},"".concat(t,"/").concat(i))}))})]})}),(0,J.jsx)(o.ZP,{item:!0,children:(0,J.jsx)(u.Z,{color:"error",onClick:function(){return se&&B.updateWeapon({lock:!te},se)},startIcon:te?(0,J.jsx)(s.Z,{}):(0,J.jsx)(a.Z,{}),children:te?"Locked":"Unlocked"})})]})}),!!_&&(0,J.jsx)(o.ZP,{item:!0,children:(0,J.jsx)(k.Z,{onClick:_})}),(0,J.jsx)(o.ZP,{item:!0,children:(0,J.jsx)(F,{weaponTypeKey:le,onChangeId:function(e){return B.setWeaponLocation(e,T.get(z.ri.charKey).value)}})})]})}),(0,J.jsx)(h.Z,{}),(0,J.jsx)(c.Z,{children:ae&&ye&&(0,J.jsxs)(o.ZP,{container:!0,spacing:1.5,children:[(0,J.jsx)(o.ZP,{item:!0,xs:12,sm:3,children:(0,J.jsxs)(o.ZP,{container:!0,spacing:1.5,children:[(0,J.jsx)(o.ZP,{item:!0,xs:6,sm:12,children:(0,J.jsx)(Z.Z,{component:"img",src:ge,className:"grad-".concat(ae.rarity,"star"),sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}})}),(0,J.jsx)(o.ZP,{item:!0,xs:6,sm:12,children:(0,J.jsx)(j.Z,{children:(0,J.jsx)("small",{children:ae.description})})})]})}),(0,J.jsxs)(o.ZP,{item:!0,xs:12,sm:9,children:[(0,J.jsxs)(j.Z,{variant:"h6",children:[!1,ae.name," Lv. ",U&&O.ZP.getLevelString(U)," ",ae.rarity>2&&(0,J.jsxs)(D.Z,{color:"info",children:["Refinement ",Y]})]}),(0,J.jsx)(j.Z,{children:(0,J.jsx)(E.t,{stars:ae.rarity})}),(0,J.jsx)(j.Z,{variant:"subtitle1",children:ae.passiveName}),(0,J.jsx)(j.Z,{gutterBottom:!0,children:ae.passiveName&&ae.passiveDescription(ye.get(z.ri.weapon.refineIndex).value)}),(0,J.jsxs)(Z.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,J.jsxs)(g.Z,{children:[(0,J.jsx)(v.Z,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),(0,J.jsx)(h.Z,{}),(0,J.jsx)(S.lD,{children:[z.ri.weapon.main,z.ri.weapon.sub,z.ri.weapon.sub2].map((function(e,n){var t=ye.get(e);return t.isEmpty||!t.value?null:(0,J.jsx)(S.JW,{node:t,component:p.ZP},t.key)}))})]}),T&&ae.document&&(0,J.jsx)(C.Z,{sections:ae.document})]})]})]})}),f&&se&&(0,J.jsx)(c.Z,{sx:{py:1},children:(0,J.jsxs)(o.ZP,{container:!0,children:[(0,J.jsx)(o.ZP,{item:!0,flexGrow:1,children:(0,J.jsx)(P.Z,{noUnselect:!0,inventory:!0,value:re,onChange:Ze,filter:je})}),!!_&&(0,J.jsx)(o.ZP,{item:!0,children:(0,J.jsx)(k.Z,{large:!0,onClick:_})})]})})]})}function F(e){var n=e.onChangeId,t=e.weaponTypeKey,i=(0,m.useContext)(L.t).database,s=(0,m.useState)(!1),a=(0,r.Z)(s,2),d=a[0],x=a[1],Z=function(){return x(!1)},v=function(e){n(e),Z()},p=(0,G.Z)(O.ZP.getAll,[]),y=i.weapons.keys.filter((function(e){var n,r=i._getWeapon(e);return!!r&&(!t||t===(null===p||void 0===p||null===(n=p[r.key])||void 0===n?void 0:n.weaponType))}));return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(u.Z,{color:"info",onClick:function(){return x(!0)},startIcon:(0,J.jsx)(l.Z,{}),children:"SWAP WEAPON"}),(0,J.jsx)(T.Z,{open:d,onClose:Z,children:(0,J.jsxs)(g.Z,{children:[(0,J.jsx)(c.Z,{sx:{py:1},children:(0,J.jsxs)(o.ZP,{container:!0,children:[(0,J.jsx)(o.ZP,{item:!0,flexGrow:1,children:(0,J.jsxs)(j.Z,{variant:"h6",children:[t?(0,J.jsx)(_.Z,{src:f.Z.weaponTypes[t]}):null," Swap Weapon"]})}),(0,J.jsx)(o.ZP,{item:!0,children:(0,J.jsx)(k.Z,{onClick:Z})})]})}),(0,J.jsx)(h.Z,{}),(0,J.jsx)(c.Z,{children:(0,J.jsx)(o.ZP,{container:!0,spacing:1,children:y.map((function(e){return(0,J.jsx)(o.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,J.jsx)(B.Z,{weaponId:e,onClick:v})},e)}))})})]})})]})}}}]);
//# sourceMappingURL=30.280e55fe.chunk.js.map