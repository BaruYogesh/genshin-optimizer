(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[13],{202:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(12),c=n(29),r=n(10),i=n(1),s=function(){return Object(i.jsx)(r.a,{icon:c.C})},o=function(e){var t=e.stars,n=e.colored,c=void 0!==n&&n;return Object(i.jsx)("span",{className:c?"text-5star":"",children:t?Object(a.a)(Array(t).keys()).map((function(e,t){return Object(i.jsx)(s,{},t)})):null})}},203:function(e,t,n){"use strict";var a={weaponTypes:{bow:n.p+"static/media/Weapon-class-bow-icon.b8e7b5ca.png",catalyst:n.p+"static/media/Weapon-class-catalyst-icon.2cbef800.png",claymore:n.p+"static/media/Weapon-class-claymore-icon.17418b20.png",polearm:n.p+"static/media/Weapon-class-polearm-icon.a4e7fffc.png",sword:n.p+"static/media/Weapon-class-sword-icon.4470b487.png"},resin:{fragile:n.p+"static/media/Item_Fragile_Resin.f9ec8223.png",condensed:n.p+"static/media/Item_Condensed_Resin.1cecf64a.png"},exp_books:{advice:n.p+"static/media/Item_Wanderer's_Advice.58c62cf7.png",wit:n.p+"static/media/Item_Hero's_Wit.a79e36d0.png",experience:n.p+"static/media/Item_Adventurer's_Experience.92b5d195.png"}};t.a=a},204:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(124),c=n(67),r=n(8),i=n(2),s=n(19),o=n(68),l=n(112),u=n(100),j=n(39),d=n(53),b=n(40),h=n(210),O=n(36),v=n(11),f=n(119),m=function e(){if(Object(s.a)(this,e),this instanceof e)throw Error("A static class cannot be instantiated.")};m.getElementalName=function(e){return d.a[e].name},m.getLevelString=function(e){return"".concat(e.level,"/").concat(j.b[e.ascension])},m.getTalentFieldValue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e[t]?Object(v.f)(e[t],n):a},m.hasBonusStats=function(e,t){return"finalHP"===t?m.hasBonusStats(e,"hp")||m.hasBonusStats(e,"hp_")||m.hasBonusStats(e,"characterHP"):"finalDEF"===t?m.hasBonusStats(e,"def")||m.hasBonusStats(e,"def_")||m.hasBonusStats(e,"characterDEF"):"finalATK"===t?m.hasBonusStats(e,"atk")||m.hasBonusStats(e,"atk_")||m.hasBonusStats(e,"characterATK"):!!(null===e||void 0===e?void 0:e.bonusStats)&&t in e.bonusStats},m.getStatValueWithBonus=function(e,t){var n,a,c;return null!==(n=null!==(a=null===(c=e.bonusStats)||void 0===c?void 0:c[t])&&void 0!==a?a:Object(O.a)(e)[t])&&void 0!==n?n:0},m.calculateBuild=function(e,t,n,a,c){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=Object.fromEntries(Object.entries(e.equippedArtifacts).map((function(e){var n=Object(i.a)(e,2),a=n[0],c=n[1];return[a,t._getArt(c)]}))),o=m.createInitialStats(e,t,n,a);return o.mainStatAssumptionLevel=r,m.calculateBuildwithArtifact(o,s,c)},m.calculateBuildwithArtifact=function(e,t,n){var a,c=o.a.setToSlots(t),s=l.a.setEffectsStats(n,e,c),j=Object(v.d)(e);Object.values(t).forEach((function(e){e&&(j[e.mainStatKey]=(j[e.mainStatKey]||0)+o.a.mainStatValue(e.mainStatKey,e.rarity,Math.max(Math.min(j.mainStatAssumptionLevel,4*e.rarity),e.level)),e.substats.forEach((function(e){return e&&e.key&&(j[e.key]=(j[e.key]||0)+e.value)})))})),Object(O.c)(j,s),u.a.parseConditionalValues({artifact:null===j||void 0===j||null===(a=j.conditionalValues)||void 0===a?void 0:a.artifact},(function(e,t,n){var a,r,s=Object(i.a)(n,3),o=s[1],l=s[2];if(!(parseInt(l)>(null!==(a=null===c||void 0===c||null===(r=c[o])||void 0===r?void 0:r.length)&&void 0!==a?a:0))){var d=u.a.resolve(e,j,t).stats;Object(O.c)(j,d)}})),j.equippedArtifacts=Object.fromEntries(Object.entries(t).map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return[n,null===a||void 0===a?void 0:a.id]}))),j.setToSlots=c;var d=Object(h.a)(j,null===j||void 0===j?void 0:j.modifiers),f=Object(b.c)(d,j),m=f.initialStats;return(0,f.formula)(m),Object(r.a)(Object(r.a)({},j),m)},m.createInitialStats=function(e,t,n,s){var o,l,j,d=e.key,b=e.bonusStats,h=void 0===b?{}:b,v=e.elementKey,m=e.level,p=e.ascension,x=e.hitMode,y=e.infusionAura,g=e.reactionMode,S=e.talent,w=e.constellation,N=e.equippedArtifacts,k=e.conditionalValues,C=void 0===k?{}:k,_=e.equippedWeapon,E=null!==(o=t._getWeapon(_))&&void 0!==o?o:Object(f.a)(n.weaponTypeKey),T=Object(O.a)(e);Object(O.c)(T,h,O.b),T.characterKey=d,T.characterLevel=m,T.characterHP=n.getBase("hp",m,p),T.characterDEF=n.getBase("def",m,p),T.characterATK=n.getBase("atk",m,p),T.characterEle=null!==(l=null!==(j=n.elementKey)&&void 0!==j?j:v)&&void 0!==l?l:"anemo",T.hitMode=x,T.infusionAura=y,T.reactionMode=g,T.conditionalValues=C,T.weaponType=n.weaponTypeKey,T.tlvl=Object.fromEntries(Object.entries(null!==S&&void 0!==S?S:{}).map((function(e){var t=Object(i.a)(e,2);return[t[0],t[1]-1]}))),T.constellation=w,T.ascension=p,T.weapon={key:E.key,refineIndex:E.refinement-1},T.equippedArtifacts=N;var K=n.getSpecializedStat(p);if(K){var A=n.getSpecializedStatVal(p);Object(O.c)(T,Object(c.a)({},K,A))}for(var W in n.getTalentStatsAll(T,T.characterEle).forEach((function(e){return Object(O.c)(T,e)})),T.tlvl){var B;T.tlvl[W]+=null!==(B=T["".concat(W,"Boost")])&&void 0!==B?B:0}var I=s.getMainStatValue(E.level,E.ascension);T.weaponATK=I;var F=s.getSubStatKey();F&&Object(O.c)(T,Object(c.a)({},F,s.getSubStatValue(E.level,E.ascension))),Object(O.c)(T,s.stats(T));C.artifact;var H=C.weapon,V=Object(a.a)(C,["artifact","weapon"]);return u.a.parseConditionalValues(Object(r.a)(Object(r.a)({},E.key&&{weapon:Object(c.a)({},E.key,null===H||void 0===H?void 0:H[E.key])}),V),(function(e,t,n){if(("character"!==n[0]||"talents"!==n[3]||n[4]===v)&&u.a.canShow(e,T)){var a=u.a.resolve(e,T,t).stats;Object(O.c)(T,a)}})),T},m.getDisplayStatKeys=function(e,t){var n=t.characterSheet,a=t.weaponSheet,c=t.artifactSheets,s=e.characterEle,o=["finalHP","finalATK","finalDEF","eleMas","critRate_","critDMG_","heal_","enerRech_","".concat(s,"_dmg_")];n.isAutoElemental||o.push("physical_dmg_");var l=Object(v.d)(b.a[s]),j=n.weaponTypeKey;l.includes("shattered_hit")||"claymore"!==j||l.push("shattered_hit");var d={},h=n.getTalent(s),O=function(t,n){return t.forEach((function(t){var a;t.formula&&(null===t||void 0===t||null===(a=t.canShow)||void 0===a?void 0:a.call(t,e))&&(d[n]||(d[n]=[]),d[n].push(t.formula.keys))}))},f=function(t,n){if(t.conditional&&u.a.canShow(t.conditional,e)){var a=u.a.resolve(t.conditional,e,null).fields;a&&O(a,n)}t.fields&&O(t.fields,n)};h&&Object.entries(h.sheets).forEach((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1].sections;"normal"!==n&&"charged"!==n&&"plunging"!==n||(n="auto"),a.forEach((function(e){return f(e,"talentKey_".concat(n))}))}));var m="weapon_".concat(e.weapon.key);return a.document&&a.document.map((function(e){return f(e,m)})),e.setToSlots&&Object.entries(e.setToSlots).map((function(e){var t=Object(i.a)(e,2);return[t[0],t[1].length]})).forEach((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1],r=c[n];r&&Object.entries(r.setEffects).forEach((function(e){var t=Object(i.a)(e,2),c=t[0],r=t[1].document;a<parseInt(c)||r&&r.map((function(e){return f(e,"artifact_".concat(n,"_").concat(c))}))}))})),Object(r.a)(Object(r.a)({basicKeys:o},d),{},{transReactions:l})}},205:function(e,t,n){"use strict";function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",(function(){return a}))},206:function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return A})),n.d(t,"c",(function(){return I}));var a=n(12),c=n(2),r=n(29),i=n(10),s=n(0),o=n(142),l=n(118),u=n(548),j=n(187),d=n(121),b=n(70),h=n(226),O=n(541),v=n(335),f=n(188),m=n(186),p=n(112),x=n(203),y=n(202),g=n(115),S=n(45),w=n(111),N=n(15),k=n(114),C=n(204),_=n(113),E=n(1);function T(e){var t=e.onSelect,n=e.weaponTypeKey,a=Object(s.useContext)(S.b),c=Object(w.a)(_.b.getAll(),[]);return Object(E.jsx)(E.Fragment,{children:a._getCharKeys().filter((function(e){var t;return!n||(null===c||void 0===c||null===(t=c[e])||void 0===t?void 0:t.weaponTypeKey)===n})).sort().map((function(e){return Object(E.jsx)(K,{characterKey:e,onSelect:t},e)}))})}function K(e){var t=e.characterKey,n=e.onSelect,a=Object(w.a)(_.b.get(t),[t]);return a?Object(E.jsx)(m.a.Item,{onClick:function(){return n(t)},children:a.nameWIthIcon}):null}function A(e){var t=e.characterSheet,n=e.onSelect,a=e.filter,r=Object(s.useState)(!1),i=Object(c.a)(r,2),u=i[0],j=i[1],d=t?Object(E.jsxs)("span",{children:[Object(E.jsx)(o.a,{src:t.thumbImg,className:"thumb-small my-n1 ml-n2",roundedCircle:!0}),Object(E.jsxs)("h6",{className:"d-inline",children:[" ",t.name," "]})]}):Object(E.jsx)("span",{children:"Select a Character"});return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(l.a,{disabled:!n,onClick:function(){return j(!0)},children:d}),Object(E.jsx)(I,{show:u,onHide:function(){return j(!1)},onSelect:n,filter:a})]})}var W={rarity:"Rarity",level:"Level",name:"Name"};function B(e,t){return t===e?"":t}function I(e){var t=e.show,n=e.onHide,f=e.onSelect,m=e.filter,p=void 0===m?function(){return!0}:m,y=Object(s.useContext)(S.b),k=Object(s.useState)((function(){return Object.keys(W)[0]})),C=Object(c.a)(k,2),T=C[0],K=C[1],A=Object(s.useReducer)(B,""),I=Object(c.a)(A,2),H=I[0],V=I[1],D=Object(s.useReducer)(B,""),M=Object(c.a)(D,2),R=M[0],z=M[1],L=Object(w.a)(_.b.getAll(),[]),q=function(e){var t,n;return null!==(t=null===(n=y._getChar(e))||void 0===n?void 0:n.level)&&void 0!==t?t:0},P=function(e){var t;return null===L||void 0===L||null===(t=L[e])||void 0===t?void 0:t.star},U=L?Object(a.a)(new Set(N.c)).filter((function(e){return p(y._getChar(e),L[e])})).filter((function(e){var t,n;return(!H||H===(null===L||void 0===L||null===(t=L[e])||void 0===t?void 0:t.elementKey))&&(!R||R===(null===L||void 0===L||null===(n=L[e])||void 0===n?void 0:n.weaponTypeKey))})).sort((function(e,t){if("name"===T)return e<t?-1:e>t?1:0;if("level"===T){var n=q(t)-q(e);return n||P(t)-P(e)}var a=P(t)-P(e);return a||q(t)-q(e)})):[];return L?Object(E.jsx)(u.a,{show:t,size:"xl",contentClassName:"bg-transparent",onHide:n,children:Object(E.jsxs)(j.a,{bg:"lightcontent",text:"lightfont",children:[Object(E.jsx)(j.a.Header,{children:Object(E.jsxs)(d.a,{children:[Object(E.jsx)(b.a,{xs:"auto",children:Object(E.jsx)(h.a,{children:N.d.map((function(e){return Object(E.jsx)(l.a,{variant:H&&H!==e?"secondary":e,className:"py-1 px-2 text-white",onClick:function(){return V(e)},children:Object(E.jsx)("h3",{className:"mb-0",children:g.b[e]})},e)}))})}),Object(E.jsx)(b.a,{children:Object(E.jsx)(h.a,{children:N.j.map((function(e){var t;return Object(E.jsx)(l.a,{variant:R&&R!==e?"secondary":"success",className:"py-1 px-2",onClick:function(){return z(e)},children:Object(E.jsx)("h3",{className:"mb-0",children:Object(E.jsx)(o.a,{src:null===(t=x.a.weaponTypes)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(E.jsxs)(b.a,{xs:"auto",children:[Object(E.jsx)("span",{children:"Sort by: "}),Object(E.jsx)(O.a,{type:"radio",name:"level",value:T,onChange:K,children:Object.entries(W).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(E.jsx)(v.a,{value:n,variant:T===n?"success":"primary",children:Object(E.jsx)("h6",{className:"mb-0",children:a})},n)}))})]}),Object(E.jsx)(b.a,{xs:"auto",children:Object(E.jsx)(l.a,{onClick:n,variant:"danger",children:Object(E.jsx)(i.a,{icon:r.D})})})]})}),Object(E.jsx)(j.a.Body,{children:Object(E.jsx)(d.a,{children:U.map((function(e){return Object(E.jsx)(F,{characterKey:e,onClick:function(){n(),null===f||void 0===f||f(e)}},e)}))})})]})}):null}function F(e){var t,n=e.onClick,a=e.characterKey,c=Object(s.useContext)(S.b),r=c._getChar(a),i=Object(w.a)(_.b.get(a),[a]),u=(null===r||void 0===r?void 0:r.equippedWeapon)?c._getWeapon(r.equippedWeapon):void 0,j=Object(w.a)(u?k.a.get(u.key):void 0,[null===u||void 0===u?void 0:u.key]),h=Object(w.a)(p.a.getAll(),[]),O=Object(s.useMemo)((function(){return r&&i&&j&&h&&C.a.calculateBuild(r,c,i,j,h)}),[r,i,j,h,c]);return i?Object(E.jsx)(b.a,{lg:3,md:4,className:"mb-2",children:Object(E.jsxs)(l.a,{className:"w-100",variant:"darkcontent",onClick:n,children:[Object(E.jsx)("h5",{children:i.name}),Object(E.jsxs)(d.a,{children:[Object(E.jsx)(b.a,{xs:"auto",className:"pr-0",children:Object(E.jsx)(o.a,{src:i.thumbImg,className:"thumb-big grad-".concat(i.star,"star p-0"),thumbnail:!0})}),Object(E.jsxs)(b.a,{children:[O&&r?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("h5",{className:"mb-0",children:["Lv. ",C.a.getLevelString(r)," ","C".concat(r.constellation)]}),Object(E.jsxs)("h6",{className:"mb-0",children:[Object(E.jsx)(f.a,{variant:"secondary",children:Object(E.jsx)("strong",{className:"mx-1",children:O.tlvl.auto+1})})," ",Object(E.jsx)(f.a,{variant:"secondary",children:Object(E.jsx)("strong",{className:"mx-1",children:O.tlvl.skill+1})})," ",Object(E.jsx)(f.a,{variant:"secondary",children:Object(E.jsx)("strong",{className:"mx-1",children:O.tlvl.burst+1})})]})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("h4",{children:Object(E.jsx)(f.a,{variant:"primary",children:"NEW"})})}),Object(E.jsx)("h6",{className:"mb-0",children:Object(E.jsx)(y.a,{stars:i.star,colored:!0})}),Object(E.jsxs)("h3",{className:"mb-0",children:[i.elementKey&&g.a[i.elementKey]," ",Object(E.jsx)(o.a,{src:null===(t=x.a.weaponTypes)||void 0===t?void 0:t[i.weaponTypeKey],className:"inline-icon"})]})]})]})]})},a):null}},210:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(2),c=n(12),r=n(69),i=n(40);function s(e){var t=new Set;return e(new Proxy({},{get:function(e,n,a){t.add(n.toString())}})),Object(c.a)(t)}var o=Object.freeze(Object.fromEntries(Object.entries(i.b).map((function(e){var t=Object(a.a)(e,2);return[t[0],s(t[1])]}))));function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.keys(i.d),a=new Set,r=Object(c.a)(Array(i.f)).map((function(e){return new Set}));return n.forEach((function(n){return u(e,n,t,r,a)})),r.flatMap((function(e){return Object(c.a)(e)}))}function u(e,t,n,a,c){var s,l;c.has(t)||(c.add(t),null===(s=o[t])||void 0===s||s.forEach((function(t){return u(e,t,n,a,c)})),(null!==(l=n[t])&&void 0!==l?l:[]).forEach((function(t){return r.a.getCurrent(t,e)[1].forEach((function(t){return u(e,t,n,a,c)}))})),a[Object(i.e)(t)].add(t))}},220:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a,c=n(205),r=n(29),i=n(10),s=n(186),o=n(110),l=n(206),u=n(113),j=n(111),d=n(1);function b(e){var t=e.location,n=e.onEquip,b=e.weaponTypeKey,h=e.disableUnequip,O=void 0!==h&&h,v=e.disabled,f=Object(o.a)(["artifact"]).t,m=Object(j.a)(u.b.get(t),[t]),p=(null===m||void 0===m?void 0:m.name)?m.nameWIthIcon:Object(d.jsxs)("span",{children:[Object(d.jsx)(i.a,{icon:r.c})," ",f(a||(a=Object(c.a)(["filterLocation.inventory"])))]});return v?p:Object(d.jsxs)(s.a,{children:[Object(d.jsx)(s.a.Toggle,{className:"text-left",children:p}),Object(d.jsxs)(s.a.Menu,{children:[!O&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(s.a.Item,{onClick:function(){},children:[Object(d.jsx)(i.a,{icon:r.c})," Inventory"]}),Object(d.jsx)(s.a.Divider,{})]}),Object(d.jsx)(l.b,{onSelect:n,weaponTypeKey:b})]})]})}},231:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(2),c=n(29),r=n(10),i=n(0),s=n(187),o=n(142),l=n(121),u=n(70),j=n(118),d=n(203),b=n(220),h=n(202),O=n(115),v=n(45),f=n(111),m=n(33),p=n(114),x=n(1);function y(e){var t,n=e.weaponId,y=e.onEdit,g=e.onDelete,S=e.onClick,w=e.cardClassName,N=void 0===w?"":w,k=e.bg,C=void 0===k?"":k,_=e.footer,E=void 0!==_&&_,T=Object(i.useContext)(v.b),K=Object(i.useState)(void 0),A=Object(a.a)(K,2),W=A[0],B=A[1];Object(i.useEffect)((function(){return n?T.followWeapon(n,B):void 0}),[n,B,T]);var I=W,F=Object(f.a)((null===I||void 0===I?void 0:I.key)&&p.a.get(I.key),[null===I||void 0===I?void 0:I.key]);if(!I||!F)return null;var H=I.level,V=I.ascension,D=I.refinement,M=(I.id,F.weaponType),R=F.getMainStatValue(H,V).toFixed(m.b.fixedUnit("atk")),z=F.getSubStatKey(),L=F.getSubStatValue(H,V).toFixed(m.b.fixedUnit(z)),q=p.a.getLevelString(I),P=[["weaponATK",R]];return(null===F||void 0===F?void 0:F.passiveName)&&P.push([z,L]),Object(x.jsxs)(s.a,{className:N,bg:C||"darkcontent",text:"lightfont",children:[Object(x.jsxs)(s.a.Header,{children:[Object(x.jsx)(o.a,{src:null===(t=d.a.weaponTypes)||void 0===t?void 0:t[M],className:"inline-icon"})," ",Object(x.jsx)("h5",{className:"d-inline",children:F.name})]}),Object(x.jsxs)(s.a.Body,{onClick:function(){return null===S||void 0===S?void 0:S(n)},className:S?"cursor-pointer":"",children:[Object(x.jsxs)(l.a,{children:[Object(x.jsx)(u.a,{xs:"auto",className:"pr-0",children:Object(x.jsx)(o.a,{src:F.img,className:"thumb-big grad-".concat(F.rarity,"star p-0"),thumbnail:!0})}),Object(x.jsxs)(u.a,{children:[Object(x.jsxs)("h5",{className:"mb-0",children:["Level ",q," "]}),Object(x.jsxs)("h5",{children:["Refinement ",D]}),Object(x.jsx)("h6",{className:"mb-0",children:Object(x.jsx)(h.a,{stars:F.rarity,colored:!0})})]})]}),Object(x.jsx)(l.a,{children:P.map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1],r=m.b.getStatUnit(n);return Object(x.jsxs)(u.a,{xs:12,children:[Object(x.jsxs)("h6",{className:"d-inline",children:[O.a[n]," ",m.b.getStatName(n)]}),Object(x.jsx)("span",{className:"float-right",children:c+r})]},n)}))}),!1]}),E&&Object(x.jsx)(s.a.Footer,{children:Object(x.jsxs)(l.a,{children:[Object(x.jsx)(u.a,{children:Object(x.jsx)(b.a,{location:null===I||void 0===I?void 0:I.location,onEquip:function(e){return T.setWeaponLocation(n,e)},weaponTypeKey:M,disableUnequip:!!I.location})}),Object(x.jsx)(u.a,{xs:"auto",children:Object(x.jsxs)("span",{className:"float-right align-top ml-1",children:[y&&Object(x.jsx)(j.a,{variant:"primary",size:"sm",className:"mr-1",onClick:function(){return y(n)},children:Object(x.jsx)(r.a,{icon:c.l})}),g&&Object(x.jsx)(j.a,{variant:"danger",size:"sm",disabled:!!I.location,onClick:function(){return g(n)},children:Object(x.jsx)(r.a,{icon:c.G})})]})})]})})]})}},232:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return S}));var a=n(12),c=n(2),r=n(29),i=n(10),s=n(0),o=n(548),l=n(187),u=n(121),j=n(70),d=n(226),b=n(118),h=n(142),O=n(203),v=n(202),f=n(111),m=n(15),p=n(114),x=n(1);function y(e,t){return t===e?"":t}function g(e){var t=e.show,n=e.onHide,g=e.onSelect,S=e.filter,w=void 0===S?function(){return!0}:S,N=Object(f.a)(p.a.getAll(),[]),k=Object(s.useReducer)(y,""),C=Object(c.a)(k,2),_=C[0],E=C[1],T=N?Object(a.a)(new Set(m.i)).filter((function(e){return w(N[e])})).filter((function(e){var t;return!_||_===(null===N||void 0===N||null===(t=N[e])||void 0===t?void 0:t.weaponType)})).sort((function(e,t){var n,a,c,r;return(null!==(n=null===N||void 0===N||null===(a=N[t])||void 0===a?void 0:a.rarity)&&void 0!==n?n:0)-(null!==(c=null===N||void 0===N||null===(r=N[e])||void 0===r?void 0:r.rarity)&&void 0!==c?c:0)})):[];return N?Object(x.jsx)(o.a,{show:t,size:"xl",contentClassName:"bg-transparent",onHide:n,children:Object(x.jsxs)(l.a,{bg:"lightcontent",text:"lightfont",children:[Object(x.jsx)(l.a.Header,{children:Object(x.jsxs)(u.a,{children:[Object(x.jsx)(j.a,{children:Object(x.jsx)(d.a,{children:m.j.map((function(e){var t;return Object(x.jsx)(b.a,{variant:_&&_!==e?"secondary":"success",className:"py-1 px-2",onClick:function(){return E(e)},children:Object(x.jsx)("h3",{className:"mb-0",children:Object(x.jsx)(h.a,{src:null===(t=O.a.weaponTypes)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(x.jsx)(j.a,{xs:"auto",children:Object(x.jsx)(b.a,{onClick:n,variant:"danger",children:Object(x.jsx)(i.a,{icon:r.D})})})]})}),Object(x.jsx)(l.a.Body,{children:Object(x.jsx)(u.a,{children:T.map((function(e){var t,a=N[e];return Object(x.jsx)(j.a,{lg:3,md:4,className:"mb-2",children:Object(x.jsx)(b.a,{className:"w-100 h-100 align-top",variant:"darkcontent",onClick:function(){n(),g(e)},children:Object(x.jsxs)(u.a,{className:"h-100",children:[Object(x.jsx)(j.a,{xs:"auto",className:"pr-0",children:Object(x.jsx)(h.a,{src:a.img,className:"thumb-big grad-".concat(a.rarity,"star p-0"),thumbnail:!0})}),Object(x.jsxs)(j.a,{children:[Object(x.jsxs)("h5",{className:"mb-0",children:[Object(x.jsx)(h.a,{src:null===(t=O.a.weaponTypes)||void 0===t?void 0:t[a.weaponType],className:"inline-icon"})," ",a.name]}),Object(x.jsx)("h6",{className:"mb-0",children:Object(x.jsx)(v.a,{stars:a.rarity,colored:!0})})]})]})})},e)}))})})]})}):null}function S(e){var t,n=e.weaponSheet,a=e.onSelect,r=e.filter,i=Object(s.useState)(!1),o=Object(c.a)(i,2),l=o[0],u=o[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.a,{as:d.a,onClick:function(){return u(!0)},className:"text-nowrap",children:null!==(t=null===n||void 0===n?void 0:n.name)&&void 0!==t?t:"Select a Weapon"}),Object(x.jsx)(g,{show:l,onHide:function(){return u(!1)},onSelect:a,filter:r})]})}},545:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return I}));var a=n(46),c=n.n(a),r=n(57),i=n(2),s=n(29),o=n(10),l=n(103),u=n(0),j=n(189),d=n(121),b=n(70),h=n(187),O=n(226),v=n(118),f=n(142),m=n(541),p=n(335),x=n(48),y=n(203),g=n(45),S=n(34),w=n(117),N=n(111),k=n(15),C=n(231),_=n(232),E=n(114),T=n(119),K=n(1),A=Object(u.lazy)((function(){return n.e(14).then(n.bind(null,276))})),W={level:"Level",rarity:"Rarity"};function B(e,t){return t===e?"":t}function I(e){var t,n=Object(u.useContext)(g.b),a=Object(u.useState)(""),I=Object(i.a)(a,2),F=I[0],H=I[1],V=Object(u.useState)((function(){return Object.keys(W)[0]})),D=Object(i.a)(V,2),M=D[0],R=D[1],z=Object(u.useReducer)(B,""),L=Object(i.a)(z,2),q=L[0],P=L[1],U=Object(u.useState)(!1),G=Object(i.a)(U,2),J=G[0],Q=G[1],X=Object(w.a)(),Y=Object(i.a)(X,2)[1],Z=Object(u.useRef)(null);Object(u.useEffect)((function(){x.a.pageview("/weapon");var e=S.b.get("WeaponDisplay.state");if(e){var t=e.charIdToEdit,a=e.sortBy,c=e.weaponFilter;H(t),R(a),k.j.includes(c)&&P(c)}return n.followAnyWeapon(Y)}),[Y,n]);var $=null!==(t=Object(N.a)(E.a.getAll(),[]))&&void 0!==t?t:{},ee=function(e){var t,a;return null!==(t=null===(a=n._getWeapon(e))||void 0===a?void 0:a.level)&&void 0!==t?t:0},te=function(e){var t,a;return null===(t=$[null===(a=n._getWeapon(e))||void 0===a?void 0:a.key])||void 0===t?void 0:t.rarity};Object(u.useEffect)((function(){var e={charIdToEdit:F,sortBy:M,weaponFilter:q};S.b.set("WeaponDisplay.state",e)}),[F,M,q]);var ne=Object(u.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n._getWeapon(t)){e.next=3;break}return e.abrupt("return");case 3:if(r=l.a.t("weapon_".concat(a.key,"_gen:name")),window.confirm("Are you sure you want to remove ".concat(r,"?"))){e.next=6;break}return e.abrupt("return");case 6:n.removeWeapon(t),F===t&&H("");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[F,H,n]),ae=Object(u.useCallback)((function(e){H(e),setTimeout((function(){var e;null===(e=Z.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)}),[H,Z]),ce=Object(u.useCallback)((function(e){ae(n.createWeapon(Object(T.b)(e)))}),[n,ae]),re=n.weapons.keys.filter((function(e){var t,a=n._getWeapon(e);return!!a&&(!q||q===(null===(t=$[a.key])||void 0===t?void 0:t.weaponType))})).sort((function(e,t){if("level"===M){var n=ee(t)-ee(e);return n||te(t)-te(e)}var a=te(t)-te(e);return a||ee(t)-ee(e)}));return Object(K.jsxs)(j.a,{ref:Z,className:"mt-2",children:[F?Object(K.jsx)(d.a,{className:"mt-2",children:Object(K.jsx)(b.a,{children:Object(K.jsx)(A,{weaponId:F,footer:!0,onClose:function(){return H("")}})})}):null,Object(K.jsx)(h.a,{bg:"darkcontent",text:"lightfont",className:"mt-2",children:Object(K.jsx)(h.a.Body,{className:"p-2",children:Object(K.jsxs)(d.a,{children:[Object(K.jsx)(b.a,{children:Object(K.jsx)(O.a,{children:k.j.map((function(e){var t;return Object(K.jsx)(v.a,{variant:q&&q!==e?"secondary":"success",className:"py-1 px-2",onClick:function(){return P(e)},children:Object(K.jsx)("h3",{className:"mb-0",children:Object(K.jsx)(f.a,{src:null===(t=y.a.weaponTypes)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(K.jsxs)(b.a,{xs:"auto",children:[Object(K.jsx)("span",{children:"Sort by: "}),Object(K.jsx)(m.a,{type:"radio",name:"level",value:M,onChange:R,children:Object.entries(W).map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(K.jsx)(p.a,{value:n,variant:M===n?"success":"primary",children:Object(K.jsx)("h6",{className:"mb-0",children:a})},n)}))})]})]})})}),Object(K.jsxs)(d.a,{className:"mt-2",children:[!F&&Object(K.jsx)(b.a,{lg:4,md:6,className:"mb-2",children:Object(K.jsxs)(h.a,{className:"h-100",bg:"darkcontent",text:"lightfont",children:[Object(K.jsx)(h.a.Header,{className:"pr-2",children:Object(K.jsx)("span",{children:"Add New Weapon"})}),Object(K.jsx)(h.a.Body,{className:"d-flex flex-column justify-content-center",children:Object(K.jsx)(d.a,{className:"d-flex flex-row justify-content-center",children:Object(K.jsxs)(b.a,{xs:"auto",children:[Object(K.jsx)(v.a,{onClick:function(){return Q(!0)},children:Object(K.jsx)("h1",{children:Object(K.jsx)(o.a,{icon:s.w,className:"fa-fw"})})}),Object(K.jsx)(_.b,{show:J,onHide:function(){return Q(!1)},onSelect:ce})]})})})]})}),re.map((function(e){return Object(K.jsx)(b.a,{lg:4,md:6,className:"mb-2",children:Object(K.jsx)(C.a,{weaponId:e,cardClassName:"h-100",onDelete:ne,onEdit:ae,onClick:ae,footer:!0})},e)}))]})]})}}}]);
//# sourceMappingURL=13.def87aed.chunk.js.map