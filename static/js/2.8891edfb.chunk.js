(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[2],{164:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var c=a(24),n=a(29),s=a(0),i=a(142),l=a(111),r=a(147),j=a(50),d=a(48),o=a(130),b=a(155),u=a(117),h=a(66),x=a(116),O=a(109),m=a(145),f=a(129),v=a(15),p=a(47),g=a(137),y=a(58),N=a(165),S=a(1);function k(e){var t,a,k=e.artifactId,K=e.artifactObj,C=e.onEdit,B=e.onDelete,w=e.assumeFull,I=void 0!==w&&w,T=Object(g.a)();Object(s.useEffect)((function(){var e;return null===(e=y.a.getDataImport())||void 0===e||e.then(T),k&&v.a.registerArtListener(k,T),function(){return k&&v.a.unregisterArtListener(k,T)}}),[k,T]);var _=Object(s.useCallback)((function(e){return y.a.equipArtifactOnChar(k,e)}),[k]);if(!k&&!K)return null;var V=!K,E=K||v.a.get(k);if(!E)return null;E.maximumEfficiency||y.a.substatsValidation(E);var D=E.setKey,A=E.slotKey,F=E.numStars,W=void 0===F?0:F,z=E.level,q=void 0===z?0:z,L=E.mainStatKey,M=E.substats,U=void 0===M?[]:M,P=E.location,R=void 0===P?"":P,H=E.lock,G=E.currentEfficiency,X=void 0===G?0:G,J=E.maximumEfficiency,Q=void 0===J?0:J,Y=I?4*W:q,Z=I&&q!==4*W,$=Object(S.jsxs)("span",{className:Z?"text-orange":"",children:[y.a.getMainStatValue(L,W,Y,""),p.a.getStatUnit(L)]}),ee=U.every((function(e){var t;return!e.key||e.key&&e.value&&(null===e||void 0===e||null===(t=e.rolls)||void 0===t?void 0:t.length)}));return Object(S.jsxs)(j.a,{className:"h-100",border:"".concat(W,"star"),bg:"lightcontent",text:"lightfont",children:[Object(S.jsx)(j.a.Header,{className:"p-0",children:Object(S.jsxs)(h.a,{children:[Object(S.jsx)(d.a,{xs:2,md:3,children:Object(S.jsx)(b.a,{src:y.a.getPieceIcon(D,A),className:"w-100 h-auto grad-".concat(W,"star m-1"),thumbnail:!0})}),Object(S.jsxs)(d.a,{className:"pt-3",children:[Object(S.jsx)("h6",{children:Object(S.jsx)("b",{children:y.a.getPieceName(D,A,"Unknown Piece Name")})}),Object(S.jsxs)("div",{children:[y.a.getSlotNameWithIcon(A)," +".concat(q)]})]})]})}),Object(S.jsxs)(j.a.Body,{className:"d-flex flex-column py-2",children:[Object(S.jsxs)(j.a.Title,{children:[Object(S.jsx)("div",{children:y.a.getSetName(D,"Artifact Set")}),Object(S.jsx)("small",{className:"text-halfsize",children:Object(S.jsx)(f.a,{stars:W})})]}),Object(S.jsx)("h5",{className:"mb-1",children:Object(S.jsxs)("b",{children:[p.a.getStatName(L)," ",$]})}),Object(S.jsx)(h.a,{className:"mb-0",children:U.map((function(e,t){var a;if(!e||!e.value)return null;var c=(null===e||void 0===e||null===(a=e.rolls)||void 0===a?void 0:a.length)||0,n=(null===e||void 0===e?void 0:e.efficiency)||0,s=.3+.7*n,l=p.a.getStatName(e.key);return Object(S.jsxs)(d.a,{xs:12,children:[Object(S.jsx)(i.a,{variant:c?"".concat(c,"roll"):"danger",className:"text-darkcontent",children:Object(S.jsx)("b",{children:c||"?"})})," ",Object(S.jsxs)("span",{className:"text-".concat(c,"roll"),children:[l,"+".concat(p.a.getStatUnit(e.key)?e.value.toFixed(1):e.value).concat(p.a.getStatUnit(e.key))]}),Object(S.jsxs)("span",{className:"float-right",style:{opacity:s},children:[n.toFixed(1),"%"]})]},t)}))}),Object(S.jsxs)(h.a,{className:"mt-auto",children:[Object(S.jsxs)(d.a,{children:["Current SS Eff.: ",Object(S.jsx)(N.a,{percent:X,valid:ee,className:"float-right",children:null!==(t=null===X||void 0===X?void 0:X.toFixed(2))&&void 0!==t?t:X+"%"})]}),X!==Q&&Object(S.jsxs)(d.a,{className:"text-right",children:["Max SS Eff.: ",Object(S.jsx)(N.a,{percent:Q,valid:ee,children:null!==(a=null===Q||void 0===Q?void 0:Q.toFixed(2))&&void 0!==a?a:Q+"%"})]})]})]}),Object(S.jsx)(j.a.Footer,{className:"pr-3",children:Object(S.jsxs)(h.a,{className:"d-flex justify-content-between no-gutters",children:[V?Object(S.jsx)(d.a,{xs:"auto",children:Object(S.jsxs)(o.a,{children:[Object(S.jsx)(o.a.Toggle,{size:"sm",className:"text-left",children:O.a.getName(R,"Inventory")}),Object(S.jsxs)(o.a.Menu,{children:[Object(S.jsx)(o.a.Item,{onClick:function(){return _("")},children:"Inventory"}),Object(S.jsx)(o.a.Divider,{}),Object(S.jsx)(m.a,{onSelect:function(e){return _(e)}})]})]})}):Object(S.jsx)(d.a,{xs:"auto",children:Object(S.jsx)("b",{children:O.a.getName(R,"Inventory")})}),Object(S.jsx)(d.a,{xs:"auto",children:Object(S.jsxs)(r.a,{children:[V?Object(S.jsx)(u.a,{placement:"top",overlay:Object(S.jsx)(x.a,{children:"Locking a artifact will prevent the build generator from picking it for builds. Artifacts on characters are locked by default."}),children:Object(S.jsx)("span",{className:"d-inline-block",children:Object(S.jsx)(l.a,{size:"sm",disabled:R,style:R?{pointerEvents:"none"}:{},onClick:function(){E.lock=!H,v.a.update(E)},children:Object(S.jsx)(n.a,{icon:H||R?c.o:c.p,className:"fa-fw"})})})}):null,Boolean(C)&&Object(S.jsx)(l.a,{variant:"info",size:"sm",onClick:C,children:Object(S.jsx)(n.a,{icon:c.h,className:"fa-fw"})}),Boolean(B)&&Object(S.jsx)(l.a,{variant:"danger",size:"sm",onClick:B,children:Object(S.jsx)(n.a,{icon:c.E,className:"fa-fw"})})]})})]})})]})}},165:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var c=a(142),n=a(1);function s(e){var t=e.percent,a=e.valid,s=e.children,i=a?isNaN(t)?"secondary":"".concat(Math.floor(.05*t)+1,"roll"):"danger";return Object(n.jsx)(c.a,{variant:i,className:"secondary"===i?"":"text-darkcontent",children:s})}},169:function(e,t,a){"use strict";var c=a(117),n=a(116),s=a(1);t.a=function(e){var t=e.children;return Object(s.jsx)(c.a,{overlay:Object(s.jsx)(n.a,{children:"Work In Progress"}),children:Object(s.jsx)("span",{children:t})})}},179:function(e,t,a){"use strict";a.r(t),a.d(t,"compareAgainstEquippedContext",(function(){return be})),a.d(t,"default",(function(){return Oe}));var c=a(2),n=a(12),s=a(24),i=a(29),l=a(0),r=a.n(l),j=a(155),d=a(147),o=a(130),b=a(237),u=a(180),h=a(19),x=a(142),O=a(111),m=a(50),f=a(48),v=a(171),p=a(66),g=a(58),y=a(169),N=a(132),S=a(3),k=a(122),K=a(109),C=a(14),B=a(230),w=a(11),I=a(164),T=a(154),_=a(47),V=a(57),E=a(161),D=a(1);var A=function(e){var t,a=e.character,n=e.character,s=n.characterKey,i=n.artifactConditionals,r=e.equippedBuild,j=e.newBuild,d=e.editable,o=e.characterDispatch,b=e.artifacts,u=Object(w.g)(),h=j||r,v=j?null===(t=j.finalStats)||void 0===t?void 0:t.artifactsAssumeFull:a.artifactsAssumeFull;j&&(i=j.artifactConditionals);var y=K.a.getDisplayStatKeys(h.finalStats),N=Object(l.useCallback)((function(e){return u.push({pathname:"/artifact",artToEditId:e})}),[u]);return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(p.a,{children:Object(D.jsx)(f.a,{className:"mb-2",children:Object(D.jsxs)(m.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(D.jsx)(m.a.Body,{children:Object(D.jsx)(E.a,{character:a,equippedBuild:r,newBuild:j,statsDisplayKeys:y,editable:d})}),j?Object(D.jsxs)(m.a.Footer,{children:[Object(D.jsx)(O.a,{onClick:function(){window.confirm("Do you want to equip this artifact build to this character?")&&(K.a.equipArtifacts(s,j.artifactIds),null===o||void 0===o||o({type:"fromDB"}))},children:"Equip all artifacts to current character"}),v&&Object(D.jsx)(B.a,{className:"float-right text-right mb-0 py-2",variant:"orange",children:Object(D.jsx)("b",{children:"Assume Main Stats are Fully Leveled"})})]}):d&&Object(D.jsxs)(m.a.Footer,{children:[Object(D.jsx)(O.a,{onClick:function(){window.confirm("Do you want to move all the artifacts equipped to inventory?")&&(K.a.equipArtifacts(s,Object.fromEntries(g.a.getSlotKeys().map((function(e){return[e,""]})))),null===o||void 0===o||o({type:"fromDB"}))},children:"Unequip all artifacts"}),v&&Object(D.jsx)(B.a,{className:"float-right text-right mb-0 py-2",variant:"orange",children:Object(D.jsx)("b",{children:"Assume Main Stats are Fully Leveled"})})]})]})})}),Object(D.jsx)(p.a,{className:"mb-n2",children:Object(D.jsx)(f.a,{children:Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{sm:6,lg:4,className:"mb-2",children:Object(D.jsxs)(m.a,{className:"h-100 d-flex flex-column",bg:"lightcontent",text:"lightfont",children:[Object(D.jsx)(m.a.Header,{children:"Artifact Set Effects"}),Object(D.jsx)(m.a.Body,{className:"flex-grow-1",children:Object(D.jsx)(p.a,{children:Object.entries(g.a.getSetEffects(h.setToSlots)).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(D.jsxs)(f.a,{xs:12,className:"mb-2",children:[Object(D.jsx)("h5",{children:g.a.getSetName(a)}),Object(D.jsx)(p.a,{children:n.map((function(e){var t=g.a.getArtifactSetNumStats(a,e),n=0,s=g.a.getSetEffectConditional(a,e);s&&(n=V.a.getConditionalNum(i,{srcKey:a,srcKey2:e}),Object.entries(g.a.getConditionalStats(a,e,n)).forEach((function(e){var a=Object(c.a)(e,2),n=a[0],s=a[1];return t[n]=(t[n]||0)+s})));var l=Object(D.jsx)(T.a,{disabled:!!j,conditional:s,conditionalNum:n,setConditional:function(t){return function(e,t,a){return null===o||void 0===o?void 0:o({artifactConditionals:V.a.setConditional(i,{srcKey:e,srcKey2:t},a)})}(a,e,t)},defEle:Object(D.jsxs)(x.a,{variant:"success",children:[e,"-Set"]})});return Object(D.jsxs)(f.a,{xs:12,className:"mb-2",children:[Object(D.jsxs)("h6",{children:[l," ",g.a.getSetEffectText(a,e,h.finalStats)]}),t?Object(D.jsx)(p.a,{children:Object.entries(t).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(D.jsxs)(f.a,{xs:12,children:[_.a.getStatName(a),": ",n,_.a.getStatUnit(a)]},a)}))}):null]},e)}))})]},a)}))})})]})}),b?g.a.getSlotKeys().map((function(e){var t=b.find((function(t){return t.slotKey===e}));return t?Object(D.jsx)(f.a,{sm:6,lg:4,className:"mb-2",children:Object(D.jsx)(I.a,{artifactObj:t})},e):null})):g.a.getSlotKeys().map((function(e){return h.artifactIds[e]?Object(D.jsx)(f.a,{sm:6,lg:4,className:"mb-2",children:Object(D.jsx)(I.a,{artifactId:h.artifactIds[e],assumeFull:v,onEdit:function(){return N(h.artifactIds[e])}})},h.artifactIds[e]):null}))]})})})]})},F=a(61),W=a(31),z=a(167),q=a(117),L=a(116),M=a(128),U=a(127),P=a(129),R=a(149),H=a(138),G=a(136),X=a(148);function J(e){var t,a=e.editable,n=e.character,r=e.character,d=r.characterKey,o=r.constellation,b=e.characterDispatch,u=e.equippedBuild,h=e.newBuild,x=Object(l.useState)(!1),v=Object(c.a)(x,2),g=v[0],y=v[1],N=K.a.getElementalKey(d),k=K.a.getWeaponTypeKey(d),C=K.a.getStatValueWithOverride(n,"characterLevel");return Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{xs:12,md:3,children:Object(D.jsxs)(m.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(D.jsx)(m.a.Img,{src:K.a.getCard(d),className:"w-100 h-auto"}),Object(D.jsx)(m.a.Body,{children:Object(D.jsxs)(p.a,{children:[Object(D.jsxs)(f.a,{xs:12,children:[Object(D.jsxs)("h3",{children:[K.a.getName(d)," ",Object(D.jsx)(j.a,{src:M.a.elements[N],className:"inline-icon"})," ",Object(D.jsx)(j.a,{src:null===(t=M.a.weaponTypes)||void 0===t?void 0:t[k],className:"inline-icon"})]}),Object(D.jsx)("h6",{children:Object(D.jsx)(P.a,{stars:K.a.getStar(d),colored:!0})})]}),Object(D.jsx)(f.a,{children:g?Object(D.jsx)(p.a,{children:Object(D.jsx)(f.a,{children:Object(D.jsxs)(z.a,{children:[Object(D.jsx)(z.a.Prepend,{children:Object(D.jsx)(z.a.Text,{children:"Lvl."})}),Object(D.jsx)(U.a,{onChange:function(e){return b({type:"statOverride",statKey:"characterLevel",value:Object(S.a)(e,1,90)})},value:C}),Object(D.jsx)(z.a.Append,{children:Object(D.jsx)(O.a,{children:Object(D.jsx)(i.a,{icon:s.F,size:"sm",onClick:function(){return b({type:"statOverride",statKey:"characterLevel",value:K.a.getLevel(n.levelKey)})}})})}),Object(D.jsx)(z.a.Append,{children:Object(D.jsx)(q.a,{placement:"bottom",overlay:Object(D.jsx)(L.a,{children:"Override the level value for calculations. Does not change Stats."}),children:Object(D.jsx)(O.a,{variant:"success",onClick:function(){return y(!g)},size:"sm",children:Object(D.jsx)("span",{children:Object(D.jsx)(i.a,{icon:s.u})})})})})]})})}):Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{children:Object(D.jsxs)("h5",{children:["Level: ",C]})}),a?Object(D.jsx)(f.a,{xs:"auto",className:"pr-1 pl-1",children:Object(D.jsx)(O.a,{variant:"info",onClick:function(){return y(!g)},size:"sm",children:Object(D.jsx)("span",{children:Object(D.jsx)(i.a,{icon:s.h})})})}):null]})}),Object(D.jsx)(f.a,{xs:12,children:Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{xs:12,children:Object(D.jsx)("h5",{children:K.a.getConstellationName(d)})}),Object(D.jsx)(f.a,{children:Object(D.jsx)(p.a,{className:"px-2",children:Object(W.a)(Array(6).keys()).map((function(e){return Object(D.jsx)(f.a,{xs:4,className:"p-1",children:Object(D.jsx)(j.a,{src:K.a.getConstellationImg(d,e),className:"w-100 h-auto ".concat(o>e?"":"overlay-dark"," cursor-pointer"),roundedCircle:!0,onClick:function(){return a&&b({constellation:e+1===o?e:e+1})}})},e)}))})})]})})]})})]})}),Object(D.jsxs)(f.a,{xs:12,md:9,children:[Object(D.jsx)(Z,{editable:a,character:n,characterDispatch:b,equippedBuild:u,newBuild:h}),Object(D.jsx)($,{editable:a,character:n,characterDispatch:b,equippedBuild:u,newBuild:h})]})]})}function Q(e){var t,a=e.statKey,c=e.val;return a?Object(D.jsxs)(f.a,{xs:12,lg:6,className:"px-3",children:[Object(D.jsx)("span",{children:Object(D.jsxs)("b",{children:[Object(H.a)(a)," ",_.a.getStatName(a)]})}),Object(D.jsxs)("span",{className:"float-right text-right text-".concat(_.a.getStatVariant(a)),children:[(null===c||void 0===c||null===(t=c.toFixed)||void 0===t?void 0:t.call(c,_.a.fixedUnit(a)))||c,_.a.getStatUnit(a)]})]}):null}function Y(e){var t=e.title,a=e.stats,n=void 0===a?{}:a,s=e.finalStats,i=void 0===s?{}:s;return 0===Object.keys(null!==n&&void 0!==n?n:{}).length?null:Object(D.jsxs)(m.a,{bg:"darkcontent",text:"lightfont",className:"mb-2",children:[Object(D.jsx)(m.a.Header,{className:"py-2 px-3",children:t}),Object(D.jsx)(m.a.Body,{className:"py-2 px-0",children:Object(D.jsx)(p.a,{children:Object.entries(n).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return"modifiers"===a?Object(D.jsx)(r.a.Fragment,{children:Object.entries(null!==n&&void 0!==n?n:{}).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(D.jsx)(Q,{statKey:a,val:Object.entries(null!==n&&void 0!==n?n:{}).reduce((function(e,t){var a=Object(c.a)(t,2),n=a[0],s=a[1];return e+i[n]*s}),0)},a)}))},a):Object(D.jsx)(Q,{statKey:a,val:n},a)}))})})]})}function Z(e){var t=e.editable,a=e.character,n=e.character,d=n.characterKey,u=n.weapon,h=void 0===u?{}:u,x=e.characterDispatch,v=e.equippedBuild,g=e.newBuild,y=Object(l.useState)(!1),S=Object(c.a)(y,2),C=S[0],B=S[1],w=Object(l.useState)(!1),I=Object(c.a)(w,2),V=I[0],E=I[1],A=g||v,z=function(e,t){"key"===e&&(a.weapon.conditionalNum=0),a.weapon[e]=t,x({weapon:a.weapon})},q=k.a.getWeaponSubStatKey(h.key),L=K.a.getWeaponTypeKey(d),M=h.overrideMainVal||k.a.getWeaponMainStatVal(h.key,h.levelKey),U=h.overrideSubVal||k.a.getWeaponSubStatVal(h.key,h.levelKey),R=k.a.getWeaponPassiveName(h.key),G=k.a.getWeaponBonusStat(h.key,h.refineIndex,void 0),J=k.a.getWeaponConditionalStat(h.key,h.refineIndex,h.conditionalNum,void 0),Q=k.a.getWeaponConditional(h.key),Z=h.conditionalNum,$=Object(D.jsx)(T.a,{conditional:Q,conditionalNum:Z,setConditional:function(e){return z("conditionalNum",e)},defEle:Object(D.jsx)("span",{children:R})});return Object(D.jsxs)(m.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(D.jsx)(m.a.Header,{children:Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{children:Object(D.jsx)("span",{children:"Weapon"})}),Object(D.jsx)(f.a,{xs:"auto",children:Object(D.jsx)(O.a,{variant:"info",size:"sm",onClick:function(){return E(!V)},children:Object(D.jsxs)("span",{children:[Object(D.jsx)(i.a,{icon:s.t})," ",V?"Hide Desc.":"Show Desc."]})})}),t?Object(D.jsx)(f.a,{xs:"auto",children:Object(D.jsx)(O.a,{variant:C?"danger":"info",onClick:function(){return B(!C)},size:"sm",children:Object(D.jsxs)("span",{children:[Object(D.jsx)(i.a,{icon:C?s.u:s.h})," ",C?"EXIT":"EDIT"]})})}):null]})}),Object(D.jsxs)(m.a.Body,{children:[Object(D.jsxs)(p.a,{className:"mb-2",children:[Object(D.jsx)(f.a,{xs:12,md:3,children:Object(D.jsx)(j.a,{src:k.a.getWeaponImg(h.key),className:"w-100 h-auto grad-".concat(k.a.getWeaponRarity(h.key),"star"),thumbnail:!0})}),C?Object(D.jsx)(f.a,{children:Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{lg:"auto",xs:6,className:"mb-2 pr-0",children:Object(D.jsx)(b.a,{title:k.a.getWeaponName(h.key),children:Object(W.a)(Array(5).keys()).reverse().map((function(e){return e+1})).map((function(e,t,a){return Object(D.jsxs)(r.a.Fragment,{children:[Object(D.jsx)(o.a.ItemText,{children:Object(D.jsx)(P.a,{stars:e})},"star"+e),Object.entries(k.a.getWeaponsOfType(L)).filter((function(t){var a=Object(c.a)(t,2);a[0];return a[1].rarity===e})).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(D.jsx)(o.a.Item,{onClick:function(){return z("key",a)},children:n.name},a)})),t!==a.length-1&&Object(D.jsx)(o.a.Divider,{})]},e)}))})}),Object(D.jsx)(f.a,{lg:"auto",xs:6,className:"mb-2 pr-0",children:Object(D.jsxs)(b.a,{title:k.a.getLevelName(h.levelKey),children:[Object(D.jsx)(o.a.ItemText,{children:Object(D.jsx)("span",{children:"Select Weapon Level"})}),Object.entries(N.a).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(D.jsx)(o.a.Item,{onClick:function(){return z("levelKey",a)},children:n},a)}))]})}),R&&Object(D.jsx)(f.a,{lg:"auto",xs:6,className:"mb-2",children:Object(D.jsxs)(b.a,{title:"Refinement ".concat(h.refineIndex+1),className:"w-100",children:[Object(D.jsx)(o.a.ItemText,{children:Object(D.jsx)("span",{children:"Select Weapon Refinement"})}),Object(D.jsx)(o.a.Divider,{}),Object(W.a)(Array(5).keys()).map((function(e){return Object(D.jsx)(o.a.Item,{onClick:function(){return z("refineIndex",e)},children:"Refinement ".concat(e+1)},e)}))]})}),Object(D.jsx)(f.a,{xs:12,className:"mb-2",children:Object(D.jsx)(X.a,{name:Object(D.jsxs)("span",{children:[Object(D.jsx)(i.a,{icon:s.l,className:"mr-2"}),"ATK"]}),placeholder:"Weapon Attack",value:M,percent:!1,onValueChange:function(e){return z("overrideMainVal",e)},defaultValue:k.a.getWeaponMainStatVal(h.key,h.levelKey)})}),q&&Object(D.jsx)(f.a,{xs:12,className:"mb-2",children:Object(D.jsx)(X.a,{name:Object(D.jsxs)("span",{children:[Object(D.jsx)("span",{className:"mr-2",children:Object(H.a)(q)}),_.a.getStatName(q)]}),placeholder:"Weapon Substat",value:U,percent:"%"===_.a.getStatUnit(q),onValueChange:function(e){return z("overrideSubVal",e)},defaultValue:k.a.getWeaponSubStatVal(h.key,h.levelKey)})})]})}):Object(D.jsxs)(f.a,{children:[Object(D.jsx)(p.a,{className:"mb-2",children:Object(D.jsxs)(f.a,{children:[Object(D.jsxs)("h5",{className:"mb-0",children:[k.a.getWeaponName(h.key)," ",k.a.getLevelName(h.levelKey)," ",R&&"(Refinement ".concat(h.refineIndex+1,")")]}),Object(D.jsx)("small",{children:Object(D.jsx)(P.a,{stars:k.a.getWeaponRarity(h.key)})})]})}),Object(D.jsx)(p.a,{children:Object(D.jsx)(f.a,{children:$})}),Object(D.jsx)("p",{children:R&&k.a.getWeaponPassiveDescription(h.key,h.refineIndex,null===A||void 0===A?void 0:A.finalStats,a)}),Object(D.jsx)(Y,{title:"Main Stats",stats:Object(F.a)({atk:M},q,U),finalStats:null===A||void 0===A?void 0:A.finalStats}),Object(D.jsx)(Y,{title:"Bonus Stats",stats:G,finalStats:null===A||void 0===A?void 0:A.finalStats}),Object(D.jsx)(Y,{title:"Conditional Stats",stats:J,finalStats:null===A||void 0===A?void 0:A.finalStats})]})]}),V&&Object(D.jsx)(p.a,{children:Object(D.jsx)(f.a,{children:Object(D.jsx)("small",{children:k.a.getWeaponDescription(h.key)})})})]})]})}function $(e){var t=e.editable,a=e.character,r=e.characterDispatch,j=e.equippedBuild,d=e.newBuild,u=Object(l.useState)(!1),h=Object(c.a)(u,2),x=h[0],v=h[1],g=Object(l.useState)(!1),y=Object(c.a)(g,2),N=y[0],S=y[1],k=Object(l.useState)(!1),C=Object(c.a)(k,2),B=C[0],w=C[1],I=["eleMas","critRate_","critDMG_","enerRech_","heal_"],T=["finalHP","finalATK","finalDEF"];T.push.apply(T,I);var V=["characterHP","hp","hp_","characterATK","atk","atk_","characterDEF","def","def_"];V.push.apply(V,I);var E=[];K.a.getElementalKeys().forEach((function(e){E.push("".concat(e,"_dmg_")),E.push("".concat(e,"_res_"))})),E.push("stamina","incHeal_","powShield_");var A=["normal_dmg_","normal_critRate_","charged_dmg_","charged_critRate_","skill_dmg_","skill_critRate_","burst_dmg_","burst_critRate_","dmg_","moveSPD_","atkSPD_","weakspotDMG_"],F=K.a.getStatValueWithOverride(a,"specializedStatKey"),W=K.a.getStatValueWithOverride(a,"specializedStatVal"),q=_.a.getStatUnit(F),L="%"===_.a.getStatUnit(F),M={character:a,equippedBuild:j,newBuild:d,editable:t};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(m.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(D.jsx)(m.a.Header,{children:Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{children:Object(D.jsx)("span",{children:"Main Base Stats"})}),t?Object(D.jsx)(f.a,{xs:"auto",children:Object(D.jsx)(O.a,{variant:x?"danger":"info",onClick:function(){return v(!x)},size:"sm",children:Object(D.jsxs)("span",{children:[Object(D.jsx)(i.a,{icon:x?s.u:s.h})," ",x?"EXIT":"EDIT"]})})}):null]})}),x?Object(D.jsx)(m.a.Body,{children:Object(D.jsxs)(p.a,{className:"mb-2",children:[V.map((function(e){return Object(D.jsx)(f.a,{lg:6,xs:12,children:Object(D.jsx)(X.a,{className:"mb-2",name:Object(D.jsxs)("span",{children:[Object(H.a)(e)," ",_.a.getStatNamePretty(e)]}),placeholder:"Base ".concat(_.a.getStatName(e)),value:K.a.getStatValueWithOverride(a,e),percent:"%"===_.a.getStatUnit(e),onValueChange:function(t){return r({type:"statOverride",statKey:e,value:t})},defaultValue:K.a.getBaseStatValue(a,e)})},e)})),Object(D.jsx)(f.a,{lg:6,xs:12,children:Object(D.jsxs)(z.a,{children:[Object(D.jsxs)(b.a,{title:_.a.getStatNameWithPercent(F,"Specialized Stat"),as:z.a.Prepend,children:[Object(D.jsx)(o.a.ItemText,{children:"Select Specialized Stat "}),G.c.map((function(e){return Object(D.jsx)(o.a.Item,{onClick:function(){return r({type:"statOverride",statKey:"specializedStatKey",value:e})},children:_.a.getStatNameWithPercent(e)},e)}))]}),Object(D.jsx)(U.a,{float:L,placeholder:"Character Special Stat",value:K.a.getStatValueWithOverride(a,"specializedStatVal"),onChange:function(e){return r({type:"statOverride",statKey:"specializedStatVal",value:e})}}),Object(D.jsxs)(z.a.Append,{children:[L&&Object(D.jsx)(z.a.Text,{children:"%"}),Object(D.jsx)(O.a,{onClick:function(){r({type:"statOverride",statKey:"specializedStatKey",value:K.a.getBaseStatValue(a,"specializedStatKey")}),r({type:"statOverride",statKey:"specializedStatVal",value:K.a.getBaseStatValue(a,"specializedStatVal")})},disabled:!K.a.hasOverride(a,"specializedStatKey")&&!K.a.hasOverride(a,"specializedStatVal"),children:Object(D.jsx)(i.a,{icon:s.F})})]})]})})]})}):Object(D.jsx)(m.a.Body,{children:Object(D.jsxs)(p.a,{className:"mb-2",children:[T.map((function(e){return Object(D.jsx)(f.a,{xs:12,lg:6,children:Object(D.jsx)(R.a,Object(n.a)({statKey:e},M))},e)})),Object(D.jsxs)(f.a,{lg:6,xs:12,children:[Object(D.jsxs)("span",{children:[Object(D.jsx)("b",{children:"Specialized:"})," ",Object(D.jsx)("span",{className:K.a.hasOverride(a,"specializedStatKey")?"text-warning":"",children:_.a.getStatName(F)})]}),Object(D.jsx)("span",{className:"float-right ".concat(K.a.hasOverride(a,"specializedStatVal")?"text-warning":""),children:"".concat(W).concat(q)})]})]})})]}),Object(D.jsxs)(m.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(D.jsx)(m.a.Header,{children:Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{children:Object(D.jsx)("span",{children:"Other Stats"})}),t&&Object(D.jsx)(f.a,{xs:"auto",children:Object(D.jsx)(O.a,{variant:N?"danger":"info",onClick:function(){return S(!N)},size:"sm",children:Object(D.jsxs)("span",{children:[Object(D.jsx)(i.a,{icon:N?s.u:s.h})," ",N?"EXIT":"EDIT"]})})})]})}),N?Object(D.jsx)(m.a.Body,{children:Object(D.jsx)(p.a,{className:"mb-2",children:E.map((function(e){return Object(D.jsx)(f.a,{lg:6,xs:12,children:Object(D.jsx)(X.a,{className:"mb-2",name:Object(D.jsxs)("span",{children:[Object(H.a)(e)," ",_.a.getStatName(e)]}),placeholder:"Base ".concat(_.a.getStatNameRaw(e)),value:K.a.getStatValueWithOverride(a,e),percent:"%"===_.a.getStatUnit(e),onValueChange:function(t){return r({type:"statOverride",statKey:e,value:t})},defaultValue:K.a.getBaseStatValue(a,e)})},e)}))})}):Object(D.jsx)(m.a.Body,{children:Object(D.jsx)(p.a,{className:"mb-2",children:E.map((function(e){return Object(D.jsx)(f.a,{xs:12,lg:6,children:Object(D.jsx)(R.a,Object(n.a)({statKey:e},M))},e)}))})})]}),Object(D.jsxs)(m.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(D.jsx)(m.a.Header,{children:Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{children:Object(D.jsx)("span",{children:"Misc Stats"})}),t&&Object(D.jsx)(f.a,{xs:"auto",children:Object(D.jsx)(O.a,{variant:B?"danger":"info",onClick:function(){return w(!B)},size:"sm",children:Object(D.jsxs)("span",{children:[Object(D.jsx)(i.a,{icon:B?s.u:s.h})," ",B?"EXIT":"EDIT"]})})})]})}),B?Object(D.jsx)(m.a.Body,{children:Object(D.jsx)(p.a,{className:"mb-2",children:A.map((function(e){return Object(D.jsx)(f.a,{xl:6,xs:12,children:Object(D.jsx)(X.a,{className:"mb-2",name:Object(D.jsxs)("span",{children:[Object(H.a)(e)," ",_.a.getStatName(e)]}),placeholder:"Base ".concat(_.a.getStatNameRaw(e)),value:K.a.getStatValueWithOverride(a,e),percent:"%"===_.a.getStatUnit(e),onValueChange:function(t){return r({type:"statOverride",statKey:e,value:t})},defaultValue:K.a.getBaseStatValue(a,e)})},e)}))})}):Object(D.jsx)(m.a.Body,{children:Object(D.jsx)(p.a,{className:"mb-2",children:A.map((function(e){return Object(D.jsx)(f.a,{xs:12,lg:6,children:Object(D.jsx)(R.a,Object(n.a)({statKey:e},M))},e)}))})})]})]})}var ee=a(183),te=a(22);function ae(e){var t=e.character,a=e.character,s=a.characterKey,i=a.levelKey,l=a.constellation,r=e.editable,j=e.characterDispatch,d=e.newBuild,o=e.equippedBuild,b=K.a.getAscension(i),u=Object(n.a)(Object(n.a)({},e),{},{ascension:b});return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(p.a,{children:Object(D.jsx)(f.a,{children:Object(D.jsx)(ne,{character:t,newBuild:d,equippedBuild:o})})}),Object(D.jsxs)(p.a,{children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var t=Object(c.a)(e,2),a=t[0],s=t[1];return Object(D.jsx)(f.a,{xs:12,md:6,lg:4,className:"mb-2",children:Object(D.jsx)(je,Object(n.a)(Object(n.a)({},u),{},{talentKey:a,subtitle:s}))},a)})),K.a.getTalent(s,"sprint",!1)&&Object(D.jsx)(f.a,{xs:12,md:6,lg:4,className:"mb-2",children:Object(D.jsx)(je,Object(n.a)(Object(n.a)({},u),{},{talentKey:"sprint",subtitle:"Alternative Sprint"}))})]}),Object(D.jsx)(p.a,{children:[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var t=Object(c.a)(e,3),a=t[0],s=t[1],i=t[2],l=b>=i;return Object(D.jsx)(f.a,{style:{opacity:l?1:.5},xs:12,md:4,className:"mb-2",children:Object(D.jsx)(je,Object(n.a)(Object(n.a)({},u),{},{talentKey:a,subtitle:s}))},a)}))}),Object(D.jsx)(p.a,{children:Object(D.jsx)(f.a,{children:Object(D.jsxs)("h5",{className:"text-center",children:["Constellation Lv. ",l]})})}),Object(D.jsx)(p.a,{className:"mb-n2",children:Object(W.a)(Array(6).keys()).map((function(e){var t="constellation".concat(e+1);return Object(D.jsx)(f.a,{xs:12,md:4,className:"mb-2",style:{opacity:l>e?1:.5},children:Object(D.jsx)(je,Object(n.a)(Object(n.a)({},u),{},{talentKey:t,subtitle:"Contellation Lv. ".concat(e+1),onClickTitle:function(){return r&&j({constellation:e+1===l?e:e+1})}}))},e)}))})]})}var ce={superconduct_hit:function(e){var t,a=e.stats,c="superconduct_hit";return Object(D.jsx)(m.a,{bg:"darkcontent",text:"lightfont",children:Object(D.jsx)(m.a.Body,{className:"p-2",children:Object(D.jsxs)("span",{className:"text-superconduct",children:[_.a.getStatName(c)," ",Object(D.jsx)(j.a,{src:M.a.elements.electro,className:"inline-icon"}),"+",Object(D.jsx)(j.a,{src:M.a.elements.cryo,className:"inline-icon"})," ",null===(t=a[c])||void 0===t?void 0:t.toFixed(_.a.fixedUnit(c))]})})})},electrocharged_hit:function(e){var t,a=e.stats,c="electrocharged_hit";return Object(D.jsx)(m.a,{bg:"darkcontent",text:"lightfont",children:Object(D.jsx)(m.a.Body,{className:"p-2",children:Object(D.jsxs)("span",{className:"text-electrocharged",children:[_.a.getStatName(c)," ",Object(D.jsx)(j.a,{src:M.a.elements.electro,className:"inline-icon"}),"+",Object(D.jsx)(j.a,{src:M.a.elements.hydro,className:"inline-icon"})," ",null===(t=a[c])||void 0===t?void 0:t.toFixed(_.a.fixedUnit(c))]})})})},overloaded_hit:function(e){var t,a=e.stats,c="overloaded_hit";return Object(D.jsx)(m.a,{bg:"darkcontent",text:"lightfont",children:Object(D.jsx)(m.a.Body,{className:"p-2",children:Object(D.jsxs)("span",{className:"text-overloaded",children:[_.a.getStatName(c)," ",Object(D.jsx)(j.a,{src:M.a.elements.electro,className:"inline-icon"}),"+",Object(D.jsx)(j.a,{src:M.a.elements.pyro,className:"inline-icon"})," ",null===(t=a[c])||void 0===t?void 0:t.toFixed(_.a.fixedUnit(c))]})})})},pyro_swirl_hit:function(e){var t,a=e.stats,n=Object(l.useState)(Object.keys(se)[0]),s=Object(c.a)(n,2),i=s[0],r=s[1],j="".concat(i,"_swirl_hit");return Object(D.jsx)(m.a,{bg:"darkcontent",text:"lightfont",children:Object(D.jsxs)(m.a.Body,{className:"p-0",children:[Object(D.jsx)(b.a,{size:"sm",title:se[i],className:"d-inline-block",variant:"success",children:Object.entries(se).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(D.jsx)(o.a.Item,{onClick:function(){return r(a)},children:n},a)}))}),Object(D.jsxs)("span",{className:"text-".concat(i," p-2"),children:[" ",null===(t=a[j])||void 0===t?void 0:t.toFixed(_.a.fixedUnit(j))]})]})})},shattered_hit:function(e){var t,a=e.stats,c="shattered_hit",n=Object(D.jsx)(q.a,{placement:"top",overlay:Object(D.jsxs)(L.a,{children:["Claymores, Plunging Attacks and ",Object(D.jsx)("span",{className:"text-geo",children:"Geo DMG"})]}),children:Object(D.jsx)(i.a,{icon:s.s,className:"ml-2",style:{cursor:"help"}})});return Object(D.jsx)(m.a,{bg:"darkcontent",text:"lightfont",children:Object(D.jsx)(m.a.Body,{className:"p-2",children:Object(D.jsxs)("span",{className:"text-shattered",children:[_.a.getStatName(c)," ",Object(D.jsx)(j.a,{src:M.a.elements.hydro,className:"inline-icon"}),"+",Object(D.jsx)(j.a,{src:M.a.elements.cryo,className:"inline-icon"}),"+ ",Object(D.jsxs)("small",{className:"text-physical",children:["Heavy Attack",n," "]})," ",null===(t=a[c])||void 0===t?void 0:t.toFixed(_.a.fixedUnit(c))]})})})},crystalize_hit:function(e){var t,a=e.stats,c="crystalize_hit";return Object(D.jsx)(m.a,{bg:"darkcontent",text:"lightfont",children:Object(D.jsx)(m.a.Body,{className:"p-2",children:Object(D.jsxs)("span",{className:"text-crystalize",children:[_.a.getStatName(c)," ",Object(D.jsx)(j.a,{src:M.a.elements.electro,className:"inline-icon"}),"/",Object(D.jsx)(j.a,{src:M.a.elements.hydro,className:"inline-icon"}),"/",Object(D.jsx)(j.a,{src:M.a.elements.pyro,className:"inline-icon"}),"/",Object(D.jsx)(j.a,{src:M.a.elements.cryo,className:"inline-icon"}),"+",Object(D.jsx)(j.a,{src:M.a.elements.geo,className:"inline-icon"})," ",null===(t=a[c])||void 0===t?void 0:t.toFixed(_.a.fixedUnit(c))]})})})}};function ne(e){var t=e.character.characterKey,a=e.newBuild,c=e.equippedBuild,n=a||c,s=K.a.getElementalKey(t),i=Object(W.a)(te.a[s]||[]);return i.includes("shattered_hit")||"claymore"!==K.a.getWeaponTypeKey(t)||i.push("shattered_hit"),Object(D.jsx)(m.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:Object(D.jsx)(m.a.Body,{className:"px-3 py-2",children:Object(D.jsx)(p.a,{className:"mb-n2",children:i.map((function(e){var t=ce[e];return t?Object(D.jsx)(f.a,{xs:"auto",className:"mb-2",children:Object(D.jsx)(t,{stats:null===n||void 0===n?void 0:n.finalStats})},e):null}))})})})}var se={pyro:Object(D.jsxs)("span",{children:[_.a.getStatName("pyro_swirl_hit")," ",Object(D.jsx)(j.a,{src:M.a.elements.pyro,className:"inline-icon"}),"+",Object(D.jsx)(j.a,{src:M.a.elements.anemo,className:"inline-icon"})]}),electro:Object(D.jsxs)("span",{children:[_.a.getStatName("electro_swirl_hit")," ",Object(D.jsx)(j.a,{src:M.a.elements.electro,className:"inline-icon"}),"+",Object(D.jsx)(j.a,{src:M.a.elements.anemo,className:"inline-icon"})]}),cryo:Object(D.jsxs)("span",{children:[_.a.getStatName("cryo_swirl_hit")," ",Object(D.jsx)(j.a,{src:M.a.elements.cryo,className:"inline-icon"}),"+",Object(D.jsx)(j.a,{src:M.a.elements.anemo,className:"inline-icon"})]}),hydro:Object(D.jsxs)("span",{children:[_.a.getStatName("hydro_swirl_hit")," ",Object(D.jsx)(j.a,{src:M.a.elements.hydro,className:"inline-icon"}),"+",Object(D.jsx)(j.a,{src:M.a.elements.anemo,className:"inline-icon"})]})};function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).map((function(e){var a=Object(c.a)(e,2),n=a[0],s=a[1];return{text:_.a.getStatName(n),variant:_.a.getStatVariant(n),value:Object.entries(null!==s&&void 0!==s?s:{}).reduce((function(e,a){var n=Object(c.a)(a,2),s=n[0],i=n[1];return e+t[s]*i}),0),formulaText:Object(D.jsx)("span",{children:Object.entries(null!==s&&void 0!==s?s:{}).map((function(e,a){var n,s,i=Object(c.a)(e,2),l=i[0],r=i[1];return Object(D.jsxs)("span",{children:[0!==a?" + ":"",_.a.printStat(l,t)," * ",null!==(n=null===r||void 0===r||null===(s=r.toFixed)||void 0===s?void 0:s.call(r,3))&&void 0!==n?n:r]},a)}))}),fixed:_.a.fixedUnit(n),unit:_.a.getStatUnit(n)}}))}function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).map((function(e){var a=Object(c.a)(e,2),n=a[0],s=a[1];return"modifiers"===n?ie(s,t):{text:_.a.getStatName(n),variant:_.a.getStatVariant(n),value:s,fixed:_.a.fixedUnit(n),unit:_.a.getStatUnit(n)}})).flat()}var re=[1,1,2,4,6,8,10];function je(e){var t=e.character,a=e.character,c=a.characterKey,n=a.constellation,s=a.talentLevelKeys,i=void 0===s?{}:s,l=a.autoInfused,r=void 0!==l&&l,d=e.characterDispatch,u=e.talentKey,h=e.subtitle,x=e.ascension,v=e.equippedBuild,g=e.newBuild,y=e.editable,N=e.onClickTitle,S=g||v,k=null,C=null;if("auto"===u&&K.a.isAutoInfusable(c)){var B=K.a.getElementalKey(c);C=Object(D.jsx)(f.a,{xs:"auto",children:Object(D.jsx)(O.a,{variant:r?B:"secondary",className:"text-white",disabled:!y,onClick:function(){return y&&d({autoInfused:!t.autoInfused})},size:y?null:"sm",children:r?Object(D.jsxs)("span",{children:["Infused with ",Object(D.jsx)("b",{children:K.a.getElementalName(B)})]}):"Not Infused"})})}var w=0;if(u in i){var I=i[u],_=K.a.getTalentLevelBoost(c,u,n);if(w=I+_,y){k=Object(D.jsx)(m.a.Header,{children:Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{xs:"auto",children:Object(D.jsx)(b.a,{title:"Talent Lv. ".concat(w+1),children:Object(W.a)(Array(re[x]+("auto"===u?1:0)).keys()).map((function(e){return Object(D.jsxs)(o.a.Item,{onClick:function(){return t=e,i[u]=t,void d({talentLevelKeys:i});var t},children:["Talent Lv. ",e+_+1]},e)}))})}),C]})})}else k=Object(D.jsx)(m.a.Header,{children:Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{xs:"auto",children:"Talent Level: ".concat(w+1)}),Object(D.jsx)(f.a,{xs:"auto",children:C})]})})}var E=K.a.getTalentStats(c,u,S.finalStats),A=E&&Object(D.jsx)(p.a,{children:Object(D.jsx)(f.a,{children:Object(D.jsx)(m.a,{bg:"darkcontent",text:"lightfont",className:"mt-2 ml-n2 mr-n2",children:Object(D.jsx)(ee.a,{className:"text-white",variant:"flush",children:le(E,null===S||void 0===S?void 0:S.finalStats).map((function(e,t){return Object(D.jsx)(de,{index:t,field:e,equippedBuild:v,newBuild:g},t)}))})})})});return Object(D.jsxs)(m.a,{bg:"lightcontent",text:"lightfont",className:"h-100",children:[k,Object(D.jsxs)(m.a.Body,{children:[Object(D.jsxs)(p.a,{className:"d-flex flex-row mb-2 ".concat(y&&N?"cursor-pointer":""),onClick:N,children:[Object(D.jsx)(f.a,{xs:"auto",className:"flex-shrink-1 d-flex flex-column",children:Object(D.jsx)(j.a,{src:K.a.getTalentImg(c,u),className:"thumb-mid"})}),Object(D.jsxs)(f.a,{className:"flex-grow-1",children:[Object(D.jsx)(m.a.Title,{children:K.a.getTalentName(c,u)}),Object(D.jsx)(m.a.Subtitle,{children:h})]})]}),K.a.getTalentDocument(c,u).map((function(e,a){var c,n;if("function"===typeof e&&(e=e(S.finalStats)),!e)return null;var s=e.text;"function"===typeof s&&(s=s(S.finalStats));var i=null!==(c=e.fields)&&void 0!==c?c:[],l=e.conditional;"function"===typeof l&&(l=l(S.finalStats));var r=null;if(l){var j=V.a.getConditionalNum(t.talentConditionals,{srcKey:u,srcKey2:l.conditionalKey}),o=[];if(j){var b=K.a.getTalentConditionalStats(l,j,{});o=[].concat(Object(W.a)(K.a.getTalentConditionalFields(l,j,[])),Object(W.a)(le(b,null===S||void 0===S?void 0:S.finalStats)))}r=Object(D.jsx)(f.a,{xs:12,children:Object(D.jsxs)(m.a,{bg:"darkcontent",text:"lightfont",className:"mb-2",children:[Object(D.jsx)(m.a.Header,{children:Object(D.jsx)(T.a,{disabled:!y,conditional:l,conditionalNum:j,setConditional:function(e){return d({talentConditionals:V.a.setConditional(t.talentConditionals,{srcKey:u,srcKey2:l.conditionalKey},e)})},defEle:Object(D.jsx)("span",{children:l.condition})})}),Object(D.jsx)(ee.a,{className:"text-white",variant:"flush",children:o.map((function(e,t){return Object(D.jsx)(de,{index:t,field:e,equippedBuild:v,newBuild:g},t)}))})]})})}return Object(D.jsxs)(p.a,{className:"mt-2 mb-n2",children:[Object(D.jsxs)(f.a,{xs:12,children:[Object(D.jsx)("div",{className:"mb-2",children:s}),i.length>0&&Object(D.jsx)(ee.a,{className:"text-white mb-2",children:null===i||void 0===i||null===(n=i.map)||void 0===n?void 0:n.call(i,(function(e,t){return Object(D.jsx)(de,{index:t,field:e,equippedBuild:v,newBuild:g},t)}))})]}),r]},"section"+a)})),A]})]})}function de(e){var t,a,c,n,r,j=e.field,d=e.index,o=e.equippedBuild,b=e.newBuild,u=Object(l.useContext)(be),h=b||o;if("function"===typeof j&&(j=j(h.finalStats)),!j)return null;var x=K.a.getTalentFieldValue(j,"text",h.finalStats),O=K.a.getTalentFieldValue(j,"variant",h.finalStats),m=K.a.getTalentFieldValue(j,"formulaText",h.finalStats),f=m?Object(D.jsx)(q.a,{placement:"top",overlay:Object(D.jsx)(L.a,{children:m}),children:Object(D.jsx)(i.a,{icon:s.s,className:"ml-2",style:{cursor:"help"}})}):null,v=null;j.value?v=K.a.getTalentFieldValue(j,"value",h.finalStats):j.formula&&(v=null===(t=K.a.getTalentFieldValue(j,"formula",h.finalStats))||void 0===t||null===(a=t[0])||void 0===a?void 0:a.call(t,h.finalStats));var p=j.fixed||0,g=K.a.getTalentFieldValue(j,"unit",h.finalStats);if(u&&o&&"number"===typeof v){var y,N,S,k,C,B,w,I,T,_,V=j.value?j.value:null===(y=(N=j).formula)||void 0===y||null===(S=y.call(N,o.finalStats))||void 0===S||null===(k=S[0])||void 0===k?void 0:k.call(S,o.finalStats);"function"===typeof V&&(V=parseInt(null===(C=V)||void 0===C||null===(B=C(o.finalStats))||void 0===B||null===(w=B.toFixed)||void 0===w?void 0:w.call(B,p)));var E=v-V;v=Object(D.jsxs)("span",{children:[null!==(I=null===(T=V)||void 0===T?void 0:T.toFixed(p))&&void 0!==I?I:V,E?Object(D.jsxs)("span",{className:E>0?"text-success":"text-danger",children:[" (",E>0?"+":"",(null===E||void 0===E||null===(_=E.toFixed)||void 0===_?void 0:_.call(E,p))||E,")"]}):""]})}return Object(D.jsx)(ee.a.Item,{variant:d%2?"customdark":"customdarker",className:"p-2",children:Object(D.jsxs)("div",{children:[Object(D.jsxs)("span",{children:[Object(D.jsx)("b",{children:x}),f]}),Object(D.jsxs)("span",{className:"float-right text-right text-".concat(O),children:[null!==(c=null===(n=v)||void 0===n||null===(r=n.toFixed)||void 0===r?void 0:r.call(n,p))&&void 0!==c?c:v,g]})]})})}var oe=a(160),be=Object(l.createContext)(),ue=r.a.forwardRef((function(e,t){var a=e.children,c=e.style,n=e.className,s=e["aria-labelledby"];return Object(D.jsx)("div",{ref:t,style:{style:c,minWidth:"25rem"},className:n,"aria-labelledby":s,children:Object(D.jsx)(p.a,{children:r.a.Children.toArray(a).map((function(e,t){return Object(D.jsx)(f.a,{xs:6,children:e},t)}))})})})),he=function(e){var t;return{characterKey:null!==e&&void 0!==e?e:"",levelKey:"L1",hitMode:"hit",reactionMode:null,equippedArtifacts:{},artifactConditionals:[],baseStatOverrides:{},weapon:{key:null!==(t=Object.keys(k.a.getWeaponsOfType(K.a.getWeaponTypeKey(e)))[0])&&void 0!==t?t:"",levelKey:N.d[0],refineIndex:0,overrideMainVal:0,overrideSubVal:0,conditionalNum:0},talentLevelKeys:{auto:0,skill:0,burst:0},autoInfused:!1,talentConditionals:[],constellation:0}};function xe(e,t){switch(t.type){case"overwrite":return Object(n.a)(Object(n.a)({},e),t.character);case"fromDB":return Object(n.a)(Object(n.a)({},e),C.a.get(e.characterKey,{}));case"statOverride":var a=t.statKey,c=t.value,s=e.baseStatOverrides;return K.a.getBaseStatValue(e,a)===c?delete s[a]:s[a]=c,Object(n.a)(Object(n.a)({},e),{},{baseStatOverrides:s})}return Object(n.a)(Object(n.a)({},e),t)}function Oe(e){var t,a=e.characterKey,r=e.character,N=e.setCharacterKey,B=e.footer,w=e.newBuild,I=e.editable,T=e.onClose,_=e.tabName,V=Object(l.useReducer)(xe,he(a)),E=Object(c.a)(V,2),F=E[0],W=E[1],z=Object(l.useState)(!1),q=Object(c.a)(z,2),L=q[0],M=q[1],U=Object(l.useRef)(!0),P=Object(l.useState)({}),R=Object(c.a)(P,2),H=R[0],G=R[1],X=Object(l.useCallback)((function(){return G({})}),[]);Object(l.useEffect)((function(){if(a){var e=Object(n.a)(Object(n.a)({},he(a)),C.a.get(a,{}));W({type:"overwrite",character:e})}}),[a]),Object(l.useEffect)((function(){if(r){var e=Object(n.a)(Object(n.a)({},he(r.characterKey)),r);W({type:"overwrite",character:e})}}),[r]),Object(l.useEffect)((function(){Promise.all([K.a.getCharacterDataImport(),k.a.getWeaponDataImport(),g.a.getDataImport()]).then(X)}),[X]),Object(l.useEffect)((function(){U.current?U.current=!1:I&&C.a.update(F)}),[F,I]);var Q=null!==(t=null===r||void 0===r?void 0:r.characterKey)&&void 0!==t?t:F.characterKey,Y=Object(l.useCallback)((function(e){var t=he(e),a=C.a.get(e);a&&(t=Object(n.a)(Object(n.a)({},t),a)),W({type:"overwrite",character:t}),e!==Q&&(null===N||void 0===N||N(e))}),[Q,W,N]),Z=Object(l.useMemo)((function(){var e=w&&Object(S.e)(w);return(null===e||void 0===e?void 0:e.finalStats)&&(e.finalStats.hitMode=F.hitMode,e.finalStats.reactionMode=F.reactionMode),e}),[w,F.hitMode,F.reactionMode]),$=F.levelKey,ee=F.artifacts,te=Object(l.useMemo)((function(){return H&&K.a.calculateBuild(F)}),[F,H]),ce=Q?Object(D.jsxs)("span",{children:[Object(D.jsx)(j.a,{src:K.a.getThumb(Q),className:"thumb-small my-n1 ml-n2",roundedCircle:!0}),Object(D.jsxs)("h6",{className:"d-inline",children:[" ",K.a.getName(Q)," "]})]}):Object(D.jsx)("span",{children:"Select a Character"}),ne={character:F,newBuild:Z,equippedBuild:!Z||L?te:void 0,editable:I,characterDispatch:W,compareAgainstEquipped:L};return ee&&(ne.artifacts=ee),Object(D.jsxs)(m.a,{bg:"darkcontent",text:"lightfont",children:[Object(D.jsx)(m.a.Header,{children:Object(D.jsxs)(p.a,{children:[Object(D.jsx)(f.a,{xs:"auto",className:"mr-auto",children:I?Object(D.jsxs)(d.a,{children:[Object(D.jsxs)(o.a,{as:d.a,children:[Object(D.jsx)(v.a,{as:O.a,children:ce}),Object(D.jsx)(o.a.Menu,{as:ue,children:K.a.getAllCharacterKeys().map((function(e){return Object(D.jsx)(o.a.Item,{onClick:function(){return Y(e)},children:Object(D.jsxs)("span",{children:[Object(D.jsx)(j.a,{src:K.a.getThumb(e),className:"thumb-small p-0 m-n1 grad-".concat(K.a.getStar(e),"star"),thumbnail:!0}),Object(D.jsxs)("h6",{className:"d-inline ml-2",children:[K.a.getName(e)," "]})]})},e)}))})]}),Object(D.jsxs)(b.a,{as:d.a,disabled:!Q,title:Object(D.jsxs)("h6",{className:"d-inline",children:["Stats Template: ",K.a.getlevelTemplateName($)," "]}),children:[Object(D.jsx)(o.a.ItemText,{children:Object(D.jsx)("span",{children:"Select Base Stat Template"})}),K.a.getlevelKeys().map((function(e){return Object(D.jsx)(o.a.Item,{onClick:function(){return W({levelKey:e})},children:Object(D.jsxs)("h6",{children:[K.a.getlevelTemplateName(e)," "]})},e)}))]})]}):Object(D.jsxs)("span",{children:[ce," ",K.a.getLevelString(F)]})}),Z?Object(D.jsx)(f.a,{xs:"auto",children:Object(D.jsxs)(d.a,{children:[Object(D.jsx)(O.a,{variant:L?"primary":"success",disabled:!L,onClick:function(){return M(!1)},children:Object(D.jsx)("small",{children:"Show New artifact Stats"})}),Object(D.jsx)(O.a,{variant:L?"success":"primary",disabled:L,onClick:function(){return M(!0)},children:Object(D.jsx)("small",{children:"Compare against equipped artifact"})})]})}):null,Boolean(T)&&Object(D.jsx)(f.a,{xs:"auto",children:Object(D.jsx)(O.a,{variant:"danger",onClick:T,children:Object(D.jsx)(i.a,{icon:s.B})})})]})}),Boolean(Q)&&Object(D.jsx)(m.a.Body,{children:Object(D.jsx)(be.Provider,{value:L,children:Object(D.jsxs)(u.a.Container,{defaultActiveKey:_||(Z?"newartifacts":"character"),mountOnEnter:!0,unmountOnExit:!0,children:[Object(D.jsxs)(h.a,{variant:"pills",className:"mb-2 mx-0",fill:!0,children:[Object(D.jsx)(h.a.Item,{children:Object(D.jsx)(h.a.Link,{eventKey:"character",children:Object(D.jsx)("h5",{className:"mb-0",children:"Character"})})}),Z?Object(D.jsx)(h.a.Item,{children:Object(D.jsx)(h.a.Link,{eventKey:"newartifacts",children:Object(D.jsx)("h5",{className:"mb-0",children:"New Artifacts"})})}):null,Object(D.jsx)(h.a.Item,{children:Object(D.jsx)(h.a.Link,{eventKey:"artifacts",children:Object(D.jsx)("h5",{className:"mb-0",children:Z?"Current Artifacts":"Artifacts"})})}),Object(D.jsx)(h.a.Item,{children:K.a.hasTalentPage(Q)?Object(D.jsx)(h.a.Link,{eventKey:"talent",children:Object(D.jsx)("h5",{className:"mb-0",children:"Talents"})}):Object(D.jsx)(y.a,{children:Object(D.jsxs)(h.a.Link,{eventKey:"talent",disabled:!0,children:[Object(D.jsx)("h5",{className:"mb-0",children:"Talents"})," ",Object(D.jsx)(x.a,{variant:"warning",children:"WIP"})]})})})]}),K.a.hasTalentPage(Q)&&Object(D.jsx)(oe.c,{character:F,characterDispatch:W,newBuild:Z,equippedBuild:te,className:"mb-2"}),Object(D.jsxs)(u.a.Content,{children:[Object(D.jsx)(u.a.Pane,{eventKey:"character",children:Object(D.jsx)(J,Object(n.a)({},ne))}),Object(D.jsx)(u.a.Pane,{eventKey:"artifacts",children:Object(D.jsx)(A,Object(n.a)({},Object(n.a)(Object(n.a)({},ne),{},{newBuild:void 0,equippedBuild:te})))}),Z?Object(D.jsx)(u.a.Pane,{eventKey:"newartifacts",children:Object(D.jsx)(A,Object(n.a)({},ne))}):null,Object(D.jsx)(u.a.Pane,{eventKey:"talent",children:Object(D.jsx)(ae,Object(n.a)({},ne))})]})]})})}),B&&Object(D.jsx)(m.a.Footer,{children:B})]})}}}]);
//# sourceMappingURL=2.8891edfb.chunk.js.map