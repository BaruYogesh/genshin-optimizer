(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[17,23],{214:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));var n=a(4),c=a(189),r=a(71),s=a(14),i=a(1);function l(e,t){var a=t.characterSheet,r=t.weaponSheet,s=t.artifactSheets,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"anemo";if("basicKeys"===e)return"Basic Stats";if("genericAvgHit"===e)return"Generic Optimization Values";if("transReactions"===e)return"Transformation Reaction";if(e.startsWith("talentKey_")){var o,j,d=e.split("talentKey_")[1];return null!==(o=null===a||void 0===a||null===(j=a.getTalentOfKey(d,l))||void 0===j?void 0:j.name)&&void 0!==o?o:d}if(e.startsWith("weapon_")){var b,u=e.split("weapon_")[1];return null!==(b=null===r||void 0===r?void 0:r.name)&&void 0!==b?b:u}if(e.startsWith("artifact_")){var h,O=e.split("_"),x=Object(n.a)(O,3),m=x[1],v=x[2];return Object(i.jsxs)("span",{children:[null===(h=s[m])||void 0===h?void 0:h.name," ",Object(i.jsxs)(c.a,{variant:"success",children:[v,"-Set"]})]})}return""}function o(e){return{key:e,level:1,ascension:0,hitMode:"avgHit",reactionMode:null,equippedArtifacts:Object.fromEntries(s.h.map((function(e){return[e,""]}))),equippedWeapon:"",conditionalValues:{},baseStatOverrides:{},buildSettings:Object(r.a)(),talent:{auto:1,skill:1,burst:1},infusionAura:"",constellation:0}}},218:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(4),c=a(25),r=a(10),s=a(0),i=a(544),l=a(188),o=a(127),j=a(72),d=a(126),b=a(199),u=a(28),h=a(12),O=a(84),x=a(1);function m(e){var t,a,m=e.pageKey,v=void 0===m?"":m,f=e.text,p=void 0===f?"":f,y=e.modalTitle,g=void 0===y?"":y,N=e.children,C=Object(s.useState)(null===(t=null===(a=u.b.get("infoShown"))||void 0===a?void 0:a[v])||void 0===t||t),w=Object(n.a)(C,2),k=w[0],S=w[1],K=Object(s.useState)(Array.isArray(p)?Object(h.g)(p):p),T=Object(n.a)(K,1)[0],_=function(){var e,t=null!==(e=u.b.get("infoShown"))&&void 0!==e?e:{};t[v]=!1,u.b.set("infoShown",t),S(!1)};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(i.a,{show:k,onHide:function(){return _()},size:"xl",variant:"success",contentClassName:"bg-transparent",children:Object(x.jsxs)(l.a,{bg:"darkcontent",text:"lightfont",children:[Object(x.jsx)(l.a.Header,{children:Object(x.jsxs)(o.a,{children:[Object(x.jsx)(j.a,{children:Object(x.jsx)(l.a.Title,{children:g})}),Object(x.jsx)(j.a,{xs:"auto",children:Object(x.jsx)(d.a,{variant:"danger",onClick:function(){return _()},children:Object(x.jsx)(r.a,{icon:c.B})})})]})}),Object(x.jsx)(l.a.Body,{children:Object(x.jsx)(s.Suspense,{fallback:Object(x.jsxs)("h3",{className:"text-center",children:["Loading... ",Object(x.jsx)(b.a,{animation:"border",variant:"primary"})]}),children:N})}),Object(x.jsx)(l.a.Footer,{children:Object(x.jsx)(d.a,{variant:"danger",onClick:function(){return _()},children:Object(x.jsx)("span",{children:"Close"})})})]})}),Object(x.jsx)(l.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:Object(x.jsx)(l.a.Body,{className:"pl-2 py-0 pr-0",children:Object(x.jsxs)(o.a,{children:[Object(x.jsx)(j.a,{children:Object(x.jsx)("small",{children:T})}),Object(x.jsx)(j.a,{xs:"auto",children:Object(x.jsxs)(d.a,{size:"sm",variant:"info",className:"m-0 py-1",onClick:function(){return S(!0)},children:[Object(x.jsx)(O.a,{ns:"ui",key18:"info"})," ",Object(x.jsx)(r.a,{icon:c.v})]})})]})})})]})}},236:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var n=a(20),c=a(4),r=a(25),s=a(10),i=a(0),l=a(143),o=a(189),j=a(126),d=a(188),b=a(72),u=a(127),h=a(41),O=a(122),x=a(207),m=a(206),v=a(124),f=a(35),p=a(34),y=a(86),g=a(121),N=a(209),C=a(123),w=a(1);function k(e){var t,a=e.characterKey,k=e.onEdit,S=e.onDelete,K=e.cardClassName,T=void 0===K?"":K,_=e.bg,B=void 0===_?"":_,E=e.header,A=e.footer,F=void 0!==A&&A,M=Object(i.useContext)(f.b),z=Object(i.useState)(void 0),W=Object(c.a)(z,2),H=W[0],R=W[1];Object(i.useEffect)((function(){return a?M.followChar(a,R):void 0}),[a,R,M]);var L=Object(y.b)(O.a.getAll(),[]),D=H,G=Object(y.b)(C.b.get(a),[a]),U=(null===D||void 0===D?void 0:D.equippedWeapon)?M._getWeapon(D.equippedWeapon):void 0,V=Object(y.b)(U?g.a.get(U.key):void 0,[null===U||void 0===U?void 0:U.key]),q=Object(i.useMemo)((function(){return D&&G&&V&&L&&N.a.calculateBuild(D,M,G,V,L)}),[D,G,V,L,M]);if(!D||!U||!G||!V||!q)return null;var P=D.constellation,Y=U.level,I=U.ascension,J=q.tlvl,Q=G.name,X=q.characterEle,Z=G.weaponTypeKey,$=null===V||void 0===V?void 0:V.name,ee=V.getMainStatValue(Y,I).toFixed(p.b.fixedUnit("atk")),te=V.getSubStatKey(),ae=V.getSubStatValue(Y,I).toFixed(p.b.fixedUnit(te)),ne=g.a.getLevelString(U),ce=null===V||void 0===V?void 0:V.passiveName;return Object(w.jsxs)(d.a,{className:T,bg:B||"darkcontent",text:"lightfont",children:[Object(w.jsx)(d.a.Header,{className:"pr-2",children:Object(w.jsxs)(u.a,{className:"no-gutters",children:[Object(w.jsx)(b.a,{children:E||Object(w.jsx)("h5",{children:Object(w.jsx)("b",{children:Q})})}),Object(w.jsx)(b.a,{xs:"auto",children:Object(w.jsxs)("span",{className:"float-right align-top ml-1",children:[k&&Object(w.jsx)(j.a,{variant:"primary",size:"sm",className:"mr-1",onClick:function(){return k(a)},children:Object(w.jsx)(s.a,{icon:r.k})}),S&&Object(w.jsx)(j.a,{variant:"danger",size:"sm",onClick:function(){return S(a)},children:Object(w.jsx)(s.a,{icon:r.E})})]})})]})}),Object(w.jsxs)(d.a.Body,{onClick:function(){return null===k||void 0===k?void 0:k(a)},className:k?"cursor-pointer":"",children:[Object(w.jsxs)(u.a,{children:[Object(w.jsx)(b.a,{xs:"auto",className:"pr-0",children:Object(w.jsx)(l.a,{src:G.thumbImg,className:"thumb-big grad-".concat(G.star,"star p-0"),thumbnail:!0})}),Object(w.jsxs)(b.a,{children:[Object(w.jsxs)("h5",{className:"mb-0",children:["Lv. ",N.a.getLevelString(D)," ","C".concat(P)]}),Object(w.jsxs)("h6",{className:"mb-0",children:[Object(w.jsx)(o.a,{variant:"secondary",children:Object(w.jsx)("strong",{className:"mx-1",children:J.auto+1})})," ",Object(w.jsx)(o.a,{variant:"secondary",children:Object(w.jsx)("strong",{className:"mx-1",children:J.skill+1})})," ",Object(w.jsx)(o.a,{variant:"secondary",children:Object(w.jsx)("strong",{className:"mx-1",children:J.burst+1})})]}),Object(w.jsx)("h6",{className:"mb-0",children:Object(w.jsx)(m.a,{stars:G.star,colored:!0})}),Object(w.jsxs)("h3",{className:"mb-0",children:[v.a[X]," ",Object(w.jsx)(l.a,{src:null===(t=x.a.weaponTypes)||void 0===t?void 0:t[Z],className:"inline-icon"})]})]})]}),Object(w.jsx)(u.a,{className:"mb-2",children:Object(w.jsxs)(b.a,{children:[Object(w.jsxs)("h6",{className:"mb-0",children:[$,ce&&Object(w.jsx)(o.a,{variant:"info",className:"ml-1",children:U.refine})," ",ne]}),Object(w.jsxs)("span",{children:["ATK: ",ee,"  ",ce&&Object(w.jsxs)("span",{children:[p.b.getStatName(te),": ",ae,p.b.getStatUnit(te)]})]})]})}),Object(w.jsx)(u.a,{children:Object(w.jsx)(b.a,{children:L&&Object.entries(O.a.setEffects(L,q.setToSlots)).map((function(e){var t,a=Object(c.a)(e,2),r=a[0],s=a[1],i=null!==(t=null===L||void 0===L?void 0:L[r].name)&&void 0!==t?t:"",l=Math.max.apply(Math,Object(n.a)(s));return Object(w.jsx)("h5",{children:Object(w.jsxs)(o.a,{variant:"secondary",children:[i," ",Object(w.jsx)(o.a,{variant:"success",children:l})]})},r)}))})}),Object(w.jsx)(u.a,{children:["finalHP","finalATK","finalDEF","eleMas","critRate_","critDMG_","enerRech_"].map((function(e){var t=p.b.getStatUnit(e),a=q[e];return Object(w.jsxs)(b.a,{xs:12,children:[Object(w.jsxs)("h6",{className:"d-inline",children:[v.a[e]," ",p.b.getStatName(e)]}),Object(w.jsx)("span",{className:"float-right",children:(null===a||void 0===a?void 0:a.toFixed(p.b.fixedUnit(e)))+t})]},e)}))})]}),F&&Object(w.jsx)(d.a.Footer,{children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)(b.a,{children:Object(w.jsxs)(j.a,{as:h.b,to:{pathname:"/build",characterKey:a},children:[Object(w.jsx)(s.a,{icon:r.d})," Generate Builds"]})}),Object(w.jsx)(b.a,{children:Object(w.jsxs)(j.a,{variant:"info",as:h.b,to:{pathname:"/flex",characterKey:a},children:[Object(w.jsx)(s.a,{icon:r.r})," Share Character"]})})]})})]})}},539:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return D}));var n=a(47),c=a.n(n),r=a(57),s=a(4),i=a(25),l=a(10),o=a(111),j=a(0),d=a.n(j),b=a(191),u=a(127),h=a(72),O=a(188),x=a(199),m=a(223),v=a(126),f=a(143),p=a(537),y=a(330),g=a(48),N=a(41),C=a(207),w=a(208),k=a(218),S=a(124),K=a(35),T=a(28),_=a(14),B=a(86),E=a(230),A=a(236),F=a(123),M=a(214),z=a(1),W=d.a.lazy((function(){return a.e(24).then(a.bind(null,534))})),H=Object(j.lazy)((function(){return Promise.all([a.e(2),a.e(19)]).then(a.bind(null,228))})),R={level:"Level",rarity:"Rarity",name:"Name"};function L(e,t){return t===e?"":t}function D(e){var t,a=Object(j.useContext)(K.b),n=Object(j.useState)(""),N=Object(s.a)(n,2),D=N[0],U=N[1],V=Object(j.useState)((function(){return Object.keys(R)[0]})),q=Object(s.a)(V,2),P=q[0],Y=q[1],I=Object(j.useReducer)(L,""),J=Object(s.a)(I,2),Q=J[0],X=J[1],Z=Object(j.useReducer)(L,""),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ae=Object(j.useState)(!1),ne=Object(s.a)(ae,2),ce=ne[0],re=ne[1],se=Object(B.a)(),ie=Object(s.a)(se,2)[1],le=Object(j.useRef)(null);Object(j.useEffect)((function(){g.a.pageview("/character");var e=T.b.get("CharacterDisplay.state");if(e){var t=e.characterKeyToEdit,n=e.sortBy,c=e.elementalFilter,r=e.weaponFilter;t&&U(t),n&&Y(n),_.d.includes(c)&&X(c),_.j.includes(r)&&te(r)}return a.followAnyChar(ie)}),[ie,a]);var oe=null!==(t=Object(B.b)(F.b.getAll(),[]))&&void 0!==t?t:{},je=function(e){var t,n;return null!==(t=null===(n=a._getChar(e))||void 0===n?void 0:n.level)&&void 0!==t?t:0},de=function(e){var t;return null===(t=oe[e])||void 0===t?void 0:t.star};Object(j.useEffect)((function(){var e={characterKeyToEdit:D,sortBy:P,elementalFilter:Q,weaponFilter:ee};T.b.set("CharacterDisplay.state",e)}),[D,P,Q,ee]);var be=Object(j.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.b.get(t);case 2:if(n=e.sent,"object"===typeof(r=null===n||void 0===n?void 0:n.name)&&(r=o.a.t("char_".concat(t,"_gen:name"))),window.confirm("Are you sure you want to remove ".concat(r,"?"))){e.next=7;break}return e.abrupt("return");case 7:a.removeChar(t),D===t&&U("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[D,U,a]),ue=Object(j.useCallback)((function(e){a._getChar(e)?U(e):Object(r.a)(c.a.mark((function t(){var n,r,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(M.b)(e),a.updateChar(n),t.next=4,F.b.get(e);case 4:if(r=t.sent){t.next=7;break}return t.abrupt("return");case 7:s=Object(E.a)(r.weaponTypeKey),i=a.createWeapon(s),a.setWeaponLocation(i,e),U(e);case 11:case"end":return t.stop()}}),t)})))(),setTimeout((function(){var e;null===(e=le.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)}),[U,le,a]),he=Object(j.useCallback)((function(){U(""),re(!1)}),[U]),Oe=a._getCharKeys().filter((function(e){var t,a;return(!Q||Q===(null===(t=oe[e])||void 0===t?void 0:t.elementKey))&&(!ee||ee===(null===(a=oe[e])||void 0===a?void 0:a.weaponTypeKey))})).sort((function(e,t){if("name"===P)return e<t?-1:e>t?1:0;if("level"===P){var a=je(t)-je(e);return a||de(t)-de(e)}var n=de(t)-de(e);return n||je(t)-je(e)}));return Object(z.jsxs)(b.a,{ref:le,className:"mt-2",children:[Object(z.jsx)(k.a,{pageKey:"characterPage",modalTitle:"Character Management Page Guide",text:["Every character will be tested with in-game numbers for maximum accuracy.","You can see the details of the calculations of every number.","You need to manually enable auto infusion for characters like Choungyun or Noelle.",'You can change character constellations in both "Character" tab and in "Talents" tab.',"Modified character Stats show up in yellow."],children:Object(z.jsx)(W,{})}),D?Object(z.jsx)(u.a,{className:"mt-2",children:Object(z.jsx)(h.a,{children:Object(z.jsx)(d.a.Suspense,{fallback:Object(z.jsx)(O.a,{bg:"darkcontent",text:"lightfont",children:Object(z.jsx)(O.a.Body,{children:Object(z.jsxs)("h3",{className:"text-center",children:["Loading... ",Object(z.jsx)(x.a,{animation:"border",variant:"primary"})]})})}),children:Object(z.jsx)(H,{newBuild:void 0,tabName:void 0,editable:!0,setCharacterKey:ue,characterKey:D,onClose:he,footer:Object(z.jsx)(G,{onClose:he,characterKey:D})})})})}):null,Object(z.jsx)(O.a,{bg:"darkcontent",text:"lightfont",className:"mt-2",children:Object(z.jsx)(O.a.Body,{className:"p-2",children:Object(z.jsxs)(u.a,{children:[Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsx)(m.a,{children:_.d.map((function(e){return Object(z.jsx)(v.a,{variant:Q&&Q!==e?"secondary":e,className:"py-1 px-2 text-white",onClick:function(){return X(e)},children:Object(z.jsx)("h3",{className:"mb-0",children:S.b[e]})},e)}))})}),Object(z.jsx)(h.a,{children:Object(z.jsx)(m.a,{children:_.j.map((function(e){var t;return Object(z.jsx)(v.a,{variant:ee&&ee!==e?"secondary":"success",className:"py-1 px-2",onClick:function(){return te(e)},children:Object(z.jsx)("h3",{className:"mb-0",children:Object(z.jsx)(f.a,{src:null===(t=C.a.weaponTypes)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(z.jsxs)(h.a,{xs:"auto",children:[Object(z.jsx)("span",{children:"Sort by: "}),Object(z.jsx)(p.a,{type:"radio",name:"level",value:P,onChange:Y,children:Object.entries(R).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(z.jsx)(y.a,{value:a,variant:P===a?"success":"primary",children:Object(z.jsx)("h6",{className:"mb-0",children:n})},a)}))})]})]})})}),Object(z.jsxs)(u.a,{className:"mt-2",children:[!D&&Object(z.jsx)(h.a,{lg:4,md:6,className:"mb-2",children:Object(z.jsxs)(O.a,{className:"h-100",bg:"darkcontent",text:"lightfont",children:[Object(z.jsx)(O.a.Header,{className:"pr-2",children:Object(z.jsx)("span",{children:"Add New Character"})}),Object(z.jsx)(O.a.Body,{className:"d-flex flex-column justify-content-center",children:Object(z.jsx)(u.a,{className:"d-flex flex-row justify-content-center",children:Object(z.jsxs)(h.a,{xs:"auto",children:[Object(z.jsx)(v.a,{onClick:function(){return re(!0)},children:Object(z.jsx)("h1",{children:Object(z.jsx)(l.a,{icon:i.u,className:"fa-fw"})})}),Object(z.jsx)(w.c,{show:ce,onHide:function(){return re(!1)},onSelect:ue})]})})})]})}),Oe.map((function(e){return Object(z.jsx)(h.a,{lg:4,md:6,className:"mb-2",children:Object(z.jsx)(A.a,{header:void 0,cardClassName:"h-100",characterKey:e,onDelete:be,onEdit:ue,footer:!0})},e)}))]})]})}function G(e){var t=e.onClose,a=e.characterKey;return Object(z.jsxs)(u.a,{children:[Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsxs)(v.a,{variant:"info",as:N.b,to:{pathname:"/flex",characterKey:a},children:[Object(z.jsx)(l.a,{icon:i.r})," Share Character"]})}),Object(z.jsx)(h.a,{children:Object(z.jsxs)(v.a,{as:N.b,to:{pathname:"/build",characterKey:a},children:[Object(z.jsx)(l.a,{icon:i.d})," Generate Builds"]})}),Object(z.jsx)(h.a,{xs:"auto",children:Object(z.jsx)(v.a,{variant:"danger",onClick:t,children:"Close"})})]})}}}]);
//# sourceMappingURL=17.321fd29e.chunk.js.map