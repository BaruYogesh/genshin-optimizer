"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[254],{44361:function(e,n,i){i.d(n,{Z:function(){return k}});var t=i(93433),s=i(29439),o=i(39504),r=i(61889),l=i(94721),c=i(66647),a=i(68870),d=i(20890),u=i(72791),x=i(9350),p=i(42320),Z=i(24351),h=i(66218),j=i(3992),v=i(71310),f=i(68198),m=i(55942),y=i(9321),g=i(10157),w=i(73578),C=i(80184);function k(e){var n=e.show,i=e.onHide,k=e.onSelect,P=e.filter,b=void 0===P?function(){return!0}:P,S=e.weaponFilter,W=(0,p.Z)(h.ZP.getAll,[]),T=(0,u.useState)(null!==S&&void 0!==S?S:""),L=(0,s.Z)(T,2),I=L[0],A=L[1];(0,u.useEffect)((function(){return S&&A(S)}),[S]);var K=W?(0,t.Z)(new Set(Z.fG)).filter((function(e){return b(W[e])})).filter((function(e){var n;return!I||I===(null===W||void 0===W||null===(n=W[e])||void 0===n?void 0:n.weaponType)})).sort((function(e,n){var i,t,s,o;return(null!==(i=null===W||void 0===W||null===(t=W[n])||void 0===t?void 0:t.rarity)&&void 0!==i?i:0)-(null!==(s=null===W||void 0===W||null===(o=W[e])||void 0===o?void 0:o.rarity)&&void 0!==s?s:0)})):[];return W?(0,C.jsx)(y.Z,{open:n,onClose:i,children:(0,C.jsxs)(j.Z,{children:[(0,C.jsx)(o.Z,{sx:{py:1},children:(0,C.jsxs)(r.ZP,{container:!0,children:[(0,C.jsx)(r.ZP,{item:!0,flexGrow:1,children:(0,C.jsx)(w.Z,{value:I,onChange:A,disabled:!!S,size:"small"})}),(0,C.jsx)(r.ZP,{item:!0,children:(0,C.jsx)(f.Z,{onClick:i})})]})}),(0,C.jsx)(l.Z,{}),(0,C.jsx)(o.Z,{children:(0,C.jsx)(r.ZP,{container:!0,spacing:1,children:K.map((function(e){var n,t=W[e];return(0,C.jsx)(r.ZP,{item:!0,lg:3,md:4,children:(0,C.jsx)(v.Z,{sx:{height:"100%"},children:(0,C.jsxs)(c.Z,{onClick:function(){i(),k(e)},sx:{display:"flex"},children:[(0,C.jsx)(a.Z,{component:"img",src:t.img,sx:{width:100,height:"auto"},className:" grad-".concat(t.rarity,"star")}),(0,C.jsxs)(a.Z,{sx:{flexGrow:1,px:1},children:[(0,C.jsx)(d.Z,{variant:"subtitle1",children:t.name}),(0,C.jsxs)(d.Z,{children:[(0,C.jsx)(m.Z,{src:null===(n=x.Z.weaponTypes)||void 0===n?void 0:n[t.weaponType]})," ",(0,C.jsx)(g.t,{stars:t.rarity,colored:!0})]})]})]})})},e)}))})}),(0,C.jsx)(l.Z,{}),(0,C.jsx)(o.Z,{sx:{py:1},children:(0,C.jsx)(f.Z,{large:!0,onClick:i})})]})}):null}},2254:function(e,n,i){i.r(n),i.d(n,{default:function(){return U}});var t=i(93433),s=i(29439),o=i(76189),r=i(80184),l=(0,o.Z)((0,r.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz"),c=i(40117),a=i(62002),d=i(39504),u=i(61889),x=i(68870),p=i(20890),Z=i(2199),h=i(24518),j=i(23786),v=i(94721),f=i(9585),m=i(15021),y=i(72791),g=i(9350),w=i(3992),C=i(71310),k=i(36944),P=i(68198),b=i(10600),S=i(37503),W=i(33890),T=i(14763),L=i(55942),I=i(9321),A=i(10157),K=i(44361),z=i(947),H=i(2139),J=i(66218),R=i(56928),G=i(2693),N=i(26138),D=i(87234),E=i(42320),M=i(74480),F=i(60393),_=i(90543);function U(e){var n,i,o=e.weaponId,l=e.footer,g=void 0!==l&&l,L=e.onClose,_=(0,y.useContext)(G.R).data,U=(0,y.useContext)(R.t).database,O=(0,M.Z)(o),X=null!==O&&void 0!==O?O:{},q=X.key,Q=void 0===q?"":q,V=X.level,Y=void 0===V?0:V,$=X.refinement,ee=void 0===$?0:$,ne=X.ascension,ie=void 0===ne?0:ne,te=X.lock,se=X.location,oe=void 0===se?"":se,re=X.id,le=(0,E.Z)(J.ZP.get(Q),[Q]),ce=null===le||void 0===le?void 0:le.weaponType,ae=(0,y.useCallback)((function(e){U.updateWeapon(e,o)}),[o,U]),de=(0,y.useCallback)((function(e){e=(0,F.uZ)(e,1,90);var n=H.SJ.findIndex((function(n){return e<=n}));ae({level:e,ascension:n})}),[ae]),ue=(0,y.useCallback)((function(){var e=H.SJ.findIndex((function(e){return 90!==Y&&Y===e}));ae(ie===e?{ascension:ie+1}:{ascension:e})}),[ae,ie,Y]),xe=(0,E.Z)(oe?z.ZP.get(oe):void 0,[oe]),pe=xe?function(e){return e.weaponType===xe.weaponTypeKey}:void 0,Ze=xe&&xe.weaponTypeKey,he=(0,y.useCallback)((function(e){return re&&U.setWeaponLocation(re,e)}),[U,re]),je=(0,y.useCallback)((function(e){return e.weaponTypeKey===(null===le||void 0===le?void 0:le.weaponType)}),[le]),ve=(0,y.useState)(!1),fe=(0,s.Z)(ve,2),me=fe[0],ye=fe[1],ge=ie<2?null===le||void 0===le?void 0:le.img:null===le||void 0===le?void 0:le.imgAwaken;(0,y.useEffect)((function(){if(le&&ae&&le.key===(null===O||void 0===O?void 0:O.key)&&le.rarity<=2&&(Y>70||ie>4)){var e=(0,s.Z)(H.Xu[0],2),n=e[0],i=e[1];ae({level:n,ascension:i})}}),[le,O,ae,Y,ie]);var we=(0,y.useMemo)((function(){return le&&O&&(0,D.mP)([le.data,(0,D.v0)(O)])}),[le,O]);return(0,r.jsx)(I.Z,{open:!!o,onClose:L,containerProps:{maxWidth:"md"},children:(0,r.jsxs)(C.Z,{children:[(0,r.jsx)(K.Z,{show:me,onHide:function(){return ye(!1)},onSelect:function(e){return ae({key:e})},filter:pe,weaponFilter:Ze}),(0,r.jsx)(d.Z,{children:le&&we&&(0,r.jsxs)(u.ZP,{container:!0,spacing:1.5,children:[(0,r.jsx)(u.ZP,{item:!0,xs:12,sm:3,children:(0,r.jsxs)(u.ZP,{container:!0,spacing:1.5,children:[(0,r.jsx)(u.ZP,{item:!0,xs:6,sm:12,children:(0,r.jsx)(x.Z,{component:"img",src:ge,className:"grad-".concat(le.rarity,"star"),sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}})}),(0,r.jsx)(u.ZP,{item:!0,xs:6,sm:12,children:(0,r.jsx)(p.Z,{children:(0,r.jsx)("small",{children:le.description})})})]})}),(0,r.jsxs)(u.ZP,{item:!0,xs:12,sm:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,r.jsxs)(x.Z,{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"space-between",children:[(0,r.jsxs)(Z.Z,{children:[(0,r.jsx)(h.Z,{onClick:function(){return ye(!0)},children:null!==(n=null===le||void 0===le?void 0:le.name)&&void 0!==n?n:"Select a Weapon"}),(null===le||void 0===le?void 0:le.hasRefinement)&&(0,r.jsxs)(W.Z,{title:"Refinement ".concat(ee),children:[(0,r.jsx)(j.Z,{children:"Select Weapon Refinement"}),(0,r.jsx)(v.Z,{}),(0,t.Z)(Array(5).keys()).map((function(e){return(0,r.jsx)(j.Z,{onClick:function(){return ae({refinement:e+1})},selected:ee===e+1,disabled:ee===e+1,children:"Refinement ".concat(e+1)},e)}))]})]}),(null===_||void 0===_||null===(i=_.get(N.ri.charKey))||void 0===i?void 0:i.value)&&(0,r.jsx)(B,{weaponTypeKey:ce,onChangeId:function(e){return U.setWeaponLocation(e,_.get(N.ri.charKey).value)}})]}),(0,r.jsxs)(x.Z,{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"space-between",children:[(0,r.jsxs)(Z.Z,{sx:{bgcolor:function(e){return e.palette.contentLight.main}},children:[(0,r.jsx)(b.CC,{children:(0,r.jsx)(b.ZP,{onChange:de,value:Y,startAdornment:"Lv. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),le&&(0,r.jsx)(h.Z,{sx:{pl:1},disabled:!le.ambiguousLevel(Y),onClick:ue,children:(0,r.jsxs)("strong",{children:["/ ",H.SJ[ie]]})}),le&&(0,r.jsx)(W.Z,{title:"Select Level",children:le.milestoneLevels.map((function(e){var n=(0,s.Z)(e,2),i=n[0],t=n[1],o=i===H.SJ[t]?"Lv. ".concat(i):"Lv. ".concat(i,"/").concat(H.SJ[t]),l=i===Y&&t===ie;return(0,r.jsx)(j.Z,{selected:l,disabled:l,onClick:function(){return ae({level:i,ascension:t})},children:o},"".concat(i,"/").concat(t))}))})]}),(0,r.jsx)(h.Z,{color:"error",onClick:function(){return re&&U.updateWeapon({lock:!te},re)},startIcon:te?(0,r.jsx)(c.Z,{}):(0,r.jsx)(a.Z,{}),children:te?"Locked":"Unlocked"})]}),(0,r.jsx)(p.Z,{children:(0,r.jsx)(A.t,{stars:le.rarity})}),(0,r.jsx)(p.Z,{variant:"subtitle1",children:(0,r.jsx)("strong",{children:le.passiveName})}),(0,r.jsx)(p.Z,{gutterBottom:!0,children:le.passiveName&&le.passiveDescription(we.get(N.ri.weapon.refineIndex).value)}),(0,r.jsxs)(x.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,r.jsxs)(w.Z,{children:[(0,r.jsx)(f.Z,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),(0,r.jsx)(v.Z,{}),(0,r.jsx)(T.lD,{children:[N.ri.weapon.main,N.ri.weapon.sub,N.ri.weapon.sub2].map((function(e,n){var i=we.get(e);return i.isEmpty||!i.value?null:(0,r.jsx)(T.JW,{node:i,component:m.ZP},i.info.key)}))})]}),_&&le.document&&(0,r.jsx)(S.Z,{sections:le.document})]})]})]})}),g&&re&&(0,r.jsx)(d.Z,{sx:{py:1},children:(0,r.jsxs)(u.ZP,{container:!0,children:[(0,r.jsx)(u.ZP,{item:!0,flexGrow:1,children:(0,r.jsx)(k.Z,{noUnselect:!0,inventory:!0,value:oe,onChange:he,filter:je})}),!!L&&(0,r.jsx)(u.ZP,{item:!0,children:(0,r.jsx)(P.Z,{large:!0,onClick:L})})]})})]})})}function B(e){var n=e.onChangeId,i=e.weaponTypeKey,t=(0,y.useContext)(R.t).database,o=(0,y.useState)(!1),c=(0,s.Z)(o,2),a=c[0],x=c[1],Z=function(){return x(!1)},j=function(e){n(e),Z()},f=(0,E.Z)(J.ZP.getAll,[]),m=t.weapons.keys.filter((function(e){var n,s=t._getWeapon(e);return!!s&&(!i||i===(null===f||void 0===f||null===(n=f[s.key])||void 0===n?void 0:n.weaponType))}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{color:"info",onClick:function(){return x(!0)},startIcon:(0,r.jsx)(l,{}),children:"SWAP WEAPON"}),(0,r.jsx)(I.Z,{open:a,onClose:Z,children:(0,r.jsxs)(w.Z,{children:[(0,r.jsx)(d.Z,{sx:{py:1},children:(0,r.jsxs)(u.ZP,{container:!0,children:[(0,r.jsx)(u.ZP,{item:!0,flexGrow:1,children:(0,r.jsxs)(p.Z,{variant:"h6",children:[i?(0,r.jsx)(L.Z,{src:g.Z.weaponTypes[i]}):null," Swap Weapon"]})}),(0,r.jsx)(u.ZP,{item:!0,children:(0,r.jsx)(P.Z,{onClick:Z})})]})}),(0,r.jsx)(v.Z,{}),(0,r.jsx)(d.Z,{children:(0,r.jsx)(u.ZP,{container:!0,spacing:1,children:m.map((function(e){return(0,r.jsx)(u.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,r.jsx)(_.Z,{weaponId:e,onClick:j})},e)}))})})]})})]})}}}]);
//# sourceMappingURL=254.d6a11748.chunk.js.map