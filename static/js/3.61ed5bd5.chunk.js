(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[3],{152:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var c=a(3),n=a(0);function s(){var e=Object(n.useState)(),t=Object(c.a)(e,2)[1];return Object(n.useCallback)((function(){return t({})}),[])}},153:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var c=a(1),n=a(22),s=a(26),i=a(0),l=a(124),r=a(107),j=a(126),d=a(47),o=a(46),b=a(120),u=a(141),h=a(116),x=a(62),O=a(113),m=a(105),f=a(131),v=a(115),p=a(14),g=a(45),y=a(152),N=a(55),S=a(154);function k(e){var t,a,k=e.artifactId,K=e.artifactObj,C=e.editable,I=e.onEdit,B=e.onDelete,w=e.assumeFull,T=void 0!==w&&w,_=Object(y.a)();Object(i.useEffect)((function(){var e;return null===(e=N.a.getDataImport())||void 0===e||e.then(_),k&&p.a.registerArtListener(k,_),function(){k&&p.a.unregisterArtListener(k,_)}}),[k,_]);var V=Object(i.useCallback)((function(e){return N.a.equipArtifactOnChar(k,e)}),[k]);if(!k&&!K)return null;var W=K||p.a.get(k);if(!W)return null;W.maximumEfficiency||N.a.substatsValidation(W);var A=W.setKey,E=W.slotKey,F=W.numStars,U=void 0===F?0:F,L=W.level,z=void 0===L?0:L,D=W.mainStatKey,M=W.substats,P=void 0===M?[]:M,q=W.location,H=void 0===q?"":q,R=W.lock,G=W.currentEfficiency,X=void 0===G?0:G,J=W.maximumEfficiency,Q=void 0===J?0:J,Y=T?4*U:z,Z=T&&z!==4*U,$=Object(c.jsxs)("span",{className:Z?"text-orange":"",children:[N.a.getMainStatValue(D,U,Y,""),g.a.getStatUnit(D)]}),ee=P.every((function(e){var t;return!e.key||e.key&&e.value&&(null===e||void 0===e||null===(t=e.rolls)||void 0===t?void 0:t.length)}));return Object(c.jsxs)(d.a,{className:"h-100",border:"".concat(U,"star"),bg:"lightcontent",text:"lightfont",children:[Object(c.jsx)(d.a.Header,{className:"p-0",children:Object(c.jsxs)(x.a,{children:[Object(c.jsx)(o.a,{xs:2,md:3,children:Object(c.jsx)(u.a,{src:N.a.getPieceIcon(A,E),className:"w-100 h-auto grad-".concat(U,"star m-1"),thumbnail:!0})}),Object(c.jsxs)(o.a,{className:"pt-3",children:[Object(c.jsx)("h6",{children:Object(c.jsx)("b",{children:N.a.getPieceName(A,E,"Unknown Piece Name")})}),Object(c.jsxs)("div",{children:[N.a.getSlotNameWithIcon(E)," +".concat(z)]})]})]})}),Object(c.jsxs)(d.a.Body,{className:"d-flex flex-column py-2",children:[Object(c.jsxs)(d.a.Title,{children:[Object(c.jsx)("div",{children:N.a.getSetName(A,"Artifact Set")}),Object(c.jsx)("small",{className:"text-halfsize",children:Object(c.jsx)(v.a,{stars:U})})]}),Object(c.jsx)("h5",{className:"mb-1",children:Object(c.jsxs)("b",{children:[g.a.getStatName(D)," ",$]})}),Object(c.jsx)(x.a,{className:"mb-0",children:P.map((function(e,t){var a;if(!e||!e.value)return null;var n=(null===e||void 0===e||null===(a=e.rolls)||void 0===a?void 0:a.length)||0,s=(null===e||void 0===e?void 0:e.efficiency)||0,i=.3+.7*s,r=g.a.getStatName(e.key);return Object(c.jsxs)(o.a,{xs:12,children:[Object(c.jsx)(l.a,{variant:n?"".concat(n,"roll"):"danger",className:"text-darkcontent",children:Object(c.jsx)("b",{children:n||"?"})})," ",Object(c.jsxs)("span",{className:"text-".concat(n,"roll"),children:[r,"+".concat(g.a.getStatUnit(e.key)?e.value.toFixed(1):e.value).concat(g.a.getStatUnit(e.key))]}),Object(c.jsxs)("span",{className:"float-right",style:{opacity:i},children:[s.toFixed(1),"%"]})]},t)}))}),Object(c.jsxs)(x.a,{className:"mt-auto",children:[Object(c.jsxs)(o.a,{children:["Current SS Eff.: ",Object(c.jsx)(S.a,{percent:X,valid:ee,className:"float-right",children:null!==(t=null===X||void 0===X?void 0:X.toFixed(2))&&void 0!==t?t:X+"%"})]}),X!==Q&&Object(c.jsxs)(o.a,{className:"text-right",children:["Max SS Eff.: ",Object(c.jsx)(S.a,{percent:Q,valid:ee,children:null!==(a=null===Q||void 0===Q?void 0:Q.toFixed(2))&&void 0!==a?a:Q+"%"})]})]})]}),Object(c.jsx)(d.a.Footer,{className:"pr-3",children:Object(c.jsxs)(x.a,{className:"d-flex justify-content-between no-gutters",children:[C?Object(c.jsx)(o.a,{xs:"auto",children:Object(c.jsxs)(b.a,{children:[Object(c.jsx)(b.a.Toggle,{size:"sm",className:"text-left",children:m.a.getName(H,"Inventory")}),Object(c.jsxs)(b.a.Menu,{children:[Object(c.jsx)(b.a.Item,{onClick:function(){return V("")},children:"Inventory"}),Object(c.jsx)(b.a.Divider,{}),Object(c.jsx)(f.a,{onSelect:function(e){return V(e)}})]})]})}):Object(c.jsx)(o.a,{xs:"auto",children:Object(c.jsx)("b",{children:m.a.getName(H,"Inventory")})}),Object(c.jsx)(o.a,{xs:"auto",children:Object(c.jsxs)(j.a,{children:[C?Object(c.jsx)(h.a,{placement:"top",overlay:Object(c.jsx)(O.a,{children:"Locking a artifact will prevent the build generator from picking it for builds. Artifacts on characters are locked by default."}),children:Object(c.jsx)("span",{className:"d-inline-block",children:Object(c.jsx)(r.a,{size:"sm",disabled:H,style:H?{pointerEvents:"none"}:{},onClick:function(){W.lock=!R,p.a.update(W)},children:Object(c.jsx)(s.a,{icon:R||H?n.o:n.p,className:"fa-fw"})})})}):null,Boolean(I)&&Object(c.jsx)(r.a,{variant:"info",size:"sm",onClick:I,children:Object(c.jsx)(s.a,{icon:n.h,className:"fa-fw"})}),Boolean(B)&&Object(c.jsx)(r.a,{variant:"danger",size:"sm",onClick:B,children:Object(c.jsx)(s.a,{icon:n.E,className:"fa-fw"})})]})})]})})]})}},154:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var c=a(1),n=a(124);function s(e){var t=e.percent,a=e.valid,s=e.children,i=a?isNaN(t)?"secondary":"".concat(Math.floor(.05*t)+1,"roll"):"danger";return Object(c.jsx)(n.a,{variant:i,className:"secondary"===i?"":"text-darkcontent",children:s})}},156:function(e,t,a){"use strict";var c=a(1),n=a(116),s=a(113);t.a=function(e){var t=e.children;return Object(c.jsx)(n.a,{overlay:Object(c.jsx)(s.a,{children:"Work In Progress"}),children:Object(c.jsx)("span",{children:t})})}},166:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return me}));var c=a(1),n=a(11),s=a(19),i=a(29),l=a(137),r=a(136),j=a(22),d=a(26),o=a(0),b=a.n(o),u=a(141),h=a(126),x=a(120),O=a(229),m=a(175),f=a(17),v=a(124),p=a(107),g=a(47),y=a(46),N=a(163),S=a(62),k=a(55),K=a(156),C=a(119),I=a(5),B=a(109),w=a(105),T=a(13),_=a(3),V=a(222),W=a(153),A=a(129),E=a(45),F=a(56),U=a(143),L=a(155);var z=function(e){var t,a=e.character,s=e.character,i=s.characterKey,l=s.artifactConditionals,r=e.equippedBuild,j=e.newBuild,d=e.editable,o=e.forceUpdate,b=e.setState,u=e.setOverride,h=e.artifacts,x=j||r,O=j?null===(t=j.finalStats)||void 0===t?void 0:t.artifactsAssumeFull:a.artifactsAssumeFull;j&&(l=j.artifactConditionals);var m=w.a.getDisplayStatKeys(x.finalStats);return Object(c.jsxs)(c.Fragment,{children:[w.a.hasTalentPage(i)&&Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{xs:12,className:"mb-2",children:Object(c.jsx)(U.c,Object(n.a)({},{character:a,setState:b,setOverride:u,newBuild:j,equippedBuild:r}))})}),Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{className:"mb-2",children:Object(c.jsxs)(g.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(L.a,Object(n.a)({},{character:a,equippedBuild:r,newBuild:j,statsDisplayKeys:m,editable:d}))}),j?Object(c.jsxs)(g.a.Footer,{children:[Object(c.jsx)(p.a,{onClick:function(){w.a.equipArtifacts(i,j.artifactIds),null===o||void 0===o||o()},children:"Equip All artifacts to current character"}),O&&Object(c.jsx)(V.a,{className:"float-right text-right mb-0 py-2",variant:"orange",children:Object(c.jsx)("b",{children:"Assume Main Stats are Fully Leveled"})})]}):null]})})}),Object(c.jsx)(S.a,{className:"mb-n2",children:Object(c.jsx)(y.a,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{sm:6,lg:4,className:"mb-2",children:Object(c.jsxs)(g.a,{className:"h-100 d-flex flex-column",bg:"lightcontent",text:"lightfont",children:[Object(c.jsx)(g.a.Header,{children:"Artifact Set Effects"}),Object(c.jsx)(g.a.Body,{className:"flex-grow-1",children:Object(c.jsx)(S.a,{children:Object.entries(k.a.getSetEffects(x.setToSlots)).map((function(e){var t=Object(_.a)(e,2),a=t[0],n=t[1];return Object(c.jsxs)(y.a,{xs:12,className:"mb-2",children:[Object(c.jsx)("h5",{children:k.a.getSetName(a)}),Object(c.jsx)(S.a,{children:n.map((function(e){var t=k.a.getArtifactSetNumStats(a,e),n=0,s=k.a.getSetEffectConditional(a,e);s&&(n=F.a.getConditionalNum(l,{srcKey:a,srcKey2:e}),Object.entries(k.a.getConditionalStats(a,e,n)).forEach((function(e){var a=Object(_.a)(e,2),c=a[0],n=a[1];return t[c]=(t[c]||0)+n})));var i=Object(c.jsx)(A.a,{disabled:!!j,conditional:s,conditionalNum:n,setConditional:function(t){return function(e,t,a){return null===b||void 0===b?void 0:b((function(c){return{artifactConditionals:F.a.setConditional(c.artifactConditionals,{srcKey:e,srcKey2:t},a)}}))}(a,e,t)},defEle:Object(c.jsxs)(v.a,{variant:"success",children:[e,"-Set"]})});return Object(c.jsxs)(y.a,{xs:12,className:"mb-2",children:[Object(c.jsxs)("h6",{children:[i," ",k.a.getSetEffectText(a,e,x.finalStats)]}),t?Object(c.jsx)(S.a,{children:Object.entries(t).map((function(e){var t=Object(_.a)(e,2),a=t[0],n=t[1];return Object(c.jsxs)(y.a,{xs:12,children:[E.a.getStatName(a),": ",n,E.a.getStatUnit(a)]},a)}))}):null]},e)}))})]},a)}))})})]})}),h?k.a.getSlotKeys().map((function(e){var t=h.find((function(t){return t.slotKey===e}));return t?Object(c.jsx)(y.a,{sm:6,lg:4,className:"mb-2",children:Object(c.jsx)(W.a,{artifactObj:t})},e):null})):k.a.getSlotKeys().map((function(e){return x.artifactIds[e]?Object(c.jsx)(y.a,{sm:6,lg:4,className:"mb-2",children:Object(c.jsx)(W.a,{artifactId:x.artifactIds[e],editable:Boolean(o),assumeFull:O})},x.artifactIds[e]):null}))]})})})]})},D=a(58),M=a(27),P=a(165),q=a(116),H=a(113),R=a(110),G=a(114),X=a(115),J=a(135),Q=a(127),Y=a(125),Z=a(134);function $(e){var t,a=e.character,s=e.character,i=s.characterKey,l=s.constellation,r=e.editable,b=e.setOverride,h=e.setConstellation,x=Object(o.useState)(!1),O=Object(_.a)(x,2),m=O[0],f=O[1],v=w.a.getElementalKey(i),N=w.a.getWeaponTypeKey(i),k=w.a.getStatValueWithOverride(a,"characterLevel");return Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{xs:12,md:3,children:Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Img,{src:w.a.getCard(i),className:"w-100 h-auto"}),Object(c.jsx)(g.a.Body,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsxs)(y.a,{xs:12,children:[Object(c.jsxs)("h3",{children:[w.a.getName(i)," ",Object(c.jsx)(u.a,{src:R.a.elements[v],className:"inline-icon"})," ",Object(c.jsx)(u.a,{src:null===(t=R.a.weaponTypes)||void 0===t?void 0:t[N],className:"inline-icon"})]}),Object(c.jsx)("h6",{children:Object(c.jsx)(X.a,{stars:w.a.getStar(i),colored:!0})})]}),Object(c.jsx)(y.a,{children:m?Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Object(c.jsxs)(P.a,{children:[Object(c.jsx)(P.a.Prepend,{children:Object(c.jsx)(P.a.Text,{children:"Lvl."})}),Object(c.jsx)(G.a,{onValueChange:function(e){return b("characterLevel",Object(I.a)(e,1,90))},value:k}),Object(c.jsx)(P.a.Append,{children:Object(c.jsx)(p.a,{children:Object(c.jsx)(d.a,{icon:j.F,size:"sm",onClick:function(){return b("characterLevel",w.a.getLevel(a.levelKey))}})})}),Object(c.jsx)(P.a.Append,{children:Object(c.jsx)(q.a,{placement:"bottom",overlay:Object(c.jsx)(H.a,{children:"Override the level value for calculations. Does not change Stats."}),children:Object(c.jsx)(p.a,{variant:"danger",onClick:function(){return f(!m)},size:"sm",children:Object(c.jsx)("span",{children:Object(c.jsx)(d.a,{icon:j.u})})})})})]})})}):Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{children:Object(c.jsxs)("h5",{children:["Level: ",k]})}),r?Object(c.jsx)(y.a,{xs:"auto",className:"pr-1 pl-1",children:Object(c.jsx)(p.a,{variant:"info",onClick:function(){return f(!m)},size:"sm",children:Object(c.jsx)("span",{children:Object(c.jsx)(d.a,{icon:j.h})})})}):null]})}),Object(c.jsx)(y.a,{xs:12,children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{xs:12,children:Object(c.jsx)("h5",{children:w.a.getConstellationName(i)})}),Object(c.jsx)(y.a,{children:Object(c.jsx)(S.a,{className:"px-2",children:Object(M.a)(Array(6).keys()).map((function(e){return Object(c.jsx)(y.a,{xs:4,className:"p-1",children:Object(c.jsx)(u.a,{src:w.a.getConstellationImg(i,e),className:"w-100 h-auto ".concat(l>e?"":"overlay-dark"," cursor-pointer"),roundedCircle:!0,onClick:r?function(){return h(e+1===l?e:e+1)}:null})},e)}))})})]})})]})})]})}),Object(c.jsxs)(y.a,{xs:12,md:9,children:[Object(c.jsx)(ae,Object(n.a)({},e)),Object(c.jsx)(ce,Object(n.a)({},e))]})]})}function ee(e){var t,a=e.statKey,n=e.val;return a?Object(c.jsxs)(y.a,{xs:12,lg:6,className:"px-3",children:[Object(c.jsx)("span",{children:Object(c.jsxs)("b",{children:[Object(Q.a)(a)," ",E.a.getStatName(a)]})}),Object(c.jsxs)("span",{className:"float-right text-right text-".concat(E.a.getStatVariant(a)),children:[(null===n||void 0===n||null===(t=n.toFixed)||void 0===t?void 0:t.call(n,E.a.fixedUnit(a)))||n,E.a.getStatUnit(a)]})]}):null}function te(e){var t=e.title,a=e.stats,n=void 0===a?{}:a,s=e.finalStats,i=void 0===s?{}:s;return 0===Object.keys(null!==n&&void 0!==n?n:{}).length?null:Object(c.jsxs)(g.a,{bg:"darkcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{className:"py-2 px-3",children:t}),Object(c.jsx)(g.a.Body,{className:"py-2 px-0",children:Object(c.jsx)(S.a,{children:Object.entries(n).map((function(e){var t=Object(_.a)(e,2),a=t[0],n=t[1];return"modifiers"===a?Object(c.jsx)(b.a.Fragment,{children:Object.entries(null!==n&&void 0!==n?n:{}).map((function(e){var t=Object(_.a)(e,2),a=t[0],n=t[1];return Object(c.jsx)(ee,{statKey:a,val:Object.entries(null!==n&&void 0!==n?n:{}).reduce((function(e,t){var a=Object(_.a)(t,2),c=a[0],n=a[1];return e+i[c]*n}),0)},a)}))},a):Object(c.jsx)(ee,{statKey:a,val:n},a)}))})})]})}function ae(e){var t=Object(o.useState)(!1),a=Object(_.a)(t,2),n=a[0],s=a[1],i=Object(o.useState)(!1),l=Object(_.a)(i,2),r=l[0],h=l[1],m=e.character,f=e.character,v=f.characterKey,N=f.weapon,k=void 0===N?{}:N,K=e.editable,I=e.setState,T=e.equippedBuild,V=e.newBuild,W=V||T,F=function(e,t){return I((function(a){return"key"===e&&(a.weapon.conditionalNum=0),a.weapon[e]=t,{weapon:a.weapon}}))},U=B.a.getWeaponSubStatKey(k.key),L=w.a.getWeaponTypeKey(v),z=k.overrideMainVal||B.a.getWeaponMainStatVal(k.key,k.levelKey),P=k.overrideSubVal||B.a.getWeaponSubStatVal(k.key,k.levelKey),q=B.a.getWeaponPassiveName(k.key),H=B.a.getWeaponBonusStat(k.key,k.refineIndex,void 0),R=B.a.getWeaponConditionalStat(k.key,k.refineIndex,k.conditionalNum,void 0),G=B.a.getWeaponConditional(k.key),J=k.conditionalNum,Y=Object(c.jsx)(A.a,{conditional:G,conditionalNum:J,setConditional:function(e){return F("conditionalNum",e)},defEle:Object(c.jsx)("span",{children:q})});return Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{children:Object(c.jsx)("span",{children:"Weapon"})}),Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:"info",size:"sm",onClick:function(){return h(!r)},children:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:j.t})," ",r?"Hide Desc.":"Show Desc."]})})}),K?Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:n?"danger":"info",onClick:function(){return s(!n)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:n?j.u:j.h})," ",n?"EXIT":"EDIT"]})})}):null]})}),Object(c.jsxs)(g.a.Body,{children:[Object(c.jsxs)(S.a,{className:"mb-2",children:[Object(c.jsx)(y.a,{xs:12,md:3,children:Object(c.jsx)(u.a,{src:B.a.getWeaponImg(k.key),className:"w-100 h-auto grad-".concat(B.a.getWeaponRarity(k.key),"star"),thumbnail:!0})}),n?Object(c.jsx)(y.a,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{lg:"auto",xs:6,className:"mb-2 pr-0",children:Object(c.jsx)(O.a,{title:B.a.getWeaponName(k.key),children:Object(M.a)(Array(5).keys()).reverse().map((function(e){return e+1})).map((function(e,t,a){return Object(c.jsxs)(b.a.Fragment,{children:[Object(c.jsx)(x.a.ItemText,{children:Object(c.jsx)(X.a,{stars:e})},"star"+e),Object.entries(B.a.getWeaponsOfType(L)).filter((function(t){var a=Object(_.a)(t,2);a[0];return a[1].rarity===e})).map((function(e){var t=Object(_.a)(e,2),a=t[0],n=t[1];return Object(c.jsx)(x.a.Item,{onClick:function(){return F("key",a)},children:n.name},a)})),t!==a.length-1&&Object(c.jsx)(x.a.Divider,{})]},e)}))})}),Object(c.jsx)(y.a,{lg:"auto",xs:6,className:"mb-2 pr-0",children:Object(c.jsxs)(O.a,{title:B.a.getLevelName(k.levelKey),children:[Object(c.jsx)(x.a.ItemText,{children:Object(c.jsx)("span",{children:"Select Weapon Level"})}),Object.entries(C.a).map((function(e){var t=Object(_.a)(e,2),a=t[0],n=t[1];return Object(c.jsx)(x.a.Item,{onClick:function(){return F("levelKey",a)},children:n},a)}))]})}),q&&Object(c.jsx)(y.a,{lg:"auto",xs:6,className:"mb-2",children:Object(c.jsxs)(O.a,{title:"Refinement ".concat(k.refineIndex+1),className:"w-100",children:[Object(c.jsx)(x.a.ItemText,{children:Object(c.jsx)("span",{children:"Select Weapon Refinement"})}),Object(c.jsx)(x.a.Divider,{}),Object(M.a)(Array(5).keys()).map((function(e){return Object(c.jsx)(x.a.Item,{onClick:function(){return F("refineIndex",e)},children:"Refinement ".concat(e+1)},e)}))]})}),Object(c.jsx)(y.a,{xs:12,className:"mb-2",children:Object(c.jsx)(Z.a,{name:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:j.l,className:"mr-2"}),"ATK"]}),placeholder:"Weapon Attack",value:z,percent:!1,onValueChange:function(e){return F("overrideMainVal",e)},defaultValue:B.a.getWeaponMainStatVal(k.key,k.levelKey)})}),U&&Object(c.jsx)(y.a,{xs:12,className:"mb-2",children:Object(c.jsx)(Z.a,{name:Object(c.jsxs)("span",{children:[Object(c.jsx)("span",{className:"mr-2",children:Object(Q.a)(U)}),E.a.getStatName(U)]}),placeholder:"Weapon Substat",value:P,percent:"%"===E.a.getStatUnit(U),onValueChange:function(e){return F("overrideSubVal",e)},defaultValue:B.a.getWeaponSubStatVal(k.key,k.levelKey)})})]})}):Object(c.jsxs)(y.a,{children:[Object(c.jsx)(S.a,{className:"mb-2",children:Object(c.jsxs)(y.a,{children:[Object(c.jsxs)("h5",{className:"mb-0",children:[B.a.getWeaponName(k.key)," ",B.a.getLevelName(k.levelKey)," ",q&&"(Refinement ".concat(k.refineIndex+1,")")]}),Object(c.jsx)("small",{children:Object(c.jsx)(X.a,{stars:B.a.getWeaponRarity(k.key)})})]})}),Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Y})}),Object(c.jsx)("p",{children:q&&B.a.getWeaponPassiveDescription(k.key,k.refineIndex,null===W||void 0===W?void 0:W.finalStats,m)}),Object(c.jsx)(te,{title:"Main Stats",stats:Object(D.a)({atk:z},U,P),finalStats:null===W||void 0===W?void 0:W.finalStats}),Object(c.jsx)(te,{title:"Bonus Stats",stats:H,finalStats:null===W||void 0===W?void 0:W.finalStats}),Object(c.jsx)(te,{title:"Conditional Stats",stats:R,finalStats:null===W||void 0===W?void 0:W.finalStats})]})]}),r&&Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Object(c.jsx)("small",{children:B.a.getWeaponDescription(k.key)})})})]})]})}function ce(e){var t=e.editable,a=e.character,s=e.setOverride,i=e.equippedBuild,l=e.newBuild,r=Object(o.useState)(!1),b=Object(_.a)(r,2),u=b[0],h=b[1],m=Object(o.useState)(!1),f=Object(_.a)(m,2),v=f[0],N=f[1],k=Object(o.useState)(!1),K=Object(_.a)(k,2),C=K[0],I=K[1],B=["eleMas","critRate_","critDMG_","enerRech_","heal_"],T=["finalHP","finalATK","finalDEF"];T.push.apply(T,B);var V=["characterHP","hp","hp_","characterATK","atk","atk_","characterDEF","def","def_"];V.push.apply(V,B);var W=[];w.a.getElementalKeys().forEach((function(e){W.push("".concat(e,"_dmg_")),W.push("".concat(e,"_res_"))})),W.push("stamina","incHeal_","powShield_");var A=["normal_dmg_","normal_critRate_","charged_dmg_","charged_critRate_","skill_dmg_","skill_critRate_","burst_dmg_","burst_critRate_","dmg_","moveSPD_","atkSPD_","weakspotDMG_"],F=w.a.getStatValueWithOverride(a,"specializedStatKey"),U=w.a.getStatValueWithOverride(a,"specializedStatVal"),L=E.a.getStatUnit(F),z="%"===E.a.getStatUnit(F),D={character:a,equippedBuild:i,newBuild:l,editable:t};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{children:Object(c.jsx)("span",{children:"Main Base Stats"})}),t?Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:u?"danger":"info",onClick:function(){return h(!u)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:u?j.u:j.h})," ",u?"EXIT":"EDIT"]})})}):null]})}),u?Object(c.jsx)(g.a.Body,{children:Object(c.jsxs)(S.a,{className:"mb-2",children:[V.map((function(e){return Object(c.jsx)(y.a,{lg:6,xs:12,children:Object(c.jsx)(Z.a,{className:"mb-2",name:Object(c.jsxs)("span",{children:[Object(Q.a)(e)," ",E.a.getStatNamePretty(e)]}),placeholder:"Base ".concat(E.a.getStatName(e)),value:w.a.getStatValueWithOverride(a,e),percent:"%"===E.a.getStatUnit(e),onValueChange:function(t){return s(e,t)},defaultValue:w.a.getBaseStatValue(a,e)})},e)})),Object(c.jsx)(y.a,{lg:6,xs:12,children:Object(c.jsxs)(P.a,{children:[Object(c.jsxs)(O.a,{title:E.a.getStatNameWithPercent(F,"Specialized Stat"),as:P.a.Prepend,children:[Object(c.jsx)(x.a.ItemText,{children:"Select Specialized Stat "}),Y.c.map((function(e){return Object(c.jsx)(x.a.Item,{onClick:function(){return s("specializedStatKey",e)},children:E.a.getStatNameWithPercent(e)},e)}))]}),Object(c.jsx)(G.a,{float:z,placeholder:"Character Special Stat",value:w.a.getStatValueWithOverride(a,"specializedStatVal"),onValueChange:function(e){return s("specializedStatVal",e)}}),z&&Object(c.jsx)(P.a.Append,{children:Object(c.jsx)(P.a.Text,{children:"%"})})]})})]})}):Object(c.jsx)(g.a.Body,{children:Object(c.jsxs)(S.a,{className:"mb-2",children:[T.map((function(e){return Object(c.jsx)(y.a,{xs:12,lg:6,children:Object(c.jsx)(J.a,Object(n.a)({statKey:e},D))},e)})),U?Object(c.jsxs)(y.a,{lg:6,xs:12,children:[Object(c.jsxs)("span",{children:[Object(c.jsx)("b",{children:"Specialized:"})," ",Object(c.jsx)("span",{className:w.a.hasOverride(a,"specializedStatKey")?"text-warning":"",children:E.a.getStatName(F)})]}),Object(c.jsx)("span",{className:"float-right ".concat(w.a.hasOverride(a,"specializedStatVal")?"text-warning":""),children:"".concat(U).concat(L)})]}):null]})})]}),Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{children:Object(c.jsx)("span",{children:"Other Stats"})}),t&&Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:v?"danger":"info",onClick:function(){return N(!v)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:v?j.u:j.h})," ",v?"EXIT":"EDIT"]})})})]})}),v?Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(S.a,{className:"mb-2",children:W.map((function(e){return Object(c.jsx)(y.a,{lg:6,xs:12,children:Object(c.jsx)(Z.a,{className:"mb-2",name:Object(c.jsxs)("span",{children:[Object(Q.a)(e)," ",E.a.getStatName(e)]}),placeholder:"Base ".concat(E.a.getStatNameRaw(e)),value:w.a.getStatValueWithOverride(a,e),percent:"%"===E.a.getStatUnit(e),onValueChange:function(t){return s(e,t)},defaultValue:w.a.getBaseStatValue(a,e)})},e)}))})}):Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(S.a,{className:"mb-2",children:W.map((function(e){return Object(c.jsx)(y.a,{xs:12,lg:6,children:Object(c.jsx)(J.a,Object(n.a)({statKey:e},D))},e)}))})})]}),Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{children:Object(c.jsx)("span",{children:"Misc Stats"})}),t&&Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:C?"danger":"info",onClick:function(){return I(!C)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:C?j.u:j.h})," ",C?"EXIT":"EDIT"]})})})]})}),C?Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(S.a,{className:"mb-2",children:A.map((function(e){return Object(c.jsx)(y.a,{xl:6,xs:12,children:Object(c.jsx)(Z.a,{className:"mb-2",name:Object(c.jsxs)("span",{children:[Object(Q.a)(e)," ",E.a.getStatName(e)]}),placeholder:"Base ".concat(E.a.getStatNameRaw(e)),value:w.a.getStatValueWithOverride(a,e),percent:"%"===E.a.getStatUnit(e),onValueChange:function(t){return s(e,t)},defaultValue:w.a.getBaseStatValue(a,e)})},e)}))})}):Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(S.a,{className:"mb-2",children:A.map((function(e){return Object(c.jsx)(y.a,{xs:12,lg:6,children:Object(c.jsx)(J.a,Object(n.a)({statKey:e},D))},e)}))})})]})]})}var ne=a(63),se=a(243),ie=a(20);function le(e){var t=e.character,a=e.character,s=a.characterKey,i=a.levelKey,l=a.constellation,r=e.editable,j=e.setState,d=e.setOverride,o=e.newBuild,b=e.equippedBuild,u=w.a.getAscension(i),h=Object(n.a)(Object(n.a)({},e),{},{ascension:u});return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{xs:12,className:"mb-2",children:Object(c.jsx)(U.c,Object(n.a)({},{character:t,setState:j,setOverride:d,newBuild:o,equippedBuild:b}))})}),Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Object(c.jsx)(je,Object(n.a)({},e))})}),Object(c.jsxs)(S.a,{children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var t=Object(_.a)(e,2),a=t[0],s=t[1];return Object(c.jsx)(y.a,{xs:12,md:6,lg:4,className:"mb-2",children:Object(c.jsx)(he,Object(n.a)(Object(n.a)({},h),{},{talentKey:a,subtitle:s}))},a)})),w.a.getTalent(s,"sprint",!1)&&Object(c.jsx)(y.a,{xs:12,md:6,lg:4,className:"mb-2",children:Object(c.jsx)(he,Object(n.a)(Object(n.a)({},h),{},{talentKey:"sprint",subtitle:"Alternative Sprint"}))})]}),Object(c.jsx)(S.a,{children:[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var t=Object(_.a)(e,3),a=t[0],s=t[1],i=t[2],l=u>=i;return Object(c.jsx)(y.a,{style:{opacity:l?1:.5},xs:12,md:4,className:"mb-2",children:Object(c.jsx)(he,Object(n.a)(Object(n.a)({},h),{},{talentKey:a,subtitle:s}))},a)}))}),Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Object(c.jsxs)("h5",{className:"text-center",children:["Constellation Lv. ",l]})})}),Object(c.jsx)(S.a,{className:"mb-n2",children:Object(M.a)(Array(6).keys()).map((function(e){var t="constellation".concat(e+1);return Object(c.jsx)(y.a,{xs:12,md:4,className:"mb-2",style:{opacity:l>e?1:.5},children:Object(c.jsx)(he,Object(n.a)(Object(n.a)({},h),{},{talentKey:t,subtitle:"Contellation Lv. ".concat(e+1),onClickTitle:r?function(){return j({constellation:e+1===l?e:e+1})}:void 0}))},e)}))})]})}var re={superconduct_hit:function(e){var t,a=e.stats,n="superconduct_hit";return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(g.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-superconduct",children:[E.a.getStatName(n)," ",Object(c.jsx)(u.a,{src:R.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:R.a.elements.cryo,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(E.a.fixedUnit(n))]})})})},electrocharged_hit:function(e){var t,a=e.stats,n="electrocharged_hit";return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(g.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-electrocharged",children:[E.a.getStatName(n)," ",Object(c.jsx)(u.a,{src:R.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:R.a.elements.hydro,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(E.a.fixedUnit(n))]})})})},overloaded_hit:function(e){var t,a=e.stats,n="overloaded_hit";return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(g.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-overloaded",children:[E.a.getStatName(n)," ",Object(c.jsx)(u.a,{src:R.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:R.a.elements.pyro,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(E.a.fixedUnit(n))]})})})},pyro_swirl_hit:function(e){var t,a=e.stats,n=Object(o.useState)(Object.keys(de)[0]),s=Object(_.a)(n,2),i=s[0],l=s[1],r="".concat(i,"_swirl_hit");return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsxs)(g.a.Body,{className:"p-0",children:[Object(c.jsx)(O.a,{size:"sm",title:de[i],className:"d-inline-block",children:Object.entries(de).map((function(e){var t=Object(_.a)(e,2),a=t[0],n=t[1];return Object(c.jsx)(x.a.Item,{onClick:function(){return l(a)},children:n},a)}))}),Object(c.jsxs)("span",{className:"text-".concat(i," p-2"),children:[" ",null===(t=a[r])||void 0===t?void 0:t.toFixed(E.a.fixedUnit(r))]})]})})},shattered_hit:function(e){var t,a=e.stats,n="shattered_hit",s=Object(c.jsx)(q.a,{placement:"top",overlay:Object(c.jsxs)(H.a,{children:["Claymores, Plunging Attacks and ",Object(c.jsx)("span",{className:"text-geo",children:"Geo DMG"})]}),children:Object(c.jsx)(d.a,{icon:j.s,className:"ml-2",style:{cursor:"help"}})});return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(g.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-shattered",children:[E.a.getStatName(n)," ",Object(c.jsx)(u.a,{src:R.a.elements.hydro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:R.a.elements.cryo,className:"inline-icon"}),"+ ",Object(c.jsxs)("small",{className:"text-physical",children:["Heavy Attack",s," "]})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(E.a.fixedUnit(n))]})})})},crystalize_hit:function(e){var t,a=e.stats,n="crystalize_hit";return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(g.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-crystalize",children:[E.a.getStatName(n)," ",Object(c.jsx)(u.a,{src:R.a.elements.electro,className:"inline-icon"}),"/",Object(c.jsx)(u.a,{src:R.a.elements.hydro,className:"inline-icon"}),"/",Object(c.jsx)(u.a,{src:R.a.elements.pyro,className:"inline-icon"}),"/",Object(c.jsx)(u.a,{src:R.a.elements.cryo,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:R.a.elements.geo,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(E.a.fixedUnit(n))]})})})}};function je(e){var t=e.character.characterKey,a=e.newBuild,n=e.equippedBuild,s=a||n,i=w.a.getElementalKey(t),l=Object(M.a)(ie.a[i]||[]);return l.includes("shattered_hit")||"claymore"!==w.a.getWeaponTypeKey(t)||l.push("shattered_hit"),Object(c.jsx)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:Object(c.jsx)(g.a.Body,{className:"px-3 py-2",children:Object(c.jsx)(S.a,{className:"mb-n2",children:l.map((function(e){var t=re[e];return t?Object(c.jsx)(y.a,{xs:"auto",className:"mb-2",children:Object(c.jsx)(t,{stats:null===s||void 0===s?void 0:s.finalStats})},e):null}))})})})}var de={pyro:Object(c.jsxs)("span",{children:[E.a.getStatName("pyro_swirl_hit")," ",Object(c.jsx)(u.a,{src:R.a.elements.pyro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:R.a.elements.anemo,className:"inline-icon"})]}),electro:Object(c.jsxs)("span",{children:[E.a.getStatName("electro_swirl_hit")," ",Object(c.jsx)(u.a,{src:R.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:R.a.elements.anemo,className:"inline-icon"})]}),cryo:Object(c.jsxs)("span",{children:[E.a.getStatName("cryo_swirl_hit")," ",Object(c.jsx)(u.a,{src:R.a.elements.cryo,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:R.a.elements.anemo,className:"inline-icon"})]}),hydro:Object(c.jsxs)("span",{children:[E.a.getStatName("hydro_swirl_hit")," ",Object(c.jsx)(u.a,{src:R.a.elements.hydro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:R.a.elements.anemo,className:"inline-icon"})]})};function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).map((function(e){var a=Object(_.a)(e,2),n=a[0],s=a[1];return{text:E.a.getStatName(n),variant:E.a.getStatVariant(n),value:Object.entries(null!==s&&void 0!==s?s:{}).reduce((function(e,a){var c=Object(_.a)(a,2),n=c[0],s=c[1];return e+t[n]*s}),0),formulaText:Object(c.jsx)("span",{children:Object.entries(null!==s&&void 0!==s?s:{}).map((function(e,a){var n,s,i=Object(_.a)(e,2),l=i[0],r=i[1];return Object(c.jsxs)("span",{children:[0!==a?" + ":"",E.a.printStat(l,t)," * ",null!==(n=null===r||void 0===r||null===(s=r.toFixed)||void 0===s?void 0:s.call(r,3))&&void 0!==n?n:r]},a)}))}),fixed:E.a.fixedUnit(n),unit:E.a.getStatUnit(n)}}))}function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).map((function(e){var a=Object(_.a)(e,2),c=a[0],n=a[1];return"modifiers"===c?oe(n,t):{text:E.a.getStatName(c),variant:E.a.getStatVariant(c),value:n,fixed:E.a.fixedUnit(c),unit:E.a.getStatUnit(c)}})).flat()}var ue=[1,1,2,4,6,8,10];function he(e){var t=e.character,a=e.character,s=a.characterKey,i=a.constellation,l=a.talentLevelKeys,r=a.autoInfused,j=void 0!==r&&r,d=e.talentKey,o=e.subtitle,b=e.ascension,h=e.equippedBuild,m=e.newBuild,f=e.editable,v=e.setState,N=e.onClickTitle,k=void 0===N?null:N,K=Object(ne.a)(e,["onClickTitle"]),C=m||h,I=null,B=null;if("auto"===d&&w.a.isAutoInfusable(s)){var T=w.a.getElementalKey(s);B=Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:j?T:"secondary",className:"text-white",disabled:!f,onClick:f?function(){return v((function(e){return{autoInfused:!e.autoInfused}}))}:void 0,size:f?null:"sm",children:j?Object(c.jsxs)("span",{children:["Infused with ",Object(c.jsx)("b",{children:w.a.getElementalName(T)})]}):"Not Infused"})})}var _=0;if(d in l){var V=l[d],W=w.a.getTalentLevelBoost(s,d,i);if(_=V+W,f){I=Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(O.a,{title:"Talent Lv. ".concat(_+1),children:Object(M.a)(Array(ue[b]).keys()).map((function(e){return Object(c.jsxs)(x.a.Item,{onClick:function(){return t=d,a=e,v((function(e){var c=e.talentLevelKeys||{};return c[t]=a,{talentLevelKeys:c}}));var t,a},children:["Talent Lv. ",e+W+1]},e)}))})}),B]})})}else I=Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{xs:"auto",children:"Talent Level: ".concat(_+1)}),Object(c.jsx)(y.a,{xs:"auto",children:B})]})})}var E=w.a.getTalentStats(s,d,C.finalStats),U=E&&Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",className:"mt-2 ml-n2 mr-n2",children:Object(c.jsx)(se.a,{className:"text-white",variant:"flush",children:be(E,null===C||void 0===C?void 0:C.finalStats).map((function(e,t){return Object(c.jsx)(xe,Object(n.a)({index:t},Object(n.a)({field:e},K)),t)}))})})})});return Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"h-100",children:[I,Object(c.jsxs)(g.a.Body,{children:[Object(c.jsxs)(S.a,{className:"d-flex flex-row mb-2 ".concat(f&&k?"cursor-pointer":""),onClick:k,children:[Object(c.jsx)(y.a,{xs:"auto",className:"flex-shrink-1 d-flex flex-column",children:Object(c.jsx)(u.a,{src:w.a.getTalentImg(s,d),className:"thumb-mid"})}),Object(c.jsxs)(y.a,{className:"flex-grow-1",children:[Object(c.jsx)(g.a.Title,{children:w.a.getTalentName(s,d)}),Object(c.jsx)(g.a.Subtitle,{children:o})]})]}),w.a.getTalentDocument(s,d).map((function(e,a){var s,i;if("function"===typeof e&&(e=e(C.finalStats)),!e)return null;var l=e.text;"function"===typeof l&&(l=l(C.finalStats));var r=null!==(s=e.fields)&&void 0!==s?s:[],j=e.conditional;"function"===typeof j&&(j=j(C.finalStats));var o=null;if(j){var b=F.a.getConditionalNum(t.talentConditionals,{srcKey:d,srcKey2:j.conditionalKey}),u=[];if(b){var h=w.a.getTalentConditionalStats(j,b,{});u=[].concat(Object(M.a)(w.a.getTalentConditionalFields(j,b,[])),Object(M.a)(be(h,null===C||void 0===C?void 0:C.finalStats)))}o=Object(c.jsx)(y.a,{xs:12,children:Object(c.jsxs)(g.a,{bg:"darkcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsx)(A.a,{disabled:!f,conditional:j,conditionalNum:b,setConditional:function(e){return v((function(t){return{talentConditionals:F.a.setConditional(t.talentConditionals,{srcKey:d,srcKey2:j.conditionalKey},e)}}))},defEle:Object(c.jsx)("span",{children:j.condition})})}),Object(c.jsx)(se.a,{className:"text-white",variant:"flush",children:u.map((function(e,t){return Object(c.jsx)(xe,Object(n.a)({index:t},Object(n.a)({field:e},K)),t)}))})]})})}return Object(c.jsxs)(S.a,{className:"mt-2 mb-n2",children:[Object(c.jsxs)(y.a,{xs:12,children:[Object(c.jsx)("div",{className:"mb-2",children:l}),r.length>0&&Object(c.jsx)(se.a,{className:"text-white mb-2",children:null===r||void 0===r||null===(i=r.map)||void 0===i?void 0:i.call(r,(function(e,t){return Object(c.jsx)(xe,Object(n.a)({index:t},Object(n.a)({field:e},K)),t)}))})]}),o]},"section"+a)})),U]})]})}function xe(e){var t,a,n,s,i,l=e.character.compareAgainstEquipped,r=e.field,o=e.index,b=e.equippedBuild,u=e.newBuild,h=u||b;if("function"===typeof r&&(r=r(h.finalStats)),!r)return null;var x=w.a.getTalentFieldValue(r,"text",h.finalStats),O=w.a.getTalentFieldValue(r,"variant",h.finalStats),m=w.a.getTalentFieldValue(r,"formulaText",h.finalStats),f=m?Object(c.jsx)(q.a,{placement:"top",overlay:Object(c.jsx)(H.a,{children:m}),children:Object(c.jsx)(d.a,{icon:j.s,className:"ml-2",style:{cursor:"help"}})}):null,v=null;r.value?v=w.a.getTalentFieldValue(r,"value",h.finalStats):r.formula&&(v=null===(t=w.a.getTalentFieldValue(r,"formula",h.finalStats))||void 0===t||null===(a=t[0])||void 0===a?void 0:a.call(t,h.finalStats));var p=r.fixed||0,g=w.a.getTalentFieldValue(r,"unit",h.finalStats);if(l&&b&&"number"===typeof v){var y,N,S,k,K,C,I,B,T,_,V=r.value?r.value:null===(y=(N=r).formula)||void 0===y||null===(S=y.call(N,b.finalStats))||void 0===S||null===(k=S[0])||void 0===k?void 0:k.call(S,b.finalStats);"function"===typeof V&&(V=parseInt(null===(K=V)||void 0===K||null===(C=K(b.finalStats))||void 0===C||null===(I=C.toFixed)||void 0===I?void 0:I.call(C,p)));var W=v-V;v=Object(c.jsxs)("span",{children:[null!==(B=null===(T=V)||void 0===T?void 0:T.toFixed(p))&&void 0!==B?B:V,W?Object(c.jsxs)("span",{className:W>0?"text-success":"text-danger",children:[" (",W>0?"+":"",(null===W||void 0===W||null===(_=W.toFixed)||void 0===_?void 0:_.call(W,p))||W,")"]}):""]})}return Object(c.jsx)(se.a.Item,{variant:o%2?"customdark":"customdarker",className:"p-2",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:[Object(c.jsx)("b",{children:x}),f]}),Object(c.jsxs)("span",{className:"float-right text-right text-".concat(O),children:[null!==(n=null===(s=v)||void 0===s||null===(i=s.toFixed)||void 0===i?void 0:i.call(s,p))&&void 0!==n?n:v,g]})]})})}var Oe=b.a.forwardRef((function(e,t){var a=e.children,n=e.style,s=e.className,i=e["aria-labelledby"];return Object(c.jsx)("div",{ref:t,style:{style:n,minWidth:"25rem"},className:s,"aria-labelledby":i,children:Object(c.jsx)(S.a,{children:b.a.Children.toArray(a).map((function(e,t){return Object(c.jsx)(y.a,{xs:6,children:e},t)}))})})})),me=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(e){var c;Object(s.a)(this,a),(c=t.call(this,e)).forceUpdateComponent=function(){c.state.characterKey&&c.setState(T.a.get(c.state.characterKey)),c.props.forceUpdate?c.props.forceUpdate():c.forceUpdate()},c.setCharacterKey=function(e){var t,s,i=a.getInitialState(),l=T.a.get(e);l?i=Object(n.a)(Object(n.a)({},i),l):(i=Object(n.a)(Object(n.a)({},i),{},{characterKey:e,weapon:a.getIntialWeapon(e)}),c.updateCharacter(c.state)),c.setState(i),null===(t=c.props)||void 0===t||null===(s=t.setCharacterKey)||void 0===s||s.call(t,e)},c.setLevelKey=function(e){return c.setState({levelKey:e})},c.setOverride=function(e,t){return c.setState((function(a){var n=a.baseStatOverrides;return w.a.getBaseStatValue(c.state,e)===t?(delete n[e],{baseStatOverrides:n}):(n[e]=t,{baseStatOverrides:n})}))},c.setConstellation=function(e){return c.setState({constellation:e})},c.state=a.getInitialState();var i=e.characterKey,l=e.character;if(i){var r,j=null!==(r=T.a.get(i))&&void 0!==r?r:{characterKey:i,weapon:a.getIntialWeapon(i)};c.state=Object(n.a)(Object(n.a)({},c.state),j)}else l&&(c.state=Object(n.a)(Object(n.a)({},c.state),l));return c}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;Promise.all([w.a.getCharacterDataImport(),B.a.getWeaponDataImport(),k.a.getDataImport()]).then((function(){return e.forceUpdate()}))}},{key:"updateCharacter",value:function(e){delete(e=Object(I.e)(e)).compareAgainstEquipped,T.a.update(e)}},{key:"componentDidUpdate",value:function(e){e.characterKey!==this.props.characterKey&&this.props.characterKey!==this.state.characterKey&&this.setCharacterKey(this.props.characterKey),this.props.editable&&this.state.characterKey&&this.updateCharacter(this.state)}},{key:"render",value:function(){var e,t=this,a=this.props,s=a.footer,i=a.newBuild,l=a.editable,r=a.onClose,o=a.tabName,b=this.state;(null===(e=i)||void 0===e?void 0:e.finalStats)&&((i=Object(I.e)(i)).finalStats.hitMode=b.hitMode,i.finalStats.reactionMode=b.reactionMode);var k=b.characterKey,C=b.levelKey,B=b.compareAgainstEquipped,T=b.artifacts,_=w.a.calculateBuild(b),V=k?Object(c.jsxs)("span",{children:[Object(c.jsx)(u.a,{src:w.a.getThumb(k),className:"thumb-small my-n1 ml-n2",roundedCircle:!0}),Object(c.jsxs)("h6",{className:"d-inline",children:[" ",w.a.getName(k)," "]})]}):Object(c.jsx)("span",{children:"Select a Character"}),W={character:b,newBuild:i,equippedBuild:!i||B?_:void 0,editable:l,setState:function(e){return t.setState(e)},setOverride:this.setOverride,forceUpdate:this.forceUpdateComponent};return T&&(W.artifacts=T),Object(c.jsxs)(g.a,{bg:"darkcontent",text:"lightfont",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{xs:"auto",className:"mr-auto",children:l?Object(c.jsxs)(h.a,{children:[Object(c.jsxs)(x.a,{as:h.a,children:[Object(c.jsx)(N.a,{as:p.a,children:V}),Object(c.jsx)(x.a.Menu,{as:Oe,children:w.a.getAllCharacterKeys().map((function(e){return Object(c.jsx)(x.a.Item,{onClick:function(){return t.setCharacterKey(e)},children:Object(c.jsxs)("span",{children:[Object(c.jsx)(u.a,{src:w.a.getThumb(e),className:"thumb-small p-0 m-n1 grad-".concat(w.a.getStar(e),"star"),thumbnail:!0}),Object(c.jsxs)("h6",{className:"d-inline ml-2",children:[w.a.getName(e)," "]})]})},e)}))})]}),Object(c.jsxs)(O.a,{as:h.a,disabled:!k,title:Object(c.jsxs)("h6",{className:"d-inline",children:["Stats Template: ",w.a.getlevelNames(C)," "]}),children:[Object(c.jsx)(x.a.ItemText,{children:Object(c.jsx)("span",{children:"Select Base Stat Template"})}),w.a.getlevelKeys().map((function(e){return Object(c.jsx)(x.a.Item,{onClick:function(){return t.setLevelKey(e)},children:Object(c.jsxs)("h6",{children:[w.a.getlevelNames(e)," "]})},e)}))]})]}):Object(c.jsxs)("span",{children:[V," Lvl. ",w.a.getStatValueWithOverride(b,"characterLevel")]})}),i?Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsxs)(h.a,{children:[Object(c.jsx)(p.a,{variant:B?"primary":"success",disabled:!B,onClick:function(){return t.setState({compareAgainstEquipped:!1})},children:Object(c.jsx)("small",{children:"Show New artifact Stats"})}),Object(c.jsx)(p.a,{variant:B?"success":"primary",disabled:B,onClick:function(){return t.setState({compareAgainstEquipped:!0})},children:Object(c.jsx)("small",{children:"Compare against equipped artifact"})})]})}):null,Boolean(r)&&Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:"danger",onClick:r,children:Object(c.jsx)(d.a,{icon:j.B})})})]})}),Boolean(k)&&Object(c.jsx)(g.a.Body,{children:Object(c.jsxs)(m.a.Container,{defaultActiveKey:o||(i?"newartifacts":"character"),mountOnEnter:!0,unmountOnExit:!0,children:[Object(c.jsxs)(f.a,{variant:"pills",className:"mb-2 ml-2",children:[Object(c.jsx)(f.a.Item,{children:Object(c.jsx)(f.a.Link,{eventKey:"character",children:"Character"})}),i?Object(c.jsx)(f.a.Item,{children:Object(c.jsx)(f.a.Link,{eventKey:"newartifacts",children:"New Artifacts"})}):null,Object(c.jsx)(f.a.Item,{children:Object(c.jsx)(f.a.Link,{eventKey:"artifacts",children:i?"Current Artifacts":"Artifacts"})}),Object(c.jsx)(f.a.Item,{children:w.a.hasTalentPage(k)?Object(c.jsx)(f.a.Link,{eventKey:"talent",children:"Talents"}):Object(c.jsx)(K.a,{children:Object(c.jsxs)(f.a.Link,{eventKey:"talent",disabled:!0,children:["Talents ",Object(c.jsx)(v.a,{variant:"warning",children:"WIP"})]})})}),!T&&Object(c.jsx)(f.a.Item,{children:Object(c.jsx)(K.a,{children:Object(c.jsxs)(f.a.Link,{eventKey:"team",disabled:!0,children:["Team ",Object(c.jsx)(v.a,{variant:"warning",children:"WIP"})]})})})]}),Object(c.jsxs)(m.a.Content,{children:[Object(c.jsx)(m.a.Pane,{eventKey:"character",children:Object(c.jsx)($,Object(n.a)({setConstellation:this.setConstellation},W))}),Object(c.jsx)(m.a.Pane,{eventKey:"artifacts",children:Object(c.jsx)(z,Object(n.a)({},Object(n.a)(Object(n.a)({},W),{},{newBuild:void 0,equippedBuild:_})))}),i?Object(c.jsx)(m.a.Pane,{eventKey:"newartifacts",children:Object(c.jsx)(z,Object(n.a)({},W))}):null,Object(c.jsx)(m.a.Pane,{eventKey:"talent",children:Object(c.jsx)(le,Object(n.a)({},W))})]})]})}),s&&Object(c.jsx)(g.a.Footer,{children:s})]})}}]),a}(b.a.Component);me.initialState={characterKey:"",levelKey:"L1",hitMode:"hit",reactionMode:null,equippedArtifacts:{},artifactConditionals:[],baseStatOverrides:{},weapon:{key:"",levelKey:C.d[0],refineIndex:0,overrideMainVal:0,overrideSubVal:0,conditionalNum:0},talentLevelKeys:{auto:0,skill:0,burst:0},autoInfused:!1,talentConditionals:[],constellation:0,compareAgainstEquipped:!1},me.getIntialWeapon=function(e){var t=Object(I.e)(me.initialState.weapon);return t.key=Object.keys(B.a.getWeaponsOfType(w.a.getWeaponTypeKey(e)))[0],t},me.getInitialState=function(){return Object(I.e)(me.initialState)}}}]);
//# sourceMappingURL=3.61ed5bd5.chunk.js.map