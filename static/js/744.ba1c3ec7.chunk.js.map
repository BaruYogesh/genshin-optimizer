{"version":3,"file":"static/js/744.ba1c3ec7.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/DeleteForever.js","PageCharacter/index.tsx","../node_modules/@mui/icons-material/esm/Calculate.js","../node_modules/@mui/icons-material/esm/Checkroom.js","../node_modules/@mui/icons-material/esm/FactCheck.js","../node_modules/@mui/icons-material/esm/FavoriteBorder.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'DeleteForever');","import { faPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Calculate, Checkroom, DeleteForever, FactCheck, Groups } from '@mui/icons-material';\r\nimport { Box, Button, CardContent, Divider, Grid, IconButton, Pagination, Skeleton, TextField, Typography } from '@mui/material';\r\nimport i18next from 'i18next';\r\nimport React, { ChangeEvent, Suspense, useCallback, useContext, useDeferredValue, useEffect, useMemo, useRef, useState } from 'react';\r\nimport ReactGA from 'react-ga4';\r\nimport { Trans, useTranslation } from 'react-i18next';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport BootstrapTooltip from '../Components/BootstrapTooltip';\r\nimport CardDark from '../Components/Card/CardDark';\r\nimport CharacterCard from '../Components/Character/CharacterCard';\r\nimport { CharacterSelectionModal } from '../Components/Character/CharacterSelectionModal';\r\nimport SortByButton from '../Components/SortByButton';\r\nimport ElementToggle from '../Components/ToggleButton/ElementToggle';\r\nimport WeaponToggle from '../Components/ToggleButton/WeaponToggle';\r\nimport CharacterSheet from '../Data/Characters/CharacterSheet';\r\nimport { DatabaseContext } from '../Database/Database';\r\nimport useCharSelectionCallback from '../ReactHooks/useCharSelectionCallback';\r\nimport useDBState from '../ReactHooks/useDBState';\r\nimport useForceUpdate from '../ReactHooks/useForceUpdate';\r\nimport useMediaQueryUp from '../ReactHooks/useMediaQueryUp';\r\nimport usePromise from '../ReactHooks/usePromise';\r\nimport { allCharacterKeys, allElements, allWeaponTypeKeys, CharacterKey } from '../Types/consts';\r\nimport { characterFilterConfigs, characterSortConfigs, characterSortKeys } from '../Util/CharacterSort';\r\nimport { filterFunction, sortFunction } from '../Util/SortByFilters';\r\nimport { clamp } from '../Util/Util';\r\n\r\nconst columns = { xs: 1, sm: 2, md: 3, lg: 4, xl: 4 }\r\nconst numToShowMap = { xs: 6 - 1, sm: 8 - 1, md: 12 - 1, lg: 16 - 1, xl: 16 - 1 }\r\n\r\nfunction initialState() {\r\n  return {\r\n    sortType: characterSortKeys[0],\r\n    ascending: false,\r\n    weaponType: [...allWeaponTypeKeys],\r\n    element: [...allElements],\r\n  }\r\n}\r\n\r\nexport default function PageCharacter(props) {\r\n  // TODO: #412 We shouldn't be loading all the character translation files. Should have a separate lookup file for character name.\r\n  const { t } = useTranslation([\"page_character\", ...allCharacterKeys.map(k => `char_${k}_gen`)])\r\n  const { database } = useContext(DatabaseContext)\r\n  const [state, stateDispatch] = useDBState(\"CharacterDisplay\", initialState)\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n  const deferredSearchTerm = useDeferredValue(searchTerm)\r\n  const [pageIdex, setpageIdex] = useState(0)\r\n  const invScrollRef = useRef<HTMLDivElement>(null)\r\n  const setPage = useCallback(\r\n    (e, value) => {\r\n      invScrollRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n      setpageIdex(value - 1);\r\n    },\r\n    [setpageIdex, invScrollRef],\r\n  )\r\n\r\n  const brPt = useMediaQueryUp()\r\n  const maxNumToDisplay = numToShowMap[brPt]\r\n\r\n  const [newCharacter, setnewCharacter] = useState(false)\r\n  const [dbDirty, forceUpdate] = useForceUpdate()\r\n  //set follow, should run only once\r\n  useEffect(() => {\r\n    ReactGA.send({ hitType: \"pageview\", page: '/characters' })\r\n    return database.followAnyChar(forceUpdate)\r\n  }, [forceUpdate, database])\r\n\r\n  const characterSheets = usePromise(CharacterSheet.getAll, [])\r\n\r\n  const deleteCharacter = useCallback(async (cKey: CharacterKey) => {\r\n    const chararcterSheet = await CharacterSheet.get(cKey)\r\n    let name = chararcterSheet?.name\r\n    //use translated string\r\n    if (typeof name === \"object\")\r\n      name = i18next.t(`char_${cKey}_gen:name`)\r\n\r\n    if (!window.confirm(t(\"removeCharacter\", { value: name }))) return\r\n    database.removeChar(cKey)\r\n  }, [database, t])\r\n\r\n  const editCharacter = useCharSelectionCallback()\r\n\r\n  const navigate = useNavigate()\r\n\r\n  const sortConfigs = useMemo(() => characterSheets && characterSortConfigs(database, characterSheets), [database, characterSheets])\r\n  const filterConfigs = useMemo(() => characterSheets && characterFilterConfigs(database, characterSheets), [database, characterSheets])\r\n  const deferredState = useDeferredValue(state)\r\n  const { charKeyList, totalCharNum } = useMemo(() => {\r\n    const chars = database._getCharKeys()\r\n    const totalCharNum = chars.length\r\n    if (!sortConfigs || !filterConfigs) return { charKeyList: [], totalCharNum }\r\n    const { element, weaponType, sortType, ascending } = deferredState\r\n    const charKeyList = database._getCharKeys()\r\n      .filter(filterFunction({ element, weaponType, favorite: \"yes\", name: deferredSearchTerm }, filterConfigs))\r\n      .sort(sortFunction(sortType, ascending, sortConfigs))\r\n      .concat(\r\n        database._getCharKeys()\r\n          .filter(filterFunction({ element, weaponType, favorite: \"no\", name: deferredSearchTerm }, filterConfigs))\r\n          .sort(sortFunction(sortType, ascending, sortConfigs)))\r\n    return dbDirty && { charKeyList, totalCharNum }\r\n  },\r\n    [dbDirty, database, sortConfigs, filterConfigs, deferredState, deferredSearchTerm])\r\n\r\n  const { weaponType, element, sortType, ascending } = state\r\n\r\n  const { charKeyListToShow, numPages, currentPageIndex } = useMemo(() => {\r\n    const numPages = Math.ceil(charKeyList.length / maxNumToDisplay)\r\n    const currentPageIndex = clamp(pageIdex, 0, numPages - 1)\r\n    return { charKeyListToShow: charKeyList.slice(currentPageIndex * maxNumToDisplay, (currentPageIndex + 1) * maxNumToDisplay), numPages, currentPageIndex }\r\n  }, [charKeyList, pageIdex, maxNumToDisplay])\r\n\r\n  const totalShowing = charKeyList.length !== totalCharNum ? `${charKeyList.length}/${totalCharNum}` : `${totalCharNum}`\r\n\r\n  return <Box my={1} display=\"flex\" flexDirection=\"column\" gap={1}>\r\n    <CardDark ref={invScrollRef} ><CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 1 }}>\r\n      <Grid container spacing={1}>\r\n        <Grid item>\r\n          <WeaponToggle sx={{ height: \"100%\" }} onChange={weaponType => stateDispatch({ weaponType })} value={weaponType} size=\"small\" />\r\n        </Grid>\r\n        <Grid item>\r\n          <ElementToggle sx={{ height: \"100%\" }} onChange={element => stateDispatch({ element })} value={element} size=\"small\" />\r\n        </Grid>\r\n        <Grid item flexGrow={1}>\r\n          <TextField\r\n            autoFocus\r\n            value={searchTerm}\r\n            onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setSearchTerm(e.target.value)}\r\n            label={t(\"characterName\")}\r\n          />\r\n        </Grid>\r\n        <Grid item >\r\n          <SortByButton sx={{ height: \"100%\" }}\r\n            sortKeys={characterSortKeys} value={sortType} onChange={sortType => stateDispatch({ sortType })}\r\n            ascending={ascending} onChangeAsc={ascending => stateDispatch({ ascending })} />\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container alignItems=\"flex-end\">\r\n        <Grid item flexGrow={1}>\r\n          <Pagination count={numPages} page={currentPageIndex + 1} onChange={setPage} />\r\n        </Grid>\r\n        <Grid item>\r\n          <ShowingCharacter numShowing={charKeyListToShow.length} total={totalShowing} t={t} />\r\n        </Grid>\r\n      </Grid>\r\n    </CardContent></CardDark>\r\n    <Suspense fallback={<Skeleton variant=\"rectangular\" sx={{ width: \"100%\", height: \"100%\", minHeight: 5000 }} />}>\r\n      <Grid container spacing={1} columns={columns}>\r\n        <Grid item xs={1} >\r\n          <CardDark sx={{ height: \"100%\", minHeight: 400, width: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n            <CardContent>\r\n              <Typography sx={{ textAlign: \"center\" }}><Trans t={t} i18nKey=\"addNew\" /></Typography>\r\n            </CardContent>\r\n            <CharacterSelectionModal newFirst show={newCharacter} onHide={() => setnewCharacter(false)} onSelect={editCharacter} />\r\n            <Box sx={{\r\n              flexGrow: 1,\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\"\r\n            }}\r\n            >\r\n              <Button onClick={() => setnewCharacter(true)} color=\"info\" sx={{ borderRadius: \"1em\" }}>\r\n                <Typography variant=\"h1\"><FontAwesomeIcon icon={faPlus} className=\"fa-fw\" /></Typography>\r\n              </Button>\r\n            </Box>\r\n          </CardDark>\r\n        </Grid>\r\n        {charKeyListToShow.map(charKey =>\r\n          <Grid item key={charKey} xs={1} >\r\n            <CharacterCard\r\n              characterKey={charKey}\r\n              onClick={() => navigate(`${charKey}`)}\r\n              footer={<><Divider /><Box sx={{ py: 1, px: 2, display: \"flex\", gap: 1, justifyContent: \"space-between\" }}>\r\n                <BootstrapTooltip placement=\"top\" title={<Typography>{t(\"tabs.talent\")}</Typography>}>\r\n                  <IconButton onClick={() => navigate(`${charKey}/talent`)}>\r\n                    <FactCheck />\r\n                  </IconButton>\r\n                </BootstrapTooltip>\r\n                <BootstrapTooltip placement=\"top\" title={<Typography>{t(\"tabs.equip\")}</Typography>}>\r\n                  <IconButton onClick={() => navigate(`${charKey}/equip`)} >\r\n                    <Checkroom />\r\n                  </IconButton>\r\n                </BootstrapTooltip>\r\n                <BootstrapTooltip placement=\"top\" title={<Typography>{t(\"tabs.teambuffs\")}</Typography>}>\r\n                  <IconButton onClick={() => navigate(`${charKey}/teambuffs`)} >\r\n                    <Groups />\r\n                  </IconButton>\r\n                </BootstrapTooltip>\r\n                <BootstrapTooltip placement=\"top\" title={<Typography>{t(\"tabs.optimize\")}</Typography>}>\r\n                  <IconButton onClick={() => navigate(`${charKey}/optimize`)} >\r\n                    <Calculate />\r\n                  </IconButton>\r\n                </BootstrapTooltip>\r\n                <Divider orientation=\"vertical\" />\r\n                <BootstrapTooltip placement=\"top\" title={<Typography>{t(\"delete\")}</Typography>}>\r\n                  <IconButton color=\"error\" onClick={() => deleteCharacter(charKey)}>\r\n                    <DeleteForever />\r\n                  </IconButton>\r\n                </BootstrapTooltip>\r\n              </Box></>}\r\n            />\r\n          </Grid>)}\r\n      </Grid>\r\n    </Suspense>\r\n    {numPages > 1 && <CardDark ><CardContent>\r\n      <Grid container alignItems=\"flex-end\">\r\n        <Grid item flexGrow={1}>\r\n          <Pagination count={numPages} page={currentPageIndex + 1} onChange={setPage} />\r\n        </Grid>\r\n        <Grid item>\r\n          <ShowingCharacter numShowing={charKeyListToShow.length} total={totalShowing} t={t} />\r\n        </Grid>\r\n      </Grid>\r\n    </CardContent></CardDark>}\r\n  </Box>\r\n}\r\nfunction ShowingCharacter({ numShowing, total, t }) {\r\n  return <Typography color=\"text.secondary\">\r\n    <Trans t={t} i18nKey=\"showingNum\" count={numShowing} value={total} >\r\n      Showing <b>{{ count: numShowing }}</b> out of {{ value: total }} Characters\r\n    </Trans>\r\n  </Typography>\r\n}\r\n","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5.97 4.06L14.09 6l1.41 1.41L16.91 6l1.06 1.06-1.41 1.41 1.41 1.41-1.06 1.06-1.41-1.4-1.41 1.41-1.06-1.06 1.41-1.41-1.41-1.42zm-6.78.66h5v1.5h-5v-1.5zM11.5 16h-2v2H8v-2H6v-1.5h2v-2h1.5v2h2V16zm6.5 1.25h-5v-1.5h5v1.5zm0-2.5h-5v-1.5h5v1.5z\"\n}), 'Calculate');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8zM6 18l6-4.5 6 4.5H6z\"\n}), 'Checkroom');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42L14.82 15z\"\n}), 'FactCheck');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z\"\n}), 'FavoriteBorder');","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["createSvgIcon","_jsx","d","columns","xs","sm","md","lg","xl","numToShowMap","initialState","sortType","characterSortKeys","ascending","weaponType","allWeaponTypeKeys","element","allElements","PageCharacter","props","t","useTranslation","allCharacterKeys","k","database","useContext","DatabaseContext","useDBState","state","stateDispatch","useState","searchTerm","setSearchTerm","deferredSearchTerm","useDeferredValue","pageIdex","setpageIdex","invScrollRef","useRef","setPage","useCallback","e","value","current","scrollIntoView","behavior","brPt","useMediaQueryUp","maxNumToDisplay","newCharacter","setnewCharacter","useForceUpdate","dbDirty","forceUpdate","useEffect","ReactGA","hitType","page","followAnyChar","characterSheets","usePromise","CharacterSheet","deleteCharacter","cKey","chararcterSheet","name","i18next","window","confirm","removeChar","editCharacter","useCharSelectionCallback","navigate","useNavigate","sortConfigs","useMemo","characterSortConfigs","filterConfigs","characterFilterConfigs","deferredState","totalCharNum","_getCharKeys","length","charKeyList","filter","filterFunction","favorite","sort","sortFunction","concat","numPages","Math","ceil","currentPageIndex","clamp","charKeyListToShow","slice","totalShowing","Box","my","display","flexDirection","gap","CardDark","ref","CardContent","sx","Grid","container","spacing","item","WeaponToggle","height","onChange","size","ElementToggle","flexGrow","TextField","autoFocus","target","label","SortByButton","sortKeys","onChangeAsc","alignItems","Pagination","count","ShowingCharacter","numShowing","total","Suspense","fallback","Skeleton","variant","width","minHeight","Typography","textAlign","Trans","i18nKey","CharacterSelectionModal","newFirst","show","onHide","onSelect","justifyContent","Button","onClick","color","borderRadius","icon","faPlus","className","map","charKey","CharacterCard","characterKey","footer","Divider","py","px","BootstrapTooltip","placement","title","IconButton","FactCheck","Checkroom","Groups","Calculate","orientation","DeleteForever","fillRule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined"],"sourceRoot":""}