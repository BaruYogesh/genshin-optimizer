(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[17],{183:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l}));var n=a(10),c=(a(28),a(54)),r=(a(3),a(74));function i(e,t){return function(e,t){for(var a=new Set(t.map((function(e){return e.key}))),r={},i=Object.keys(e),s=0,l=i;s<l.length;s++){var o,u,j=l[s],d={},b=Object(c.a)(null!==(o=e[j])&&void 0!==o?o:[]);try{for(b.s();!(u=b.n()).done;){var h=u.value;a.has(h.setKey)?d[h.setKey]?d[h.setKey].push(h):d[h.setKey]=[h]:d.null?d.null.push(h):d.null=[h]}}catch(f){b.e(f)}finally{b.f()}r[j]=Object.freeze(d)}var O={},m={},x=[];return function e(a){if(a>=i.length){var s,l=Object(c.a)(t);try{for(l.s();!(s=l.n()).done;){var o,u=s.value,j=u.key,d=u.num;if((null!==(o=O[j])&&void 0!==o?o:0)<d)return}}catch(f){l.e(f)}finally{l.f()}x.push(Object(n.a)({},m))}else{var b=i[a],h=r[b];for(var v in h){var p;O[v]=(null!==(p=O[v])&&void 0!==p?p:0)+1,m[b]=h[v],e(a+1),O[v]-=1}}}(0),x}(e,t).reduce((function(e,t){return e+Object.entries(t).reduce((function(e,t){return e*t[1].length}),1)}),0)}function s(e,t,a){var n=t.hitMode,c=void 0===n?"":n,i=t.infusionAura,s=void 0===i?"":i,l=t.infusionSelf,o=void 0===l?"":l,u=t.reactionMode,j=void 0===u?null:u,d=t.characterEle,b=void 0===d?"anemo":d,h=t.weaponType,O=void 0===h?"sword":h;if(Object.keys(r.a).includes(e))return"".concat(e,"_elemental_").concat(c);if(a||"catalyst"!==O||(a=b),"elemental"===e||"burst"===e||"skill"===e||a)return j&&j.startsWith(a||b)?"".concat(j,"_").concat(e,"_").concat(c):"".concat(a||b,"_").concat(e,"_").concat(c);var m="physical";return o?m=o:s&&(m=s),j&&j.startsWith(m)?"".concat(j,"_").concat(e,"_").concat(c):"".concat(m,"_").concat(e,"_").concat(c)}function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Object.keys(r.a).includes(e))return e;var n=t.infusionAura,c=void 0===n?"":n,i=t.infusionSelf,s=void 0===i?"":i,l=t.reactionMode,o=void 0===l?null:l,u=t.characterEle,j=void 0===u?"anemo":u,d=t.weaponType,b=void 0===d?"sword":d;if(a||"catalyst"!==b||(a=j),"elemental"===e||"burst"===e||"skill"===e||a){if(o&&o.startsWith(a||j)){if(["pyro_vaporize","hydro_vaporize"].includes(o))return"vaporize";if(["pyro_melt","cryo_melt"].includes(o))return"melt"}return a||j}var h="physical";if(s?h=s:c&&(h=c),o&&o.startsWith(h)){if(["pyro_vaporize","hydro_vaporize"].includes(o))return"vaporize";if(["pyro_melt","cryo_melt"].includes(o))return"melt"}return h}},220:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(9);function c(e){var t=e%1e3,a=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:n,seconds:a,milliseconds:t}}function r(e){var t=c(e),a=t.hours,r=t.minutes,i=t.seconds,s="Minutes";return a&&(s="Hours"),"".concat(a?"".concat(a,":"):"").concat(Object(n.r)(r,"0",2),":").concat(Object(n.r)(i,"0",2)," ").concat(s)}function i(e){var t=c(e),a=t.hours,r=t.minutes,i=t.seconds,s=t.milliseconds,l="Minutes";return a&&(l="Hours"),"".concat(a?"".concat(a,":"):"").concat(Object(n.r)(r,"0",2),":").concat(Object(n.r)(i,"0",2),".").concat(Object(n.r)(s,"0",3)," ").concat(l)}},331:function(e,t,a){"use strict";var n=a(2),c=a(5),r=a(6),i=a.n(r),s=a(0),l=a.n(s),o=a(8),u=a(195),j=["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"],d=["isChild"],b=["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"];function h(e,t,a){var n=(e-t)/(a-t)*100;return Math.round(1e3*n)/1e3}function O(e,t){var a,r=e.min,s=e.now,o=e.max,u=e.label,d=e.srOnly,b=e.striped,O=e.animated,m=e.className,x=e.style,f=e.variant,v=e.bsPrefix,p=Object(c.a)(e,j);return l.a.createElement("div",Object(n.a)({ref:t},p,{role:"progressbar",className:i()(m,v+"-bar",(a={},a["bg-"+f]=f,a[v+"-bar-animated"]=O,a[v+"-bar-striped"]=O||b,a)),style:Object(n.a)({width:h(s,r,o)+"%"},x),"aria-valuenow":s,"aria-valuemin":r,"aria-valuemax":o}),d?l.a.createElement("span",{className:"sr-only"},u):u)}var m=l.a.forwardRef((function(e,t){var a=e.isChild,r=Object(c.a)(e,d);if(r.bsPrefix=Object(o.a)(r.bsPrefix,"progress"),a)return O(r,t);var j=r.min,h=r.now,m=r.max,x=r.label,f=r.srOnly,v=r.striped,p=r.animated,g=r.bsPrefix,y=r.variant,S=r.className,k=r.children,N=Object(c.a)(r,b);return l.a.createElement("div",Object(n.a)({ref:t},N,{className:i()(S,g)}),k?Object(u.a)(k,(function(e){return Object(s.cloneElement)(e,{isChild:!0})})):O({min:j,now:h,max:m,label:x,srOnly:f,striped:v,animated:p,bsPrefix:g,variant:y},t))}));m.displayName="ProgressBar",m.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1},t.a=m},491:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return le}));var n=a(106),c=a(54),r=a(40),i=a.n(r),s=a(57),l=a(3),o=a(28),u=a(10),j=a(14),d=a(50),b=a(0),h=a.n(b),O=a(77),m=a(256),x=a(166),f=a(58),v=a(30),p=a(25),g=a(56),y=a(146),S=a(189),k=a(203),N=a(202),w=a(492),C=a(482),A=a(198),B=a(218),K=a(172),M=a(331),E=a(44);function T(){return new Worker(a.p+"static/js/BuildWorker.aff97a3d.worker.js")}var F=a(43),D=a(105),I=a(259),z=a(185),P=a(258),_=a(263),L=a(260),H=a(107),V=a(205),q=a(186),R=a(184),W=a(190),U=a(210),G=a(16),J=a(12),Y=a(104),X=a(220),Q=a(9),Z=a(109),$=a(183),ee=a(200),te=a(42),ae=a(1),ne=h.a.lazy((function(){return a.e(20).then(a.bind(null,490))})),ce=Object(b.lazy)((function(){return Promise.resolve().then(a.bind(null,214))})),re=1e7,ie=[50,25,10,5],se=["sands","goblet","circlet"];function le(e){var t,a,n=e.location.characterKey,r=Object(b.useState)(""),h=Object(l.a)(r,2),C=h[0],A=h[1],B=Object(b.useState)([]),K=Object(l.a)(B,2),M=K[0],_=K[1],L=Object(b.useState)(25),q=Object(l.a)(L,2),R=q[0],X=q[1],ce=Object(b.useState)(null),le=Object(l.a)(ce,2),de=le[0],xe=le[1],ve=Object(b.useState)(!1),pe=Object(l.a)(ve,2),ge=pe[0],ye=pe[1],Se=Object(b.useState)(!1),ke=Object(l.a)(Se,2),Ne=ke[0],we=ke[1],Ce=Object(b.useState)(!1),Ae=Object(l.a)(Ce,2),Be=Ae[0],Ke=Ae[1],Me=Object(b.useState)(0),Ee=Object(l.a)(Me,2),Te=Ee[0],Fe=Ee[1],De=Object(b.useState)(0),Ie=Object(l.a)(De,2),ze=Ie[0],Pe=Ie[1],_e=Object(b.useState)(0),Le=Object(l.a)(_e,2),He=Le[0],Ve=Le[1],qe=Object(Y.a)(),Re=Object(l.a)(qe,2),We=Re[0],Ue=Re[1],Ge=Object(Y.b)(D.a.getAll(),[]),Je=Object(Y.a)(),Ye=Object(l.a)(Je,2),Xe=Ye[0],Qe=Ye[1],Ze=Object(b.useRef)(!1),$e=Object(b.useRef)(null),et=Object(b.useState)({}),tt=Object(l.a)(et,2),at=tt[0],nt=at.character,ct=at.characterSheet,rt=at.weaponSheet,it=at.initialStats,st=at.statsDisplayKeys,lt=tt[1],ot=null!==(t=null===nt||void 0===nt?void 0:nt.buildSettings)&&void 0!==t?t:{setFilters:[{key:"",num:0},{key:"",num:0},{key:"",num:0}],statFilters:{},mainStatKeys:["","",""],optimizationTarget:"finalATK",mainStatAssumptionLevel:0,useLockedArts:!1,useEquippedArts:!1,ascending:!1},ut=ot.setFilters,jt=ot.statFilters,dt=ot.mainStatKeys,bt=ot.optimizationTarget,ht=ot.mainStatAssumptionLevel,Ot=ot.useLockedArts,mt=ot.useEquippedArts,xt=ot.ascending,ft=Object(b.useCallback)((function(e){nt&&(nt.buildSettings=function(e,t){switch(t.type){case"mainStatKey":var a=t.index,n=t.mainStatKey;return e.mainStatKeys[a]=n,Object(u.a)(Object(u.a)({},e),{},{mainStatKeys:Object(o.a)(e.mainStatKeys)});case"setFilter":var c=t.index,r=t.key,i=t.num,s=void 0===i?0:i;return e.setFilters[c]={key:r,num:s},Object(u.a)(Object(u.a)({},e),{},{setFilters:Object(o.a)(e.setFilters)})}return Object(u.a)(Object(u.a)({},e),t)}(ot,e),te.a.updateChar(nt))}),[nt,ot]);Object(b.useEffect)((function(){return E.a.pageview("/build")}),[]),Object(b.useEffect)((function(){Object(s.a)(i.a.mark((function e(){var t,a,n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:if(t=te.a._getChar(C)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,H.b.get(C);case 7:return a=e.sent,e.next=10,Z.a.get(t.weapon.key);case 10:if(n=e.sent,a&&n){e.next=13;break}return e.abrupt("return");case 13:c=z.a.createInitialStats(t,a,n),r=z.a.getDisplayStatKeys(c,a),lt({character:t,characterSheet:a,weaponSheet:n,initialStats:c,statsDisplayKeys:r});case 16:case"end":return e.stop()}}),e)})))()}),[We,C]),Object(b.useEffect)((function(){return te.a.followAnyArt(Qe)}),[Qe]),Object(b.useEffect)((function(){return C?te.a.followChar(C,Ue):void 0}),[C,Ue]),Object(b.useEffect)((function(){return function(){var e;return null===(e=$e.current)||void 0===e?void 0:e.terminate()}}),[]);var vt=Object(b.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";C!==e&&(A(e),_([]),Ue(),lt({}))}),[Ue,A,C]);Object(b.useEffect)((function(){var e;if("BuildsDisplay.state"in localStorage){var t=null!==(e=Object(Q.m)("BuildsDisplay.state"))&&void 0!==e?e:{},a=t.characterKey,n=void 0===a?"":a,c=t.maxBuildsToShow,r=void 0===c?25:c;n&&te.a._getChar(n)&&vt(n),X(r)}}),[]),Object(b.useEffect)((function(){return n&&vt(n)}),[n,vt]),Object(b.useEffect)((function(){Ze.current?Object(Q.q)("BuildsDisplay.state",{characterKey:C,maxBuildsToShow:R}):Ze.current=!0}),[C,R]),Object(b.useEffect)((function(){if(st&&Array.isArray(bt)){for(var e in st){var t,a=st[e],n=Object(c.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(JSON.stringify(r)===JSON.stringify(bt))return}}catch(i){n.e(i)}finally{n.f()}}ft({optimizationTarget:"finalATK"})}}),[bt,st,ft]);var pt=Object(b.useMemo)((function(){if(!C)return{split:Object.fromEntries(J.h.map((function(e){return[e,[]]}))),totBuildNumber:0};var e=te.a._getArts().filter((function(e){return e.location===C||!(e.lock&&!Ot)&&!(e.location&&!mt)})),t=F.a.splitArtifactsBySlot(e);se.forEach((function(e,a){var n;return dt[a]&&(t[e]=null===(n=t[e])||void 0===n?void 0:n.filter((function(e){return e.mainStatKey===dt[a]})))}));var a=Object($.a)(t,ut);return Xe&&{split:t,totBuildNumber:a}}),[C,Ot,mt,dt,ut,Xe]),gt=pt.split,yt=pt.totBuildNumber,St=Object(b.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(it&&Ge){"boolean"!==typeof t&&(t=!1),_([]),Ke(!0),Pe(0),Fe(0),Ve(0),it.mainStatAssumptionLevel=ht;var a=F.a.setEffectsObjs(Ge,it),n=Object(Q.d)(gt);Object.values(n).forEach((function(e){e.forEach((function(e){var t;e.mainStatVal=null!==(t=F.a.mainStatValue(e.mainStatKey,e.numStars,Math.max(Math.min(ht,4*e.numStars),e.level)))&&void 0!==t?t:0}))}));var c=Object.fromEntries(Object.entries(jt).map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1].min]})).filter((function(e){return"number"===typeof Object(l.a)(e,2)[1]}))),r=Object.fromEntries(Object.entries(jt).map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1].max]})).filter((function(e){return"number"===typeof Object(l.a)(e,2)[1]}))),i={splitArtifacts:n,initialStats:it,artifactSetEffects:a,setFilters:ut,minFilters:c,maxFilters:r,maxBuildsToShow:R,optimizationTarget:bt,ascending:xt,turbo:t};null===(e=$e.current)||void 0===e||e.terminate(),$e.current=new T,$e.current.onmessage=function(e){var t;if("number"===typeof e.data.progress){var a=e.data,n=a.progress,c=a.timing,r=void 0===c?0:c,i=a.skipped,s=void 0===i?0:i;return Fe(n),Pe(r),void Ve(s)}E.a.timing({category:"Build Generation",variable:"timing",value:e.data.timing,label:yt.toString()});var l=e.data.builds.map((function(e){return z.a.calculateBuildwithArtifact(it,e.artifacts,Ge)}));_(l),Ke(!1),null===(t=$e.current)||void 0===t||t.terminate(),$e.current=null},$e.current.postMessage(i)}}),[Ge,gt,yt,ht,xt,it,R,bt,ut,jt]);Object(b.useEffect)((function(){yt&&yt<=100?St():_([])}),[C,gt,yt,ot,St]);var kt=Object(b.useCallback)((function(e,t){return Ge&&D.a.setsWithMaxRarity(Ge,e).map((function(e){var a,n,c=Object(l.a)(e,2),r=c[0],i=c[1];if(ut.some((function(e){return e.key===r})))return!1;var s=Object.keys(null!==(a=null===Ge||void 0===Ge||null===(n=Ge[r])||void 0===n?void 0:n.setEffects)&&void 0!==a?a:{}),o=ut.reduce((function(e,a,n){return a.key&&n!==t?e+a.num:e}),0);return!s.every((function(e){return parseInt(e)+o>5}))&&Object(ae.jsx)(O.a.Item,{onClick:function(){var e;return ft({type:"setFilter",index:t,key:r,num:null!==(e=parseInt(s[0]))&&void 0!==e?e:0})},children:i.name},r)}))}),[ut,ft,Ge]),Nt=null!==(a=null===ct||void 0===ct?void 0:ct.name)&&void 0!==a?a:"Character Name",wt=Object(b.useMemo)((function(){return Object(ae.jsxs)(m.a,{title:Nt,disabled:Be,children:[Object(ae.jsx)(O.a.Item,{onClick:function(){return vt("")},children:"Unselect Character"}),Object(ae.jsx)(O.a.Divider,{}),Object(ae.jsx)(V.a,{onSelect:function(e){return vt(e)}})]})}),[Nt,Be,vt]),Ct=Object(Y.b)(Array.isArray(bt)?W.a.get(bt):void 0,[bt]),At=Object(b.useMemo)((function(){if(!Array.isArray(bt))return Object(ae.jsxs)("b",{children:["Basic Stat: ",Object(ae.jsx)("span",{className:"text-".concat(G.a.getStatVariant(bt)),children:G.a.getStatNamePretty(bt)})]});if(!Ct)return null;var e,t=Ct.keys,a=Object(l.a)(t,3),n=a[0],c=a[2],r=Ct.field,i=z.a.getTalentFieldValue(r,"variant",it),s=z.a.getTalentFieldValue(r,"text",it);return"character"===n?("normal"!==c&&"charged"!==c&&"plunging"!==c||(c="auto"),Object(ae.jsxs)("b",{children:[null===ct||void 0===ct||null===(e=ct.getTalentOfKey(c,null===it||void 0===it?void 0:it.characterEle))||void 0===e?void 0:e.name,": ",Object(ae.jsx)("span",{className:"text-".concat(i),children:s})]})):"weapon"===n?Object(ae.jsxs)("b",{children:[null===rt||void 0===rt?void 0:rt.name,": ",Object(ae.jsx)("span",{className:"text-".concat(i),children:s})]}):void 0}),[bt,Ct,it,ct,rt]),Bt=ut.reduce((function(e,t){return t.key?e+t.num:e}),0),Kt=Object(b.useMemo)((function(){var e,t=0;return Object(Q.c)(null===it||void 0===it||null===(e=it.conditionalValues)||void 0===e?void 0:e.artifact,[],(function(e){return Array.isArray(e)}),(function(){return t++})),t}),[null===it||void 0===it?void 0:it.conditionalValues]),Mt=Object(b.useCallback)((function(e){return te.a.updateChar(Object(u.a)(Object(u.a)({},nt),e))}),[nt]),Et=Object.entries(jt).some((function(e){var t=Object(l.a)(e,2);t[0];return"number"===typeof t[1].min})),Tt=Object.entries(jt).some((function(e){var t=Object(l.a)(e,2);t[0];return"number"===typeof t[1].max})),Ft=xt?Et:Tt;return Object(ae.jsxs)(x.a,{className:"mt-2",children:[Object(ae.jsx)(U.a,{pageKey:"buildPage",modalTitle:"Character Management Page Guide",text:["For self-infused attacks, like Noelle's Sweeping Time, enable the skill in the talent page.","You can compare the difference between equipped artifacts and generated builds.","TURBO mode can process millions of builds in seconds.","The more complex the formula, the longer the generation time."],children:Object(ae.jsx)(ne,{})}),Object(ae.jsx)(ue,{build:de,showCharacterModal:Ne,characterKey:C,selectCharacter:vt,setmodalBuild:xe,setshowCharacterModal:we}),!!it&&Object(ae.jsx)(je,{showArtCondModal:ge,setshowArtCondModal:ye,initialStats:it,characterDispatch:Mt,artifactCondCount:Kt}),Object(ae.jsx)(f.a,{className:"mt-2 mb-2",children:Object(ae.jsx)(v.a,{children:Object(ae.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(ae.jsx)(p.a.Header,{children:"Build Generator"}),Object(ae.jsxs)(p.a.Body,{children:[Object(ae.jsxs)(f.a,{children:[Object(ae.jsxs)(v.a,{xs:12,lg:6,children:[C?Object(ae.jsx)(P.a,{header:wt,characterKey:C,bg:"lightcontent",cardClassName:"mb-2",onEdit:Be?void 0:function(){return we(!0)}}):Object(ae.jsx)(p.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:Object(ae.jsx)(p.a.Header,{children:wt})}),ct&&nt&&it&&Object(ae.jsx)(be,{build:it,characterSheet:ct,className:"mb-2",character:nt}),Boolean(st)&&Object(ae.jsx)(he,{className:"mb-2",statFilters:jt,statKeys:null===st||void 0===st?void 0:st.basicKeys,setStatFilters:function(e){return ft({statFilters:e})}})]}),Object(ae.jsx)(v.a,{xs:12,lg:6,children:Object(ae.jsxs)(f.a,{children:[Object(ae.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ae.jsx)(p.a,{bg:"lightcontent",text:"lightfont",children:Object(ae.jsx)(p.a.Body,{children:Object(ae.jsx)(g.a,{className:"w-100",onClick:function(){return ye(!0)},disabled:Be,children:Object(ae.jsxs)("span",{children:["Default Artifact Set Effects ",Boolean(Kt)&&Object(ae.jsxs)(y.a,{variant:"success",children:[Kt," Selected"]})]})})})})}),ut.map((function(e,t){var a,n,c,r,i,s=e.key,l=e.num;return Object(ae.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ae.jsxs)(p.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(ae.jsx)(p.a.Header,{children:Object(ae.jsxs)(S.a,{children:[Object(ae.jsxs)(m.a,{as:S.a,title:null!==(a=null===Ge||void 0===Ge||null===(n=Ge[s])||void 0===n?void 0:n.name)&&void 0!==a?a:"Artifact Set Filter",disabled:Be,children:[Object(ae.jsx)(O.a.Item,{onClick:function(){return ft({type:"setFilter",index:t,key:""})},children:"Unselect Artifact"}),Object(ae.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),kt(5,t),Object(ae.jsx)(O.a.Divider,{}),Object(ae.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),kt(4,t),Object(ae.jsx)(O.a.Divider,{}),Object(ae.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca"}),kt(3,t)]}),Object(ae.jsx)(m.a,{as:S.a,title:"".concat(l,"-set"),disabled:Be||!s||Bt>=5,children:!!it&&Object.keys(null!==(c=null===Ge||void 0===Ge||null===(r=Ge[s])||void 0===r?void 0:r.setEffects)&&void 0!==c?c:{}).map((function(e){var a=ut.reduce((function(e,t){return t.key&&t.key!==s?e+t.num:e}),0);return parseInt(e)+a<=5&&Object(ae.jsx)(O.a.Item,{onClick:function(){return ft({type:"setFilter",index:t,key:ut[t].key,num:parseInt(e)})},children:"".concat(e,"-set")},e)}))})]})}),s?Object(ae.jsx)(p.a.Body,{children:Object(ae.jsx)(f.a,{className:"mb-n2",children:!!it&&Object.keys(null!==(i=null===Ge||void 0===Ge?void 0:Ge[s].setEffects)&&void 0!==i?i:{}).map((function(e){return parseInt(e)})).filter((function(e){return e<=l})).map((function(e){return Object(ae.jsx)(I.a,{newBuild:void 0,setKey:s,setNumKey:e,equippedBuild:it,characterDispatch:Mt,editable:!0},s+e)}))})}):null]})},t)})),Object(ae.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ae.jsx)(p.a,{bg:"lightcontent",text:"lightfont",children:Object(ae.jsxs)(p.a.Body,{className:"mb-n2",children:[Object(ae.jsx)(g.a,{className:"w-100 mb-2",onClick:function(){return ft({useEquippedArts:!mt})},disabled:Be,children:Object(ae.jsxs)("span",{children:[Object(ae.jsx)(d.a,{icon:mt?j.b:j.w})," Use Equipped Artifacts"]})}),Object(ae.jsx)(g.a,{className:"w-100 mb-2",onClick:function(){return ft({useLockedArts:!Ot})},disabled:Be,children:Object(ae.jsxs)("span",{children:[Object(ae.jsx)(d.a,{icon:Ot?j.b:j.w})," Use Locked Artifacts"]})})]})})}),Object(ae.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ae.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",children:[Object(ae.jsx)(p.a.Header,{children:Object(ae.jsxs)(f.a,{children:[Object(ae.jsx)(v.a,{children:"Artifact Main Stat"}),Object(ae.jsx)(v.a,{xs:"auto",children:Object(ae.jsx)(fe,{mainStatAssumptionLevel:ht,setmainStatAssumptionLevel:function(e){return ft({mainStatAssumptionLevel:e})}})})]})}),Object(ae.jsx)(p.a.Body,{className:"mb-n2",children:se.map((function(e,t){return Object(ae.jsxs)("div",{className:"text-inline mb-1 d-flex justify-content-between",children:[Object(ae.jsx)("h6",{className:"d-inline mb-0",children:Object(ae.jsx)(ee.b,{slotKey:e})}),Object(ae.jsxs)(m.a,{disabled:Be,size:"sm",title:dt[t]?G.a.getStatNameWithPercent(dt[t]):"Select a mainstat",className:"d-inline",children:[Object(ae.jsx)(O.a.Item,{onClick:function(){return ft({type:"mainStatKey",index:t,mainStatKey:""})},children:"No MainStat"}),F.a.slotMainStats(e).map((function(e){return Object(ae.jsx)(O.a.Item,{onClick:function(){return ft({type:"mainStatKey",index:t,mainStatKey:e})},children:G.a.getStatNameWithPercent(e)},e)}))]})]},e)}))})]})})]})})]}),Object(ae.jsx)(f.a,{className:"mb-2",children:Object(ae.jsx)(v.a,{children:!!C&&Object(ae.jsx)(me,{totBuildNumber:yt,generatingBuilds:Be,generationSkipped:He,generationProgress:Te,generationDuration:ze,characterName:Nt,maxBuildsToShow:R})})}),Object(ae.jsxs)(f.a,{className:"d-flex justify-content-between",children:[Object(ae.jsx)(v.a,{xs:"auto",children:Object(ae.jsxs)(S.a,{children:[Object(ae.jsx)(g.a,{className:"h-100",disabled:!C||Be,variant:C&&yt<=re?"success":"warning",onClick:St,children:Object(ae.jsx)("span",{children:"Generate Builds"})}),yt>re&&Object(ae.jsx)(k.a,{overlay:Object(ae.jsxs)(N.a,{id:"turbo-tooltip",children:[Object(ae.jsx)("div",{children:"Dramatically speeds up build time."}),Object(ae.jsx)("div",{children:"Yields only 1 build."}),Boolean(Ft)&&Object(ae.jsxs)("div",{className:"mt-2",children:["Does not work with ",Object(ae.jsxs)("b",{children:[Boolean(xt)?"min":"max","imum"]})," stat filter when sorting by ",Object(ae.jsxs)("b",{children:[Boolean(xt)?"as":"des","cending"]})]})]}),children:Object(ae.jsx)("span",{children:Object(ae.jsx)(g.a,{variant:"success",disabled:Ft,className:"rounded-0 ".concat(Ft?"cursor-pointer":""),onClick:function(){return St(!0)},children:Object(ae.jsx)("strong",{children:"TURBO"})})})}),Object(ae.jsx)(g.a,{className:"h-100",disabled:!Be,variant:"danger",onClick:function(){$e.current&&($e.current.terminate(),$e.current=null,Ke(!1),_([]),Pe(0),Fe(0),Ve(0))},children:Object(ae.jsx)("span",{children:"Cancel"})})]})}),Object(ae.jsx)(v.a,{xs:"auto",children:Object(ae.jsxs)(S.a,{children:[Object(ae.jsxs)(O.a,{as:S.a,drop:"up",children:[Object(ae.jsx)(O.a.Toggle,{disabled:Be,variant:"light",children:Object(ae.jsxs)("span",{children:["Optimization Target: ",At]})}),Object(ae.jsx)(O.a.Menu,{align:"right",style:{minWidth:"40rem"},children:Object(ae.jsx)(f.a,{children:!!st&&Object.entries(st).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1],c=ct&&rt?z.a.getDisplayHeading(a,ct,rt,null===it||void 0===it?void 0:it.characterEle):a;return Object(ae.jsxs)(v.a,{xs:12,md:6,children:[Object(ae.jsx)(O.a.Header,{style:{overflow:"hidden",textOverflow:"ellipsis"},children:Object(ae.jsx)("b",{children:c})}),n.map((function(e,t){return Array.isArray(e)?Object(ae.jsx)(oe,{target:e,buildSettingsDispatch:ft,initialStats:it},t):"string"===typeof e?Object(ae.jsx)(O.a.Item,{onClick:function(){return ft({optimizationTarget:e})},children:G.a.getStatNamePretty(e)},t):null}))]},a)}))})})]}),Object(ae.jsxs)(g.a,{onClick:function(){return ft({ascending:!ot.ascending})},disabled:Be,variant:xt?"danger":"primary",children:[Object(ae.jsx)(d.a,{icon:xt?j.u:j.v,className:"fa-fw"}),Object(ae.jsx)("span",{children:xt?"Ascending":"Descending"})]})]})})]})]})]})})}),Object(ae.jsx)(f.a,{className:"mb-2",children:Object(ae.jsx)(v.a,{children:Object(ae.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(ae.jsx)(p.a.Header,{children:Object(ae.jsxs)(f.a,{children:[Object(ae.jsx)(v.a,{children:C?Object(ae.jsxs)("span",{children:["Showing ",Object(ae.jsx)("b",{children:M.length})," Builds generated for ",Nt]}):Object(ae.jsx)("span",{children:"Select a character to generate builds."})}),Object(ae.jsx)(v.a,{xs:"auto",children:Object(ae.jsx)(m.a,{title:Object(ae.jsxs)("span",{children:["Max builds to show: ",Object(ae.jsx)("b",{children:R})]}),size:"sm",children:ie.map((function(e){return Object(ae.jsx)(O.a.Item,{onClick:function(){return X(e)},children:e},e)}))})})]})}),Object(ae.jsx)(w.a,{children:M.map((function(e,t){return t<R&&ct&&rt&&Object(ae.jsx)(Oe,{characterSheet:ct,weaponSheet:rt,build:e,characterKey:C,index:t,statsDisplayKeys:st,onClick:function(){return xe(e)}},t)}))})]})})})]})}function oe(e){var t=e.target,a=e.buildSettingsDispatch,n=e.initialStats,c=Object(Y.b)(W.a.get(t),[t]);if(!c)return null;var r=c.field;return Object(ae.jsx)(O.a.Item,{onClick:function(){return a({optimizationTarget:t})},style:{overflow:"hidden",textOverflow:"ellipsis"},children:Object(ae.jsx)("span",{className:"text-".concat(z.a.getTalentFieldValue(r,"variant",n)),children:z.a.getTalentFieldValue(r,"text",n)})})}function ue(e){var t=e.build,a=e.showCharacterModal,n=e.characterKey,c=e.selectCharacter,r=e.setmodalBuild,i=e.setshowCharacterModal,s=Object(b.useCallback)((function(){r(null),i(!1)}),[r,i]);return Object(ae.jsx)(C.a,{show:Boolean(a||t),onHide:s,size:"xl",contentClassName:"bg-transparent",children:Object(ae.jsx)(h.a.Suspense,{fallback:Object(ae.jsx)("span",{children:"Loading..."}),children:Object(ae.jsx)(ce,{character:void 0,tabName:void 0,characterKey:n,setCharacterKey:function(e){return c(e)},newBuild:t,onClose:s,editable:a,footer:Object(ae.jsx)(g.a,{variant:"danger",onClick:s,children:"Close"})})})})}function je(e){var t=e.showArtCondModal,a=e.setshowArtCondModal,n=e.initialStats,c=e.characterDispatch,r=e.artifactCondCount,i=Object(b.useCallback)((function(){return a(!1)}),[a]),s=Object(Y.b)(D.a.getAll(),[]);if(!s)return null;var u=D.a.namesByMaxRarities(s).flatMap((function(e){return Object(l.a)(e,2)[1].map((function(e){var t=Object(l.a)(e,1)[0];return[t,s[t]]}))}));return Object(ae.jsx)(C.a,{show:t,onHide:i,size:"xl",contentClassName:"bg-transparent",children:Object(ae.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(ae.jsx)(p.a.Header,{children:Object(ae.jsxs)(f.a,{children:[Object(ae.jsx)(v.a,{children:Object(ae.jsxs)("h5",{children:["Default Artifact Set Effects  ",Boolean(r)&&Object(ae.jsxs)(y.a,{variant:"success",children:[r," Selected"]})]})}),Object(ae.jsx)(v.a,{xs:"auto",children:Object(ae.jsx)(g.a,{onClick:function(){n.conditionalValues.artifact&&(n.conditionalValues.artifact={}),c({conditionalValues:n.conditionalValues})},children:Object(ae.jsxs)("span",{children:[Object(ae.jsx)(d.a,{icon:j.D})," Reset All"]})})}),Object(ae.jsx)(v.a,{xs:"auto",children:Object(ae.jsx)(g.a,{variant:"danger",onClick:i,children:Object(ae.jsx)(d.a,{icon:j.z})})})]})}),Object(ae.jsx)(p.a.Body,{children:Object(ae.jsx)(f.a,{children:u.map((function(e){var t,a=Object(l.a)(e,2),r=a[0],i=a[1],u=Object.values(i.slotIcons)[0],j=Object(o.a)(i.rarity)[0];return Object(ae.jsx)(v.a,{className:"mb-2",xs:12,lg:6,xl:4,children:Object(ae.jsxs)(p.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(ae.jsx)(p.a.Header,{children:Object(ae.jsxs)(f.a,{children:[Object(ae.jsx)(v.a,{xs:"auto",className:"ml-n3 my-n2",children:Object(ae.jsx)(A.a,{src:u,className:"thumb-mid grad-".concat(j,"star m-1"),thumbnail:!0})}),Object(ae.jsxs)(v.a,{children:[Object(ae.jsx)("h6",{children:Object(ae.jsx)("b",{children:null!==(t=null===s||void 0===s?void 0:s[r].name)&&void 0!==t?t:""})}),Object(ae.jsx)("span",{children:Object(ae.jsx)(R.a,{stars:j})})]})]})}),Object(ae.jsx)(p.a.Body,{children:Object(ae.jsx)(f.a,{className:"mb-n2",children:Boolean(r)&&Object.keys(i.setEffects).map((function(e){return parseInt(e)})).map((function(e){return Object(ae.jsx)(I.a,{newBuild:void 0,setKey:r,setNumKey:e,equippedBuild:n,editable:!0,characterDispatch:c},r+e)}))})})]})},r)}))})}),Object(ae.jsx)(p.a.Footer,{children:Object(ae.jsxs)(g.a,{variant:"danger",onClick:i,children:[Object(ae.jsx)(d.a,{icon:j.z})," CLOSE"]})})]})})}function de(e){var t=e.statKey,a=e.statKeys,n=void 0===a?[]:a,c=e.min,r=e.max,i=e.close,s=e.setFilter,l="%"===G.a.getStatUnit(t),o={disabled:!t,allowEmpty:!0,float:l},b=Object(u.a)(Object(u.a)({},o),{},{placeholder:"MIN",value:c,onChange:function(e){return s(t,e,r)}}),h=Object(u.a)(Object(u.a)({},o),{},{placeholder:"MAX",value:r,onChange:function(e){return s(t,c,e)}});return Object(ae.jsxs)(B.a,{className:"mb-2",children:[Object(ae.jsx)(m.a,{as:B.a.Prepend,title:G.a.getStatNamePretty(t,"New Stat"),id:"input-group-dropdown-1",children:n.map((function(e){return Object(ae.jsx)(O.a.Item,{onClick:function(){null===i||void 0===i||i(),s(e,c,r)},children:G.a.getStatNamePretty(e)},e)}))}),Object(ae.jsx)(q.a,Object(u.a)({},b)),Object(ae.jsx)(q.a,Object(u.a)({},h)),Boolean(i)&&Object(ae.jsx)(B.a.Append,{children:Object(ae.jsx)(g.a,{variant:"danger",onClick:i,children:Object(ae.jsx)(d.a,{icon:j.B})})})]})}function be(e){var t=e.characterSheet,a=e.character,n=e.build,c=e.className,r=Object(b.useCallback)((function(e){var t=e.hitMode;return te.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{hitMode:t}))}),[a]),i=Object(b.useCallback)((function(e){var t=e.reactionMode;return te.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{reactionMode:t}))}),[a]),s=Object(b.useCallback)((function(e){var t=e.infusionAura;return te.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{infusionAura:t}))}),[a]);return a?Object(ae.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",className:c,children:[Object(ae.jsx)(p.a.Header,{children:Object(ae.jsxs)(f.a,{children:[Object(ae.jsx)(v.a,{children:"Hit Mode Options"}),Object(ae.jsx)(v.a,{xs:"auto",children:Object(ae.jsx)(_.b,{characterSheet:t,character:a,characterDispatch:s})})]})}),Object(ae.jsxs)(p.a.Body,{className:"mb-n2",children:[Object(ae.jsx)(_.a,{hitMode:a.hitMode,characterDispatch:r,className:"w-100 mb-2"}),Object(ae.jsx)(_.c,{build:n,character:a,characterDispatch:i,className:"w-100 mb-2"})]})]}):null}function he(e){var t=e.statKeys,a=void 0===t?[]:t,c=e.statFilters,r=void 0===c?{}:c,i=e.setStatFilters,s=e.className,o=a.filter((function(e){return!Object.keys(r).some((function(t){return t===e}))})),j=function(e,t,a){return i(Object(u.a)(Object(u.a)({},r),{},Object(n.a)({},e,{min:t,max:a})))};return Object(ae.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",className:s,children:[Object(ae.jsx)(p.a.Header,{children:"Final Stat Filter"}),Object(ae.jsx)(p.a.Body,{children:Object(ae.jsxs)(f.a,{className:"mb-n2",children:[Object.entries(r).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1],c=n.min,s=n.max;return Object(ae.jsx)(v.a,{xs:12,children:Object(ae.jsx)(de,{statKey:a,statKeys:o,setFilter:j,min:c,max:s,close:function(){delete r[a],i(Object(u.a)({},r))}})},a)})),Object(ae.jsx)(v.a,{xs:12,children:Object(ae.jsx)(de,{min:void 0,max:void 0,close:void 0,statKeys:o,setFilter:j})})]})})]})}function Oe(e){var t=e.characterSheet,a=e.weaponSheet,n=e.index,c=e.characterKey,r=e.build,i=e.statsDisplayKeys,s=e.onClick,o=Object(Y.b)(D.a.getAll(),[]),u=te.a._getChar(c);if(!u)return null;var j=u.equippedArtifacts,d=J.h.every((function(e){var t;return j[e]===(null===(t=r.equippedArtifacts)||void 0===t?void 0:t[e])}));return Object(ae.jsx)("div",{children:Object(ae.jsxs)(w.a.Item,{variant:n%2?"customdark":"customdarker",className:"text-white",action:!0,onClick:s,children:[Object(ae.jsx)("h5",{className:"mb-2",children:Object(ae.jsxs)(f.a,{children:[Object(ae.jsx)(v.a,{xs:"auto",children:Object(ae.jsx)(y.a,{variant:"info",children:Object(ae.jsxs)("strong",{children:[n+1,d?" (Equipped)":""]})})}),Object(ae.jsx)(v.a,{xs:"auto",children:Object.entries(r.setToSlots).sort((function(e,t){var a=Object(l.a)(e,2),n=(a[0],a[1]),c=Object(l.a)(t,2);c[0];return c[1].length-n.length})).map((function(e){var t,a=Object(l.a)(e,2),n=a[0],c=a[1];return Object(ae.jsxs)(y.a,{variant:d?"success":"primary",className:"mr-2",children:[c.map((function(e){return Object(ee.a)(e)}))," ",null!==(t=null===o||void 0===o?void 0:o[n].name)&&void 0!==t?t:""]},n)}))})]})}),Object(ae.jsx)(L.a,{editable:!1,characterSheet:t,weaponSheet:a,character:u,newBuild:r,statsDisplayKeys:i,cardbg:n%2?"lightcontent":"darkcontent"})]})})}function me(e){var t,a,n,c,r=e.totBuildNumber,i=e.generatingBuilds,s=e.generationSkipped,l=e.generationProgress,o=e.generationDuration,u=e.characterName,j=e.maxBuildsToShow,d=null!==(t=null===r||void 0===r?void 0:r.toLocaleString())&&void 0!==t?t:r,b=r-s,h=null!==(a=null===l||void 0===l?void 0:l.toLocaleString())&&void 0!==a?a:l,O=null!==(n=null===s||void 0===s?void 0:s.toLocaleString())&&void 0!==n?n:s,m=null!==(c=null===b||void 0===b?void 0:b.toLocaleString())&&void 0!==c?c:b,x=Boolean(s)&&Object(ae.jsxs)("span",{children:["(",Object(ae.jsx)("b",{children:O})," skipped)"]});if(i){var f=100*l/b;return Object(ae.jsxs)(K.a,{variant:"success",children:[Object(ae.jsxs)("span",{children:["Generating and testing ",Object(ae.jsxs)("b",{className:"text-monospace",children:[h,"/",m]})," build configurations against the criteria for ",Object(ae.jsx)("b",{children:u}),". ",x]}),Object(ae.jsx)("br",{}),Object(ae.jsxs)("h6",{children:["Time elapsed: ",Object(ae.jsx)("strong",{className:"text-monospace",children:Object(X.b)(o)})]}),Object(ae.jsx)(M.a,{now:f,label:"".concat(f.toFixed(1),"%")})]})}return!i&&l?Object(ae.jsxs)(K.a,{variant:"success",children:[Object(ae.jsxs)("span",{children:["Generated and tested ",Object(ae.jsx)("b",{className:"text-monospace",children:m})," Build configurations against the criteria for ",Object(ae.jsx)("b",{children:u}),". ",x]}),Object(ae.jsxs)("h6",{children:["Total duration: ",Object(ae.jsx)("strong",{className:"text-monospace",children:Object(X.b)(o)})]}),Object(ae.jsx)(M.a,{now:100,variant:"success",label:"100%"})]}):0===r?Object(ae.jsx)(K.a,{variant:"warning",className:"mb-0",children:Object(ae.jsxs)("span",{children:["Current configuration will not generate any builds for ",Object(ae.jsx)("b",{children:u}),". Please change your Artifact configurations, or add/unlock more Artifacts."]})}):r>re?Object(ae.jsx)(K.a,{variant:"warning",className:"mb-0",children:Object(ae.jsxs)("span",{children:["Current configuration will generate ",Object(ae.jsx)("b",{children:d})," builds for ",Object(ae.jsx)("b",{children:u}),". This might take quite a while to generate..."]})}):Object(ae.jsx)(K.a,{variant:"success",className:"mb-0",children:Object(ae.jsxs)("span",{children:["Current configuration ",r<=j?"generated":"will generate"," ",Object(ae.jsx)("b",{children:d})," builds for ",Object(ae.jsx)("b",{children:u}),"."]})})}var xe={0:Object(ae.jsx)("span",{children:"No level assumption"}),4:Object(ae.jsx)("span",{children:"Assume at least level 4"}),8:Object(ae.jsx)("span",{children:"Assume at least level 8"}),12:Object(ae.jsx)("span",{children:"Assume at least level 12"}),16:Object(ae.jsx)("span",{children:"Assume at least level 16"}),20:Object(ae.jsx)("span",{children:"Assume at least level 20"})};function fe(e){var t=e.mainStatAssumptionLevel,a=void 0===t?0:t,n=e.setmainStatAssumptionLevel;return Object(ae.jsx)(k.a,{overlay:Object(ae.jsx)(N.a,{id:"assume-level-tooltip",children:"Change Main Stat value to be at least a specific level. Does not change substats."}),children:Object(ae.jsxs)(O.a,{children:[Object(ae.jsx)(O.a.Toggle,{variant:a?"orange":"primary",children:xe[a]}),Object(ae.jsx)(O.a.Menu,{children:Object.entries(xe).map((function(e){var t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(ae.jsx)(O.a.Item,{onClick:function(){return n(parseInt(a))},children:c},a)}))})]})})}}}]);
//# sourceMappingURL=17.78241dd7.chunk.js.map