"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[302],{36030:function(e,n,t){t.d(n,{N5:function(){return R},Y4:function(){return T},mW:function(){return _},mY:function(){return O}});var r=t(29439),i=t(1413),s=t(45987),a=t(13967),l=t(94198),c=t(58165),o=t(81918),u=t(90493),d=t(68870),x=t(79834),f=t(72791),h=t(22020),p=t(31148),m=t(72828),j=t(79406),Z=t(42320),v=t(50765),g=t(24351),y=t(610),b=t(68244),w=t(10157),k=t(75545),C=t(80184),S=["allArtifactKeysWithGrouper","selectedArtifactKeys","setArtifactKeys","getName","getImage","label"],P=["artSetKeys","setArtSetKeys"],K=["mainStatKeys","setMainStatKeys"],E=["substatKeys","setSubstatKeys"],A=["allArtifactKeysWithGrouper","selectedArtifactKey","setArtifactKey","getName","getImage","label","disable","showDefault","defaultText","defaultIcon"],I=["artSetKey","setArtSetKey","label"];function D(e){var n=e.allArtifactKeysWithGrouper,t=e.selectedArtifactKeys,r=e.setArtifactKeys,u=e.getName,d=e.getImage,x=e.label,h=(0,s.Z)(e,S),p=(0,a.Z)(),m=(0,f.useMemo)((function(){return n.map((function(e){var n=e.key,t=e.grouper;return{key:n,label:u(n),grouper:t}}))}),[n,u]);return(0,C.jsx)(l.Z,(0,i.Z)({autoHighlight:!0,multiple:!0,disableCloseOnSelect:!0,options:m,value:t.map((function(e){return{key:e,label:u(e)}})),onChange:function(e,n){r(n.map((function(e){return e.key})))},getOptionLabel:function(e){return e.label},isOptionEqualToValue:function(e,n){return e.key===n.key},renderInput:function(e){return(0,C.jsx)(c.Z,(0,i.Z)((0,i.Z)({},e),{},{label:x,variant:"filled",InputLabelProps:{style:{color:p.palette.text.primary}},color:t.length?"success":"primary",type:"search"}))},renderOption:function(e,n){return(0,C.jsx)(y.Z,{value:n.key,image:d(n.key),text:n.label,theme:p,isSelected:t.includes(n.key),props:e},n.key)},renderTags:function(e,n){return e.map((function(e,t){var r=g.Kj.find((function(n){return e.key==="".concat(n,"_dmg_")})),s=r||void 0;return(0,f.createElement)(o.Z,(0,i.Z)((0,i.Z)({},n({index:t})),{},{key:e.key,icon:d(e.key),label:e.label,color:s}))}))}},h))}function R(e){var n=e.artSetKeys,t=e.setArtSetKeys,a=(0,s.Z)(e,P),l=(0,Z.Z)((function(){return p.y.getAll}),[]),c=(0,h.$)(["artifact","artifactNames_gen"]).t;if(!l)return null;var o=Object.entries(p.y.setKeysByRarities(l)).flatMap((function(e){var n=(0,r.Z)(e,2),t=n[0];return n[1].map((function(e){return{key:e,grouper:+t}}))})).sort(G);return(0,C.jsx)(D,(0,i.Z)({allArtifactKeysWithGrouper:o,selectedArtifactKeys:n,setArtifactKeys:t,getName:function(e){return l[e].nameRaw},getImage:function(e){return l[e].defIcon},label:c("artifact:autocompleteLabels.sets"),groupBy:function(e){var n,t;return null!==(n=null===(t=e.grouper)||void 0===t?void 0:t.toString())&&void 0!==n?n:""},renderGroup:function(e){return e.group&&(0,C.jsxs)(u.Z,{component:d.Z,children:[(0,C.jsxs)(x.Z,{sx:{top:"-1em"},children:[e.group," ",(0,C.jsx)(w.q,{stars:+e.group})]},"".concat(e.group,"Header")),e.children]},e.group)}},a))}function O(e){var n=e.mainStatKeys,t=e.setMainStatKeys,r=(0,s.Z)(e,K),a=(0,h.$)("artifact").t;return(0,C.jsx)(D,(0,i.Z)({allArtifactKeysWithGrouper:v.r.map((function(e){return{key:e}})),selectedArtifactKeys:n,setArtifactKeys:t,getName:function(e){return j.ZP.getArtStr(e)},getImage:function(e){return k.Z[e]},label:a("autocompleteLabels.mainStats")},r))}function _(e){var n=e.substatKeys,t=e.setSubstatKeys,r=(0,s.Z)(e,E),a=(0,h.$)("artifact").t;return(0,C.jsx)(D,(0,i.Z)({allArtifactKeysWithGrouper:v._.map((function(e){return{key:e}})),selectedArtifactKeys:n,setArtifactKeys:t,getName:function(e){return j.ZP.getArtStr(e)},getImage:function(e){return k.Z[e]},label:a("autocompleteLabels.substats")},r))}function M(e){var n=e.allArtifactKeysWithGrouper,t=e.selectedArtifactKey,r=e.setArtifactKey,c=e.getName,o=e.getImage,u=e.label,d=e.disable,x=void 0===d?function(){return!1}:d,h=e.showDefault,p=void 0!==h&&h,m=e.defaultText,j=void 0===m?"":m,Z=(e.defaultIcon,(0,s.Z)(e,A)),v=(0,a.Z)(),g=(0,f.useMemo)((function(){return(p?[{key:"",label:j}]:[]).concat(n.map((function(e){var n=e.key,t=e.grouper;return{key:n,label:c(n),grouper:t}})))}),[n,c,j,p]);return(0,C.jsx)(l.Z,(0,i.Z)({autoHighlight:!0,options:g,clearIcon:t?void 0:"",value:{key:t,label:c(t)},onChange:function(e,n,t){return("change"!==e.type||"clear"!==t)&&r(n?n.key:"")},getOptionLabel:function(e){return e.label?e.label:j},isOptionEqualToValue:function(e,n){return e.key===n.key},getOptionDisabled:function(e){return x(e.key)},renderInput:function(e){return(0,C.jsx)(b.Z,(0,i.Z)((0,i.Z)({},e),{},{label:u,startAdornment:o(t),hasValue:!!t}))},renderOption:function(e,n){return(0,C.jsx)(y.Z,{value:n.key,image:o(n.key),text:n.label,theme:v,isSelected:t===n.key,props:e},n.key)}},Z))}function T(e){var n=e.artSetKey,t=e.setArtSetKey,a=e.label,l=void 0===a?"":a,c=(0,s.Z)(e,I),o=(0,Z.Z)((function(){return p.y.getAll}),[]),f=(0,h.$)(["artifact","artifactNames_gen"]).t;if(l=l||f("artifact:autocompleteLabels.set"),!o)return null;var m=Object.entries(p.y.setKeysByRarities(o)).flatMap((function(e){var n=(0,r.Z)(e,2),t=n[0];return n[1].map((function(e){return{key:e,grouper:+t}}))})).sort(G);return(0,C.jsx)(M,(0,i.Z)({allArtifactKeysWithGrouper:m,selectedArtifactKey:n,setArtifactKey:t,getName:function(e){return e&&o[e].nameRaw},getImage:function(e){return e?o[e].defIcon:(0,C.jsx)(C.Fragment,{})},label:l,groupBy:function(e){var n,t;return null!==(n=null===(t=e.grouper)||void 0===t?void 0:t.toString())&&void 0!==n?n:""},renderGroup:function(e){return e.group&&(0,C.jsxs)(u.Z,{component:d.Z,children:[(0,C.jsxs)(x.Z,{sx:{top:"-1em"},children:[e.group," ",(0,C.jsx)(w.q,{stars:+e.group})]},"".concat(e.group,"Header")),e.children]},e.group)}},c))}function G(e,n){if(e.grouper>n.grouper)return-1;if(e.grouper<n.grouper)return 1;var t=m.Z.t("artifactNames_gen:".concat(e.key)),r=m.Z.t("artifactNames_gen:".concat(n.key));return t<r?-1:t>r?1:0}},21977:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(29439),i=t(57621),s=t(10889),a=t(72791),l=t(60393),c=t(10600),o=t(80184);function u(e){var n=e.levelLow,t=e.levelHigh,u=e.setLow,d=e.setHigh,x=e.setBoth,f=e.dark,h=void 0!==f&&f,p=e.disabled,m=void 0!==p&&p,j=e.showLevelText,Z=void 0!==j&&j,v=(0,a.useState)(n),g=(0,r.Z)(v,2),y=g[0],b=g[1],w=(0,a.useState)(t),k=(0,r.Z)(w,2),C=k[0],S=k[1],P=(0,a.useCallback)((function(e,n){if("number"==typeof n)throw new TypeError;var t=(0,r.Z)(n,2),i=t[0],s=t[1];b(i),S(s)}),[b,S]);return(0,a.useEffect)((function(){return b(n)}),[b,n]),(0,a.useEffect)((function(){return S(t)}),[S,t]),(0,o.jsxs)(i.Z,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:h?"contentDark.main":"contentLight.main"},children:[(0,o.jsx)(c.ZP,{value:y,onChange:function(e){return u((0,l.uZ)(e,0,t))},sx:{px:1,pl:Z?2:void 0,width:Z?100:50},inputProps:{sx:{textAlign:"center"}},startAdornment:Z?"Level: ":void 0,disabled:m}),(0,o.jsx)(s.ZP,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:function(){return"Arifact Level Range"},value:[y,C],onChange:P,onChangeCommitted:function(e,n){return x(n[0],n[1])},valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:m}),(0,o.jsx)(c.ZP,{value:C,onChange:function(e){return d((0,l.uZ)(e,n,20))},sx:{px:1,width:50},inputProps:{sx:{textAlign:"center"}},disabled:m})]})}},18726:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(20890),i=t(52791),s=t(80184);function a(e){var n=e.avatar,t=e.title,a=e.action;return(0,s.jsxs)(i.Z,{display:"flex",gap:1,p:2,alignItems:"center",children:[n,(0,s.jsx)(r.Z,{variant:"subtitle1",sx:{flexGrow:1},children:t}),a&&(0,s.jsx)(r.Z,{variant:"caption",children:a})]})}},37503:function(e,n,t){t.d(n,{X:function(){return T},Z:function(){return R}});var r=t(68870),i=t(20890),s=t(94721),a=t(72791),l=t(13746),c=t(60393),o=t(3992),u=t(18726),d=t(39504),x=t(88034),f=t(29439),h=t(72247),p=t(9912),m=t(24518),j=t(23786),Z=t(2199),v=t(97714),g=t(33890),y=t(25617),b=t(66624),w=t(80184);function k(e){var n=e.conditional,t=e.disabled,r=void 0!==t&&t;return 1===Object.keys(n.states).length&&"path"in n?(0,w.jsx)(C,{conditional:n,disabled:r}):"path"in n?(0,w.jsx)(S,{conditional:n,disabled:r}):(0,w.jsx)(P,{conditional:n,disabled:r})}function C(e){var n=e.conditional,t=e.disabled,r=(0,a.useContext)(v.K),i=r.character,s=r.characterDispatch,o=(0,a.useContext)(l.R).data,u=(0,a.useCallback)((function(e){var t=(0,c.I8)(i.conditional);e?(0,c.SR)(t,n.path,e):(0,c.uH)(t,n.path),s({conditional:t})}),[n,i,s]),d=o.get(n.value).value,x=(0,f.Z)(Object.entries(n.states)[0],2),j=x[0],Z=E(x[1].name),g=A(n.name);return(0,w.jsxs)(m.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:d?"success":"primary",onClick:function(){return u(d?void 0:j)},disabled:t,startIcon:d?(0,w.jsx)(h.Z,{}):(0,w.jsx)(p.Z,{}),children:[g," ",Z]})}function S(e){var n=e.conditional,t=e.disabled,r=(0,a.useContext)(v.K),i=r.character,o=r.characterDispatch,u=(0,a.useContext)(l.R).data,d=(0,a.useCallback)((function(e){var t=(0,c.I8)(i.conditional);e?(0,c.SR)(t,n.path,e):(0,c.uH)(t,n.path),o({conditional:t})}),[n,i,o]),x=u.get(n.value).value,h=x?n.states[x]:void 0,p=h?E(h.name):(0,w.jsx)(y.Z,{color:"secondary",children:"Not Active"}),m=A(n.name);return(0,w.jsxs)(g.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:x?"success":"primary",title:(0,w.jsxs)("span",{children:[m," ",p]}),disabled:t,children:[(0,w.jsx)(j.Z,{onClick:function(){return d()},selected:!h,disabled:!h,children:(0,w.jsx)("span",{children:"Not Active"})}),(0,w.jsx)(s.Z,{}),Object.entries(n.states).map((function(e){var n=(0,f.Z)(e,2),t=n[0],r=n[1];return(0,w.jsx)(j.Z,{onClick:function(){return d(t)},selected:x===t,disabled:x===t,children:r.name},t)}))]})}function P(e){var n=e.conditional,t=e.disabled,r=(0,a.useContext)(v.K),i=r.character,s=r.characterDispatch,o=(0,a.useContext)(l.R).data,u=(0,a.useCallback)((function(e,n){var t=(0,c.I8)(i.conditional);n?(0,c.SR)(t,e,n):(0,c.uH)(t,e),s({conditional:t})}),[i,s]);return(0,w.jsx)(Z.Z,{fullWidth:!0,orientation:"vertical",disableElevation:!0,color:"secondary",children:Object.entries(n.states).map((function(e){var n=(0,f.Z)(e,2),r=n[0],i=n[1],s=o.get(i.value).value,a=s===r;return(0,w.jsx)(m.Z,{color:a?"success":"primary",disabled:t,fullWidth:!0,onClick:function(){return u(i.path,s?void 0:r)},size:"small",startIcon:a?(0,w.jsx)(h.Z,{}):(0,w.jsx)(p.Z,{}),sx:{borderRadius:0},children:A(i.name)},r)}))})}function K(e){return"string"!==typeof e}function E(e){if(!e)return"";var n="primary",t=e;return e&&K(e)&&e.props.color&&(n=e.props.color,t=(0,w.jsx)("span",{children:e.props.children})),(0,w.jsx)(y.Z,{sx:{ml:.5},color:n,children:t})}function A(e){if(K(e)){var n=e.props.key18,t=e.props.ns,r=e.props.values;return(0,w.jsx)(b.v,{ns:t,key18:n,values:r,useBadge:!0})}return e}function I(e){var n,t=e.conditional,r=e.hideHeader,i=void 0!==r&&r,s=e.hideDesc,u=void 0!==s&&s,f=(0,a.useContext)(l.R).data;if("path"in t){var h,p=f.get(t.value).value;n=p&&(null===(h=t.states[p])||void 0===h?void 0:h.fields)}else n=Object.values(t.states).flatMap((function(e){return f.get(e.value).value?e.fields:[]}));return(0,w.jsxs)(o.Z,{children:[!(0,c.mY)(i,t)&&(0,w.jsx)(T,{header:t.header,hideDesc:u}),(0,w.jsx)(d.Z,{sx:{p:0,"&:last-child":{pb:0}},children:(0,w.jsx)(k,{conditional:t})}),n&&(0,w.jsx)(x.ZP,{fields:n})]})}var D=t(55221);function R(e){var n=e.sections,t=e.teamBuffOnly,i=e.hideDesc,s=void 0!==i&&i,c=e.hideHeader,o=void 0!==c&&c,u=(0,a.useContext)(l.R).data;if(!n.length)return null;var d=n.map((function(e,n){return e.canShow&&!u.get(e.canShow).value||t&&!e.teamBuff?null:(0,w.jsx)(O,{section:e,hideDesc:s,hideHeader:o},n)})).filter((function(e){return e}));return d.length?(0,w.jsx)(r.Z,{display:"flex",flexDirection:"column",gap:1,children:d}):null}function O(e){var n=e.section,t=e.hideDesc,r=void 0!==t&&t,i=e.hideHeader,s=void 0!==i&&i;return"fields"in n?(0,w.jsx)(_,{section:n,hideDesc:r,hideHeader:s}):"states"in n?(0,w.jsx)(I,{conditional:n,hideDesc:r,hideHeader:s}):(0,w.jsx)(M,{section:n})}function _(e){var n=e.section,t=e.hideDesc,r=e.hideHeader;return(0,w.jsxs)(o.Z,{children:[!(0,c.mY)(r,n)&&n.header&&(0,w.jsx)(T,{header:n.header,hideDesc:t,hideDivider:0===n.fields.length}),(0,w.jsx)(x.ZP,{fields:n.fields})]})}function M(e){var n=e.section,t=(0,a.useContext)(l.R).data;return(0,w.jsx)("div",{children:(0,c.mY)(n.text,t)})}function T(e){var n=e.header,t=e.hideDesc,r=e.hideDivider,o=(0,a.useContext)(l.R).data,d=n.icon,x=n.title,f=n.action;d=(0,c.mY)(d,o);var h=!t&&(0,c.mY)(n.description,o),p=t?x:(0,w.jsxs)("span",{children:[x," ",(0,w.jsx)(D.Z,{title:(0,w.jsx)(i.Z,{children:h})})]});return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z,{avatar:d,title:p,action:f}),!r&&(0,w.jsx)(s.Z,{})]})}},29371:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(29439),i=t(93433),s=t(2199),a=t(24518),l=t(23786),c=t(72791),o=t(22020),u=t(2139),d=t(60393),x=t(10600),f=t(33890),h=t(80184);function p(e){var n=e.level,t=e.ascension,p=e.setBoth,m=e.useLow,j=void 0!==m&&m,Z=(0,o.$)("ui").t,v=j?u.sU:u.SJ,g=(0,c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e=(0,d.uZ)(e,1,j?u.d8:u.Qq);var n=v.findIndex((function(n){return e<=n}));p({level:e,ascension:n})}),[p,v,j]),y=(0,c.useCallback)((function(){var e=v.findIndex((function(e){return 90!==n&&n===e}));p(t===e?{ascension:t+1}:{ascension:e})}),[p,v,t,n]);return(0,h.jsxs)(s.Z,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[(0,h.jsx)(x.CC,{children:(0,h.jsx)(x.ZP,{onChange:g,value:n,startAdornment:"Lv. ",inputProps:{min:1,max:90,sx:{textAlign:"center",width:"3em"}},sx:{height:"100%",pl:2}})}),(0,h.jsx)(a.Z,{sx:{pl:1,whiteSpace:"nowrap"},disabled:!(j?u.nB:u.ek)(n),onClick:y,children:(0,h.jsxs)("strong",{children:["/ ",u.SJ[t]]})}),(0,h.jsx)(f.Z,{title:Z("selectlevel"),sx:{flexGrow:1},children:(0,i.Z)(j?u.vF:u.D4).map((function(e){var i=(0,r.Z)(e,2),s=i[0],a=i[1],c=s===n&&a===t;return(0,h.jsx)(l.Z,{selected:c,disabled:c,onClick:function(){return p({level:s,ascension:a})},children:s===v[a]?"Lv. ".concat(s):"Lv. ".concat(s,"/").concat(v[a])},"".concat(s,"/").concat(a))}))})]})}},6805:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(23786),i=t(22020),s=t(24351),a=t(33890),l=t(80184);function c(e){var n=e.refinement,t=e.setRefinement,c=(0,i.$)("ui").t;return(0,l.jsx)(a.Z,{title:c("refinement",{value:n}),children:s.a.map((function(e){return(0,l.jsx)(r.Z,{onClick:function(){return t(e)},selected:n===e,disabled:n===e,children:c("refinement",{value:e})},e)}))})}},92443:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(1413),i=t(45987),s=t(66934),a=t(24518),l=t(80184),c=["children","disabled"],o=(0,s.ZP)(a.Z)((function(e){var n=e.theme;return{"&.Mui-disabled":{backgroundColor:n.palette.primary.dark,color:n.palette.text.secondary}}}));function u(e){var n=e.children,t=(e.disabled,(0,i.Z)(e,c));return(0,l.jsx)(o,(0,r.Z)((0,r.Z)({},t),{},{disabled:!0,children:n}))}},44361:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(93433),i=t(29439),s=t(39504),a=t(61889),l=t(58165),c=t(94721),o=t(66647),u=t(68870),d=t(20890),x=t(72791),f=t(22020),h=t(10658),p=t(66218),m=t(42320),j=t(24351),Z=t(3992),v=t(71310),g=t(68198),y=t(55942),b=t(9321),w=t(10157),k=t(73578),C=t(80184);function S(e){var n=e.show,t=e.ascension,S=void 0===t?0:t,P=e.onHide,K=e.onSelect,E=e.filter,A=void 0===E?function(){return!0}:E,I=e.weaponTypeFilter,D=(0,f.$)(["page_weapon","weaponNames_gen"]).t,R=(0,m.Z)((function(){return p.Z.getAll}),[]),O=(0,x.useState)(I?[I]:(0,r.Z)(j.yd)),_=(0,i.Z)(O,2),M=_[0],T=_[1];(0,x.useEffect)((function(){return I&&T([I])}),[I]);var G=(0,x.useState)(""),N=(0,i.Z)(G,2),W=N[0],q=N[1],z=(0,x.useDeferredValue)(W),B=R?j.fG.filter((function(e){return A(R[e])})).filter((function(e){var n;return M.includes(null===R||void 0===R||null===(n=R[e])||void 0===n?void 0:n.weaponType)})).filter((function(e){return!z||D("weaponNames_gen:".concat(e)).toLowerCase().includes(z.toLowerCase())})).sort((function(e,n){var t,r,i,s;return(null!==(t=null===R||void 0===R||null===(r=R[n])||void 0===r?void 0:r.rarity)&&void 0!==t?t:0)-(null!==(i=null===R||void 0===R||null===(s=R[e])||void 0===s?void 0:s.rarity)&&void 0!==i?i:0)})):[];return R?(0,C.jsx)(b.Z,{open:n,onClose:P,children:(0,C.jsxs)(Z.Z,{children:[(0,C.jsx)(s.Z,{sx:{py:1},children:(0,C.jsxs)(a.ZP,{container:!0,spacing:1,children:[(0,C.jsx)(a.ZP,{item:!0,children:(0,C.jsx)(k.Z,{value:M,onChange:T,disabled:!!I,size:"small"})}),(0,C.jsx)(a.ZP,{item:!0,flexGrow:1,children:(0,C.jsx)(l.Z,{autoFocus:!0,size:"small",value:W,onChange:function(e){return q(e.target.value)},label:D("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,C.jsx)(a.ZP,{item:!0,children:(0,C.jsx)(g.Z,{onClick:P})})]})}),(0,C.jsx)(c.Z,{}),(0,C.jsx)(s.Z,{children:(0,C.jsx)(a.ZP,{container:!0,spacing:1,children:B.map((function(e){var n,t=R[e];return(0,C.jsx)(a.ZP,{item:!0,lg:3,md:4,children:(0,C.jsx)(v.Z,{sx:{height:"100%"},children:(0,C.jsxs)(o.Z,{onClick:function(){P(),K(e)},sx:{display:"flex"},children:[(0,C.jsx)(u.Z,{component:"img",src:t.getImg(S),sx:{width:100,height:"auto"},className:" grad-".concat(t.rarity,"star")}),(0,C.jsxs)(u.Z,{sx:{flexGrow:1,px:1},children:[(0,C.jsx)(d.Z,{variant:"subtitle1",children:t.name}),(0,C.jsxs)(d.Z,{children:[(0,C.jsx)(y.Z,{src:null===(n=h.Z.weaponTypes)||void 0===n?void 0:n[t.weaponType]})," ",(0,C.jsx)(w.q,{stars:t.rarity,colored:!0})]})]})]})})},e)}))})}),(0,C.jsx)(c.Z,{}),(0,C.jsx)(s.Z,{sx:{py:1},children:(0,C.jsx)(g.Z,{large:!0,onClick:P})})]})}):null}},68302:function(e,n,t){t.r(n),t.d(n,{default:function(){return Is}});var r=t(30168),i=t(29439),s=t(63833),a=t(45781),l=t(35893),c=t(10284),o=t(31289),u=t(68575),d=t(66630),x=t(68870),f=t(47047),h=t(39504),p=t(25228),m=t(43896),j=t(24518),Z=t(72791),v=t(22020),g=t(43504),y=t(16871),b=t(3992),w=t(71310),k=t(68198),C=t(32490),S=t(97714),P=t(13746),K=t(60705),E=t(947),A=t(24711),I=t(13434),D=t(50920),R=t(42320),O=t(47639),_=t(72056),M=t(24351),T=t(28057),G=t(4332),N=t(2380),W=t(566),q=t(80184);function z(){var e,n=(0,v.$)("page_character").t,t=(0,Z.useContext)(S.K).characterSheet,r=(0,Z.useState)(!1),s=(0,i.Z)(r,2),a=s[0],l=s[1],c=(0,W.Z)();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(G.w,{show:a,onHide:function(){return l(!1)},onSelect:c}),(0,q.jsx)(j.Z,{color:"info",onClick:function(){return l(!0)},startIcon:(0,q.jsx)(N.Z,{src:null===t||void 0===t?void 0:t.thumbImgSide}),children:null!==(e=null===t||void 0===t?void 0:t.name)&&void 0!==e?e:n("selectCharacter")})]})}var B=t(37355),L=t(9585),F=t(94721),V=t(89673),H=t(55818),$=t(20890),U=t(3721),Y=t(63210),J=t(18726),X=t(91702),Q=t(55942),ee=t(9321),ne=t(25617),te=t(8430),re=t(79406);function ie(){var e=(0,Z.useContext)(K.M).modalOpen,n=(0,Z.useContext)(K.M).setFormulaData,t=(0,Z.useCallback)((function(){return null===n||void 0===n?void 0:n(void 0,void 0)}),[n]);return(0,q.jsx)(ee.Z,{open:!!e,onClose:t,children:(0,q.jsxs)(b.Z,{children:[(0,q.jsx)(L.Z,{title:"Formulas & Calculations",action:(0,q.jsx)(k.Z,{onClick:t})}),(0,q.jsx)(h.Z,{sx:{pt:0},children:(0,q.jsx)(se,{})})]})})}function se(){var e=(0,Z.useContext)(P.R).data,n=(0,Z.useContext)(K.M).data,t=(0,te.U)(null!==n&&void 0!==n?n:e);return(0,q.jsx)(Z.Suspense,{fallback:(0,q.jsx)(f.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,q.jsx)(x.Z,{sx:{mr:-1,mb:-1},children:t.map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,q.jsx)(ae,{displayNs:r,sectionKey:t},t)}))})})}function ae(e){var n=e.sectionKey,t=e.displayNs,r=(0,Z.useContext)(P.R).data,s=(0,Z.useContext)(K.M).data,a=(0,R.Z)((function(){return(0,te.f)(null!==s&&void 0!==s?s:r,n)}),[s,r,n]);if(!a)return null;if(Object.entries(t).every((function(e){var n=(0,i.Z)(e,2);n[0];return n[1].isEmpty})))return null;var l=a.title,c=a.icon,o=a.action;return(0,q.jsxs)(w.Z,{sx:{mb:1},children:[(0,q.jsx)(J.Z,{avatar:c&&(0,q.jsx)(Q.Z,{size:2,sx:{m:-1},src:c}),title:l,action:o&&(0,q.jsx)(ne.Z,{children:o})}),(0,q.jsx)(F.Z,{}),(0,q.jsx)(h.Z,{children:Object.entries(t).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return!r.isEmpty&&(0,q.jsx)(le,{node:r},t)}))})]})}function le(e){var n,t=e.node,r=(0,Z.useContext)(K.M).node,s=(0,Z.useState)(!1),a=(0,i.Z)(s,2),l=a[0],c=a[1],o=(0,Z.useCallback)((function(e,n){return c(n)}),[]),u=(0,Z.useRef)();return(0,Z.useEffect)((function(){t===r&&setTimeout((function(){var e,n;return null===u||void 0===u||null===(e=u.current)||void 0===e||null===(n=e.scrollIntoView)||void 0===n?void 0:n.call(e,{behavior:"smooth"})}),300)}),[u,t,r]),(0,q.jsxs)(V.Z,{sx:{bgcolor:"contentDark.main"},expanded:t===r||l,onChange:o,ref:u,children:[(0,q.jsxs)(H.Z,{expandIcon:(0,q.jsx)(B.Z,{}),children:[(0,q.jsxs)($.Z,{children:[(0,q.jsx)(X.Z,{color:t.info.variant,children:re.ZP.get(null!==(n=t.info.key)&&void 0!==n?n:"")})," ",(0,q.jsx)("strong",{children:(0,re.EC)(t.value,t.unit)})]}),M.jU.includes(t.info.variant)&&(0,q.jsx)(x.Z,{sx:{display:"inline-block",ml:"auto",mr:2},children:(0,q.jsx)(Y.Z,{reaction:t.info.variant,trigger:t.info.subVariant})})]}),(0,q.jsx)(U.Z,{children:t.formulas.map((function(e,n){return(0,q.jsx)($.Z,{children:e},n)}))})]})}var ce=t(29371),oe=t(93433),ue=t(53767),de=t(61889),xe=t(15021),fe=t(52791),he=t(1413),pe=t(72247),me=t(9912),je=t(81918),Ze=t(56125),ve=t(26138),ge=t(45987),ye=t(66934),be=t(13400),we=["expand"],ke=(0,ye.ZP)((function(e){e.expand;var n=(0,ge.Z)(e,we);return(0,q.jsx)(be.Z,(0,he.Z)({},n))}))((function(e){var n=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest})}})),Ce=t(75545),Se=t(49670),Pe=t(2199),Ke=t(10600),Ee=t(92443),Ae=["name","children","value","placeholder","defaultValue","onValueChange","percent","disabled","onReset"],Ie=(0,ye.ZP)(Pe.Z)({display:"flex"});function De(e){var n=e.name,t=e.children,r=e.value,i=e.placeholder,s=e.defaultValue,a=void 0===s?0:s,l=e.onValueChange,c=e.percent,o=void 0!==c&&c,u=e.disabled,d=void 0!==u&&u,x=e.onReset,f=(0,ge.Z)(e,Ae);return(0,q.jsxs)(Ie,(0,he.Z)((0,he.Z)({},f),{},{children:[t,(0,q.jsx)(Ee.Z,{sx:{px:1},children:n}),(0,q.jsx)(Ke.CC,{sx:{flexBasis:"10em",flexGrow:1},children:(0,q.jsx)(Ke.ZP,{sx:{px:1},inputProps:{sx:{textAlign:"right"}},float:o,placeholder:i,value:r,onChange:l,disabled:d,endAdornment:o?"%":void 0})}),(0,q.jsx)(j.Z,{sx:{flexShrink:2},size:"small",color:"error",onClick:function(){return x?x():l(a)},disabled:d||r===a,children:(0,q.jsx)(Se.Z,{})})]}))}function Re(){var e=(0,Z.useContext)(P.R).data,n=(0,Z.useState)(!1),t=(0,i.Z)(n,2),r=t[0],s=t[1],a=(0,Z.useCallback)((function(){return s(!r)}),[s,r]),l=e.get(ve.ri.enemy.level),c=e.get(ve.ri.enemy.defRed),o=e.get(ve.ri.enemy.defIgn);return(0,q.jsxs)(w.Z,{children:[(0,q.jsxs)(h.Z,{sx:{display:"flex"},children:[(0,q.jsxs)(de.ZP,{container:!0,spacing:1,flexGrow:1,alignItems:"center",children:[(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)(je.Z,{size:"small",color:"success",label:(0,q.jsxs)("span",{children:[re.ZP.get(l.info.key)," ",(0,q.jsx)("strong",{children:l.value})]})})}),M.Kj.map((function(e){return(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)($.Z,{children:(0,q.jsx)(Oe,{element:e})},e)},e)})),(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsxs)($.Z,{children:["DEF Reduction ",(0,re.EC)(c.value,c.unit)]})}),(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsxs)($.Z,{children:["DEF Ignore ",(0,re.EC)(o.value,o.unit)]})})]}),(0,q.jsx)(ke,{expand:r,onClick:a,"aria-expanded":r,"aria-label":"show more",size:"small",sx:{p:0},children:(0,q.jsx)(B.Z,{})})]}),(0,q.jsx)(Ze.Z,{in:r,timeout:"auto",unmountOnExit:!0,children:(0,q.jsx)(h.Z,{sx:{pt:0},children:(0,q.jsx)(_e,{})})})]})}function Oe(e){var n=e.element,t=(0,Z.useContext)(P.R).data.get(ve.ri.enemy["".concat(n,"_res_")]),r=!isFinite(t.value)?(0,q.jsxs)("span",{children:[Ce.Z[n]," IMMUNE"]}):(0,q.jsxs)("span",{children:[Ce.Z[n],"RES ",(0,q.jsx)("strong",{children:(0,re.EC)(t.value,t.unit)})]});return(0,q.jsx)(X.Z,{color:n,children:r})}function _e(e){var n,t,r,i=e.bsProps,s=void 0===i?{xs:12,md:6}:i,a=(0,Z.useContext)(S.K),l=a.character.enemyOverride,c=a.characterDispatch,o=(0,Z.useContext)(P.R).data,u=null!==(n=l.enemyLevel)&&void 0!==n?n:o.get(ve.ri.lvl).value,d=null!==(t=l.enemyDefIgn_)&&void 0!==t?t:0,x=null!==(r=l.enemyDefRed_)&&void 0!==r?r:0;return(0,q.jsxs)(de.ZP,{container:!0,spacing:1,children:[(0,q.jsx)(de.ZP,(0,he.Z)((0,he.Z)({item:!0},s),{},{children:(0,q.jsx)(j.Z,{fullWidth:!0,sx:{height:"100%"},size:"small",component:"a",color:"warning",href:"https://genshin-impact.fandom.com/wiki/Resistance#Base_Enemy_Resistances",target:"_blank",rel:"noreferrer",children:"To get the specific resistance values of enemies, please visit the wiki."})})),(0,q.jsx)(de.ZP,(0,he.Z)((0,he.Z)({item:!0},s),{},{children:(0,q.jsx)(De,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,q.jsx)("b",{children:re.ZP.get("enemyLevel")}),value:u,placeholder:re.ZP.getStr("enemyLevel"),defaultValue:o.get(ve.ri.lvl).value,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyLevel",value:e})},onReset:function(){return c({type:"enemyOverride",statKey:"enemyLevel",value:void 0})}})})),M.Kj.map((function(e){var n="".concat(e,"_enemyRes_"),t=l[n],r=t===Number.MAX_VALUE;return(0,q.jsx)(de.ZP,(0,he.Z)((0,he.Z)({item:!0},s),{},{children:(0,q.jsx)(De,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,q.jsx)(X.Z,{color:e,children:(0,q.jsx)("b",{children:re.ZP.get(n)})}),value:t?r?1/0:t:10,placeholder:r?"Immune ":re.ZP.getStr(n),defaultValue:10,onValueChange:function(e){return c({type:"enemyOverride",statKey:n,value:e})},disabled:r,percent:!0,children:(0,q.jsx)(j.Z,{color:e,onClick:function(){return c({type:"enemyOverride",statKey:n,value:r?10:Number.MAX_VALUE})},startIcon:r?(0,q.jsx)(pe.Z,{}):(0,q.jsx)(me.Z,{}),children:"Immunity"})})}),e)})),(0,q.jsx)(de.ZP,(0,he.Z)((0,he.Z)({item:!0},s),{},{children:(0,q.jsx)(De,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,q.jsx)("b",{children:re.ZP.get("enemyDefIgn_")}),value:d,placeholder:re.ZP.getStr("enemyDefIgn_"),defaultValue:0,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyDefIgn_",value:e})},percent:!0})})),(0,q.jsx)(de.ZP,(0,he.Z)((0,he.Z)({item:!0},s),{},{children:(0,q.jsx)(De,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,q.jsx)("b",{children:re.ZP.get("enemyDefRed_")}),value:x,placeholder:re.ZP.getStr("enemyDefRed_"),defaultValue:0,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyDefRed_",value:e})},percent:!0})})),(0,q.jsx)(de.ZP,{item:!0,xs:12,children:(0,q.jsx)("small",{children:"Note: Genshin Impact halves resistance shred values below 0%. For the sake of calculations enter the RAW value and GO will do the rest. (e.g. 10% - 20% = -10%)"})})]})}var Me,Te=t(88034),Ge=t(43696),Ne={xs:1,md:2,lg:3};function We(e){var n=e.open,t=e.onClose,i=(0,v.$)("page_character").t;return(0,q.jsx)(ee.Z,{open:n,onClose:t,children:(0,q.jsxs)(b.Z,{children:[(0,q.jsx)(L.Z,{title:i(Me||(Me=(0,r.Z)(["addStats.title"]))),action:(0,q.jsx)(k.Z,{onClick:t})}),(0,q.jsx)(h.Z,{sx:{pt:0},children:(0,q.jsxs)(ue.Z,{spacing:1,children:[(0,q.jsx)(Be,{}),(0,q.jsx)(Re,{}),(0,q.jsx)(Ye,{})]})})]})})}var qe=(0,oe.Z)(ve.lR),ze=function(e){return(0,q.jsx)(de.ZP,{item:!0,xs:1,children:e})};function Be(){var e=(0,Z.useContext)(S.K),n=e.character.bonusStats,t=e.characterDispatch,r=(0,Z.useCallback)((function(e){return t({bonusStats:e})}),[t]);return(0,q.jsx)(w.Z,{children:(0,q.jsx)(h.Z,{sx:{display:"flex"},children:(0,q.jsx)(de.ZP,{container:!0,columns:Ne,sx:{pt:1},spacing:1,children:(0,q.jsx)(Ge.Z,{statKeys:qe,statFilters:n,setStatFilters:r,wrapperFunc:ze})})})})}var Le=["eleMas","critRate_","critDMG_","enerRech_","heal_"],Fe=[].concat(["hp","atk","def"],Le).map((function(e){return ve.ri.total[e]})),Ve=["atk_","atk","hp_","hp","def_","def"].concat(Le),He=[].concat((0,oe.Z)(re.hX),(0,oe.Z)(re.Sx),["stamina","incHeal_","shield_","cdRed_"]),$e=ve.lR.filter((function(e){return!Ve.includes(e)&&!He.includes(e)}));function Ue(e){var n=e.nodes,t=e.extra,r=(0,Z.useContext)(P.R),i=r.data,s=r.oldData;return(0,q.jsxs)(Te.lD,{children:[n.map((function(e){var n,t;return(0,q.jsx)(Te.JW,{component:xe.ZP,node:i.get(e),oldValue:null===s||void 0===s||null===(t=s.get(e))||void 0===t?void 0:t.value},null===(n=e.info)||void 0===n?void 0:n.key)})),t]})}function Ye(){var e=(0,Z.useContext)(S.K),n=e.character.elementKey,t=e.characterSheet,r=(0,Z.useContext)(P.R).data,i=r.get(ve.ri.special),s=null!==n&&void 0!==n?n:t.elementKey,a=t.isMelee(),l=(0,Z.useMemo)((function(){var e=He.map((function(e){return ve.ri.total[e]})),n=(0,oe.Z)(M.N).filter((function(e){return e!==s}));return a&&n.concat(["physical"]),e.filter((function(e){return!(!r.get(e).value&&n.some((function(n){var t,r,i;return null===(t=e.info)||void 0===t||null===(r=t.key)||void 0===r||null===(i=r.includes)||void 0===i?void 0:i.call(r,n)})))}))}),[r,s,a]),c=(0,Z.useMemo)((function(){return $e.map((function(e){return ve.ri.total[e]})).filter((function(e){return r.get(e).value}))}),[r]);return(0,q.jsx)(w.Z,{children:(0,q.jsx)(h.Z,{children:(0,q.jsxs)(de.ZP,{container:!0,columns:Ne,spacing:1,children:[(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(Je,{title:"Main Stats",children:(0,q.jsx)(Ue,{nodes:Fe,extra:i&&(0,q.jsxs)(xe.ZP,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,q.jsxs)("span",{children:[(0,q.jsx)("b",{children:"Special:"})," ",(0,q.jsxs)(X.Z,{color:i.info.variant,children:[i.info.key&&Ce.Z[i.info.key]," ",i.info.key&&re.ZP.get(i.info.key)]})]}),(0,q.jsx)("span",{children:(0,re.EC)(i.value,i.unit)})]})})})}),(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(Je,{title:"Other Stats",children:(0,q.jsx)(Ue,{nodes:l})})}),!!c.length&&(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(Je,{title:"Misc Stats",children:(0,q.jsx)(Ue,{nodes:c})})})]})})})}function Je(e){var n=e.title,t=e.children;return(0,q.jsxs)(b.Z,{children:[(0,q.jsx)(h.Z,{sx:{py:1},children:(0,q.jsx)(fe.Z,{display:"flex",justifyContent:"space-between",children:(0,q.jsx)($.Z,{variant:"subtitle1",children:n})})}),t]})}var Xe=t(74165),Qe=t(15861),en=t(96739),nn=t(94070),tn=t(23060),rn=t(23786),sn=t(90388);function an(){return new Worker(t.p+"static/js/BackgroundWorker.8bf85785.worker.js")}var ln=t(21977),cn=t(96106),on=t(30865),un=t(33890),dn=t(91839),xn=(0,Z.createContext)(void 0),fn=t(25074),hn=t(73036),pn=t(69292),mn=t(68544),jn=t(60393),Zn=t(9138),vn=t(37762),gn=t(64737),yn=t(78661),bn=(0,Xe.Z)().mark(_n),wn=(0,Xe.Z)().mark(Tn);function kn(e,n,t,r,i,s){for(var a=s,l={pruneNodeRange:!0},c={pruneNodeRange:!0},o={reaffine:!0},u={pruneOrder:!0,pruneArtRange:!0,pruneNodeRange:!0},d=0;Object.values(a).some((function(e){return e}))&&d++<20;){if(a.pruneOrder){delete a.pruneOrder;var x=Sn(t,r,i);t!==x&&(t=x,a=(0,he.Z)((0,he.Z)({},a),l))}if(a.pruneArtRange){delete a.pruneArtRange;var f=Pn(e,t,n);t!==f&&(t=f,a=(0,he.Z)((0,he.Z)({},a),c))}if(a.pruneNodeRange){delete a.pruneNodeRange;var h=Kn(e,t);e!==h&&(e=h,a=(0,he.Z)((0,he.Z)({},a),o))}if(a.reaffine){delete a.reaffine;var p=Cn(e,t),m=p.nodes,j=p.arts;e===m&&t===j||(e=m,t=j,a=(0,he.Z)((0,he.Z)({},a),u))}}return{nodes:e,arts:t}}function Cn(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set,s=new Set;function a(e,n){n?r.add(e):e.operands.forEach((function(e){var n=e;r.has(n)&&s.add(n)}))}var l=new Set;if((0,gn.aD)(e,(function(e){}),(function(e){var n=e.operation;switch(n){case"read":if("number"!==e.type||"dyn"!==e.path[0]||"add"!==e.accu)throw new Error("Found unsupported ".concat(n," node at path ").concat(e.path," when computing affine nodes"));l.add(e.path[1]),a(e,!0);break;case"add":a(e,e.operands.every((function(e){return r.has(e)})));break;case"mul":var t=e.operands.filter((function(e){return"const"!==e.operation}));a(e,0===t.length||1===t.length&&r.has(t[0]));break;case"const":if("string"===typeof e.value||void 0===e.value)throw new Error("Found constant ".concat(e.value," while compacting"));a(e,!0);break;case"res":case"threshold":case"sum_frac":case"max":case"min":a(e,!1);break;case"data":case"subscript":case"lookup":case"match":case"prio":case"small":throw new Error("Found unsupported ".concat(n," node when computing affine nodes"));default:(0,jn.UT)(n)}})),(0,oe.Z)(s).every((function(e){var n=e.operation;return"read"===n||"const"===n}))&&Object.keys(n.base).length===l.size)return{nodes:e,arts:n};var c=-1;function o(){for(;l.has("".concat(++c)););return"".concat(c)}e.forEach((function(e){return r.has(e)&&s.add(e)}));var u=(0,oe.Z)(s).filter((function(e){return"const"!==e.operation})),d=new Map(u.map((function(e){return[e,t||"read"!==e.operation||"dyn"!==e.path[0]?(0,he.Z)((0,he.Z)({},(0,yn.UF)(["dyn","".concat(o())])),{},{accu:"add"}):e]})));function x(e){var n=(0,pn.CG)((0,oe.Z)(d.keys()),{dyn:(0,jn.xh)(e,(function(e){return(0,yn.a9)(e)}))},(function(e){return!0}));return Object.fromEntries((0,oe.Z)(d.values()).map((function(e,t){return[e.path[1],n[t].value]})))}for(var f={nodes:e=(0,gn.uW)(e,(function(e){var n;return null!==(n=d.get(e))&&void 0!==n?n:e}),(function(e){return e})),arts:{base:x(n.base),values:(0,jn.O)(M.eV,(function(e){return n.values[e].map((function(e){return{id:e.id,set:e.set,values:x(e.values)}}))}))}},h=Object.entries(x({})),p=0,m=Object.values(f.arts.values);p<m.length;p++){var j,Z=m[p],v=(0,vn.Z)(Z);try{for(v.s();!(j=v.n()).done;){var g,y=j.value.values,b=(0,vn.Z)(h);try{for(b.s();!(g=b.n()).done;){var w=(0,i.Z)(g.value,2),k=w[0],C=w[1];y[k]-=C}}catch(S){b.e(S)}finally{b.f()}}}catch(S){v.e(S)}finally{v.f()}}return f}function Sn(e,n,t){var r,s=!1,a=!(null!==(r=t.rainbow)&&void 0!==r&&r.length),l=new Set(Object.entries(t).filter((function(e){var n=(0,i.Z)(e,2);n[0];return n[1].length})).map((function(e){return(0,i.Z)(e,1)[0]}))),c=new Set(Object.entries(t).filter((function(e){var n=(0,i.Z)(e,2),t=(n[0],n[1]);return t.includes(2)&&!t.includes(4)})).map((function(e){return(0,i.Z)(e,1)[0]}))),o=(0,jn.O)(M.eV,(function(t){var r=e.values[t],o=r.filter((function(e){var t=0;return r.every((function(r){var s=Object.entries(r.values).every((function(n){var t=(0,i.Z)(n,2),r=t[0];return t[1]>=e.values[r]})),o=Object.entries(r.values).some((function(n){var t=(0,i.Z)(n,2),r=t[0];return t[1]>e.values[r]}));return s&&(o||r.id>e.id)&&(a&&!l.has(r.set)&&!c.has(e.set)||e.set===r.set)&&t++,t<n}))}));return o.length!==r.length&&(s=!0),o}));return s?{base:e.base,values:o}:e}function Pn(e,n,t){for(var r=Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[t,{min:r,max:r}]}))),s={arts:n},a=function(){var n=(0,jn.O)(M.eV,(function(e){return An(s.arts.values[e])})),i=(0,jn.O)(M.eV,(function(e){return En(Object.entries(n).map((function(n){return n[0]===e?r:n[1]})).filter((function(e){return e})))})),a=!1,l=(0,jn.O)(M.eV,(function(n){var r=s.arts.values[n].filter((function(r){var s=En([An([r]),i[n]]),a=In(e,s);return e.every((function(e,n){var r;return a.get(e).max>=(null!==(r=t[n])&&void 0!==r?r:-1/0)}))}));return r.length!==s.arts.values[n].length&&(a=!0),r}));if(!a)return"break";s.arts={base:s.arts.base,values:l}};;){if("break"===a())break}return s.arts}function Kn(e,n){var t=In(e,En([Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[t,{min:r,max:r}]})))].concat((0,oe.Z)(Object.values(n.values).map((function(e){return An(e)}))))));return(0,gn.uW)(e,(function(e){var n=e.operation,r=e.operands.map((function(e){return t.get(e)}));switch(n){case"threshold":var s=(0,i.Z)(r,4),a=s[0],l=s[1],c=s[2],o=s[3];if(a.min>=l.max)return e.operands[2];if(a.max<l.min)return(0,yn.a9)(0);if(c.max===c.min&&o.max===o.min&&c.min===o.min&&isFinite(c.min))return(0,yn.a9)(c.max);break;case"min":var u=e.operands.filter((function(e,n){var t=r[n];return r.every((function(e,n){return t.min<=e.max}))}));if(u.length<r.length)return yn.VV.apply(void 0,(0,oe.Z)(u));break;case"max":var d=e.operands.filter((function(e,n){var t=r[n];return r.every((function(e){return t.max>=e.min}))}));if(d.length<r.length)return yn.Fp.apply(void 0,(0,oe.Z)(d))}return e}),(function(e){return e}))}function En(e){var n={};return e.forEach((function(e){Object.entries(e).forEach((function(e){var t=(0,i.Z)(e,2),r=t[0],s=t[1];n[r]?(n[r].min+=s.min,n[r].max+=s.max):n[r]=(0,he.Z)({},s)}))})),n}function An(e){var n={};return e.length&&(Object.keys(e[0].values).filter((function(n){return e.every((function(e){return e.values[n]}))})).forEach((function(t){return n[t]={min:e[0].values[t],max:e[0].values[t]}})),e.forEach((function(e){for(var t=e.values,r=0,s=Object.entries(t);r<s.length;r++){var a=(0,i.Z)(s[r],2),l=a[0],c=a[1];n[l]?(n[l].max<c&&(n[l].max=c),n[l].min>c&&(n[l].min=c)):n[l]={min:0,max:c}}}))),n}function In(e,n){var t=new Map;return(0,gn.aD)(e,(function(e){}),(function(e){var r,s,a=e,l=a.operation,c=a.operands.map((function(e){return t.get(e)}));switch(l){case"read":if("dyn"!==a.path[0])throw new Error("Found non-dyn path ".concat(a.path," while computing range"));s=null!==(r=n[a.path[1]])&&void 0!==r?r:{min:0,max:0};break;case"const":s=Dn([a.value]);break;case"subscript":s=Dn(a.list);break;case"add":case"min":case"max":s={min:pn.aj[l](c.map((function(e){return e.min}))),max:pn.aj[l](c.map((function(e){return e.max})))};break;case"res":s={min:pn.aj[l]([c[0].max]),max:pn.aj[l]([c[0].min])};break;case"mul":s=c.reduce((function(e,n){return Dn([e.min*n.min,e.min*n.max,e.max*n.min,e.max*n.max])}));break;case"threshold":s=c[0].min>=c[1].max?c[2]:c[0].max<c[1].min?Dn([0]):Dn([0],[c[2]]);break;case"sum_frac":var o=(0,i.Z)(c,2),u=o[0],d=o[1],x={min:u.min+d.min,max:u.max+d.max};s=x.min<=0&&x.max>=0?u.min<=0&&u.max>=0?{min:NaN,max:NaN}:{min:-1/0,max:1/0}:Dn([u.min/x.min,u.min/x.max,u.max/x.min,u.max/x.max]);break;case"data":case"lookup":case"match":throw new Error("Unsupported ".concat(l," node"));default:(0,jn.UT)(l)}t.set(a,s)})),t}function Dn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Math.max.apply(Math,(0,oe.Z)(e).concat((0,oe.Z)(n.map((function(e){return e.max}))))),r=Math.min.apply(Math,(0,oe.Z)(e).concat((0,oe.Z)(n.map((function(e){return e.min})))));return{min:r,max:t}}function Rn(e,n){return e.flatMap((function(e){return e})).sort((function(e,n){return n.value-e.value})).slice(0,n)}function On(e){for(var n=.01,t=new Set(e.flatMap((function(e){return Object.values(e).map((function(e){return Math.round(e.plot/n)}))})));t.size>1500;)n*=2,t=new Set((0,oe.Z)(t).map((function(e){return Math.round(e/2)})));var r,i={},s=(0,vn.Z)(e);try{for(s.s();!(r=s.n()).done;)for(var a=r.value,l=0,c=Object.values(a);l<c.length;l++){var o=c[l],u=Math.round(o.plot/n)*n;(!i[u]||i[u].value<o.value)&&(i[u]=o)}}catch(d){s.e(d)}finally{s.f()}return i}function _n(e,n){var t,r,s,a,l,c,o;return(0,Xe.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=(0,jn.xh)(n.values,(function(e){return new Set(e.map((function(e){return e.set})))})),r=(0,vn.Z)(e),u.prev=2,r.s();case 4:if((s=r.n()).done){u.next=19;break}a=s.value,l=function(){var e=(0,i.Z)(o[c],2),n=e[0],r=e[1],s=t[n];switch(r.kind){case"required":if((0,oe.Z)(r.sets).every((function(e){return!s.has(e)})))return"continue|filter_loop";break;case"exclude":if((0,oe.Z)(s).every((function(e){return r.sets.has(e)})))return"continue|filter_loop"}},c=0,o=Object.entries(a);case 8:if(!(c<o.length)){u.next=15;break}if("continue|filter_loop"!==l()){u.next=12;break}return u.abrupt("continue",17);case 12:c++,u.next=8;break;case 15:return u.next=17,a;case 17:u.next=4;break;case 19:u.next=24;break;case 21:u.prev=21,u.t0=u.catch(2),r.e(u.t0);case 24:return u.prev=24,r.f(),u.finish(24);case 27:case"end":return u.stop()}}),bn,null,[[2,21,24,27]])}function Mn(e){return new Set(null!==e&&void 0!==e&&e.includes(2)?e.includes(4)?[0,1]:[0,1,4,5]:null!==e&&void 0!==e&&e.includes(4)?[0,1,2,3]:[0,1,2,3,4,5])}function Tn(e,n){var t,r,s,a,l,c,o,u,d,x,f,h,p,m,j,Z;return(0,Xe.Z)().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:for(p=function(e){var n,i,s,a,l,c,o,u,d,p,m;return(0,Xe.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m=function(e){var n,t,s,a,c,o,u,d,p,j,Z,v,g,y;return(0,Xe.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=l.length-e,t=[],s=[],a=[],c=0,o=(0,vn.Z)(r),i.prev=3,d=function(){var e=u.value,r=h[e],i=f[e];if(!r)return"continue";(0,jn.w6)(1,n).every((function(e){return!r.has(i+e)}))?a.push(e):r.has(i)?(0,jn.w6)(0,n).some((function(e){return!r.has(i+e)}))&&t.push(e):(c+=(0,oe.Z)(r).find((function(e){return e>i}))-i,s.push(e))},o.s();case 6:if((u=o.n()).done){i.next=12;break}if("continue"!==d()){i.next=10;break}return i.abrupt("continue",10);case 10:i.next=6;break;case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(3),o.e(i.t0);case 17:return i.prev=17,o.f(),i.finish(17);case 20:if(!(c>n)){i.next=22;break}return i.abrupt("return");case 22:if(e!==l.length){i.next=26;break}return i.next=25,(0,he.Z)({},x);case 25:return i.abrupt("return");case 26:if(c!==n){i.next=47;break}p=(0,vn.Z)(s),i.prev=28,p.s();case 30:if((j=p.n()).done){i.next=38;break}return Z=j.value,f[Z]++,x[M.eV[l[e]]]={kind:"required",sets:new Set([Z])},i.delegateYield(m(e+1),"t1",35);case 35:f[Z]--;case 36:i.next=30;break;case 38:i.next=43;break;case 40:i.prev=40,i.t2=i.catch(28),p.e(i.t2);case 43:return i.prev=43,p.f(),i.finish(43);case 46:return i.abrupt("return");case 47:v=0,g=[].concat(t,s);case 48:if(!(v<g.length)){i.next=57;break}return y=g[v],f[y]++,x[M.eV[l[e]]]={kind:"required",sets:new Set([y])},i.delegateYield(m(e+1),"t3",53);case 53:f[y]--;case 54:v++,i.next=48;break;case 57:return x[M.eV[l[e]]]={kind:"exclude",sets:new Set([].concat(s,a,t))},i.delegateYield(m(e+1),"t4",59);case 59:case"end":return i.stop()}}),i,null,[[3,14,17,20],[28,40,43,46]])},p=function(e){var t,i,l;return(0,Xe.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==a.length){n.next=3;break}return n.delegateYield(m(0),"t0",2);case 2:return n.abrupt("return",n.t0);case 3:t=(0,vn.Z)(r),n.prev=4,l=(0,Xe.Z)().mark((function n(){var t,r,l,c,o;return(0,Xe.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=i.value,!s.has(t)){n.next=3;break}return n.abrupt("return","continue");case 3:if(r=a[e].length,l=h[t],c=0,!l||l.has(r)){n.next=9;break}if(!((c=(null!==(o=(0,jn.w6)(r+1,5).find((function(e){return l.has(e)})))&&void 0!==o?o:6)-r)>d)){n.next=9;break}return n.abrupt("return","continue");case 9:return s.add(t),f[t]=a[e].length,a[e].forEach((function(e){return x[M.eV[e]]={kind:"required",sets:new Set([t])}})),d-=c,n.delegateYield(p(e+1),"t0",14);case 14:d+=c,f[t]=0,s.delete(t);case 17:case"end":return n.stop()}}),n)})),t.s();case 7:if((i=t.n()).done){n.next=14;break}return n.delegateYield(l(),"t1",9);case 9:if("continue"!==n.t1){n.next=12;break}return n.abrupt("continue",12);case 12:n.next=7;break;case 14:n.next=19;break;case 16:n.prev=16,n.t2=n.catch(4),t.e(n.t2);case 19:return n.prev=19,t.f(),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,16,19,22]])},n=(0,Xe.Z)().mark(p),i=(0,Xe.Z)().mark(m),s=new Set,a=[],l=[],c=(0,vn.Z)(e);try{for(c.s();!(o=c.n()).done;)u=o.value,a.push([]),5===u?l.push(a.length-1):a[u].push(a.length-1)}catch(j){c.e(j)}finally{c.f()}return a=a.filter((function(e){return e.length})).sort((function(e,n){return n.length-e.length})),d=l.length,t.delegateYield(p(0),"t0",10);case 10:case"end":return t.stop()}}),t)},c=function(e,n){if(!(0,jn.w6)(n+1,4).some((function(n){return 5!==e[n]})))return(e=(0,oe.Z)(e))[n]=5,e.reduce((function(e,n){return 6*e+n}),0)},l=function(e,n,t){if(5!==e.length){var r,i=(0,vn.Z)(n);try{var c=function(){var i=r.value;l([].concat((0,oe.Z)(e),[i]),n,t.filter((function(e){return e!==i})))};for(i.s();!(r=i.n()).done;)c()}catch(o){i.e(o)}finally{i.f()}l([].concat((0,oe.Z)(e),[e.length]),new Set([].concat((0,oe.Z)(n),[e.length])),[].concat((0,oe.Z)(t),[e.length]))}else s.has(t.length)&&a.push(e)},t=(0,Xe.Z)().mark(p),r=(0,oe.Z)(new Set(n)),s=Mn(e.rainbow),a=[],l([0],new Set([0]),[0]),o=function(e){var n,t=new Map,r=(0,vn.Z)(a);try{for(r.s();!(n=r.n()).done;){var s,l=n.value,o=c(l,e);void 0!==o&&t.set(o,(null!==(s=t.get(o))&&void 0!==s?s:new Set(l.slice(0,e)).size+1)-1)}}catch(f){r.e(f)}finally{r.f()}var u,d=(0,vn.Z)(t.entries());try{var x=function(){var n=(0,i.Z)(u.value,2),t=n[0];if(0===n[1]){var r=(0,oe.Z)(a.find((function(n){return c(n,e)===t})));r[e]=5,a=a.filter((function(n){return c(n,e)!==t})),a.push(r)}};for(d.s();!(u=d.n()).done;)x()}catch(f){d.e(f)}finally{d.f()}},u=4;u>=0;u--)o(u);d={kind:"exclude",sets:new Set},x=(0,jn.O)(M.eV,(function(e){return d})),f=(0,he.Z)((0,he.Z)({},(0,jn.xh)(e,(function(e){return 0}))),(0,jn.O)(r,(function(e){return 0}))),h=(0,jn.xh)(e,Mn),m=(0,vn.Z)(a),v.prev=14,m.s();case 16:if((j=m.n()).done){v.next=21;break}return Z=j.value,v.delegateYield(p(Z),"t0",19);case 19:v.next=16;break;case 21:v.next=26;break;case 23:v.prev=23,v.t1=v.catch(14),m.e(v.t1);case 26:return v.prev=26,m.f(),v.finish(26);case 29:case"end":return v.stop()}}),wn,null,[[14,23,26,29]])}var Gn=t(53174),Nn=t(54483),Wn=t(16614),qn=t(76899),zn=t(31148),Bn=t(37503);function Ln(e){var n,t=e.setKey,r=e.setNumKey,i=e.hideHeader,s=void 0!==i&&i,a=e.conditionalsOnly,l=void 0!==a&&a,c=(0,R.Z)((function(){return zn.y.get(t)}),[t]);if(!c)return null;var o=l?null===(n=c.setEffectDocument(r))||void 0===n?void 0:n.filter((function(e){return"states"in e})):c.setEffectDocument(r);return(0,q.jsx)(x.Z,{display:"flex",flexDirection:"column",children:o?(0,q.jsx)(Bn.Z,{sections:o,hideHeader:s}):null})}var Fn,Vn,Hn,$n,Un,Yn,Jn,Xn,Qn,et,nt,tt,rt,it,st,at,lt=t(95614),ct=t(55221),ot=t(10157),ut=t(66624),dt=t(18327);function xt(e){var n=(0,Z.useContext)(fn.t).database,t=(0,Z.useState)((function(){return n.buildSettings.get(e)})),r=(0,i.Z)(t,2),s=r[0],a=r[1];return(0,Z.useEffect)((function(){return a(n.buildSettings.get(e))}),[n,e]),(0,Z.useEffect)((function(){return n.buildSettings.follow(e,(function(e,n,t){return"update"===n&&a(t)}))}),[e,a,n]),{buildSetting:s,buildSettingDispatch:(0,Z.useCallback)((function(t){return e&&n.buildSettings.set(e,t)}),[e,n])}}function ft(e){var n,t,s=e.disabled,a=(0,v.$)(["page_character_optimize","sheet"]).t,l=(0,Z.useContext)(P.R),c=(0,Z.useContext)(fn.t).database,o=(0,Z.useContext)(S.K),u=o.character,d=u.key,f=u.conditional,p=o.characterDispatch,m=xt(d),g=m.buildSetting.artSetExclusion,y=m.buildSettingDispatch,C=(0,Z.useState)(!1),K=(0,i.Z)(C,2),E=K[0],A=K[1],I=(0,Z.useCallback)((function(){return A(!0)}),[A]),D=(0,Z.useCallback)((function(){return A(!1)}),[A]),O=(0,R.Z)((function(){return zn.y.getAll}),[]),_=(0,Z.useMemo)((function(){return O?Object.entries(zn.y.setKeysByRarities(O)).reverse().flatMap((function(e){return(0,i.Z)(e,2)[1]})).filter((function(e){return!e.includes("Prayers")})):[]}),[O]),T=(0,mn.Z)(),G=(0,i.Z)(T,2),N=G[0],W=G[1];(0,Z.useEffect)((function(){return c.arts.followAny(W)}),[c,W]);var z=(0,Z.useMemo)((function(){var e=Object.fromEntries(_.map((function(e){return[e,Object.fromEntries(M.eV.map((function(e){return[e,0]})))]})));return c.arts.values.map((function(n){return e[n.setKey]&&e[n.setKey][n.slotKey]++})),N&&e}),[N,c,_]),B=!(null!==(n=g.rainbow)&&void 0!==n&&n.includes(2)),L=!(null!==(t=g.rainbow)&&void 0!==t&&t.includes(4)),V=(0,Z.useMemo)((function(){return{allow2:_.filter((function(e){var n;return!(null!==(n=g[e])&&void 0!==n&&n.includes(2))})).length,allow4:_.filter((function(e){var n;return!(null!==(n=g[e])&&void 0!==n&&n.includes(4))})).length,exclude2:_.filter((function(e){var n;return null===(n=g[e])||void 0===n?void 0:n.includes(2)})).length,exclude4:_.filter((function(e){var n;return null===(n=g[e])||void 0===n?void 0:n.includes(4)})).length}}),[_,g]),H=V.allow2,U=V.allow4,Y=V.exclude2,J=V.exclude4,Q=(0,Z.useMemo)((function(){return Object.keys(f).filter((function(e){return M.q2.includes(e)&&0!==Object.keys(f[e]).length})).length}),[f]),te=(0,Z.useMemo)((function(){return(0,he.Z)((0,he.Z)({},l),{},{data:new dt.w((0,he.Z)((0,he.Z)({},l.data.data[0]),{},{artSet:(0,jn.O)(M.q2,(function(e){return(0,yn.a9)(4)}))}),void 0)})}),[l]),re=(0,Z.useCallback)((function(){var e=Object.fromEntries(Object.entries(f).filter((function(e){var n=(0,i.Z)(e,2),t=n[0];n[1];return!M.q2.includes(t)})));p({conditional:e})}),[f,p]),ie=(0,Z.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,jn.I8)(g);_.forEach((function(r){var i;n?t[r]=[].concat((0,oe.Z)(null!==(i=t[r])&&void 0!==i?i:[]),[e]):t[r]&&(t[r]=t[r].filter((function(n){return n!==e})))})),y({artSetExclusion:t})}),[_,g,y]);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(w.Z,{sx:{display:"flex"},children:[(0,q.jsxs)(h.Z,{sx:{flexGrow:1},children:[(0,q.jsx)($.Z,{children:(0,q.jsx)("strong",{children:a(Fn||(Fn=(0,r.Z)(["artSetConfig.title"])))})}),(0,q.jsxs)(ue.Z,{spacing:1,children:[(0,q.jsxs)($.Z,{children:[a(Vn||(Vn=(0,r.Z)(["artSetConfig.setEffCond"])))," ",(0,q.jsxs)(ne.Z,{color:Q?"success":"secondary",children:[Q," ",a("artSetConfig.enabled")]})]}),(0,q.jsxs)($.Z,{children:[a(Hn||(Hn=(0,r.Z)(["sheet:2set"])))," ",(0,q.jsxs)(ne.Z,{color:"success",children:[H," ",(0,q.jsx)(Nn.G,{icon:Gn.Stf,className:"fa-fw"})," ",a("artSetConfig.allowed")]}),!!Y&&" / ",!!Y&&(0,q.jsxs)(ne.Z,{color:"secondary",children:[Y," ",(0,q.jsx)(Nn.G,{icon:Gn.gPx,className:"fa-fw"})," ",a("artSetConfig.excluded")]})]}),(0,q.jsxs)($.Z,{children:[a($n||($n=(0,r.Z)(["sheet:4set"])))," ",(0,q.jsxs)(ne.Z,{color:"success",children:[U," ",(0,q.jsx)(Nn.G,{icon:Gn.Stf,className:"fa-fw"})," ",a("artSetConfig.allowed")]}),!!J&&" / ",!!J&&(0,q.jsxs)(ne.Z,{color:"secondary",children:[J," ",(0,q.jsx)(Nn.G,{icon:Gn.gPx,className:"fa-fw"})," ",a("artSetConfig.excluded")]})]}),(0,q.jsxs)($.Z,{children:[a(Un||(Un=(0,r.Z)(["artSetConfig.2rainbow"])))," ",(0,q.jsxs)(ne.Z,{color:B?"success":"secondary",children:[(0,q.jsx)(Nn.G,{icon:B?Gn.Stf:Gn.gPx,className:"fa-fw"})," ",B?a("artSetConfig.allowed"):"Excluded"]})]}),(0,q.jsxs)($.Z,{children:[a(Yn||(Yn=(0,r.Z)(["artSetConfig.4rainbow"])))," ",(0,q.jsxs)(ne.Z,{color:L?"success":"secondary",children:[(0,q.jsx)(Nn.G,{icon:L?Gn.Stf:Gn.gPx,className:"fa-fw"})," ",L?a("artSetConfig.allowed"):"Excluded"]})]})]})]}),(0,q.jsx)(j.Z,{onClick:I,disabled:s,color:"info",sx:{borderRadius:0},children:(0,q.jsx)(Wn.Z,{})})]}),O&&(0,q.jsx)(ee.Z,{open:E,onClose:D,children:(0,q.jsxs)(b.Z,{children:[(0,q.jsxs)(h.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,q.jsx)($.Z,{variant:"h6",children:a(Jn||(Jn=(0,r.Z)(["artSetConfig.title"])))}),(0,q.jsx)(k.Z,{onClick:D})]}),(0,q.jsx)(F.Z,{}),(0,q.jsxs)(h.Z,{children:[(0,q.jsx)(w.Z,{sx:{mb:1},children:(0,q.jsxs)(h.Z,{children:[(0,q.jsxs)(x.Z,{display:"flex",gap:1,children:[(0,q.jsx)($.Z,{children:(0,q.jsx)("strong",{children:a(Xn||(Xn=(0,r.Z)(["artSetConfig.modal.setCond.title"])))})}),(0,q.jsx)($.Z,{sx:{flexGrow:1},children:(0,q.jsxs)(ne.Z,{color:Q?"success":"secondary",children:[Q," ",a("artSetConfig.selected")]})}),(0,q.jsx)(j.Z,{size:"small",onClick:re,color:"error",startIcon:(0,q.jsx)(Se.Z,{}),children:a(Qn||(Qn=(0,r.Z)(["artSetConfig.modal.setCond.reset"])))})]}),(0,q.jsx)($.Z,{children:a(et||(et=(0,r.Z)(["artSetConfig.modal.setCond.text"])))})]})}),(0,q.jsx)(w.Z,{sx:{mb:1},children:(0,q.jsxs)(h.Z,{children:[(0,q.jsx)($.Z,{sx:{flexGrow:1},children:(0,q.jsx)("strong",{children:(0,q.jsxs)(qn.c,{t:a,i18nKey:"artSetConfig.modal.ArtSetFilter.title",children:["Artifact Sets ",(0,q.jsxs)(X.Z,{color:"success",children:["Allowed",(0,q.jsx)(Nn.G,{icon:Gn.Stf,className:"fa-fw"})]})," / ",(0,q.jsxs)(X.Z,{color:"secondary",variant:"light",children:["Excluded",(0,q.jsx)(Nn.G,{icon:Gn.gPx,className:"fa-fw"})]})]})})}),(0,q.jsx)($.Z,{children:(0,q.jsxs)(qn.c,{t:a,i18nKey:"artSetConfig.modal.ArtSetFilter.intro",children:["You can allow/exclude which sets you want the builder to consider. In the following examples, ",(0,q.jsx)("strong",{children:"A"})," is on-set, and ",(0,q.jsx)("strong",{children:"R"})," is rainbow(off-set)"]})}),(0,q.jsx)($.Z,{children:(0,q.jsxs)(qn.c,{t:a,i18nKey:"artSetConfig.modal.ArtSetFilter.2set",children:[(0,q.jsx)("strong",{children:(0,q.jsxs)(X.Z,{color:"secondary",variant:"light",children:["Excluding",(0,q.jsx)(Nn.G,{icon:Gn.gPx,className:"fa-fw"})," 2-Set"]})})," would exclude 2-Set builds: ",(0,q.jsxs)("strong",{children:[(0,q.jsx)(X.Z,{color:"secondary",variant:"light",children:"AA"}),"RRR"]})," and ",(0,q.jsxs)("strong",{children:[(0,q.jsx)(X.Z,{color:"secondary",variant:"light",children:"AAA"}),"RR"]}),"."]})}),(0,q.jsx)($.Z,{children:(0,q.jsxs)(qn.c,{t:a,i18nKey:"artSetConfig.modal.ArtSetFilter.4set",children:[(0,q.jsx)("strong",{children:(0,q.jsxs)(X.Z,{color:"secondary",variant:"light",children:["Excluding",(0,q.jsx)(Nn.G,{icon:Gn.gPx,className:"fa-fw"})," 4-Set"]})})," would exclude 4-Set builds: ",(0,q.jsxs)("strong",{children:[(0,q.jsx)(X.Z,{color:"secondary",variant:"light",children:"AAAA"}),"R"]})," and ",(0,q.jsx)("strong",{children:(0,q.jsx)(X.Z,{color:"secondary",variant:"light",children:"AAAAA"})}),"."]})}),(0,q.jsx)($.Z,{children:(0,q.jsxs)(qn.c,{t:a,i18nKey:"artSetConfig.modal.ArtSetFilter.2rain",children:[(0,q.jsx)("strong",{children:(0,q.jsxs)(X.Z,{color:"secondary",variant:"light",children:["Excluding",(0,q.jsx)(Nn.G,{icon:Gn.gPx,className:"fa-fw"})," 3-Rainbow"]})})," would exclude 2-Set + 3-Rainbow builds: ",(0,q.jsxs)("strong",{children:["AA",(0,q.jsx)(X.Z,{color:"secondary",variant:"light",children:"RRR"})]})," and ",(0,q.jsxs)("strong",{children:["AAA",(0,q.jsx)(X.Z,{color:"secondary",variant:"light",children:"RR"})]}),"."]})}),(0,q.jsx)($.Z,{children:(0,q.jsxs)(qn.c,{t:a,i18nKey:"artSetConfig.modal.ArtSetFilter.4rain",children:[(0,q.jsx)("strong",{children:(0,q.jsxs)(X.Z,{color:"secondary",variant:"light",children:["Excluding",(0,q.jsx)(Nn.G,{icon:Gn.gPx,className:"fa-fw"})," 5-Rainbow"]})})," would exclude full 5-Rainbow builds: ",(0,q.jsx)("strong",{children:(0,q.jsx)(X.Z,{color:"secondary",variant:"light",children:"RRRRR"})}),"."]})})]})}),(0,q.jsxs)(de.ZP,{container:!0,columns:{xs:2,lg:3},sx:{mb:1},spacing:1,children:[(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(ht,{setNum:2,numAllow:H,numExclude:Y,setAllExclusion:ie})}),(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(ht,{setNum:4,numAllow:U,numExclude:J,setAllExclusion:ie})}),(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(w.Z,{children:(0,q.jsxs)(h.Z,{children:[(0,q.jsx)($.Z,{gutterBottom:!0,children:(0,q.jsx)("strong",{children:(0,q.jsxs)(qn.c,{t:a,i18nKey:"artSetConfig.alExRainbow",children:[(0,q.jsxs)(X.Z,{color:"success",children:["Allow ",(0,q.jsx)(Nn.G,{icon:Gn.Stf,className:"fa-fw"})]})," / ",(0,q.jsxs)(X.Z,{color:"secondary",variant:"light",children:["Exclude ",(0,q.jsx)(Nn.G,{icon:Gn.gPx,className:"fa-fw"})]})," Rainbow Builds"]})})}),(0,q.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,q.jsx)(j.Z,{fullWidth:!0,onClick:function(){return y({type:"artSetExclusion",setKey:"rainbow",num:2})},color:B?"success":"secondary",startIcon:B?(0,q.jsx)(pe.Z,{}):(0,q.jsx)(me.Z,{}),endIcon:(0,q.jsx)(Nn.G,{icon:B?Gn.Stf:Gn.gPx,className:"fa-fw"}),children:a(nt||(nt=(0,r.Z)(["artSetConfig.2rainbow"])))}),(0,q.jsx)(j.Z,{fullWidth:!0,onClick:function(){return y({type:"artSetExclusion",setKey:"rainbow",num:4})},color:L?"success":"secondary",startIcon:L?(0,q.jsx)(pe.Z,{}):(0,q.jsx)(me.Z,{}),endIcon:(0,q.jsx)(Nn.G,{icon:L?Gn.Stf:Gn.gPx,className:"fa-fw"}),children:a(tt||(tt=(0,r.Z)(["artSetConfig.4rainbow"])))})]})]})})})]}),(0,q.jsx)(de.ZP,{container:!0,spacing:1,columns:{xs:2,lg:3},children:_.map((function(e){return(0,q.jsx)(pt,{setKey:e,sheet:O[e],fakeDataContextObj:te,slotCount:z[e]},e)}))})]}),(0,q.jsx)(F.Z,{}),(0,q.jsx)(h.Z,{sx:{py:1},children:(0,q.jsx)(k.Z,{large:!0,onClick:D})})]})})]})}function ht(e){var n=e.numAllow,t=e.numExclude,r=e.setNum,i=e.setAllExclusion,s=(0,v.$)(["page_character_optimize","sheet"]).t;return(0,q.jsx)(w.Z,{children:(0,q.jsxs)(h.Z,{children:[(0,q.jsxs)($.Z,{gutterBottom:!0,children:[(0,q.jsx)("strong",{children:s("sheet:".concat(r,"set"))})," ",(0,q.jsxs)(ne.Z,{color:"success",children:[n," ",(0,q.jsx)(Nn.G,{icon:Gn.Stf,className:"fa-fw"})," ",s("artSetConfig.allowed")]}),!!t&&" / ",!!t&&(0,q.jsxs)(ne.Z,{color:"secondary",children:[t," ",(0,q.jsx)(Nn.G,{icon:Gn.gPx,className:"fa-fw"})," ",s("artSetConfig.excluded")]})]}),(0,q.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,q.jsx)(j.Z,{fullWidth:!0,disabled:!t,onClick:function(){return i(r,!1)},color:"success",startIcon:(0,q.jsx)(Nn.G,{icon:Gn.Stf,className:"fa-fw"}),children:s("artSetConfig.allowAll".concat(r,"set"))}),(0,q.jsx)(j.Z,{fullWidth:!0,disabled:!n,onClick:function(){return i(r,!0)},color:"secondary",startIcon:(0,q.jsx)(Nn.G,{icon:Gn.gPx,className:"fa-fw"}),children:s("artSetConfig.excludeAll".concat(r,"set"))})]})]})})}function pt(e){var n,t,s,a=e.sheet,l=e.setKey,c=e.fakeDataContextObj,o=e.slotCount,u=(0,v.$)("sheet").t,d=xt((0,Z.useContext)(S.K).character.key),f=d.buildSetting,p=d.buildSettingDispatch,m=null!==(n=null===f||void 0===f||null===(t=f.artSetExclusion)||void 0===t?void 0:t[l])&&void 0!==n?n:[],g=!m.includes(4),y=(0,Z.useMemo)((function(){return Object.values(o).reduce((function(e,n){return e+(n?1:0)}),0)}),[o]),b=(0,Z.useMemo)((function(){return!g||y<4?[]:Object.keys(a.setEffects).filter((function(e){var n;return null===(n=a.setEffects[e])||void 0===n?void 0:n.document.some((function(e){return"states"in e}))}))}),[a.setEffects,g,y]),k=m.includes(2),C=m.includes(4);return y<2?null:(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsxs)(w.Z,{sx:{height:"100%"},children:[(0,q.jsxs)(x.Z,{className:"grad-".concat(a.rarity[0],"star"),width:"100%",sx:{display:"flex"},children:[(0,q.jsx)(x.Z,{component:"img",src:a.defIconSrc,sx:{height:100,width:"auto",mx:-1}}),(0,q.jsxs)(x.Z,{sx:{flexGrow:1,px:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,q.jsx)($.Z,{variant:"h6",children:null!==(s=a.name)&&void 0!==s?s:""}),(0,q.jsxs)(x.Z,{display:"flex",gap:1,children:[(0,q.jsx)($.Z,{variant:"subtitle1",children:a.rarity.map((function(e,n){return(0,q.jsxs)("span",{children:[e," ",(0,q.jsx)(ot.q,{stars:1})," ",n<a.rarity.length-1?"/ ":null]},e)}))}),(0,q.jsx)(ct.Z,{title:(0,q.jsxs)(x.Z,{children:[(0,q.jsx)($.Z,{children:(0,q.jsx)(ne.Z,{color:"success",children:u(rt||(rt=(0,r.Z)(["2set"])))})}),(0,q.jsx)($.Z,{children:(0,q.jsx)(ut.v,{ns:"artifact_".concat(l,"_gen"),key18:"setEffects.2"})}),(0,q.jsxs)(x.Z,{paddingTop:2,sx:{opacity:m.includes(4)?.6:1},children:[(0,q.jsx)($.Z,{children:(0,q.jsx)(ne.Z,{color:"success",children:u(it||(it=(0,r.Z)(["4set"])))})}),(0,q.jsx)($.Z,{children:(0,q.jsx)(ut.v,{ns:"artifact_".concat(l,"_gen"),key18:"setEffects.4"})})]})]})})]}),(0,q.jsx)(x.Z,{sx:{display:"flex",gap:1},children:Object.entries(o).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,q.jsx)($.Z,{sx:{flexGrow:1},variant:"subtitle2",children:(0,q.jsxs)(ne.Z,{sx:{width:"100%"},color:r?"primary":"secondary",children:[(0,lt.Ir)(t),r]})},t)}))})]})]}),(0,q.jsxs)(Pe.Z,{sx:{".MuiButton-root":{borderRadius:0}},fullWidth:!0,children:[y>=2&&(0,q.jsx)(j.Z,{startIcon:k?(0,q.jsx)(me.Z,{}):(0,q.jsx)(pe.Z,{}),onClick:function(){return p({type:"artSetExclusion",setKey:l,num:2})},color:k?"secondary":"success",endIcon:(0,q.jsx)(Nn.G,{icon:k?Gn.gPx:Gn.Stf,className:"fa-fw"}),children:u(st||(st=(0,r.Z)(["2set"])))}),y>=4&&(0,q.jsx)(j.Z,{startIcon:C?(0,q.jsx)(me.Z,{}):(0,q.jsx)(pe.Z,{}),onClick:function(){return p({type:"artSetExclusion",setKey:l,num:4})},color:C?"secondary":"success",endIcon:(0,q.jsx)(Nn.G,{icon:C?Gn.gPx:Gn.Stf,className:"fa-fw"}),children:u(at||(at=(0,r.Z)(["4set"])))})]}),!!b.length&&(0,q.jsx)(P.R.Provider,{value:c,children:(0,q.jsx)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:b.map((function(e){return(0,q.jsx)(Ln,{setKey:l,setNumKey:parseInt(e),hideHeader:!0,conditionalsOnly:!0},e)}))})})]})},l)}var mt=[0,4,8,12,16,20];function jt(e){var n=e.mainStatAssumptionLevel,t=void 0===n?0:n,r=e.setmainStatAssumptionLevel,i=e.disabled,s=(0,v.$)("page_character_optimize").t;return(0,q.jsx)(un.Z,{fullWidth:!0,color:t?"success":"primary",disabled:i,title:t?s("mainStat.assumptionLvl.lvl",{lvl:t}):s("mainStat.assumptionLvl.no"),children:mt.map((function(e){return(0,q.jsx)(rn.Z,{onClick:function(){return r(e)},children:e?s("mainStat.assumptionLvl.lvl",{lvl:e}):s("mainStat.assumptionLvl.no")},e)}))})}function Zt(){var e=(0,Z.useContext)(S.K).character.bonusStats,n=(0,Z.useContext)(P.R).data,t=Object.keys(e);if(!t.length)return null;var r=t.map((function(e){return n.get(ve.ri.customBonus[e])}));return(0,q.jsxs)(w.Z,{children:[(0,q.jsx)(h.Z,{children:(0,q.jsx)($.Z,{children:"Bonus Stats"})}),(0,q.jsx)(F.Z,{}),(0,q.jsx)(h.Z,{children:r.map((function(e){return(0,q.jsx)(Te.JW,{node:e},e.info.key)}))})]})}var vt=t(57482),gt=t(52771),yt=(0,ye.ZP)("strong")({fontFamily:"monospace"}),bt=(0,ye.ZP)(vt.Z)((function(e){e.theme;return{height:10,borderRadius:5}}));function wt(e){var n=e.status,t=n.type,r=n.tested,i=(n.failed,n.skipped),s=n.total,a=n.startTime,l=n.finishTime,c=e.characterName,o=isFinite(s),u="inactive"!==t,d=s-i,x=(0,q.jsx)(yt,{children:r.toLocaleString()}),f=(0,q.jsx)(yt,{children:d.toLocaleString()}),h=!!i&&(0,q.jsxs)("span",{children:["(",(0,q.jsx)("b",{children:(0,q.jsx)(yt,{children:i.toLocaleString()})})," skipped)"]}),p=(0,q.jsx)(yt,{children:(0,gt.e6)(Math.round((null!==l&&void 0!==l?l:performance.now())-(null!==a&&void 0!==a?a:NaN)))}),m="",j="",Z=void 0;if(u)Z=100*r/d,m=(0,q.jsxs)($.Z,{children:["Generating and testing ",x,o?(0,q.jsxs)(q.Fragment,{children:["/",f]}):void 0," build configurations against the criteria for ",(0,q.jsx)("b",{children:c}),". ",h]}),j=(0,q.jsxs)($.Z,{children:["Time elapsed: ",p]});else{if(!(r+i))return null;Z=100,m=(0,q.jsxs)($.Z,{children:["Generated and tested ",x," Build configurations against the criteria for ",(0,q.jsx)("b",{children:c}),". ",h]}),j=(0,q.jsxs)($.Z,{children:["Total duration: ",p]})}return(0,q.jsxs)(nn.Z,{severity:"success",variant:"filled",sx:{"& .MuiAlert-message":{flexGrow:1}},children:[m,j,void 0!==Z&&(0,q.jsxs)(de.ZP,{container:!0,spacing:1,alignItems:"center",children:[o&&(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)($.Z,{children:"".concat(Z.toFixed(1),"%")})}),(0,q.jsx)(de.ZP,{item:!0,flexGrow:1,children:(0,q.jsx)(bt,{variant:o?"determinate":"indeterminate",value:Z,color:"primary"})})]})]})}var kt=t(98268),Ct=t(63204),St=t(66647),Pt=t(13967),Kt=t(12065),Et=t(10658),At=t(98620),It=t(63372),Dt=t(20005),Rt=t(87174),Ot=t(64929);function _t(e){var n,t,r=e.artifactId,i=e.slotKey,s=e.mainStatAssumptionLevel,a=void 0===s?0:s,l=e.showLocation,c=void 0!==l&&l,o=e.onClick,u=e.BGComponent,d=void 0===u?b.Z:u,f=(0,It.Z)(r),h=(0,R.Z)((function(){return zn.y.get(null===f||void 0===f?void 0:f.setKey)}),[null===f||void 0===f?void 0:f.setKey]),p=(0,Z.useCallback)((function(e){return(0,q.jsx)(St.Z,{onClick:o,sx:{height:"100%"},children:e})}),[o]),m=(0,Pt.Z)();if(!f)return(0,q.jsx)(d,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,q.jsx)(x.Z,{component:"img",src:Et.Z.slot[i],sx:{width:"25%",height:"auto",opacity:.7}})});var j=f.slotKey,v=f.rarity,g=f.level,y=f.mainStatKey,w=f.substats,k=f.location,C=Math.max(Math.min(a,4*v),g),S=re.ZP.unit(y),P=M.Kj.find((function(e){return f.mainStatKey.includes(e)})),K=P?(0,Kt.Fq)(m.palette[P].main,.6):(0,Kt.Fq)(m.palette.secondary.main,.6);return(0,q.jsx)(d,{sx:{height:"100%"},children:(0,q.jsx)(Dt.Z,{condition:!!o,wrapper:p,children:(0,q.jsxs)(x.Z,{display:"flex",height:"100%",children:[(0,q.jsxs)(x.Z,{className:"grad-".concat(v,"star"),sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,q.jsx)(Ot.Z,{art:f,children:(0,q.jsx)(x.Z,{component:"img",src:null!==(n=null===h||void 0===h?void 0:h.slotIcons[j])&&void 0!==n?n:"",sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),(0,q.jsxs)(x.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,q.jsx)(je.Z,{size:"small",label:(0,q.jsx)("strong",{children:" +".concat(g)}),color:At.ZP.levelVariant(g)}),c&&(0,q.jsx)(je.Z,{size:"small",label:(0,q.jsx)(Tt,{location:k}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,q.jsx)(je.Z,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:K},label:(0,q.jsxs)($.Z,{sx:{display:"flex",gap:.5,px:1,zIndex:1},children:[(0,q.jsx)(cn.Z,{placement:"top",title:(0,q.jsx)($.Z,{children:(0,q.jsx)(Rt._,{statKey:y})}),disableInteractive:!0,children:(0,q.jsx)("span",{children:Ce.Z[y]})}),(0,q.jsxs)(X.Z,{color:C!==g?"warning":void 0,children:[(0,re.qs)(null!==(t=At.ZP.mainStatValue(y,v,C))&&void 0!==t?t:0,re.ZP.unit(y)),S]})]})})]}),(0,q.jsx)(x.Z,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:w.map((function(e,n){return(0,q.jsx)(Mt,{stat:e},n+e.key)}))})]})})})}function Mt(e){var n,t,r=e.stat;if(!r.value)return null;var i=null!==(n=null===(t=r.rolls)||void 0===t?void 0:t.length)&&void 0!==n?n:0,s="roll".concat((0,jn.uZ)(i,1,6)),a=re.ZP.unit(r.key);return(0,q.jsx)(x.Z,{display:"flex",gap:1,alignContent:"center",children:(0,q.jsxs)($.Z,{sx:{flexGrow:1,display:"flex",gap:.5},color:i?"".concat(s,".main"):"error.main",component:"span",children:[(0,q.jsx)(cn.Z,{placement:"top",title:(0,q.jsx)($.Z,{children:r.key&&(0,q.jsx)(Rt._,{statKey:r.key})}),disableInteractive:!0,children:(0,q.jsx)("span",{children:Ce.Z[r.key]})}),(0,q.jsx)("span",{children:"".concat((0,re.qs)(r.value,re.ZP.unit(r.key))).concat(a)})]})})}function Tt(e){var n=e.location,t=(0,R.Z)((function(){return E.Z.get(null!==n&&void 0!==n?n:"")}),[n]);return t?(0,q.jsx)(cn.Z,{placement:"right-end",title:(0,q.jsx)($.Z,{children:t.name}),children:(0,q.jsx)(Q.Z,{src:t.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,q.jsx)(Ct.Z,{})}var Gt=t(80616),Nt=t(16002);function Wt(){var e=(0,Z.useContext)(P.R).data,n=(0,Z.useMemo)((function(){return(0,te.U)(e).filter((function(e){var n=(0,i.Z)(e,2)[1];return Object.values(n).some((function(e){return!e.isEmpty}))}))}),[e]);return(0,q.jsx)(fe.Z,{sx:{mr:-1,mb:-1},children:(0,q.jsx)(Nt.ZP,{columns:{xs:1,sm:2,md:3,xl:4},spacing:1,children:n.map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,q.jsx)(qt,{displayNs:r,sectionKey:t},t)}))})})}function qt(e){var n=e.displayNs,t=e.sectionKey,r=(0,Z.useContext)(xn),s=(0,Z.useContext)(P.R),a=s.data,l=s.oldData,c=(0,R.Z)((function(){return(0,te.f)(a,t)}),[a,t]),o=(0,Z.useMemo)((function(){return(0,jn.xh)(n,(function(e,n){return(0,yn.UF)(["display",t,n])}))}),[n,t]);if(!c)return(0,q.jsx)(b.Z,{});var u=c.title,d=c.icon,x=c.action;return(0,q.jsxs)(b.Z,{children:[(0,q.jsx)(J.Z,{avatar:d&&(0,q.jsx)(Q.Z,{size:2,sx:{m:-1},src:d}),title:u,action:x&&(0,q.jsx)(ne.Z,{children:x})}),(0,q.jsx)(F.Z,{}),(0,q.jsx)(Te.lD,{sx:{m:0},children:Object.entries(n).map((function(e){var n=(0,i.Z)(e,2),s=n[0],a=n[1];return(0,q.jsx)(Te.JW,{node:a,oldValue:l?l.get(o[s]).value:void 0,component:xe.ZP,emphasize:JSON.stringify(r)===JSON.stringify([t,s])},s)}))})]})}var zt=t(66218),Bt=t(74480),Lt=t(41717);function Ft(e){var n=e.weaponId,t=e.showLocation,r=void 0!==t&&t,i=e.onClick,s=e.BGComponent,a=void 0===s?b.Z:s,l=(0,Bt.Z)(n),c=(0,R.Z)((function(){return(null===l||void 0===l?void 0:l.key)&&zt.Z.get(l.key)}),[null===l||void 0===l?void 0:l.key]),o=(0,Z.useCallback)((function(e){return(0,q.jsx)(St.Z,{sx:{height:"100%"},onClick:i,children:e})}),[i]),u=(0,Z.useMemo)((function(){return c&&l&&(0,hn.mP)([c.data,(0,hn.v0)(l)])}),[c,l]);if(!l||!c||!u)return(0,q.jsx)(a,{sx:{height:"100%"},children:(0,q.jsx)(f.Z,{variant:"rectangular",sx:{width:"100%",height:"100%"}})});var d=l.refinement,h=l.location;return(0,q.jsx)(a,{sx:{height:"100%"},children:(0,q.jsx)(Dt.Z,{condition:!!i,wrapper:o,children:(0,q.jsxs)(x.Z,{display:"flex",height:"100%",alignItems:"stretch",children:[(0,q.jsxs)(x.Z,{className:"grad-".concat(c.rarity,"star"),sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[(0,q.jsx)(Lt.Z,{sheet:c,children:(0,q.jsx)(x.Z,{component:"img",src:c.getImg(l.ascension),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),(0,q.jsxs)(x.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,q.jsx)(je.Z,{size:"small",label:(0,q.jsx)("strong",{children:zt.Z.getLevelString(l)}),color:"primary"}),r&&(0,q.jsx)(je.Z,{size:"small",label:(0,q.jsx)(Ht,{location:h}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,q.jsx)(x.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:c.hasRefinement&&(0,q.jsx)(je.Z,{size:"small",color:"info",label:(0,q.jsxs)("strong",{children:["R",d]})})})]}),(0,q.jsxs)(x.Z,{display:"flex",flexDirection:"column",sx:{p:1},children:[(0,q.jsx)(Vt,{node:u.get(ve.qH.weapon.main)}),(0,q.jsx)(Vt,{node:u.get(ve.qH.weapon.sub)})]})]})})})}function Vt(e){var n=e.node;if(!n.info.key)return null;var t=(0,re.EC)(n.value,n.unit,n.unit?void 0:0);return(0,q.jsx)(x.Z,{display:"flex",gap:1,alignContent:"center",children:(0,q.jsxs)($.Z,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[(0,q.jsx)(cn.Z,{placement:"top",title:(0,q.jsx)($.Z,{children:n.info.key&&re.ZP.getArtStr(n.info.key)}),disableInteractive:!0,children:(0,q.jsx)("span",{children:Ce.Z[n.info.key]})}),(0,q.jsx)("span",{children:t})]})})}function Ht(e){var n=e.location,t=(0,R.Z)((function(){return E.Z.get(null!==n&&void 0!==n?n:"")}),[n]);return t?(0,q.jsx)(cn.Z,{placement:"right-end",title:(0,q.jsx)($.Z,{children:t.name}),children:(0,q.jsx)(Q.Z,{src:t.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,q.jsx)(Ct.Z,{})}var $t=t(72838);function Ut(e){var n=e.index,t=e.compareBuild,r=e.extraButtons,s=e.disabled,a=(0,Z.useContext)(S.K).character,l=a.key,c=a.equippedArtifacts,o=xt(l).buildSetting.mainStatAssumptionLevel,u=(0,Z.useContext)(fn.t).database,d=(0,Z.useContext)(P.R),x=d.data,p=d.oldData,m=(0,Z.useState)(void 0),v=(0,i.Z)(m,2),g=v[0],y=v[1],b=(0,Z.useCallback)((function(){return y(void 0)}),[y]),k=(0,Z.useCallback)((function(){if(window.confirm("Do you want to equip this build to this character?")){var e=Object.fromEntries(M.eV.map((function(e){return[e,x.get(ve.ri.art[e].id).value]})));u.chars.equipArtifacts(l,e),u.weapons.set(x.get(ve.ri.weapon.id).value,{location:l})}}),[l,x,u]),C=(0,Z.useMemo)((function(){var e=(0,he.Z)({},d);return t||(e.oldData=void 0),e}),[d,t]),K=(0,Z.useMemo)((function(){return M.eV.map((function(e){return(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(_t,{showLocation:!0,slotKey:e,artifactId:x.get(ve.ri.art[e].id).value,mainStatAssumptionLevel:o,onClick:function(){var n=c[e],t=x.get(ve.ri.art[e].id).value;y({oldId:n!==t?n:void 0,newId:t})}})},e)}))}),[x,y,c,o]);if(!p)return null;var E=M.eV.every((function(e){return x.get(ve.ri.art[e].id).value===p.get(ve.ri.art[e].id).value}))&&x.get(ve.ri.weapon.id).value===p.get(ve.ri.weapon.id).value;return(0,q.jsx)(w.Z,{children:(0,q.jsxs)(Z.Suspense,{fallback:(0,q.jsx)(f.Z,{variant:"rectangular",width:"100%",height:600}),children:[g&&(0,q.jsx)(Xt,{newOld:g,mainStatAssumptionLevel:o,onClose:b}),(0,q.jsxs)(h.Z,{children:[(0,q.jsxs)(fe.Z,{display:"flex",gap:1,sx:{pb:1},flexWrap:"wrap",children:[void 0!==n&&(0,q.jsx)(ne.Z,{color:"info",children:(0,q.jsx)($.Z,{children:(0,q.jsxs)("strong",{children:["#",n+1,E?" (Equipped)":""]})})}),(0,q.jsx)(Yt,{currentlyEquipped:E}),(0,q.jsx)(fe.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),(0,q.jsx)(j.Z,{size:"small",color:"success",onClick:k,disabled:s||E,children:"Equip Build"}),r]}),(0,q.jsxs)(de.ZP,{container:!0,spacing:1,sx:{pb:1},columns:{xs:2,sm:3,md:4,lg:6},children:[(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(Ft,{showLocation:!0,weaponId:x.get(ve.ri.weapon.id).value})}),K]}),(0,q.jsx)(P.R.Provider,{value:C,children:(0,q.jsx)(Wt,{})})]})]})})}function Yt(e){var n=e.currentlyEquipped,t=void 0!==n&&n,r=(0,Z.useContext)(P.R).data,s={};return M.eV.forEach((function(e){var n=r.get(ve.ri.art[e].set).value;n&&(s[n]?s[n].push(e):s[n]=[e])})),(0,q.jsx)(q.Fragment,{children:Object.entries(s).sort((function(e,n){var t=(0,i.Z)(e,2),r=(t[0],t[1]),s=(0,i.Z)(n,2);s[0];return s[1].length-r.length})).map((function(e){var n=(0,i.Z)(e,2),r=n[0],s=n[1];return(0,q.jsx)(Jt,{setKey:r,currentlyEquipped:t,slotarr:s},r)}))})}function Jt(e){var n,t=e.setKey,r=e.currentlyEquipped,i=void 0!==r&&r,s=e.slotarr,a=(0,R.Z)((function(){return zn.y.get(t)}),[]);if(!a)return null;var l=s.length,c=Object.keys(a.setEffects).map((function(e){return parseInt(e)})).filter((function(e){return e<=l}));return(0,q.jsx)(fe.Z,{children:(0,q.jsx)(Gt.Z,{artifactSheet:a,numInSet:l,children:(0,q.jsx)(ne.Z,{color:i?"success":"primary",children:(0,q.jsxs)($.Z,{children:[s.map((function(e){return(0,lt.Ir)(e)}))," ",null!==(n=a.name)&&void 0!==n?n:"",c.map((function(e){return(0,q.jsx)(ne.Z,{sx:{ml:.5},color:"success",children:e},e)}))]})})})})}function Xt(e){var n=e.newOld,t=n.newId,r=n.oldId,i=e.mainStatAssumptionLevel,s=e.onClose,a=(0,Z.useContext)(fn.t).database,l=(0,Z.useContext)(S.K).character.key,c=(0,Z.useCallback)((function(){window.confirm("Do you want to equip this artifact to this character?")&&(a.arts.set(t,{location:l}),s())}),[t,a,l,s]);return(0,q.jsx)(ee.Z,{open:!!t,onClose:s,containerProps:{maxWidth:r?"md":"xs"},children:(0,q.jsx)(b.Z,{children:(0,q.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2,height:"100%"},children:[r&&(0,q.jsx)(fe.Z,{minWidth:320,children:(0,q.jsx)($t.Z,{artifactId:r,mainStatAssumptionLevel:i,canExclude:!0,canEquip:!0})}),r&&(0,q.jsx)(fe.Z,{display:"flex",flexGrow:1}),r&&(0,q.jsx)(fe.Z,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,q.jsx)(j.Z,{onClick:c,sx:{display:"flex"},children:(0,q.jsx)(kt.Z,{sx:{fontSize:40}})})}),r&&(0,q.jsx)(fe.Z,{display:"flex",flexGrow:1}),(0,q.jsx)(fe.Z,{minWidth:320,children:(0,q.jsx)($t.Z,{artifactId:t,mainStatAssumptionLevel:i,canExclude:!0,canEquip:!0})})]})})})}var Qt,er,nr,tr,rr,ir,sr,ar=t(94294),lr=t(72456),cr=t(40165),or=t(20601),ur=t(37389),dr=t(82839),xr=t(90466),fr=t(12891),hr=t(42633),pr=t(27281),mr=t(64694),jr=t(62066);function Zr(e){var n=e.chartData,t=e.plotBase,s=e.setPlotBase,a=e.disabled,l=void 0!==a&&a,c=(0,v.$)(["page_character_optimize","ui"]).t,o=(0,Z.useState)(!1),u=(0,i.Z)(o,2),d=u[0],x=u[1],f=(0,Z.useState)(!0),p=(0,i.Z)(f,2),m=p[0],g=p[1],y=(0,Z.useContext)(P.R).data,k=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==y.get(ve.ri.weaponType).value&&k.push("physical_dmg_"),k.push("".concat(y.get(ve.ri.charEle).value,"_dmg_"));var C=(0,Z.useMemo)((function(){var e,t;if(!n)return{displayData:null,downloadData:null};var r,i=n.data.map((function(e){var n=e.value;return{x:e.plot,y:n}})).sort((function(e,n){return e.x-n.x})),s=[],a=(0,vn.Z)(i);try{for(a.s();!(r=a.n()).done;){for(var l=r.value,c=void 0;c=s.pop();)if(c.y>l.y){s.push(c);break}s.push(l)}}catch(u){a.e(u)}finally{a.f()}(null===(e=s[0])||void 0===e?void 0:e.x)!==(null===(t=i[0])||void 0===t?void 0:t.x)&&(i[0].min=s[0].y),s.forEach((function(e){e.min=e.y}));var o={minimum:s.map((function(e){return[e.x,e.y]})),allData:i.map((function(e){return[e.x,e.y]}))};return{displayData:i,downloadData:o}}),[n]),S=C.displayData,K=C.downloadData;return(0,q.jsxs)(w.Z,{children:[(0,q.jsx)(h.Z,{children:(0,q.jsxs)(de.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)($.Z,{children:c(Qt||(Qt=(0,r.Z)(["tcGraph.vs"])))})}),(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsxs)(un.Z,{size:"small",title:t?re.ZP.get(t):c(er||(er=(0,r.Z)(["tcGraph.notSel"]))),color:t?"success":"primary",disabled:l,children:[(0,q.jsx)(rn.Z,{onClick:function(){s("")},children:c(nr||(nr=(0,r.Z)(["ui:unselect"])))}),(0,q.jsx)(F.Z,{}),k.map((function(e){return(0,q.jsx)(rn.Z,{onClick:function(){s(e)},children:re.ZP.get(e)},e)}))]})}),(0,q.jsx)(de.ZP,{item:!0,flexGrow:1,children:(0,q.jsx)(cr.Z,{placement:"top",title:"Using data from the builder, this will generate a graph to visualize Optimization Target vs. a selected stat. The graph will show the maximum Optimization Target value per 0.01 of the selected stat.",children:(0,q.jsx)(ar.Z,{})})}),!!K&&(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)(j.Z,{size:"small",startIcon:m?(0,q.jsx)(pe.Z,{}):(0,q.jsx)(me.Z,{}),color:m?"success":"secondary",onClick:function(){return g(!m)},children:c(tr||(tr=(0,r.Z)(["tcGraph.showMinStatThr"])))})}),!!K&&(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)(j.Z,{size:"small",color:"info",startIcon:(0,q.jsx)(lr.Z,{}),onClick:function(){return x(!d)},children:c(rr||(rr=(0,r.Z)(["tcGraph.downloadData"])))})})]})}),!!S&&(0,q.jsx)(F.Z,{}),n&&!!S&&(0,q.jsxs)(h.Z,{children:[(0,q.jsx)(Ze.Z,{in:!!K&&d,children:(0,q.jsx)(b.Z,{sx:{mb:2},children:(0,q.jsxs)(h.Z,{children:[(0,q.jsx)($.Z,{children:"Min Data"}),(0,q.jsx)(gr,{data:null===K||void 0===K?void 0:K.minimum}),(0,q.jsx)($.Z,{children:"All Data"}),(0,q.jsx)(gr,{data:null===K||void 0===K?void 0:K.allData})]})})}),(0,q.jsx)(yr,{displayData:S,plotNode:n.plotNode,valueNode:n.valueNode,showMin:m})]})]})}var vr=(0,ye.ZP)("textarea")({width:"100%",fontFamily:"monospace",resize:"vertical",minHeight:"5em"});function gr(e){var n=e.data;return(0,q.jsx)(vr,{readOnly:!0,value:JSON.stringify(n),onClick:function(e){var n=e.target;n.selectionStart=0,n.selectionEnd=n.value.length}})}function yr(e){var n,t,i=e.displayData,s=e.plotNode,a=e.valueNode,l=e.showMin,c=(0,v.$)("page_character_optimize").t,o=re.ZP.unit(null===(n=s.info)||void 0===n?void 0:n.key),u=re.ZP.unit(null===(t=a.info)||void 0===t?void 0:t.key);return(0,q.jsx)(or.h,{width:"100%",height:600,children:(0,q.jsxs)(ur.c,{data:i,children:[(0,q.jsx)(dr.q,{strokeDasharray:"3 3"}),(0,q.jsx)(xr.K,{dataKey:"x",scale:"linear",unit:o,domain:["auto","auto"],tick:{fill:"white"},type:"number",tickFormatter:function(e){return e>1e4?e.toFixed():e.toFixed(1)}}),(0,q.jsx)(fr.B,{name:"DMG",domain:["auto","auto"],unit:u,allowDecimals:!1,tick:{fill:"white"},type:"number"}),(0,q.jsx)(hr.d,{dataKey:"y",range:[3,25]}),(0,q.jsx)(pr.D,{}),(0,q.jsx)(mr.b,{name:c(ir||(ir=(0,r.Z)(["tcGraph.optTarget"]))),dataKey:"y",fill:"#8884d8",line:!0,lineType:"fitting",isAnimationActive:!1}),l&&(0,q.jsx)(jr.x,{name:c(sr||(sr=(0,r.Z)(["tcGraph.minStatReqThr"]))),dataKey:"min",stroke:"#ff7300",type:"stepBefore",connectNulls:!0,strokeWidth:2,isAnimationActive:!1})]})})}var br=["sands","goblet","circlet"];function wr(e){var n=e.disabled,t=void 0!==n&&n,r=(0,v.$)("artifact").t,i=xt((0,Z.useContext)(S.K).character.key),s=i.buildSetting.mainStatKeys,a=i.buildSettingDispatch;return(0,q.jsx)(fe.Z,{display:"flex",flexDirection:"column",gap:1,children:br.map((function(e){var n=s[e].length;return(0,q.jsxs)(fe.Z,{children:[(0,q.jsx)(F.Z,{}),(0,q.jsxs)(h.Z,{sx:{pt:1},children:[(0,q.jsxs)(fe.Z,{sx:{display:"flex",gap:1,alignItems:"center",pb:1},children:[(0,q.jsx)(cn.Z,{placement:"top",title:(0,q.jsx)($.Z,{children:r("slotName.".concat(e))}),children:(0,q.jsx)("span",{children:(0,lt.Ir)(e)})}),(0,q.jsx)(fe.Z,{flexGrow:1,children:(0,q.jsx)(ne.Z,{color:"info",children:n?"".concat(n," Selected"):"Any"})}),(0,q.jsx)(j.Z,{color:"error",size:"small",disabled:!s[e].length||t,sx:{mt:-1,mb:-1},onClick:function(){return a({type:"mainStatKey",slotKey:e})},children:(0,q.jsx)(Se.Z,{})})]}),(0,q.jsx)(de.ZP,{container:!0,spacing:1,children:At.ZP.slotMainStats(e).map((function(n,r){var i=M.Kj.find((function(e){return n.includes(e)})),l=s[e].includes(n)?null!==i&&void 0!==i?i:"success":"secondary";return(0,q.jsx)(de.ZP,{item:!0,flexGrow:1,xs:r<3&&"goblet"!==e?4:void 0,children:(0,q.jsx)(cn.Z,{placement:"top",title:(0,q.jsx)($.Z,{children:(0,q.jsx)("strong",{children:(0,q.jsx)(Rt._,{statKey:n})})}),disableInteractive:!0,children:(0,q.jsx)(j.Z,{fullWidth:!0,size:"small",color:l,sx:{fontSize:"1.2em",height:"100%",pointerEvents:t?"none":void 0,cursor:t?"none":void 0},onClick:function(){return a({type:"mainStatKey",slotKey:e,mainStatKey:n})},children:Ce.Z[n]})})},n)}))})]})]},e)}))})}var kr,Cr,Sr=t(72814);function Pr(e){var n=e.disabled,t=void 0!==n&&n,i=(0,v.$)("page_character_optimize").t,s=(0,Z.useContext)(S.K).character.key,a=(0,Z.useContext)(P.R).data,l=xt(s),c=l.buildSetting.statFilters,o=l.buildSettingDispatch,u=(0,Z.useCallback)((function(e){return o({statFilters:e})}),[o]),d=(0,Z.useMemo)((function(){var e=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==a.get(ve.qH.weaponType).value&&e.push("physical_dmg_");var n=a.get(ve.qH.charEle).value;return e.push("".concat(n,"_dmg_")),e}),[a]);return(0,q.jsxs)(x.Z,{children:[(0,q.jsx)(w.Z,{children:(0,q.jsxs)(h.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,q.jsx)($.Z,{children:i(kr||(kr=(0,r.Z)(["constraintFilter.title"])))}),(0,q.jsx)(ct.Z,{title:(0,q.jsx)($.Z,{children:i(Cr||(Cr=(0,r.Z)(["constraintFilter.tooltip"])))})})]})}),(0,q.jsx)(x.Z,{display:"flex",flexDirection:"column",gap:.5,children:(0,q.jsx)(Ge.Z,{statKeys:d,statFilters:c,setStatFilters:u,disabled:t})})]})}var Kr,Er=t(89841),Ar=t(70558),Ir=t(1235),Dr=t(68125),Rr=t(68087),Or=t(52991),_r=t(84684),Mr=t(77208),Tr=t(17278),Gr=navigator.hardwareConcurrency||4;function Nr(){return{equipmentPriority:[],threads:Gr}}function Wr(){return(0,Tr.ZP)("TabOptimize",Nr)}function qr(e){var n=e.disabled,t=void 0!==n&&n,s=(0,v.$)("page_character_optimize").t,a=(0,Z.useContext)(S.K).character.key,l=xt(a),c=l.buildSetting.useEquippedArts,o=l.buildSettingDispatch,u=(0,Z.useContext)(fn.t).database,d=(0,A.Z)(!1),f=(0,i.Z)(d,3),p=f[0],m=f[1],g=f[2],y=Wr(),C=(0,i.Z)(y,2),P=C[0].equipmentPriority,K=C[1],E=(0,Z.useMemo)((function(){return(0,oe.Z)(new Set(P)).filter((function(e){return u.chars.get(e)}))}),[u,P]),I=(0,Z.useCallback)((function(e){return K({equipmentPriority:e})}),[K]),D=(0,Z.useCallback)((function(e,n){var t=(0,oe.Z)(E),r=t[e];t.splice(e,1),t.splice(n,0,r),I(t)}),[E,I]),R=(0,Z.useCallback)((function(e){var n=(0,oe.Z)(E);n.splice(e,1),I(n)}),[E,I]),O=(0,Z.useCallback)((function(e){return I([].concat((0,oe.Z)(E),[e]))}),[E,I]),_=(0,Z.useCallback)((function(){return I([])}),[I]),M=(0,Z.useMemo)((function(){var e=E.length,n=E.indexOf(a);return n>=0&&(e=n),e}),[a,E]),T=(0,Z.useMemo)((function(){return u.chars.keys.length-1-M}),[M,u]),G=(0,Z.useMemo)((function(){return u.chars.keys.length-E.length}),[E,u]);return(0,q.jsxs)(x.Z,{display:"flex",gap:1,children:[(0,q.jsx)(ee.Z,{open:p,onClose:g,containerProps:{maxWidth:"sm"},children:(0,q.jsxs)(b.Z,{children:[(0,q.jsx)(h.Z,{children:(0,q.jsxs)(de.ZP,{container:!0,spacing:1,children:[(0,q.jsx)(de.ZP,{item:!0,flexGrow:1,children:(0,q.jsx)($.Z,{variant:"h6",children:s(Kr||(Kr=(0,r.Z)(["useEquipped.modal.title"])))})}),(0,q.jsx)(de.ZP,{item:!0,sx:{mb:-1},children:(0,q.jsx)(k.Z,{onClick:g})})]})}),(0,q.jsx)(F.Z,{}),(0,q.jsxs)(h.Z,{children:[(0,q.jsx)(w.Z,{sx:{mb:1},children:(0,q.jsxs)(h.Z,{children:[(0,q.jsx)($.Z,{gutterBottom:!0,children:(0,q.jsx)(qn.c,{t:s,i18nKey:"useEquipped.modal.desc1",children:"When generating a build, the Optimizer will only consider equipped artifacts from characters below the current character or those not on the list."})}),(0,q.jsx)($.Z,{gutterBottom:!0,children:(0,q.jsx)(qn.c,{t:s,i18nKey:"useEquipped.modal.desc2",children:"If the current character is not on the list, the Optimizer will only consider equipped artifacts from others characters that are not on the list."})})]})}),(0,q.jsxs)(x.Z,{display:"flex",flexDirection:"column",gap:2,children:[E.map((function(e,n){return(0,q.jsx)(zr,{characterKey:e,rank:n+1,maxRank:E.length,setRank:function(e){return e&&D(n,e-1)},onRemove:function(){return R(n)},numAbove:M},e)})),(0,q.jsxs)(x.Z,{sx:{display:"flex",gap:1},children:[(0,q.jsx)(Br,{onAdd:O,list:E}),(0,q.jsx)(j.Z,{color:"error",onClick:_,startIcon:(0,q.jsx)(Se.Z,{}),children:(0,q.jsx)(qn.c,{t:s,i18nKey:"useEquipped.modal.clearList",children:"Clear List"})})]}),!!T&&(0,q.jsx)(ne.Z,{color:"success",children:(0,q.jsx)($.Z,{children:(0,q.jsxs)(qn.c,{t:s,i18nKey:"useEquipped.modal.usingNum",count:G,children:["Using artifacts from ",(0,q.jsx)("strong",{children:{count:G}})," unlisted characters"]})})})]})]})]})}),(0,q.jsxs)(Pe.Z,{sx:{display:"flex",width:"100%"},children:[(0,q.jsx)(j.Z,{sx:{flexGrow:1},onClick:function(){return o({useEquippedArts:!c})},disabled:t,startIcon:c?(0,q.jsx)(pe.Z,{}):(0,q.jsx)(me.Z,{}),color:c?"success":"secondary",children:(0,q.jsxs)(x.Z,{children:[(0,q.jsx)("span",{children:(0,q.jsx)(qn.c,{t:s,i18nKey:"useEquipped.title",children:"Use Equipped Artifacts"})}),c&&(0,q.jsx)(ne.Z,{children:(0,q.jsxs)(qn.c,{t:s,i18nKey:"useEquipped.usingNum",count:T,children:["Using from ",(0,q.jsx)("strong",{children:{count:T}})," characters"]})})]})}),c&&(0,q.jsx)(j.Z,{sx:{flexShrink:1},color:"info",onClick:m,disabled:t,children:(0,q.jsx)(Wn.Z,{})})]})]})}function zr(e){var n=e.characterKey,t=e.rank,r=e.maxRank,s=e.setRank,a=e.onRemove,l=e.numAbove,c=(0,v.$)("page_character_optimize").t,o=(0,Z.useContext)(fn.t).database,u=(0,I.Z)(n),d=(0,W.Z)();if(!u)return null;var f=u.equippedWeapon,h=u.equippedArtifacts;return(0,q.jsxs)(w.Z,{sx:{p:1},children:[(0,q.jsxs)(x.Z,{sx:{pb:1,display:"flex",justifyContent:"space-between",gap:1},children:[(0,q.jsx)(ne.Z,{color:"info",children:(0,q.jsxs)($.Z,{children:["#",t]})}),(0,q.jsx)(ne.Z,{sx:{flexGrow:1},color:l===t-1?"warning":t-1<l?"error":"success",children:(0,q.jsx)($.Z,{children:l===t-1?(0,q.jsx)(qn.c,{t:c,i18nKey:"useEquipped.modal.status.curr",children:"Current character"}):t-1<l?(0,q.jsx)(qn.c,{t:c,i18nKey:"useEquipped.modal.status.dont",children:"Don't Use artifacts"}):(0,q.jsx)(qn.c,{t:c,i18nKey:"useEquipped.modal.status.use",children:"Use artifacts"})})}),(0,q.jsx)(x.Z,{children:(0,q.jsxs)(Pe.Z,{sx:{flexGrow:1},size:"small",children:[(0,q.jsx)(Ke.CC,{children:(0,q.jsx)(Ke.ZP,{onChange:s,value:t,inputProps:{min:1,max:r,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),(0,q.jsx)(j.Z,{disabled:1===t,onClick:function(){return s(1)},children:(0,q.jsx)(Er.Z,{})}),(0,q.jsx)(j.Z,{disabled:1===t,onClick:function(){return s(t-1)},children:(0,q.jsx)(Ar.Z,{})}),(0,q.jsx)(j.Z,{disabled:t===r,onClick:function(){return s(t+1)},children:(0,q.jsx)(Ir.Z,{})}),(0,q.jsx)(j.Z,{disabled:t===r,onClick:function(){return s(r)},children:(0,q.jsx)(Dr.Z,{})}),(0,q.jsx)(j.Z,{color:"error",onClick:a,children:(0,q.jsx)(en.Z,{})})]})})]}),(0,q.jsxs)(de.ZP,{container:!0,columns:7,spacing:1,children:[(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(_r.Z,{characterKey:n,onClick:d})}),(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(Mr.Z,{weaponId:f})}),Object.entries(h).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(Or.Z,{slotKey:t,artifactObj:o.arts.get(r)})},t)}))]})]})}function Br(e){var n=e.onAdd,t=e.list,r=(0,v.$)("page_character_optimize").t,s=(0,A.Z)(!1),a=(0,i.Z)(s,3),l=a[0],c=a[1],o=a[2],u=(0,Z.useCallback)((function(e){return!!e&&!t.includes(e.key)}),[t]);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(G.w,{show:l,onHide:o,onSelect:n,filter:u}),(0,q.jsx)(j.Z,{fullWidth:!0,sx:{height:60},color:"info",onClick:c,startIcon:(0,q.jsx)(Rr.Z,{}),children:(0,q.jsx)(qn.c,{t:r,i18nKey:"useEquipped.modal.add",children:"Add character to list"})})]})}function Lr(e){var n=e.disabled,t=void 0!==n&&n,r=e.artsDirty,i=(0,v.$)("page_character_optimize").t,s=(0,Z.useContext)(S.K).character.key,a=xt(s),l=a.buildSetting.useExcludedArts,c=a.buildSettingDispatch,o=(0,Z.useContext)(fn.t).database,u=(0,Z.useMemo)((function(){return r&&o.arts.values.reduce((function(e,n){return e+(n.exclude&&n.location!==s?1:0)}),0)}),[o,r,s]);return(0,q.jsx)(j.Z,{fullWidth:!0,onClick:function(){return c({useExcludedArts:!l})},disabled:!u||t,startIcon:l?(0,q.jsx)(pe.Z,{}):(0,q.jsx)(me.Z,{}),color:l?"success":"secondary",children:(0,q.jsxs)(x.Z,{children:[(0,q.jsx)("span",{children:(0,q.jsx)(qn.c,{t:i,i18nKey:"useExcluded.title",count:u,children:"Use Excluded Artifacts"})}),l&&(0,q.jsx)(ne.Z,{children:(0,q.jsxs)(qn.c,{t:i,i18nKey:"useExcluded.usingNum",count:u,children:["Using ",(0,q.jsx)("strong",{children:{count:u}})," excluded artifacts"]})})]})})}var Fr,Vr,Hr,$r,Ur,Yr=t(4942),Jr=t(50765),Xr=(0,yn.yY)((0,jn.I8)({dyn:(0,he.Z)((0,he.Z)({},ve.qH.art),ve.qH.artSet)})),Qr={art:(0,jn.O)([].concat((0,oe.Z)(Jr.r),(0,oe.Z)(Jr._)),(function(e){return Xr.dyn[e]})),artSet:(0,jn.xh)(ve.qH.artSet,(function(e,n){return Xr.dyn[n]}))};function ei(e,n,t){var r,i={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},s=new Set,a=(0,vn.Z)(e);try{for(a.s();!(r=a.n()).done;){var l,c=r.value,o=At.ZP.mainStatValue(c.mainStatKey,c.rarity,Math.max(Math.min(n,4*c.rarity),c.level)),u={id:c.id,set:c.setKey,values:(0,he.Z)((l={},(0,Yr.Z)(l,c.setKey,1),(0,Yr.Z)(l,c.mainStatKey,c.mainStatKey.endsWith("_")?o/100:o),l),Object.fromEntries(c.substats.map((function(e){return[e.key,e.key.endsWith("_")?e.accurateValue/100:e.accurateValue]}))))};delete u.values[""],i.values[c.slotKey].push(u),Object.keys(u.values).forEach((function(e){return s.add(e)}))}}catch(f){a.e(f)}finally{a.f()}if(i.base=(0,jn.O)((0,oe.Z)(s),(function(e){return 0})),t)for(var d=0,x=Object.values(i.values);d<x.length;d++){x[d].push({id:"",values:{}})}return i}function ni(){var e,n,t=(0,v.$)("page_character_optimize").t,s=(0,Z.useContext)(S.K).character,a=s.key,l=s.compareData,o=(0,Z.useContext)(fn.t).database,u=(0,Z.useState)({type:"inactive",tested:0,failed:0,skipped:0,total:0}),d=(0,i.Z)(u,2),f=d[0],p=d[1],m="inactive"!==f.type,y=(0,Z.useState)(void 0),b=(0,i.Z)(y,2),k=b[0],K=b[1],E=(0,mn.Z)(),A=(0,i.Z)(E,2),I=A[0],R=A[1],_=Wr(),M=(0,i.Z)(_,2),T=M[0],G=T.equipmentPriority,N=T.threads,z=void 0===N?Gr:N,B=M[1],L=z>Gr?Gr:z,V=(0,Z.useCallback)((function(e){return B({threads:e})}),[B]),H=(0,D.Z)(a),U=(0,W.Z)(),Y=(0,Z.useMemo)((function(){return!o.arts.values.length}),[o]),J=xt(a),X=J.buildSetting,Q=J.buildSettingDispatch,ee=X.plotBase,ne=X.optimizationTarget,te=X.mainStatAssumptionLevel,ie=X.allowPartial,se=X.builds,ae=X.buildDate,le=X.maxBuildsToShow,ce=X.levelLow,ue=X.levelHigh,xe=(0,O.Z)(a,te),fe=null!==(e=null===xe||void 0===xe?void 0:xe[a])&&void 0!==e?e:{},je=fe.characterSheet,Ze=fe.target,ge=(0,Z.useMemo)((function(){return se.map((function(e){return e.map((function(e){return o.arts.get(e)}))}))}),[se,o]);(0,Z.useEffect)((function(){return o.arts.followAny(R)}),[R,o]);var ye=(0,Z.useRef)((function(){}));(0,Z.useEffect)((function(){return function(){return ye.current()}}),[]);var be=(0,Z.useCallback)((0,Qe.Z)((0,Xe.Z)().mark((function e(){var n,t,r,s,l,c,u,d,x,f,h,m,j,Z,v,g,y,b,w,k,C,S,P,E,A,I,D,R,_,M,T,N,W,q,z,B,F,V,H,$,U,Y,J,ee,ne,te,ie,se,ae,le,ce,ue,de,xe,fe,pe;return(0,Xe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J=function(){var e=F.pop();return e?{command:"iterate",threshold:W.buildValues[m-1],filter:e}:void 0},Y=function(){var e=B.next(),n=e.done,t=e.value;return n?void 0:{command:"split",minCount:q,threshold:W.buildValues[m-1],filter:t}},U=function(){return{command:"split",filter:void 0,minCount:q,threshold:W.buildValues[m-1]}},r=X.artSetExclusion,s=X.plotBase,l=X.statFilters,c=X.mainStatKeys,u=X.optimizationTarget,d=X.mainStatAssumptionLevel,x=X.useExcludedArts,f=X.useEquippedArts,h=X.allowPartial,m=X.maxBuildsToShow,j=X.levelLow,Z=X.levelHigh,a&&u){e.next=6;break}return e.abrupt("return");case 6:return v=[],f&&(g=G.indexOf(a),v=g<0?(0,oe.Z)(G):G.slice(0,g)),y=o.arts.values.filter((function(e){if(e.level<j)return!1;if(e.level>Z)return!1;var n=c[e.slotKey];return!(null!==n&&void 0!==n&&n.length&&!n.includes(e.mainStatKey))&&(e.location===a||!(e.exclude&&!x)&&(!(e.location&&!f)&&!(e.location&&f&&v.includes(e.location))))})),b=ei(y,d,h),e.next=12,(0,O.V)(o,a,d,[]);case 12:if(w=e.sent){e.next=15;break}return e.abrupt("return");case 15:if(k=null===(n=(0,hn.Qo)(w.teamData,a)[a])||void 0===n?void 0:n.target.data[0]){e.next=18;break}return e.abrupt("return");case 18:if(Object.assign(k,(0,hn.b3)([k,Qr])),C=(0,jn.Hm)(null!==(t=k.display)&&void 0!==t?t:{},u)){e.next=22;break}return e.abrupt("return");case 22:for(S=C,P=Object.entries(l).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return t.endsWith("_")&&(r/=100),{value:ve.ri.total[t],minimum:r}})).filter((function(e){return e.value&&e.minimum>-1/0})),K(void 0),E=new Promise((function(e){return ye.current=e})),A=[].concat((0,oe.Z)(P.map((function(e){return e.value}))),[C]),I=b,D=_n(Tn(r,Object.values(b.values).flatMap((function(e){return e.map((function(e){return e.set}))}))),b),R=[].concat((0,oe.Z)(P.map((function(e){return e.minimum}))),[-1/0]),_={tested:0,failed:0,skipped:0,total:NaN,startTime:performance.now()},s&&(A.push(ve.ri.total[s]),R.push(-1/0)),M=I,A=(0,pn.tL)(A,k,(function(e){return"dyn"!==(0,i.Z)(e.path,1)[0]})),T=kn(A,R,I,m,r,{reaffine:!0,pruneArtRange:!0,pruneNodeRange:!0,pruneOrder:!0}),A=T.nodes,I=T.arts,A=(0,pn.tL)(A,{},(function(e){return!1})),N=s?A.pop():void 0,C=A.pop(),W={buildValues:Array(m).fill(0).map((function(e){return-1/0}))},q=8e6,z=4*L,B=D[Symbol.iterator](),F=[],V=[],H=new Set,$=[],ee=A.map((function(e,n){return{value:e,min:R[n]}})).filter((function(e){return e.min>-1/0})),ne=[],te=function(e){var n=new an,t={command:"setup",id:e,arts:I,optimizationTarget:C,plotBase:N,maxBuilds:m,filters:ee};if(n.postMessage(t,void 0),0===e){var s={command:"count",exclusion:r,arts:[I,M]};n.postMessage(s,void 0)}var a=void 0,l=new Promise((function(e){return a=e}));n.onmessage=function(){var e=(0,Qe.Z)((0,Xe.Z)().mark((function e(t){var r,s,l,c,o,u,d,x;return(0,Xe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.data,e.t0=r.command,e.next="interim"===e.t0?4:"split"===e.t0?9:"iterate"===e.t0?12:"finalize"===e.t0?14:"count"===e.t0?17:21;break;case 4:return _.tested+=r.tested,_.failed+=r.failed,_.skipped+=r.skipped,r.buildValues&&((s=W.buildValues).push.apply(s,(0,oe.Z)(r.buildValues)),W.buildValues.sort((function(e,n){return n-e})).splice(m)),e.abrupt("break",22);case 9:return r.filter?(F.push(r.filter),H.add(r.id)):H.delete(r.id),V.push(r.id),e.abrupt("break",22);case 12:return V.push(r.id),e.abrupt("break",22);case 14:return n.terminate(),a(r),e.abrupt("return");case 17:return l=(0,i.Z)(r.counts,2),c=l[0],o=l[1],_.total=o,_.skipped+=o-c,e.abrupt("return");case 21:console.log("DEBUG",r);case 22:if(!V.length){e.next=36;break}if(u=V.pop(),d=$[u],x=void 0,F.length<z&&!(x=Y())&&H.has(u)&&(x=U()),x||(x=J()),!x){e.next=31;break}d.postMessage(x),e.next=34;break;case 31:return V.push(u),V.length===8*L&&function(){var e={command:"finalize"};$.forEach((function(n){return n.postMessage(e)}))}(),e.abrupt("break",36);case 34:e.next=22;break;case 36:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),$.push(n),E.then((function(){return n.terminate()})),ne.push(l)},ie=0;ie<L;ie++)te(ie);for(se=0;se<7;se++)V.push.apply(V,(0,oe.Z)((0,jn.w6)(0,L-1)));return ae=setInterval((function(){return p((0,he.Z)({type:"active"},_))}),100),e.next=52,Promise.any([Promise.all(ne),E]);case 52:le=e.sent,clearInterval(ae),ye.current=function(){},le?(s&&(de=On(le.map((function(e){return e.plotData}))),xe=ve.ri.total[s],fe=Object.values(de),"%"===re.ZP.unit(null===(ce=S.info)||void 0===ce?void 0:ce.key)&&(fe=fe.map((function(e){return{value:100*e.value,plot:e.plot}}))),"%"===re.ZP.unit(null===(ue=xe.info)||void 0===ue?void 0:ue.key)&&(fe=fe.map((function(e){var n=e.value,t=e.plot;return{value:n,plot:100*(null!==t&&void 0!==t?t:0)}}))),K({valueNode:S,plotNode:xe,data:fe})),pe=Rn(le.map((function(e){return e.builds})),m),Q({builds:pe.map((function(e){return e.artifactIds})),buildDate:Date.now()})):(_.tested=0,_.failed=0,_.skipped=0,_.total=0),p((0,he.Z)((0,he.Z)({},_),{},{type:"inactive",finishTime:performance.now()}));case 57:case"end":return e.stop()}}),e)}))),[a,o,Q,L,X,G]),we=null!==(n=null===je||void 0===je?void 0:je.name)&&void 0!==n?n:"Character Name",ke=(0,Z.useCallback)((function(e){Q({plotBase:e}),K(void 0)}),[Q]),Ce=(0,Z.useMemo)((function(){return Ze&&xe&&{data:Ze,teamData:xe}}),[Ze,xe]);return(0,q.jsxs)(x.Z,{display:"flex",flexDirection:"column",gap:1,children:[Y&&(0,q.jsxs)(nn.Z,{severity:"warning",variant:"filled",children:[" Opps! It looks like you haven't added any artifacts to GO yet! You should go to the ",(0,q.jsx)(tn.Z,{component:g.rU,to:"/artifact",children:"Artifacts"})," page and add some!"]}),Ce&&(0,q.jsxs)(P.R.Provider,{value:Ce,children:[(0,q.jsxs)(de.ZP,{container:!0,spacing:1,children:[(0,q.jsx)(de.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:(0,q.jsx)(x.Z,{children:(0,q.jsx)(on.Z,{characterKey:a,onClickTeammate:U})})}),(0,q.jsxs)(de.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,q.jsxs)(w.Z,{children:[(0,q.jsxs)(h.Z,{children:[(0,q.jsx)($.Z,{gutterBottom:!0,children:t(Fr||(Fr=(0,r.Z)(["mainStat.title"])))}),(0,q.jsx)(cn.Z,{placement:"top",title:(0,q.jsxs)(x.Z,{children:[(0,q.jsx)($.Z,{variant:"h6",children:t(Vr||(Vr=(0,r.Z)(["mainStat.levelAssTooltip.title"])))}),(0,q.jsx)($.Z,{children:t(Hr||(Hr=(0,r.Z)(["mainStat.levelAssTooltip.desc"])))})]}),children:(0,q.jsx)(x.Z,{children:(0,q.jsx)(jt,{mainStatAssumptionLevel:te,setmainStatAssumptionLevel:function(e){return Q({mainStatAssumptionLevel:e})},disabled:m})})})]}),(0,q.jsx)(wr,{disabled:m})]}),(0,q.jsx)(Zt,{})]}),(0,q.jsxs)(de.ZP,{item:!0,xs:12,sm:6,lg:6,display:"flex",flexDirection:"column",gap:1,children:[(0,q.jsx)(ft,{disabled:m}),(0,q.jsx)(Lr,{disabled:m,artsDirty:I}),(0,q.jsx)(qr,{disabled:m}),(0,q.jsx)(j.Z,{fullWidth:!0,startIcon:ie?(0,q.jsx)(pe.Z,{}):(0,q.jsx)(me.Z,{}),color:ie?"success":"secondary",onClick:function(){return Q({allowPartial:!ie})},children:t($r||($r=(0,r.Z)(["allowPartial"])))}),(0,q.jsxs)(w.Z,{children:[(0,q.jsx)(h.Z,{children:t(Ur||(Ur=(0,r.Z)(["levelFilter"])))}),(0,q.jsx)(ln.Z,{levelLow:ce,levelHigh:ue,setLow:function(e){return Q({levelLow:e})},setHigh:function(e){return Q({levelHigh:e})},setBoth:function(e,n){return Q({levelLow:e,levelHigh:n})},disabled:m})]}),(0,q.jsx)(Pr,{disabled:m})]})]}),(0,q.jsxs)(de.ZP,{container:!0,spacing:1,children:[(0,q.jsx)(de.ZP,{item:!0,flexGrow:1,children:(0,q.jsxs)(Pe.Z,{children:[(0,q.jsx)(j.Z,{disabled:!a||m||!ne||!(0,jn.Hm)(null===Ze||void 0===Ze?void 0:Ze.getDisplay(),ne),color:a?"success":"warning",onClick:be,startIcon:(0,q.jsx)(c.Z,{}),children:"Generate Builds"}),(0,q.jsxs)(un.Z,{disabled:m||!a,title:(0,q.jsxs)("span",{children:[(0,q.jsx)("b",{children:le})," ",1===le?"Build":"Builds"]}),children:[(0,q.jsx)(rn.Z,{children:(0,q.jsx)($.Z,{variant:"caption",color:"info.main",children:"Decreasing the number of generated build will decrease build calculation time for large number of builds."})}),(0,q.jsx)(F.Z,{}),Zn.s.map((function(e){return(0,q.jsxs)(rn.Z,{onClick:function(){return Q({maxBuildsToShow:e})},children:[e," ",1===e?"Build":"Builds"]},e)}))]}),(0,q.jsxs)(un.Z,{disabled:m||!a,title:(0,q.jsxs)("span",{children:[(0,q.jsx)("b",{children:L})," ",1===L?"Thread":"Threads"]}),children:[(0,q.jsx)(rn.Z,{children:(0,q.jsx)($.Z,{variant:"caption",color:"info.main",children:"Increasing the number of threads will speed up build time, but will use more CPU power."})}),(0,q.jsx)(F.Z,{}),(0,jn.w6)(1,Gr).reverse().map((function(e){return(0,q.jsxs)(rn.Z,{onClick:function(){return V(e)},children:[e," ",1===e?"Thread":"Threads"]},e)}))]}),(0,q.jsx)(j.Z,{disabled:!m,color:"error",onClick:function(){return ye.current()},startIcon:(0,q.jsx)(en.Z,{}),children:"Cancel"})]})}),(0,q.jsxs)(de.ZP,{item:!0,children:[(0,q.jsx)("span",{children:"Optimization Target: "}),(0,q.jsx)(Sr.Z,{optimizationTarget:ne,setTarget:function(e){return Q({optimizationTarget:e})},disabled:!!m})]})]}),!!a&&(0,q.jsx)(wt,{status:f,characterName:we,maxBuildsToShow:le}),(0,q.jsx)(x.Z,{children:(0,q.jsx)(Zr,{disabled:m,chartData:k,plotBase:ee,setPlotBase:ke})}),(0,q.jsx)(w.Z,{children:(0,q.jsxs)(h.Z,{children:[(0,q.jsxs)(x.Z,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,q.jsx)($.Z,{sx:{flexGrow:1},children:se?(0,q.jsxs)("span",{children:["Showing ",(0,q.jsx)("strong",{children:se.length})," Builds generated for ",we,". ",!!ae&&(0,q.jsxs)("span",{children:["Build generated on: ",(0,q.jsx)("strong",{children:new Date(ae).toLocaleString()})]})]}):(0,q.jsx)("span",{children:"Select a character to generate builds."})}),(0,q.jsx)(j.Z,{disabled:!se.length,color:"error",onClick:function(){return Q({builds:[],buildDate:0})},children:"Clear Builds"})]}),(0,q.jsxs)(de.ZP,{container:!0,display:"flex",spacing:1,children:[(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)(C.Hn,{size:"small"})}),(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)(C.oX,{size:"small"})}),(0,q.jsx)(de.ZP,{item:!0,flexGrow:1}),(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsxs)(dn.Z,{exclusive:!0,value:l,onChange:function(e,n){return H({compareData:n})},size:"small",children:[(0,q.jsx)(sn.Z,{value:!1,disabled:!l,children:"Show new builds"}),(0,q.jsx)(sn.Z,{value:!0,disabled:l,children:"Compare vs. equipped"})]})})]})]})}),(0,q.jsx)(xn.Provider,{value:ne,children:(0,q.jsx)(ti,{buildsArts:ge,characterKey:a,data:Ze,compareData:l,disabled:!!m})})]})]})}function ti(e){var n=e.buildsArts,t=e.characterKey,r=e.data,i=e.compareData,s=e.disabled;return(0,Z.useMemo)((function(){return(0,q.jsx)(Z.Suspense,{fallback:(0,q.jsx)(f.Z,{variant:"rectangular",width:"100%",height:600}),children:null===n||void 0===n?void 0:n.map((function(e,n){return t&&r&&(0,q.jsx)(ri,{characterKey:t,build:e,oldData:r,children:(0,q.jsx)(Ut,{index:n,compareBuild:i,disabled:s})},n+e.join())}))})}),[n,t,r,i,s])}function ri(e){var n=e.children,t=e.characterKey,r=e.build,i=e.oldData,s=xt(t).buildSetting.mainStatAssumptionLevel,a=(0,O.Z)(t,s,r),l=(0,Z.useMemo)((function(){return a&&{data:a[t].target,teamData:a,oldData:i}}),[a,i,t]);return l?(0,q.jsx)(P.R.Provider,{value:l,children:n}):null}var ii,si,ai=t(14361),li=t(90690),ci=t(96874),oi=t(2139),ui=t(97719),di=t(95193),xi=t(30418),fi=t(15678),hi=t(901),pi=t(90543),mi=t(44824),ji=t(70645),Zi=t(46956),vi=t(99405);function gi(e){var n=e.artId,t=e.weaponId,s=(0,v.$)("page_character").t,a=(0,A.Z)(!1),l=(0,i.Z)(a,3),c=l[0],o=l[1],u=l[2];return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(ee.Z,{open:c,onClose:u,containerProps:{maxWidth:"xl"},children:(0,q.jsx)(yi,{artId:n,weaponId:t,onHide:u})}),(0,q.jsx)(cr.Z,{title:(0,q.jsx)($.Z,{children:s(ii||(ii=(0,r.Z)(["tabEquip.compare"])))}),placement:"top",arrow:!0,children:(0,q.jsx)(j.Z,{color:"info",size:"small",onClick:o,children:(0,q.jsx)(vi.Z,{})})})]})}function yi(e){var n=e.artId,t=e.weaponId,r=e.onHide,i=(0,Z.useContext)(fn.t).database,s=(0,Z.useContext)(S.K).character,a=s.key,l=s.equippedArtifacts,c=xt(a).buildSetting.mainStatAssumptionLevel,o=(0,Z.useContext)(P.R).data,u=(0,Z.useMemo)((function(){var e=i.arts.get(null!==n&&void 0!==n?n:""),t=(0,jn.xh)(l,(function(n,t){return t===(null===e||void 0===e?void 0:e.slotKey)?e:i.arts.get(n)}));return Object.values(t).filter((function(e){return e}))}),[i,l,n]),d=(0,O.Z)(a,c,u,t?i.weapons.get(t):void 0),x=(0,Z.useMemo)((function(){return d&&{data:d[a].target,teamData:d,oldData:o}}),[a,d,o]);return(0,q.jsx)(Z.Suspense,{fallback:(0,q.jsx)(f.Z,{variant:"rectangular",width:"100%",height:600}),children:x&&(0,q.jsx)(P.R.Provider,{value:x,children:(0,q.jsx)(Ut,{compareBuild:!0,extraButtons:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(C.Hn,{size:"small"}),(0,q.jsx)(C.oX,{size:"small"}),(0,q.jsx)(j.Z,{size:"small",color:"error",onClick:r,children:(0,q.jsx)(en.Z,{})})]})})})})}var bi={xs:6,sm:6,md:9,lg:12,xl:12},wi=(0,Z.lazy)((function(){return t.e(849).then(t.bind(t,80367))}));function ki(e){var n=e.onChangeId,t=e.slotKey,s=e.show,a=e.onClose,l=(0,v.$)("page_character").t,c=(0,Z.useContext)(fn.t).database,o=(0,Z.useCallback)((function(e){n(e),a()}),[n,a]),u=(0,Z.useCallback)((function(e,n){return(0,he.Z)((0,he.Z)((0,he.Z)({},e),n),{},{slotKeys:[t]})}),[t]),d=(0,Z.useReducer)(u,(0,he.Z)((0,he.Z)({},(0,mi.Af)()),{},{slotKeys:[t]})),p=(0,i.Z)(d,2),m=p[0],j=p[1],g=(0,mn.Z)(),y=(0,i.Z)(g,2),w=y[0],C=y[1];(0,Z.useEffect)((function(){return c.arts.followAny(C)}),[c,C]);var S=(0,ji.Z)(),P=(0,Z.useMemo)((function(){return(0,mi.EM)()}),[]),K=(0,Z.useMemo)((function(){var e=(0,Zi.C)(m,P);return w&&c.arts.values.filter(e).map((function(e){return e.id})).slice(0,bi[S])}),[w,c,P,m,S]);return(0,q.jsx)(ee.Z,{open:s,onClose:a,containerProps:{maxWidth:"xl"},children:(0,q.jsxs)(b.Z,{children:[(0,q.jsxs)(h.Z,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,q.jsxs)($.Z,{variant:"h6",children:[t?(0,q.jsx)(Q.Z,{src:Et.Z.slot[t]}):null," ",l(si||(si=(0,r.Z)(["tabEquip.swapArt"])))]}),(0,q.jsx)(k.Z,{onClick:a})]}),(0,q.jsx)(F.Z,{}),(0,q.jsxs)(h.Z,{children:[(0,q.jsx)(Z.Suspense,{fallback:(0,q.jsx)(f.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,q.jsx)(wi,{filterOption:m,filterOptionDispatch:j,disableSlotFilter:!0})}),(0,q.jsx)(x.Z,{mt:1,children:(0,q.jsx)(Z.Suspense,{fallback:(0,q.jsx)(f.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,q.jsx)(de.ZP,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:K.map((function(e){return(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)($t.Z,{artifactId:e,extraButtons:(0,q.jsx)(gi,{artId:e}),onClick:o})},e)}))})})})]})]})})}var Ci,Si,Pi,Ki,Ei,Ai,Ii,Di=t(58165),Ri=t(75308),Oi=t(66045),_i=(0,Ri.X)((0,oe.Z)(M.wC));function Mi(e){var n=e.onChangeId,t=e.weaponTypeKey,s=e.show,a=e.onClose,l=(0,v.$)(["page_character","page_weapon","weaponNames_gen"]).t,c=(0,Z.useContext)(fn.t).database,o=(0,Z.useCallback)((function(e){n(e),a()}),[n,a]),u=(0,mn.Z)(),d=(0,i.Z)(u,2),f=d[0],p=d[1];(0,Z.useEffect)((function(){return c.weapons.followAny(p)}),[p,c]);var m=(0,R.Z)((function(){return zt.Z.getAll}),[]),j=(0,Z.useMemo)((function(){return m&&(0,Oi.Xg)(m)}),[m]),g=(0,Z.useMemo)((function(){return m&&(0,Oi.Sn)(m)}),[m]),y=(0,Z.useState)([5,4,3]),w=(0,i.Z)(y,2),C=w[0],S=w[1],P=(0,Z.useState)(""),K=(0,i.Z)(P,2),E=K[0],A=K[1],I=(0,Z.useDeferredValue)(E),D=(0,Z.useMemo)((function(){var e;return null!==(e=j&&g&&f&&c.weapons.values.filter((0,Zi.C)({weaponType:t,rarity:C,name:I},j)).sort((0,Zi.e)("level",!1,g)).map((function(e){return e.id})))&&void 0!==e?e:[]}),[f,c,j,g,C,t,I]);return(0,q.jsx)(ee.Z,{open:s,onClose:a,children:(0,q.jsxs)(b.Z,{children:[(0,q.jsx)(h.Z,{sx:{py:1},children:(0,q.jsxs)(de.ZP,{container:!0,children:[(0,q.jsx)(de.ZP,{item:!0,flexGrow:1,children:(0,q.jsxs)($.Z,{variant:"h6",children:[t?(0,q.jsx)(Q.Z,{src:Et.Z.weaponTypes[t]}):null," ",l(Ci||(Ci=(0,r.Z)(["page_character:tabEquip.swapWeapon"])))]})}),(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)(k.Z,{onClick:a})})]})}),(0,q.jsx)(F.Z,{}),(0,q.jsxs)(h.Z,{children:[(0,q.jsxs)(de.ZP,{container:!0,spacing:1,mb:1,children:[(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)(dn.Z,{sx:{height:"100%"},value:C,size:"small",children:M.wC.map((function(e){return(0,q.jsx)(sn.Z,{value:e,onClick:function(){return S(_i(C,e))},children:(0,q.jsxs)(x.Z,{display:"flex",gap:1,children:[(0,q.jsx)("strong",{children:e}),(0,q.jsx)(ot.q,{stars:1})]})},e)}))})}),(0,q.jsx)(de.ZP,{item:!0,flexGrow:1,children:(0,q.jsx)(Di.Z,{autoFocus:!0,size:"small",value:E,onChange:function(e){return A(e.target.value)},label:l("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),(0,q.jsx)(de.ZP,{container:!0,spacing:1,children:D.map((function(e){return(0,q.jsx)(de.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,q.jsx)(pi.Z,{weaponId:e,onClick:o,extraButtons:(0,q.jsx)(gi,{weaponId:e})})},e)}))})]})]})})}var Ti=(0,Z.lazy)((function(){return t.e(923).then(t.bind(t,74476))}));function Gi(){var e,n=(0,Z.useContext)(S.K),t=n.character,r=t.equippedWeapon,s=t.key,a=n.characterSheet,l=xt(s).buildSetting.mainStatAssumptionLevel,c=(0,Z.useContext)(P.R),o=c.teamData,u=c.data,d=null===(e=o[s])||void 0===e?void 0:e.weaponSheet,f=(0,Z.useState)(""),p=(0,i.Z)(f,2),m=p[0],j=p[1],v=(0,Z.useCallback)((function(){return j(r)}),[r]),g=(0,Z.useCallback)((function(){return j("")}),[]);(0,Z.useEffect)((function(){m&&m!==r&&j(r)}),[m,r]);var y=(0,xi.Z)(),b=(0,di.Z)(y.breakpoints.up("lg")),k=(0,Z.useMemo)((function(){return d&&d.document.length>0&&(0,q.jsx)(w.Z,{children:(0,q.jsx)(h.Z,{children:(0,q.jsx)(Bn.Z,{sections:d.document})})})}),[d]),C=(0,Tr.ZP)("charMeta_".concat(s),Tr.Bm),K=(0,i.Z)(C,1)[0].rvFilter,E=(0,Z.useDeferredValue)(K),A=(0,Z.useMemo)((function(){return new Set(E)}),[E]);return(0,q.jsxs)(x.Z,{children:[(0,q.jsx)(Z.Suspense,{fallback:!1,children:(0,q.jsx)(Ti,{weaponId:m,footer:!0,onClose:g,extraButtons:(0,q.jsx)(qi,{weaponTypeKey:a.weaponTypeKey})})}),(0,q.jsxs)(de.ZP,{container:!0,spacing:1,children:[b&&(0,q.jsxs)(de.ZP,{item:!0,xs:12,md:12,lg:3,xl:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[k&&k,(0,q.jsx)(Bi,{})]}),(0,q.jsxs)(de.ZP,{item:!0,xs:12,md:12,lg:9,xl:9,container:!0,spacing:1,children:[(0,q.jsx)(de.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:(0,q.jsx)(pi.Z,{weaponId:r,onEdit:v,canEquip:!0,extraButtons:(0,q.jsx)(Wi,{weaponTypeKey:a.weaponTypeKey})})}),M.eV.map((function(e){return(0,q.jsx)(de.ZP,{item:!0,xs:12,sm:6,md:4,children:u.get(ve.ri.art[e].id).value?(0,q.jsx)($t.Z,{artifactId:u.get(ve.ri.art[e].id).value,mainStatAssumptionLevel:l,effFilter:A,extraButtons:(0,q.jsx)(zi,{slotKey:e}),editor:!0,canExclude:!0,canEquip:!0}):(0,q.jsx)(Ni,{slotKey:e})},e)}))]}),!b&&(0,q.jsxs)(de.ZP,{item:!0,xs:12,md:12,xl:3,container:!0,spacing:1,children:[k&&(0,q.jsx)(de.ZP,{item:!0,xs:12,md:6,lg:4,children:k}),(0,q.jsx)(de.ZP,{item:!0,xs:12,md:6,lg:4,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,q.jsx)(Bi,{})})]})]})]})}function Ni(e){var n=e.slotKey,t=(0,Z.useContext)(S.K).character.key,r=(0,Z.useContext)(fn.t).database,s=(0,A.Z)(),a=(0,i.Z)(s,3),l=a[0],c=a[1],o=a[2];return(0,q.jsxs)(w.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,q.jsx)(h.Z,{children:(0,q.jsx)($.Z,{children:(0,q.jsx)(lt.ZP,{slotKey:n})})}),(0,q.jsx)(F.Z,{}),(0,q.jsxs)(x.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,q.jsx)(ki,{slotKey:n,show:l,onClose:o,onChangeId:function(e){return r.arts.set(e,{location:t})}}),(0,q.jsx)(j.Z,{onClick:c,color:"info",sx:{borderRadius:"1em"},children:(0,q.jsx)(ui.Z,{sx:{height:100,width:100}})})]})]})}function Wi(e){var n=e.weaponTypeKey,t=(0,v.$)("page_character").t,s=(0,Z.useContext)(S.K).character.key,a=(0,Z.useContext)(fn.t).database,l=(0,A.Z)(),c=(0,i.Z)(l,3),o=c[0],u=c[1],d=c[2];return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(cr.Z,{title:(0,q.jsx)($.Z,{children:t(Si||(Si=(0,r.Z)(["tabEquip.swapWeapon"])))}),placement:"top",arrow:!0,children:(0,q.jsx)(j.Z,{color:"info",size:"small",onClick:u,children:(0,q.jsx)(ui.Z,{})})}),(0,q.jsx)(Mi,{weaponTypeKey:n,onChangeId:function(e){return a.weapons.set(e,{location:s})},show:o,onClose:d})]})}function qi(e){var n=e.weaponTypeKey,t=(0,v.$)("page_character").t,s=(0,Z.useContext)(S.K).character.key,a=(0,Z.useContext)(fn.t).database,l=(0,A.Z)(),c=(0,i.Z)(l,3),o=c[0],u=c[1],d=c[2];return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(j.Z,{color:"info",onClick:u,startIcon:(0,q.jsx)(ui.Z,{}),children:t(Pi||(Pi=(0,r.Z)(["tabEquip.swapWeapon"])))}),(0,q.jsx)(Mi,{weaponTypeKey:n,onChangeId:function(e){return a.weapons.set(e,{location:s})},show:o,onClose:d})]})}function zi(e){var n=e.slotKey,t=(0,v.$)("page_character").t,s=(0,Z.useContext)(S.K).character.key,a=(0,Z.useContext)(fn.t).database,l=(0,A.Z)(),c=(0,i.Z)(l,3),o=c[0],u=c[1],d=c[2];return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(cr.Z,{title:(0,q.jsx)($.Z,{children:t(Ki||(Ki=(0,r.Z)(["tabEquip.swapArt"])))}),placement:"top",arrow:!0,children:(0,q.jsx)(j.Z,{color:"info",size:"small",onClick:u,children:(0,q.jsx)(ui.Z,{})})}),(0,q.jsx)(ki,{slotKey:n,show:o,onClose:d,onChangeId:function(e){return a.arts.set(e,{location:s})}})]})}function Bi(){var e,n=(0,v.$)(["page_character","artifact"]).t,t=(0,Z.useContext)(fn.t).database,s=(0,Z.useContext)(S.K),a=s.character,l=s.character,c=l.key,o=l.equippedArtifacts,u=(0,Z.useContext)(P.R).data,d=(0,R.Z)((function(){return zn.y.getAll}),[]),x=(0,Z.useMemo)((function(){return!!Object.values(o).filter((function(e){return e})).length}),[o]),f=(0,Z.useCallback)((function(){a&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&Object.values(o).forEach((function(e){return t.arts.set(e,{location:""})}))}),[a,t,o]),p=(0,Z.useMemo)((function(){return d&&zn.y.setEffects(d,u)}),[d,u]),m=(0,Tr.ZP)("charMeta_".concat(c),Tr.Bm),g=(0,i.Z)(m,2),y=g[0].rvFilter,k=g[1],C=(0,Z.useCallback)((function(e){return k({rvFilter:e})}),[k]),K=(0,A.Z)(),E=(0,i.Z)(K,3),I=E[0],D=E[1],O=E[2],_=(0,Z.useDeferredValue)(y),M=(0,Z.useMemo)((function(){var e=Object.values(o).reduce((function(e,n){var r=t.arts.get(n);if(r){var i=At.ZP.getArtifactEfficiency(r,new Set(_)),s=i.currentEfficiency,a=i.maxEfficiency,l=At.ZP.getArtifactEfficiency(r,new Set(Jr._)),c=l.currentEfficiency,o=l.maxEfficiency;e.currentEfficiency=e.currentEfficiency+s,e.maxEfficiency=e.maxEfficiency+a,e.currentEfficiency_=e.currentEfficiency_+c,e.maxEfficiency_=e.maxEfficiency_+o}return e}),{currentEfficiency:0,currentEfficiency_:0,maxEfficiency:0,maxEfficiency_:0}),i=e.currentEfficiency,s=e.currentEfficiency_,a=e.maxEfficiency,l=e.maxEfficiency_;return{rvField:{text:n(Ei||(Ei=(0,r.Z)(["artifact:editor.curSubEff"]))),value:i-s?(0,q.jsxs)("span",{children:[(0,q.jsx)(hi.Z,{value:i,max:4500,valid:!0})," / ",(0,q.jsx)(hi.Z,{value:s,max:4500,valid:!0})]}):(0,q.jsx)(hi.Z,{value:i,max:4500,valid:!0})},rvmField:{text:n(Ai||(Ai=(0,r.Z)(["artifact:editor.maxSubEff"]))),canShow:function(){return!!(s-l)},value:a-l?(0,q.jsxs)("span",{children:[(0,q.jsx)(hi.Z,{value:a,max:4500,valid:!0})," / ",(0,q.jsx)(hi.Z,{value:l,max:4500,valid:!0})]}):(0,q.jsx)(hi.Z,{value:a,max:4500,valid:!0})}}}),[n,_,o,t]),T=M.rvField,G=M.rvmField;return(0,q.jsxs)(w.Z,{children:[x&&(0,q.jsx)(j.Z,{color:"error",onClick:f,fullWidth:!0,sx:{borderBottomRightRadius:0,borderBottomLeftRadius:0},children:n(Ii||(Ii=(0,r.Z)(["tabEquip.unequipArts"])))}),(0,q.jsx)(h.Z,{children:(0,q.jsxs)(ue.Z,{spacing:1,children:[(0,q.jsxs)(b.Z,{children:[(0,q.jsx)(j.Z,{fullWidth:!0,color:"info",startIcon:(0,q.jsx)(Wn.Z,{}),sx:{borderBottomLeftRadius:0,borderBottomRightRadius:0},onClick:D,children:"RV Filter"}),(0,q.jsx)(ee.Z,{open:I,onClose:O,children:(0,q.jsx)(b.Z,{children:(0,q.jsx)(h.Z,{children:(0,q.jsx)(fi.Z,{selectedKeys:y,onChange:C})})})}),(0,q.jsxs)(Te.lD,{children:[(0,q.jsx)(Te.ms,{field:T,component:xe.ZP}),(null===G||void 0===G||null===(e=G.canShow)||void 0===e?void 0:e.call(G,u))&&(0,q.jsx)(Te.ms,{field:G,component:xe.ZP})]})]}),d&&p&&Object.entries(p).flatMap((function(e){var n=(0,i.Z)(e,2),t=n[0];return n[1].map((function(e){return(0,q.jsx)(b.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:(0,q.jsx)(Ln,{setKey:t,setNumKey:e},t+e)},t+e)}))}))]})})]})}function Li(){var e=(0,Z.useRef)(),n=(0,Z.useCallback)((function(){var n,t;return null===e||void 0===e||null===(n=e.current)||void 0===n||null===(t=n.scrollIntoView)||void 0===t?void 0:t.call(n,{behavior:"smooth"})}),[e]);return(0,q.jsxs)(ue.Z,{spacing:1,children:[(0,q.jsxs)(de.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,q.jsx)(de.ZP,{item:!0,xs:8,sm:5,md:4,lg:2.3,children:(0,q.jsx)(Vi,{})}),(0,q.jsxs)(de.ZP,{item:!0,xs:12,sm:7,md:8,lg:9.7,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,q.jsx)(Fi,{onClick:n}),(0,q.jsx)(w.Z,{sx:{flexGrow:1,p:1},children:(0,q.jsx)(Wt,{})})]})]}),(0,q.jsx)(x.Z,{ref:e,children:(0,q.jsx)(Gi,{})})]})}function Fi(e){var n=e.onClick,t=(0,Z.useContext)(S.K).character.equippedWeapon,r=(0,Z.useContext)(P.R).data;return(0,q.jsxs)(de.ZP,{container:!0,spacing:1,columns:{xs:2,sm:2,md:3,lg:6,xl:6},children:[(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(Ft,{weaponId:t,BGComponent:w.Z,onClick:n})}),M.eV.map((function(e){return(0,q.jsx)(de.ZP,{item:!0,xs:1,children:(0,q.jsx)(_t,{artifactId:r.get(ve.ri.art[e].id).value,slotKey:e,BGComponent:w.Z,onClick:n})},e)}))]})}function Vi(){var e,n=(0,Z.useContext)(S.K),t=n.characterSheet,r=n.character,s=r.key,a=r.team,l=(0,Z.useContext)(P.R).data,c=(0,D.Z)(s),o=(0,y.s0)(),u=l.get(ve.ri.charEle).value,d=t.weaponTypeKey,f=l.get(ve.ri.lvl).value,p=l.get(ve.ri.asc).value,m=l.get(ve.ri.constellation).value,j={auto:l.get(ve.ri.total.auto).value,skill:l.get(ve.ri.total.skill).value,burst:l.get(ve.ri.total.burst).value},v={auto:l.get(ve.ri.bonus.auto).value,skill:l.get(ve.ri.bonus.skill).value,burst:l.get(ve.ri.bonus.burst).value},g=(0,Tr.ZP)("charMeta_".concat(s),Tr.Bm),b=(0,i.Z)(g,2),k=b[0].favorite,C=b[1];return(0,q.jsxs)(w.Z,{sx:{height:"100%"},children:[(0,q.jsxs)(x.Z,{sx:{position:"relative"},children:[(0,q.jsxs)(x.Z,{sx:{position:"absolute",width:"100%",height:"100%"},children:[(0,q.jsx)($.Z,{variant:"h6",sx:{position:"absolute",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75},children:(0,q.jsx)(ot.q,{stars:t.rarity,colored:!0})}),(0,q.jsx)(x.Z,{sx:{position:"absolute",left:"50%",bottom:"5%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,q.jsx)(je.Z,{color:u,sx:{height:"auto"},label:(0,q.jsxs)($.Z,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[Ce.Z[u],(0,q.jsx)(x.Z,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),(0,q.jsx)(Q.Z,{src:null===(e=Et.Z.weaponTypes)||void 0===e?void 0:e[d]})]})})}),(0,q.jsx)(x.Z,{sx:{position:"absolute",left:0,top:0},children:(0,q.jsx)(be.Z,{sx:{p:1},color:"error",onClick:function(){return C({favorite:!k})},children:k?(0,q.jsx)(ai.Z,{}):(0,q.jsx)(li.Z,{})})}),(0,q.jsx)($.Z,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:(0,q.jsx)(ne.Z,{children:(0,oi.wQ)(f,p)})})]}),(0,q.jsx)(x.Z,{src:t.cardImg,component:"img",width:"100%",height:"auto"})]}),(0,q.jsxs)(h.Z,{children:[(0,q.jsx)(St.Z,{sx:{p:1},onClick:function(){return o("talent")},children:(0,q.jsx)(de.ZP,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map((function(e){var n;return(0,q.jsx)(de.ZP,{item:!0,xs:4,children:(0,q.jsx)(ci.Z,{badgeContent:j[e],color:v[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,q.jsx)(x.Z,{component:"img",src:null===(n=t.getTalentOfKey(e,u))||void 0===n?void 0:n.img,width:"100%",height:"auto"})})},e)}))})}),(0,q.jsx)($.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:t.constellationName}),(0,q.jsx)(de.ZP,{container:!0,spacing:1,children:(0,jn.w6)(1,6).map((function(e){var n;return(0,q.jsx)(de.ZP,{item:!0,xs:4,children:(0,q.jsx)(St.Z,{onClick:function(){return c({constellation:e===m?e-1:e})},children:(0,q.jsx)(x.Z,{component:"img",src:null===(n=t.getTalentOfKey("constellation".concat(e),u))||void 0===n?void 0:n.img,sx:(0,he.Z)({},m>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto"})})},e)}))}),(0,q.jsx)(St.Z,{sx:{p:1},onClick:function(){return o("teambuffs")},children:(0,q.jsx)(de.ZP,{container:!0,columns:3,spacing:1,children:(0,jn.w6)(0,2).map((function(e){return(0,q.jsx)(de.ZP,{item:!0,xs:1,height:"100%",children:(0,q.jsx)(_r.Z,{characterKey:a[e],index:e})},e)}))})})]})]})}var Hi={xs:12,sm:6,md:4};function $i(){var e=(0,Z.useContext)(S.K),n=e.character,t=e.characterSheet,r=(0,Z.useContext)(P.R).data,s=(0,D.Z)(n.key),a=r.get(ve.ri.charEle).value,l=r.get(ve.ri.asc).value,c=r.get(ve.ri.constellation).value,o=(0,xi.Z)(),u=(0,di.Z)(o.breakpoints.up("lg")),d=(0,Z.useMemo)((function(){return(0,jn.w6)(1,6).map((function(e){return(0,q.jsx)(Ji,{talentKey:"constellation".concat(e),subtitle:"Constellation Lv. ".concat(e),onClickTitle:function(){return s({constellation:e===c?e-1:e})}})}))}),[c,s]);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(Ui,{}),(0,q.jsxs)(de.ZP,{container:!0,spacing:1,children:[u&&(0,q.jsxs)(de.ZP,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,q.jsx)(w.Z,{children:(0,q.jsx)(h.Z,{children:(0,q.jsxs)($.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",c]})})}),d.map((function(e,n){return(0,q.jsx)(x.Z,{sx:{opacity:c>=n+1?1:.5},children:e},n)}))]}),(0,q.jsxs)(de.ZP,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,q.jsx)(de.ZP,(0,he.Z)((0,he.Z)({item:!0},Hi),{},{children:(0,q.jsx)(Ji,{talentKey:t,subtitle:r})}),t)})),!!t.getTalentOfKey("sprint",a)&&(0,q.jsx)(de.ZP,(0,he.Z)((0,he.Z)({item:!0},Hi),{},{children:(0,q.jsx)(Ji,{talentKey:"sprint",subtitle:"Alternative Sprint"})})),!!t.getTalentOfKey("passive",a)&&(0,q.jsx)(de.ZP,(0,he.Z)((0,he.Z)({item:!0},Hi),{},{children:(0,q.jsx)(Ji,{talentKey:"passive",subtitle:"Passive"})})),[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var n=(0,i.Z)(e,3),r=n[0],s=n[1],c=n[2],o=l>=c;return t.getTalentOfKey(r,a)?(0,q.jsx)(de.ZP,(0,he.Z)((0,he.Z)({item:!0,style:{opacity:o?1:.5}},Hi),{},{children:(0,q.jsx)(Ji,{talentKey:r,subtitle:s})}),r):null}))]}),!u&&(0,q.jsxs)(de.ZP,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:[(0,q.jsx)(de.ZP,{item:!0,xs:12,children:(0,q.jsx)(w.Z,{children:(0,q.jsx)(h.Z,{children:(0,q.jsxs)($.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",c]})})})}),d.map((function(e,n){return(0,q.jsx)(de.ZP,(0,he.Z)((0,he.Z)({item:!0,sx:{opacity:c>=n+1?1:.5}},Hi),{},{children:e}),n)}))]})]})]})}function Ui(){var e=(0,Z.useContext)(P.R).data.getDisplay().reaction;return(0,q.jsx)(w.Z,{children:(0,q.jsx)(h.Z,{children:(0,q.jsx)(de.ZP,{container:!0,spacing:1,children:Object.entries(e).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)(b.Z,{children:(0,q.jsx)(h.Z,{sx:{p:1,"&:last-child":{pb:1}},children:(0,q.jsx)(Te.JW,{node:r})})})},t)}))})})})}var Yi=[1,1,2,4,6,8,10];function Ji(e){var n=e.talentKey,t=e.subtitle,r=e.onClickTitle,i=(0,Z.useContext)(S.K),s=i.character.talent,a=i.characterSheet,l=i.characterDispatch,c=(0,Z.useContext)(P.R).data,o=(0,Z.useCallback)((function(e){return(0,q.jsx)(St.Z,{onClick:r,children:e})}),[r]),u=(0,Z.useCallback)((function(e,n){return l({talent:(0,he.Z)((0,he.Z)({},s),{},(0,Yr.Z)({},e,n))})}),[s,l]),d=null;if(n in s){var f=c.get(ve.ri.bonus[n]).value,p=c.get(ve.ri.total[n]).value,m=c.get(ve.ri.asc).value;d=(0,q.jsx)(un.Z,{fullWidth:!0,title:"Talent Lv. ".concat(p),color:f?"info":"primary",sx:{borderRadius:0},children:(0,jn.w6)(1,Yi[m]).map((function(e){return(0,q.jsxs)(rn.Z,{selected:s[n]===e,disabled:s[n]===e,onClick:function(){return u(n,e)},children:["Talent Lv. ",e+f]},e)}))})}var j=a.getTalentOfKey(n,c.get(ve.ri.charEle).value);return(0,q.jsxs)(w.Z,{sx:{height:"100%"},children:[d,(0,q.jsxs)(h.Z,{children:[(0,q.jsx)(Dt.Z,{condition:!!r,wrapper:o,children:(0,q.jsxs)(de.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,q.jsx)(de.ZP,{item:!0,children:(0,q.jsx)(x.Z,{component:"img",src:null===j||void 0===j?void 0:j.img,sx:{width:60,height:"auto"}})}),(0,q.jsxs)(de.ZP,{item:!0,flexGrow:1,sx:{pl:1},children:[(0,q.jsx)($.Z,{variant:"h6",children:null===j||void 0===j?void 0:j.name}),(0,q.jsx)($.Z,{variant:"subtitle1",children:t})]})]})}),null!==j&&void 0!==j&&j.sections?(0,q.jsx)(Bn.Z,{sections:j.sections,hideDesc:!0,hideHeader:function(e){var t,r=null===(t=e.header)||void 0===t?void 0:t.action;return!(!r||"string"===typeof r)&&r.props.children.props.key18.includes(n)}}):null]})]})}var Xi,Qi=t(49142),es=t(16649),ns=t(33439),ts=t(59496),rs=t(36030),is=t(82095),ss=t(6805),as=t(44361),ls=t(82010),cs=t(11400);function os(){var e,n=(0,Z.useContext)(fn.t).database,t=(0,Z.useContext)(P.R).data,r=(0,Z.useContext)(S.K),s=r.character,a=r.character,l=a.key,c=a.compareData,o=r.characterSheet,u=r.characterDispatch,d=function(e,n){var t=(0,Z.useContext)(fn.t).database,r=(0,Z.useState)(t.charTCs.getWithInit(e,n)),s=(0,i.Z)(r,2),a=s[0],l=s[1];return(0,Z.useEffect)((function(){return l(t.charTCs.getWithInit(e,n))}),[t,e,n]),(0,Z.useEffect)((function(){return e?t.charTCs.follow(e,(function(e,n,t){return"update"===n&&l(t)})):void 0}),[e,l,t]),a}(l,(0,cs.mT)(o.weaponTypeKey)),h=(0,Z.useCallback)((function(e){return n.charTCs.set(l,e)}),[l,n]),p=(0,Z.useCallback)((function(){h((0,ls.O)((0,cs.mT)(o.weaponTypeKey)))}),[h,o]),m=(0,Z.useCallback)((function(e){h((0,he.Z)((0,he.Z)({},d),{},{weapon:(0,he.Z)((0,he.Z)({},d.weapon),e)}))}),[h,d]),v=(0,Z.useCallback)((function(){var e=n.weapons.get(s.equippedWeapon),t=(0,ls.O)(e.key);t.artifact.substats.type=d.artifact.substats.type,t.weapon.level=e.level,t.weapon.ascension=e.ascension,t.weapon.refinement=e.refinement;var r={};Object.values(s.equippedArtifacts).forEach((function(e){var i,s=n.arts.get(e);if(s){var a=s.slotKey,l=s.setKey,c=s.substats,o=s.mainStatKey,u=s.level,d=s.rarity;t.artifact.slots[a].level=u,t.artifact.slots[a].statKey=o,t.artifact.slots[a].rarity=d,r[l]=(null!==(i=r[l])&&void 0!==i?i:0)+1,c.forEach((function(e){var n;e.key&&(t.artifact.substats.stats[e.key]=(null!==(n=t.artifact.substats.stats[e.key])&&void 0!==n?n:0)+e.accurateValue)}))}})),t.artifact.sets=Object.fromEntries(Object.entries(r).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[t,3===r?2:5===r?4:1!==r||t.startsWith("PrayersFor")?r:0]})).filter((function(e){var n=(0,i.Z)(e,2);n[0];return n[1]}))),h(t)}),[n,d,s.equippedArtifacts,s.equippedWeapon,h]),g=(0,Z.useMemo)((function(){return(0,he.Z)((0,he.Z)({},d.weapon),{},{location:"",lock:!1,id:""})}),[d]),y=(0,Z.useCallback)((function(e){var n=(0,jn.I8)(d);n.artifact=e,h(n)}),[d,h]),b=(0,Z.useCallback)((function(e){var n=(0,jn.I8)(d);n.artifact.substats.type=e,h(n)}),[d,h]),k=(0,Z.useCallback)((function(e){var n=(0,jn.I8)(d);n.artifact.substats.stats=e,h(n)}),[d,h]),C=(0,Z.useMemo)((function(){var e=(0,he.Z)({},d.artifact.substats.stats);return Object.values(d.artifact.slots).forEach((function(n){var t,r=n.statKey,i=n.rarity,s=n.level;return e[r]=(null!==(t=e[r])&&void 0!==t?t:0)+At.ZP.mainStatValue(r,i,s)})),{art:(0,jn.xh)(e,(function(e,n){return n.endsWith("_")?(0,yn.aQ)(e/100):(0,yn.a9)(e)})),artSet:(0,jn.xh)(d.artifact.sets,(function(e){return(0,yn.a9)(e)}))}}),[d]),K=(0,Z.useMemo)((function(){return{id:"",location:"",key:d.weapon.key,level:d.weapon.level,ascension:d.weapon.ascension,refinement:d.weapon.refinement,lock:!1}}),[d]),E=(0,O.Z)(l,0,C,K),A=(null!==(e=null===E||void 0===E?void 0:E[l])&&void 0!==e?e:{}).target,I=(0,Z.useMemo)((function(){if(E&&A)return{data:A,teamData:E,oldData:c?t:void 0}}),[A,E,c,t]);return(0,q.jsx)(ue.Z,{spacing:1,children:I?(0,q.jsxs)(P.R.Provider,{value:I,children:[(0,q.jsx)(x.Z,{children:(0,q.jsx)(w.Z,{children:(0,q.jsxs)(x.Z,{sx:{display:"flex",gap:1,p:1},children:[(0,q.jsxs)(x.Z,{sx:{flexGrow:1,display:"flex",gap:1},children:[(0,q.jsx)(j.Z,{color:"info",onClick:v,startIcon:(0,q.jsx)(es.Z,{}),children:"Copy from equipped"}),(0,q.jsx)(j.Z,{color:"error",onClick:p,startIcon:(0,q.jsx)(ns.Z,{}),children:"Reset"})]}),(0,q.jsxs)(dn.Z,{exclusive:!0,value:c,onChange:function(e,n){return u({compareData:n})},size:"small",children:[(0,q.jsx)(sn.Z,{value:!1,disabled:!c,children:"Show TC stats"}),(0,q.jsx)(sn.Z,{value:!0,disabled:c,children:"Compare vs. equipped"})]})]})})}),(0,q.jsx)(x.Z,{children:(0,q.jsxs)(de.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},columns:4,children:[(0,q.jsx)(de.ZP,{item:!0,sx:{flexGrow:-1},children:(0,q.jsx)(us,{weapon:g,setWeapon:m,weaponTypeKey:o.weaponTypeKey})}),(0,q.jsx)(de.ZP,{item:!0,sx:{flexGrow:1},children:(0,q.jsx)(ds,{artifactData:d.artifact,setArtifactData:y})}),(0,q.jsx)(de.ZP,{item:!0,sx:{flexGrow:1},children:(0,q.jsx)(ps,{substats:d.artifact.substats.stats,setSubstats:k,substatsType:d.artifact.substats.type,setSubstatsType:b,mainStatKeys:Object.values(d.artifact.slots).map((function(e){return e.statKey}))})})]})}),(0,q.jsx)(w.Z,{sx:{flexGrow:1,p:1},children:(0,q.jsx)(Wt,{})})]}):(0,q.jsx)(f.Z,{variant:"rectangular",width:"100%",height:1e3})})}function us(e){var n=e.weapon,t=e.setWeapon,r=e.weaponTypeKey,s=n.key,a=n.level,l=void 0===a?0:a,c=n.refinement,o=void 0===c?1:c,u=n.ascension,d=void 0===u?0:u,f=(0,R.Z)((function(){return zt.Z.get(s)}),[s]),h=(0,A.Z)(),p=(0,i.Z)(h,3),m=p[0],v=p[1],g=p[2],y=(0,Z.useContext)(P.R).data,k=(0,Z.useMemo)((function(){return f&&n&&(0,hn.mP)([f.data,(0,hn.v0)(n)])}),[f,n]);return(0,q.jsxs)(w.Z,{sx:{p:1,height:"100%"},children:[(0,q.jsx)(as.Z,{ascension:d,show:m,onHide:g,onSelect:function(e){return t({key:e})},weaponTypeFilter:r}),(0,q.jsxs)(x.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,q.jsxs)(x.Z,{display:"flex",gap:1,children:[f&&(0,q.jsx)(x.Z,{className:"grad-".concat(f.rarity,"star"),component:"img",src:f.getImg(n.ascension),sx:{flexshrink:1,flexBasis:0,maxWidth:"30%",borderRadius:1}}),(0,q.jsxs)(ue.Z,{spacing:1,flexGrow:1,children:[(0,q.jsx)(j.Z,{fullWidth:!0,color:"info",sx:{flexGrow:1},onClick:v,children:(0,q.jsx)(x.Z,{sx:{maxWidth:"10em"},children:null===f||void 0===f?void 0:f.name})}),(null===f||void 0===f?void 0:f.hasRefinement)&&(0,q.jsx)(ss.Z,{refinement:o,setRefinement:function(e){return t({refinement:e})}})]})]}),f&&(0,q.jsx)(ce.Z,{level:l,ascension:d,setBoth:t,useLow:!f.hasRefinement}),(0,q.jsxs)(b.Z,{children:[(0,q.jsx)(L.Z,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),(0,q.jsx)(F.Z,{}),k&&(0,q.jsx)(Te.lD,{children:[ve.ri.weapon.main,ve.ri.weapon.sub,ve.ri.weapon.sub2].map((function(e,n){var t=k.get(e);return t.isEmpty||!t.value?null:(0,q.jsx)(Te.JW,{node:t,component:xe.ZP},t.info.key)}))})]}),y&&(null===f||void 0===f?void 0:f.document)&&(0,q.jsx)(Bn.Z,{sections:f.document})]})]})}function ds(e){var n=e.artifactData,t=e.setArtifactData,r=(0,Z.useCallback)((function(e){return function(r){var i=(0,jn.I8)(n);i.slots[e]=r,t(i)}}),[n,t]),i=(0,Z.useCallback)((function(e){var r=(0,jn.I8)(n);r.sets=e,t(r)}),[n,t]);return(0,q.jsxs)(ue.Z,{spacing:1,sx:{height:"100%"},children:[(0,q.jsx)(w.Z,{sx:{p:1},children:(0,q.jsx)(ue.Z,{spacing:1,children:M.eV.map((function(e){return(0,q.jsx)(xs,{slotKey:e,slot:n.slots[e],setSlot:r(e)},e)}))})}),(0,q.jsx)(fs,{artSet:n.sets,setArtSet:i})]})}function xs(e){var n,t=e.slotKey,r=e.slot,i=e.setSlot,s=r.level,a=r.statKey,l=r.rarity,c=At.ZP.slotMainStats(t),o=(0,Z.useCallback)((function(e){i((0,he.Z)((0,he.Z)({},r),e))}),[r,i]),u=(0,Z.useCallback)((function(e){var n,t=null!==(n=At.P4[e])&&void 0!==n?n:0;o(s>t?{rarity:e,level:t}:{rarity:e})}),[s,o]);return(0,q.jsxs)(x.Z,{display:"flex",gap:1,justifyContent:"space-between",alignItems:"center",children:[(0,q.jsx)(is.Z,{icon:lt.xe[t]}),(0,q.jsx)(b.Z,{sx:{height:"100%",minWidth:"5em",flexGrow:1,display:"flex"},children:1===c.length?(0,q.jsxs)(x.Z,{p:1,justifyContent:"center",alignItems:"center",width:"100%",display:"flex",gap:1,children:[Ce.Z[c[0]],re.ZP.getStr(c[0])]}):(0,q.jsx)(un.Z,{sx:{px:0},fullWidth:!0,title:(0,q.jsx)(Rt.x,{statKey:a}),color:null!==(n=re.ZP.getVariant(a))&&void 0!==n?n:"success",children:c.map((function(e){return(0,q.jsx)(rn.Z,{disabled:a===e,onClick:function(){return o({statKey:e})},children:(0,q.jsx)(Rt._,{statKey:e})},e)}))})}),(0,q.jsx)(un.Z,{sx:{px:0},title:(0,q.jsxs)("span",{children:[l," ",(0,q.jsx)(Nn.G,{icon:Gn.Tab})]}),children:[5,4,3].map((function(e){return(0,q.jsx)(rn.Z,{disabled:l===e,onClick:function(){return u(e)},children:(0,q.jsxs)("span",{children:[e," ",(0,q.jsx)(Nn.G,{icon:Gn.Tab})]})},e)}))}),(0,q.jsx)(Ke.ZP,{startAdornment:"+",value:s,color:At.ZP.levelVariant(s),onChange:function(e){return void 0!==e&&o({level:e})},sx:{borderRadius:1,pl:1,my:0,height:"100%"},inputProps:{sx:{pl:.5,width:"2em"},max:20,min:0}}),(0,q.jsx)(b.Z,{sx:{height:"100%",minWidth:"4em"},children:(0,q.jsx)(x.Z,{p:1,textAlign:"center",children:"".concat((0,re.qs)(At.ZP.mainStatValue(a,l,s),re.ZP.unit(a))).concat(re.ZP.unit(a))})})]})}function fs(e){var n=e.artSet,t=e.setArtSet,r=(0,R.Z)((function(){return zn.y.getAll}),[]),s=(0,Z.useCallback)((function(e){e&&r&&t((0,he.Z)((0,he.Z)({},n),{},(0,Yr.Z)({},e,parseInt(Object.keys(r[e].setEffects)[0]))))}),[n,t,r]),a=(0,Z.useCallback)((function(e){return function(r){return t((0,he.Z)((0,he.Z)({},n),{},(0,Yr.Z)({},e,r)))}}),[n,t]),l=(0,Z.useCallback)((function(e){return function(){n[e];var r=(0,ge.Z)(n,[e].map(Qi.Z));t((0,he.Z)({},r))}}),[n,t]),c=5-Object.values(n).reduce((function(e,n){return e+n}),0);return(0,q.jsxs)(ue.Z,{spacing:1,sx:{flexGrow:1},children:[Object.entries(n).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,q.jsx)(hs,{setKey:t,value:r,setValue:a(t),deleteValue:l(t),remaining:c},t)})),(0,q.jsx)(w.Z,{sx:{flexGrow:1},children:(0,q.jsx)(rs.Y4,{showDefault:!0,disableClearable:!0,size:"small",artSetKey:"",setArtSetKey:s,sx:function(e){return{flexGrow:1,".MuiFilledInput-root":{borderBottomRightRadius:e.shape.borderRadius,borderBottomLeftRadius:e.shape.borderRadius}}},defaultText:"New Artifact Set",disable:function(e){return Object.keys(n).includes(e)||!(null!==r&&void 0!==r&&r[e])||Object.keys(r[e].setEffects).every((function(e){return parseInt(e)>c}))}})})]})}function hs(e){var n=e.setKey,t=e.value,r=e.setValue,i=e.deleteValue,s=e.remaining,a=(0,R.Z)((function(){return zn.y.get(n)}),[]),l=(0,Z.useMemo)((function(){return t<4||!a?[]:Object.keys(a.setEffects).filter((function(e){var n;return null===(n=a.setEffects[e])||void 0===n?void 0:n.document.some((function(e){return"states"in e}))}))}),[a,t]);return a?(0,q.jsxs)(w.Z,{children:[(0,q.jsxs)(x.Z,{display:"flex",children:[(0,q.jsx)(Gt.Z,{artifactSheet:a,numInSet:t,children:(0,q.jsxs)(x.Z,{flexGrow:1,p:1,display:"flex",gap:1,alignItems:"center",children:[(0,q.jsx)(Q.Z,{size:2,sx:{m:-1},src:a.defIconSrc}),(0,q.jsx)(x.Z,{children:a.setName}),(0,q.jsx)(ar.Z,{})]})}),(0,q.jsxs)(Pe.Z,{children:[(0,q.jsx)(un.Z,{size:"small",title:(0,q.jsxs)(x.Z,{whiteSpace:"nowrap",children:[t,"-set"]}),children:Object.keys(a.setEffects).map((function(e){return parseInt(e)})).map((function(e){return(0,q.jsxs)(rn.Z,{disabled:t===e||e>s+t,onClick:function(){return r(e)},children:[e,"-set"]},e)}))}),(0,q.jsx)(j.Z,{color:"error",size:"small",onClick:i,children:(0,q.jsx)(ts.Z,{})})]})]}),!!l.length&&(0,q.jsx)(ue.Z,{spacing:1,sx:{p:1},children:l.map((function(e){return(0,q.jsx)(Ln,{setKey:n,setNumKey:parseInt(e),hideHeader:!0,conditionalsOnly:!0},e)}))})]}):null}function ps(e){var n=e.substats,t=e.setSubstats,s=e.substatsType,a=e.setSubstatsType,l=e.mainStatKeys,c=(0,Z.useCallback)((function(e){return function(r){return t((0,he.Z)((0,he.Z)({},n),{},(0,Yr.Z)({},e,r)))}}),[n,t]),o=(0,v.$)("page_character").t,u=100*Object.entries(n).reduce((function(e,n){var t=(0,i.Z)(n,2),r=t[0];return e+t[1]/At.ZP.substatValue(r)}),0),d=Object.entries(n).reduce((function(e,n){var t=(0,i.Z)(n,2),r=t[0];return e+t[1]/At.ZP.substatValue(r,void 0,s)}),0);return(0,q.jsxs)(w.Z,{sx:{p:1,height:"100%"},children:[(0,q.jsxs)(x.Z,{sx:{mb:1,display:"flex",gap:1},children:[(0,q.jsx)(un.Z,{fullWidth:!0,title:o("tabTheorycraft.substatType.".concat(s)),children:M.Q7.map((function(e){return(0,q.jsx)(rn.Z,{disabled:s===e,onClick:function(){return a(e)},children:o("tabTheorycraft.substatType.".concat(e))},e)}))}),(0,q.jsx)(cn.Z,{title:(0,q.jsx)($.Z,{children:o(Xi||(Xi=(0,r.Z)(["tabTheorycraft.maxTotalRolls"])))}),placement:"top",children:(0,q.jsxs)(b.Z,{sx:{textAlign:"center",py:.5,px:1,minWidth:"15em",whiteSpace:"nowrap",display:"flex",gap:2,justifyContent:"flex-end",alignItems:"center"},children:[(0,q.jsxs)(X.Z,{color:d>45?"warning":void 0,children:["Rolls: ",(0,q.jsx)("strong",{children:d.toFixed(0)})]}),(0,q.jsxs)(X.Z,{color:d>45?"warning":void 0,children:["RV: ",(0,q.jsxs)("strong",{children:[u.toFixed(1),"%"]})]})]})})]}),(0,q.jsx)(ue.Z,{spacing:1,children:Object.entries(n).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,q.jsx)(ms,{statKey:t,value:r,setValue:c(t),substatsType:s,mainStatKeys:l},t)}))})]})}function ms(e){var n=e.statKey,t=e.value,r=e.setValue,i=e.substatsType,s=e.mainStatKeys,a=(0,v.$)("page_character").t,l=re.ZP.unit(n),c=At.ZP.substatValue(n,5,i),o=t/At.ZP.substatValue(n)*100,u=t/c,d=s.includes(n),f=u>(d?24:30);return(0,q.jsxs)(x.Z,{display:"flex",gap:1,justifyContent:"space-between",alignItems:"center",children:[(0,q.jsxs)(b.Z,{sx:{p:.5,minWidth:"11em",flexGrow:1,display:"flex",gap:1,alignItems:"center",justifyContent:"center"},children:[Ce.Z[n],re.ZP.getStr(n),re.ZP.unit(n)]}),(0,q.jsx)(Ke.ZP,{color:t?"success":"primary",float:"%"===re.ZP.unit(n),endAdornment:re.ZP.unit(n)||(0,q.jsx)(x.Z,{width:"1em",component:"span"}),value:parseFloat(t.toFixed(2)),onChange:function(e){return void 0!==e&&r(e)},sx:{borderRadius:1,px:1,height:"100%",width:"6em"},inputProps:{sx:{textAlign:"right"},min:0}}),(0,q.jsx)(Ke.ZP,{color:t?f?"warning":"success":"primary",float:!0,startAdornment:(0,q.jsxs)(x.Z,{sx:{whiteSpace:"nowrap",width:"7em",display:"flex",justifyContent:"space-between"},children:[(0,q.jsxs)("span",{children:[(0,re.qs)(c,l),l]}),(0,q.jsx)("span",{children:"x"})]}),value:parseFloat(u.toFixed(2)),onChange:function(e){return void 0!==e&&r(e*c)},sx:{borderRadius:1,px:1,my:0,height:"100%",width:"7em"},inputProps:{sx:{textAlign:"right",pr:.5},min:0,step:1}}),(0,q.jsx)(cn.Z,{title:(0,q.jsx)($.Z,{children:a(d?"tabTheorycraft.maxRollsMain":"tabTheorycraft.maxRolls")}),placement:"top",children:(0,q.jsx)(b.Z,{sx:{textAlign:"center",p:.5,minWidth:"8em"},children:(0,q.jsxs)(X.Z,{color:f?"warning":void 0,children:["RV: ",(0,q.jsxs)("strong",{children:[o.toFixed(1),"%"]})]})})})]})}var js,Zs=t(43992),vs=t(31038),gs=t(11741);function ys(){return(0,q.jsx)(fe.Z,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:(0,q.jsxs)(de.ZP,{container:!0,spacing:1,children:[(0,q.jsxs)(de.ZP,{item:!0,xs:12,md:6,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,q.jsx)(bs,{}),(0,q.jsx)(ws,{})]}),(0,jn.w6)(0,2).map((function(e){return(0,q.jsx)(de.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,q.jsx)(ks,{index:e})},e)}))]})})}function bs(){var e,n,t,r=(0,Z.useContext)(P.R),s=r.data,a=r.oldData,l=s.getTeamBuff(),c=[];return Object.entries(null!==(e=l.total)&&void 0!==e?e:{}).forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return!r.isEmpty&&0!==r.value&&c.push([["total",t],r])})),Object.entries(null!==(n=l.premod)&&void 0!==n?n:{}).forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return!r.isEmpty&&0!==r.value&&c.push([["premod",t],r])})),Object.entries(null!==(t=l.enemy)&&void 0!==t?t:{}).forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return!r.isEmpty&&"number"===typeof r.value&&0!==r.value&&c.push([["enemy",t],r])})),c.length?(0,q.jsxs)(w.Z,{children:[(0,q.jsx)(h.Z,{children:(0,q.jsx)($.Z,{children:"Team Buffs"})}),(0,q.jsx)(F.Z,{}),(0,q.jsx)(h.Z,{children:(0,q.jsx)(de.ZP,{container:!0,children:c.map((function(e,n){var t,r,s=(0,i.Z)(e,2),l=s[0],c=s[1];return c&&(0,q.jsx)(de.ZP,{item:!0,xs:12,children:(0,q.jsx)(Te.JW,{node:c,oldValue:null===(r=(0,jn.Hm)(null===a||void 0===a?void 0:a.getTeamBuff(),l))||void 0===r?void 0:r.value})},(null!==(t=c.info.key)&&void 0!==t?t:"")+n)}))})})]}):null}function ws(){var e=(0,v.$)("page_character").t,n=(0,Z.useContext)(P.R).data,t=(0,Z.useContext)(S.K).character.team.reduce((function(e,n){return e+(n?1:0)}),1);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(w.Z,{children:(0,q.jsx)(L.Z,{title:(0,q.jsxs)("span",{children:[e("tabTeambuff.team_reso")," ",(0,q.jsx)("strong",{children:(0,q.jsxs)(X.Z,{color:t>=4?"success":"warning",children:["(",t,"/4)"]})})," ",(0,q.jsx)(ct.Z,{title:(0,q.jsx)($.Z,{children:e(js||(js=(0,r.Z)(["tabTeambuff.resonance_tip"])))})})]}),titleTypographyProps:{variant:"subtitle2"}})}),gs.J.map((function(e,t){var r=(0,q.jsx)(ct.Z,{title:(0,q.jsx)($.Z,{children:e.desc})}),i=(0,q.jsxs)("span",{children:[e.name," ",r]});return(0,q.jsxs)(w.Z,{sx:{opacity:e.canShow(n)?1:.5},children:[(0,q.jsx)(L.Z,{title:i,action:e.icon,titleTypographyProps:{variant:"subtitle2"}}),e.canShow(n)&&(0,q.jsx)(F.Z,{}),e.canShow(n)&&(0,q.jsx)(h.Z,{children:(0,q.jsx)(Bn.Z,{sections:e.sections,teamBuffOnly:!0,hideDesc:!0})})]},t)}))]})}function ks(e){var n=e.index,t=(0,Z.useContext)(P.R).teamData,r=(0,v.$)("page_character").t,i=(0,Z.useContext)(S.K),s=i.character,a=i.character.key,l=i.characterDispatch,c=s.team[n],o=(0,W.Z)(),u=t[c],d=(0,Z.useMemo)((function(){var e;return u&&{character:(0,he.Z)((0,he.Z)({},u.character),{},{conditional:null!==(e=s.teamConditional[c])&&void 0!==e?e:{}}),characterSheet:u.characterSheet,characterDispatch:function(e){if(c&&"conditional"in e){var n=e.conditional;l({type:"teamConditional",teamMateKey:c,conditional:n})}}}}),[s,c,u,l]),x=(0,Z.useMemo)((function(){return u&&{data:u.target,teamData:t}}),[u,t]);return(0,q.jsxs)(w.Z,{children:[(0,q.jsx)(vs.Z,{fullWidth:!0,value:c,onChange:function(e){return l({type:"team",index:n,charKey:e})},disable:function(e){return e===a||""!==e&&s.team.includes(e)},labelText:r("teammate",{count:n+1}),defaultText:r("none"),defaultIcon:(0,q.jsx)(Zs.Z,{}),showDefault:!0}),c&&d&&(0,q.jsx)(S.K.Provider,{value:d,children:x&&(0,q.jsx)(P.R.Provider,{value:x,children:(0,q.jsx)(on.Z,{characterKey:c,onClickHeader:o,artifactChildren:(0,q.jsx)(S.K.Provider,{value:d,children:(0,q.jsx)(P.R.Provider,{value:x,children:(0,q.jsx)(Cs,{})})}),weaponChildren:(0,q.jsx)(S.K.Provider,{value:d,children:(0,q.jsx)(P.R.Provider,{value:x,children:(0,q.jsx)(Ss,{})})}),characterChildren:(0,q.jsx)(S.K.Provider,{value:d,children:(0,q.jsx)(P.R.Provider,{value:x,children:(0,q.jsx)(Ps,{})})}),isTeammateCard:!0})})})]})}function Cs(){var e=(0,Z.useContext)(P.R).data,n=(0,R.Z)((function(){return zn.y.getAll}),[]),t=(0,Z.useMemo)((function(){return n&&Object.entries(zn.y.setEffects(n,e)).flatMap((function(e){var t=(0,i.Z)(e,2),r=t[0];return t[1].flatMap((function(e){return n[r].setEffectDocument(e)}))}))}),[n,e]);return t?(0,q.jsx)(Bn.Z,{sections:t,teamBuffOnly:!0}):null}function Ss(){var e=(0,Z.useContext)(S.K).character.key,n=(0,Z.useContext)(P.R).teamData[e].weaponSheet;return n.document?(0,q.jsx)(Bn.Z,{sections:n.document,teamBuffOnly:!0}):null}function Ps(){var e=(0,Z.useContext)(S.K).character.key,n=(0,Z.useContext)(P.R),t=n.data,r=n.teamData[e].characterSheet.getTalent(t.get(ve.ri.charEle).value),i=Object.values(r.sheets).flatMap((function(e){return e.sections}));return i?(0,q.jsx)(Bn.Z,{sections:i,teamBuffOnly:!0}):null}var Ks,Es=t(53343);function As(){var e=(0,Z.useContext)(S.K),n=e.character,t=e.characterSheet,r=e.characterDispatch,i=n.elementKey,s=void 0===i?"anemo":i;return"talents"in t.sheet?(0,q.jsx)(un.Z,{color:s,title:(0,q.jsx)("strong",{children:(0,Es.Oy)("element.".concat(s))}),children:Object.keys(t.sheet.talents).map((function(e){return(0,q.jsx)(rn.Z,{selected:s===e,disabled:s===e,onClick:function(){return r({elementKey:e})},children:(0,q.jsx)("strong",{children:(0,q.jsx)(X.Z,{color:e,children:(0,Es.Oy)("element.".concat(e))})})},e)}))}):null}function Is(){var e,n=(0,y.s0)(),t=(0,Z.useCallback)((function(){return n("/characters")}),[n]),r=(0,y.UO)().characterKey;return!M.IV.includes(null!==(e=r)&&void 0!==e?e:"")?(0,q.jsx)(y.Fg,{to:"/characters"}):(0,q.jsx)(x.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:(0,q.jsx)(Z.Suspense,{fallback:(0,q.jsx)(f.Z,{variant:"rectangular",width:"100%",height:1e3}),children:r&&(0,q.jsx)(Ds,{characterKey:r,onClose:t})})})}function Ds(e){var n,t,r,i=e.characterKey,s=e.onClose,a=(0,I.Z)(i),l=(0,R.Z)((function(){return E.Z.get(i)}),[i]),c=(0,O.Z)(i),o=(null!==(n=null===c||void 0===c?void 0:c[i])&&void 0!==n?n:{}).target,u=(null!==(t=(0,y.bS)({path:"/characters/:charKey/:tab",end:!1}))&&void 0!==t?t:{params:{tab:"overview"}}).params.tab,d=void 0===u?"overview":u,p=(0,v.$)().t;(0,_.Z)("".concat(p("char_".concat(i,"_gen:name"))," - ").concat(p("page_character:tabs.".concat(d))));var m=(0,D.Z)(null!==(r=null===a||void 0===a?void 0:a.key)&&void 0!==r?r:""),j=(0,Z.useMemo)((function(){if(c&&o)return{data:o,teamData:c,oldData:void 0}}),[o,c]),g=(0,Z.useMemo)((function(){if(a&&l)return{character:a,characterSheet:l,characterDispatch:m}}),[a,l,m]);return(0,q.jsx)(b.Z,{children:j&&g?(0,q.jsx)(S.K.Provider,{value:g,children:(0,q.jsx)(P.R.Provider,{value:j,children:(0,q.jsx)(K.B,{children:(0,q.jsxs)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,q.jsxs)(x.Z,{display:"flex",children:[(0,q.jsxs)(x.Z,{display:"flex",gap:1,flexWrap:"wrap",flexGrow:1,children:[(0,q.jsx)(z,{}),(0,q.jsx)(As,{}),(0,q.jsx)(_s,{}),(0,q.jsx)(T.J,{}),(0,q.jsx)(Ms,{})]}),!!s&&(0,q.jsx)(k.Z,{onClick:s})]}),(0,q.jsxs)(x.Z,{display:"flex",gap:1,flexWrap:"wrap",children:[a&&(0,q.jsx)(ce.Z,{level:a.level,ascension:a.ascension,setBoth:m}),(0,q.jsx)(C.Hn,{size:"small"}),(0,q.jsx)(C.pg,{}),(0,q.jsx)(C.oX,{size:"small"})]}),(0,q.jsx)(w.Z,{children:(0,q.jsx)(Os,{tab:d})}),(0,q.jsx)(Rs,{}),(0,q.jsx)(w.Z,{children:(0,q.jsx)(Os,{tab:d})})]})})})}):(0,q.jsx)(f.Z,{variant:"rectangular",width:"100%",height:1e3})})}function Rs(){return(0,q.jsx)(Z.Suspense,{fallback:(0,q.jsx)(f.Z,{variant:"rectangular",width:"100%",height:500}),children:(0,q.jsxs)(y.Z5,{children:[(0,q.jsx)(y.AW,{index:!0,element:(0,q.jsx)(Li,{})}),(0,q.jsx)(y.AW,{path:"/talent",element:(0,q.jsx)($i,{})}),(0,q.jsx)(y.AW,{path:"/teambuffs",element:(0,q.jsx)(ys,{})}),(0,q.jsx)(y.AW,{path:"/optimize",element:(0,q.jsx)(ni,{})}),(0,q.jsx)(y.AW,{path:"/theorycraft",element:(0,q.jsx)(os,{})})]})})}function Os(e){var n=e.tab,t=(0,v.$)("page_character").t;return(0,q.jsxs)(p.Z,{value:n,variant:"scrollable",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"}},children:[(0,q.jsx)(m.Z,{sx:{minWidth:"20%"},value:"overview",label:t("tabs.overview"),icon:(0,q.jsx)(s.Z,{}),component:g.rU,to:""}),(0,q.jsx)(m.Z,{sx:{minWidth:"20%"},value:"talent",label:t("tabs.talent"),icon:(0,q.jsx)(a.Z,{}),component:g.rU,to:"talent"}),(0,q.jsx)(m.Z,{sx:{minWidth:"20%"},value:"teambuffs",label:t("tabs.teambuffs"),icon:(0,q.jsx)(l.Z,{}),component:g.rU,to:"teambuffs"}),(0,q.jsx)(m.Z,{sx:{minWidth:"20%"},value:"optimize",label:t("tabs.optimize"),icon:(0,q.jsx)(c.Z,{}),component:g.rU,to:"optimize"}),(0,q.jsx)(m.Z,{sx:{minWidth:"20%"},value:"theorycraft",label:t("tabs.theorycraft"),icon:(0,q.jsx)(o.Z,{}),component:g.rU,to:"theorycraft"})]})}function _s(){var e=(0,v.$)("page_character").t,n=(0,A.Z)(),t=(0,i.Z)(n,3),s=t[0],a=t[1],l=t[2],c=(0,Z.useContext)(S.K).character.bonusStats,o=Object.keys(c).length;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(j.Z,{color:"info",startIcon:(0,q.jsx)(u.Z,{}),onClick:a,children:[e(Ks||(Ks=(0,r.Z)(["addStats.title"]))),!!o&&(0,q.jsx)(ne.Z,{sx:{ml:1},color:"success",children:o})]}),(0,q.jsx)(We,{open:s,onClose:l})]})}function Ms(){var e=(0,Z.useContext)(K.M).onModalOpen;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(j.Z,{color:"info",startIcon:(0,q.jsx)(d.Z,{}),onClick:e,children:["Formulas ","&"," Calcs"]}),(0,q.jsx)(ie,{})]})}},90543:function(e,n,t){t.d(n,{Z:function(){return G}});var r,i=t(30168),s=t(53174),a=t(54483),l=t(40117),c=t(62002),o=t(63204),u=t(66647),d=t(68870),x=t(47047),f=t(13400),h=t(20890),p=t(39504),m=t(2199),j=t(40165),Z=t(24518),v=t(72791),g=t(22020),y=t(10658),b=t(71310),w=t(31038),k=t(40020),C=t(20005),S=t(55942),P=t(10157),K=t(75545),E=t(2139),A=t(66218),I=t(25074),D=t(26138),R=t(73036),O=t(79406),_=t(42320),M=t(74480),T=t(80184);function G(e){var n,t=e.weaponId,G=e.onClick,N=e.onEdit,W=e.onDelete,q=e.canEquip,z=void 0!==q&&q,B=e.extraButtons,L=(0,g.$)(["page_weapon","ui"]).t,F=(0,v.useContext)(I.t).database,V=(0,M.Z)(t),H=(0,_.Z)((function(){return null!==V&&void 0!==V&&V.key?A.Z.get(V.key):void 0}),[null===V||void 0===V?void 0:V.key]),$=(0,v.useCallback)((function(e){return e.weaponTypeKey===(null===H||void 0===H?void 0:H.weaponType)}),[H]),U=(0,v.useCallback)((function(e){return(0,T.jsx)(u.Z,{onClick:function(){return null===G||void 0===G?void 0:G(t)},children:e})}),[G,t]),Y=(0,v.useCallback)((function(e){return(0,T.jsx)(d.Z,{children:e})}),[]),J=(0,v.useCallback)((function(e){return F.weapons.set(t,{location:e})}),[F,t]),X=(0,v.useMemo)((function(){return H&&V&&(0,R.mP)([H.data,(0,R.v0)(V)])}),[H,V]);if(!V||!H||!X)return null;var Q=V.level,ee=V.ascension,ne=V.refinement,te=V.id,re=V.location,ie=void 0===re?"":re,se=V.lock,ae=X.get(D.ri.weapon.type).value,le=[D.ri.weapon.main,D.ri.weapon.sub,D.ri.weapon.sub2].map((function(e){return X.get(e)})),ce=H.getImg(ee);return(0,T.jsx)(v.Suspense,{fallback:(0,T.jsx)(x.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,T.jsxs)(b.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,T.jsxs)(C.Z,{condition:!!G,wrapper:U,falseWrapper:Y,children:[(0,T.jsxs)(d.Z,{className:"grad-".concat(H.rarity,"star"),sx:{position:"relative",pt:2,px:2},children:[!G&&(0,T.jsx)(f.Z,{color:"primary",onClick:function(){return F.weapons.set(te,{lock:!se})},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:se?(0,T.jsx)(l.Z,{}):(0,T.jsx)(c.Z,{})}),(0,T.jsxs)(d.Z,{sx:{position:"relative",zIndex:1},children:[(0,T.jsxs)(d.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,T.jsx)(S.Z,{sx:{fontSize:"1.5em"},src:null===(n=y.Z.weaponTypes)||void 0===n?void 0:n[ae]}),(0,T.jsx)(h.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,T.jsx)("strong",{children:H.name})})]}),(0,T.jsxs)(h.Z,{component:"span",variant:"h5",children:["Lv. ",Q]}),(0,T.jsxs)(h.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",E.SJ[ee]]}),(0,T.jsxs)(h.Z,{variant:"h6",children:["Refinement ",(0,T.jsx)("strong",{children:ne})]}),(0,T.jsx)(h.Z,{children:(0,T.jsx)(P.q,{stars:H.rarity,colored:!0})})]}),(0,T.jsx)(d.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,T.jsx)(d.Z,{component:"img",src:null!==ce&&void 0!==ce?ce:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,T.jsx)(p.Z,{children:le.map((function(e){if(!e.info.key)return null;var n=(0,O.EC)(e.value,e.unit,e.unit?void 0:0);return(0,T.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,T.jsxs)(h.Z,{flexGrow:1,children:[K.Z[e.info.key]," ",O.ZP.get(e.info.key)]}),(0,T.jsx)(h.Z,{children:n})]},e.info.key)}))})]}),(0,T.jsxs)(d.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[z?(0,T.jsx)(w.Z,{size:"small",sx:{flexGrow:1},disable:function(e){return""===e},showDefault:!0,defaultIcon:(0,T.jsx)(o.Z,{}),defaultText:L("ui:inventory"),value:ie,onChange:J,filter:$,disableClearable:!0}):(0,T.jsx)(k.Z,{location:ie}),(0,T.jsxs)(m.Z,{children:[!!N&&(0,T.jsx)(j.Z,{title:(0,T.jsx)(h.Z,{children:L(r||(r=(0,i.Z)(["page_weapon:edit"])))}),placement:"top",arrow:!0,children:(0,T.jsx)(Z.Z,{color:"info",onClick:function(){return N(te)},children:(0,T.jsx)(a.G,{icon:s.Xcf,className:"fa-fw"})})}),!!W&&(0,T.jsx)(Z.Z,{color:"error",onClick:function(){return W(te)},disabled:!!ie||se,children:(0,T.jsx)(a.G,{icon:s.I7k,className:"fa-fw"})}),B]})]})]})})}},52771:function(e,n,t){t.d(n,{JR:function(){return o},e6:function(){return u},g4:function(){return s},mf:function(){return l},vL:function(){return i},yJ:function(){return a}});var r=t(60393),i=1e3,s=60*i,a=60*s,l=24*a;function c(e){var n=e%1e3,t=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:r,seconds:t,milliseconds:n}}function o(e){var n=c(e),t=n.hours,i=n.minutes,s=n.seconds,a="Minutes";return t&&(a="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(s,"0",2)," ").concat(a)}function u(e){var n=c(e),t=n.hours,i=n.minutes,s=n.seconds,a=n.milliseconds,l="Minutes";return t&&(l="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(s,"0",2),".").concat((0,r.H_)(a,"0",3)," ").concat(l)}},66045:function(e,n,t){t.d(n,{Ol:function(){return i},Sn:function(){return s},Xg:function(){return a}});var r=t(72828),i=["level","rarity"];function s(e){return{level:{getValue:function(e){var n;return null!==(n=e.level*e.ascension)&&void 0!==n?n:0},tieBreaker:"rarity"},rarity:{getValue:function(n){var t;return null===e||void 0===e||null===(t=e[n.key])||void 0===t?void 0:t.rarity},tieBreaker:"level"}}}function a(e){return{rarity:function(n,t){var r;return t.includes(null===e||void 0===e||null===(r=e[n.key])||void 0===r?void 0:r.rarity)},weaponType:function(n,t){var r;return t.includes(null===e||void 0===e||null===(r=e[n.key])||void 0===r?void 0:r.weaponType)},name:function(e,n){return r.Z.t("weaponNames_gen:".concat(e.key)).toLowerCase().includes(n.toLowerCase())}}}}}]);
//# sourceMappingURL=302.b0328589.chunk.js.map