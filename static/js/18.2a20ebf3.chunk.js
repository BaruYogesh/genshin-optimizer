(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[18],{109:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(61),i=n(31),r=n(12),l=n(32),c=n(2),o=n(21),s=n(25),u=n(58),d=n(15),v=n(136),f=n(41),h=n(22),j=n(126),b=n(57),g=n(3),m=n(122),p=n(14),O=function(){function e(){if(Object(o.a)(this,e),this instanceof e)throw Error("A static class cannot be instantiated.")}return Object(s.a)(e,null,[{key:"getFormulaPath",value:function(e,t,n){var a,i=null===(a=this.getCDataObj(e))||void 0===a?void 0:a.formula;if(i){var r;if("auto"===t)for(var l=0,o=["normal","charged","plunging"];l<o.length;l++){var s,u,d=o[l],v=null!==(s=Object.entries(null!==(u=null===i||void 0===i?void 0:i[d])&&void 0!==u?u:{}).find((function(e){return Object(c.a)(e,2)[1]===n})))&&void 0!==s?s:[];if(r=Object(c.a)(v,1)[0]){t=d;break}}else{var f,h,j=null!==(f=Object.entries(null!==(h=null===i||void 0===i?void 0:i[t])&&void 0!==h?h:{}).find((function(e){return Object(c.a)(e,2)[1]===n})))&&void 0!==f?f:[];r=Object(c.a)(j,1)[0]}if(r)return{characterKey:e,talentKey:t,formulaKey:r}}}},{key:"remove",value:function(e){var t=p.a.get(e);t.equippedArtifacts&&Object.values(t.equippedArtifacts).forEach((function(e){return d.a.moveToNewLocation(e,"")})),p.a.remove(e)}}]),e}();O.getCharacterDataImport=function(){return v.b},O.getBaseStatValue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=e.characterKey,i=e.levelKey;if("specializedStatKey"===t)return O.getSpecializedStatKey(a);if("specializedStatVal"===t)return O.getSpeicalizedStatVal(a,i);if("weaponATK"===t)return m.a.getWeaponMainStatValWithOverride(null===e||void 0===e?void 0:e.weapon);if("characterLevel"===t||"enemyLevel"===t)return O.getLevel(i);if(t.includes("enemyRes_"))return 10;if(t in v.e)return v.e[t];var r=O.getCDataObj(a);return r&&t in r.baseStat?r.baseStat[t][O.getIndexFromlevelkey(i)]:n},O.getCDataObj=function(e){return v.a[e]},O.getElementalName=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===f.a||void 0===f.a||null===(t=f.a[e])||void 0===t?void 0:t.name)||n},O.getAllCharacterKeys=function(){return Object.keys(v.a)},O.getName=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===(t=O.getCDataObj(e))||void 0===t?void 0:t.name)||n},O.getStar=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(null===(t=O.getCDataObj(e))||void 0===t?void 0:t.star)||n},O.getElementalKey=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===(t=O.getCDataObj(e))||void 0===t?void 0:t.elementKey)||n},O.getElementalKeys=function(){return Object.keys(f.a)},O.getElementalKeysWithoutPhysical=function(){return O.getElementalKeys().filter((function(e){return"physical"!==e}))},O.getWeaponTypeKey=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===(t=O.getCDataObj(e))||void 0===t?void 0:t.weaponTypeKey)||n},O.getConstellationName=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===(t=O.getCDataObj(e))||void 0===t?void 0:t.constellationName)||n},O.getTitles=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(null===(t=O.getCDataObj(e))||void 0===t?void 0:t.titles)||n},O.getlevelKeys=function(){return Object.keys(v.d)},O.getlevelTemplateName=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===v.d||void 0===v.d||null===(t=v.d[e])||void 0===t?void 0:t.name)||n},O.getLevelString=function(e){var t=O.getStatValueWithOverride(e,"characterLevel");return O.getLevel(e.levelKey)===t?O.getlevelTemplateName(e.levelKey):"Lvl. ".concat(t)},O.getIndexFromlevelkey=function(e){return O.getlevelKeys().indexOf(e)},O.getLevel=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(null===v.d||void 0===v.d||null===(t=v.d[e])||void 0===t?void 0:t.level)||n},O.getAscension=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(null===v.d||void 0===v.d||null===(t=v.d[e])||void 0===t?void 0:t.asend)||n},O.getSpecializedStat=function(e){var t;return null===(t=O.getCDataObj(e))||void 0===t?void 0:t.specializeStat},O.getSpecializedStatKey=function(e){var t;return null===(t=O.getSpecializedStat(e))||void 0===t?void 0:t.key},O.getSpeicalizedStatVal=function(e,t){var n,a;return null===(n=O.getSpecializedStat(e))||void 0===n||null===(a=n.value)||void 0===a?void 0:a[O.getIndexFromlevelkey(t)]},O.getThumb=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(null===(t=O.getCDataObj(e))||void 0===t?void 0:t.thumbImg)||n},O.getCard=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(null===(t=O.getCDataObj(e))||void 0===t?void 0:t.cardImg)||n},O.getTalentImg=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(null===(n=O.getTalent(e,t))||void 0===n?void 0:n.img)||a},O.getConstellationImg=function(e,t){var n,a,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(null===(n=O.getCDataObj(e))||void 0===n||null===(a=n.talent)||void 0===a||null===(i=a["constellation".concat(t+1)])||void 0===i?void 0:i.img)||r},O.getTalent=function(e,t){var n,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(null===(n=O.getCDataObj(e))||void 0===n||null===(a=n.talent)||void 0===a?void 0:a[t])||i},O.getTalentName=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(null===(n=O.getTalent(e,t))||void 0===n?void 0:n.name)||a},O.getTalentLevelBoost=function(e,t,n){var a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("burst"!==t&&"skill"!==t)return i;for(var r=(null===(a=O.getCDataObj(e))||void 0===a?void 0:a.talent)||{},l=1;l<=n;l++){var o,s=(null===(o=r["constellation".concat(l)])||void 0===o?void 0:o.talentBoost)||{},u=Object.entries(s).find((function(e){var n=Object(c.a)(e,2),a=n[0];n[1];return a===t}));if(u)return u[1]}return i},O.getTalentDocument=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(null===(n=O.getTalent(e,t))||void 0===n?void 0:n.document)||a},O.getTalentDocumentSections=function(e,t){return O.getTalentDocument(e.characterKey,t).map((function(t){return"function"===typeof t?t(e):t}))},O.getTalentField=function(e,t,n,a){var i,r,l,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!e)return c;var o=null===(i=O.getTalentDocumentSections(e,t))||void 0===i||null===(r=i[n])||void 0===r||null===(l=r.fields)||void 0===l?void 0:l[a];return o?"function"===typeof o?o(e):o:c},O.getTalentFieldValue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return(null===e||void 0===e?void 0:e[t])?"function"===typeof(null===e||void 0===e?void 0:e[t])?e[t](n):e[t]:a},O.getTalentStats=function(e,t,n){var a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=null===(a=O.getTalent(e,t))||void 0===a?void 0:a.stats;return"function"===typeof r?r(n):r||i},O.getTalentStatsAll=function(e,t){var n,a=(null===(n=O.getCDataObj(e))||void 0===n?void 0:n.talent)||{},i=[];return Object.keys(a).forEach((function(n){var a=O.getTalentStats(e,n,t);a&&i.push(a)})),i},O.getTalentConditional=function(e,t,n){var a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=O.getTalentDocumentSections(e,t),c=null,o=Object(l.a)(r);try{for(o.s();!(a=o.n()).done;){var s,u=a.value,d=u.conditional;if("function"===typeof d&&(d=d(e)),(null===(s=d)||void 0===s?void 0:s.conditionalKey)===n){c=d;break}}}catch(v){o.e(v)}finally{o.f()}return c||i},O.getTalentConditionalStats=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t||!e)return n;var a=b.a.getConditionalProp(e,"stats",t),i=Object(c.a)(a,2),r=i[0],l=void 0===r?{}:r,o=i[1];return o?Object.fromEntries(Object.entries(l).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return"modifiers"===n?[n,a]:[n,a*o]}))):n},O.getTalentConditionalFields=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!t||!e)return n;var a=b.a.getConditionalProp(e,"fields",t)[0];return a||n},O.isAutoElemental=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"catalyst"===O.getWeaponTypeKey(e)||t},O.isAutoInfusable=function(e){var t,n,a,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(null===(t=O.getCDataObj(e))||void 0===t||null===(n=t.talent)||void 0===n||null===(a=n.auto)||void 0===a?void 0:a.infusable)||i},O.hasTalentPage=function(e){var t;return Boolean(null===(t=O.getCDataObj(e))||void 0===t?void 0:t.talent)},O.getDisplayStatKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{basicKeys:[]};if(!e)return t;var n=e.characterKey,a=O.getElementalKey(n);if(!a)return t;var l=["finalHP","finalATK","finalDEF","eleMas","critRate_","critDMG_","heal_","enerRech_","".concat(a,"_dmg_")],c=O.isAutoElemental(n),o=O.isAutoInfusable(n);c||l.push("physical_dmg_");var s=Object(g.e)(h.a[a]),u=O.getWeaponTypeKey(n);if(s.includes("shattered_hit")||"claymore"!==u||s.push("shattered_hit"),O.hasTalentPage(n)){var d,v,f={};return Object.keys(null!==(d=null===(v=O.getCDataObj(n))||void 0===v?void 0:v.talent)&&void 0!==d?d:{}).forEach((function(t){var n;return null===(n=O.getTalentDocumentSections(e,t))||void 0===n?void 0:n.forEach((function(n,a){var i;return null===n||void 0===n||null===(i=n.fields)||void 0===i?void 0:i.forEach((function(n,i){var r;((null===n||void 0===n?void 0:n.formula)||(null===(r=O.getTalentField(e,t,a,i))||void 0===r?void 0:r.formula))&&(f[t]||(f[t]=[]),f[t].push({talentKey:t,sectionIndex:a,fieldIndex:i}))}))}))})),Object(r.a)(Object(r.a)({basicKeys:l},f),{},{transReactions:s})}var j=[];if(c||j.push("physical_normal_avgHit","physical_charged_avgHit"),c||o?j.push("".concat(a,"_normal_avgHit"),"".concat(a,"_charged_avgHit")):"bow"===O.getWeaponTypeKey(n)&&j.push("".concat(a,"_charged_avgHit")),j.push("".concat(a,"_skill_avgHit"),"".concat(a,"_burst_avgHit")),"pyro"===a){var b=[];b.push.apply(b,Object(i.a)(j.filter((function(e){return e.startsWith("".concat(a,"_"))})).map((function(e){return e.replace("".concat(a,"_"),"".concat(a,"_vaporize_"))})))),b.push.apply(b,Object(i.a)(j.filter((function(e){return e.startsWith("".concat(a,"_"))})).map((function(e){return e.replace("".concat(a,"_"),"".concat(a,"_melt_"))})))),j.push.apply(j,b)}else"cryo"===a?j.push.apply(j,Object(i.a)(j.filter((function(e){return e.startsWith("".concat(a,"_"))})).map((function(e){return e.replace("".concat(a,"_"),"".concat(a,"_melt_"))})))):"hydro"===a&&j.push.apply(j,Object(i.a)(j.filter((function(e){return e.startsWith("".concat(a,"_"))})).map((function(e){return e.replace("".concat(a,"_"),"".concat(a,"_vaporize_"))}))));return{basicKeys:l,genericAvgHit:j,transReactions:s}},O.hasOverride=function(e,t){return"finalHP"===t?O.hasOverride(e,"hp")||O.hasOverride(e,"hp_")||O.hasOverride(e,"characterHP")||!1:"finalDEF"===t?O.hasOverride(e,"def")||O.hasOverride(e,"def_")||O.hasOverride(e,"characterDEF")||!1:"finalATK"===t?O.hasOverride(e,"atk")||O.hasOverride(e,"atk_")||O.hasOverride(e,"characterATK")||!1:!!(null===e||void 0===e?void 0:e.baseStatOverrides)&&t in e.baseStatOverrides},O.getStatValueWithOverride=function(e,t){var n,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return O.hasOverride(e,t)?null!==(n=null===e||void 0===e||null===(a=e.baseStatOverrides)||void 0===a?void 0:a[t])&&void 0!==n?n:i:O.getBaseStatValue(e,t,i)},O.equipArtifacts=function(e,t){var n=p.a.get(e);if(n){var a=n.equippedArtifacts,i=t;u.a.getSlotKeys().forEach((function(t){var n,r=d.a.get(null===i||void 0===i?void 0:i[t]);if((null===r||void 0===r?void 0:r.location)!==e){var l=d.a.get(null===a||void 0===a?void 0:a[t]),c=null!==(n=null===r||void 0===r?void 0:r.location)&&void 0!==n?n:"";l&&d.a.moveToNewLocation(l.id,c),c&&p.a.equipArtifact(c,l),r&&d.a.moveToNewLocation(r.id,e)}})),n.equippedArtifacts=Object.fromEntries(u.a.getSlotKeys().map((function(e){return[e,""]}))),Object.entries(t).forEach((function(e){var t=Object(c.a)(e,2),a=t[0],i=t[1];return n.equippedArtifacts[a]=i})),p.a.update(n)}},O.calculateBuild=function(e){var t;if(e.artifacts)t=Object.fromEntries(e.artifacts.map((function(e,t){return[t,e]})));else{if(!e.equippedArtifacts)return{};t=Object.fromEntries(Object.entries(e.equippedArtifacts).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return[n,d.a.get(a)]})))}var n=O.calculateCharacterWithWeaponStats(e);return O.calculateBuildWithObjs(e.artifactConditionals,n,t)},O.calculateBuildWithObjs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=u.a.setToSlots(n),i=u.a.getArtifactSetEffectsStats(a),r=Object(g.e)(t);Object.values(n).forEach((function(e){e&&(r[e.mainStatKey]=(r[e.mainStatKey]||0)+u.a.getMainStatValue(e.mainStatKey,e.numStars,r.artifactsAssumeFull?4*e.numStars:e.level),e.substats.forEach((function(e){return e&&e.key&&(r[e.key]=(r[e.key]||0)+e.value)})))})),i.forEach((function(e){return r[e.key]=(r[e.key]||0)+e.statVal})),e.forEach((function(e){var t=e.srcKey,n=e.srcKey2,i=e.conditionalNum;!a[t]||a[t].length<parseInt(n)||Object.entries(u.a.getConditionalStats(t,n,i)).forEach((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return r[n]=(r[n]||0)+a}))}));var l=Object(j.a)(null===r||void 0===r?void 0:r.modifiers);return Object(h.c)(l,r).formula(r),{artifactIds:Object.fromEntries(Object.entries(n).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return[n,null===a||void 0===a?void 0:a.id]}))),setToSlots:a,finalStats:r,artifactConditionals:e}},O.mergeStats=function(e,t){return t&&Object.entries(t).forEach((function(t){var n,a=Object(c.a)(t,2),i=a[0],r=a[1];if("modifiers"===i){var l;e.modifiers=null!==(l=e.modifiers)&&void 0!==l?l:{};for(var o=0,s=Object.entries(r);o<s.length;o++){var u,d=Object(c.a)(s[o],2),v=d[0],f=d[1];e.modifiers[v]=null!==(u=e.modifiers[v])&&void 0!==u?u:{};for(var h=0,j=Object.entries(f);h<j.length;h++){var b,g=Object(c.a)(j[h],2),m=g[0],p=g[1];e.modifiers[v][m]=(null!==(b=e.modifiers[v][m])&&void 0!==b?b:0)+p}}}else e[i]=(null!==(n=e[i])&&void 0!==n?n:0)+r}))},O.calculateCharacterWithWeaponStats=function(e){var t,n,r,l,o,s,u,d,f,h,j,b,p,y,x,L,S;if(!e)return{};var _=e=Object(g.e)(e),K=_.characterKey,C=_.levelKey,T=_.hitMode,W=_.autoInfused,N=_.reactionMode,E=_.talentLevelKeys,k=_.constellation,A=_.talentConditionals,w=void 0===A?[]:A,D=O.getAscension(C),I=["characterHP","characterATK","characterDEF","weaponATK","characterLevel","enemyLevel","physical_enemyRes_","physical_enemyImmunity"].concat(Object(i.a)(Object.keys(v.e))),P=Object.fromEntries(I.map((function(t){return[t,O.getStatValueWithOverride(e,t)]})));for(var V in P.characterEle=O.getElementalKey(K),P.characterKey=K,P.hitMode=T,P.autoInfused=W&&(null===(t=O.getCDataObj(K))||void 0===t||null===(n=t.talent)||void 0===n||null===(r=n.auto)||void 0===r?void 0:r.infusable),P.reactionMode=N,P.talentConditionals=w,P.weaponType=O.getWeaponTypeKey(K),P.tlvl=E,P.constellation=k,P.ascension=D,P.tlvl)P.tlvl[V]+=O.getTalentLevelBoost(e.characterKey,V,k);O.getElementalKeys().forEach((function(t){var n="".concat(t,"_enemyRes_");P[n]=O.getStatValueWithOverride(e,n),n="".concat(t,"_enemyImmunity"),P[n]=O.getStatValueWithOverride(e,n)}));var z=(null===(l=e)||void 0===l?void 0:l.baseStatOverrides)||{};Object.entries(z).forEach((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];"specializedStatKey"!==n&&"specializedStatVal"!==n&&(P.hasOwnProperty(n)||(P[n]=a))}));var F=O.getStatValueWithOverride(e,"specializedStatVal"),M=O.getStatValueWithOverride(e,"specializedStatKey");O.mergeStats(P,Object(a.a)({},M,F)),O.getTalentStatsAll(K,P).forEach((function(e){return O.mergeStats(P,e)}));var B=m.a.getWeaponSubStatKey(null===(o=e)||void 0===o||null===(s=o.weapon)||void 0===s?void 0:s.key);return B&&O.mergeStats(P,Object(a.a)({},B,m.a.getWeaponSubStatValWithOverride(null===(u=e)||void 0===u?void 0:u.weapon))),O.mergeStats(P,m.a.getWeaponBonusStat(null===(d=e)||void 0===d||null===(f=d.weapon)||void 0===f?void 0:f.key,null===(h=e)||void 0===h||null===(j=h.weapon)||void 0===j?void 0:j.refineIndex)),O.mergeStats(P,m.a.getWeaponConditionalStat(null===(b=e)||void 0===b||null===(p=b.weapon)||void 0===p?void 0:p.key,null===(y=e)||void 0===y||null===(x=y.weapon)||void 0===x?void 0:x.refineIndex,null===(L=e)||void 0===L||null===(S=L.weapon)||void 0===S?void 0:S.conditionalNum,{})),w.forEach((function(e){var t=e.srcKey,n=e.srcKey2,a=e.conditionalNum,i=O.getTalentConditional(P,t,n);O.mergeStats(P,O.getTalentConditionalStats(i,a,{}))})),P}},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(2),i=n(21),r=n(132),l=n(57),c=n(3),o=function e(){if(Object(i.a)(this,e),this instanceof e)throw Error("A static class cannot be instantiated.")};o.getWeaponDataImport=function(){return r.c},o.getLevelName=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r.a[e]||t},o.getLevelIndex=function(e){return r.d.indexOf(e)},o.getWeaponName=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===(t=r.b[e])||void 0===t?void 0:t.name)||n},o.getWeaponRarity=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(null===(t=r.b[e])||void 0===t?void 0:t.rarity)||n},o.getWeaponPassiveName=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===(t=r.b[e])||void 0===t?void 0:t.passiveName)||n},o.getWeaponPassiveDescription=function(e,t,n,a){var i,l,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(null===(i=r.b[e])||void 0===i||null===(l=i.passiveDescription)||void 0===l?void 0:l.call(i,t,n,a))||c},o.getWeaponDescription=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===(t=r.b[e])||void 0===t?void 0:t.description)||n},o.getWeaponConditional=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(null===(t=r.b[e])||void 0===t?void 0:t.conditional)||n},o.getWeaponImg=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(null===(t=r.b[e])||void 0===t?void 0:t.img)||n},o.getWeaponMainStatVal=function(e,t){var n,a,i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(null===(n=r.b[e])||void 0===n||null===(a=n.baseStats)||void 0===a||null===(i=a.main)||void 0===i?void 0:i[o.getLevelIndex(t)])||l},o.getWeaponSubStatVal=function(e,t){var n,a,i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(null===(n=r.b[e])||void 0===n||null===(a=n.baseStats)||void 0===a||null===(i=a.sub)||void 0===i?void 0:i[o.getLevelIndex(t)])||l},o.getWeaponSubStatKey=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===(t=r.b[e])||void 0===t||null===(n=t.baseStats)||void 0===n?void 0:n.subStatKey)||a},o.getWeaponBonusStat=function(e,t){var n,a,i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return null!==(n=null===(a=r.b[e])||void 0===a||null===(i=a.stats)||void 0===i?void 0:i.call(a,t))&&void 0!==n?n:l},o.getWeaponsOfType=function(e){return Object.fromEntries(Object.entries(r.b).filter((function(t){var n=Object(a.a)(t,2);n[0];return n[1].weaponType===e})))},o.getWeaponTypeName=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r.e[e]||t},o.getWeaponTypeKeys=function(){return Object.keys(r.e)},o.getWeaponMainStatValWithOverride=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(null===e||void 0===e?void 0:e.overrideMainVal)||o.getWeaponMainStatVal(null===e||void 0===e?void 0:e.key,null===e||void 0===e?void 0:e.levelKey,t)},o.getWeaponSubStatValWithOverride=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(null===e||void 0===e?void 0:e.overrideSubVal)||o.getWeaponSubStatVal(null===e||void 0===e?void 0:e.key,null===e||void 0===e?void 0:e.levelKey,t)},o.getWeaponConditionalStat=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=o.getWeaponConditional(e);if(!r||!n)return i;var s=l.a.getConditionalProp(r,"stats",n),u=Object(a.a)(s,2),d=u[0],v=u[1];return v?(d=d(t),1!==v&&Object(c.k)(d,v),d):i}},126:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(2);var a=n(31),i=n(22);function r(e){var t=new Set;return e(new Proxy({},{get:function(e,n,a){t.add(n)}}),new Proxy({},{get:function(e,n,a){t.add(n)}})),Object(a.a)(t)}var l=Object.freeze(Object.fromEntries(Object.keys(i.b).map((function(e){return[e,r(i.b[e])]}))));function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(i.d),n=new Set;return t.forEach((function(t){return o(t,e,n)})),Object(a.a)(n)}function o(e,t,n){var a,i;n.has(e)||(null===(a=l[e])||void 0===a||a.forEach((function(e){return o(e,t,n)})),Object.keys(null!==(i=t[e])&&void 0!==i?i:{}).forEach((function(e){return o(e,t,n)})),n.add(e))}},128:function(e,t,n){"use strict";var a={elements:{anemo:n.p+"static/media/Element_Anemo.f809fde3.png",cryo:n.p+"static/media/Element_Cryo.019d72f9.png",dendro:n.p+"static/media/Element_Dendro.8ee0f26d.png",electro:n.p+"static/media/Element_Electro.342332ac.png",geo:n.p+"static/media/Element_Geo.b7e865c6.png",hydro:n.p+"static/media/Element_Hydro.f2f8bd8a.png",pyro:n.p+"static/media/Element_Pyro.f65c2e38.png"},weaponTypes:{bow:n.p+"static/media/Weapon-class-bow-icon.b8e7b5ca.png",catalyst:n.p+"static/media/Weapon-class-catalyst-icon.2cbef800.png",claymore:n.p+"static/media/Weapon-class-claymore-icon.17418b20.png",polearm:n.p+"static/media/Weapon-class-polearm-icon.a4e7fffc.png",sword:n.p+"static/media/Weapon-class-sword-icon.4470b487.png"},resin:{fragile:n.p+"static/media/Item_Fragile_Resin.f9ec8223.png",condensed:n.p+"static/media/Item_Condensed_Resin.1cecf64a.png"},exp_books:{advice:n.p+"static/media/Item_Wanderer's_Advice.58c62cf7.png",wit:n.p+"static/media/Item_Hero's_Wit.a79e36d0.png",experience:n.p+"static/media/Item_Adventurer's_Experience.92b5d195.png"}};t.a=a},129:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(31),i=n(24),r=n(29),l=n(1),c=function(){return Object(l.jsx)(r.a,{icon:i.z})},o=function(e){var t=e.stars,n=e.colored,i=void 0!==n&&n;return Object(l.jsx)("span",{className:i?"text-5star":"",children:t?Object(a.a)(Array(t).keys()).map((function(e,t){return Object(l.jsx)(c,{},t)})):null})}},132:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return c}));var a={},i=Promise.all([n.e(0),n.e(22)]).then(n.bind(null,163));i.then((function(e){a=e.default,i=null}));var r=["L1","L5","L10","L15","L20","L20A","L25","L30","L35","L40","L40A","L45","L50","L50A","L55","L60","L60A","L65","L70","L70A","L75","L80","L80A","L85","L90"],l={L1:"Lvl. 1",L5:"Lvl. 5",L10:"Lvl. 10",L15:"Lvl. 15",L20:"Lvl. 20",L20A:"Lvl. 20/40",L25:"Lvl. 25",L30:"Lvl. 30",L35:"Lvl. 35",L40:"Lvl. 40",L40A:"Lvl. 40/50",L45:"Lvl. 45",L50:"Lvl. 50",L50A:"Lvl. 50/60",L55:"Lvl. 55",L60:"Lvl. 60",L60A:"Lvl. 60/70",L65:"Lvl. 65",L70:"Lvl. 70",L70A:"Lvl. 70/80",L75:"Lvl. 75",L80:"Lvl. 80",L80A:"Lvl. 80/90",L85:"Lvl. 85",L90:"Lvl. 90"},c={sword:"Sword",claymore:"Claymore",catalyst:"Catalyst",bow:"Bow",polearm:"Polearm"}},136:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c}));var a={},i=Promise.all([n.e(0),n.e(21)]).then(n.bind(null,162));i.then((function(e){a=e.default,i=null}));var r={L1:{name:"Lv. 1",level:1,asend:0},L20:{name:"Lv. 20",level:20,asend:0},L20A:{name:"Lv. 20/40",level:20,asend:1},L40:{name:"Lv. 40",level:40,asend:1},L40A:{name:"Lv. 40/50",level:40,asend:2},L50:{name:"Lv. 50",level:50,asend:2},L50A:{name:"Lv. 50/60",level:50,asend:3},L60:{name:"Lv. 60",level:60,asend:3},L60A:{name:"Lv. 60/70",level:60,asend:4},L70:{name:"Lv. 70",level:70,asend:4},L70A:{name:"Lv. 70/80",level:70,asend:5},L80:{name:"Lv. 80",level:80,asend:5},L80A:{name:"Lv. 80/90",level:80,asend:6},L90:{name:"Lv. 90",level:90,asend:6}},l={critRate_:5,critDMG_:50,enerRech_:100,stamina:100},c=["hp_","atk_","def_","eleMas","enerRech_","heal_","critRate_","critDMG_","physical_dmg_","anemo_dmg_","geo_dmg_","electro_dmg_","hydro_dmg_","pyro_dmg_","cryo_dmg_"]},137:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(2),i=n(0);function r(){var e=Object(i.useState)(),t=Object(a.a)(e,2)[1];return Object(i.useCallback)((function(){return t({})}),[])}},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(24),i=n(29),r=n(1),l={characterHP:a.C,finalHP:a.C,hp_:a.C,hp:a.C,baseATK:a.k,characterATK:a.k,finalATK:a.k,atk_:a.k,atk:a.k,characterDEF:a.v,finalDEF:a.v,def_:a.v,def:a.v,eleMas:a.q,critRate_:a.f,critDMG_:a.g,enerRech_:a.A,heal_:a.j},c=function(e){return l[e]?Object(r.jsx)(i.a,{icon:l[e],className:"fa-fw"}):null}},172:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(2),i=n(24),r=n(29),l=n(0),c=n(244),o=n(50),s=n(66),u=n(48),d=n(111),v=n(85),f=n(3),h=n(1);function j(e){var t,n,j=e.pageKey,b=void 0===j?"":j,g=e.text,m=void 0===g?"":g,p=e.modalTitle,O=void 0===p?"":p,y=e.children,x=Object(l.useState)(null===(t=null===(n=Object(f.j)("infoShown"))||void 0===n?void 0:n[b])||void 0===t||t),L=Object(a.a)(x,2),S=L[0],_=L[1],K=Object(l.useState)(Array.isArray(m)?Object(f.g)(m):m),C=Object(a.a)(K,1)[0],T=function(){var e,t=null!==(e=Object(f.j)("infoShown"))&&void 0!==e?e:{};t[b]=!1,Object(f.l)("infoShown",t),_(!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(c.a,{show:S,onHide:function(){return T()},size:"xl",variant:"success",contentClassName:"bg-transparent",children:Object(h.jsxs)(o.a,{bg:"darkcontent",text:"lightfont",children:[Object(h.jsx)(o.a.Header,{children:Object(h.jsxs)(s.a,{children:[Object(h.jsx)(u.a,{children:Object(h.jsx)(o.a.Title,{children:O})}),Object(h.jsx)(u.a,{xs:"auto",children:Object(h.jsx)(d.a,{variant:"danger",onClick:function(){return T()},children:Object(h.jsx)(r.a,{icon:i.B})})})]})}),Object(h.jsx)(o.a.Body,{children:Object(h.jsx)(l.Suspense,{fallback:Object(h.jsxs)("h3",{className:"text-center",children:["Loading... ",Object(h.jsx)(v.a,{animation:"border",variant:"primary"})]}),children:y})}),Object(h.jsx)(o.a.Footer,{children:Object(h.jsx)(d.a,{variant:"danger",onClick:function(){return T()},children:Object(h.jsx)("span",{children:"Close"})})})]})}),Object(h.jsx)(o.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:Object(h.jsx)(o.a.Body,{className:"pl-2 py-0 pr-0",children:Object(h.jsxs)(s.a,{children:[Object(h.jsx)(u.a,{children:Object(h.jsx)("small",{children:C})}),Object(h.jsx)(u.a,{xs:"auto",children:Object(h.jsx)(d.a,{size:"sm",variant:"info",className:"m-0 py-1",onClick:function(){return _(!0)},children:Object(h.jsx)(r.a,{icon:i.s})})})]})})})]})}},176:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(31),i=n(2),r=n(24),l=n(29),c=n(0),o=n(155),s=n(142),u=n(111),d=n(50),v=n(48),f=n(66),h=n(26),j=n(58),b=n(128),g=n(129),m=n(138),p=n(47),O=n(122),y=n(109),x=n(14),L=n(137),S=n(1);function _(e){var t,n=e.characterKey,_=e.onEdit,K=e.onDelete,C=e.cardClassName,T=void 0===C?"":C,W=e.bg,N=void 0===W?"":W,E=e.header,k=e.footer,A=Object(L.a)();Object(c.useEffect)((function(){return Promise.all([y.a.getCharacterDataImport(),O.a.getWeaponDataImport(),j.a.getDataImport()]).then(A),n&&x.a.registerCharListener(n,A),function(){return n&&x.a.unregisterCharListener(n,A)}}),[n,A]);var w=x.a.get(n);if(!w)return null;var D=y.a.calculateBuild(w),I=D.setToSlots,P=w.weapon,V=void 0===P?{}:P,z=w.constellation,F=y.a.getName(n),M=y.a.getElementalKey(n),B=y.a.getWeaponTypeKey(n),R=O.a.getWeaponName(V.key),H=O.a.getWeaponMainStatValWithOverride(V),q=O.a.getWeaponSubStatKey(V.key),G=O.a.getWeaponSubStatValWithOverride(V),U=O.a.getLevelName(V.levelKey),Y=O.a.getWeaponPassiveName(V.key);return Object(S.jsxs)(d.a,{className:T,bg:N||"darkcontent",text:"lightfont",children:[Object(S.jsx)(d.a.Header,{className:"pr-2",children:Object(S.jsxs)(f.a,{className:"no-gutters",children:[Object(S.jsx)(v.a,{children:E||Object(S.jsx)("h5",{children:Object(S.jsx)("b",{children:F})})}),Object(S.jsx)(v.a,{xs:"auto",children:Object(S.jsxs)("span",{className:"float-right align-top ml-1",children:[_&&Object(S.jsx)(u.a,{variant:"primary",size:"sm",className:"mr-1",onClick:function(){return _(n)},children:Object(S.jsx)(l.a,{icon:r.h})}),K&&Object(S.jsx)(u.a,{variant:"danger",size:"sm",onClick:function(){return K(n)},children:Object(S.jsx)(l.a,{icon:r.E})})]})})]})}),Object(S.jsxs)(d.a.Body,{onClick:function(){return _(n)},className:_?"cursor-pointer":"",children:[Object(S.jsxs)(f.a,{children:[Object(S.jsx)(v.a,{xs:"auto",className:"pr-0",children:Object(S.jsx)(o.a,{src:y.a.getThumb(n),className:"thumb-big grad-".concat(y.a.getStar(n),"star p-0"),thumbnail:!0})}),Object(S.jsxs)(v.a,{children:[Object(S.jsxs)("h3",{className:"mb-0",children:[y.a.getLevelString(w)," ","C".concat(z)]}),Object(S.jsx)("h5",{className:"mb-0",children:Object(S.jsx)(g.a,{stars:y.a.getStar(n),colored:!0})}),Object(S.jsxs)("h2",{className:"mb-0",children:[Object(S.jsx)(o.a,{src:b.a.elements[M],className:"inline-icon"})," ",Object(S.jsx)(o.a,{src:null===(t=b.a.weaponTypes)||void 0===t?void 0:t[B],className:"inline-icon"})]})]})]}),Object(S.jsx)(f.a,{className:"mb-2",children:Object(S.jsxs)(v.a,{children:[Object(S.jsxs)("h6",{className:"mb-0",children:[R,Y&&"(".concat(V.refineIndex+1,")")," ",U]}),Object(S.jsxs)("span",{children:["ATK: ",H,"  ",Y&&Object(S.jsxs)("span",{children:[p.a.getStatName(q),": ",G,p.a.getStatUnit(q)]})]})]})}),Object(S.jsx)(f.a,{children:Object(S.jsx)(v.a,{children:Object.entries(j.a.getSetEffects(I)).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1],l=j.a.getSetName(n),c=Math.max.apply(Math,Object(a.a)(r));return Object(S.jsx)("h5",{children:Object(S.jsxs)(s.a,{variant:"secondary",children:[l," ",Object(S.jsx)(s.a,{variant:"success",children:c})]})},n)}))})}),Object(S.jsx)(f.a,{children:["finalHP","finalATK","finalDEF","eleMas","critRate_","critDMG_","enerRech_"].map((function(e){var t=p.a.getStatUnit(e),n=D.finalStats[e];return Object(S.jsxs)(v.a,{xs:12,children:[Object(S.jsxs)("h6",{className:"d-inline",children:[Object(m.a)(e)," ",p.a.getStatName(e)]}),Object(S.jsx)("span",{className:"float-right",children:(null===n||void 0===n?void 0:n.toFixed(p.a.fixedUnit(e)))+t})]},e)}))})]}),k&&Object(S.jsx)(d.a.Footer,{children:Object(S.jsx)(u.a,{as:h.b,to:{pathname:"/build",characterKey:n},children:"Generate Builds"})})]})}},238:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return D}));var a=n(2),i=n(24),r=n(29),l=n(0),c=n.n(l),o=n(82),s=n(66),u=n(48),d=n(50),v=n(147),f=n(111),h=n(155),j=n(197),b=n(159),g=n(34),m=n(26),p=n(128),O=n(14),y=n(172),x=n(137),L=n(3),S=n(122),_=n(109),K=n(176),C=n(1),T=c.a.lazy((function(){return n.e(24).then(n.bind(null,233))})),W=Promise.all([n.e(0),n.e(1),n.e(2),n.e(15)]).then(n.bind(null,179)),N=Object(l.lazy)((function(){return W})),E={level:"Level",rarity:"Rarity",name:"Name"},k=function(e){return _.a.getLevel(O.a.get(e).levelKey)},A=function(e){return _.a.getStar(e)};function w(e,t){return t===e?"":t}function D(e){var t=Object(l.useState)(""),n=Object(a.a)(t,2),m=n[0],W=n[1],D=Object(l.useState)((function(){return Object.keys(E)[0]})),P=Object(a.a)(D,2),V=P[0],z=P[1],F=Object(l.useReducer)(w,""),M=Object(a.a)(F,2),B=M[0],R=M[1],H=Object(l.useReducer)(w,""),q=Object(a.a)(H,2),G=q[0],U=q[1],Y=Object(l.useState)(!1),J=Object(a.a)(Y,2),Q=J[0],X=J[1],Z=Object(x.a)(),$=Object(l.useRef)(null);Object(l.useEffect)((function(){var e;g.a.pageview("/character");var t=Object(L.j)("CharacterDisplay.state");if(t){var n=t.charIdToEdit,a=t.sortBy,i=t.elementalFilter,r=t.weaponFilter;W(n),z(a),_.a.getElementalKeysWithoutPhysical().includes(i)&&R(i),S.a.getWeaponTypeKeys().includes(r)&&U(r)}return null===(e=_.a.getCharacterDataImport())||void 0===e||e.then(Z),O.a.registerListener(Z),function(){return O.a.unregisterListener(Z)}}),[Z]),Object(l.useEffect)((function(){var e={charIdToEdit:m,sortBy:V,elementalFilter:B,weaponFilter:G};Object(L.l)("CharacterDisplay.state",e)}),[m,V,B,G]);var ee=Object(l.useCallback)((function(e){window.confirm("Are you sure you want to remove ".concat(_.a.getName(e),"?"))&&(_.a.remove(e),m===e&&W(""))}),[m,W]),te=Object(l.useCallback)((function(e){W(e),setTimeout((function(){var e;null===(e=$.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)}),[W,$]),ne=Object(l.useCallback)((function(){W(""),X(!1)}),[W]),ae=O.a.getCharacterKeyList().filter((function(e){return(!B||B===_.a.getElementalKey(e))&&(!G||G===_.a.getWeaponTypeKey(e))})).sort((function(e,t){if("name"===V)return e<t?-1:e>t?1:0;if("level"===V){var n=k(t)-k(e);return n||A(t)-A(e)}var a=A(t)-A(e);return a||k(t)-k(e)})),ie=Boolean(m||Q);return Object(C.jsxs)(o.a,{ref:$,className:"mt-2",children:[Object(C.jsx)(y.a,{pageKey:"characterPage",modalTitle:"Character Management Page Guide",text:["Every character will be tested with in-game numbers for maximum accuracy.","You can see the details of the calculations of every number.","You need to manually enable auto infusion for characters like Choungyun or Noelle.",'You can change character constellations in both "Character" tab and in "Talents" tab.',"Modified character Stats show up in yellow."],children:Object(C.jsx)(T,{})}),ie?Object(C.jsx)(s.a,{className:"mt-2",children:Object(C.jsx)(u.a,{children:Object(C.jsx)(c.a.Suspense,{fallback:Object(C.jsx)("span",{children:"Loading..."}),children:Object(C.jsx)(N,{editable:!0,setCharacterKey:te,characterKey:m,onClose:ne,footer:Object(C.jsx)(I,{onClose:ne,characterKey:m})})})})}):null,Object(C.jsx)(d.a,{bg:"darkcontent",text:"lightfont",className:"mt-2",children:Object(C.jsx)(d.a.Body,{className:"p-2",children:Object(C.jsxs)(s.a,{children:[Object(C.jsx)(u.a,{xs:"auto",children:Object(C.jsx)(v.a,{children:_.a.getElementalKeysWithoutPhysical().map((function(e){var t;return Object(C.jsx)(f.a,{variant:B&&B!==e?"primary":"success",className:"py-1 px-2",onClick:function(){return R(e)},children:Object(C.jsx)("h4",{className:"mb-0",children:Object(C.jsx)(h.a,{src:null===(t=p.a.elements)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(C.jsx)(u.a,{children:Object(C.jsx)(v.a,{children:S.a.getWeaponTypeKeys().map((function(e){var t;return Object(C.jsx)(f.a,{variant:G&&G!==e?"primary":"success",className:"py-1 px-2",onClick:function(){return U(e)},children:Object(C.jsx)("h4",{className:"mb-0",children:Object(C.jsx)(h.a,{src:null===(t=p.a.weaponTypes)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(C.jsxs)(u.a,{xs:"auto",children:[Object(C.jsx)("span",{children:"Sort by: "}),Object(C.jsx)(j.a,{type:"radio",name:"level",value:V,onChange:z,children:Object.entries(E).map((function(e){var t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(C.jsx)(b.a,{value:n,variant:V===n?"success":"primary",children:i},n)}))})]})]})})}),Object(C.jsxs)(s.a,{className:"mt-2",children:[!ie&&Object(C.jsx)(u.a,{lg:4,md:6,className:"mb-2",children:Object(C.jsxs)(d.a,{className:"h-100",bg:"darkcontent",text:"lightfont",children:[Object(C.jsx)(d.a.Header,{className:"pr-2",children:Object(C.jsx)("span",{children:"Add New Character"})}),Object(C.jsx)(d.a.Body,{className:"d-flex flex-column justify-content-center",children:Object(C.jsx)(s.a,{className:"d-flex flex-row justify-content-center",children:Object(C.jsx)(u.a,{xs:"auto",children:Object(C.jsx)(f.a,{onClick:function(){return X(!0)},children:Object(C.jsx)("h1",{children:Object(C.jsx)(r.a,{icon:i.r,className:"fa-fw"})})})})})})]})}),ae.map((function(e){return Object(C.jsx)(u.a,{lg:4,md:6,className:"mb-2",children:Object(C.jsx)(K.a,{cardClassName:"h-100",characterKey:e,onDelete:ee,onEdit:te,footer:!0})},e)}))]})]})}function I(e){var t=e.onClose,n=e.characterKey;return Object(C.jsxs)(s.a,{children:[Object(C.jsx)(u.a,{children:Object(C.jsxs)(f.a,{variant:"info",as:m.b,to:{pathname:"/flex",characterKey:n},children:[Object(C.jsx)(r.a,{icon:i.n})," Share Character"]})}),Object(C.jsx)(u.a,{xs:"auto",children:Object(C.jsx)(f.a,{variant:"danger",onClick:t,children:"Close"})})]})}}}]);
//# sourceMappingURL=18.2a20ebf3.chunk.js.map