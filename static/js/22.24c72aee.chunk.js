(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[22],{213:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return j}));var n=a(2),c=a(188),r=a(59),s=a(15),i=a(11),l=a(1);function o(e,t){var a=t.characterSheet,r=t.weaponSheet,s=t.artifactSheets,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"anemo";if("basicKeys"===e)return"Basic Stats";if("genericAvgHit"===e)return"Generic Optimization Values";if("transReactions"===e)return"Transformation Reaction";if(e.startsWith("talentKey_")){var o,j,u=e.split("talentKey_")[1];return null!==(o=null===a||void 0===a||null===(j=a.getTalentOfKey(u,i))||void 0===j?void 0:j.name)&&void 0!==o?o:u}if(e.startsWith("weapon_")){var d,b=e.split("weapon_")[1];return null!==(d=null===r||void 0===r?void 0:r.name)&&void 0!==d?d:b}if(e.startsWith("artifact_")){var h,O=e.split("_"),x=Object(n.a)(O,3),m=x[1],v=x[2];return Object(l.jsxs)("span",{children:[null===(h=s[m])||void 0===h?void 0:h.name," ",Object(l.jsxs)(c.a,{variant:"success",children:[v,"-Set"]})]})}return""}function j(e){return{key:e,level:1,ascension:0,hitMode:"avgHit",reactionMode:null,equippedArtifacts:Object(i.o)(s.h,(function(){return""})),equippedWeapon:"",conditionalValues:{},bonusStats:{},buildSettings:Object(r.a)(),talent:{auto:1,skill:1,burst:1},infusionAura:"",constellation:0}}},238:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var n=a(12),c=a(2),r=a(29),s=a(10),i=a(0),l=a(142),o=a(188),j=a(118),u=a(187),d=a(70),b=a(121),h=a(41),O=a(112),x=a(203),m=a(202),v=a(115),f=a(45),p=a(111),y=a(33),g=a(114),N=a(204),C=a(113),w=a(1);function k(e){var t,a=e.characterKey,k=e.onEdit,S=e.onDelete,K=e.cardClassName,T=void 0===K?"":K,_=e.bg,E=void 0===_?"":_,A=e.header,B=e.footer,M=void 0!==B&&B,F=Object(i.useContext)(f.b),W=Object(i.useState)(void 0),R=Object(c.a)(W,2),z=R[0],D=R[1];Object(i.useEffect)((function(){return a?F.followChar(a,D):void 0}),[a,D,F]);var G=Object(p.a)(O.a.getAll(),[]),H=z,L=Object(p.a)(C.b.get(a),[a]),U=(null===H||void 0===H?void 0:H.equippedWeapon)?F._getWeapon(H.equippedWeapon):void 0,V=Object(p.a)(U?g.a.get(U.key):void 0,[null===U||void 0===U?void 0:U.key]),q=Object(i.useMemo)((function(){return H&&L&&V&&G&&N.a.calculateBuild(H,F,L,V,G)}),[H,L,V,G,F]);if(!H||!U||!L||!V||!q)return null;var P=H.constellation,Y=U.level,I=U.ascension,J=q.tlvl,Q=L.name,X=q.characterEle,Z=L.weaponTypeKey,$=null===V||void 0===V?void 0:V.name,ee=V.getMainStatValue(Y,I).toFixed(y.b.fixedUnit("atk")),te=V.getSubStatKey(),ae=V.getSubStatValue(Y,I).toFixed(y.b.fixedUnit(te)),ne=g.a.getLevelString(U),ce=null===V||void 0===V?void 0:V.passiveName;return Object(w.jsxs)(u.a,{className:T,bg:E||"darkcontent",text:"lightfont",children:[Object(w.jsx)(u.a.Header,{className:"pr-2",children:Object(w.jsxs)(b.a,{className:"no-gutters",children:[Object(w.jsx)(d.a,{children:A||Object(w.jsx)("h5",{children:Object(w.jsx)("b",{children:Q})})}),Object(w.jsx)(d.a,{xs:"auto",children:Object(w.jsxs)("span",{className:"float-right align-top ml-1",children:[k&&Object(w.jsx)(j.a,{variant:"primary",size:"sm",className:"mr-1",onClick:function(){return k(a)},children:Object(w.jsx)(s.a,{icon:r.l})}),S&&Object(w.jsx)(j.a,{variant:"danger",size:"sm",onClick:function(){return S(a)},children:Object(w.jsx)(s.a,{icon:r.G})})]})})]})}),Object(w.jsxs)(u.a.Body,{onClick:function(){return null===k||void 0===k?void 0:k(a)},className:k?"cursor-pointer":"",children:[Object(w.jsxs)(b.a,{children:[Object(w.jsx)(d.a,{xs:"auto",className:"pr-0",children:Object(w.jsx)(l.a,{src:L.thumbImg,className:"thumb-big grad-".concat(L.star,"star p-0"),thumbnail:!0})}),Object(w.jsxs)(d.a,{children:[Object(w.jsxs)("h5",{className:"mb-0",children:["Lv. ",N.a.getLevelString(H)," ","C".concat(P)]}),Object(w.jsxs)("h6",{className:"mb-0",children:[Object(w.jsx)(o.a,{variant:"secondary",children:Object(w.jsx)("strong",{className:"mx-1",children:J.auto+1})})," ",Object(w.jsx)(o.a,{variant:"secondary",children:Object(w.jsx)("strong",{className:"mx-1",children:J.skill+1})})," ",Object(w.jsx)(o.a,{variant:"secondary",children:Object(w.jsx)("strong",{className:"mx-1",children:J.burst+1})})]}),Object(w.jsx)("h6",{className:"mb-0",children:Object(w.jsx)(m.a,{stars:L.star,colored:!0})}),Object(w.jsxs)("h3",{className:"mb-0",children:[v.a[X]," ",Object(w.jsx)(l.a,{src:null===(t=x.a.weaponTypes)||void 0===t?void 0:t[Z],className:"inline-icon"})]})]})]}),Object(w.jsx)(b.a,{className:"mb-2",children:Object(w.jsxs)(d.a,{children:[Object(w.jsxs)("h6",{className:"mb-0",children:[$,ce&&Object(w.jsx)(o.a,{variant:"info",className:"ml-1",children:U.refinement})," ",ne]}),Object(w.jsxs)("span",{children:["ATK: ",ee,"  ",ce&&Object(w.jsxs)("span",{children:[y.b.getStatName(te),": ",ae,y.b.getStatUnit(te)]})]})]})}),Object(w.jsx)(b.a,{children:Object(w.jsx)(d.a,{children:G&&Object.entries(O.a.setEffects(G,q.setToSlots)).map((function(e){var t,a=Object(c.a)(e,2),r=a[0],s=a[1],i=null!==(t=null===G||void 0===G?void 0:G[r].name)&&void 0!==t?t:"",l=Math.max.apply(Math,Object(n.a)(s));return Object(w.jsx)("h5",{children:Object(w.jsxs)(o.a,{variant:"secondary",children:[i," ",Object(w.jsx)(o.a,{variant:"success",children:l})]})},r)}))})}),Object(w.jsx)(b.a,{children:["finalHP","finalATK","finalDEF","eleMas","critRate_","critDMG_","enerRech_"].map((function(e){var t=y.b.getStatUnit(e),a=q[e];return Object(w.jsxs)(d.a,{xs:12,children:[Object(w.jsxs)("h6",{className:"d-inline",children:[v.a[e]," ",y.b.getStatName(e)]}),Object(w.jsx)("span",{className:"float-right",children:(null===a||void 0===a?void 0:a.toFixed(y.b.fixedUnit(e)))+t})]},e)}))})]}),M&&Object(w.jsx)(u.a.Footer,{children:Object(w.jsxs)(b.a,{children:[Object(w.jsx)(d.a,{children:Object(w.jsxs)(j.a,{as:h.b,to:{pathname:"/build",characterKey:a},children:[Object(w.jsx)(s.a,{icon:r.d})," Generate Builds"]})}),Object(w.jsx)(d.a,{children:Object(w.jsxs)(j.a,{variant:"info",as:h.b,to:{pathname:"/flex",characterKey:a},children:[Object(w.jsx)(s.a,{icon:r.t})," Share Character"]})})]})})]})}},546:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return L}));var n=a(46),c=a.n(n),r=a(57),s=a(2),i=a(29),l=a(10),o=a(103),j=a(0),u=a.n(j),d=a(189),b=a(121),h=a(70),O=a(187),x=a(197),m=a(226),v=a(118),f=a(142),p=a(544),y=a(336),g=a(48),N=a(41),C=a(203),w=a(234),k=a(115),S=a(45),K=a(34),T=a(117),_=a(111),E=a(15),A=a(119),B=a(238),M=a(206),F=a(113),W=a(213),R=a(1),z=u.a.lazy((function(){return a.e(25).then(a.bind(null,542))})),D=Object(j.lazy)((function(){return Promise.all([a.e(4),a.e(2),a.e(3)]).then(a.bind(null,275))})),G={level:"Level",rarity:"Rarity",name:"Name"};function H(e,t){return t===e?"":t}function L(e){var t,a=Object(j.useContext)(S.b),n=Object(j.useState)(""),N=Object(s.a)(n,2),L=N[0],V=N[1],q=Object(j.useState)((function(){return Object.keys(G)[0]})),P=Object(s.a)(q,2),Y=P[0],I=P[1],J=Object(j.useReducer)(H,""),Q=Object(s.a)(J,2),X=Q[0],Z=Q[1],$=Object(j.useReducer)(H,""),ee=Object(s.a)($,2),te=ee[0],ae=ee[1],ne=Object(j.useState)(!1),ce=Object(s.a)(ne,2),re=ce[0],se=ce[1],ie=Object(T.a)(),le=Object(s.a)(ie,2)[1],oe=Object(j.useRef)(null);Object(j.useEffect)((function(){g.a.pageview("/character");var e=K.b.get("CharacterDisplay.state");if(e){var t=e.characterKeyToEdit,n=e.sortBy,c=e.elementalFilter,r=e.weaponFilter;t&&V(t),n&&I(n),E.d.includes(c)&&Z(c),E.j.includes(r)&&ae(r)}return a.followAnyChar(le)}),[le,a]);var je=null!==(t=Object(_.a)(F.b.getAll(),[]))&&void 0!==t?t:{},ue=function(e){var t,n;return null!==(t=null===(n=a._getChar(e))||void 0===n?void 0:n.level)&&void 0!==t?t:0},de=function(e){var t;return null===(t=je[e])||void 0===t?void 0:t.star};Object(j.useEffect)((function(){var e={characterKeyToEdit:L,sortBy:Y,elementalFilter:X,weaponFilter:te};K.b.set("CharacterDisplay.state",e)}),[L,Y,X,te]);var be=Object(j.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.b.get(t);case 2:if(n=e.sent,"object"===typeof(r=null===n||void 0===n?void 0:n.name)&&(r=o.a.t("char_".concat(t,"_gen:name"))),window.confirm("Are you sure you want to remove ".concat(r,"?"))){e.next=7;break}return e.abrupt("return");case 7:a.removeChar(t),L===t&&V("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[L,V,a]),he=Object(j.useCallback)((function(e){a._getChar(e)?V(e):Object(r.a)(c.a.mark((function t(){var n,r,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(W.b)(e),a.updateChar(n),t.next=4,F.b.get(e);case 4:if(r=t.sent){t.next=7;break}return t.abrupt("return");case 7:s=Object(A.a)(r.weaponTypeKey),i=a.createWeapon(s),a.setWeaponLocation(i,e),V(e);case 11:case"end":return t.stop()}}),t)})))(),setTimeout((function(){var e;null===(e=oe.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)}),[V,oe,a]),Oe=Object(j.useCallback)((function(){V(""),se(!1)}),[V]),xe=a._getCharKeys().filter((function(e){var t,a;return(!X||X===(null===(t=je[e])||void 0===t?void 0:t.elementKey))&&(!te||te===(null===(a=je[e])||void 0===a?void 0:a.weaponTypeKey))})).sort((function(e,t){if("name"===Y)return e<t?-1:e>t?1:0;if("level"===Y){var a=ue(t)-ue(e);return a||de(t)-de(e)}var n=de(t)-de(e);return n||ue(t)-ue(e)}));return Object(R.jsxs)(d.a,{ref:oe,className:"mt-2",children:[Object(R.jsx)(w.a,{pageKey:"characterPage",modalTitle:"Character Management Page Guide",text:["Every character will be tested with in-game numbers for maximum accuracy.","You can see the details of the calculations of every number.","You need to manually enable auto infusion for characters like Choungyun or Noelle.",'You can change character constellations in both "Character" tab and in "Talents" tab.',"Modified character Stats show up in yellow."],children:Object(R.jsx)(z,{})}),L?Object(R.jsx)(b.a,{className:"mt-2",children:Object(R.jsx)(h.a,{children:Object(R.jsx)(u.a.Suspense,{fallback:Object(R.jsx)(O.a,{bg:"darkcontent",text:"lightfont",children:Object(R.jsx)(O.a.Body,{children:Object(R.jsxs)("h3",{className:"text-center",children:["Loading... ",Object(R.jsx)(x.a,{animation:"border",variant:"primary"})]})})}),children:Object(R.jsx)(D,{setCharacterKey:he,characterKey:L,onClose:Oe,footer:Object(R.jsx)(U,{onClose:Oe,characterKey:L})})})})}):null,Object(R.jsx)(O.a,{bg:"darkcontent",text:"lightfont",className:"mt-2",children:Object(R.jsx)(O.a.Body,{className:"p-2",children:Object(R.jsxs)(b.a,{children:[Object(R.jsx)(h.a,{xs:"auto",children:Object(R.jsx)(m.a,{children:E.d.map((function(e){return Object(R.jsx)(v.a,{variant:X&&X!==e?"secondary":e,className:"py-1 px-2 text-white",onClick:function(){return Z(e)},children:Object(R.jsx)("h3",{className:"mb-0",children:k.b[e]})},e)}))})}),Object(R.jsx)(h.a,{children:Object(R.jsx)(m.a,{children:E.j.map((function(e){var t;return Object(R.jsx)(v.a,{variant:te&&te!==e?"secondary":"success",className:"py-1 px-2",onClick:function(){return ae(e)},children:Object(R.jsx)("h3",{className:"mb-0",children:Object(R.jsx)(f.a,{src:null===(t=C.a.weaponTypes)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(R.jsxs)(h.a,{xs:"auto",children:[Object(R.jsx)("span",{children:"Sort by: "}),Object(R.jsx)(p.a,{type:"radio",name:"level",value:Y,onChange:I,children:Object.entries(G).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(R.jsx)(y.a,{value:a,variant:Y===a?"success":"primary",children:Object(R.jsx)("h6",{className:"mb-0",children:n})},a)}))})]})]})})}),Object(R.jsxs)(b.a,{className:"mt-2",children:[!L&&Object(R.jsx)(h.a,{lg:4,md:6,className:"mb-2",children:Object(R.jsxs)(O.a,{className:"h-100",bg:"darkcontent",text:"lightfont",children:[Object(R.jsx)(O.a.Header,{className:"pr-2",children:Object(R.jsx)("span",{children:"Add New Character"})}),Object(R.jsx)(O.a.Body,{className:"d-flex flex-column justify-content-center",children:Object(R.jsx)(b.a,{className:"d-flex flex-row justify-content-center",children:Object(R.jsxs)(h.a,{xs:"auto",children:[Object(R.jsx)(v.a,{onClick:function(){return se(!0)},children:Object(R.jsx)("h1",{children:Object(R.jsx)(l.a,{icon:i.w,className:"fa-fw"})})}),Object(R.jsx)(M.c,{show:re,onHide:function(){return se(!1)},onSelect:he})]})})})]})}),xe.map((function(e){return Object(R.jsx)(h.a,{lg:4,md:6,className:"mb-2",children:Object(R.jsx)(B.a,{header:void 0,cardClassName:"h-100",characterKey:e,onDelete:be,onEdit:he,footer:!0})},e)}))]})]})}function U(e){var t=e.onClose,a=e.characterKey;return Object(R.jsxs)(b.a,{children:[Object(R.jsx)(h.a,{xs:"auto",children:Object(R.jsxs)(v.a,{as:N.b,to:{pathname:"/build",characterKey:a},children:[Object(R.jsx)(l.a,{icon:i.d})," Generate Builds"]})}),Object(R.jsx)(h.a,{children:Object(R.jsxs)(v.a,{variant:"info",as:N.b,to:{pathname:"/flex",characterKey:a},children:[Object(R.jsx)(l.a,{icon:i.t})," Share Character"]})}),Object(R.jsx)(h.a,{xs:"auto",children:Object(R.jsx)(v.a,{variant:"danger",onClick:t,children:"Close"})})]})}}}]);
//# sourceMappingURL=22.24c72aee.chunk.js.map