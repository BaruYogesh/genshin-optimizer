"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[866],{21977:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(29439),i=t(57621),a=t(10889),s=t(72791),l=t(60393),c=t(10600),o=t(80184);function u(e){var n=e.levelLow,t=e.levelHigh,u=e.setLow,d=e.setHigh,x=e.setBoth,h=e.dark,f=void 0!==h&&h,p=e.disabled,m=void 0!==p&&p,j=e.showLevelText,Z=void 0!==j&&j,v=(0,s.useState)(n),g=(0,r.Z)(v,2),y=g[0],b=g[1],w=(0,s.useState)(t),C=(0,r.Z)(w,2),k=C[0],S=C[1],P=(0,s.useCallback)((function(e,n){if("number"==typeof n)throw new TypeError;var t=(0,r.Z)(n,2),i=t[0],a=t[1];b(i),S(a)}),[b,S]);return(0,s.useEffect)((function(){return b(n)}),[b,n]),(0,s.useEffect)((function(){return S(t)}),[S,t]),(0,o.jsxs)(i.Z,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:f?"contentDark.main":"contentLight.main"},children:[(0,o.jsx)(c.ZP,{value:y,onChange:function(e){return u((0,l.uZ)(e,0,t))},sx:{px:1,pl:Z?2:void 0,width:Z?100:50},inputProps:{sx:{textAlign:"center"}},startAdornment:Z?"Level: ":void 0,disabled:m}),(0,o.jsx)(a.ZP,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:function(){return"Arifact Level Range"},value:[y,k],onChange:P,onChangeCommitted:function(e,n){return x(n[0],n[1])},valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:m}),(0,o.jsx)(c.ZP,{value:k,onChange:function(e){return d((0,l.uZ)(e,n,20))},sx:{px:1,width:50},inputProps:{sx:{textAlign:"center"}},disabled:m})]})}},18726:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(20890),i=t(52791),a=t(80184);function s(e){var n=e.avatar,t=e.title,s=e.action;return(0,a.jsxs)(i.Z,{display:"flex",gap:1,p:2,alignItems:"center",children:[n,(0,a.jsx)(r.Z,{variant:"subtitle1",sx:{flexGrow:1},children:t}),s&&(0,a.jsx)(r.Z,{variant:"caption",children:s})]})}},37503:function(e,n,t){t.d(n,{X:function(){return M},Z:function(){return R}});var r=t(68870),i=t(20890),a=t(94721),s=t(72791),l=t(13746),c=t(60393),o=t(3992),u=t(18726),d=t(39504),x=t(88034),h=t(29439),f=t(72247),p=t(9912),m=t(24518),j=t(23786),Z=t(2199),v=t(97714),g=t(33890),y=t(25617),b=t(66624),w=t(80184);function C(e){var n=e.conditional,t=e.disabled,r=void 0!==t&&t;return 1===Object.keys(n.states).length&&"path"in n?(0,w.jsx)(k,{conditional:n,disabled:r}):"path"in n?(0,w.jsx)(S,{conditional:n,disabled:r}):(0,w.jsx)(P,{conditional:n,disabled:r})}function k(e){var n=e.conditional,t=e.disabled,r=(0,s.useContext)(v.K),i=r.character,a=r.characterDispatch,o=(0,s.useContext)(l.R).data,u=(0,s.useCallback)((function(e){var t=(0,c.I8)(i.conditional);e?(0,c.SR)(t,n.path,e):(0,c.uH)(t,n.path),a({conditional:t})}),[n,i,a]),d=o.get(n.value).value,x=(0,h.Z)(Object.entries(n.states)[0],2),j=x[0],Z=E(x[1].name),g=K(n.name);return(0,w.jsxs)(m.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:d?"success":"primary",onClick:function(){return u(d?void 0:j)},disabled:t,startIcon:d?(0,w.jsx)(f.Z,{}):(0,w.jsx)(p.Z,{}),children:[g," ",Z]})}function S(e){var n=e.conditional,t=e.disabled,r=(0,s.useContext)(v.K),i=r.character,o=r.characterDispatch,u=(0,s.useContext)(l.R).data,d=(0,s.useCallback)((function(e){var t=(0,c.I8)(i.conditional);e?(0,c.SR)(t,n.path,e):(0,c.uH)(t,n.path),o({conditional:t})}),[n,i,o]),x=u.get(n.value).value,f=x?n.states[x]:void 0,p=f?E(f.name):(0,w.jsx)(y.Z,{color:"secondary",children:"Not Active"}),m=K(n.name);return(0,w.jsxs)(g.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:x?"success":"primary",title:(0,w.jsxs)("span",{children:[m," ",p]}),disabled:t,children:[(0,w.jsx)(j.Z,{onClick:function(){return d()},selected:!f,disabled:!f,children:(0,w.jsx)("span",{children:"Not Active"})}),(0,w.jsx)(a.Z,{}),Object.entries(n.states).map((function(e){var n=(0,h.Z)(e,2),t=n[0],r=n[1];return(0,w.jsx)(j.Z,{onClick:function(){return d(t)},selected:x===t,disabled:x===t,children:r.name},t)}))]})}function P(e){var n=e.conditional,t=e.disabled,r=(0,s.useContext)(v.K),i=r.character,a=r.characterDispatch,o=(0,s.useContext)(l.R).data,u=(0,s.useCallback)((function(e,n){var t=(0,c.I8)(i.conditional);n?(0,c.SR)(t,e,n):(0,c.uH)(t,e),a({conditional:t})}),[i,a]);return(0,w.jsx)(Z.Z,{fullWidth:!0,orientation:"vertical",disableElevation:!0,color:"secondary",children:Object.entries(n.states).map((function(e){var n=(0,h.Z)(e,2),r=n[0],i=n[1],a=o.get(i.value).value,s=a===r;return(0,w.jsx)(m.Z,{color:s?"success":"primary",disabled:t,fullWidth:!0,onClick:function(){return u(i.path,a?void 0:r)},size:"small",startIcon:s?(0,w.jsx)(f.Z,{}):(0,w.jsx)(p.Z,{}),sx:{borderRadius:0},children:K(i.name)},r)}))})}function O(e){return"string"!==typeof e}function E(e){if(!e)return"";var n="primary",t=e;return e&&O(e)&&e.props.color&&(n=e.props.color,t=(0,w.jsx)("span",{children:e.props.children})),(0,w.jsx)(y.Z,{sx:{ml:.5},color:n,children:t})}function K(e){if(O(e)){var n=e.props.key18,t=e.props.ns,r=e.props.values;return(0,w.jsx)(b.v,{ns:t,key18:n,values:r,useBadge:!0})}return e}function _(e){var n,t=e.conditional,r=e.hideHeader,i=void 0!==r&&r,a=e.hideDesc,u=void 0!==a&&a,h=(0,s.useContext)(l.R).data;if("path"in t){var f,p=h.get(t.value).value;n=p&&(null===(f=t.states[p])||void 0===f?void 0:f.fields)}else n=Object.values(t.states).flatMap((function(e){return h.get(e.value).value?e.fields:[]}));return(0,w.jsxs)(o.Z,{children:[!(0,c.mY)(i,t)&&(0,w.jsx)(M,{header:t.header,hideDesc:u}),(0,w.jsx)(d.Z,{sx:{p:0,"&:last-child":{pb:0}},children:(0,w.jsx)(C,{conditional:t})}),n&&(0,w.jsx)(x.ZP,{fields:n})]})}var D=t(55221);function R(e){var n=e.sections,t=e.teamBuffOnly,i=e.hideDesc,a=void 0!==i&&i,c=e.hideHeader,o=void 0!==c&&c,u=(0,s.useContext)(l.R).data;if(!n.length)return null;var d=n.map((function(e,n){return e.canShow&&!u.get(e.canShow).value||t&&!e.teamBuff?null:(0,w.jsx)(A,{section:e,hideDesc:a,hideHeader:o},n)})).filter((function(e){return e}));return d.length?(0,w.jsx)(r.Z,{display:"flex",flexDirection:"column",gap:1,children:d}):null}function A(e){var n=e.section,t=e.hideDesc,r=void 0!==t&&t,i=e.hideHeader,a=void 0!==i&&i;return"fields"in n?(0,w.jsx)(I,{section:n,hideDesc:r,hideHeader:a}):"states"in n?(0,w.jsx)(_,{conditional:n,hideDesc:r,hideHeader:a}):(0,w.jsx)(z,{section:n})}function I(e){var n=e.section,t=e.hideDesc,r=e.hideHeader;return(0,w.jsxs)(o.Z,{children:[!(0,c.mY)(r,n)&&n.header&&(0,w.jsx)(M,{header:n.header,hideDesc:t,hideDivider:0===n.fields.length}),(0,w.jsx)(x.ZP,{fields:n.fields})]})}function z(e){var n=e.section,t=(0,s.useContext)(l.R).data;return(0,w.jsx)("div",{children:(0,c.mY)(n.text,t)})}function M(e){var n=e.header,t=e.hideDesc,r=e.hideDivider,o=(0,s.useContext)(l.R).data,d=n.icon,x=n.title,h=n.action;d=(0,c.mY)(d,o);var f=!t&&(0,c.mY)(n.description,o),p=t?x:(0,w.jsxs)("span",{children:[x," ",(0,w.jsx)(D.Z,{title:(0,w.jsx)(i.Z,{children:f})})]});return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z,{avatar:d,title:p,action:h}),!r&&(0,w.jsx)(a.Z,{})]})}},92443:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(1413),i=t(45987),a=t(66934),s=t(24518),l=t(80184),c=["children","disabled"],o=(0,a.ZP)(s.Z)((function(e){var n=e.theme;return{"&.Mui-disabled":{backgroundColor:n.palette.primary.dark,color:n.palette.text.secondary}}}));function u(e){var n=e.children,t=(e.disabled,(0,i.Z)(e,c));return(0,l.jsx)(o,(0,r.Z)((0,r.Z)({},t),{},{disabled:!0,children:n}))}},21206:function(e,n,t){t.d(n,{WC:function(){return Z},KX:function(){return g},SJ:function(){return v},r:function(){return P},Zu:function(){return y},xm:function(){return w},L1:function(){return S},_d:function(){return p},q8:function(){return k},qp:function(){return b},s_:function(){return C}});var r=t(4942),i=t(1413),a=t(93433),s=t(26138),l=t(73036),c=t(50609),o=t(78661),u=t(50765),d=t(60393),x=JSON.parse('{"GROW_CURVE_HP_S4":{"1":1,"2":1.083,"3":1.165,"4":1.248,"5":1.33,"6":1.413,"7":1.495,"8":1.578,"9":1.661,"10":1.743,"11":1.826,"12":1.908,"13":1.991,"14":2.073,"15":2.156,"16":2.239,"17":2.321,"18":2.404,"19":2.486,"20":2.569,"21":2.651,"22":2.734,"23":2.817,"24":2.899,"25":2.982,"26":3.064,"27":3.147,"28":3.229,"29":3.312,"30":3.394,"31":3.477,"32":3.56,"33":3.642,"34":3.725,"35":3.807,"36":3.89,"37":3.972,"38":4.055,"39":4.138,"40":4.22,"41":4.303,"42":4.385,"43":4.468,"44":4.55,"45":4.633,"46":4.716,"47":4.798,"48":4.881,"49":4.963,"50":5.046,"51":5.128,"52":5.211,"53":5.294,"54":5.376,"55":5.459,"56":5.541,"57":5.624,"58":5.706,"59":5.789,"60":5.872,"61":5.954,"62":6.037,"63":6.119,"64":6.202,"65":6.284,"66":6.367,"67":6.45,"68":6.532,"69":6.615,"70":6.697,"71":6.78,"72":6.862,"73":6.945,"74":7.028,"75":7.11,"76":7.193,"77":7.275,"78":7.358,"79":7.44,"80":7.523,"81":7.606,"82":7.688,"83":7.771,"84":7.853,"85":7.936,"86":8.018,"87":8.101,"88":8.183,"89":8.266,"90":8.349,"91":8.431,"92":8.514,"93":8.596,"94":8.679,"95":8.761,"96":8.844,"97":8.927,"98":9.009,"99":9.092,"100":9.174},"GROW_CURVE_ATTACK_S4":{"1":1,"2":1.083,"3":1.165,"4":1.248,"5":1.33,"6":1.413,"7":1.495,"8":1.578,"9":1.661,"10":1.743,"11":1.826,"12":1.908,"13":1.991,"14":2.073,"15":2.156,"16":2.239,"17":2.321,"18":2.404,"19":2.486,"20":2.569,"21":2.651,"22":2.734,"23":2.817,"24":2.899,"25":2.982,"26":3.064,"27":3.147,"28":3.229,"29":3.312,"30":3.394,"31":3.477,"32":3.56,"33":3.642,"34":3.725,"35":3.807,"36":3.89,"37":3.972,"38":4.055,"39":4.138,"40":4.22,"41":4.303,"42":4.385,"43":4.468,"44":4.55,"45":4.633,"46":4.716,"47":4.798,"48":4.881,"49":4.963,"50":5.046,"51":5.128,"52":5.211,"53":5.294,"54":5.376,"55":5.459,"56":5.541,"57":5.624,"58":5.706,"59":5.789,"60":5.872,"61":5.954,"62":6.037,"63":6.119,"64":6.202,"65":6.284,"66":6.367,"67":6.45,"68":6.532,"69":6.615,"70":6.697,"71":6.78,"72":6.862,"73":6.945,"74":7.028,"75":7.11,"76":7.193,"77":7.275,"78":7.358,"79":7.44,"80":7.523,"81":7.606,"82":7.688,"83":7.771,"84":7.853,"85":7.936,"86":8.018,"87":8.101,"88":8.183,"89":8.266,"90":8.349,"91":8.431,"92":8.514,"93":8.596,"94":8.679,"95":8.761,"96":8.844,"97":8.927,"98":9.009,"99":9.092,"100":9.174},"GROW_CURVE_HP_S5":{"1":1,"2":1.083,"3":1.166,"4":1.25,"5":1.333,"6":1.417,"7":1.5,"8":1.584,"9":1.668,"10":1.751,"11":1.835,"12":1.919,"13":2.003,"14":2.088,"15":2.172,"16":2.256,"17":2.341,"18":2.425,"19":2.51,"20":2.594,"21":2.679,"22":2.764,"23":2.849,"24":2.934,"25":3.019,"26":3.105,"27":3.19,"28":3.275,"29":3.361,"30":3.446,"31":3.532,"32":3.618,"33":3.704,"34":3.789,"35":3.875,"36":3.962,"37":4.048,"38":4.134,"39":4.22,"40":4.307,"41":4.393,"42":4.48,"43":4.567,"44":4.653,"45":4.74,"46":4.827,"47":4.914,"48":5.001,"49":5.089,"50":5.176,"51":5.263,"52":5.351,"53":5.438,"54":5.526,"55":5.614,"56":5.702,"57":5.79,"58":5.878,"59":5.966,"60":6.054,"61":6.142,"62":6.23,"63":6.319,"64":6.407,"65":6.496,"66":6.585,"67":6.673,"68":6.762,"69":6.851,"70":6.94,"71":7.029,"72":7.119,"73":7.208,"74":7.297,"75":7.387,"76":7.476,"77":7.566,"78":7.656,"79":7.746,"80":7.836,"81":7.926,"82":8.016,"83":8.106,"84":8.196,"85":8.286,"86":8.377,"87":8.467,"88":8.558,"89":8.649,"90":8.739,"91":8.83,"92":8.921,"93":9.012,"94":9.103,"95":9.195,"96":9.286,"97":9.377,"98":9.469,"99":9.56,"100":9.652},"GROW_CURVE_ATTACK_S5":{"1":1,"2":1.083,"3":1.166,"4":1.25,"5":1.333,"6":1.417,"7":1.5,"8":1.584,"9":1.668,"10":1.751,"11":1.835,"12":1.919,"13":2.003,"14":2.088,"15":2.172,"16":2.256,"17":2.341,"18":2.425,"19":2.51,"20":2.594,"21":2.679,"22":2.764,"23":2.849,"24":2.934,"25":3.019,"26":3.105,"27":3.19,"28":3.275,"29":3.361,"30":3.446,"31":3.532,"32":3.618,"33":3.704,"34":3.789,"35":3.875,"36":3.962,"37":4.048,"38":4.134,"39":4.22,"40":4.307,"41":4.393,"42":4.48,"43":4.567,"44":4.653,"45":4.74,"46":4.827,"47":4.914,"48":5.001,"49":5.089,"50":5.176,"51":5.263,"52":5.351,"53":5.438,"54":5.526,"55":5.614,"56":5.702,"57":5.79,"58":5.878,"59":5.966,"60":6.054,"61":6.142,"62":6.23,"63":6.319,"64":6.407,"65":6.496,"66":6.585,"67":6.673,"68":6.762,"69":6.851,"70":6.94,"71":7.029,"72":7.119,"73":7.208,"74":7.297,"75":7.387,"76":7.476,"77":7.566,"78":7.656,"79":7.746,"80":7.836,"81":7.926,"82":8.016,"83":8.106,"84":8.196,"85":8.286,"86":8.377,"87":8.467,"88":8.558,"89":8.649,"90":8.739,"91":8.83,"92":8.921,"93":9.012,"94":9.103,"95":9.195,"96":9.286,"97":9.377,"98":9.469,"99":9.56,"100":9.652}}'),h=(0,d.xh)(x,(function(e){return[0].concat((0,a.Z)(Object.values(e)))})),f=(0,d.O)(["hp","atk","def","eleMas","enerRech_","critRate_","critDMG_","heal_"],(function(e){return s.qH.total[e]})),p=(0,o.Qq)(s.qH.infusion.nonOverridableSelf,s.qH.infusion.team,s.qH.infusion.overridableSelf),m=(0,o.Qq)((0,o.P5)(s.qH.hit.move,{skill:s.qH.charEle,burst:s.qH.charEle},void 0),(0,o.P5)(s.qH.weaponType,{sword:p,claymore:p,polearm:p,catalyst:s.qH.charEle},void 0),"physical");function j(e){switch(e){case"normal":case"charged":case"plunging":return"auto";case"skill":return"skill";case"burst":return"burst"}}function Z(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,o.aT)(s.qH.hit.dmg,(0,l.b3)([{hit:{base:e,move:(0,o.a9)(n),ele:null!==r&&void 0!==r&&null!==(t=r.hit)&&void 0!==t&&t.ele?void 0:m}},r]))}function v(e,n){var t=(0,o.WV)(e,(0,o.Sm)(o.J_,s.qH.total.shield_));return n?(0,o.aT)(t,n):t}function g(e,n){var t=s.qH.total.healInc,r=(0,o.WV)((0,o.Sm)(e,t),(0,o.Sm)(o.J_,s.qH.total.heal_,s.qH.total.incHeal_));return n?(0,o.aT)(r,n):r}function y(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=j(t);return Z((0,o.WV)((0,o.lp)(s.qH.total["".concat(i,"Index")],n,{key:"_"}),s.qH.total[e]),t,r)}function b(e,n,t,r){return v((0,o.Sm)((0,o.WV)(n,s.qH.total[e]),t),r)}function w(e,n,t,r){return g((0,o.Sm)((0,o.WV)(n,s.qH.total[e]),t),r)}function C(e,n,t,r,i){var a=j(r),l=s.qH.total["".concat(a,"Index")];return v((0,o.Sm)((0,o.WV)((0,o.lp)(l,n,{key:"_"}),s.qH.total[e]),(0,o.lp)(l,t)),i)}function k(e,n){return(0,o.ce)((0,o.WV)((0,o.aQ)("geo"===e?1.5:2.5),n),{variant:e})}function S(e,n,t,r,i){var a=j(r),l=s.qH.total["".concat(a,"Index")];return g((0,o.Sm)((0,o.WV)((0,o.lp)(l,n,{key:"_"}),s.qH.total[e]),(0,o.lp)(l,t)),i)}function P(e,n,t,x,p){var m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};function j(e,n){return(0,o.WV)(e,(0,o.lp)(s.qH.lvl,h[n]))}p.basic=(0,i.Z)({},f);var Z,v={charKey:(0,o.a9)(e),base:{},weaponType:(0,o.a9)(x.weaponTypeKey),premod:{},display:p};n&&(v.charEle=(0,o.a9)(n),v.teamBuff={tally:(0,r.Z)({},n,(0,o.a9)(1))},v.display.basic["".concat(n,"_dmg_")]=s.qH.total["".concat(n,"_dmg_")],v.display.reaction=c.gw[n]),t&&(0,d.SR)(v,["teamBuff","tally",t],(0,o.a9)(1)),"catalyst"!==x.weaponTypeKey&&(v.display.basic||(v.display.basic={}),v.display.basic.physical_dmg_=s.qH.total.physical_dmg_);for(var g=function(){var e=b[y],n=[];if(x.curves[e]&&n.push(j(x.base[e],x.curves[e])),x.ascensions.some((function(n){return n.props[e]}))&&n.push((0,o.lp)(s.qH.asc,x.ascensions.map((function(n){var t;return null!==(t=n.props[e])&&void 0!==t?t:NaN})))),!n.length)return"continue";var t=(0,o.ce)(1===n.length?n[0]:o.Sm.apply(void 0,n),{key:e,prefix:"char",asConst:!0});if(e.endsWith("_dmg_")&&(t.info.variant=e.slice(0,-5)),"atk"===e||"def"===e||"hp"===e)v.base[e]=t;else{if(Z)throw new Error("Duplicated Char Special");Z=!0,v.special=t,v.premod[e]=s.qH.special}},y=0,b=[].concat((0,a.Z)(u.r),["def"]);y<b.length;y++)g();return(0,l.b3)([v,(0,l.d1)(m)])}},50609:function(e,n,t){t.d(n,{gw:function(){return m}});var r=t(29439),i=t(1413),a=t(74954),s=t(24351),l=t(60393),c=t(26138),o=t(78661),u=(0,o.lp)(c.qH.lvl,[-1,91.1791,98.707664,106.23622,113.76477,121.29332,128.82188,136.35042,143.87898,151.40752,158.93608,169.99149,181.07625,192.19037,204.0482,215.939,227.86275,247.68594,267.5421,287.4312,303.82642,320.22522,336.62762,352.31927,368.01093,383.70255,394.43237,405.18146,415.94992,426.73764,437.5447,450.6,463.7003,476.84558,491.1275,502.55457,514.0121,531.4096,549.9796,568.5849,584.9965,605.67035,626.3862,646.0523,665.7556,685.4961,700.8394,723.3331,745.8653,768.4357,786.79193,809.5388,832.32904,855.16266,878.0396,899.4848,919.362,946.0396,974.7642,1003.5786,1030.077,1056.635,1085.2463,1113.9244,1149.2587,1178.0648,1200.2238,1227.6603,1257.243,1284.9174,1314.7529,1342.6652,1372.7524,1396.321,1427.3124,1458.3745,1482.3358,1511.9109,1541.5493,1569.1537,1596.8143,1622.4197,1648.074,1666.3761,1684.6782,1702.9803,1726.1047,1754.6715,1785.8666,1817.1375,1851.0603]),d=(0,o.WV)(40/9,(0,o.F9)(c.qH.total.eleMas,1400)),x=(0,o.ce)((0,o.WV)((0,o.Sm)(o.J_,d),u),{key:"crystallize",variant:"geo"}),h=(0,o.lp)(c.qH.lvl,[-1,17.165606,18.535048,19.904854,21.274902,22.6454,24.649612,26.640642,28.868587,31.36768,34.143345,37.201,40.66,44.446667,48.56352,53.74848,59.081898,64.420044,69.72446,75.12314,80.58478,86.11203,91.70374,97.24463,102.812645,108.40956,113.20169,118.102905,122.97932,129.72733,136.29291,142.67085,149.02902,155.41699,161.8255,169.10631,176.51808,184.07274,191.70952,199.55692,207.38205,215.3989,224.16566,233.50217,243.35057,256.06308,268.5435,281.52606,295.01364,309.0672,323.6016,336.75754,350.5303,364.4827,378.61917,398.6004,416.39825,434.387,452.95105,472.60623,492.8849,513.56854,539.1032,565.51056,592.53876,624.4434,651.47015,679.4968,707.79407,736.67145,765.64026,794.7734,824.67737,851.1578,877.74207,914.2291,946.74677,979.4114,1011.223,1044.7917,1077.4437,1109.9976,1142.9766,1176.3695,1210.1844,1253.8357,1288.9528,1325.4841,1363.4569,1405.0974,1446.8535]),f=(0,o.WV)(16,(0,o.F9)(c.qH.total.eleMas,2e3)),p=(0,i.Z)((0,i.Z)({},(0,l.O)(["overloaded","electrocharged","superconduct","shattered"],(function(e){var n=a.Ne[e],t=n.multi,i=(0,r.Z)(n.variants,1)[0];return(0,o.ce)((0,o.WV)((0,o.ce)((0,o.WV)(t,h),{asConst:true}),(0,o.Sm)(o.J_,f,c.qH.total["".concat(e,"_dmg_")]),c.qH.enemy["".concat(i,"_resMulti")]),{key:"".concat(e,"_hit"),variant:e})}))),{},{swirl:(0,l.O)(a.Ne.swirl.variants,(function(e){return(0,o.ce)((0,o.WV)((0,o.ce)((0,o.WV)(a.Ne.swirl.multi,h),{asConst:true}),(0,o.Sm)(o.J_,f,c.qH.total.swirl_dmg_),c.qH.enemy["".concat(e,"_resMulti")]),{key:"".concat(e,"_swirl_hit"),variant:e})}))}),m={anemo:{electroSwirl:p.swirl.electro,pyroSwirl:p.swirl.pyro,cryoSwirl:p.swirl.cryo,hydroSwirl:p.swirl.hydro,shattered:p.shattered},geo:(0,i.Z)((0,i.Z)({crystallize:x},Object.fromEntries(s.gs.map((function(e){return["".concat(e,"Crystallize"),(0,o.ce)((0,o.WV)((0,o.aQ)(2.5),x),{key:"".concat(e,"_crystallize"),variant:e})]})))),{},{shattered:p.shattered}),electro:{overloaded:p.overloaded,electrocharged:p.electrocharged,superconduct:p.superconduct,shattered:p.shattered},hydro:{electrocharged:p.electrocharged,shattered:p.shattered},pyro:{overloaded:p.overloaded,shattered:p.shattered},cryo:{superconduct:p.superconduct,shattered:p.shattered}}},19866:function(e,n,t){t.r(n),t.d(n,{default:function(){return aa}});var r,i,a,s,l=t(29439),c=t(63833),o=t(45781),u=t(35893),d=t(66630),x=t(37355),h=t(68575),f=t(68870),p=t(47047),m=t(39504),j=t(53767),Z=t(25228),v=t(43896),g=t(61889),y=t(20890),b=t(56125),w=t(9585),C=t(94721),k=t(89673),S=t(55818),P=t(3721),O=t(24518),E=t(72791),K=t(22020),_=t(43504),D=t(16871),R=t(3992),A=t(71310),I=t(68198),z=t(91702),M=t(1413),q=t(45987),T=t(66934),N=t(13400),H=t(80184),V=["expand"],W=(0,T.ZP)((function(e){e.expand;var n=(0,q.Z)(e,V);return(0,H.jsx)(N.Z,(0,M.Z)({},n))}))((function(e){var n=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest})}})),B=t(30168),L=t(23786),G=t(90388),F=t(97714),J=t(21206),U=t(13746),$=t(26138),Y=t(24351),X=t(33890),Q=t(91839),ee=t(25617),ne=t(75545),te={"":(0,H.jsx)("span",{children:"No Team Melee Infusion"}),pyro:(0,H.jsxs)("span",{children:[ne.hJ.pyro," ",(0,H.jsx)(ee.Z,{children:"Bennett C6"})," Fire Ventures with Me"]}),cryo:(0,H.jsxs)("span",{children:[ne.hJ.cryo," ",(0,H.jsx)(ee.Z,{children:"Chongyun Skill"})," Spirit Blade: Chonghua's Layered Frost"]})};function re(e){var n=(0,E.useContext)(F.K),t=n.characterSheet,r=n.character.infusionAura,i=n.characterDispatch;return null!==t&&void 0!==t&&t.isMelee()?(0,H.jsx)(X.Z,(0,M.Z)((0,M.Z)({title:te[r],color:r||"secondary",disableElevation:!0},e),{},{children:Object.entries(te).map((function(e){var n=(0,l.Z)(e,2),t=n[0],a=n[1];return(0,H.jsx)(L.Z,{sx:t?{color:"".concat(t,".main")}:void 0,selected:t===r,disabled:t===r,onClick:function(){return i({infusionAura:t})},children:a},t)}))})):null}var ie={mx:.25,px:.25,fontSize:"1em"},ae={pyro_vaporize:function(e){return(0,H.jsxs)(f.Z,{display:"flex",alignItems:"center",children:[(0,H.jsx)(z.Z,{color:"vaporize",children:e(r||(r=(0,B.Z)(["ampReaction.pyro_vaporize"])))}),(0,H.jsx)(ee.Z,{sx:ie,color:"hydro",children:ne.hJ.hydro}),"+",(0,H.jsx)(ee.Z,{sx:ie,color:"pyro",children:ne.hJ.pyro})]})},pyro_melt:function(e){return(0,H.jsxs)(f.Z,{display:"flex",alignItems:"center",children:[(0,H.jsx)(z.Z,{color:"melt",children:e(i||(i=(0,B.Z)(["ampReaction.pyro_melt"])))}),(0,H.jsx)(ee.Z,{sx:ie,color:"cryo",children:ne.hJ.cryo}),"+",(0,H.jsx)(ee.Z,{sx:ie,color:"pyro",children:ne.hJ.pyro})]})},hydro_vaporize:function(e){return(0,H.jsxs)(f.Z,{display:"flex",alignItems:"center",children:[(0,H.jsx)(z.Z,{color:"vaporize",children:e(a||(a=(0,B.Z)(["ampReaction.hydro_vaporize"])))}),(0,H.jsx)(ee.Z,{sx:ie,color:"pyro",children:ne.hJ.pyro}),"+",(0,H.jsx)(ee.Z,{sx:ie,color:"hydro",children:ne.hJ.hydro})]})},cryo_melt:function(e){return(0,H.jsxs)(f.Z,{display:"flex",alignItems:"center",children:[(0,H.jsx)(z.Z,{color:"melt",children:e(s||(s=(0,B.Z)(["ampReaction.cryo_melt"])))}),(0,H.jsx)(ee.Z,{sx:ie,color:"pyro",children:ne.hJ.pyro}),"+",(0,H.jsx)(ee.Z,{sx:ie,color:"cryo",children:ne.hJ.cryo})]})}};function se(e){var n=(0,K.$)("page_character").t,t=(0,E.useContext)(F.K),r=t.character.reactionMode,i=t.characterDispatch,a=(0,E.useContext)(U.R).data,s=a.get($.ri.charEle).value,l=a.get(J._d).value;return["pyro","hydro","cryo"].includes(s)||["pyro","hydro","cryo"].includes(l)?(0,H.jsxs)(Q.Z,(0,M.Z)((0,M.Z)({exclusive:!0,baseColor:"secondary",value:r,onChange:function(e,n){return i({reactionMode:n})}},e),{},{children:[(0,H.jsx)(G.Z,{value:"",disabled:""===r,children:"No Reactions"}),Y.q7.map((function(e){return(s===e.split("_")[0]||l===e.split("_")[0])&&(0,H.jsx)(G.Z,{value:e,disabled:r===e,children:ae[e](n)},e)}))]})):null}function le(e){var n=(0,K.$)("page_character").t,t=(0,E.useContext)(F.K),r=t.character.hitMode,i=t.characterDispatch;return(0,H.jsx)(Q.Z,(0,M.Z)((0,M.Z)({exclusive:!0,baseColor:"secondary",value:r,onChange:function(e,n){return i({hitMode:n})}},e),{},{children:Y.TY.map((function(e){return(0,H.jsx)(G.Z,{value:e,disabled:r===e,children:n("hitmode.".concat(e))},e)}))}))}var ce=t(55942),oe=t(947),ue=t(74165),de=t(93433),xe=t(15861),he=t(31148),fe=t(66218),pe=t(60393),me={title:(0,H.jsx)(z.Z,{color:"warning",children:"ERROR"})},je=(0,M.Z)({normal:"Normal Atk.",charged:"Charged Atk.",plunging:"Plunging Atk.",skill:"Ele. Skill",burst:"Ele. Burst",passive:"Passive",passive1:"1st Asc. Pass.",passive2:"4th Asc. Pass.",passive3:"Util. Pass."},Object.fromEntries((0,pe.w6)(1,6).map((function(e){return["constellation".concat(e),"Const. ".concat(e)]}))));function Ze(e,n){return ve.apply(this,arguments)}function ve(){return(ve=(0,xe.Z)((0,ue.Z)().mark((function e(n,t){var r,i,a,s,c,o,u,d,x,h,f,p,m;return(0,ue.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",me);case 2:if("basic"!==t){e.next=6;break}return e.abrupt("return",{title:"Basic Stats"});case 6:if("reaction"!==t){e.next=10;break}return e.abrupt("return",{title:"Transformative Reactions"});case 10:if(!t.includes(":")){e.next=31;break}if(r=t.split(":"),i=(0,l.Z)(r,2),a=i[0],s=i[1],"artifact"!==a){e.next=21;break}return e.next=15,he.y.get(s);case 15:if(c=e.sent){e.next=18;break}return e.abrupt("return",me);case 18:return e.abrupt("return",{title:c.name,icon:c.defIconSrc});case 21:if("weapon"!==a){e.next=29;break}return e.next=24,fe.Z.get(s);case 24:if(o=e.sent){e.next=27;break}return e.abrupt("return",me);case 27:return u=n.get($.qH.weapon.asc).value,e.abrupt("return",{title:o.name,icon:o.getImg(u)});case 29:e.next=44;break;case 31:if(d=n.get($.qH.charKey).value,x=n.get($.qH.charEle).value,d&&x){e.next=35;break}return e.abrupt("return",me);case 35:return e.next=37,oe.Z.get(d);case 37:if(h=e.sent,f=["normal","charged","plunging"].includes(t)?"auto":t,p=null===h||void 0===h?void 0:h.getTalentOfKey(f,x)){e.next=42;break}return e.abrupt("return",me);case 42:return m=je[t],e.abrupt("return",{icon:p.img,title:p.name,action:m});case 44:return e.abrupt("return",me);case 45:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e){var n=e.getDisplay(),t=Object.entries(n).filter((function(e){var n=(0,l.Z)(e,2),t=(n[0],n[1]);return!Object.values(t).every((function(e){return e.isEmpty}))})),r=t.filter((function(e){return"basic"===(0,l.Z)(e,1)[0]})),i=t.filter((function(e){return"reaction"===(0,l.Z)(e,1)[0]})),a=t.filter((function(e){return(0,l.Z)(e,1)[0].startsWith("weapon")})),s=t.filter((function(e){return(0,l.Z)(e,1)[0].startsWith("artifact")})),c=t.filter((function(e){var n=(0,l.Z)(e,1)[0];return"basic"!==n&&"reaction"!==n&&!n.startsWith("weapon")&&!n.startsWith("artifact")}));return[].concat((0,de.Z)(r),(0,de.Z)(c),(0,de.Z)(a),(0,de.Z)(s),(0,de.Z)(i))}var ye=t(79406),be=t(24711),we=t(13434),Ce=t(50920),ke=t(42320),Se=t(47639),Pe=t(72056),Oe=t(3082),Ee=t(2380),Ke=t(566);function _e(){var e,n=(0,K.$)("page_character").t,t=(0,E.useContext)(F.K).characterSheet,r=(0,E.useState)(!1),i=(0,l.Z)(r,2),a=i[0],s=i[1],c=(0,Ke.Z)();return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Oe.w,{show:a,onHide:function(){return s(!1)},onSelect:c}),(0,H.jsx)(O.Z,{color:"info",onClick:function(){return s(!0)},startIcon:(0,H.jsx)(Ee.Z,{src:null===t||void 0===t?void 0:t.thumbImgSide}),children:null!==(e=null===t||void 0===t?void 0:t.name)&&void 0!==e?e:n("selectCharacter")})]})}var De=t(2199),Re=t(10600),Ae=t(2139);function Ie(){var e=(0,K.$)("page_character").t,n=(0,E.useContext)(F.K),t=n.character,r=n.characterSheet,i=n.characterDispatch,a=(0,E.useCallback)((function(e){e=(0,pe.uZ)(e,1,90);var n=Ae.SJ.findIndex((function(n){return e<=n}));i({level:e,ascension:n})}),[i]),s=(0,E.useCallback)((function(){if(t){var e=t.level,n=void 0===e?1:e,r=t.ascension,a=void 0===r?0:r,s=Ae.SJ.findIndex((function(e){return 90!==n&&n===e}));i(a===s?{ascension:a+1}:{ascension:s})}}),[i,t]),c=t.level,o=void 0===c?1:c,u=t.ascension,d=void 0===u?0:u;return(0,H.jsxs)(De.Z,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[(0,H.jsx)(Re.CC,{children:(0,H.jsx)(Re.ZP,{onChange:a,value:o,startAdornment:"Lv. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2},disabled:!r})}),(0,H.jsx)(O.Z,{sx:{pl:1},disabled:!(0,Ae.ek)(o)||!r,onClick:s,children:(0,H.jsxs)("strong",{children:["/ ",Ae.SJ[d]]})}),(0,H.jsx)(X.Z,{title:e("selectLevel"),disabled:!r,children:Ae.D4.map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1],a=t===Ae.SJ[r]?"Lv. ".concat(t):"Lv. ".concat(t,"/").concat(Ae.SJ[r]),s=t===o&&r===d;return(0,H.jsx)(L.Z,{selected:s,disabled:s,onClick:function(){return i({level:t,ascension:r})},children:a},"".concat(t,"/").concat(r))}))})]})}var ze=t(15021),Me=t(52791),qe=t(72247),Te=t(9912),Ne=t(81918),He=t(49670),Ve=t(92443),We=["name","children","value","placeholder","defaultValue","onValueChange","percent","disabled","onReset"],Be=(0,T.ZP)(De.Z)({display:"flex"});function Le(e){var n=e.name,t=e.children,r=e.value,i=e.placeholder,a=e.defaultValue,s=void 0===a?0:a,l=e.onValueChange,c=e.percent,o=void 0!==c&&c,u=e.disabled,d=void 0!==u&&u,x=e.onReset,h=(0,q.Z)(e,We);return(0,H.jsxs)(Be,(0,M.Z)((0,M.Z)({},h),{},{children:[t,(0,H.jsx)(Ve.Z,{sx:{px:1},children:n}),(0,H.jsx)(Re.CC,{sx:{flexBasis:"10em",flexGrow:1},children:(0,H.jsx)(Re.ZP,{sx:{px:1},inputProps:{sx:{textAlign:"right"}},float:o,placeholder:i,value:r,onChange:l,disabled:d,endAdornment:o?"%":void 0})}),(0,H.jsx)(O.Z,{sx:{flexShrink:2},size:"small",color:"error",onClick:function(){return x?x():l(s)},disabled:d||r===s,children:(0,H.jsx)(He.Z,{})})]}))}function Ge(){var e=(0,E.useContext)(U.R).data,n=(0,E.useState)(!1),t=(0,l.Z)(n,2),r=t[0],i=t[1],a=(0,E.useCallback)((function(){return i(!r)}),[i,r]),s=e.get($.ri.enemy.level),c=e.get($.ri.enemy.defRed),o=e.get($.ri.enemy.defIgn);return(0,H.jsxs)(A.Z,{children:[(0,H.jsxs)(m.Z,{sx:{display:"flex"},children:[(0,H.jsxs)(g.ZP,{container:!0,spacing:1,flexGrow:1,alignItems:"center",children:[(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(Ne.Z,{size:"small",color:"success",label:(0,H.jsxs)("span",{children:[ye.ZP.get(s.info.key)," ",(0,H.jsx)("strong",{children:s.value})]})})}),Y.Kj.map((function(e){return(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(y.Z,{children:(0,H.jsx)(Fe,{element:e})},e)},e)})),(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsxs)(y.Z,{children:["DEF Reduction ",(0,ye.EC)(c.value,c.unit)]})}),(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsxs)(y.Z,{children:["DEF Ignore ",(0,ye.EC)(o.value,o.unit)]})})]}),(0,H.jsx)(W,{expand:r,onClick:a,"aria-expanded":r,"aria-label":"show more",size:"small",sx:{p:0},children:(0,H.jsx)(x.Z,{})})]}),(0,H.jsx)(b.Z,{in:r,timeout:"auto",unmountOnExit:!0,children:(0,H.jsx)(m.Z,{sx:{pt:0},children:(0,H.jsx)(Je,{})})})]})}function Fe(e){var n=e.element,t=(0,E.useContext)(U.R).data.get($.ri.enemy["".concat(n,"_res_")]),r=!isFinite(t.value)?(0,H.jsxs)("span",{children:[ne.hJ[n]," IMMUNE"]}):(0,H.jsxs)("span",{children:[ne.hJ[n],"RES ",(0,H.jsx)("strong",{children:(0,ye.EC)(t.value,t.unit)})]});return(0,H.jsx)(z.Z,{color:n,children:r})}function Je(e){var n,t,r,i=e.bsProps,a=void 0===i?{xs:12,md:6}:i,s=(0,E.useContext)(F.K),l=s.character.enemyOverride,c=s.characterDispatch,o=(0,E.useContext)(U.R).data,u=null!==(n=l.enemyLevel)&&void 0!==n?n:o.get($.ri.lvl).value,d=null!==(t=l.enemyDefIgn_)&&void 0!==t?t:0,x=null!==(r=l.enemyDefRed_)&&void 0!==r?r:0;return(0,H.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(g.ZP,(0,M.Z)((0,M.Z)({item:!0},a),{},{children:(0,H.jsx)(O.Z,{fullWidth:!0,sx:{height:"100%"},size:"small",component:"a",color:"warning",href:"https://genshin-impact.fandom.com/wiki/Resistance#Base_Enemy_Resistances",target:"_blank",rel:"noreferrer",children:"To get the specific resistance values of enemies, please visit the wiki."})})),(0,H.jsx)(g.ZP,(0,M.Z)((0,M.Z)({item:!0},a),{},{children:(0,H.jsx)(Le,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,H.jsx)("b",{children:ye.ZP.get("enemyLevel")}),value:u,placeholder:ye.ZP.getStr("enemyLevel"),defaultValue:o.get($.ri.lvl).value,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyLevel",value:e})},onReset:function(){return c({type:"enemyOverride",statKey:"enemyLevel",value:void 0})}})})),Y.Kj.map((function(e){var n="".concat(e,"_enemyRes_"),t=l[n],r=t===Number.MAX_VALUE;return(0,H.jsx)(g.ZP,(0,M.Z)((0,M.Z)({item:!0},a),{},{children:(0,H.jsx)(Le,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,H.jsx)(z.Z,{color:e,children:(0,H.jsx)("b",{children:ye.ZP.get(n)})}),value:t?r?1/0:t:10,placeholder:r?"Immune ":ye.ZP.getStr(n),defaultValue:10,onValueChange:function(e){return c({type:"enemyOverride",statKey:n,value:e})},disabled:r,percent:!0,children:(0,H.jsx)(O.Z,{color:e,onClick:function(){return c({type:"enemyOverride",statKey:n,value:r?10:Number.MAX_VALUE})},startIcon:r?(0,H.jsx)(qe.Z,{}):(0,H.jsx)(Te.Z,{}),children:"Immunity"})})}),e)})),(0,H.jsx)(g.ZP,(0,M.Z)((0,M.Z)({item:!0},a),{},{children:(0,H.jsx)(Le,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,H.jsx)("b",{children:ye.ZP.get("enemyDefIgn_")}),value:d,placeholder:ye.ZP.getStr("enemyDefIgn_"),defaultValue:0,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyDefIgn_",value:e})},percent:!0})})),(0,H.jsx)(g.ZP,(0,M.Z)((0,M.Z)({item:!0},a),{},{children:(0,H.jsx)(Le,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,H.jsx)("b",{children:ye.ZP.get("enemyDefRed_")}),value:x,placeholder:ye.ZP.getStr("enemyDefRed_"),defaultValue:0,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyDefRed_",value:e})},percent:!0})})),(0,H.jsx)(g.ZP,{item:!0,xs:12,children:(0,H.jsx)("small",{children:"Note: Genshin Impact halves resistance shred values below 0%. For the sake of calculations enter the RAW value and GO will do the rest. (e.g. 10% - 20% = -10%)"})})]})}var Ue=t(88034),$e=t(9321),Ye=t(43696),Xe={xs:1,md:2,lg:3};function Qe(e){var n=e.open,t=e.onClose;return(0,H.jsx)($e.Z,{open:n,onClose:t,children:(0,H.jsxs)(R.Z,{children:[(0,H.jsx)(w.Z,{title:"Detailed Stats",action:(0,H.jsx)(I.Z,{onClick:t})}),(0,H.jsx)(m.Z,{sx:{pt:0},children:(0,H.jsxs)(j.Z,{spacing:1,children:[(0,H.jsx)(tn,{}),(0,H.jsx)(Ge,{}),(0,H.jsx)(un,{})]})})]})})}var en=(0,de.Z)($.lR),nn=function(e){return(0,H.jsx)(g.ZP,{item:!0,xs:1,children:e})};function tn(){var e=(0,E.useContext)(F.K),n=e.character.bonusStats,t=e.characterDispatch,r=(0,E.useCallback)((function(e){return t({bonusStats:e})}),[t]);return(0,H.jsx)(A.Z,{children:(0,H.jsx)(m.Z,{sx:{display:"flex"},children:(0,H.jsx)(g.ZP,{container:!0,columns:Xe,sx:{pt:1},spacing:1,children:(0,H.jsx)(Ye.Z,{statKeys:en,statFilters:n,setStatFilters:r,wrapperFunc:nn})})})})}var rn=["eleMas","critRate_","critDMG_","enerRech_","heal_"],an=[].concat(["hp","atk","def"],rn).map((function(e){return $.ri.total[e]})),sn=["atk_","atk","hp_","hp","def_","def"].concat(rn),ln=[].concat((0,de.Z)(ye.hX),(0,de.Z)(ye.Sx),["stamina","incHeal_","shield_","cdRed_"]),cn=$.lR.filter((function(e){return!sn.includes(e)&&!ln.includes(e)}));function on(e){var n=e.nodes,t=e.extra,r=(0,E.useContext)(U.R),i=r.data,a=r.oldData;return(0,H.jsxs)(Ue.lD,{children:[n.map((function(e){var n,t;return(0,H.jsx)(Ue.JW,{component:ze.ZP,node:i.get(e),oldValue:null===a||void 0===a||null===(t=a.get(e))||void 0===t?void 0:t.value},null===(n=e.info)||void 0===n?void 0:n.key)})),t]})}function un(){var e=(0,E.useContext)(F.K),n=e.character.elementKey,t=e.characterSheet,r=(0,E.useContext)(U.R).data,i=r.get($.ri.special),a=null!==n&&void 0!==n?n:t.elementKey,s=t.isMelee(),l=(0,E.useMemo)((function(){var e=ln.map((function(e){return $.ri.total[e]})),n=(0,de.Z)(Y.N).filter((function(e){return e!==a}));return s&&n.concat(["physical"]),e.filter((function(e){return!(!r.get(e).value&&n.some((function(n){var t,r,i;return null===(t=e.info)||void 0===t||null===(r=t.key)||void 0===r||null===(i=r.includes)||void 0===i?void 0:i.call(r,n)})))}))}),[r,a,s]),c=(0,E.useMemo)((function(){return cn.map((function(e){return $.ri.total[e]})).filter((function(e){return r.get(e).value}))}),[r]);return(0,H.jsx)(A.Z,{children:(0,H.jsx)(m.Z,{children:(0,H.jsxs)(g.ZP,{container:!0,columns:Xe,spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(dn,{title:"Main Stats",children:(0,H.jsx)(on,{nodes:an,extra:i&&(0,H.jsxs)(ze.ZP,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,H.jsxs)("span",{children:[(0,H.jsx)("b",{children:"Special:"})," ",(0,H.jsxs)(z.Z,{color:i.info.variant,children:[i.info.key&&ne.ZP[i.info.key]," ",i.info.key&&ye.ZP.get(i.info.key)]})]}),(0,H.jsx)("span",{children:(0,ye.EC)(i.value,i.unit)})]})})})}),(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(dn,{title:"Other Stats",children:(0,H.jsx)(on,{nodes:l})})}),!!c.length&&(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(dn,{title:"Misc Stats",children:(0,H.jsx)(on,{nodes:c})})})]})})})}function dn(e){var n=e.title,t=e.children;return(0,H.jsxs)(R.Z,{children:[(0,H.jsx)(m.Z,{sx:{py:1},children:(0,H.jsx)(Me.Z,{display:"flex",justifyContent:"space-between",children:(0,H.jsx)(y.Z,{variant:"subtitle1",children:n})})}),t]})}var xn=t(53174),hn=t(54483),fn=t(96739),pn=t(94070),mn=t(23060);function jn(){return new Worker(t.p+"static/js/BackgroundWorker.cbd566c3.worker.js")}var Zn=t(21977),vn=t(96106),gn=t(30865),yn=t(7618),bn=t(73036),wn=t(69292),Cn=t(12759),kn=t(17278),Sn=t(68544),Pn=t(9138);function On(e){var n=(0,E.useContext)(yn.t).database,t=(0,E.useState)((function(){return n.buildSettings.get(e)})),r=(0,l.Z)(t,2),i=r[0],a=r[1];return(0,E.useEffect)((function(){return a(n.buildSettings.get(e))}),[n,e]),(0,E.useEffect)((function(){return n.buildSettings.follow(e,a)}),[e,a,n]),{buildSetting:i,buildSettingDispatch:(0,E.useCallback)((function(t){return e&&n.buildSettings.set(e,t)}),[e,n])}}var En=t(37762),Kn=t(64737),_n=t(78661),Dn=(0,ue.Z)().mark(Ln),Rn=(0,ue.Z)().mark(Fn);function An(e,n,t,r,i,a){for(var s=a,l={pruneNodeRange:!0},c={pruneNodeRange:!0},o={reaffine:!0},u={pruneOrder:!0,pruneArtRange:!0,pruneNodeRange:!0},d=0;Object.values(s).some((function(e){return e}))&&d++<20;){if(s.pruneOrder){delete s.pruneOrder;var x=zn(t,r,i);t!==x&&(t=x,s=(0,M.Z)((0,M.Z)({},s),l))}if(s.pruneArtRange){delete s.pruneArtRange;var h=Mn(e,t,n);t!==h&&(t=h,s=(0,M.Z)((0,M.Z)({},s),c))}if(s.pruneNodeRange){delete s.pruneNodeRange;var f=qn(e,t);e!==f&&(e=f,s=(0,M.Z)((0,M.Z)({},s),o))}if(s.reaffine){delete s.reaffine;var p=In(e,t),m=p.nodes,j=p.arts;e===m&&t===j||(e=m,t=j,s=(0,M.Z)((0,M.Z)({},s),u))}}return{nodes:e,arts:t}}function In(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set,i=new Set;function a(e,n){n?r.add(e):e.operands.forEach((function(e){var n=e;r.has(n)&&i.add(n)}))}var s=new Set;if((0,Kn.aD)(e,(function(e){}),(function(e){var n=e.operation;switch(n){case"read":if("number"!==e.type||"dyn"!==e.path[0]||"add"!==e.accu)throw new Error("Found unsupported ".concat(n," node at path ").concat(e.path," when computing affine nodes"));s.add(e.path[1]),a(e,!0);break;case"add":a(e,e.operands.every((function(e){return r.has(e)})));break;case"mul":var t=e.operands.filter((function(e){return"const"!==e.operation}));a(e,0===t.length||1===t.length&&r.has(t[0]));break;case"const":if("string"===typeof e.value||void 0===e.value)throw new Error("Found constant ".concat(e.value," while compacting"));a(e,!0);break;case"res":case"threshold":case"sum_frac":case"max":case"min":a(e,!1);break;case"data":case"subscript":case"lookup":case"match":case"prio":case"small":throw new Error("Found unsupported ".concat(n," node when computing affine nodes"));default:(0,pe.UT)(n)}})),(0,de.Z)(i).every((function(e){var n=e.operation;return"read"===n||"const"===n}))&&Object.keys(n.base).length===s.size)return{nodes:e,arts:n};var c=-1;function o(){for(;s.has("".concat(++c)););return"".concat(c)}e.forEach((function(e){return r.has(e)&&i.add(e)}));var u=(0,de.Z)(i).filter((function(e){return"const"!==e.operation})),d=new Map(u.map((function(e){return[e,t||"read"!==e.operation||"dyn"!==e.path[0]?(0,M.Z)((0,M.Z)({},(0,_n.UF)(["dyn","".concat(o())])),{},{accu:"add"}):e]})));function x(e){var n=(0,wn.CG)((0,de.Z)(d.keys()),{dyn:(0,pe.xh)(e,(function(e){return(0,_n.a9)(e)}))},(function(e){return!0}));return Object.fromEntries((0,de.Z)(d.values()).map((function(e,t){return[e.path[1],n[t].value]})))}for(var h={nodes:e=(0,Kn.uW)(e,(function(e){var n;return null!==(n=d.get(e))&&void 0!==n?n:e}),(function(e){return e})),arts:{base:x(n.base),values:(0,pe.O)(Y.eV,(function(e){return n.values[e].map((function(e){return{id:e.id,set:e.set,values:x(e.values)}}))}))}},f=Object.entries(x({})),p=0,m=Object.values(h.arts.values);p<m.length;p++){var j,Z=m[p],v=(0,En.Z)(Z);try{for(v.s();!(j=v.n()).done;){var g,y=j.value.values,b=(0,En.Z)(f);try{for(b.s();!(g=b.n()).done;){var w=(0,l.Z)(g.value,2),C=w[0],k=w[1];y[C]-=k}}catch(S){b.e(S)}finally{b.f()}}}catch(S){v.e(S)}finally{v.f()}}return h}function zn(e,n,t){var r,i=!1,a=!(null!==(r=t.rainbow)&&void 0!==r&&r.length),s=new Set(Object.entries(t).filter((function(e){var n=(0,l.Z)(e,2);n[0];return n[1].length})).map((function(e){return(0,l.Z)(e,1)[0]}))),c=new Set(Object.entries(t).filter((function(e){var n=(0,l.Z)(e,2),t=(n[0],n[1]);return t.includes(2)&&!t.includes(4)})).map((function(e){return(0,l.Z)(e,1)[0]}))),o=(0,pe.O)(Y.eV,(function(t){var r=e.values[t],o=r.filter((function(e){var t=0;return r.every((function(r){var i=Object.entries(r.values).every((function(n){var t=(0,l.Z)(n,2),r=t[0];return t[1]>=e.values[r]})),o=Object.entries(r.values).some((function(n){var t=(0,l.Z)(n,2),r=t[0];return t[1]>e.values[r]}));return i&&(o||r.id>e.id)&&(a&&!s.has(r.set)&&!c.has(e.set)||e.set===r.set)&&t++,t<n}))}));return o.length!==r.length&&(i=!0),o}));return i?{base:e.base,values:o}:e}function Mn(e,n,t){for(var r=Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return[t,{min:r,max:r}]}))),i={arts:n},a=function(){var n=(0,pe.O)(Y.eV,(function(e){return Nn(i.arts.values[e])})),a=(0,pe.O)(Y.eV,(function(e){return Tn(Object.entries(n).map((function(n){return n[0]===e?r:n[1]})).filter((function(e){return e})))})),s=!1,l=(0,pe.O)(Y.eV,(function(n){var r=i.arts.values[n].filter((function(r){var i=Tn([Nn([r]),a[n]]),s=Hn(e,i);return e.every((function(e,n){var r;return s.get(e).max>=(null!==(r=t[n])&&void 0!==r?r:-1/0)}))}));return r.length!==i.arts.values[n].length&&(s=!0),r}));if(!s)return"break";i.arts={base:i.arts.base,values:l}};;){if("break"===a())break}return i.arts}function qn(e,n){var t=Hn(e,Tn([Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return[t,{min:r,max:r}]})))].concat((0,de.Z)(Object.values(n.values).map((function(e){return Nn(e)}))))));return(0,Kn.uW)(e,(function(e){var n=e.operation,r=e.operands.map((function(e){return t.get(e)}));switch(n){case"threshold":var i=(0,l.Z)(r,4),a=i[0],s=i[1],c=i[2],o=i[3];if(a.min>=s.max)return e.operands[2];if(a.max<s.min)return(0,_n.a9)(0);if(c.max===c.min&&o.max===o.min&&c.min===o.min&&isFinite(c.min))return(0,_n.a9)(c.max);break;case"min":var u=e.operands.filter((function(e,n){var t=r[n];return r.every((function(e,n){return t.min<=e.max}))}));if(u.length<r.length)return _n.VV.apply(void 0,(0,de.Z)(u));break;case"max":var d=e.operands.filter((function(e,n){var t=r[n];return r.every((function(e){return t.max>=e.min}))}));if(d.length<r.length)return _n.Fp.apply(void 0,(0,de.Z)(d))}return e}),(function(e){return e}))}function Tn(e){var n={};return e.forEach((function(e){Object.entries(e).forEach((function(e){var t=(0,l.Z)(e,2),r=t[0],i=t[1];n[r]?(n[r].min+=i.min,n[r].max+=i.max):n[r]=(0,M.Z)({},i)}))})),n}function Nn(e){var n={};return e.length&&(Object.keys(e[0].values).filter((function(n){return e.every((function(e){return e.values[n]}))})).forEach((function(t){return n[t]={min:e[0].values[t],max:e[0].values[t]}})),e.forEach((function(e){for(var t=e.values,r=0,i=Object.entries(t);r<i.length;r++){var a=(0,l.Z)(i[r],2),s=a[0],c=a[1];n[s]?(n[s].max<c&&(n[s].max=c),n[s].min>c&&(n[s].min=c)):n[s]={min:0,max:c}}}))),n}function Hn(e,n){var t=new Map;return(0,Kn.aD)(e,(function(e){}),(function(e){var r,i,a=e,s=a.operation,c=a.operands.map((function(e){return t.get(e)}));switch(s){case"read":if("dyn"!==a.path[0])throw new Error("Found non-dyn path ".concat(a.path," while computing range"));i=null!==(r=n[a.path[1]])&&void 0!==r?r:{min:0,max:0};break;case"const":i=Vn([a.value]);break;case"subscript":i=Vn(a.list);break;case"add":case"min":case"max":i={min:wn.aj[s](c.map((function(e){return e.min}))),max:wn.aj[s](c.map((function(e){return e.max})))};break;case"res":i={min:wn.aj[s]([c[0].max]),max:wn.aj[s]([c[0].min])};break;case"mul":i=c.reduce((function(e,n){return Vn([e.min*n.min,e.min*n.max,e.max*n.min,e.max*n.max])}));break;case"threshold":i=c[0].min>=c[1].max?c[2]:c[0].max<c[1].min?Vn([0]):Vn([0],[c[2]]);break;case"sum_frac":var o=(0,l.Z)(c,2),u=o[0],d=o[1],x={min:u.min+d.min,max:u.max+d.max};i=x.min<=0&&x.max>=0?u.min<=0&&u.max>=0?{min:NaN,max:NaN}:{min:-1/0,max:1/0}:Vn([u.min/x.min,u.min/x.max,u.max/x.min,u.max/x.max]);break;case"data":case"lookup":case"match":throw new Error("Unsupported ".concat(s," node"));default:(0,pe.UT)(s)}t.set(a,i)})),t}function Vn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Math.max.apply(Math,(0,de.Z)(e).concat((0,de.Z)(n.map((function(e){return e.max}))))),r=Math.min.apply(Math,(0,de.Z)(e).concat((0,de.Z)(n.map((function(e){return e.min})))));return{min:r,max:t}}function Wn(e,n){return e.flatMap((function(e){return e})).sort((function(e,n){return n.value-e.value})).slice(0,n)}function Bn(e){for(var n=.01,t=new Set(e.flatMap((function(e){return Object.values(e).map((function(e){return Math.round(e.plot/n)}))})));t.size>1500;)n*=2,t=new Set((0,de.Z)(t).map((function(e){return Math.round(e/2)})));var r,i={},a=(0,En.Z)(e);try{for(a.s();!(r=a.n()).done;)for(var s=r.value,l=0,c=Object.values(s);l<c.length;l++){var o=c[l],u=Math.round(o.plot/n)*n;(!i[u]||i[u].value<o.value)&&(i[u]=o)}}catch(d){a.e(d)}finally{a.f()}return i}function Ln(e,n){var t,r,i,a,s,c,o;return(0,ue.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=(0,pe.xh)(n.values,(function(e){return new Set(e.map((function(e){return e.set})))})),r=(0,En.Z)(e),u.prev=2,r.s();case 4:if((i=r.n()).done){u.next=19;break}a=i.value,s=function(){var e=(0,l.Z)(o[c],2),n=e[0],r=e[1],i=t[n];switch(r.kind){case"required":if((0,de.Z)(r.sets).every((function(e){return!i.has(e)})))return"continue|filter_loop";break;case"exclude":if((0,de.Z)(i).every((function(e){return r.sets.has(e)})))return"continue|filter_loop"}},c=0,o=Object.entries(a);case 8:if(!(c<o.length)){u.next=15;break}if("continue|filter_loop"!==s()){u.next=12;break}return u.abrupt("continue",17);case 12:c++,u.next=8;break;case 15:return u.next=17,a;case 17:u.next=4;break;case 19:u.next=24;break;case 21:u.prev=21,u.t0=u.catch(2),r.e(u.t0);case 24:return u.prev=24,r.f(),u.finish(24);case 27:case"end":return u.stop()}}),Dn,null,[[2,21,24,27]])}function Gn(e){return new Set(null!==e&&void 0!==e&&e.includes(2)?e.includes(4)?[0,1]:[0,1,4,5]:null!==e&&void 0!==e&&e.includes(4)?[0,1,2,3]:[0,1,2,3,4,5])}function Fn(e,n){var t,r,i,a,s,c,o,u,d,x,h,f,p,m,j,Z;return(0,ue.Z)().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:for(p=function(e){var n,i,a,s,l,c,o,u,d,p,m;return(0,ue.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m=function(e){var n,t,a,s,c,o,u,d,p,j,Z,v,g,y;return(0,ue.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=l.length-e,t=[],a=[],s=[],c=0,o=(0,En.Z)(r),i.prev=3,d=function(){var e=u.value,r=f[e],i=h[e];if(!r)return"continue";(0,pe.w6)(1,n).every((function(e){return!r.has(i+e)}))?s.push(e):r.has(i)?(0,pe.w6)(0,n).some((function(e){return!r.has(i+e)}))&&t.push(e):(c+=(0,de.Z)(r).find((function(e){return e>i}))-i,a.push(e))},o.s();case 6:if((u=o.n()).done){i.next=12;break}if("continue"!==d()){i.next=10;break}return i.abrupt("continue",10);case 10:i.next=6;break;case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(3),o.e(i.t0);case 17:return i.prev=17,o.f(),i.finish(17);case 20:if(!(c>n)){i.next=22;break}return i.abrupt("return");case 22:if(e!==l.length){i.next=26;break}return i.next=25,(0,M.Z)({},x);case 25:return i.abrupt("return");case 26:if(c!==n){i.next=47;break}p=(0,En.Z)(a),i.prev=28,p.s();case 30:if((j=p.n()).done){i.next=38;break}return Z=j.value,h[Z]++,x[Y.eV[l[e]]]={kind:"required",sets:new Set([Z])},i.delegateYield(m(e+1),"t1",35);case 35:h[Z]--;case 36:i.next=30;break;case 38:i.next=43;break;case 40:i.prev=40,i.t2=i.catch(28),p.e(i.t2);case 43:return i.prev=43,p.f(),i.finish(43);case 46:return i.abrupt("return");case 47:v=0,g=[].concat(t,a);case 48:if(!(v<g.length)){i.next=57;break}return y=g[v],h[y]++,x[Y.eV[l[e]]]={kind:"required",sets:new Set([y])},i.delegateYield(m(e+1),"t3",53);case 53:h[y]--;case 54:v++,i.next=48;break;case 57:return x[Y.eV[l[e]]]={kind:"exclude",sets:new Set([].concat(a,s,t))},i.delegateYield(m(e+1),"t4",59);case 59:case"end":return i.stop()}}),i,null,[[3,14,17,20],[28,40,43,46]])},p=function(e){var t,i,l;return(0,ue.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==s.length){n.next=3;break}return n.delegateYield(m(0),"t0",2);case 2:return n.abrupt("return",n.t0);case 3:t=(0,En.Z)(r),n.prev=4,l=(0,ue.Z)().mark((function n(){var t,r,l,c,o;return(0,ue.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=i.value,!a.has(t)){n.next=3;break}return n.abrupt("return","continue");case 3:if(r=s[e].length,l=f[t],c=0,!l||l.has(r)){n.next=9;break}if(!((c=(null!==(o=(0,pe.w6)(r+1,5).find((function(e){return l.has(e)})))&&void 0!==o?o:6)-r)>d)){n.next=9;break}return n.abrupt("return","continue");case 9:return a.add(t),h[t]=s[e].length,s[e].forEach((function(e){return x[Y.eV[e]]={kind:"required",sets:new Set([t])}})),d-=c,n.delegateYield(p(e+1),"t0",14);case 14:d+=c,h[t]=0,a.delete(t);case 17:case"end":return n.stop()}}),n)})),t.s();case 7:if((i=t.n()).done){n.next=14;break}return n.delegateYield(l(),"t1",9);case 9:if("continue"!==n.t1){n.next=12;break}return n.abrupt("continue",12);case 12:n.next=7;break;case 14:n.next=19;break;case 16:n.prev=16,n.t2=n.catch(4),t.e(n.t2);case 19:return n.prev=19,t.f(),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,16,19,22]])},n=(0,ue.Z)().mark(p),i=(0,ue.Z)().mark(m),a=new Set,s=[],l=[],c=(0,En.Z)(e);try{for(c.s();!(o=c.n()).done;)u=o.value,s.push([]),5===u?l.push(s.length-1):s[u].push(s.length-1)}catch(j){c.e(j)}finally{c.f()}return s=s.filter((function(e){return e.length})).sort((function(e,n){return n.length-e.length})),d=l.length,t.delegateYield(p(0),"t0",10);case 10:case"end":return t.stop()}}),t)},c=function(e,n){if(!(0,pe.w6)(n+1,4).some((function(n){return 5!==e[n]})))return(e=(0,de.Z)(e))[n]=5,e.reduce((function(e,n){return 6*e+n}),0)},s=function(e,n,t){if(5!==e.length){var r,l=(0,En.Z)(n);try{var c=function(){var i=r.value;s([].concat((0,de.Z)(e),[i]),n,t.filter((function(e){return e!==i})))};for(l.s();!(r=l.n()).done;)c()}catch(o){l.e(o)}finally{l.f()}s([].concat((0,de.Z)(e),[e.length]),new Set([].concat((0,de.Z)(n),[e.length])),[].concat((0,de.Z)(t),[e.length]))}else i.has(t.length)&&a.push(e)},t=(0,ue.Z)().mark(p),r=(0,de.Z)(new Set(n)),i=Gn(e.rainbow),a=[],s([0],new Set([0]),[0]),o=function(e){var n,t=new Map,r=(0,En.Z)(a);try{for(r.s();!(n=r.n()).done;){var i,s=n.value,o=c(s,e);void 0!==o&&t.set(o,(null!==(i=t.get(o))&&void 0!==i?i:new Set(s.slice(0,e)).size+1)-1)}}catch(h){r.e(h)}finally{r.f()}var u,d=(0,En.Z)(t.entries());try{var x=function(){var n=(0,l.Z)(u.value,2),t=n[0];if(0===n[1]){var r=(0,de.Z)(a.find((function(n){return c(n,e)===t})));r[e]=5,a=a.filter((function(n){return c(n,e)!==t})),a.push(r)}};for(d.s();!(u=d.n()).done;)x()}catch(h){d.e(h)}finally{d.f()}},u=4;u>=0;u--)o(u);d={kind:"exclude",sets:new Set},x=(0,pe.O)(Y.eV,(function(e){return d})),h=(0,M.Z)((0,M.Z)({},(0,pe.xh)(e,(function(e){return 0}))),(0,pe.O)(r,(function(e){return 0}))),f=(0,pe.xh)(e,Gn),m=(0,En.Z)(a),v.prev=14,m.s();case 16:if((j=m.n()).done){v.next=21;break}return Z=j.value,v.delegateYield(p(Z),"t0",19);case 19:v.next=16;break;case 21:v.next=26;break;case 23:v.prev=23,v.t1=v.catch(14),m.e(v.t1);case 26:return v.prev=26,m.f(),v.finish(26);case 29:case"end":return v.stop()}}),Rn,null,[[14,23,26,29]])}var Jn=t(16614),Un=t(76899),$n=t(37503);function Yn(e){var n,t=e.setKey,r=e.setNumKey,i=e.hideHeader,a=void 0!==i&&i,s=e.conditionalsOnly,l=void 0!==s&&s,c=(0,ke.Z)((function(){return he.y.get(t)}),[t]);if(!c)return null;var o=l?null===(n=c.setEffectDocument(r))||void 0===n?void 0:n.filter((function(e){return"states"in e})):c.setEffectDocument(r);return(0,H.jsx)(f.Z,{display:"flex",flexDirection:"column",children:o?(0,H.jsx)($n.Z,{sections:o,hideHeader:a}):null})}var Xn,Qn,et,nt,tt,rt,it,at,st,lt,ct,ot,ut,dt,xt,ht,ft=t(95614),pt=t(55221),mt=t(10157),jt=t(66624),Zt=t(18327);function vt(e){var n,t,r=e.disabled,i=(0,K.$)(["page_character","sheet"]).t,a=(0,E.useContext)(U.R),s=(0,E.useContext)(yn.t).database,c=(0,E.useContext)(F.K),o=c.character,u=o.key,d=o.conditional,x=c.characterDispatch,h=On(u),p=h.buildSetting.artSetExclusion,Z=h.buildSettingDispatch,v=(0,E.useState)(!1),b=(0,l.Z)(v,2),w=b[0],k=b[1],S=(0,E.useCallback)((function(){return k(!0)}),[k]),P=(0,E.useCallback)((function(){return k(!1)}),[k]),_=(0,ke.Z)((function(){return he.y.getAll}),[]),D=(0,E.useMemo)((function(){return _?Object.entries(he.y.setKeysByRarities(_)).reverse().flatMap((function(e){return(0,l.Z)(e,2)[1]})).filter((function(e){return!e.includes("Prayers")})):[]}),[_]),q=(0,Sn.Z)(),T=(0,l.Z)(q,2),N=T[0],V=T[1];(0,E.useEffect)((function(){return s.arts.followAny(V)}),[s,V]);var W=(0,E.useMemo)((function(){var e=Object.fromEntries(D.map((function(e){return[e,Object.fromEntries(Y.eV.map((function(e){return[e,0]})))]})));return s.arts.values.map((function(n){return e[n.setKey]&&e[n.setKey][n.slotKey]++})),N&&e}),[N,s,D]),L=!(null!==(n=p.rainbow)&&void 0!==n&&n.includes(2)),G=!(null!==(t=p.rainbow)&&void 0!==t&&t.includes(4)),J=(0,E.useMemo)((function(){return{allow2:D.filter((function(e){var n;return!(null!==(n=p[e])&&void 0!==n&&n.includes(2))})).length,allow4:D.filter((function(e){var n;return!(null!==(n=p[e])&&void 0!==n&&n.includes(4))})).length,exclude2:D.filter((function(e){var n;return null===(n=p[e])||void 0===n?void 0:n.includes(2)})).length,exclude4:D.filter((function(e){var n;return null===(n=p[e])||void 0===n?void 0:n.includes(4)})).length}}),[D,p]),$=J.allow2,X=J.allow4,Q=J.exclude2,ne=J.exclude4,te=(0,E.useMemo)((function(){return Object.keys(d).filter((function(e){return Y.q2.includes(e)&&0!==Object.keys(d[e]).length})).length}),[d]),re=(0,E.useMemo)((function(){return e=a,(0,M.Z)((0,M.Z)({},e),{},{data:new Zt.w((0,M.Z)((0,M.Z)({},e.data.data[0]),{},{artSet:(0,pe.O)(Y.q2,(function(e){return(0,_n.a9)(4)}))}),void 0)});var e}),[a]),ie=(0,E.useCallback)((function(){var e=Object.fromEntries(Object.entries(d).filter((function(e){var n=(0,l.Z)(e,2),t=n[0];n[1];return!Y.q2.includes(t)})));x({conditional:e})}),[d,x]),ae=(0,E.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,pe.I8)(p);D.forEach((function(r){var i;n?t[r]=[].concat((0,de.Z)(null!==(i=t[r])&&void 0!==i?i:[]),[e]):t[r]&&(t[r]=t[r].filter((function(n){return n!==e})))})),Z({artSetExclusion:t})}),[D,p,Z]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(A.Z,{sx:{display:"flex"},children:[(0,H.jsxs)(m.Z,{sx:{flexGrow:1},children:[(0,H.jsx)(y.Z,{children:(0,H.jsx)("strong",{children:i(Xn||(Xn=(0,B.Z)(["tabOptimize.artSetConfig.title"])))})}),(0,H.jsxs)(j.Z,{spacing:1,children:[(0,H.jsxs)(y.Z,{children:[i(Qn||(Qn=(0,B.Z)(["tabOptimize.artSetConfig.setEffCond"])))," ",(0,H.jsxs)(ee.Z,{color:te?"success":"secondary",children:[te," ",i("tabOptimize.artSetConfig.enabled")]})]}),(0,H.jsxs)(y.Z,{children:[i(et||(et=(0,B.Z)(["sheet:2set"])))," ",(0,H.jsxs)(ee.Z,{color:"success",children:[$," ",(0,H.jsx)(hn.G,{icon:xn.Stf,className:"fa-fw"})," ",i("tabOptimize.artSetConfig.allowed")]}),!!Q&&" / ",!!Q&&(0,H.jsxs)(ee.Z,{color:"secondary",children:[Q," ",(0,H.jsx)(hn.G,{icon:xn.gPx,className:"fa-fw"})," ",i("tabOptimize.artSetConfig.excluded")]})]}),(0,H.jsxs)(y.Z,{children:[i(nt||(nt=(0,B.Z)(["sheet:4set"])))," ",(0,H.jsxs)(ee.Z,{color:"success",children:[X," ",(0,H.jsx)(hn.G,{icon:xn.Stf,className:"fa-fw"})," ",i("tabOptimize.artSetConfig.allowed")]}),!!ne&&" / ",!!ne&&(0,H.jsxs)(ee.Z,{color:"secondary",children:[ne," ",(0,H.jsx)(hn.G,{icon:xn.gPx,className:"fa-fw"})," ",i("tabOptimize.artSetConfig.excluded")]})]}),(0,H.jsxs)(y.Z,{children:[i(tt||(tt=(0,B.Z)(["tabOptimize.artSetConfig.2rainbow"])))," ",(0,H.jsxs)(ee.Z,{color:L?"success":"secondary",children:[(0,H.jsx)(hn.G,{icon:L?xn.Stf:xn.gPx,className:"fa-fw"})," ",L?i("tabOptimize.artSetConfig.allowed"):"Excluded"]})]}),(0,H.jsxs)(y.Z,{children:[i(rt||(rt=(0,B.Z)(["tabOptimize.artSetConfig.4rainbow"])))," ",(0,H.jsxs)(ee.Z,{color:G?"success":"secondary",children:[(0,H.jsx)(hn.G,{icon:G?xn.Stf:xn.gPx,className:"fa-fw"})," ",G?i("tabOptimize.artSetConfig.allowed"):"Excluded"]})]})]})]}),(0,H.jsx)(O.Z,{onClick:S,disabled:r,color:"info",sx:{borderRadius:0},children:(0,H.jsx)(Jn.Z,{})})]}),_&&(0,H.jsx)($e.Z,{open:w,onClose:P,children:(0,H.jsxs)(R.Z,{children:[(0,H.jsxs)(m.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,H.jsx)(y.Z,{variant:"h6",children:i(it||(it=(0,B.Z)(["tabOptimize.artSetConfig.title"])))}),(0,H.jsx)(I.Z,{onClick:P})]}),(0,H.jsx)(C.Z,{}),(0,H.jsxs)(m.Z,{children:[(0,H.jsx)(A.Z,{sx:{mb:1},children:(0,H.jsxs)(m.Z,{children:[(0,H.jsxs)(f.Z,{display:"flex",gap:1,children:[(0,H.jsx)(y.Z,{children:(0,H.jsx)("strong",{children:i(at||(at=(0,B.Z)(["tabOptimize.artSetConfig.modal.setCond.title"])))})}),(0,H.jsx)(y.Z,{sx:{flexGrow:1},children:(0,H.jsxs)(ee.Z,{color:te?"success":"secondary",children:[te," ",i("tabOptimize.artSetConfig.selected")]})}),(0,H.jsx)(O.Z,{size:"small",onClick:ie,color:"error",startIcon:(0,H.jsx)(He.Z,{}),children:i(st||(st=(0,B.Z)(["tabOptimize.artSetConfig.modal.setCond.reset"])))})]}),(0,H.jsx)(y.Z,{children:i(lt||(lt=(0,B.Z)(["tabOptimize.artSetConfig.modal.setCond.text"])))})]})}),(0,H.jsx)(A.Z,{sx:{mb:1},children:(0,H.jsxs)(m.Z,{children:[(0,H.jsx)(y.Z,{sx:{flexGrow:1},children:(0,H.jsx)("strong",{children:(0,H.jsxs)(Un.c,{t:i,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.title",children:["Artifact Sets ",(0,H.jsxs)(z.Z,{color:"success",children:["Allowed",(0,H.jsx)(hn.G,{icon:xn.Stf,className:"fa-fw"})]})," / ",(0,H.jsxs)(z.Z,{color:"secondary",variant:"light",children:["Excluded",(0,H.jsx)(hn.G,{icon:xn.gPx,className:"fa-fw"})]})]})})}),(0,H.jsx)(y.Z,{children:(0,H.jsxs)(Un.c,{t:i,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.intro",children:["You can allow/exclude which sets you want the builder to consider. In the following examples, ",(0,H.jsx)("strong",{children:"A"})," is on-set, and ",(0,H.jsx)("strong",{children:"R"})," is rainbow(off-set)"]})}),(0,H.jsx)(y.Z,{children:(0,H.jsxs)(Un.c,{t:i,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.2set",children:[(0,H.jsx)("strong",{children:(0,H.jsxs)(z.Z,{color:"secondary",variant:"light",children:["Excluding",(0,H.jsx)(hn.G,{icon:xn.gPx,className:"fa-fw"})," 2-Set"]})})," would exclude 2-Set builds: ",(0,H.jsxs)("strong",{children:[(0,H.jsx)(z.Z,{color:"secondary",variant:"light",children:"AA"}),"RRR"]})," and ",(0,H.jsxs)("strong",{children:[(0,H.jsx)(z.Z,{color:"secondary",variant:"light",children:"AAA"}),"RR"]}),"."]})}),(0,H.jsx)(y.Z,{children:(0,H.jsxs)(Un.c,{t:i,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.4set",children:[(0,H.jsx)("strong",{children:(0,H.jsxs)(z.Z,{color:"secondary",variant:"light",children:["Excluding",(0,H.jsx)(hn.G,{icon:xn.gPx,className:"fa-fw"})," 4-Set"]})})," would exclude 4-Set builds: ",(0,H.jsxs)("strong",{children:[(0,H.jsx)(z.Z,{color:"secondary",variant:"light",children:"AAAA"}),"R"]})," and ",(0,H.jsx)("strong",{children:(0,H.jsx)(z.Z,{color:"secondary",variant:"light",children:"AAAAA"})}),"."]})}),(0,H.jsx)(y.Z,{children:(0,H.jsxs)(Un.c,{t:i,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.2rain",children:[(0,H.jsx)("strong",{children:(0,H.jsxs)(z.Z,{color:"secondary",variant:"light",children:["Excluding",(0,H.jsx)(hn.G,{icon:xn.gPx,className:"fa-fw"})," 3-Rainbow"]})})," would exclude 2-Set + 3-Rainbow builds: ",(0,H.jsxs)("strong",{children:["AA",(0,H.jsx)(z.Z,{color:"secondary",variant:"light",children:"RRR"})]})," and ",(0,H.jsxs)("strong",{children:["AAA",(0,H.jsx)(z.Z,{color:"secondary",variant:"light",children:"RR"})]}),"."]})}),(0,H.jsx)(y.Z,{children:(0,H.jsxs)(Un.c,{t:i,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.4rain",children:[(0,H.jsx)("strong",{children:(0,H.jsxs)(z.Z,{color:"secondary",variant:"light",children:["Excluding",(0,H.jsx)(hn.G,{icon:xn.gPx,className:"fa-fw"})," 5-Rainbow"]})})," would exclude full 5-Rainbow builds: ",(0,H.jsx)("strong",{children:(0,H.jsx)(z.Z,{color:"secondary",variant:"light",children:"RRRRR"})}),"."]})})]})}),(0,H.jsxs)(g.ZP,{container:!0,columns:{xs:2,lg:3},sx:{mb:1},spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(gt,{setNum:2,numAllow:$,numExclude:Q,setAllExclusion:ae})}),(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(gt,{setNum:4,numAllow:X,numExclude:ne,setAllExclusion:ae})}),(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(A.Z,{children:(0,H.jsxs)(m.Z,{children:[(0,H.jsx)(y.Z,{gutterBottom:!0,children:(0,H.jsx)("strong",{children:(0,H.jsxs)(Un.c,{t:i,i18nKey:"tabOptimize.artSetConfig.alExRainbow",children:[(0,H.jsxs)(z.Z,{color:"success",children:["Allow ",(0,H.jsx)(hn.G,{icon:xn.Stf,className:"fa-fw"})]})," / ",(0,H.jsxs)(z.Z,{color:"secondary",variant:"light",children:["Exclude ",(0,H.jsx)(hn.G,{icon:xn.gPx,className:"fa-fw"})]})," Rainbow Builds"]})})}),(0,H.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,H.jsx)(O.Z,{fullWidth:!0,onClick:function(){return Z({type:"artSetExclusion",setKey:"rainbow",num:2})},color:L?"success":"secondary",startIcon:L?(0,H.jsx)(qe.Z,{}):(0,H.jsx)(Te.Z,{}),endIcon:(0,H.jsx)(hn.G,{icon:L?xn.Stf:xn.gPx,className:"fa-fw"}),children:i(ct||(ct=(0,B.Z)(["tabOptimize.artSetConfig.2rainbow"])))}),(0,H.jsx)(O.Z,{fullWidth:!0,onClick:function(){return Z({type:"artSetExclusion",setKey:"rainbow",num:4})},color:G?"success":"secondary",startIcon:G?(0,H.jsx)(qe.Z,{}):(0,H.jsx)(Te.Z,{}),endIcon:(0,H.jsx)(hn.G,{icon:G?xn.Stf:xn.gPx,className:"fa-fw"}),children:i(ot||(ot=(0,B.Z)(["tabOptimize.artSetConfig.4rainbow"])))})]})]})})})]}),(0,H.jsx)(g.ZP,{container:!0,spacing:1,columns:{xs:2,lg:3},children:D.map((function(e){return(0,H.jsx)(yt,{setKey:e,sheet:_[e],fakeDataContextObj:re,slotCount:W[e]},e)}))})]}),(0,H.jsx)(C.Z,{}),(0,H.jsx)(m.Z,{sx:{py:1},children:(0,H.jsx)(I.Z,{large:!0,onClick:P})})]})})]})}function gt(e){var n=e.numAllow,t=e.numExclude,r=e.setNum,i=e.setAllExclusion,a=(0,K.$)(["page_character","sheet"]).t;return(0,H.jsx)(A.Z,{children:(0,H.jsxs)(m.Z,{children:[(0,H.jsxs)(y.Z,{gutterBottom:!0,children:[(0,H.jsx)("strong",{children:a("sheet:".concat(r,"set"))})," ",(0,H.jsxs)(ee.Z,{color:"success",children:[n," ",(0,H.jsx)(hn.G,{icon:xn.Stf,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.allowed")]}),!!t&&" / ",!!t&&(0,H.jsxs)(ee.Z,{color:"secondary",children:[t," ",(0,H.jsx)(hn.G,{icon:xn.gPx,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.excluded")]})]}),(0,H.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,H.jsx)(O.Z,{fullWidth:!0,disabled:!t,onClick:function(){return i(r,!1)},color:"success",startIcon:(0,H.jsx)(hn.G,{icon:xn.Stf,className:"fa-fw"}),children:a("tabOptimize.artSetConfig.allowAll".concat(r,"set"))}),(0,H.jsx)(O.Z,{fullWidth:!0,disabled:!n,onClick:function(){return i(r,!0)},color:"secondary",startIcon:(0,H.jsx)(hn.G,{icon:xn.gPx,className:"fa-fw"}),children:a("tabOptimize.artSetConfig.excludeAll".concat(r,"set"))})]})]})})}function yt(e){var n,t,r,i=e.sheet,a=e.setKey,s=e.fakeDataContextObj,c=e.slotCount,o=(0,K.$)("sheet").t,u=On((0,E.useContext)(F.K).character.key),d=u.buildSetting,x=u.buildSettingDispatch,h=null!==(n=null===d||void 0===d||null===(t=d.artSetExclusion)||void 0===t?void 0:t[a])&&void 0!==n?n:[],p=!h.includes(4),j=(0,E.useMemo)((function(){return Object.values(c).reduce((function(e,n){return e+(n?1:0)}),0)}),[c]),Z=(0,E.useMemo)((function(){return!p||j<4?[]:Object.keys(i.setEffects).filter((function(e){var n;return null===(n=i.setEffects[e])||void 0===n?void 0:n.document.some((function(e){return"states"in e}))}))}),[i.setEffects,p,j]),v=h.includes(2),b=h.includes(4);return j<2?null:(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsxs)(A.Z,{sx:{height:"100%"},children:[(0,H.jsxs)(f.Z,{className:"grad-".concat(i.rarity[0],"star"),width:"100%",sx:{display:"flex"},children:[(0,H.jsx)(f.Z,{component:"img",src:i.defIconSrc,sx:{height:100,width:"auto",mx:-1}}),(0,H.jsxs)(f.Z,{sx:{flexGrow:1,px:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,H.jsx)(y.Z,{variant:"h6",children:null!==(r=i.name)&&void 0!==r?r:""}),(0,H.jsxs)(f.Z,{display:"flex",gap:1,children:[(0,H.jsx)(y.Z,{variant:"subtitle1",children:i.rarity.map((function(e,n){return(0,H.jsxs)("span",{children:[e," ",(0,H.jsx)(mt.q,{stars:1})," ",n<i.rarity.length-1?"/ ":null]},e)}))}),(0,H.jsx)(pt.Z,{title:(0,H.jsxs)(f.Z,{children:[(0,H.jsx)(y.Z,{children:(0,H.jsx)(ee.Z,{color:"success",children:o(ut||(ut=(0,B.Z)(["2set"])))})}),(0,H.jsx)(y.Z,{children:(0,H.jsx)(jt.v,{ns:"artifact_".concat(a,"_gen"),key18:"setEffects.2"})}),(0,H.jsxs)(f.Z,{paddingTop:2,sx:{opacity:h.includes(4)?.6:1},children:[(0,H.jsx)(y.Z,{children:(0,H.jsx)(ee.Z,{color:"success",children:o(dt||(dt=(0,B.Z)(["4set"])))})}),(0,H.jsx)(y.Z,{children:(0,H.jsx)(jt.v,{ns:"artifact_".concat(a,"_gen"),key18:"setEffects.4"})})]})]})})]}),(0,H.jsx)(f.Z,{sx:{display:"flex",gap:1},children:Object.entries(c).map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return(0,H.jsx)(y.Z,{sx:{flexGrow:1},variant:"subtitle2",children:(0,H.jsxs)(ee.Z,{sx:{width:"100%"},color:r?"primary":"secondary",children:[(0,ft.Ir)(t),r]})},t)}))})]})]}),(0,H.jsxs)(De.Z,{sx:{".MuiButton-root":{borderRadius:0}},fullWidth:!0,children:[j>=2&&(0,H.jsx)(O.Z,{startIcon:v?(0,H.jsx)(Te.Z,{}):(0,H.jsx)(qe.Z,{}),onClick:function(){return x({type:"artSetExclusion",setKey:a,num:2})},color:v?"secondary":"success",endIcon:(0,H.jsx)(hn.G,{icon:v?xn.gPx:xn.Stf,className:"fa-fw"}),children:o(xt||(xt=(0,B.Z)(["2set"])))}),j>=4&&(0,H.jsx)(O.Z,{startIcon:b?(0,H.jsx)(Te.Z,{}):(0,H.jsx)(qe.Z,{}),onClick:function(){return x({type:"artSetExclusion",setKey:a,num:4})},color:b?"secondary":"success",endIcon:(0,H.jsx)(hn.G,{icon:b?xn.gPx:xn.Stf,className:"fa-fw"}),children:o(ht||(ht=(0,B.Z)(["4set"])))})]}),!!Z.length&&(0,H.jsx)(U.R.Provider,{value:s,children:(0,H.jsx)(m.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:Z.map((function(e){return(0,H.jsx)(Yn,{setKey:a,setNumKey:parseInt(e),hideHeader:!0,conditionalsOnly:!0},e)}))})})]})},a)}var bt=[0,4,8,12,16,20];function wt(e){var n=e.mainStatAssumptionLevel,t=void 0===n?0:n,r=e.setmainStatAssumptionLevel,i=e.disabled,a=(0,K.$)("page_character").t;return(0,H.jsx)(X.Z,{fullWidth:!0,color:t?"success":"primary",disabled:i,title:t?a("tabOptimize.assumptionLvl.lvl",{lvl:t}):a("tabOptimize.assumptionLvl.no"),children:bt.map((function(e){return(0,H.jsx)(L.Z,{onClick:function(){return r(e)},children:e?a("tabOptimize.assumptionLvl.lvl",{lvl:e}):a("tabOptimize.assumptionLvl.no")},e)}))})}function Ct(){var e=(0,E.useContext)(F.K).character.bonusStats,n=(0,E.useContext)(U.R).data,t=Object.keys(e);if(!t.length)return null;var r=t.map((function(e){return n.get($.ri.customBonus[e])}));return(0,H.jsxs)(A.Z,{children:[(0,H.jsx)(m.Z,{children:(0,H.jsx)(y.Z,{children:"Bonus Stats"})}),(0,H.jsx)(C.Z,{}),(0,H.jsx)(m.Z,{children:r.map((function(e){return(0,H.jsx)(Ue.JW,{node:e},e.info.key)}))})]})}var kt=t(57482),St=t(52771),Pt=(0,T.ZP)("strong")({fontFamily:"monospace"}),Ot=(0,T.ZP)(kt.Z)((function(e){e.theme;return{height:10,borderRadius:5}}));function Et(e){var n=e.status,t=n.type,r=n.tested,i=(n.failed,n.skipped),a=n.total,s=n.startTime,l=n.finishTime,c=e.characterName,o=isFinite(a),u="inactive"!==t,d=a-i,x=(0,H.jsx)(Pt,{children:r.toLocaleString()}),h=(0,H.jsx)(Pt,{children:d.toLocaleString()}),f=!!i&&(0,H.jsxs)("span",{children:["(",(0,H.jsx)("b",{children:(0,H.jsx)(Pt,{children:i.toLocaleString()})})," skipped)"]}),p=(0,H.jsx)(Pt,{children:(0,St.e6)(Math.round((null!==l&&void 0!==l?l:performance.now())-(null!==s&&void 0!==s?s:NaN)))}),m="",j="",Z=void 0;if(u)Z=100*r/d,m=(0,H.jsxs)(y.Z,{children:["Generating and testing ",x,o?(0,H.jsxs)(H.Fragment,{children:["/",h]}):void 0," build configurations against the criteria for ",(0,H.jsx)("b",{children:c}),". ",f]}),j=(0,H.jsxs)(y.Z,{children:["Time elapsed: ",p]});else{if(!(r+i))return null;Z=100,m=(0,H.jsxs)(y.Z,{children:["Generated and tested ",x," Build configurations against the criteria for ",(0,H.jsx)("b",{children:c}),". ",f]}),j=(0,H.jsxs)(y.Z,{children:["Total duration: ",p]})}return(0,H.jsxs)(pn.Z,{severity:"success",variant:"filled",sx:{"& .MuiAlert-message":{flexGrow:1}},children:[m,j,void 0!==Z&&(0,H.jsxs)(g.ZP,{container:!0,spacing:1,alignItems:"center",children:[o&&(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(y.Z,{children:"".concat(Z.toFixed(1),"%")})}),(0,H.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,H.jsx)(Ot,{variant:o?"determinate":"indeterminate",value:Z,color:"primary"})})]})]})}var Kt=t(98268),_t=t(63204),Dt=t(66647),Rt=t(13967),At=t(12065),It=t(10658),zt=t(98620),Mt=t(63372),qt=t(20005),Tt=t(64929);function Nt(e){var n,t,r=e.artifactId,i=e.slotKey,a=e.mainStatAssumptionLevel,s=void 0===a?0:a,l=e.showLocation,c=void 0!==l&&l,o=e.onClick,u=e.BGComponent,d=void 0===u?R.Z:u,x=(0,Mt.Z)(r),h=(0,ke.Z)((function(){return he.y.get(null===x||void 0===x?void 0:x.setKey)}),[null===x||void 0===x?void 0:x.setKey]),p=(0,E.useCallback)((function(e){return(0,H.jsx)(Dt.Z,{onClick:o,sx:{height:"100%"},children:e})}),[o]),m=(0,Rt.Z)();if(!x)return(0,H.jsx)(d,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,H.jsx)(f.Z,{component:"img",src:It.Z.slot[i],sx:{width:"25%",height:"auto",opacity:.7}})});var j=x.slotKey,Z=x.rarity,v=x.level,g=x.mainStatKey,b=x.substats,w=x.location,C=Math.max(Math.min(s,4*Z),v),k=ye.ZP.unit(g),S="roll"+(Math.floor(Math.max(v,0)/4)+1),P=Y.Kj.find((function(e){return x.mainStatKey.includes(e)})),O=P?(0,At.Fq)(m.palette[P].main,.6):(0,At.Fq)(m.palette.secondary.main,.6);return(0,H.jsx)(d,{sx:{height:"100%"},children:(0,H.jsx)(qt.Z,{condition:!!o,wrapper:p,children:(0,H.jsxs)(f.Z,{display:"flex",height:"100%",children:[(0,H.jsxs)(f.Z,{className:"grad-".concat(Z,"star"),sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,H.jsx)(Tt.Z,{art:x,children:(0,H.jsx)(f.Z,{component:"img",src:null!==(n=null===h||void 0===h?void 0:h.slotIcons[j])&&void 0!==n?n:"",sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),(0,H.jsxs)(f.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,H.jsx)(Ne.Z,{size:"small",label:(0,H.jsx)("strong",{children:" +".concat(v)}),color:S}),c&&(0,H.jsx)(Ne.Z,{size:"small",label:(0,H.jsx)(Vt,{location:w}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,H.jsx)(Ne.Z,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:O},label:(0,H.jsxs)(y.Z,{sx:{display:"flex",gap:.5,px:1,zIndex:1},children:[(0,H.jsx)(vn.Z,{placement:"top",title:(0,H.jsx)(y.Z,{children:ye.ZP.getArtStr(g)}),disableInteractive:!0,children:(0,H.jsx)("span",{children:P?ne.hJ[P]:ne.ZP[g]})}),(0,H.jsxs)(z.Z,{color:C!==v?"warning":void 0,children:[(0,ye.qs)(null!==(t=zt.Z.mainStatValue(g,Z,C))&&void 0!==t?t:0,ye.ZP.unit(g)),k]})]})})]}),(0,H.jsx)(f.Z,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:b.map((function(e,n){return(0,H.jsx)(Ht,{stat:e},n+e.key)}))})]})})})}function Ht(e){var n,t,r=e.stat;if(!r.value)return null;var i=null!==(n=null===(t=r.rolls)||void 0===t?void 0:t.length)&&void 0!==n?n:0,a="roll".concat((0,pe.uZ)(i,1,6)),s=ye.ZP.unit(r.key);return(0,H.jsx)(f.Z,{display:"flex",gap:1,alignContent:"center",children:(0,H.jsxs)(y.Z,{sx:{flexGrow:1,display:"flex",gap:.5},color:i?"".concat(a,".main"):"error.main",component:"span",children:[(0,H.jsx)(vn.Z,{placement:"top",title:(0,H.jsx)(y.Z,{children:r.key&&ye.ZP.getArtStr(r.key)}),disableInteractive:!0,children:(0,H.jsx)("span",{children:ne.ZP[r.key]})}),(0,H.jsx)("span",{children:"".concat((0,ye.qs)(r.value,ye.ZP.unit(r.key))).concat(s)})]})})}function Vt(e){var n=e.location,t=(0,ke.Z)((function(){return oe.Z.get(null!==n&&void 0!==n?n:"")}),[n]);return t?(0,H.jsx)(vn.Z,{placement:"right-end",title:(0,H.jsx)(y.Z,{children:t.name}),children:(0,H.jsx)(ce.Z,{src:t.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,H.jsx)(_t.Z,{})}var Wt=t(16002),Bt=(0,E.createContext)(void 0),Lt=t(18726);function Gt(){var e=ge((0,E.useContext)(U.R).data);return(0,H.jsx)(Me.Z,{sx:{mr:-1,mb:-1},children:(0,H.jsx)(Wt.ZP,{columns:{xs:1,sm:2,md:3,xl:4},spacing:1,children:e.map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return(0,H.jsx)(Ft,{displayNs:r,sectionKey:t},t)}))})})}function Ft(e){var n=e.displayNs,t=e.sectionKey,r=(0,E.useContext)(Bt),i=(0,E.useContext)(U.R),a=i.data,s=i.oldData,c=(0,ke.Z)((function(){return Ze(a,t)}),[a,t]),o=(0,E.useMemo)((function(){return(0,pe.xh)(n,(function(e,n){return(0,_n.UF)(["display",t,n])}))}),[n,t]);if(!c)return(0,H.jsx)(R.Z,{});var u=c.title,d=c.icon,x=c.action;return(0,H.jsxs)(R.Z,{children:[(0,H.jsx)(Lt.Z,{avatar:d&&(0,H.jsx)(ce.Z,{size:2,sx:{m:-1},src:d}),title:u,action:x&&(0,H.jsx)(ee.Z,{children:x})}),(0,H.jsx)(C.Z,{}),(0,H.jsx)(Ue.lD,{sx:{m:0},children:Object.entries(n).map((function(e){var n=(0,l.Z)(e,2),i=n[0],a=n[1];return(0,H.jsx)(Ue.JW,{node:a,oldValue:s?s.get(o[i]).value:void 0,component:ze.ZP,emphasize:JSON.stringify(r)===JSON.stringify([t,i])},i)}))})]})}var Jt=t(74480),Ut=t(41717);function $t(e){var n=e.weaponId,t=e.showLocation,r=void 0!==t&&t,i=e.onClick,a=e.BGComponent,s=void 0===a?R.Z:a,l=(0,Jt.Z)(n),c=(0,ke.Z)((function(){return(null===l||void 0===l?void 0:l.key)&&fe.Z.get(l.key)}),[null===l||void 0===l?void 0:l.key]),o=(0,E.useCallback)((function(e){return(0,H.jsx)(Dt.Z,{sx:{height:"100%"},onClick:i,children:e})}),[i]),u=(0,E.useMemo)((function(){return c&&l&&(0,bn.mP)([c.data,(0,bn.v0)(l)])}),[c,l]);if(!l||!c||!u)return(0,H.jsx)(s,{sx:{height:"100%"},children:(0,H.jsx)(p.Z,{variant:"rectangular",sx:{width:"100%",height:"100%"}})});var d=l.refinement,x=l.location;return(0,H.jsx)(s,{sx:{height:"100%"},children:(0,H.jsx)(qt.Z,{condition:!!i,wrapper:o,children:(0,H.jsxs)(f.Z,{display:"flex",height:"100%",alignItems:"stretch",children:[(0,H.jsxs)(f.Z,{className:"grad-".concat(c.rarity,"star"),sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[(0,H.jsx)(Ut.Z,{sheet:c,children:(0,H.jsx)(f.Z,{component:"img",src:c.getImg(l.ascension),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),(0,H.jsxs)(f.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,H.jsx)(Ne.Z,{size:"small",label:(0,H.jsx)("strong",{children:fe.Z.getLevelString(l)}),color:"primary"}),r&&(0,H.jsx)(Ne.Z,{size:"small",label:(0,H.jsx)(Xt,{location:x}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,H.jsx)(f.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:c.hasRefinement&&(0,H.jsx)(Ne.Z,{size:"small",color:"info",label:(0,H.jsxs)("strong",{children:["R",d]})})})]}),(0,H.jsxs)(f.Z,{display:"flex",flexDirection:"column",sx:{p:1},children:[(0,H.jsx)(Yt,{node:u.get($.qH.weapon.main)}),(0,H.jsx)(Yt,{node:u.get($.qH.weapon.sub)})]})]})})})}function Yt(e){var n=e.node;if(!n.info.key)return null;var t=(0,ye.EC)(n.value,n.unit,n.unit?void 0:0);return(0,H.jsx)(f.Z,{display:"flex",gap:1,alignContent:"center",children:(0,H.jsxs)(y.Z,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[(0,H.jsx)(vn.Z,{placement:"top",title:(0,H.jsx)(y.Z,{children:n.info.key&&ye.ZP.getArtStr(n.info.key)}),disableInteractive:!0,children:(0,H.jsx)("span",{children:ne.ZP[n.info.key]})}),(0,H.jsx)("span",{children:t})]})})}function Xt(e){var n=e.location,t=(0,ke.Z)((function(){return oe.Z.get(null!==n&&void 0!==n?n:"")}),[n]);return t?(0,H.jsx)(vn.Z,{placement:"right-end",title:(0,H.jsx)(y.Z,{children:t.name}),children:(0,H.jsx)(ce.Z,{src:t.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,H.jsx)(_t.Z,{})}var Qt=t(72838);function er(e){var n=e.index,t=e.compareBuild,r=e.extraButtons,i=e.disabled,a=(0,E.useContext)(F.K).character,s=a.key,c=a.equippedArtifacts,o=On(s).buildSetting.mainStatAssumptionLevel,u=(0,E.useContext)(yn.t).database,d=(0,E.useContext)(U.R),x=d.data,h=d.oldData,f=(0,E.useState)(void 0),j=(0,l.Z)(f,2),Z=j[0],v=j[1],b=(0,E.useCallback)((function(){return v(void 0)}),[v]),w=(0,E.useCallback)((function(){if(window.confirm("Do you want to equip this build to this character?")){var e=Object.fromEntries(Y.eV.map((function(e){return[e,x.get($.ri.art[e].id).value]})));u.chars.equipArtifacts(s,e),u.weapons.set(x.get($.ri.weapon.id).value,{location:s})}}),[s,x,u]),C=(0,E.useMemo)((function(){var e=(0,M.Z)({},d);return t||(e.oldData=void 0),e}),[d,t]),k=(0,E.useMemo)((function(){return Y.eV.map((function(e){return(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(Nt,{showLocation:!0,slotKey:e,artifactId:x.get($.ri.art[e].id).value,mainStatAssumptionLevel:o,onClick:function(){var n=c[e],t=x.get($.ri.art[e].id).value;v({oldId:n!==t?n:void 0,newId:t})}})},e)}))}),[x,v,c,o]);if(!h)return null;var S=Y.eV.every((function(e){return x.get($.ri.art[e].id).value===h.get($.ri.art[e].id).value}))&&x.get($.ri.weapon.id).value===h.get($.ri.weapon.id).value;return(0,H.jsx)(A.Z,{children:(0,H.jsxs)(E.Suspense,{fallback:(0,H.jsx)(p.Z,{variant:"rectangular",width:"100%",height:600}),children:[Z&&(0,H.jsx)(ir,{newOld:Z,mainStatAssumptionLevel:o,onClose:b}),(0,H.jsxs)(m.Z,{children:[(0,H.jsxs)(Me.Z,{display:"flex",gap:1,sx:{pb:1},flexWrap:"wrap",children:[void 0!==n&&(0,H.jsx)(ee.Z,{color:"info",children:(0,H.jsx)(y.Z,{children:(0,H.jsxs)("strong",{children:["#",n+1,S?" (Equipped)":""]})})}),(0,H.jsx)(nr,{currentlyEquipped:S}),(0,H.jsx)(Me.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),(0,H.jsx)(O.Z,{size:"small",color:"success",onClick:w,disabled:i||S,children:"Equip Build"}),r]}),(0,H.jsxs)(g.ZP,{container:!0,spacing:1,sx:{pb:1},columns:{xs:2,sm:3,md:4,lg:6},children:[(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)($t,{showLocation:!0,weaponId:x.get($.ri.weapon.id).value})}),k]}),(0,H.jsx)(U.R.Provider,{value:C,children:(0,H.jsx)(Gt,{})})]})]})})}function nr(e){var n=e.currentlyEquipped,t=void 0!==n&&n,r=(0,E.useContext)(U.R).data,i={};return Y.eV.forEach((function(e){var n=r.get($.ri.art[e].set).value;n&&(i[n]?i[n].push(e):i[n]=[e])})),(0,H.jsx)(H.Fragment,{children:Object.entries(i).sort((function(e,n){var t=(0,l.Z)(e,2),r=(t[0],t[1]),i=(0,l.Z)(n,2);i[0];return i[1].length-r.length})).map((function(e){var n=(0,l.Z)(e,2),r=n[0],i=n[1];return(0,H.jsx)(tr,{setKey:r,currentlyEquipped:t,slotarr:i},r)}))})}function tr(e){var n,t=e.setKey,r=e.currentlyEquipped,i=void 0!==r&&r,a=e.slotarr,s=(0,ke.Z)((function(){return he.y.get(t)}),[]);return s?(0,H.jsx)(Me.Z,{children:(0,H.jsx)(vn.Z,{placement:"top",title:(0,H.jsx)(E.Suspense,{fallback:(0,H.jsx)(p.Z,{variant:"rectangular",width:100,height:100}),children:(0,H.jsx)(rr,{artifactSheet:s,numInSet:a.length})}),disableInteractive:!0,children:(0,H.jsx)(ee.Z,{color:i?"success":"primary",children:(0,H.jsxs)(y.Z,{children:[a.map((function(e){return(0,ft.Ir)(e)}))," ",null!==(n=s.name)&&void 0!==n?n:""]})})})}):null}function rr(e){var n=e.artifactSheet,t=e.numInSet,r=(0,K.$)("sheet").t;return(0,H.jsx)(j.Z,{spacing:2,sx:{p:1},children:Object.keys(n.setEffects).map((function(e){return(0,H.jsxs)(Me.Z,{sx:{opacity:parseInt(e)<=t?1:.5},children:[(0,H.jsx)(y.Z,{children:(0,H.jsx)(ee.Z,{color:"success",children:r("".concat(e,"set"))})}),(0,H.jsx)(y.Z,{children:(0,H.jsx)(jt.v,{ns:"artifact_".concat(n.key,"_gen"),key18:"setEffects.".concat(e)})})]})}))})}function ir(e){var n=e.newOld,t=n.newId,r=n.oldId,i=e.mainStatAssumptionLevel,a=e.onClose,s=(0,E.useContext)(yn.t).database,l=(0,E.useContext)(F.K).character.key,c=(0,E.useCallback)((function(){window.confirm("Do you want to equip this artifact to this character?")&&(s.arts.set(t,{location:l}),a())}),[t,s,l,a]);return(0,H.jsx)($e.Z,{open:!!t,onClose:a,containerProps:{maxWidth:r?"md":"xs"},children:(0,H.jsx)(R.Z,{children:(0,H.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2,height:"100%"},children:[r&&(0,H.jsx)(Me.Z,{minWidth:320,children:(0,H.jsx)(Qt.Z,{artifactId:r,mainStatAssumptionLevel:i,canExclude:!0,canEquip:!0})}),r&&(0,H.jsx)(Me.Z,{display:"flex",flexGrow:1}),r&&(0,H.jsx)(Me.Z,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,H.jsx)(O.Z,{onClick:c,sx:{display:"flex"},children:(0,H.jsx)(Kt.Z,{sx:{fontSize:40}})})}),r&&(0,H.jsx)(Me.Z,{display:"flex",flexGrow:1}),(0,H.jsx)(Me.Z,{minWidth:320,children:(0,H.jsx)(Qt.Z,{artifactId:t,mainStatAssumptionLevel:i,canExclude:!0,canEquip:!0})})]})})})}var ar=t(94294),sr=t(72456),lr=t(40165),cr=t(19913),or=t(37389),ur=t(82839),dr=t(90466),xr=t(12891),hr=t(42633),fr=t(27281),pr=t(64694),mr=t(62066);function jr(e){var n=e.chartData,t=e.plotBase,r=e.setPlotBase,i=e.disabled,a=void 0!==i&&i,s=(0,E.useState)(!1),c=(0,l.Z)(s,2),o=c[0],u=c[1],d=(0,E.useState)(!0),x=(0,l.Z)(d,2),h=x[0],f=x[1],p=(0,E.useContext)(U.R).data,j=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==p.get($.ri.weaponType).value&&j.push("physical_dmg_"),j.push("".concat(p.get($.ri.charEle).value,"_dmg_"));var Z=(0,E.useMemo)((function(){var e,t;if(!n)return{displayData:null,downloadData:null};var r,i=n.data.map((function(e){var n=e.value;return{x:e.plot,y:n}})).sort((function(e,n){return e.x-n.x})),a=[],s=(0,En.Z)(i);try{for(s.s();!(r=s.n()).done;){for(var l=r.value,c=void 0;c=a.pop();)if(c.y>l.y){a.push(c);break}a.push(l)}}catch(u){s.e(u)}finally{s.f()}(null===(e=a[0])||void 0===e?void 0:e.x)!==(null===(t=i[0])||void 0===t?void 0:t.x)&&(i[0].min=a[0].y),a.forEach((function(e){e.min=e.y}));var o={minimum:a.map((function(e){return[e.x,e.y]})),allData:i.map((function(e){return[e.x,e.y]}))};return{displayData:i,downloadData:o}}),[n]),v=Z.displayData,w=Z.downloadData;return(0,H.jsxs)(A.Z,{children:[(0,H.jsx)(m.Z,{children:(0,H.jsxs)(g.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(y.Z,{variant:"h6",children:"Optimization Target vs"})}),(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsxs)(X.Z,{title:t?ye.ZP.get(t):"Not Selected",color:t?"success":"primary",disabled:a,children:[(0,H.jsx)(L.Z,{onClick:function(){r("")},children:"Unselect"}),(0,H.jsx)(C.Z,{}),j.map((function(e){return(0,H.jsx)(L.Z,{onClick:function(){r(e)},children:ye.ZP.get(e)},e)}))]})}),(0,H.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,H.jsx)(lr.Z,{placement:"top",title:"Using data from the builder, this will generate a graph to visualize Optimization Target vs. a selected stat. The graph will show the maximum Optimization Target value per 0.01 of the selected stat.",children:(0,H.jsx)(ar.Z,{})})}),!!w&&(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(O.Z,{startIcon:h?(0,H.jsx)(qe.Z,{}):(0,H.jsx)(Te.Z,{}),color:h?"success":"secondary",onClick:function(){return f(!h)},children:"Show Min Stat Threshold"})}),!!w&&(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(O.Z,{color:"info",startIcon:(0,H.jsx)(sr.Z,{}),onClick:function(){return u(!o)},children:"Download Data"})})]})}),!!v&&(0,H.jsx)(C.Z,{}),n&&!!v&&(0,H.jsxs)(m.Z,{children:[(0,H.jsx)(b.Z,{in:!!w&&o,children:(0,H.jsx)(R.Z,{sx:{mb:2},children:(0,H.jsxs)(m.Z,{children:[(0,H.jsx)(y.Z,{children:"Min Data"}),(0,H.jsx)(vr,{data:null===w||void 0===w?void 0:w.minimum}),(0,H.jsx)(y.Z,{children:"All Data"}),(0,H.jsx)(vr,{data:null===w||void 0===w?void 0:w.allData})]})})}),(0,H.jsx)(gr,{displayData:v,plotNode:n.plotNode,valueNode:n.valueNode,showMin:h})]})]})}var Zr=(0,T.ZP)("textarea")({width:"100%",fontFamily:"monospace",resize:"vertical",minHeight:"5em"});function vr(e){var n=e.data;return(0,H.jsx)(Zr,{readOnly:!0,value:JSON.stringify(n),onClick:function(e){var n=e.target;n.selectionStart=0,n.selectionEnd=n.value.length}})}function gr(e){var n,t,r=e.displayData,i=e.plotNode,a=e.valueNode,s=e.showMin,l=ye.ZP.unit(null===(n=i.info)||void 0===n?void 0:n.key),c=ye.ZP.unit(null===(t=a.info)||void 0===t?void 0:t.key);return(0,H.jsx)(cr.h,{width:"100%",height:600,children:(0,H.jsxs)(or.c,{data:r,children:[(0,H.jsx)(ur.q,{strokeDasharray:"3 3"}),(0,H.jsx)(dr.K,{dataKey:"x",scale:"linear",unit:l,domain:["auto","auto"],tick:{fill:"white"},type:"number",tickFormatter:function(e){return e>1e4?e.toFixed():e.toFixed(1)}}),(0,H.jsx)(xr.B,{name:"DMG",domain:["auto","auto"],unit:c,allowDecimals:!1,tick:{fill:"white"},type:"number"}),(0,H.jsx)(hr.d,{dataKey:"y",range:[3,25]}),(0,H.jsx)(fr.D,{}),(0,H.jsx)(pr.b,{name:"Optimization Target",dataKey:"y",fill:"#8884d8",line:!0,lineType:"fitting",isAnimationActive:!1}),s&&(0,H.jsx)(mr.x,{name:"Minimum Stat Requirement Threshold",dataKey:"min",stroke:"#ff7300",type:"stepBefore",connectNulls:!0,strokeWidth:2,isAnimationActive:!1})]})})}var yr=["sands","goblet","circlet"];function br(e){var n=e.disabled,t=void 0!==n&&n,r=(0,K.$)("artifact").t,i=On((0,E.useContext)(F.K).character.key),a=i.buildSetting.mainStatKeys,s=i.buildSettingDispatch;return(0,H.jsx)(Me.Z,{display:"flex",flexDirection:"column",gap:1,children:yr.map((function(e){var n=a[e].length;return(0,H.jsxs)(Me.Z,{children:[(0,H.jsx)(C.Z,{}),(0,H.jsxs)(m.Z,{sx:{pt:1},children:[(0,H.jsxs)(Me.Z,{sx:{display:"flex",gap:1,alignItems:"center",pb:1},children:[(0,H.jsx)(vn.Z,{placement:"top",title:(0,H.jsx)(y.Z,{children:r("slotName.".concat(e))}),children:(0,H.jsx)("span",{children:(0,ft.Ir)(e)})}),(0,H.jsx)(Me.Z,{flexGrow:1,children:(0,H.jsx)(ee.Z,{color:"info",children:n?"".concat(n," Selected"):"Any"})}),(0,H.jsx)(O.Z,{color:"error",size:"small",disabled:!a[e].length||t,sx:{mt:-1,mb:-1},onClick:function(){return s({type:"mainStatKey",slotKey:e})},children:(0,H.jsx)(He.Z,{})})]}),(0,H.jsx)(g.ZP,{container:!0,spacing:1,children:zt.Z.slotMainStats(e).map((function(n,r){var i=Y.Kj.find((function(e){return n.includes(e)})),l=a[e].includes(n)?null!==i&&void 0!==i?i:"success":"secondary";return(0,H.jsx)(g.ZP,{item:!0,flexGrow:1,xs:r<3?4:void 0,children:(0,H.jsx)(vn.Z,{placement:"top",title:(0,H.jsx)(y.Z,{children:(0,H.jsx)("strong",{children:ye.ZP.getArtStr(n)})}),disableInteractive:!0,children:(0,H.jsx)(O.Z,{fullWidth:!0,size:"small",color:l,sx:{fontSize:"1.2em",height:"100%",pointerEvents:t?"none":void 0,cursor:t?"none":void 0},onClick:function(){return s({type:"mainStatKey",slotKey:e,mainStatKey:n})},children:i?ne.hJ[i]:ne.ZP[n]})})},n)}))})]})]},e)}))})}var wr=t(25028);function Cr(e){var n=e.show,t=e.onClose,r=e.setTarget,i=e.useSubVariant,a=void 0!==i&&i,s=e.flatOnly,c=void 0!==s&&s,o=e.excludeSections,u=void 0===o?[]:o,d=ge((0,E.useContext)(U.R).data).filter((function(e){var n=(0,l.Z)(e,1)[0];return!u.includes(n)})).filter((function(e){var n=(0,l.Z)(e,2),t=(n[0],n[1]);return Object.values(t).some((function(e){return!e.isEmpty&&(!c||!(c&&ye.ZP.unit(e.info.key)))}))}));return(0,H.jsx)($e.Z,{open:n,onClose:t,children:(0,H.jsx)(R.Z,{children:(0,H.jsx)(m.Z,{children:(0,H.jsx)(Wt.ZP,{columns:{xs:1,sm:2,md:3},spacing:1,children:d.map((function(e){var n=(0,l.Z)(e,2),t=n[0],i=n[1];return(0,H.jsx)(kr,{displayNs:i,sectionKey:t,setTarget:r,useSubVariant:a,flatOnly:c},t)}))})})})})}function kr(e){var n=e.displayNs,t=e.sectionKey,r=e.setTarget,i=e.useSubVariant,a=void 0!==i&&i,s=e.flatOnly,c=void 0!==s&&s,o=(0,E.useContext)(U.R).data,u=(0,ke.Z)((function(){return Ze(o,t)}),[o,t]);return(0,H.jsxs)(A.Z,{children:[u&&(0,H.jsx)(w.Z,{avatar:u.icon&&(0,H.jsx)(ce.Z,{size:2,sx:{m:-1},src:u.icon}),title:u.title,action:u.action&&(0,H.jsx)(ee.Z,{children:u.action}),titleTypographyProps:{variant:"subtitle1"}}),(0,H.jsx)(C.Z,{}),(0,H.jsx)(wr.Z,{children:Object.entries(n).map((function(e){var n=(0,l.Z)(e,2),i=n[0],s=n[1];return(0,H.jsx)(Sr,{node:s,onClick:function(){return r([t,i])},useSubVariant:a,flatOnly:c},i)}))})]},t)}function Sr(e){var n=e.node,t=e.onClick,r=e.useSubVariant,i=void 0!==r&&r,a=e.flatOnly,s=void 0!==a&&a;return n.isEmpty||s&&ye.ZP.unit(n.info.key)?null:(0,H.jsx)(L.Z,{onClick:t,style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,H.jsx)(z.Z,{color:i?n.info.subVariant:n.info.variant,children:ye.ZP.get(n.info.key)})})}function Pr(e){var n=e.optimizationTarget,t=e.setTarget,r=e.disabled,i=void 0!==r&&r,a=e.useSubVariant,s=void 0!==a&&a,c=e.targetSelectorModalProps,o=void 0===c?{}:c,u=(0,be.Z)(!1),d=(0,l.Z)(u,3),x=d[0],h=d[1],f=d[2],p=(0,E.useCallback)((function(e){f(),t(e)}),[f,t]),m=(0,E.useContext)(U.R).data,Z=(0,ke.Z)((function(){return n&&Ze(m,n[0])}),[m,n]),v=null!==Z&&void 0!==Z?Z:{},g=v.title,y=v.icon,b=v.action,w=n&&(0,pe.Hm)(m.getDisplay(),n),k=!n||!Z||!w,S=k?"secondary":s?w.info.subVariant:w.info.variant;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(O.Z,{color:"primary",onClick:h,disabled:i,children:k?(0,H.jsx)("strong",{children:"Select an Optimization Target"}):(0,H.jsxs)(j.Z,{direction:"row",divider:(0,H.jsx)(C.Z,{orientation:"vertical",flexItem:!0}),spacing:1,children:[(0,H.jsxs)(Me.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[!!y&&(0,H.jsx)(ce.Z,{src:y,size:2,sx:{my:-1}}),(0,H.jsx)("span",{children:g}),!!b&&(0,H.jsx)(ee.Z,{color:"success",children:b})]}),(0,H.jsx)(ee.Z,{color:S,children:(0,H.jsx)("strong",{children:ye.ZP.get(w.info.key)})})]})}),(0,H.jsx)(Cr,(0,M.Z)({show:x,onClose:f,setTarget:p,useSubVariant:s},o))]})}var Or=t(89841),Er=t(70558),Kr=t(1235),_r=t(68125),Dr=t(68087),Rr=t(52991),Ar=t(84684),Ir=t(77208),zr=navigator.hardwareConcurrency||4;function Mr(){return{equipmentPriority:[],threads:zr}}function qr(){return(0,kn.Z)("TabOptimize",Mr)}function Tr(e){var n=e.disabled,t=void 0!==n&&n,r=(0,K.$)("page_character").t,i=(0,E.useContext)(F.K).character.key,a=On(i),s=a.buildSetting.useEquippedArts,c=a.buildSettingDispatch,o=(0,E.useContext)(yn.t).database,u=(0,be.Z)(!1),d=(0,l.Z)(u,3),x=d[0],h=d[1],p=d[2],j=qr(),Z=(0,l.Z)(j,2),v=Z[0].equipmentPriority,b=Z[1],w=(0,E.useMemo)((function(){return(0,de.Z)(new Set(v)).filter((function(e){return o.chars.get(e)}))}),[o,v]),k=(0,E.useCallback)((function(e){return b({equipmentPriority:e})}),[b]),S=(0,E.useCallback)((function(e,n){var t=(0,de.Z)(w),r=t[e];t.splice(e,1),t.splice(n,0,r),k(t)}),[w,k]),P=(0,E.useCallback)((function(e){var n=(0,de.Z)(w);n.splice(e,1),k(n)}),[w,k]),_=(0,E.useCallback)((function(e){return k([].concat((0,de.Z)(w),[e]))}),[w,k]),D=(0,E.useCallback)((function(){return k([])}),[k]),z=(0,E.useMemo)((function(){var e=w.length,n=w.indexOf(i);return n>=0&&(e=n),e}),[i,w]),M=(0,E.useMemo)((function(){return o.chars.keys.length-1-z}),[z,o]),q=(0,E.useMemo)((function(){return o.chars.keys.length-w.length}),[w,o]);return(0,H.jsxs)(f.Z,{display:"flex",gap:1,children:[(0,H.jsx)($e.Z,{open:x,onClose:p,containerProps:{maxWidth:"sm"},children:(0,H.jsxs)(R.Z,{children:[(0,H.jsx)(m.Z,{children:(0,H.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,H.jsx)(y.Z,{variant:"h6",children:(0,H.jsx)(Un.c,{t:r,i18nKey:"tabOptimize.useEquipped.modal.title",children:"Character Priority for Equipped Artifacts"})})}),(0,H.jsx)(g.ZP,{item:!0,sx:{mb:-1},children:(0,H.jsx)(I.Z,{onClick:p})})]})}),(0,H.jsx)(C.Z,{}),(0,H.jsxs)(m.Z,{children:[(0,H.jsx)(A.Z,{sx:{mb:1},children:(0,H.jsxs)(m.Z,{children:[(0,H.jsx)(y.Z,{gutterBottom:!0,children:(0,H.jsx)(Un.c,{t:r,i18nKey:"tabOptimize.useEquipped.modal.desc1",children:"When generating a build, the Optimizer will only consider equipped artifacts from characters below the current character or those not on the list."})}),(0,H.jsx)(y.Z,{gutterBottom:!0,children:(0,H.jsx)(Un.c,{t:r,i18nKey:"tabOptimize.useEquipped.modal.desc2",children:"If the current character is not on the list, the Optimizer will only consider equipped artifacts from others characters that are not on the list."})})]})}),(0,H.jsxs)(f.Z,{display:"flex",flexDirection:"column",gap:2,children:[w.map((function(e,n){return(0,H.jsx)(Nr,{characterKey:e,rank:n+1,maxRank:w.length,setRank:function(e){return e&&S(n,e-1)},onRemove:function(){return P(n)},numAbove:z},e)})),(0,H.jsxs)(f.Z,{sx:{display:"flex",gap:1},children:[(0,H.jsx)(Hr,{onAdd:_,list:w}),(0,H.jsx)(O.Z,{color:"error",onClick:D,startIcon:(0,H.jsx)(He.Z,{}),children:(0,H.jsx)(Un.c,{t:r,i18nKey:"tabOptimize.useEquipped.modal.clearList",children:"Clear List"})})]}),!!M&&(0,H.jsx)(ee.Z,{color:"success",children:(0,H.jsx)(y.Z,{children:(0,H.jsxs)(Un.c,{t:r,i18nKey:"tabOptimize.useEquipped.modal.usingNum",count:q,children:["Using artifacts from ",(0,H.jsx)("strong",{children:{count:q}})," unlisted characters"]})})})]})]})]})}),(0,H.jsxs)(De.Z,{sx:{display:"flex",width:"100%"},children:[(0,H.jsx)(O.Z,{sx:{flexGrow:1},onClick:function(){return c({useEquippedArts:!s})},disabled:t,startIcon:s?(0,H.jsx)(qe.Z,{}):(0,H.jsx)(Te.Z,{}),color:s?"success":"secondary",children:(0,H.jsxs)(f.Z,{children:[(0,H.jsx)("span",{children:(0,H.jsx)(Un.c,{t:r,i18nKey:"tabOptimize.useEquipped.title",children:"Use Equipped Artifacts"})}),s&&(0,H.jsx)(ee.Z,{children:(0,H.jsxs)(Un.c,{t:r,i18nKey:"tabOptimize.useEquipped.usingNum",count:M,children:["Using from ",(0,H.jsx)("strong",{children:{count:M}})," characters"]})})]})}),s&&(0,H.jsx)(O.Z,{sx:{flexShrink:1},color:"info",onClick:h,disabled:t,children:(0,H.jsx)(Jn.Z,{})})]})]})}function Nr(e){var n=e.characterKey,t=e.rank,r=e.maxRank,i=e.setRank,a=e.onRemove,s=e.numAbove,c=(0,K.$)("page_character").t,o=(0,E.useContext)(yn.t).database,u=(0,we.Z)(n),d=(0,Ke.Z)();if(!u)return null;var x=u.equippedWeapon,h=u.equippedArtifacts;return(0,H.jsxs)(A.Z,{sx:{p:1},children:[(0,H.jsxs)(f.Z,{sx:{pb:1,display:"flex",justifyContent:"space-between",gap:1},children:[(0,H.jsx)(ee.Z,{color:"info",children:(0,H.jsxs)(y.Z,{children:["#",t]})}),(0,H.jsx)(ee.Z,{sx:{flexGrow:1},color:s===t-1?"warning":t-1<s?"error":"success",children:(0,H.jsx)(y.Z,{children:s===t-1?(0,H.jsx)(Un.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.curr",children:"Current character"}):t-1<s?(0,H.jsx)(Un.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.dont",children:"Don't Use artifacts"}):(0,H.jsx)(Un.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.use",children:"Use artifacts"})})}),(0,H.jsx)(f.Z,{children:(0,H.jsxs)(De.Z,{sx:{flexGrow:1},size:"small",children:[(0,H.jsx)(Re.CC,{children:(0,H.jsx)(Re.ZP,{onChange:i,value:t,inputProps:{min:1,max:r,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),(0,H.jsx)(O.Z,{disabled:1===t,onClick:function(){return i(1)},children:(0,H.jsx)(Or.Z,{})}),(0,H.jsx)(O.Z,{disabled:1===t,onClick:function(){return i(t-1)},children:(0,H.jsx)(Er.Z,{})}),(0,H.jsx)(O.Z,{disabled:t===r,onClick:function(){return i(t+1)},children:(0,H.jsx)(Kr.Z,{})}),(0,H.jsx)(O.Z,{disabled:t===r,onClick:function(){return i(r)},children:(0,H.jsx)(_r.Z,{})}),(0,H.jsx)(O.Z,{color:"error",onClick:a,children:(0,H.jsx)(fn.Z,{})})]})})]}),(0,H.jsxs)(g.ZP,{container:!0,columns:7,spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(Ar.Z,{characterKey:n,onClick:d})}),(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(Ir.Z,{weaponId:x})}),Object.entries(h).map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(Rr.Z,{slotKey:t,artifactObj:o.arts.get(r)})},t)}))]})]})}function Hr(e){var n=e.onAdd,t=e.list,r=(0,K.$)("page_character").t,i=(0,be.Z)(!1),a=(0,l.Z)(i,3),s=a[0],c=a[1],o=a[2],u=(0,E.useCallback)((function(e){return!!e&&!t.includes(e.key)}),[t]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Oe.w,{show:s,onHide:o,onSelect:n,filter:u}),(0,H.jsx)(O.Z,{fullWidth:!0,sx:{height:60},color:"info",onClick:c,startIcon:(0,H.jsx)(Dr.Z,{}),children:(0,H.jsx)(Un.c,{t:r,i18nKey:"tabOptimize.useEquipped.modal.add",children:"Add character to list"})})]})}function Vr(e){var n=e.disabled,t=void 0!==n&&n,r=e.artsDirty,i=(0,K.$)("page_character").t,a=(0,E.useContext)(F.K).character.key,s=On(a),l=s.buildSetting.useExcludedArts,c=s.buildSettingDispatch,o=(0,E.useContext)(yn.t).database,u=(0,E.useMemo)((function(){return r&&o.arts.values.reduce((function(e,n){return e+(n.exclude&&n.location!==a?1:0)}),0)}),[o,r,a]);return(0,H.jsx)(O.Z,{fullWidth:!0,onClick:function(){return c({useExcludedArts:!l})},disabled:!u||t,startIcon:l?(0,H.jsx)(qe.Z,{}):(0,H.jsx)(Te.Z,{}),color:l?"success":"secondary",children:(0,H.jsxs)(f.Z,{children:[(0,H.jsx)("span",{children:(0,H.jsx)(Un.c,{t:i,i18nKey:"tabOptimize.useExcluded.title",count:u,children:"Use Excluded Artifacts"})}),l&&(0,H.jsx)(ee.Z,{children:(0,H.jsxs)(Un.c,{t:i,i18nKey:"tabOptimize.useExcluded.usingNum",count:u,children:["Using ",(0,H.jsx)("strong",{children:{count:u}})," excluded artifacts"]})})]})})}var Wr,Br,Lr,Gr=t(4942),Fr=t(50765),Jr=(0,_n.yY)((0,pe.I8)({dyn:(0,M.Z)((0,M.Z)({},$.qH.art),$.qH.artSet)})),Ur={art:(0,pe.O)([].concat((0,de.Z)(Fr.r),(0,de.Z)(Fr._)),(function(e){return Jr.dyn[e]})),artSet:(0,pe.xh)($.qH.artSet,(function(e,n){return Jr.dyn[n]}))};function $r(e,n,t){var r,i={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},a=new Set,s=(0,En.Z)(e);try{for(s.s();!(r=s.n()).done;){var l,c=r.value,o=zt.Z.mainStatValue(c.mainStatKey,c.rarity,Math.max(Math.min(n,4*c.rarity),c.level)),u={id:c.id,set:c.setKey,values:(0,M.Z)((l={},(0,Gr.Z)(l,c.setKey,1),(0,Gr.Z)(l,c.mainStatKey,c.mainStatKey.endsWith("_")?o/100:o),l),Object.fromEntries(c.substats.map((function(e){return[e.key,e.key.endsWith("_")?e.accurateValue/100:e.accurateValue]}))))};delete u.values[""],i.values[c.slotKey].push(u),Object.keys(u.values).forEach((function(e){return a.add(e)}))}}catch(h){s.e(h)}finally{s.f()}if(i.base=(0,pe.O)((0,de.Z)(a),(function(e){return 0})),t)for(var d=0,x=Object.values(i.values);d<x.length;d++){x[d].push({id:"",values:{}})}return i}function Yr(e){var n=e.disabled,t=void 0!==n&&n,r=(0,K.$)("page_character").t,i=(0,E.useContext)(F.K).character.key,a=(0,E.useContext)(U.R).data,s=On(i),l=s.buildSetting.statFilters,c=s.buildSettingDispatch,o=(0,E.useCallback)((function(e){return c({statFilters:e})}),[c]),u=(0,E.useMemo)((function(){var e=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==a.get($.qH.weaponType).value&&e.push("physical_dmg_");var n=a.get($.qH.charEle).value;return e.push("".concat(n,"_dmg_")),e}),[a]);return(0,H.jsxs)(f.Z,{children:[(0,H.jsx)(A.Z,{children:(0,H.jsxs)(m.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,H.jsx)(y.Z,{children:r(Wr||(Wr=(0,B.Z)(["tabOptimize.constraintFilter.title"])))}),(0,H.jsx)(pt.Z,{title:(0,H.jsx)(y.Z,{children:r(Br||(Br=(0,B.Z)(["tabOptimize.constraintFilter.tooltip"])))})})]})}),(0,H.jsx)(f.Z,{display:"flex",flexDirection:"column",gap:.5,children:(0,H.jsx)(Ye.Z,{statKeys:u,statFilters:l,setStatFilters:o,disabled:t})})]})}function Xr(){var e,n,t=(0,K.$)("page_character").t,r=(0,E.useContext)(F.K).character,i=r.key,a=r.compareData,s=(0,kn.Z)("GlobalSettings",Cn.c),c=(0,l.Z)(s,1)[0].tcMode,o=(0,E.useContext)(yn.t).database,u=(0,E.useState)({type:"inactive",tested:0,failed:0,skipped:0,total:0}),d=(0,l.Z)(u,2),x=d[0],h=d[1],p="inactive"!==x.type,j=(0,E.useState)(void 0),Z=(0,l.Z)(j,2),v=Z[0],b=Z[1],w=(0,Sn.Z)(),k=(0,l.Z)(w,2),S=k[0],P=k[1],D=qr(),R=(0,l.Z)(D,2),I=R[0],z=I.equipmentPriority,q=I.threads,T=void 0===q?zr:q,N=R[1],V=T>zr?zr:T,W=(0,E.useCallback)((function(e){return N({threads:e})}),[N]),J=(0,Ce.Z)(i),Y=(0,Ke.Z)(),ee=(0,E.useMemo)((function(){return!o.arts.values.length}),[o]),ne=On(i),te=ne.buildSetting,re=ne.buildSettingDispatch,ie=te.plotBase,ae=te.optimizationTarget,ce=te.mainStatAssumptionLevel,oe=te.allowPartial,he=te.builds,fe=te.buildDate,me=te.maxBuildsToShow,je=te.levelLow,Ze=te.levelHigh,ve=(0,Se.Z)(i,ce),ge=null!==(e=null===ve||void 0===ve?void 0:ve[i])&&void 0!==e?e:{},be=ge.characterSheet,we=ge.target,ke=(0,E.useMemo)((function(){return he.map((function(e){return e.map((function(e){return o.arts.get(e)}))}))}),[he,o]);(0,E.useEffect)((function(){return o.arts.followAny(P)}),[P,o]);var Pe=(0,E.useRef)((function(){}));(0,E.useEffect)((function(){return function(){return Pe.current()}}),[]);var Oe=(0,E.useCallback)((0,xe.Z)((0,ue.Z)().mark((function e(){var n,t,r,a,s,c,u,d,x,f,p,m,j,Z,v,g,y,w,C,k,S,P,O,E,K,_,D,R,A,I,q,T,N,H,W,B,L,G,F,J,U,Y,X,Q,ee,ne,ie,ae,se,le,ce,oe,he,fe,me,je;return(0,ue.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X=function(){var e=L.pop();return e?{command:"iterate",threshold:N.buildValues[m-1],filter:e}:void 0},Y=function(){var e=B.next(),n=e.done,t=e.value;return n?void 0:{command:"split",minCount:H,threshold:N.buildValues[m-1],filter:t}},U=function(){return{command:"split",filter:void 0,minCount:H,threshold:N.buildValues[m-1]}},r=te.artSetExclusion,a=te.plotBase,s=te.statFilters,c=te.mainStatKeys,u=te.optimizationTarget,d=te.mainStatAssumptionLevel,x=te.useExcludedArts,f=te.useEquippedArts,p=te.allowPartial,m=te.maxBuildsToShow,j=te.levelLow,Z=te.levelHigh,i&&u){e.next=6;break}return e.abrupt("return");case 6:return v=[],f&&(g=z.indexOf(i),v=g<0?(0,de.Z)(z):z.slice(0,g)),y=o.arts.values.filter((function(e){if(e.level<j)return!1;if(e.level>Z)return!1;var n=c[e.slotKey];return!(null!==n&&void 0!==n&&n.length&&!n.includes(e.mainStatKey))&&(e.location===i||!(e.exclude&&!x)&&(!(e.location&&!f)&&!(e.location&&f&&v.includes(e.location))))})),w=$r(y,d,p),e.next=12,(0,Se.V)(o,i,d,[]);case 12:if(C=e.sent){e.next=15;break}return e.abrupt("return");case 15:if(k=null===(n=(0,bn.Qo)(C.teamData,i)[i])||void 0===n?void 0:n.target.data[0]){e.next=18;break}return e.abrupt("return");case 18:if(Object.assign(k,(0,bn.b3)([k,Ur])),S=(0,pe.Hm)(null!==(t=k.display)&&void 0!==t?t:{},u)){e.next=22;break}return e.abrupt("return");case 22:for(P=S,O=Object.entries(s).map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return t.endsWith("_")&&(r/=100),{value:$.ri.total[t],minimum:r}})).filter((function(e){return e.value&&e.minimum>-1/0})),b(void 0),E=new Promise((function(e){return Pe.current=e})),K=[].concat((0,de.Z)(O.map((function(e){return e.value}))),[S]),_=w,D=Ln(Fn(r,Object.values(w.values).flatMap((function(e){return e.map((function(e){return e.set}))}))),w),R=[].concat((0,de.Z)(O.map((function(e){return e.minimum}))),[-1/0]),A={tested:0,failed:0,skipped:0,total:NaN,startTime:performance.now()},a&&(K.push($.ri.total[a]),R.push(-1/0)),I=_,K=(0,wn.tL)(K,k,(function(e){return"dyn"!==(0,l.Z)(e.path,1)[0]})),q=An(K,R,_,m,r,{reaffine:!0,pruneArtRange:!0,pruneNodeRange:!0,pruneOrder:!0}),K=q.nodes,_=q.arts,K=(0,wn.tL)(K,{},(function(e){return!1})),T=a?K.pop():void 0,S=K.pop(),N={buildValues:Array(m).fill(0).map((function(e){return-1/0}))},H=8e6,W=4*V,B=D[Symbol.iterator](),L=[],G=[],F=new Set,J=[],Q=K.map((function(e,n){return{value:e,min:R[n]}})).filter((function(e){return e.min>-1/0})),ee=[],ne=function(e){var n=new jn,t={command:"setup",id:e,arts:_,optimizationTarget:S,plotBase:T,maxBuilds:m,filters:Q};if(n.postMessage(t,void 0),0===e){var i={command:"count",exclusion:r,arts:[_,I]};n.postMessage(i,void 0)}var a=void 0,s=new Promise((function(e){return a=e}));n.onmessage=function(){var e=(0,xe.Z)((0,ue.Z)().mark((function e(t){var r,i,s,c,o,u,d,x;return(0,ue.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.data,e.t0=r.command,e.next="interim"===e.t0?4:"split"===e.t0?9:"iterate"===e.t0?12:"finalize"===e.t0?14:"count"===e.t0?17:21;break;case 4:return A.tested+=r.tested,A.failed+=r.failed,A.skipped+=r.skipped,r.buildValues&&((i=N.buildValues).push.apply(i,(0,de.Z)(r.buildValues)),N.buildValues.sort((function(e,n){return n-e})).splice(m)),e.abrupt("break",22);case 9:return r.filter?(L.push(r.filter),F.add(r.id)):F.delete(r.id),G.push(r.id),e.abrupt("break",22);case 12:return G.push(r.id),e.abrupt("break",22);case 14:return n.terminate(),a(r),e.abrupt("return");case 17:return s=(0,l.Z)(r.counts,2),c=s[0],o=s[1],A.total=o,A.skipped+=o-c,e.abrupt("return");case 21:console.log("DEBUG",r);case 22:if(!G.length){e.next=36;break}if(u=G.pop(),d=J[u],x=void 0,L.length<W&&!(x=Y())&&F.has(u)&&(x=U()),x||(x=X()),!x){e.next=31;break}d.postMessage(x),e.next=34;break;case 31:return G.push(u),G.length===8*V&&function(){var e={command:"finalize"};J.forEach((function(n){return n.postMessage(e)}))}(),e.abrupt("break",36);case 34:e.next=22;break;case 36:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J.push(n),E.then((function(){return n.terminate()})),ee.push(s)},ie=0;ie<V;ie++)ne(ie);for(ae=0;ae<7;ae++)G.push.apply(G,(0,de.Z)((0,pe.w6)(0,V-1)));return se=setInterval((function(){return h((0,M.Z)({type:"active"},A))}),100),e.next=52,Promise.any([Promise.all(ee),E]);case 52:le=e.sent,clearInterval(se),Pe.current=function(){},le?(a&&(he=Bn(le.map((function(e){return e.plotData}))),fe=$.ri.total[a],me=Object.values(he),"%"===ye.ZP.unit(null===(ce=P.info)||void 0===ce?void 0:ce.key)&&(me=me.map((function(e){return{value:100*e.value,plot:e.plot}}))),"%"===ye.ZP.unit(null===(oe=fe.info)||void 0===oe?void 0:oe.key)&&(me=me.map((function(e){var n=e.value,t=e.plot;return{value:n,plot:100*(null!==t&&void 0!==t?t:0)}}))),b({valueNode:P,plotNode:fe,data:me})),je=Wn(le.map((function(e){return e.builds})),m),re({builds:je.map((function(e){return e.artifactIds})),buildDate:Date.now()})):(A.tested=0,A.failed=0,A.skipped=0,A.total=0),h((0,M.Z)((0,M.Z)({},A),{},{type:"inactive",finishTime:performance.now()}));case 57:case"end":return e.stop()}}),e)}))),[i,o,re,V,te,z]),Ee=null!==(n=null===be||void 0===be?void 0:be.name)&&void 0!==n?n:"Character Name",_e=(0,E.useCallback)((function(e){re({plotBase:e}),b(void 0)}),[re]),Re=(0,E.useMemo)((function(){return we&&ve&&{data:we,teamData:ve}}),[we,ve]);return(0,H.jsxs)(f.Z,{display:"flex",flexDirection:"column",gap:1,children:[ee&&(0,H.jsxs)(pn.Z,{severity:"warning",variant:"filled",children:[" Opps! It looks like you haven't added any artifacts to GO yet! You should go to the ",(0,H.jsx)(mn.Z,{component:_.rU,to:"/artifact",children:"Artifacts"})," page and add some!"]}),Re&&(0,H.jsxs)(U.R.Provider,{value:Re,children:[(0,H.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:(0,H.jsx)(f.Z,{children:(0,H.jsx)(gn.Z,{characterKey:i,onClickTeammate:Y})})}),(0,H.jsxs)(g.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,H.jsxs)(A.Z,{children:[(0,H.jsxs)(m.Z,{children:[(0,H.jsx)(y.Z,{gutterBottom:!0,children:"Main Stat"}),(0,H.jsx)(vn.Z,{placement:"top",title:(0,H.jsxs)(y.Z,{children:[(0,H.jsx)("strong",{children:"Level Assumption"})," changes mainstat value to be at least a specific level. Does not change substats."]}),children:(0,H.jsx)(f.Z,{children:(0,H.jsx)(wt,{mainStatAssumptionLevel:ce,setmainStatAssumptionLevel:function(e){return re({mainStatAssumptionLevel:e})},disabled:p})})})]}),(0,H.jsx)(br,{disabled:p})]}),(0,H.jsx)(Ct,{})]}),(0,H.jsxs)(g.ZP,{item:!0,xs:12,sm:6,lg:6,display:"flex",flexDirection:"column",gap:1,children:[(0,H.jsx)(vt,{disabled:p}),(0,H.jsx)(Vr,{disabled:p,artsDirty:S}),(0,H.jsx)(Tr,{disabled:p}),(0,H.jsx)(O.Z,{fullWidth:!0,startIcon:oe?(0,H.jsx)(qe.Z,{}):(0,H.jsx)(Te.Z,{}),color:oe?"success":"secondary",onClick:function(){return re({allowPartial:!oe})},children:t(Lr||(Lr=(0,B.Z)(["tabOptimize.allowPartial"])))}),(0,H.jsxs)(A.Z,{children:[(0,H.jsx)(m.Z,{children:"Artifact Level Filter"}),(0,H.jsx)(Zn.Z,{levelLow:je,levelHigh:Ze,setLow:function(e){return re({levelLow:e})},setHigh:function(e){return re({levelHigh:e})},setBoth:function(e,n){return re({levelLow:e,levelHigh:n})},disabled:p})]}),(0,H.jsx)(Yr,{disabled:p})]})]}),(0,H.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,H.jsxs)(De.Z,{children:[(0,H.jsx)(O.Z,{disabled:!i||p||!ae||!(0,pe.Hm)(null===we||void 0===we?void 0:we.getDisplay(),ae),color:i?"success":"warning",onClick:Oe,startIcon:(0,H.jsx)(hn.G,{icon:xn.lTt}),children:"Generate Builds"}),(0,H.jsxs)(X.Z,{disabled:p||!i,title:(0,H.jsxs)("span",{children:[(0,H.jsx)("b",{children:me})," ",1===me?"Build":"Builds"]}),children:[(0,H.jsx)(L.Z,{children:(0,H.jsx)(y.Z,{variant:"caption",color:"info.main",children:"Decreasing the number of generated build will decrease build calculation time for large number of builds."})}),(0,H.jsx)(C.Z,{}),Pn.s.map((function(e){return(0,H.jsxs)(L.Z,{onClick:function(){return re({maxBuildsToShow:e})},children:[e," ",1===e?"Build":"Builds"]},e)}))]}),(0,H.jsxs)(X.Z,{disabled:p||!i,title:(0,H.jsxs)("span",{children:[(0,H.jsx)("b",{children:V})," ",1===V?"Thread":"Threads"]}),children:[(0,H.jsx)(L.Z,{children:(0,H.jsx)(y.Z,{variant:"caption",color:"info.main",children:"Increasing the number of threads will speed up build time, but will use more CPU power."})}),(0,H.jsx)(C.Z,{}),(0,pe.w6)(1,zr).reverse().map((function(e){return(0,H.jsxs)(L.Z,{onClick:function(){return W(e)},children:[e," ",1===e?"Thread":"Threads"]},e)}))]}),(0,H.jsx)(O.Z,{disabled:!p,color:"error",onClick:function(){return Pe.current()},startIcon:(0,H.jsx)(fn.Z,{}),children:"Cancel"})]})}),(0,H.jsxs)(g.ZP,{item:!0,children:[(0,H.jsx)("span",{children:"Optimization Target: "}),(0,H.jsx)(Pr,{optimizationTarget:ae,setTarget:function(e){return re({optimizationTarget:e})},disabled:!!p})]})]}),!!i&&(0,H.jsx)(Et,{status:x,characterName:Ee,maxBuildsToShow:me}),c&&(0,H.jsx)(f.Z,{children:(0,H.jsx)(jr,{disabled:p,chartData:v,plotBase:ie,setPlotBase:_e})}),(0,H.jsx)(A.Z,{children:(0,H.jsxs)(m.Z,{children:[(0,H.jsxs)(f.Z,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,H.jsx)(y.Z,{sx:{flexGrow:1},children:he?(0,H.jsxs)("span",{children:["Showing ",(0,H.jsx)("strong",{children:he.length})," Builds generated for ",Ee,". ",!!fe&&(0,H.jsxs)("span",{children:["Build generated on: ",(0,H.jsx)("strong",{children:new Date(fe).toLocaleString()})]})]}):(0,H.jsx)("span",{children:"Select a character to generate builds."})}),(0,H.jsx)(O.Z,{disabled:!he.length,color:"error",onClick:function(){return re({builds:[],buildDate:0})},children:"Clear Builds"})]}),(0,H.jsxs)(g.ZP,{container:!0,display:"flex",spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(le,{size:"small"})}),(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(se,{size:"small"})}),(0,H.jsx)(g.ZP,{item:!0,flexGrow:1}),(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsxs)(Q.Z,{exclusive:!0,value:a,onChange:function(e,n){return J({compareData:n})},size:"small",children:[(0,H.jsx)(G.Z,{value:!1,disabled:!a,children:(0,H.jsx)("small",{children:"Show New artifact Stats"})}),(0,H.jsx)(G.Z,{value:!0,disabled:a,children:(0,H.jsx)("small",{children:"Compare against equipped artifacts"})})]})})]})]})}),(0,H.jsx)(Bt.Provider,{value:ae,children:(0,H.jsx)(Qr,{buildsArts:ke,characterKey:i,data:we,compareData:a,disabled:!!p})})]})]})}function Qr(e){var n=e.buildsArts,t=e.characterKey,r=e.data,i=e.compareData,a=e.disabled;return(0,E.useMemo)((function(){return(0,H.jsx)(E.Suspense,{fallback:(0,H.jsx)(p.Z,{variant:"rectangular",width:"100%",height:600}),children:null===n||void 0===n?void 0:n.map((function(e,n){return t&&r&&(0,H.jsx)(ei,{characterKey:t,build:e,oldData:r,children:(0,H.jsx)(er,{index:n,compareBuild:i,disabled:a})},n+e.join())}))})}),[n,t,r,i,a])}function ei(e){var n=e.children,t=e.characterKey,r=e.build,i=e.oldData,a=On(t).buildSetting.mainStatAssumptionLevel,s=(0,Se.Z)(t,a,r),l=(0,E.useMemo)((function(){return s&&{data:s[t].target,teamData:s,oldData:i}}),[s,i,t]);return l?(0,H.jsx)(U.R.Provider,{value:l,children:n}):null}var ni,ti,ri=t(14361),ii=t(90690),ai=t(96874),si=t(97719),li=t(95193),ci=t(30418),oi=t(15678),ui=t(901),di=t(90543),xi=t(44824),hi=t(70645),fi=t(46956),pi=t(99405);function mi(e){var n=e.artId,t=e.weaponId,r=(0,K.$)("page_character").t,i=(0,be.Z)(!1),a=(0,l.Z)(i,3),s=a[0],c=a[1],o=a[2],u=(0,E.useContext)(yn.t).database,d=(0,E.useContext)(F.K).character,x=d.key,h=d.equippedArtifacts,f=On(x).buildSetting.mainStatAssumptionLevel,m=(0,E.useContext)(U.R).data,j=(0,E.useMemo)((function(){var e=u.arts.get(null!==n&&void 0!==n?n:""),t=(0,pe.xh)(h,(function(n,t){return t===(null===e||void 0===e?void 0:e.slotKey)?e:u.arts.get(n)}));return Object.values(t)}),[u,h,n]),Z=(0,Se.Z)(x,f,j,t?u.weapons.get(t):void 0),v=(0,E.useMemo)((function(){return Z&&{data:Z[x].target,teamData:Z,oldData:m}}),[x,Z,m]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)($e.Z,{open:s,onClose:o,containerProps:{maxWidth:"xl"},children:(0,H.jsx)(E.Suspense,{fallback:(0,H.jsx)(p.Z,{variant:"rectangular",width:"100%",height:600}),children:v&&(0,H.jsx)(U.R.Provider,{value:v,children:(0,H.jsx)(er,{compareBuild:!0,extraButtons:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(le,{size:"small"}),(0,H.jsx)(se,{size:"small"}),(0,H.jsx)(O.Z,{size:"small",color:"error",onClick:o,children:(0,H.jsx)(fn.Z,{})})]})})})})}),(0,H.jsx)(lr.Z,{title:(0,H.jsx)(y.Z,{children:r(ni||(ni=(0,B.Z)(["tabEquip.compare"])))}),placement:"top",arrow:!0,children:(0,H.jsx)(O.Z,{color:"info",size:"small",onClick:c,children:(0,H.jsx)(pi.Z,{})})})]})}var ji={xs:6,sm:6,md:9,lg:12,xl:12},Zi=(0,E.lazy)((function(){return t.e(23).then(t.bind(t,80367))}));function vi(e){var n=e.onChangeId,t=e.slotKey,r=e.show,i=e.onClose,a=(0,K.$)("page_character").t,s=(0,E.useContext)(yn.t).database,c=(0,E.useCallback)((function(e){n(e),i()}),[n,i]),o=(0,E.useCallback)((function(e,n){return(0,M.Z)((0,M.Z)((0,M.Z)({},e),n),{},{slotKeys:[t]})}),[t]),u=(0,E.useReducer)(o,(0,M.Z)((0,M.Z)({},(0,xi.Af)()),{},{slotKeys:[t]})),d=(0,l.Z)(u,2),x=d[0],h=d[1],j=(0,Sn.Z)(),Z=(0,l.Z)(j,2),v=Z[0],b=Z[1];(0,E.useEffect)((function(){return s.arts.followAny(b)}),[s,b]);var w=(0,hi.Z)(),k=(0,E.useMemo)((function(){return(0,xi.EM)()}),[]),S=(0,E.useMemo)((function(){var e=(0,fi.C)(x,k);return v&&s.arts.values.filter(e).map((function(e){return e.id})).slice(0,ji[w])}),[v,s,k,x,w]);return(0,H.jsx)($e.Z,{open:r,onClose:i,containerProps:{maxWidth:"xl"},children:(0,H.jsxs)(R.Z,{children:[(0,H.jsxs)(m.Z,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,H.jsxs)(y.Z,{variant:"h6",children:[t?(0,H.jsx)(ce.Z,{src:It.Z.slot[t]}):null," ",a(ti||(ti=(0,B.Z)(["tabEquip.swapArt"])))]}),(0,H.jsx)(I.Z,{onClick:i})]}),(0,H.jsx)(C.Z,{}),(0,H.jsxs)(m.Z,{children:[(0,H.jsx)(E.Suspense,{fallback:(0,H.jsx)(p.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,H.jsx)(Zi,{filterOption:x,filterOptionDispatch:h,disableSlotFilter:!0})}),(0,H.jsx)(f.Z,{mt:1,children:(0,H.jsx)(E.Suspense,{fallback:(0,H.jsx)(p.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,H.jsx)(g.ZP,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:S.map((function(e){return(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(Qt.Z,{artifactId:e,extraButtons:(0,H.jsx)(mi,{artId:e}),onClick:c})},e)}))})})})]})]})})}var gi,yi,bi,wi,Ci,ki,Si,Pi=t(58165),Oi=t(75308),Ei=t(66045),Ki=(0,Oi.X)((0,de.Z)(Y.wC));function _i(e){var n=e.onChangeId,t=e.weaponTypeKey,r=e.show,i=e.onClose,a=(0,K.$)(["page_character","page_weapon","weaponNames_gen"]).t,s=(0,E.useContext)(yn.t).database,c=(0,E.useCallback)((function(e){n(e),i()}),[n,i]),o=(0,Sn.Z)(),u=(0,l.Z)(o,2),d=u[0],x=u[1];(0,E.useEffect)((function(){return s.weapons.followAny(x)}),[x,s]);var h=(0,ke.Z)((function(){return fe.Z.getAll}),[]),p=(0,E.useMemo)((function(){return h&&(0,Ei.Xg)(h)}),[h]),j=(0,E.useMemo)((function(){return h&&(0,Ei.Sn)(h)}),[h]),Z=(0,E.useState)([5,4,3]),v=(0,l.Z)(Z,2),b=v[0],w=v[1],k=(0,E.useState)(""),S=(0,l.Z)(k,2),P=S[0],O=S[1],_=(0,E.useDeferredValue)(P),D=(0,E.useMemo)((function(){var e;return null!==(e=p&&j&&d&&s.weapons.values.filter((0,fi.C)({weaponType:t,rarity:b,name:_},p)).sort((0,fi.e)("level",!1,j)).map((function(e){return e.id})))&&void 0!==e?e:[]}),[d,s,p,j,b,t,_]);return(0,H.jsx)($e.Z,{open:r,onClose:i,children:(0,H.jsxs)(R.Z,{children:[(0,H.jsx)(m.Z,{sx:{py:1},children:(0,H.jsxs)(g.ZP,{container:!0,children:[(0,H.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,H.jsxs)(y.Z,{variant:"h6",children:[t?(0,H.jsx)(ce.Z,{src:It.Z.weaponTypes[t]}):null," ",a(gi||(gi=(0,B.Z)(["page_character:tabEquip.swapWeapon"])))]})}),(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(I.Z,{onClick:i})})]})}),(0,H.jsx)(C.Z,{}),(0,H.jsxs)(m.Z,{children:[(0,H.jsxs)(g.ZP,{container:!0,spacing:1,mb:1,children:[(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(Q.Z,{sx:{height:"100%"},value:b,size:"small",children:Y.wC.map((function(e){return(0,H.jsx)(G.Z,{value:e,onClick:function(){return w(Ki(b,e))},children:(0,H.jsxs)(f.Z,{display:"flex",gap:1,children:[(0,H.jsx)("strong",{children:e}),(0,H.jsx)(mt.q,{stars:1})]})},e)}))})}),(0,H.jsx)(g.ZP,{item:!0,flexGrow:1,children:(0,H.jsx)(Pi.Z,{autoFocus:!0,size:"small",value:P,onChange:function(e){return O(e.target.value)},label:a("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),(0,H.jsx)(g.ZP,{container:!0,spacing:1,children:D.map((function(e){return(0,H.jsx)(g.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,H.jsx)(di.Z,{weaponId:e,onClick:c,extraButtons:(0,H.jsx)(mi,{weaponId:e})})},e)}))})]})]})})}var Di=(0,E.lazy)((function(){return t.e(923).then(t.bind(t,74476))}));function Ri(){var e,n=(0,E.useContext)(F.K),t=n.character,r=t.equippedWeapon,i=t.key,a=n.characterSheet,s=On(i).buildSetting.mainStatAssumptionLevel,c=(0,E.useContext)(U.R),o=c.teamData,u=c.data,d=null===(e=o[i])||void 0===e?void 0:e.weaponSheet,x=(0,E.useState)(""),h=(0,l.Z)(x,2),p=h[0],j=h[1],Z=(0,E.useCallback)((function(){return j(r)}),[r]),v=(0,E.useCallback)((function(){return j("")}),[]);(0,E.useEffect)((function(){p&&p!==r&&j(r)}),[p,r]);var y=(0,ci.Z)(),b=(0,li.Z)(y.breakpoints.up("lg")),w=(0,E.useMemo)((function(){return d&&d.document.length>0&&(0,H.jsx)(A.Z,{children:(0,H.jsx)(m.Z,{children:(0,H.jsx)($n.Z,{sections:d.document})})})}),[d]),C=(0,kn.Z)("charMeta_".concat(i),Cn.B),k=(0,l.Z)(C,1)[0].rvFilter,S=(0,E.useDeferredValue)(k),P=(0,E.useMemo)((function(){return new Set(S)}),[S]);return(0,H.jsxs)(f.Z,{children:[(0,H.jsx)(E.Suspense,{fallback:!1,children:(0,H.jsx)(Di,{weaponId:p,footer:!0,onClose:v,extraButtons:(0,H.jsx)(zi,{weaponTypeKey:a.weaponTypeKey})})}),(0,H.jsxs)(g.ZP,{container:!0,spacing:1,children:[b&&(0,H.jsxs)(g.ZP,{item:!0,xs:12,md:12,lg:3,xl:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[w&&w,(0,H.jsx)(qi,{})]}),(0,H.jsxs)(g.ZP,{item:!0,xs:12,md:12,lg:9,xl:9,container:!0,spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:(0,H.jsx)(di.Z,{weaponId:r,onEdit:Z,canEquip:!0,extraButtons:(0,H.jsx)(Ii,{weaponTypeKey:a.weaponTypeKey})})}),Y.eV.map((function(e){return(0,H.jsx)(g.ZP,{item:!0,xs:12,sm:6,md:4,children:u.get($.ri.art[e].id).value?(0,H.jsx)(Qt.Z,{artifactId:u.get($.ri.art[e].id).value,mainStatAssumptionLevel:s,effFilter:P,extraButtons:(0,H.jsx)(Mi,{slotKey:e}),editor:!0,canExclude:!0,canEquip:!0}):(0,H.jsx)(Ai,{slotKey:e})},e)}))]}),!b&&(0,H.jsxs)(g.ZP,{item:!0,xs:12,md:12,xl:3,container:!0,spacing:1,children:[w&&(0,H.jsx)(g.ZP,{item:!0,xs:12,md:6,lg:4,children:w}),(0,H.jsx)(g.ZP,{item:!0,xs:12,md:6,lg:4,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,H.jsx)(qi,{})})]})]})]})}function Ai(e){var n=e.slotKey,t=(0,E.useContext)(F.K).character.key,r=(0,E.useContext)(yn.t).database,i=(0,be.Z)(),a=(0,l.Z)(i,3),s=a[0],c=a[1],o=a[2];return(0,H.jsxs)(A.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,H.jsx)(m.Z,{children:(0,H.jsx)(y.Z,{children:(0,H.jsx)(ft.ZP,{slotKey:n})})}),(0,H.jsx)(C.Z,{}),(0,H.jsxs)(f.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,H.jsx)(vi,{slotKey:n,show:s,onClose:o,onChangeId:function(e){return r.arts.set(e,{location:t})}}),(0,H.jsx)(O.Z,{onClick:c,color:"info",sx:{borderRadius:"1em"},children:(0,H.jsx)(si.Z,{sx:{height:100,width:100}})})]})]})}function Ii(e){var n=e.weaponTypeKey,t=(0,K.$)("page_character").t,r=(0,E.useContext)(F.K).character.key,i=(0,E.useContext)(yn.t).database,a=(0,be.Z)(),s=(0,l.Z)(a,3),c=s[0],o=s[1],u=s[2];return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(lr.Z,{title:(0,H.jsx)(y.Z,{children:t(yi||(yi=(0,B.Z)(["tabEquip.swapWeapon"])))}),placement:"top",arrow:!0,children:(0,H.jsx)(O.Z,{color:"info",size:"small",onClick:o,children:(0,H.jsx)(si.Z,{})})}),(0,H.jsx)(_i,{weaponTypeKey:n,onChangeId:function(e){return i.weapons.set(e,{location:r})},show:c,onClose:u})]})}function zi(e){var n=e.weaponTypeKey,t=(0,K.$)("page_character").t,r=(0,E.useContext)(F.K).character.key,i=(0,E.useContext)(yn.t).database,a=(0,be.Z)(),s=(0,l.Z)(a,3),c=s[0],o=s[1],u=s[2];return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(O.Z,{color:"info",onClick:o,startIcon:(0,H.jsx)(si.Z,{}),children:t(bi||(bi=(0,B.Z)(["tabEquip.swapWeapon"])))}),(0,H.jsx)(_i,{weaponTypeKey:n,onChangeId:function(e){return i.weapons.set(e,{location:r})},show:c,onClose:u})]})}function Mi(e){var n=e.slotKey,t=(0,K.$)("page_character").t,r=(0,E.useContext)(F.K).character.key,i=(0,E.useContext)(yn.t).database,a=(0,be.Z)(),s=(0,l.Z)(a,3),c=s[0],o=s[1],u=s[2];return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(lr.Z,{title:(0,H.jsx)(y.Z,{children:t(wi||(wi=(0,B.Z)(["tabEquip.swapArt"])))}),placement:"top",arrow:!0,children:(0,H.jsx)(O.Z,{color:"info",size:"small",onClick:o,children:(0,H.jsx)(si.Z,{})})}),(0,H.jsx)(vi,{slotKey:n,show:c,onClose:u,onChangeId:function(e){return i.arts.set(e,{location:r})}})]})}function qi(){var e=(0,K.$)(["page_character","artifact"]).t,n=(0,E.useContext)(yn.t).database,t=(0,E.useContext)(F.K),r=t.character,i=t.character,a=i.key,s=i.equippedArtifacts,c=(0,E.useContext)(U.R).data,o=(0,ke.Z)((function(){return he.y.getAll}),[]),u=(0,E.useMemo)((function(){return!!Object.values(s).filter((function(e){return e})).length}),[s]),d=(0,E.useCallback)((function(){r&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&Object.values(s).forEach((function(e){return n.arts.set(e,{location:""})}))}),[r,n,s]),x=(0,E.useMemo)((function(){return o&&he.y.setEffects(o,c)}),[o,c]),h=(0,kn.Z)("charMeta_".concat(a),Cn.B),f=(0,l.Z)(h,2),p=f[0].rvFilter,Z=f[1],v=(0,E.useCallback)((function(e){return Z({rvFilter:e})}),[Z]),g=(0,be.Z)(),y=(0,l.Z)(g,3),b=y[0],w=y[1],C=y[2],k=(0,E.useDeferredValue)(p),S=(0,E.useMemo)((function(){var t=Object.values(s).reduce((function(e,t){var r=n.arts.get(t);if(r){var i=zt.Z.getArtifactEfficiency(r,new Set(k)),a=i.currentEfficiency,s=i.maxEfficiency,l=zt.Z.getArtifactEfficiency(r,new Set(Fr._)),c=l.currentEfficiency,o=l.maxEfficiency;e.currentEfficiency=e.currentEfficiency+a,e.maxEfficiency=e.maxEfficiency+s,e.currentEfficiency_=e.currentEfficiency_+c,e.maxEfficiency_=e.maxEfficiency_+o}return e}),{currentEfficiency:0,currentEfficiency_:0,maxEfficiency:0,maxEfficiency_:0}),r=t.currentEfficiency,i=t.currentEfficiency_,a=t.maxEfficiency,l=t.maxEfficiency_;return{rvField:{text:e(Ci||(Ci=(0,B.Z)(["artifact:editor.curSubEff"]))),value:(0,pe.Ql)(r,i)?(0,H.jsxs)("span",{children:[(0,H.jsx)(ui.Z,{value:r,max:4500,valid:!0})," / ",(0,H.jsx)(ui.Z,{value:i,max:4500,valid:!0})]}):(0,H.jsx)(ui.Z,{value:r,max:4500,valid:!0})},rvmField:{text:e(ki||(ki=(0,B.Z)(["artifact:editor.maxSubEff"]))),canShow:function(){return!!(0,pe.Ql)(i,l)},value:(0,pe.Ql)(a,l)?(0,H.jsxs)("span",{children:[(0,H.jsx)(ui.Z,{value:a,max:4500,valid:!0})," / ",(0,H.jsx)(ui.Z,{value:l,max:4500,valid:!0})]}):(0,H.jsx)(ui.Z,{value:a,max:4500,valid:!0})}}}),[e,k,s,n]),P=S.rvField,_=S.rvmField;return(0,H.jsxs)(A.Z,{children:[u&&(0,H.jsx)(O.Z,{color:"error",onClick:d,fullWidth:!0,sx:{borderBottomRightRadius:0,borderBottomLeftRadius:0},children:e(Si||(Si=(0,B.Z)(["tabEquip.unequipArts"])))}),(0,H.jsx)(m.Z,{children:(0,H.jsxs)(j.Z,{spacing:1,children:[(0,H.jsxs)(R.Z,{children:[(0,H.jsx)(O.Z,{fullWidth:!0,color:"info",startIcon:(0,H.jsx)(Jn.Z,{}),sx:{borderBottomLeftRadius:0,borderBottomRightRadius:0},onClick:w,children:"RV Filter"}),(0,H.jsx)($e.Z,{open:b,onClose:C,children:(0,H.jsx)(R.Z,{children:(0,H.jsx)(m.Z,{children:(0,H.jsx)(oi.Z,{selectedKeys:p,onChange:v})})})}),(0,H.jsxs)(Ue.lD,{children:[(0,H.jsx)(Ue.ms,{field:P,component:ze.ZP}),(0,H.jsx)(Ue.ms,{field:_,component:ze.ZP})]})]}),o&&x&&Object.entries(x).flatMap((function(e){var n=(0,l.Z)(e,2),t=n[0];return n[1].map((function(e){return(0,H.jsx)(R.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:(0,H.jsx)(Yn,{setKey:t,setNumKey:e},t+e)},t)}))}))]})})]})}function Ti(){var e=(0,E.useRef)(),n=(0,E.useCallback)((function(){var n,t;return null===e||void 0===e||null===(n=e.current)||void 0===n||null===(t=n.scrollIntoView)||void 0===t?void 0:t.call(n,{behavior:"smooth"})}),[e]);return(0,H.jsxs)(j.Z,{spacing:1,children:[(0,H.jsxs)(g.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,H.jsx)(g.ZP,{item:!0,xs:8,sm:5,md:4,lg:2.3,children:(0,H.jsx)(Hi,{})}),(0,H.jsxs)(g.ZP,{item:!0,xs:12,sm:7,md:8,lg:9.7,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,H.jsx)(Ni,{onClick:n}),(0,H.jsx)(A.Z,{sx:{flexGrow:1,p:1},children:(0,H.jsx)(Gt,{})})]})]}),(0,H.jsx)(f.Z,{ref:e,children:(0,H.jsx)(Ri,{})})]})}function Ni(e){var n=e.onClick,t=(0,E.useContext)(F.K).character.equippedWeapon,r=(0,E.useContext)(U.R).data;return(0,H.jsxs)(g.ZP,{container:!0,spacing:1,columns:{xs:2,sm:2,md:3,lg:6,xl:6},children:[(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)($t,{weaponId:t,BGComponent:A.Z,onClick:n})}),Y.eV.map((function(e){return(0,H.jsx)(g.ZP,{item:!0,xs:1,children:(0,H.jsx)(Nt,{artifactId:r.get($.ri.art[e].id).value,slotKey:e,BGComponent:A.Z,onClick:n})},e)}))]})}function Hi(){var e,n=(0,E.useContext)(F.K),t=n.characterSheet,r=n.character,i=r.key,a=r.team,s=(0,E.useContext)(U.R).data,c=(0,Ce.Z)(i),o=(0,D.s0)(),u=s.get($.ri.charEle).value,d=t.weaponTypeKey,x=s.get($.ri.lvl).value,h=s.get($.ri.asc).value,p=s.get($.ri.constellation).value,j={auto:s.get($.ri.total.auto).value,skill:s.get($.ri.total.skill).value,burst:s.get($.ri.total.burst).value},Z={auto:s.get($.ri.bonus.auto).value,skill:s.get($.ri.bonus.skill).value,burst:s.get($.ri.bonus.burst).value},v=(0,kn.Z)("charMeta_".concat(i),Cn.B),b=(0,l.Z)(v,2),w=b[0].favorite,C=b[1];return(0,H.jsxs)(A.Z,{sx:{height:"100%"},children:[(0,H.jsxs)(f.Z,{sx:{position:"relative"},children:[(0,H.jsxs)(f.Z,{sx:{position:"absolute",width:"100%",height:"100%"},children:[(0,H.jsx)(y.Z,{variant:"h6",sx:{position:"absolute",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75},children:(0,H.jsx)(mt.q,{stars:t.rarity,colored:!0})}),(0,H.jsx)(f.Z,{sx:{position:"absolute",left:"50%",bottom:"5%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,H.jsx)(Ne.Z,{color:u,sx:{height:"auto"},label:(0,H.jsxs)(y.Z,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[ne.hJ[u],(0,H.jsx)(f.Z,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),(0,H.jsx)(ce.Z,{src:null===(e=It.Z.weaponTypes)||void 0===e?void 0:e[d]})]})})}),(0,H.jsx)(f.Z,{sx:{position:"absolute",left:0,top:0},children:(0,H.jsx)(N.Z,{sx:{p:1},color:"error",onClick:function(){return C({favorite:!w})},children:w?(0,H.jsx)(ri.Z,{}):(0,H.jsx)(ii.Z,{})})}),(0,H.jsx)(y.Z,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:(0,H.jsx)(ee.Z,{children:oe.Z.getLevelString(x,h)})})]}),(0,H.jsx)(f.Z,{src:t.cardImg,component:"img",width:"100%",height:"auto"})]}),(0,H.jsxs)(m.Z,{children:[(0,H.jsx)(Dt.Z,{sx:{p:1},onClick:function(){return o("talent")},children:(0,H.jsx)(g.ZP,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map((function(e){var n;return(0,H.jsx)(g.ZP,{item:!0,xs:4,children:(0,H.jsx)(ai.Z,{badgeContent:j[e],color:Z[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,H.jsx)(f.Z,{component:"img",src:null===(n=t.getTalentOfKey(e,u))||void 0===n?void 0:n.img,width:"100%",height:"auto"})})},e)}))})}),(0,H.jsx)(y.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:t.constellationName}),(0,H.jsx)(g.ZP,{container:!0,spacing:1,children:(0,pe.w6)(1,6).map((function(e){var n;return(0,H.jsx)(g.ZP,{item:!0,xs:4,children:(0,H.jsx)(Dt.Z,{onClick:function(){return c({constellation:e===p?e-1:e})},children:(0,H.jsx)(f.Z,{component:"img",src:null===(n=t.getTalentOfKey("constellation".concat(e),u))||void 0===n?void 0:n.img,sx:(0,M.Z)({},p>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto"})})},e)}))}),(0,H.jsx)(Dt.Z,{sx:{p:1},onClick:function(){return o("teambuffs")},children:(0,H.jsx)(g.ZP,{container:!0,columns:3,spacing:1,children:(0,pe.w6)(0,2).map((function(e){return(0,H.jsx)(g.ZP,{item:!0,xs:1,height:"100%",children:(0,H.jsx)(Ar.Z,{characterKey:a[e],index:e})},e)}))})})]})]})}var Vi={xs:12,sm:6,md:4};function Wi(){var e=(0,E.useContext)(F.K),n=e.character,t=e.characterSheet,r=(0,E.useContext)(U.R).data,i=(0,Ce.Z)(n.key),a=r.get($.ri.charEle).value,s=r.get($.ri.asc).value,c=r.get($.ri.constellation).value,o=(0,ci.Z)(),u=(0,li.Z)(o.breakpoints.up("lg")),d=(0,E.useMemo)((function(){return(0,pe.w6)(1,6).map((function(e){return(0,H.jsx)(Gi,{talentKey:"constellation".concat(e),subtitle:"Constellation Lv. ".concat(e),onClickTitle:function(){return i({constellation:e===c?e-1:e})}})}))}),[c,i]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Bi,{}),(0,H.jsxs)(g.ZP,{container:!0,spacing:1,children:[u&&(0,H.jsxs)(g.ZP,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,H.jsx)(A.Z,{children:(0,H.jsx)(m.Z,{children:(0,H.jsxs)(y.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",c]})})}),d.map((function(e,n){return(0,H.jsx)(f.Z,{sx:{opacity:c>=n+1?1:.5},children:e},n)}))]}),(0,H.jsxs)(g.ZP,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return(0,H.jsx)(g.ZP,(0,M.Z)((0,M.Z)({item:!0},Vi),{},{children:(0,H.jsx)(Gi,{talentKey:t,subtitle:r})}),t)})),!!t.getTalentOfKey("sprint",a)&&(0,H.jsx)(g.ZP,(0,M.Z)((0,M.Z)({item:!0},Vi),{},{children:(0,H.jsx)(Gi,{talentKey:"sprint",subtitle:"Alternative Sprint"})})),!!t.getTalentOfKey("passive",a)&&(0,H.jsx)(g.ZP,(0,M.Z)((0,M.Z)({item:!0},Vi),{},{children:(0,H.jsx)(Gi,{talentKey:"passive",subtitle:"Passive"})})),[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var n=(0,l.Z)(e,3),r=n[0],i=n[1],c=n[2],o=s>=c;return t.getTalentOfKey(r,a)?(0,H.jsx)(g.ZP,(0,M.Z)((0,M.Z)({item:!0,style:{opacity:o?1:.5}},Vi),{},{children:(0,H.jsx)(Gi,{talentKey:r,subtitle:i})}),r):null}))]}),!u&&(0,H.jsxs)(g.ZP,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,xs:12,children:(0,H.jsx)(A.Z,{children:(0,H.jsx)(m.Z,{children:(0,H.jsxs)(y.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",c]})})})}),d.map((function(e,n){return(0,H.jsx)(g.ZP,(0,M.Z)((0,M.Z)({item:!0,sx:{opacity:c>=n+1?1:.5}},Vi),{},{children:e}),n)}))]})]})]})}function Bi(){var e=(0,E.useContext)(U.R).data.getDisplay().reaction;return(0,H.jsx)(A.Z,{children:(0,H.jsx)(m.Z,{children:(0,H.jsx)(g.ZP,{container:!0,spacing:1,children:Object.entries(e).map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(R.Z,{children:(0,H.jsx)(m.Z,{sx:{p:1,"&:last-child":{pb:1}},children:(0,H.jsx)(Ue.JW,{node:r})})})},t)}))})})})}var Li=[1,1,2,4,6,8,10];function Gi(e){var n=e.talentKey,t=e.subtitle,r=e.onClickTitle,i=(0,E.useContext)(F.K),a=i.character.talent,s=i.characterSheet,l=i.characterDispatch,c=(0,E.useContext)(U.R).data,o=(0,E.useCallback)((function(e){return(0,H.jsx)(Dt.Z,{onClick:r,children:e})}),[r]),u=(0,E.useCallback)((function(e,n){return l({talent:(0,M.Z)((0,M.Z)({},a),{},(0,Gr.Z)({},e,n))})}),[a,l]),d=null;if(n in a){var x=c.get($.ri.bonus[n]).value,h=c.get($.ri.total[n]).value,p=c.get($.ri.asc).value;d=(0,H.jsx)(X.Z,{fullWidth:!0,title:"Talent Lv. ".concat(h),color:x?"info":"primary",sx:{borderRadius:0},children:(0,pe.w6)(1,Li[p]).map((function(e){return(0,H.jsxs)(L.Z,{selected:a[n]===e,disabled:a[n]===e,onClick:function(){return u(n,e)},children:["Talent Lv. ",e+x]},e)}))})}var j=s.getTalentOfKey(n,c.get($.ri.charEle).value);return(0,H.jsxs)(A.Z,{sx:{height:"100%"},children:[d,(0,H.jsxs)(m.Z,{children:[(0,H.jsx)(qt.Z,{condition:!!r,wrapper:o,children:(0,H.jsxs)(g.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(f.Z,{component:"img",src:null===j||void 0===j?void 0:j.img,sx:{width:60,height:"auto"}})}),(0,H.jsxs)(g.ZP,{item:!0,flexGrow:1,sx:{pl:1},children:[(0,H.jsx)(y.Z,{variant:"h6",children:null===j||void 0===j?void 0:j.name}),(0,H.jsx)(y.Z,{variant:"subtitle1",children:t})]})]})}),null!==j&&void 0!==j&&j.sections?(0,H.jsx)($n.Z,{sections:j.sections,hideDesc:!0,hideHeader:function(e){var t,r=null===(t=e.header)||void 0===t?void 0:t.action;return!(!r||"string"===typeof r)&&r.props.children.props.key18.includes(n)}}):null]})]})}var Fi=t(43992),Ji=t(31038),Ui=t(11741);function $i(){return(0,H.jsx)(Me.Z,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:(0,H.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,H.jsxs)(g.ZP,{item:!0,xs:12,md:6,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,H.jsx)(Yi,{}),(0,H.jsx)(Xi,{})]}),(0,pe.w6)(0,2).map((function(e){return(0,H.jsx)(g.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,H.jsx)(Qi,{index:e})},e)}))]})})}function Yi(){var e,n,t,r=(0,E.useContext)(U.R),i=r.data,a=r.oldData,s=i.getTeamBuff(),c=[];return Object.entries(null!==(e=s.total)&&void 0!==e?e:{}).forEach((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return!r.isEmpty&&0!==r.value&&c.push([["total",t],r])})),Object.entries(null!==(n=s.premod)&&void 0!==n?n:{}).forEach((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return!r.isEmpty&&0!==r.value&&c.push([["premod",t],r])})),Object.entries(null!==(t=s.enemy)&&void 0!==t?t:{}).forEach((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return!r.isEmpty&&0!==r.value&&c.push([["enemy",t],r])})),c.length?(0,H.jsxs)(A.Z,{children:[(0,H.jsx)(m.Z,{children:(0,H.jsx)(y.Z,{children:"Team Buffs"})}),(0,H.jsx)(C.Z,{}),(0,H.jsx)(m.Z,{children:(0,H.jsx)(g.ZP,{container:!0,children:c.map((function(e,n){var t,r=(0,l.Z)(e,2),i=r[0],s=r[1];return s&&(0,H.jsx)(g.ZP,{item:!0,xs:12,children:(0,H.jsx)(Ue.JW,{node:s,oldValue:null===(t=(0,pe.Hm)(null===a||void 0===a?void 0:a.getTeamBuff(),i))||void 0===t?void 0:t.value})},s.info.key)}))})})]}):null}function Xi(){var e=(0,E.useContext)(U.R).data;return(0,H.jsx)(H.Fragment,{children:Ui.J.map((function(n,t){var r=(0,H.jsx)(pt.Z,{title:(0,H.jsx)(y.Z,{children:n.desc})}),i=(0,H.jsxs)("span",{children:[n.name," ",r]});return(0,H.jsxs)(A.Z,{sx:{opacity:n.canShow(e)?1:.5},children:[(0,H.jsx)(w.Z,{title:i,action:n.icon,titleTypographyProps:{variant:"subtitle2"}}),n.canShow(e)&&(0,H.jsx)(C.Z,{}),n.canShow(e)&&(0,H.jsx)(m.Z,{children:(0,H.jsx)($n.Z,{sections:n.sections,teamBuffOnly:!0,hideDesc:!0})})]},t)}))})}function Qi(e){var n=e.index,t=(0,E.useContext)(U.R).teamData,r=(0,K.$)("page_character").t,i=(0,E.useContext)(F.K),a=i.character,s=i.characterDispatch,l=a.key,c=a.team[n],o=(0,Ce.Z)(c),u=(0,Ke.Z)(),d=t[c],x=(0,E.useMemo)((function(){return d&&{character:d.character,characterSheet:d.characterSheet,characterDispatch:o}}),[d,o]),h=(0,E.useMemo)((function(){return d&&{data:d.target,teamData:t}}),[d,t]);return(0,H.jsxs)(A.Z,{children:[(0,H.jsx)(m.Z,{children:(0,H.jsx)(Ji.Z,{fullWidth:!0,value:c,onChange:function(e){return s({type:"team",index:n,charKey:e})},disable:function(e){return e===l||""!==e&&a.team.includes(e)},labelText:r("teammate",{count:n+1}),defaultText:r("none"),defaultIcon:(0,H.jsx)(Fi.Z,{}),showDefault:!0})}),x&&(0,H.jsx)(F.K.Provider,{value:x,children:h&&(0,H.jsx)(U.R.Provider,{value:h,children:(0,H.jsx)(gn.Z,{characterKey:c,onClickHeader:u,artifactChildren:(0,H.jsx)(ea,{}),weaponChildren:(0,H.jsx)(na,{}),characterChildren:(0,H.jsx)(ta,{}),isTeammateCard:!0})})})]})}function ea(){var e=(0,E.useContext)(U.R).data,n=(0,ke.Z)((function(){return he.y.getAll}),[]),t=(0,E.useMemo)((function(){return n&&Object.entries(he.y.setEffects(n,e)).flatMap((function(e){var t=(0,l.Z)(e,2),r=t[0];return t[1].flatMap((function(e){return n[r].setEffectDocument(e)}))}))}),[n,e]);return t?(0,H.jsx)($n.Z,{sections:t,teamBuffOnly:!0}):null}function na(){var e=(0,E.useContext)(F.K).character.key,n=(0,E.useContext)(U.R).teamData[e].weaponSheet;return n.document?(0,H.jsx)($n.Z,{sections:n.document,teamBuffOnly:!0}):null}function ta(){var e=(0,E.useContext)(F.K).character.key,n=(0,E.useContext)(U.R),t=n.data,r=n.teamData[e].characterSheet.getTalent(t.get($.ri.charEle).value),i=Object.values(r.sheets).flatMap((function(e){return e.sections}));return i?(0,H.jsx)($n.Z,{sections:i,teamBuffOnly:!0}):null}var ra=t(53343);function ia(){var e=(0,E.useContext)(F.K),n=e.character,t=e.characterSheet,r=e.characterDispatch,i=n.elementKey,a=void 0===i?"anemo":i;return"talents"in t.sheet?(0,H.jsx)(X.Z,{color:a,title:(0,H.jsx)("strong",{children:(0,ra.Oy)("element.".concat(a))}),children:Object.keys(t.sheet.talents).map((function(e){return(0,H.jsx)(L.Z,{selected:a===e,disabled:a===e,onClick:function(){return r({elementKey:e})},children:(0,H.jsx)("strong",{children:(0,H.jsx)(z.Z,{color:e,children:(0,ra.Oy)("element.".concat(e))})})},e)}))}):null}function aa(){var e,n=(0,D.s0)(),t=(0,E.useCallback)((function(){return n("/characters")}),[n]),r=(0,D.UO)().characterKey;return!Y.IV.includes(null!==(e=r)&&void 0!==e?e:"")?(0,H.jsx)(D.Fg,{to:"/characters"}):(0,H.jsx)(f.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:(0,H.jsx)(E.Suspense,{fallback:(0,H.jsx)(p.Z,{variant:"rectangular",width:"100%",height:1e3}),children:r&&(0,H.jsx)(sa,{characterKey:r,onClose:t})})})}function sa(e){var n,t,r,i=e.characterKey,a=e.onClose,s=(0,we.Z)(i),l=(0,ke.Z)((function(){return oe.Z.get(i)}),[i]),c=(0,Se.Z)(i),o=(null!==(n=null===c||void 0===c?void 0:c[i])&&void 0!==n?n:{}).target,u=(null!==(t=(0,D.bS)({path:"/characters/:charKey/:tab",end:!1}))&&void 0!==t?t:{params:{tab:"overview"}}).params.tab,d=void 0===u?"overview":u,x=(0,K.$)().t;(0,Pe.Z)("".concat(x("char_".concat(i,"_gen:name"))," - ").concat(x("page_character:tabs.".concat(d))));var h=(0,Ce.Z)(null!==(r=null===s||void 0===s?void 0:s.key)&&void 0!==r?r:""),f=(0,E.useMemo)((function(){if(c&&o)return{data:o,teamData:c,oldData:void 0}}),[o,c]),Z=(0,E.useMemo)((function(){if(s&&l)return{character:s,characterSheet:l,characterDispatch:h}}),[s,l,h]);return(0,H.jsx)(R.Z,{children:f&&Z?(0,H.jsx)(F.K.Provider,{value:Z,children:(0,H.jsx)(U.R.Provider,{value:f,children:(0,H.jsxs)(m.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,H.jsxs)(j.Z,{direction:"row",children:[(0,H.jsxs)(j.Z,{direction:"row",spacing:1,sx:{flexGrow:1},children:[(0,H.jsx)(_e,{}),(0,H.jsx)(ia,{}),(0,H.jsx)(Ie,{}),(0,H.jsx)(xa,{})]}),!!a&&(0,H.jsx)(I.Z,{onClick:a})]}),(0,H.jsx)(A.Z,{children:(0,H.jsx)(ca,{tab:d})}),(0,H.jsx)(oa,{}),(0,H.jsx)(la,{}),(0,H.jsx)(A.Z,{children:(0,H.jsx)(ca,{tab:d})})]})})}):(0,H.jsx)(p.Z,{variant:"rectangular",width:"100%",height:1e3})})}function la(){return(0,H.jsx)(E.Suspense,{fallback:(0,H.jsx)(p.Z,{variant:"rectangular",width:"100%",height:500}),children:(0,H.jsxs)(D.Z5,{children:[(0,H.jsx)(D.AW,{index:!0,element:(0,H.jsx)(Ti,{})}),(0,H.jsx)(D.AW,{path:"/talent",element:(0,H.jsx)(Wi,{})}),(0,H.jsx)(D.AW,{path:"/teambuffs",element:(0,H.jsx)($i,{})}),(0,H.jsx)(D.AW,{path:"/optimize",element:(0,H.jsx)(Xr,{})})]})})}function ca(e){var n=e.tab,t=(0,K.$)("page_character").t;return(0,H.jsxs)(Z.Z,{value:n,variant:"scrollable",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"}},children:[(0,H.jsx)(v.Z,{sx:{minWidth:"25%"},value:"overview",label:t("tabs.overview"),icon:(0,H.jsx)(c.Z,{}),component:_.rU,to:""}),(0,H.jsx)(v.Z,{sx:{minWidth:"25%"},value:"talent",label:t("tabs.talent"),icon:(0,H.jsx)(o.Z,{}),component:_.rU,to:"talent"}),(0,H.jsx)(v.Z,{sx:{minWidth:"25%"},value:"teambuffs",label:t("tabs.teambuffs"),icon:(0,H.jsx)(u.Z,{}),component:_.rU,to:"teambuffs"}),(0,H.jsx)(v.Z,{sx:{minWidth:"25%"},value:"optimize",label:t("tabs.optimize"),icon:(0,H.jsx)(d.Z,{}),component:_.rU,to:"optimize"})]})}function oa(){var e=(0,K.$)("page_character").t,n=(0,E.useState)(!1),t=(0,l.Z)(n,2),r=t[0],i=t[1],a=(0,E.useCallback)((function(){return i(!r)}),[i,r]);return(0,H.jsxs)(A.Z,{children:[(0,H.jsxs)(m.Z,{sx:{display:"flex",gap:1},children:[(0,H.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(le,{size:"small"})}),(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(re,{})}),(0,H.jsx)(g.ZP,{item:!0,children:(0,H.jsx)(se,{size:"small"})})]}),(0,H.jsxs)(f.Z,{display:"flex",gap:1,children:[(0,H.jsxs)(f.Z,{children:[(0,H.jsxs)(y.Z,{variant:"subtitle2",children:[e("formulas")," ","&"]}),(0,H.jsx)(y.Z,{variant:"subtitle2",children:e("calculations")})]}),(0,H.jsx)(W,{expand:r,onClick:a,"aria-expanded":r,"aria-label":"show more",size:"small",sx:{p:0},children:(0,H.jsx)(x.Z,{})})]})]}),(0,H.jsx)(b.Z,{in:r,timeout:"auto",unmountOnExit:!0,children:(0,H.jsx)(m.Z,{sx:{pt:0},children:(0,H.jsx)(ua,{})})})]})}function ua(){var e=ge((0,E.useContext)(U.R).data);return(0,H.jsx)(E.Suspense,{fallback:(0,H.jsx)(p.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,H.jsx)(f.Z,{sx:{mr:-1,mb:-1},children:e.map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return(0,H.jsx)(da,{displayNs:r,sectionKey:t},t)}))})})}function da(e){var n=e.sectionKey,t=e.displayNs,r=(0,E.useContext)(U.R).data,i=(0,ke.Z)((function(){return Ze(r,n)}),[r,n]);if(!i)return null;if(Object.entries(t).every((function(e){var n=(0,l.Z)(e,2);n[0];return n[1].isEmpty})))return null;var a=i.title,s=i.icon,c=i.action;return(0,H.jsxs)(R.Z,{sx:{mb:1},children:[(0,H.jsx)(w.Z,{avatar:s&&(0,H.jsx)(ce.Z,{size:2,sx:{m:-1},src:s}),title:a,action:c,titleTypographyProps:{variant:"subtitle1"}}),(0,H.jsx)(C.Z,{}),(0,H.jsx)(m.Z,{children:Object.entries(t).map((function(e){var n,t=(0,l.Z)(e,2),r=t[0],i=t[1];return!i.isEmpty&&(0,H.jsxs)(k.Z,{sx:{bgcolor:"contentLight.main"},children:[(0,H.jsx)(S.Z,{expandIcon:(0,H.jsx)(x.Z,{}),children:(0,H.jsxs)(y.Z,{children:[(0,H.jsx)(z.Z,{color:i.info.variant,children:ye.ZP.get(null!==(n=i.info.key)&&void 0!==n?n:"")})," ",(0,H.jsx)("strong",{children:(0,ye.EC)(i.value,i.unit)})]})}),(0,H.jsx)(P.Z,{children:i.formulas.map((function(e,n){return(0,H.jsx)(y.Z,{children:e},n)}))})]},r)}))})]})}function xa(){var e=(0,be.Z)(),n=(0,l.Z)(e,3),t=n[0],r=n[1],i=n[2];return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(O.Z,{color:"info",startIcon:(0,H.jsx)(h.Z,{}),onClick:r,children:"Detailed Stats"}),(0,H.jsx)(Qe,{open:t,onClose:i})]})}},90543:function(e,n,t){t.d(n,{Z:function(){return q}});var r,i=t(30168),a=t(53174),s=t(54483),l=t(40117),c=t(62002),o=t(63204),u=t(66647),d=t(68870),x=t(47047),h=t(13400),f=t(20890),p=t(39504),m=t(2199),j=t(40165),Z=t(24518),v=t(72791),g=t(22020),y=t(10658),b=t(71310),w=t(31038),C=t(40020),k=t(20005),S=t(55942),P=t(10157),O=t(75545),E=t(2139),K=t(66218),_=t(7618),D=t(26138),R=t(73036),A=t(79406),I=t(42320),z=t(74480),M=t(80184);function q(e){var n,t=e.weaponId,q=e.onClick,T=e.onEdit,N=e.onDelete,H=e.canEquip,V=void 0!==H&&H,W=e.extraButtons,B=(0,g.$)(["page_weapon","ui"]).t,L=(0,v.useContext)(_.t).database,G=(0,z.Z)(t),F=(0,I.Z)((function(){return null!==G&&void 0!==G&&G.key?K.Z.get(G.key):void 0}),[null===G||void 0===G?void 0:G.key]),J=(0,v.useCallback)((function(e){return e.weaponTypeKey===(null===F||void 0===F?void 0:F.weaponType)}),[F]),U=(0,v.useCallback)((function(e){return(0,M.jsx)(u.Z,{onClick:function(){return null===q||void 0===q?void 0:q(t)},children:e})}),[q,t]),$=(0,v.useCallback)((function(e){return(0,M.jsx)(d.Z,{children:e})}),[]),Y=(0,v.useCallback)((function(e){return L.weapons.set(t,{location:e})}),[L,t]),X=(0,v.useMemo)((function(){return F&&G&&(0,R.mP)([F.data,(0,R.v0)(G)])}),[F,G]);if(!G||!F||!X)return null;var Q=G.level,ee=G.ascension,ne=G.refinement,te=G.id,re=G.location,ie=void 0===re?"":re,ae=G.lock,se=X.get(D.ri.weapon.type).value,le=[D.ri.weapon.main,D.ri.weapon.sub,D.ri.weapon.sub2].map((function(e){return X.get(e)})),ce=F.getImg(ee);return(0,M.jsx)(v.Suspense,{fallback:(0,M.jsx)(x.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,M.jsxs)(b.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,M.jsxs)(k.Z,{condition:!!q,wrapper:U,falseWrapper:$,children:[(0,M.jsxs)(d.Z,{className:"grad-".concat(F.rarity,"star"),sx:{position:"relative",pt:2,px:2},children:[!q&&(0,M.jsx)(h.Z,{color:"primary",onClick:function(){return L.weapons.set(te,{lock:!ae})},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:ae?(0,M.jsx)(l.Z,{}):(0,M.jsx)(c.Z,{})}),(0,M.jsxs)(d.Z,{sx:{position:"relative",zIndex:1},children:[(0,M.jsxs)(d.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,M.jsx)(S.Z,{sx:{fontSize:"1.5em"},src:null===(n=y.Z.weaponTypes)||void 0===n?void 0:n[se]}),(0,M.jsx)(f.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,M.jsx)("strong",{children:F.name})})]}),(0,M.jsxs)(f.Z,{component:"span",variant:"h5",children:["Lv. ",Q]}),(0,M.jsxs)(f.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",E.SJ[ee]]}),(0,M.jsxs)(f.Z,{variant:"h6",children:["Refinement ",(0,M.jsx)("strong",{children:ne})]}),(0,M.jsx)(f.Z,{children:(0,M.jsx)(P.q,{stars:F.rarity,colored:!0})})]}),(0,M.jsx)(d.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,M.jsx)(d.Z,{component:"img",src:null!==ce&&void 0!==ce?ce:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,M.jsx)(p.Z,{children:le.map((function(e){if(!e.info.key)return null;var n=(0,A.EC)(e.value,e.unit,e.unit?void 0:0);return(0,M.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,M.jsxs)(f.Z,{flexGrow:1,children:[O.ZP[e.info.key]," ",A.ZP.get(e.info.key)]}),(0,M.jsx)(f.Z,{children:n})]},e.info.key)}))})]}),(0,M.jsxs)(d.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[V?(0,M.jsx)(w.Z,{size:"small",sx:{flexGrow:1},disable:function(e){return""===e},showDefault:!0,defaultIcon:(0,M.jsx)(o.Z,{}),defaultText:B("ui:inventory"),value:ie,onChange:Y,filter:J,disableClearable:!0}):(0,M.jsx)(C.Z,{location:ie}),(0,M.jsxs)(m.Z,{children:[!!T&&(0,M.jsx)(j.Z,{title:(0,M.jsx)(f.Z,{children:B(r||(r=(0,i.Z)(["page_weapon:edit"])))}),placement:"top",arrow:!0,children:(0,M.jsx)(Z.Z,{color:"info",onClick:function(){return T(te)},children:(0,M.jsx)(s.G,{icon:a.Xcf,className:"fa-fw"})})}),!!N&&(0,M.jsx)(Z.Z,{color:"error",onClick:function(){return N(te)},disabled:!!ie||ae,children:(0,M.jsx)(s.G,{icon:a.I7k,className:"fa-fw"})}),W]})]})]})})}},24711:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(29439),i=t(72791);function a(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,i.useState)(e),t=(0,r.Z)(n,2),a=t[0],s=t[1],l=(0,i.useCallback)((function(){return s(!0)}),[s]),c=(0,i.useCallback)((function(){return s(!1)}),[s]);return[a,l,c]}},52771:function(e,n,t){t.d(n,{JR:function(){return o},e6:function(){return u},g4:function(){return a},mf:function(){return l},vL:function(){return i},yJ:function(){return s}});var r=t(60393),i=1e3,a=60*i,s=60*a,l=24*s;function c(e){var n=e%1e3,t=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:r,seconds:t,milliseconds:n}}function o(e){var n=c(e),t=n.hours,i=n.minutes,a=n.seconds,s="Minutes";return t&&(s="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2)," ").concat(s)}function u(e){var n=c(e),t=n.hours,i=n.minutes,a=n.seconds,s=n.milliseconds,l="Minutes";return t&&(l="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2),".").concat((0,r.H_)(s,"0",3)," ").concat(l)}},66045:function(e,n,t){t.d(n,{Ol:function(){return i},Sn:function(){return a},Xg:function(){return s}});var r=t(72828),i=["level","rarity"];function a(e){return{level:{getValue:function(e){var n;return null!==(n=e.level*e.ascension)&&void 0!==n?n:0},tieBreaker:"rarity"},rarity:{getValue:function(n){var t;return null===e||void 0===e||null===(t=e[n.key])||void 0===t?void 0:t.rarity},tieBreaker:"level"}}}function s(e){return{rarity:function(n,t){var r;return t.includes(null===e||void 0===e||null===(r=e[n.key])||void 0===r?void 0:r.rarity)},weaponType:function(n,t){var r;return t.includes(null===e||void 0===e||null===(r=e[n.key])||void 0===r?void 0:r.weaponType)},name:function(e,n){return r.Z.t("weaponNames_gen:".concat(e.key)).toLowerCase().includes(n.toLowerCase())}}}}}]);
//# sourceMappingURL=866.f015c10a.chunk.js.map