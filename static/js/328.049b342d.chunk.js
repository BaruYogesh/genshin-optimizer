"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[328],{36944:function(e,n,t){t.d(n,{Z:function(){return P},d:function(){return I}});var r,i,l,a,o=t(1413),c=t(30168),s=t(45987),u=t(63204),d=t(49670),f=t(14361),v=t(23786),h=t(57064),x=t(20890),Z=t(94721),p=t(47047),y=t(52791),m=t(72791),j=t(22020),g=t(947),b=t(56928),k=t(42320),C=t(50921),w=t(46956),S=t(33890),K=t(2380),E=t(80184),M=["value","onChange","unSelectText","unSelectIcon","inventory","noUnselect","filter"];function P(e){var n,t=e.value,f=e.onChange,p=e.unSelectText,y=e.unSelectIcon,w=e.inventory,P=void 0!==w&&w,_=e.noUnselect,A=void 0!==_&&_,F=e.filter,R=void 0===F?function(){return!0}:F,G=(0,s.Z)(e,M),O=(0,j.$)("ui").t,N=(0,m.useContext)(b.t).database,z=(0,k.Z)(g.Z.getAll,[]),V=(0,k.Z)(g.Z.get(t),[t]),D=(0,m.useMemo)((function(){return z&&(0,C.zU)(N,z)}),[N,z]),T=N._getCharKeys().filter((function(e){return(null===z||void 0===z?void 0:z[e])&&R(z[e],e)})).sort();return(0,E.jsxs)(S.Z,(0,o.Z)((0,o.Z)({},G),{},{title:null!==(n=null===V||void 0===V?void 0:V.name)&&void 0!==n?n:P?O(r||(r=(0,c.Z)(["inventory"]))):null!==p&&void 0!==p?p:O(i||(i=(0,c.Z)(["unselect"]))),color:t?"success":"primary",startIcon:null!==V&&void 0!==V&&V.thumbImg?(0,E.jsx)(K.Z,{src:V.thumbImgSide}):P?(0,E.jsx)(u.Z,{}):null!==y&&void 0!==y?y:(0,E.jsx)(d.Z,{}),children:[!A&&(P?(0,E.jsxs)(v.Z,{onClick:function(){return f("")},selected:""===t,disabled:""===t,children:[(0,E.jsx)(h.Z,{children:(0,E.jsx)(u.Z,{})}),(0,E.jsx)(x.Z,{variant:"inherit",noWrap:!0,children:O(l||(l=(0,c.Z)(["inventory"])))})]}):(0,E.jsxs)(v.Z,{onClick:function(){return f("")},selected:""===t,disabled:""===t,children:[(0,E.jsx)(h.Z,{children:(0,E.jsx)(d.Z,{})}),(0,E.jsx)(x.Z,{variant:"inherit",noWrap:!0,children:O(a||(a=(0,c.Z)(["unselect"])))})]})),!A&&(0,E.jsx)(Z.Z,{},"div"),!!z&&I(z,T,f,t,D)]}))}function I(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0;if(!i)return[];var l=n.filter((0,w.C)({element:"",weaponType:"",favorite:"yes"},i)).map((function(n){return(0,E.jsx)(_,{characterSheets:e,characterKey:n,selectedCharacterKey:r,onChange:t,favorite:!0},n)})),a=n.filter((0,w.C)({element:"",weaponType:"",favorite:"no"},i)).map((function(n){return(0,E.jsx)(_,{characterSheets:e,characterKey:n,selectedCharacterKey:r,onChange:t,favorite:!1},n)}));return l.concat(a)}function _(e){var n,t,r=e.characterSheets,i=e.characterKey,l=e.selectedCharacterKey,a=void 0===l?"":l,o=e.onChange,c=e.favorite;return(0,E.jsxs)(v.Z,{onClick:function(){return o(i)},selected:a===i,disabled:a===i,children:[(0,E.jsx)(h.Z,{children:(0,E.jsx)(K.Z,{src:null===(n=r[i])||void 0===n?void 0:n.thumbImgSide})}),(0,E.jsx)(m.Suspense,{fallback:(0,E.jsx)(p.Z,{variant:"text",width:100}),children:(0,E.jsx)(x.Z,{variant:"inherit",noWrap:!0,children:null===(t=r[i])||void 0===t?void 0:t.name})}),c&&(0,E.jsx)(y.Z,{display:"flex",flexGrow:1}),c&&(0,E.jsx)(f.Z,{sx:{ml:1,mr:-.5}})]},i)}},40020:function(e,n,t){t.d(n,{Z:function(){return d}});var r,i=t(30168),l=t(63204),a=t(20890),o=t(22020),c=t(947),s=t(42320),u=t(80184);function d(e){var n=e.location,t=(0,o.$)("ui").t,d=(0,s.Z)(c.Z.get(null!==n&&void 0!==n?n:""),[n]);return(0,u.jsx)(a.Z,{component:"span",children:null!==d&&void 0!==d&&d.name?d.nameWIthIcon:(0,u.jsxs)("span",{children:[(0,u.jsx)(l.Z,{sx:{verticalAlign:"text-bottom"}})," ",t(r||(r=(0,i.Z)(["inventory"])))]})})}},2380:function(e,n,t){var r=(0,t(93457).Z)("img")((function(e){var n=e.theme;return{display:"inline-block",width:"auto",height:"2.3em",lineHeight:1,verticalAlign:"text-bottom",marginTop:n.spacing(-3),marginLeft:n.spacing(-1.25),marginRight:n.spacing(-1),marginBottom:n.spacing(-1)}}));n.Z=r},10600:function(e,n,t){t.d(n,{CC:function(){return x},ZP:function(){return Z}});var r=t(29439),i=t(1413),l=t(45987),a=t(66934),o=t(4834),c=t(24518),s=t(72791),u=t(80184),d=["children","disableRipple","disableFocusRipple","disableTouchRipple"],f=["value","onChange","disabled","float"],v=(0,a.ZP)(o.ZP)((function(e){var n=e.theme;return{backgroundColor:n.palette.primary.main,transition:"all 0.5s ease","&:hover":{backgroundColor:n.palette.primary.dark},"&.Mui-focused":{backgroundColor:n.palette.primary.dark},"&.Mui-disabled":{backgroundColor:n.palette.primary.dark}}})),h=(0,a.ZP)(c.Z)((function(e){return{backgroundColor:e.theme.palette.primary.main,padding:0,overflow:"hidden",div:{width:"100%",height:"100%"}}}));function x(e){var n=e.children,t=(e.disableRipple,e.disableFocusRipple,e.disableTouchRipple,(0,l.Z)(e,d));return(0,u.jsx)(h,(0,i.Z)((0,i.Z)({disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0},t),{},{children:n}))}function Z(e){var n=e.value,t=void 0===n?0:n,a=e.onChange,o=e.disabled,c=void 0!==o&&o,d=e.float,h=void 0!==d&&d,x=(0,l.Z)(e,f),Z=(0,s.useState)(t),p=(0,r.Z)(Z,2),y=p[0],m=p[1],j=(0,s.useState)(!1),g=(0,r.Z)(j,2),b=g[0],k=g[1],C=(0,s.useMemo)((function(){return h?parseFloat:parseInt}),[h]),w=(0,s.useCallback)((function(){a(y),k(!1)}),[a,y,k]),S=(0,s.useCallback)((function(){k(!0)}),[k]);(0,s.useEffect)((function(){return m(t)}),[t,m]);var K=(0,s.useCallback)((function(e){return m(C(e.target.value)||0)}),[m,C]),E=(0,s.useCallback)((function(e){return"Enter"===e.key&&w()}),[w]);return(0,u.jsx)(v,(0,i.Z)({value:b&&!y?"":y,"aria-label":"custom-input",type:"number",inputProps:{step:h?.1:1},onChange:K,onBlur:w,onFocus:S,disabled:c,onKeyDown:E},x))}},55221:function(e,n,t){var r=t(1413),i=t(45987),l=t(53174),a=t(54483),o=t(68870),c=t(96106),s=t(80184),u=["className"];n.Z=function(e){var n=e.className,t=(0,i.Z)(e,u);return(0,s.jsx)(c.Z,(0,r.Z)((0,r.Z)({placement:"top"},t),{},{className:n,children:(0,s.jsx)(o.Z,{component:"span",sx:{cursor:"help"},children:(0,s.jsx)(a.G,{icon:l.sqG})})}))}},14525:function(e,n,t){t.d(n,{Z:function(){return K},b:function(){return E}});var r,i,l=t(29439),a=t(30168),o=t(4942),c=t(1413),s=t(53174),u=t(54483),d=t(39504),f=t(20890),v=t(2199),h=t(23786),x=t(24518),Z=t(52791),p=t(72791),y=t(22020),m=t(2693),j=t(26138),g=t(79406),b=t(71310),k=t(10600),C=t(33890),w=t(55221),S=t(80184);function K(e){var n=e.statFilters,t=void 0===n?{}:n,s=e.setStatFilters,u=e.disabled,v=void 0!==u&&u,h=(0,y.$)("page_character").t,x=(0,p.useContext)(m.R).data,g=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==x.get(j.ri.weaponType).value&&g.push("physical_dmg_");var k=x.get(j.ri.charEle).value;g.push("".concat(k,"_dmg_"));var C=g.filter((function(e){return!Object.keys(t).some((function(n){return n===e}))})),K=(0,p.useCallback)((function(e,n){return s((0,c.Z)((0,c.Z)({},t),{},(0,o.Z)({},e,n)))}),[t,s]);return(0,S.jsxs)(Z.Z,{children:[(0,S.jsx)(b.Z,{children:(0,S.jsxs)(d.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,S.jsx)(f.Z,{children:h(r||(r=(0,a.Z)(["tabOptimize.constraintFilter.title"])))}),(0,S.jsx)(w.Z,{title:(0,S.jsx)(f.Z,{children:h(i||(i=(0,a.Z)(["tabOptimize.constraintFilter.tooltip"])))})})]})}),(0,S.jsxs)(Z.Z,{display:"flex",flexDirection:"column",gap:.5,children:[Object.entries(t).map((function(e){var n=(0,l.Z)(e,2),r=n[0],i=n[1];return(0,S.jsx)(E,{statKey:r,statKeys:C,setFilter:K,disabled:v,value:i,close:function(){delete t[r],s((0,c.Z)({},t))}},r)})),(0,S.jsx)(E,{value:void 0,close:void 0,statKeys:C,setFilter:K,disabled:v})]})]})}function E(e){var n=e.statKey,t=e.statKeys,r=void 0===t?[]:t,i=e.value,l=void 0===i?0:i,a=e.close,o=e.setFilter,c=e.disabled,d=void 0!==c&&c,f="%"===g.ZP.unit(n),Z=(0,p.useCallback)((function(e){return n&&o(n,e)}),[o,n]);return(0,S.jsxs)(v.Z,{sx:{width:"100%"},children:[(0,S.jsx)(C.Z,{title:n?g.ZP.get(n):"New Stat",disabled:d,color:n?"success":"secondary",children:r.map((function(e){return(0,S.jsx)(h.Z,{onClick:function(){null===a||void 0===a||a(),o(e,l)},children:g.ZP.get(e)},e)}))}),(0,S.jsx)(k.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,S.jsx)(k.ZP,{disabled:!n,float:f,value:l,placeholder:"Min Value",onChange:Z,sx:{px:2}})}),!!a&&(0,S.jsx)(x.Z,{color:"error",onClick:a,disabled:d,children:(0,S.jsx)(u.G,{icon:s.I7k})})]})}},20323:function(e,n,t){function r(){return{tcMode:!1}}t.d(n,{c:function(){return r}})},72838:function(e,n,t){t.d(n,{Z:function(){return H},N:function(){return Q}});var r,i,l,a,o=t(30168),c=t(29439),s=t(53174),u=t(54483),d=t(40117),f=t(62002),v=t(66647),h=t(68870),x=t(20890),Z=t(47047),p=t(13400),y=t(81918),m=t(39504),j=t(2199),g=t(18455),b=t(24518),k=t(72791),C=t(22020),w=t(95614),S=t(71310),K=t(36944),E=t(40020),M=t(91702),P=t(20005),I=t(55221),_=t(25617),A=t(10157),F=t(75545),R=t(19272),G=t(31148),O=t(56928),N=t(79406),z=t(63372),V=t(42320),D=t(50765),T=t(60393),B=t(46797),q=t(44217),L=t(80184),U=(0,k.lazy)((function(){return Promise.all([t.e(731),t.e(818),t.e(292)]).then(t.bind(t,29292))})),W=new Set(D.L);function H(e){var n,t,D,T,H=e.artifactId,Q=e.artifactObj,X=e.onClick,J=e.onDelete,Y=e.mainStatAssumptionLevel,ee=void 0===Y?0:Y,ne=e.effFilter,te=void 0===ne?W:ne,re=e.probabilityFilter,ie=e.disableEditSetSlot,le=void 0!==ie&&ie,ae=e.editor,oe=void 0!==ae&&ae,ce=e.canEquip,se=void 0!==ce&&ce,ue=e.extraButtons,de=(0,C.$)(["artifact"]).t,fe=(0,k.useContext)(O.t).database,ve=(0,z.Z)(H),he=(0,V.Z)(G.y.get(null===(n=null!==Q&&void 0!==Q?Q:ve)||void 0===n?void 0:n.setKey),[Q,ve]),xe=!Q,Ze=(0,k.useState)(!1),pe=(0,c.Z)(Ze,2),ye=pe[0],me=pe[1],je=(0,k.useCallback)((function(){return me(!1)}),[me]),ge=(0,k.useCallback)((function(){return xe&&me(!0)}),[xe,me]),be=(0,k.useCallback)((function(e){return(0,L.jsx)(v.Z,{onClick:function(){return H&&(null===X||void 0===X?void 0:X(H))},sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[X,H]),ke=(0,k.useCallback)((function(e){return(0,L.jsx)(h.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[]),Ce=null!==Q&&void 0!==Q?Q:ve;if(!Ce)return null;var we=Ce.id,Se=Ce.lock,Ke=Ce.slotKey,Ee=Ce.rarity,Me=Ce.level,Pe=Ce.mainStatKey,Ie=Ce.substats,_e=Ce.exclude,Ae=Ce.location,Fe=void 0===Ae?"":Ae,Re=Math.max(Math.min(ee,4*Ee),Me),Ge=N.ZP.unit(Pe),Oe="roll"+(Math.floor(Math.max(Me,0)/4)+1),Ne=R.Z.getArtifactEfficiency(Ce,te),ze=Ne.currentEfficiency,Ve=Ne.maxEfficiency,De=0!==Ve,Te=(null===he||void 0===he?void 0:he.getSlotName(Ke))||"Unknown Piece Name",Be=null===he||void 0===he?void 0:he.getSlotDesc(Ke),qe=Be&&(0,L.jsx)(I.Z,{title:(0,L.jsx)(x.Z,{children:Be})}),Le=null===he||void 0===he?void 0:he.setEffects,Ue=he&&Le&&(0,L.jsx)(I.Z,{title:(0,L.jsx)("span",{children:Object.keys(Le).map((function(e){return(0,L.jsxs)("span",{children:[(0,L.jsx)(x.Z,{variant:"h6",children:(0,L.jsx)(_.Z,{color:"success",children:de("setEffectNum",{setNum:e})})}),(0,L.jsx)(x.Z,{children:he.setEffectDesc(e)})]},e)}))})});return(0,L.jsxs)(k.Suspense,{fallback:(0,L.jsx)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:[oe&&(0,L.jsx)(k.Suspense,{fallback:!1,children:(0,L.jsx)(U,{artifactIdToEdit:ye?H:"",cancelEdit:je,disableEditSetSlot:le})}),(0,L.jsxs)(S.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,L.jsxs)(P.Z,{condition:!!X,wrapper:be,falseWrapper:ke,children:[(0,L.jsxs)(h.Z,{className:"grad-".concat(Ee,"star"),sx:{position:"relative",width:"100%"},children:[!X&&(0,L.jsx)(p.Z,{color:"primary",disabled:!xe,onClick:function(){return fe.updateArt({lock:!Se},we)},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:Se?(0,L.jsx)(d.Z,{}):(0,L.jsx)(f.Z,{})}),(0,L.jsxs)(h.Z,{sx:{pt:2,px:2,position:"relative",zIndex:1},children:[(0,L.jsxs)(h.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,L.jsx)(y.Z,{size:"small",label:(0,L.jsx)("strong",{children:" +".concat(Me)}),color:Oe}),(0,L.jsxs)(x.Z,{sx:{flexGrow:1},children:[Te," ",qe]})]}),(0,L.jsx)(x.Z,{color:"text.secondary",variant:"body2",children:(0,L.jsx)(w.ZP,{slotKey:Ke})}),(0,L.jsx)(x.Z,{variant:"h6",color:"".concat(N.ZP.getVariant(Pe),".main"),children:(0,L.jsxs)("span",{children:[F.Z[Pe]," ",N.ZP.get(Pe)]})}),(0,L.jsx)(x.Z,{variant:"h5",children:(0,L.jsx)("strong",{children:(0,L.jsxs)(M.Z,{color:Re!==Me?"warning":void 0,children:[(0,N.qs)(null!==(t=R.Z.mainStatValue(Pe,Ee,Re))&&void 0!==t?t:0,N.ZP.unit(Pe)),Ge]})})}),(0,L.jsx)(A.t,{stars:Ee,colored:!0})]}),(0,L.jsx)(h.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,L.jsx)(h.Z,{component:"img",src:null!==(D=null===he||void 0===he?void 0:he.slotIcons[Ke])&&void 0!==D?D:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,L.jsxs)(m.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:0,width:"100%"},children:[Ie.map((function(e){return(0,L.jsx)($,{stat:e,effFilter:te,rarity:Ee},e.key)})),(0,L.jsxs)(h.Z,{sx:{display:"flex",my:1},children:[(0,L.jsx)(x.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:de(r||(r=(0,o.Z)(["editor.curSubEff"])))}),(0,L.jsx)(B.Z,{value:ze,max:900,valid:De})]}),ze!==Ve&&(0,L.jsxs)(h.Z,{sx:{display:"flex",mb:1},children:[(0,L.jsx)(x.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:de(i||(i=(0,o.Z)(["editor.maxSubEff"])))}),(0,L.jsx)(B.Z,{value:Ve,max:900,valid:De})]}),(0,L.jsx)(h.Z,{flexGrow:1}),re&&(0,L.jsxs)("strong",{children:["Probability: ",(100*(0,q.B)(Ce,re)).toFixed(2),"%"]}),(0,L.jsxs)(x.Z,{color:"success.main",children:[null!==(T=null===he||void 0===he?void 0:he.name)&&void 0!==T?T:"Artifact Set"," ",Ue]})]})]}),(0,L.jsxs)(h.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[xe&&se?(0,L.jsx)(K.Z,{size:"small",inventory:!0,value:Fe,onChange:function(e){return fe.setArtLocation(H,e)}}):(0,L.jsx)(E.Z,{location:Fe}),xe&&(0,L.jsxs)(j.Z,{sx:{height:"100%"},children:[oe&&(0,L.jsx)(g.Z,{title:(0,L.jsx)(x.Z,{children:de(l||(l=(0,o.Z)(["edit"])))}),placement:"top",arrow:!0,children:(0,L.jsx)(b.Z,{color:"info",size:"small",onClick:ge,children:(0,L.jsx)(u.G,{icon:s.Xcf,className:"fa-fw"})})}),oe&&(0,L.jsx)(g.Z,{title:(0,L.jsx)(x.Z,{children:de(a||(a=(0,o.Z)(["excludeArtifactTip"])))}),placement:"top",arrow:!0,children:(0,L.jsx)(b.Z,{onClick:function(){return fe.updateArt({exclude:!_e},we)},color:_e?"error":"success",size:"small",children:(0,L.jsx)(u.G,{icon:_e?s.gPx:s.Stf,className:"fa-fw"})})}),!!J&&(0,L.jsx)(b.Z,{color:"error",size:"small",onClick:function(){return J(we)},disabled:Se,children:(0,L.jsx)(u.G,{icon:s.I7k,className:"fa-fw"})}),ue]})]})]})]})}function $(e){var n,t,r,i=e.stat,l=e.effFilter,a=e.rarity;if(!i.value)return null;var o=null!==(n=null===(t=i.rolls)||void 0===t?void 0:t.length)&&void 0!==n?n:0,c=i.key?R.Z.maxSubstatValues(i.key):0,s=i.key?R.Z.getSubstatRollData(i.key,a):[],u=7-s.length,d="roll".concat((0,T.uZ)(o,1,6)),f=null!==(r=i.efficiency)&&void 0!==r?r:0,v=(0,T.V2)(.5+f/500*.5),Z=N.ZP.getStr(i.key),p=N.ZP.unit(i.key),y=i.key&&l.has(i.key);return(0,L.jsxs)(h.Z,{display:"flex",gap:1,alignContent:"center",children:[(0,L.jsxs)(x.Z,{sx:{flexGrow:1},color:o?"".concat(d,".main"):"error.main",component:"span",children:[F.Z[i.key]," ",Z,"+".concat((0,N.qs)(i.value,N.ZP.unit(i.key))).concat(p)]}),y&&(0,L.jsx)(h.Z,{display:"flex",gap:.25,height:"1.3em",children:i.rolls.sort().map((function(e,n){return(0,L.jsx)(Q,{value:100*e/c,color:"roll".concat((0,T.uZ)(u+s.indexOf(e),1,6),".main")},"".concat(n).concat(e))}))}),(0,L.jsx)(x.Z,{sx:{opacity:v,minWidth:40,textAlign:"right"},children:y?"".concat(f.toFixed(),"%"):"-"})]})}function Q(e){var n=e.color,t=void 0===n?"red":n,r=e.value,i=void 0===r?50:r;return(0,L.jsx)(h.Z,{sx:{width:7,height:"100%",bgcolor:t,overflow:"hidden",borderRadius:1,display:"inline-block"},children:(0,L.jsx)(h.Z,{sx:{width:10,height:"".concat(100-(0,T.uZ)(i,0,100),"%"),bgcolor:"gray"}})})}},44824:function(e,n,t){t.d(n,{OQ:function(){return c},bq:function(){return s},Af:function(){return u},sZ:function(){return d},x3:function(){return f},EM:function(){return v}});var r=t(37762),i=t(93433),l=t(24351),a=t(19272),o=t(44217),c=["rarity","level","artsetkey","efficiency","mefficiency","probability"],s=["probability"];function u(){return{artSetKeys:[],rarity:(0,i.Z)(l.En),levelLow:0,levelHigh:20,slotKeys:(0,i.Z)(l.eV),mainStatKeys:[],substats:[],location:"",excluded:""}}var d=function(){return{filterOption:u(),ascending:!1,sortType:c[0]}};function f(e,n){return{rarity:{getValue:function(e){var n;return null!==(n=e.rarity)&&void 0!==n?n:0},tieBreaker:"level"},level:{getValue:function(e){var n;return null!==(n=e.level)&&void 0!==n?n:0},tieBreaker:"artsetkey"},artsetkey:{getValue:function(e){var n;return null!==(n=e.setKey)&&void 0!==n?n:""},tieBreaker:"level"},efficiency:{getValue:function(n){return a.Z.getArtifactEfficiency(n,e).currentEfficiency}},mefficiency:{getValue:function(n){return a.Z.getArtifactEfficiency(n,e).maxEfficiency}},probability:{getValue:function(e){if(!Object.keys(n).length)return 0;var t=e.probability;return void 0===t?(0,o.B)(e,n):t}}}}function v(){return{excluded:function(e,n){return!("excluded"===n&&!e.exclude)&&("included"!==n||!e.exclude)},location:function(e,n){return!n||("Inventory"===n&&!e.location||(!("Equipped"!==n||!e.location)||n===e.location))},artSetKeys:function(e,n){return!n.length||n.includes(e.setKey)},slotKeys:function(e,n){return n.includes(e.slotKey)},mainStatKeys:function(e,n){return!n.length||n.includes(e.mainStatKey)},levelLow:function(e,n){return n<=e.level},levelHigh:function(e,n){return n>=e.level},rarity:function(e,n){return n.includes(e.rarity)},substats:function(e,n){var t,i=(0,r.Z)(n);try{var l=function(){var n=t.value;if(n&&!e.substats.some((function(e){return e.key===n})))return{v:!1}};for(i.s();!(t=i.n()).done;){var a=l();if("object"===typeof a)return a.v}}catch(o){i.e(o)}finally{i.f()}return!0}}}},46797:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(29439),i=t(25617),l=t(60393),a=t(80184);function o(e){var n=e.value,t=e.max,o=void 0===t?1:t,c=e.valid,s="number"===typeof n?["roll".concat((0,l.uZ)(Math.floor(n/o*10)-4,1,6)),n.toFixed()+"%"]:["secondary",n],u=(0,r.Z)(s,2),d=u[0],f=u[1];return c||(d="error"),(0,a.jsx)(i.Z,{color:d,children:f})}},44217:function(e,n,t){t.d(n,{B:function(){return g}});var r=t(29439),i=t(37762),l=t(4942),a=t(1413),o=t(93433),c=t(60393),s=t(19272),u=t(12354),d=[3,4,6],f={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3},v={};function h(e,n,t,r){if(5!==e.length)for(var i=0,s=d;i<s.length;i++){var u=s[i];n[u]>0&&h([].concat((0,o.Z)(e),[u]),(0,a.Z)((0,a.Z)({},n),{},(0,l.Z)({},u,n[u]-u)),t-u,r*n[u]/t)}else(0,c.SR)(v,e,r)}h([0],{3:6,4:20,6:18},44,1),h([3],{3:3,4:20,6:18},41,1),h([4],{3:6,4:16,6:18},40,1),h([6],{3:6,4:20,6:12},38,1);for(var x=Array(6).fill(0).map((function(e,n){for(var t=[1],r=0,i=1;++r<=n;)i*=n-r+1,i/=r,t.push(i);return t})),Z=[[1]],p=function(){var e=Z[Z.length-1],n=Array(e.length+3).fill(0);e.forEach((function(e,t){for(var r=0,i=[0,1,2,3];r<i.length;r++){n[t+i[r]]+=e}})),Z.push(n.map((function(e){return e/4})))};Z.length<6;)p();for(var y=function(){var e=j[m],n=e.reduce((function(e,n){return e+n}));e.forEach((function(e,t,r){r[t]=n,n-=e}))},m=0,j=Z;m<j.length;m++)y();function g(e,n){if(e.rarity<=2)return NaN;var t=e.rarity,o=e.level,h=e.substats,p=(0,a.Z)({},n),y=new Set(Object.keys(p)),m=0,j=e.mainStatKey;if(j in p){var g=4*t;if(u[t][j][g]<p[j])return 0;delete p[j],y.delete(j)}var b,k=(0,i.Z)(h);try{for(k.s();!(b=k.n()).done;){var C=b.value,w=C.key,S=C.value;w?y.has(w)&&(y.delete(w),p[w]>S?p[w]-=S:delete p[w]):m+=1}}catch(O){k.e(O)}finally{k.f()}if(m+=4-h.length,y.size>m||Object.keys(p).length>4)return 0;for(var K=s.Z.rollsRemaining(o,t)-m,E=0,M=Object.entries(p);E<M.length;E++){var P=(0,r.Z)(M[E],2),I=P[0],_=P[1];p[I]=Math.max(Math.ceil(10*_/s.Z.maxSubstatValues(I,t)),1)}var A=0,F=Object.entries(p).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],l=y.has(t)?1:0,a=Math.ceil(i/10)-l;return A+=a,{target:i,filler:l,minUpgrade:a}})).reverse();if(A>K)return 0;var R=(0,l.Z)({},K,1),G=K-A;return F.forEach((function(e,n){for(var t,i,l,a=e.target,o=e.filler,c=e.minUpgrade,s={},u=c;u<=c+G;u++)for(var d=a-7*(u+o),f=d>0?Z[u+o][d]:1,v=0,h=Object.entries(R);v<h.length;v++){var p,y=(0,r.Z)(h[v],2),m=y[0],j=y[1],g=parseInt(m);if(!(g<u)){var b=(i=u,l=4-n,x[t=g][i]*Math.pow(l-1,t-i)/Math.pow(l,t)),k=g-u;s[k]=(null!==(p=s[k])&&void 0!==p?p:0)+j*f*b}}R=s})),function(e,n,t){var r,l,a=null!==(r=f[e])&&void 0!==r?r:0,o=0,s={3:2,4:5,6:3},u=v[a],h=(0,i.Z)(n);try{for(h.s();!(l=h.n()).done;){var Z=l.value.key;if(Z){var p=f[Z];u=u[p],s[p]-=1}}}catch(O){h.e(O)}finally{h.f()}a&&(s[a]-=1);var y,m={3:0,4:0,6:0},j=(0,i.Z)(t);try{for(j.s();!(y=j.n()).done;){var g=y.value;m[f[g]]+=1}}catch(O){j.e(O)}finally{j.f()}var b=0;(0,c.Q1)(u,[],(function(e){return"number"===typeof e}),(function(e,n){b+=e;var t,r={3:0,4:0,6:0},l=(0,i.Z)(n);try{for(l.s();!(t=l.n()).done;){r[t.value]+=1}}catch(O){l.e(O)}finally{l.f()}var a,c=e,s=(0,i.Z)(d);try{for(s.s();!(a=s.n()).done;){var u=a.value,f=r[u],v=m[u];if(f<v)return;c*=x[f][v]}}catch(O){s.e(O)}finally{s.f()}o+=c}));var k,C=(0,i.Z)(d);try{for(C.s();!(k=C.n()).done;){var w=k.value;o/=x[s[w]][m[w]]}}catch(O){C.e(O)}finally{C.f()}return o/b}(e.mainStatKey,h,y)*Object.values(R).reduce((function(e,n){return e+n}))}},63372:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(29439),i=t(72791),l=t(56928);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,i.useContext)(l.t),t=n.database,a=(0,i.useState)(t._getArt(e)),o=(0,r.Z)(a,2),c=o[0],s=o[1];return(0,i.useEffect)((function(){return s(t._getArt(e))}),[t,e]),(0,i.useEffect)((function(){return e?t.followArt(e,s):void 0}),[e,s,t]),c}}}]);
//# sourceMappingURL=328.049b342d.chunk.js.map