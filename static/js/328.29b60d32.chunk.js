"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[328],{31038:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(93433),i=n(1413),a=n(45987),l=n(53174),o=n(54483),c=n(63204),u=n(14361),s=n(13967),d=n(47047),f=n(94198),h=n(20890),v=n(68870),p=n(72791),x=n(22020),Z=n(947),y=n(3397),b=n(42320),g=n(24351),m=n(50921),j=n(46956),k=n(610),w=n(68244),C=n(2380),S=n(80184),E=["value","onChange","defaultText","defaultIcon","placeholderText","labelText","showDefault","showInventory","showEquipped","filter","disable"];function I(e){var t=e.value,n=e.onChange,I=e.defaultText,M=void 0===I?"":I,F=e.defaultIcon,K=void 0===F?"":F,P=e.placeholderText,_=void 0===P?"":P,R=e.labelText,A=void 0===R?"":R,O=e.showDefault,T=void 0!==O&&O,G=e.showInventory,D=void 0!==G&&G,N=e.showEquipped,V=void 0!==N&&N,q=e.filter,z=void 0===q?function(){return!0}:q,B=e.disable,L=void 0===B?function(){return!1}:B,W=(0,a.Z)(e,E),H=(0,x.$)(["ui","artifact","charNames_gen"]).t,$=(0,s.Z)(),U=(0,p.useContext)(y.t).database,J=(0,b.Z)((function(){return Z.Z.getAll}),[]),Q=(0,p.useMemo)((function(){return J&&(0,m.zU)(U,J)}),[U,J]),X=U.chars.keys.filter((function(e){return(null===J||void 0===J?void 0:J[e])&&z(J[e],e)})).sort(),Y=(0,p.useCallback)((function(e){switch(e){case"Equipped":return H("artifact:filterLocation.currentlyEquipped");case"Inventory":return H("artifact:filterLocation.inventory");case"":return M;default:return H("charNames_gen:".concat(e))}}),[M,H]),ee=(0,p.useCallback)((function(e){var t;switch(e){case"Equipped":return(0,S.jsx)(o.G,{icon:l.caW});case"Inventory":return(0,S.jsx)(c.Z,{});case"":return K;default:return(0,S.jsx)(C.Z,{src:null===(t=J[e])||void 0===t?void 0:t.thumbImgSide,sx:{pr:1}})}}),[K,J]),te=(0,p.useMemo)((function(){return Q&&function(e,t,n,i,a,l){if(!t)return[];var o=[];i&&o.push({value:"",label:n("")});a&&o.push({value:"Inventory",label:n("Inventory")});l&&o.push({value:"Equipped",label:n("Equipped")});var c=e.filter((0,j.C)({element:(0,r.Z)(g.N),weaponType:(0,r.Z)(g.yd),favorite:"yes",name:""},t)).map((function(e){return{value:e,label:n(e)}})),u=e.filter((0,j.C)({element:(0,r.Z)(g.N),weaponType:(0,r.Z)(g.yd),favorite:"no",name:""},t)).map((function(e){return{value:e,label:n(e)}}));return o.concat(c).concat(u)}(X,Q,Y,T,D,V)}),[Q,X,T,D,V,Y]);return J&&te?(0,S.jsx)(f.Z,(0,i.Z)({autoHighlight:!0,options:te,clearIcon:t?void 0:"",getOptionLabel:function(e){return e.label},onChange:function(e,t,r){return("change"!==e.type||"clear"!==r)&&n(t?t.value:"")},isOptionEqualToValue:function(e,t){return e.value===t.value},getOptionDisabled:function(e){return L(e.value)},value:{value:t,label:Y(t)},renderInput:function(e){return(0,S.jsx)(w.Z,(0,i.Z)((0,i.Z)({},e),{},{label:A,placeholder:_,startAdornment:ee(t),hasValue:!!t}))},renderOption:function(e,n){var r,i="Equipped"!==n.value&&"Inventory"!==n.value&&""!==n.value&&(null===(r=U.chars.get(n.value))||void 0===r?void 0:r.favorite);return(0,S.jsx)(k.Z,{value:n.value?n.value:"default",image:ee(n.value),text:(0,S.jsx)(p.Suspense,{fallback:(0,S.jsx)(d.Z,{variant:"text",width:100}),children:(0,S.jsx)(h.Z,{variant:"inherit",noWrap:!0,children:Y(n.value)})}),theme:$,isSelected:t===n.value,addlElement:(0,S.jsxs)(S.Fragment,{children:[i&&(0,S.jsx)(v.Z,{display:"flex",flexGrow:1}),i&&(0,S.jsx)(u.Z,{sx:{ml:1,mr:-.5}})]}),props:e},n.value?n.value:"default")}},W)):(0,S.jsx)(d.Z,{height:50})}},40020:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(63204),i=n(20890),a=n(22020),l=n(947),o=n(42320),c=n(80184);function u(e){var t=e.location,n=(0,a.$)("ui").t,u=(0,o.Z)((function(){return l.Z.get(null!==t&&void 0!==t?t:"")}),[t]);return(0,c.jsx)(i.Z,{component:"span",children:null!==u&&void 0!==u&&u.name?u.nameWIthIcon:(0,c.jsxs)("span",{children:[(0,c.jsx)(r.Z,{sx:{verticalAlign:"text-bottom"}})," ",n("inventory")]})})}},2380:function(e,t,n){var r=(0,n(93457).Z)("img")((function(e){var t=e.theme;return{display:"inline-block",width:"auto",height:"2.3em",lineHeight:1,verticalAlign:"text-bottom",marginTop:t.spacing(-3),marginLeft:t.spacing(-1.25),marginRight:t.spacing(-1),marginBottom:t.spacing(-1)}}));t.Z=r},10600:function(e,t,n){n.d(t,{CC:function(){return p},ZP:function(){return x}});var r=n(29439),i=n(1413),a=n(45987),l=n(66934),o=n(4834),c=n(24518),u=n(72791),s=n(80184),d=["children","disableRipple","disableFocusRipple","disableTouchRipple"],f=["value","onChange","disabled","float"],h=(0,l.ZP)(o.ZP)((function(e){var t=e.theme;return{backgroundColor:t.palette.primary.main,transition:"all 0.5s ease","&:hover":{backgroundColor:t.palette.primary.dark},"&.Mui-focused":{backgroundColor:t.palette.primary.dark},"&.Mui-disabled":{backgroundColor:t.palette.primary.dark}}})),v=(0,l.ZP)(c.Z)((function(e){return{backgroundColor:e.theme.palette.primary.main,padding:0,overflow:"hidden",div:{width:"100%",height:"100%"}}}));function p(e){var t=e.children,n=(e.disableRipple,e.disableFocusRipple,e.disableTouchRipple,(0,a.Z)(e,d));return(0,s.jsx)(v,(0,i.Z)((0,i.Z)({disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0},n),{},{children:t}))}function x(e){var t=e.value,n=void 0===t?0:t,l=e.onChange,o=e.disabled,c=void 0!==o&&o,d=e.float,v=void 0!==d&&d,p=(0,a.Z)(e,f),x=(0,u.useState)(n),Z=(0,r.Z)(x,2),y=Z[0],b=Z[1],g=(0,u.useState)(!1),m=(0,r.Z)(g,2),j=m[0],k=m[1],w=(0,u.useMemo)((function(){return v?parseFloat:parseInt}),[v]),C=(0,u.useCallback)((function(){l(y),k(!1)}),[l,y,k]),S=(0,u.useCallback)((function(){k(!0)}),[k]);(0,u.useEffect)((function(){return b(n)}),[n,b]);var E=(0,u.useCallback)((function(e){return b(w(e.target.value)||0)}),[b,w]),I=(0,u.useCallback)((function(e){return"Enter"===e.key&&C()}),[C]);return(0,s.jsx)(h,(0,i.Z)({value:j&&!y?"":y,"aria-label":"custom-input",type:"number",inputProps:{step:v?.1:1},onChange:E,onBlur:C,onFocus:S,disabled:c,onKeyDown:I},p))}},55221:function(e,t,n){var r=n(1413),i=n(45987),a=n(53174),l=n(54483),o=n(68870),c=n(96106),u=n(80184),s=["className"];t.Z=function(e){var t=e.className,n=(0,i.Z)(e,s);return(0,u.jsx)(c.Z,(0,r.Z)((0,r.Z)({placement:"top"},n),{},{className:t,children:(0,u.jsx)(o.Z,{component:"span",sx:{cursor:"help"},children:(0,u.jsx)(l.G,{icon:a.sqG})})}))}},610:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(1413),i=n(23786),a=n(57064),l=n(49900),o=n(80184);function c(e){var t=e.value,n=e.image,c=void 0===n?"":n,u=e.text,s=e.theme,d=e.isSelected,f=e.addlElement,h=e.props;return(0,o.jsxs)(i.Z,(0,r.Z)((0,r.Z)({value:t},h),{},{children:[(0,o.jsx)(a.Z,{children:c}),(0,o.jsx)(l.Z,{primaryTypographyProps:{style:{fontWeight:d?s.typography.fontWeightMedium:s.typography.fontWeightRegular}},children:u}),f&&f]}),t)}},68244:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),i=n(45987),a=n(13967),l=n(58165),o=n(80184),c=["hasValue","startAdornment","InputProps","sx"];function u(e){var t=e.hasValue,n=e.startAdornment,u=e.InputProps,s=e.sx,d=(0,i.Z)(e,c),f=(0,a.Z)();return(0,o.jsx)(l.Z,(0,r.Z)((0,r.Z)({},d),{},{variant:"filled",color:t?"success":"primary",hiddenLabel:!d.label,type:"search",InputProps:(0,r.Z)((0,r.Z)({},u),{},{startAdornment:n}),InputLabelProps:{style:{color:f.palette.text.primary}},sx:(0,r.Z)((0,r.Z)({},s),{},{"& .MuiFilledInput-root":{backgroundColor:t?f.palette.success.main:f.palette.primary.main,paddingTop:d.label?void 0:0,paddingBottom:0},"& .MuiFilledInput-root.Mui-focused":{backgroundColor:t?f.palette.success.light:f.palette.primary.light},"& .MuiFilledInput-root:hover":{backgroundColor:t?f.palette.success.dark:f.palette.primary.dark},"& .MuiFilledInput-root:before":{border:"none"},"& .MuiFilledInput-root.Mui-disabled:before":{border:"none"},"& .MuiFilledInput-root:after":{border:"none"},"& .MuiFilledInput-root:hover:not(.Mui-disabled):before":{border:"none"},"& input[type=search]::-ms-clear":{display:"none",width:0,height:0},"& input[type=search]::-ms-reveal":{display:"none",width:0,height:0},"& input[type=search]::-webkit-search-decoration":{display:"none"},"& input[type=search]::-webkit-search-cancel-button":{display:"none"},"& input[type=search]::-webkit-search-results-button":{display:"none"},"& input[type=search]::-webkit-search-results-decoration":{display:"none"}})}))}},14525:function(e,t,n){n.d(t,{Z:function(){return M},b:function(){return F}});var r,i,a=n(29439),l=n(30168),o=n(4942),c=n(1413),u=n(53174),s=n(54483),d=n(39504),f=n(20890),h=n(2199),v=n(23786),p=n(24518),x=n(52791),Z=n(72791),y=n(22020),b=n(17618),g=n(2693),m=n(26138),j=n(79406),k=n(74544),w=n(71310),C=n(10600),S=n(33890),E=n(55221),I=n(80184);function M(e){var t=e.disabled,n=void 0!==t&&t,u=(0,y.$)("page_character").t,s=(0,Z.useContext)(b.K).character.key,h=(0,Z.useContext)(g.R).data,v=(0,k.Z)(s),p=v.buildSetting.statFilters,j=v.buildSettingDispatch,C=(0,Z.useCallback)((function(e){return j({statFilters:e})}),[j]),S=(0,Z.useMemo)((function(){var e=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==h.get(m.ri.weaponType).value&&e.push("physical_dmg_");var t=h.get(m.ri.charEle).value;return e.push("".concat(t,"_dmg_")),e}),[h]),M=(0,Z.useMemo)((function(){return S.filter((function(e){return!Object.keys(p).some((function(t){return t===e}))}))}),[S,p]),K=(0,Z.useCallback)((function(e,t){return C((0,c.Z)((0,c.Z)({},p),{},(0,o.Z)({},e,t)))}),[p,C]);return(0,I.jsxs)(x.Z,{children:[(0,I.jsx)(w.Z,{children:(0,I.jsxs)(d.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,I.jsx)(f.Z,{children:u(r||(r=(0,l.Z)(["tabOptimize.constraintFilter.title"])))}),(0,I.jsx)(E.Z,{title:(0,I.jsx)(f.Z,{children:u(i||(i=(0,l.Z)(["tabOptimize.constraintFilter.tooltip"])))})})]})}),(0,I.jsxs)(x.Z,{display:"flex",flexDirection:"column",gap:.5,children:[Object.entries(p).map((function(e){var t=(0,a.Z)(e,2),r=t[0],i=t[1];return(0,I.jsx)(F,{statKey:r,statKeys:M,setFilter:K,disabled:n,value:i,close:function(){delete p[r],C((0,c.Z)({},p))}},r)})),(0,I.jsx)(F,{statKeys:M,setFilter:K,disabled:n})]})]})}function F(e){var t=e.statKey,n=e.statKeys,r=void 0===n?[]:n,i=e.value,a=void 0===i?0:i,l=e.close,o=e.setFilter,c=e.disabled,d=void 0!==c&&c,f="%"===j.ZP.unit(t),x=(0,Z.useCallback)((function(e){return t&&o(t,e)}),[o,t]);return(0,I.jsxs)(h.Z,{sx:{width:"100%"},children:[(0,I.jsx)(S.Z,{title:t?(0,I.jsx)(j._J,{statKey:t}):"New Stat",disabled:d,color:t?"success":"secondary",children:r.map((function(e){return(0,I.jsx)(v.Z,{onClick:function(){null===l||void 0===l||l(),o(e,a)},children:(0,I.jsx)(j._J,{statKey:e})},e)}))}),(0,I.jsx)(C.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,I.jsx)(C.ZP,{disabled:!t||d,float:f,value:a,placeholder:"Stat Value",onChange:x,sx:{px:2},inputProps:{sx:{textAlign:"right"}},endAdornment:j.ZP.unit(t)})}),!!l&&(0,I.jsx)(p.Z,{color:"error",onClick:l,disabled:d,children:(0,I.jsx)(s.G,{icon:u.I7k})})]})}},20323:function(e,t,n){function r(){return{tcMode:!1}}n.d(t,{c:function(){return r}})},72838:function(e,t,n){n.d(t,{N:function(){return X},Z:function(){return J}});var r,i,a,l,o=n(93433),c=n(30168),u=n(29439),s=n(53174),d=n(54483),f=n(40117),h=n(62002),v=n(63204),p=n(66647),x=n(68870),Z=n(47047),y=n(20890),b=n(13400),g=n(81918),m=n(39504),j=n(2199),k=n(40165),w=n(24518),C=n(72791),S=n(22020),E=n(95614),I=n(71310),M=n(31038),F=n(40020),K=n(91702),P=n(20005),_=n(55221),R=n(25617),A=n(10157),O=n(75545),T=n(98620),G=n(31148),D=n(3397),N=n(79406),V=n(63372),q=n(42320),z=n(50765),B=n(60393),L=n(46797),W=n(44217),H=n(80184),$=(0,C.lazy)((function(){return Promise.all([n.e(788),n.e(213)]).then(n.bind(n,66585))})),U=new Set(z._);function J(e){var t,n,o,z=e.artifactId,B=e.artifactObj,J=e.onClick,X=e.onDelete,Y=e.mainStatAssumptionLevel,ee=void 0===Y?0:Y,te=e.effFilter,ne=void 0===te?U:te,re=e.probabilityFilter,ie=e.disableEditSetSlot,ae=void 0!==ie&&ie,le=e.editor,oe=void 0!==le&&le,ce=e.canExclude,ue=void 0!==ce&&ce,se=e.canEquip,de=void 0!==se&&se,fe=e.extraButtons,he=(0,S.$)(["artifact","ui"]).t,ve=(0,C.useContext)(D.t).database,pe=(0,V.Z)(z),xe=(0,q.Z)((function(){var e;return G.y.get(null===(e=null!==B&&void 0!==B?B:pe)||void 0===e?void 0:e.setKey)}),[B,pe]),Ze=!B,ye=(0,C.useState)(!1),be=(0,u.Z)(ye,2),ge=be[0],me=be[1],je=(0,C.useCallback)((function(){return me(!1)}),[me]),ke=(0,C.useCallback)((function(){return Ze&&me(!0)}),[Ze,me]),we=(0,C.useCallback)((function(e){return(0,H.jsx)(p.Z,{onClick:function(){return z&&(null===J||void 0===J?void 0:J(z))},sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[J,z]),Ce=(0,C.useCallback)((function(e){return(0,H.jsx)(x.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[]),Se=null!==B&&void 0!==B?B:pe;if(!Se)return null;var Ee=Se.id,Ie=Se.lock,Me=Se.slotKey,Fe=Se.rarity,Ke=Se.level,Pe=Se.mainStatKey,_e=Se.substats,Re=Se.exclude,Ae=Se.location,Oe=void 0===Ae?"":Ae,Te=Math.max(Math.min(ee,4*Fe),Ke),Ge=N.ZP.unit(Pe),De="roll"+(Math.floor(Math.max(Ke,0)/4)+1),Ne=T.Z.getArtifactEfficiency(Se,ne),Ve=Ne.currentEfficiency,qe=Ne.maxEfficiency,ze=0!==qe,Be=null===xe||void 0===xe?void 0:xe.getSlotName(Me),Le=null===xe||void 0===xe?void 0:xe.getSlotDesc(Me),We=Le&&(0,H.jsx)(_.Z,{title:(0,H.jsxs)(x.Z,{children:[(0,H.jsx)(C.Suspense,{fallback:(0,H.jsx)(Z.Z,{variant:"text",width:100}),children:(0,H.jsx)(y.Z,{variant:"h6",children:Be})}),(0,H.jsx)(y.Z,{children:Le})]})}),He=null===xe||void 0===xe?void 0:xe.setEffects,$e=xe&&He&&(0,H.jsx)(_.Z,{title:(0,H.jsx)("span",{children:Object.keys(He).map((function(e){return(0,H.jsxs)("span",{children:[(0,H.jsx)(y.Z,{variant:"h6",children:(0,H.jsx)(R.Z,{color:"success",children:he("artifact:setEffectNum",{setNum:e})})}),(0,H.jsx)(y.Z,{children:xe.setEffectDesc(e)})]},e)}))})});return(0,H.jsxs)(C.Suspense,{fallback:(0,H.jsx)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:[oe&&(0,H.jsx)(C.Suspense,{fallback:!1,children:(0,H.jsx)($,{artifactIdToEdit:ge?z:"",cancelEdit:je,disableEditSetSlot:ae})}),(0,H.jsxs)(I.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,H.jsxs)(P.Z,{condition:!!J,wrapper:we,falseWrapper:Ce,children:[(0,H.jsxs)(x.Z,{className:"grad-".concat(Fe,"star"),sx:{position:"relative",width:"100%"},children:[!J&&(0,H.jsx)(b.Z,{color:"primary",disabled:!Ze,onClick:function(){return ve.arts.set(Ee,{lock:!Ie})},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:Ie?(0,H.jsx)(f.Z,{}):(0,H.jsx)(h.Z,{})}),(0,H.jsxs)(x.Z,{sx:{pt:2,px:2,position:"relative",zIndex:1},children:[(0,H.jsxs)(x.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,H.jsx)(g.Z,{size:"small",label:(0,H.jsx)("strong",{children:" +".concat(Ke)}),color:De}),!Be&&(0,H.jsx)(Z.Z,{variant:"text",width:100}),Be&&(0,H.jsx)(y.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,H.jsx)("strong",{children:Be})}),!We&&(0,H.jsx)(Z.Z,{width:10}),We]}),(0,H.jsx)(y.Z,{color:"text.secondary",variant:"body2",children:(0,H.jsx)(E.ZP,{slotKey:Me})}),(0,H.jsx)(y.Z,{variant:"h6",color:"".concat(N.ZP.getVariant(Pe),".main"),children:(0,H.jsxs)("span",{children:[O.Z[Pe]," ",N.ZP.get(Pe)]})}),(0,H.jsx)(y.Z,{variant:"h5",children:(0,H.jsx)("strong",{children:(0,H.jsxs)(K.Z,{color:Te!==Ke?"warning":void 0,children:[(0,N.qs)(null!==(t=T.Z.mainStatValue(Pe,Fe,Te))&&void 0!==t?t:0,N.ZP.unit(Pe)),Ge]})})}),(0,H.jsx)(A.t,{stars:Fe,colored:!0})]}),(0,H.jsx)(x.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,H.jsx)(x.Z,{component:"img",src:null!==(n=null===xe||void 0===xe?void 0:xe.slotIcons[Me])&&void 0!==n?n:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,H.jsxs)(m.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:0,width:"100%"},children:[_e.map((function(e){return(0,H.jsx)(Q,{stat:e,effFilter:ne,rarity:Fe},e.key)})),(0,H.jsxs)(x.Z,{sx:{display:"flex",my:1},children:[(0,H.jsx)(y.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:he(r||(r=(0,c.Z)(["artifact:editor.curSubEff"])))}),(0,H.jsx)(L.Z,{value:Ve,max:900,valid:ze})]}),Ve!==qe&&(0,H.jsxs)(x.Z,{sx:{display:"flex",mb:1},children:[(0,H.jsx)(y.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:he(i||(i=(0,c.Z)(["artifact:editor.maxSubEff"])))}),(0,H.jsx)(L.Z,{value:qe,max:900,valid:ze})]}),(0,H.jsx)(x.Z,{flexGrow:1}),re&&(0,H.jsxs)("strong",{children:["Probability: ",(100*(0,W.B)(Se,re)).toFixed(2),"%"]}),(0,H.jsxs)(y.Z,{color:"success.main",children:[null!==(o=null===xe||void 0===xe?void 0:xe.name)&&void 0!==o?o:"Artifact Set"," ",$e]})]})]}),(0,H.jsxs)(x.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[Ze&&de?(0,H.jsx)(M.Z,{sx:{flexGrow:1},size:"small",showDefault:!0,defaultIcon:(0,H.jsx)(v.Z,{}),defaultText:he("ui:inventory"),value:Oe,onChange:function(e){return ve.arts.setLocation(z,e)}}):(0,H.jsx)(F.Z,{location:Oe}),Ze&&(0,H.jsxs)(j.Z,{sx:{height:"100%"},children:[oe&&(0,H.jsx)(k.Z,{title:(0,H.jsx)(y.Z,{children:he(a||(a=(0,c.Z)(["artifact:edit"])))}),placement:"top",arrow:!0,children:(0,H.jsx)(w.Z,{color:"info",size:"small",onClick:ke,children:(0,H.jsx)(d.G,{icon:s.Xcf,className:"fa-fw"})})}),ue&&(0,H.jsx)(k.Z,{title:(0,H.jsxs)(x.Z,{children:[(0,H.jsx)(y.Z,{children:he(l||(l=(0,c.Z)(["artifact:excludeArtifactTip"])))}),(0,H.jsx)(y.Z,{children:(0,H.jsx)(K.Z,{color:Re?"error":"success",children:he("artifact:".concat(Re?"excluded":"included"))})})]}),placement:"top",arrow:!0,children:(0,H.jsx)(w.Z,{onClick:function(){return ve.arts.set(Ee,{exclude:!Re})},color:Re?"error":"success",size:"small",children:(0,H.jsx)(d.G,{icon:Re?s.gPx:s.Stf,className:"fa-fw"})})}),!!X&&(0,H.jsx)(w.Z,{color:"error",size:"small",onClick:function(){return X(Ee)},disabled:Ie,children:(0,H.jsx)(d.G,{icon:s.I7k,className:"fa-fw"})}),fe]})]})]})]})}function Q(e){var t,n,r,i=e.stat,a=e.effFilter,l=e.rarity,c=null!==(t=null===(n=i.rolls)||void 0===n?void 0:n.length)&&void 0!==t?t:0,u=i.key?T.Z.maxSubstatValues(i.key):0,s=(0,C.useMemo)((function(){return i.key?T.Z.getSubstatRollData(i.key,l):[]}),[i.key,l]),d=7-s.length,f="roll".concat((0,B.uZ)(c,1,6)),h=null!==(r=i.efficiency)&&void 0!==r?r:0,v=(0,B.V2)(.5+h/500*.5),p=N.ZP.getStr(i.key),Z=N.ZP.unit(i.key),b=i.key&&a.has(i.key),g=(0,C.useMemo)((function(){return b&&(0,H.jsx)(x.Z,{display:"flex",gap:.25,height:"1.3em",children:(0,o.Z)(i.rolls).sort().map((function(e,t){return(0,H.jsx)(X,{value:100*e/u,color:"roll".concat((0,B.uZ)(d+s.indexOf(e),1,6),".main")},"".concat(t).concat(e))}))})}),[b,i.rolls,u,s,d]);return(0,H.jsxs)(x.Z,{display:"flex",gap:1,alignContent:"center",children:[(0,H.jsxs)(y.Z,{sx:{flexGrow:1},color:c?"".concat(f,".main"):"error.main",component:"span",children:[O.Z[i.key]," ",p,"+".concat((0,N.qs)(i.value,N.ZP.unit(i.key))).concat(Z)]}),g,(0,H.jsx)(y.Z,{sx:{opacity:v,minWidth:40,textAlign:"right"},children:b?"".concat(h.toFixed(),"%"):"-"})]})}function X(e){var t=e.color,n=void 0===t?"red":t,r=e.value,i=void 0===r?50:r;return(0,H.jsx)(x.Z,{sx:{width:7,height:"100%",bgcolor:n,overflow:"hidden",borderRadius:1,display:"inline-block"},children:(0,H.jsx)(x.Z,{sx:{width:10,height:"".concat(100-(0,B.uZ)(i,0,100),"%"),bgcolor:"gray"}})})}},44824:function(e,t,n){n.d(t,{Af:function(){return s},EM:function(){return h},OQ:function(){return c},bq:function(){return u},sZ:function(){return d},x3:function(){return f}});var r=n(37762),i=n(93433),a=n(24351),l=n(98620),o=n(44217),c=["rarity","level","artsetkey","efficiency","mefficiency","probability"],u=["probability"];function s(){return{artSetKeys:[],rarity:(0,i.Z)(a.En),levelLow:0,levelHigh:20,slotKeys:(0,i.Z)(a.eV),mainStatKeys:[],substats:[],location:"",exclusion:["excluded","included"],locked:["locked","unlocked"]}}var d=function(){return{filterOption:s(),ascending:!1,sortType:c[0]}};function f(e,t){return{rarity:{getValue:function(e){var t;return null!==(t=e.rarity)&&void 0!==t?t:0},tieBreaker:"level"},level:{getValue:function(e){var t;return null!==(t=e.level)&&void 0!==t?t:0},tieBreaker:"artsetkey"},artsetkey:{getValue:function(e){var t;return null!==(t=e.setKey)&&void 0!==t?t:""},tieBreaker:"level"},efficiency:{getValue:function(t){return l.Z.getArtifactEfficiency(t,e).currentEfficiency}},mefficiency:{getValue:function(t){return l.Z.getArtifactEfficiency(t,e).maxEfficiency}},probability:{getValue:function(e){if(!Object.keys(t).length)return 0;var n=e.probability;return void 0===n?(0,o.B)(e,t):n}}}}function h(){return{exclusion:function(e,t){return!(!t.includes("included")&&!e.exclude)&&!(!t.includes("excluded")&&e.exclude)},locked:function(e,t){return!(!t.includes("locked")&&e.lock)&&!(!t.includes("unlocked")&&!e.lock)},location:function(e,t){return!t||("Inventory"===t&&!e.location||(!("Equipped"!==t||!e.location)||t===e.location))},artSetKeys:function(e,t){return!t.length||t.includes(e.setKey)},slotKeys:function(e,t){return t.includes(e.slotKey)},mainStatKeys:function(e,t){return!t.length||t.includes(e.mainStatKey)},levelLow:function(e,t){return t<=e.level},levelHigh:function(e,t){return t>=e.level},rarity:function(e,t){return t.includes(e.rarity)},substats:function(e,t){var n,i=(0,r.Z)(t);try{var a=function(){var t=n.value;if(t&&!e.substats.some((function(e){return e.key===t})))return{v:!1}};for(i.s();!(n=i.n()).done;){var l=a();if("object"===typeof l)return l.v}}catch(o){i.e(o)}finally{i.f()}return!0}}}},46797:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(29439),i=n(25617),a=n(60393),l=n(80184);function o(e){var t=e.value,n=e.max,o=void 0===n?1:n,c=e.valid,u="number"===typeof t?["roll".concat((0,a.uZ)(Math.floor(t/o*10)-4,1,6)),t.toFixed()+"%"]:["secondary",t],s=(0,r.Z)(u,2),d=s[0],f=s[1];return c||(d="error"),(0,l.jsx)(i.Z,{color:d,children:f})}},44217:function(e,t,n){n.d(t,{B:function(){return m}});var r=n(29439),i=n(37762),a=n(4942),l=n(1413),o=n(93433),c=n(60393),u=n(98620),s=n(12354),d=[3,4,6],f={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3},h={};function v(e,t,n,r){if(5!==e.length)for(var i=0,u=d;i<u.length;i++){var s=u[i];t[s]>0&&v([].concat((0,o.Z)(e),[s]),(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},s,t[s]-s)),n-s,r*t[s]/n)}else(0,c.SR)(h,e,r)}v([0],{3:6,4:20,6:18},44,1),v([3],{3:3,4:20,6:18},41,1),v([4],{3:6,4:16,6:18},40,1),v([6],{3:6,4:20,6:12},38,1);for(var p=Array(6).fill(0).map((function(e,t){for(var n=[1],r=0,i=1;++r<=t;)i*=t-r+1,i/=r,n.push(i);return n})),x=[[1]],Z=function(){var e=x[x.length-1],t=Array(e.length+3).fill(0);e.forEach((function(e,n){for(var r=0,i=[0,1,2,3];r<i.length;r++){t[n+i[r]]+=e}})),x.push(t.map((function(e){return e/4})))};x.length<6;)Z();for(var y=function(){var e=g[b],t=e.reduce((function(e,t){return e+t}));e.forEach((function(e,n,r){r[n]=t,t-=e}))},b=0,g=x;b<g.length;b++)y();function m(e,t){if(e.rarity<=2)return NaN;var n=e.rarity,o=e.level,v=e.substats,Z=(0,l.Z)({},t),y=new Set(Object.keys(Z)),b=0,g=e.mainStatKey;if(g in Z){var m=4*n;if(s[n][g][m]<Z[g])return 0;delete Z[g],y.delete(g)}var j,k=(0,i.Z)(v);try{for(k.s();!(j=k.n()).done;){var w=j.value,C=w.key,S=w.value;C?y.has(C)&&(y.delete(C),Z[C]>S?Z[C]-=S:delete Z[C]):b+=1}}catch(T){k.e(T)}finally{k.f()}if(b+=4-v.length,y.size>b||Object.keys(Z).length>4)return 0;for(var E=u.Z.rollsRemaining(o,n)-b,I=0,M=Object.entries(Z);I<M.length;I++){var F=(0,r.Z)(M[I],2),K=F[0],P=F[1];Z[K]=Math.max(Math.ceil(10*P/u.Z.maxSubstatValues(K,n)),1)}var _=0,R=Object.entries(Z).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1],a=y.has(n)?1:0,l=Math.ceil(i/10)-a;return _+=l,{target:i,filler:a,minUpgrade:l}})).reverse();if(_>E)return 0;var A=(0,a.Z)({},E,1),O=E-_;return R.forEach((function(e,t){for(var n,i,a,l=e.target,o=e.filler,c=e.minUpgrade,u={},s=c;s<=c+O;s++)for(var d=l-7*(s+o),f=d>0?x[s+o][d]:1,h=0,v=Object.entries(A);h<v.length;h++){var Z,y=(0,r.Z)(v[h],2),b=y[0],g=y[1],m=parseInt(b);if(!(m<s)){var j=(i=s,a=4-t,p[n=m][i]*Math.pow(a-1,n-i)/Math.pow(a,n)),k=m-s;u[k]=(null!==(Z=u[k])&&void 0!==Z?Z:0)+g*f*j}}A=u})),function(e,t,n){var r,a,l=null!==(r=f[e])&&void 0!==r?r:0,o=0,u={3:2,4:5,6:3},s=h[l],v=(0,i.Z)(t);try{for(v.s();!(a=v.n()).done;){var x=a.value.key;if(x){var Z=f[x];s=s[Z],u[Z]-=1}}}catch(T){v.e(T)}finally{v.f()}l&&(u[l]-=1);var y,b={3:0,4:0,6:0},g=(0,i.Z)(n);try{for(g.s();!(y=g.n()).done;){var m=y.value;b[f[m]]+=1}}catch(T){g.e(T)}finally{g.f()}var j=0;(0,c.Q1)(s,[],(function(e){return"number"===typeof e}),(function(e,t){j+=e;var n,r={3:0,4:0,6:0},a=(0,i.Z)(t);try{for(a.s();!(n=a.n()).done;){r[n.value]+=1}}catch(T){a.e(T)}finally{a.f()}var l,c=e,u=(0,i.Z)(d);try{for(u.s();!(l=u.n()).done;){var s=l.value,f=r[s],h=b[s];if(f<h)return;c*=p[f][h]}}catch(T){u.e(T)}finally{u.f()}o+=c}));var k,w=(0,i.Z)(d);try{for(w.s();!(k=w.n()).done;){var C=k.value;o/=p[u[C]][b[C]]}}catch(T){w.e(T)}finally{w.f()}return o/j}(e.mainStatKey,v,y)*Object.values(A).reduce((function(e,t){return e+t}))}},74544:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(29439),i=n(72791),a=n(3397);function l(e){var t=(0,i.useContext)(a.t).database,n=(0,i.useState)((function(){return t.buildSettings.get(e)})),l=(0,r.Z)(n,2),o=l[0],c=l[1];return(0,i.useEffect)((function(){return c(t.buildSettings.get(e))}),[t,e]),(0,i.useEffect)((function(){return t.buildSettings.follow(e,c)}),[e,c,t]),{buildSetting:o,buildSettingDispatch:(0,i.useCallback)((function(n){return e&&t.buildSettings.set(e,n)}),[e,t])}}},63372:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(29439),i=n(72791),a=n(3397);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,i.useContext)(a.t),n=t.database,l=(0,i.useState)(n.arts.get(e)),o=(0,r.Z)(l,2),c=o[0],u=o[1];return(0,i.useEffect)((function(){return u(n.arts.get(e))}),[n,e]),(0,i.useEffect)((function(){return e?n.arts.follow(e,u):void 0}),[e,u,n]),c}}}]);
//# sourceMappingURL=328.29b60d32.chunk.js.map