(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[5],{140:function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));var c=a(2),n=a(39),s=a(20),i=(a(0),a(121)),l=a(93),r=a(123),j=a(31),d=a(30),o=a(114),b=a(134),u=a(108),h=a(41),x=a(105),O=a(88),m=a(129),f=a(104),v=a(82),p=a(91),g=a(96),y=a(141);function N(e){var t,a,N=e.artifactId,S=e.artifactObj,k=e.forceUpdate,K=e.onEdit,C=e.onDelete,I=e.assumeFull,w=void 0!==I&&I;if(!N&&!S)return null;var B=S||g.a.get(N);if(!B)return null;B.maximumEfficiency||p.a.substatsValidation(B);var T=B.setKey,_=B.slotKey,V=B.numStars,W=void 0===V?0:V,A=B.level,E=void 0===A?0:A,F=B.mainStatKey,U=B.substats,L=void 0===U?[]:U,z=B.location,D=void 0===z?"":z,P=B.lock,q=B.currentEfficiency,M=void 0===q?0:q,H=B.maximumEfficiency,R=void 0===H?0:H,G=w?4*W:E,X=w&&E!==4*W,J=Object(c.jsxs)("span",{className:X?"text-orange":"",children:[p.a.getMainStatValue(F,W,G,""),v.a.getStatUnit(F)]}),Q=L.every((function(e){var t;return!e.key||e.key&&e.value&&(null===e||void 0===e||null===(t=e.rolls)||void 0===t?void 0:t.length)})),Y=function(e){p.a.equipArtifactOnChar(N,e),null===k||void 0===k||k()};return Object(c.jsxs)(j.a,{className:"h-100",border:"".concat(W,"star"),bg:"lightcontent",text:"lightfont",children:[Object(c.jsx)(j.a.Header,{className:"p-0",children:Object(c.jsxs)(h.a,{children:[Object(c.jsx)(d.a,{xs:2,md:3,children:Object(c.jsx)(b.a,{src:p.a.getPieceIcon(T,_),className:"w-100 h-auto grad-".concat(W,"star m-1"),thumbnail:!0})}),Object(c.jsxs)(d.a,{className:"pt-3",children:[Object(c.jsx)("h6",{children:Object(c.jsx)("b",{children:p.a.getPieceName(T,_,"Unknown Piece Name")})}),Object(c.jsxs)("div",{children:[p.a.getSlotNameWithIcon(_)," +".concat(E)]})]})]})}),Object(c.jsxs)(j.a.Body,{className:"d-flex flex-column py-2",children:[Object(c.jsxs)(j.a.Title,{children:[Object(c.jsx)("div",{children:p.a.getSetName(T,"Artifact Set")}),Object(c.jsx)("small",{className:"text-halfsize",children:Object(c.jsx)(f.a,{stars:W})})]}),Object(c.jsx)("h5",{className:"mb-1",children:Object(c.jsxs)("b",{children:[v.a.getStatName(F)," ",J]})}),Object(c.jsx)(h.a,{className:"mb-0",children:L.map((function(e,t){var a;if(!e||!e.value)return null;var n=(null===e||void 0===e||null===(a=e.rolls)||void 0===a?void 0:a.length)||0,s=(null===e||void 0===e?void 0:e.efficiency)||0,l=.3+.7*s,r=v.a.getStatName(e.key);return Object(c.jsxs)(d.a,{xs:12,children:[Object(c.jsx)(i.a,{variant:n?"".concat(n,"roll"):"danger",className:"text-darkcontent",children:Object(c.jsx)("b",{children:n||"?"})})," ",Object(c.jsxs)("span",{className:"text-".concat(n,"roll"),children:[r,"+".concat(v.a.getStatUnit(e.key)?e.value.toFixed(1):e.value).concat(v.a.getStatUnit(e.key))]}),Object(c.jsxs)("span",{className:"float-right",style:{opacity:l},children:[s.toFixed(1),"%"]})]},t)}))}),Object(c.jsxs)("div",{className:"mt-auto",children:[Object(c.jsx)("span",{className:"mb-0 mr-1",children:"Substat Eff.:"}),Object(c.jsx)(y.a,{percent:M,valid:Q,children:null!==(t=null===M||void 0===M?void 0:M.toFixed(2))&&void 0!==t?t:M+"%"}),Object(c.jsx)("b",{children:" < "}),Object(c.jsx)(y.a,{percent:R,valid:Q,children:null!==(a=null===R||void 0===R?void 0:R.toFixed(2))&&void 0!==a?a:R+"%"})]})]}),Object(c.jsx)(j.a.Footer,{className:"pr-3",children:Object(c.jsxs)(h.a,{className:"d-flex justify-content-between no-gutters",children:[k?Object(c.jsx)(d.a,{xs:"auto",children:Object(c.jsxs)(o.a,{children:[Object(c.jsx)(o.a.Toggle,{size:"sm",className:"text-left",children:O.a.getName(D,"Inventory")}),Object(c.jsxs)(o.a.Menu,{children:[Object(c.jsx)(o.a.Item,{onClick:function(){return Y("")},children:"Inventory"}),Object(c.jsx)(o.a.Divider,{}),Object(c.jsx)(m.a,{onSelect:function(e){return Y(e)}})]})]})}):Object(c.jsx)(d.a,{xs:"auto",children:Object(c.jsx)("b",{children:O.a.getName(D,"Inventory")})}),Object(c.jsx)(d.a,{xs:"auto",children:Object(c.jsxs)(r.a,{children:[k?Object(c.jsx)(u.a,{placement:"top",overlay:Object(c.jsx)(x.a,{children:"Locking a artifact will prevent the build generator from picking it for builds. Artifacts on characters are locked by default."}),children:Object(c.jsx)("span",{className:"d-inline-block",children:Object(c.jsx)(l.a,{size:"sm",disabled:D,style:D?{pointerEvents:"none"}:{},onClick:function(){B.lock=!P,g.a.update(B),null===k||void 0===k||k()},children:Object(c.jsx)(s.a,{icon:P||D?n.o:n.p,className:"fa-fw"})})})}):null,Boolean(K)&&Object(c.jsx)(l.a,{variant:"info",size:"sm",onClick:function(){return K()},children:Object(c.jsx)(s.a,{icon:n.h,className:"fa-fw"})}),Boolean(C)&&Object(c.jsx)(l.a,{variant:"danger",size:"sm",onClick:function(){return C()},children:Object(c.jsx)(s.a,{icon:n.E,className:"fa-fw"})})]})})]})})]})}},141:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var c=a(2),n=a(121);function s(e){var t=e.percent,a=e.valid,s=e.children,i=a?isNaN(t)?"secondary":"".concat(Math.floor(.05*t)+1,"roll"):"danger";return Object(c.jsx)(n.a,{variant:i,className:"secondary"===i?"":"text-darkcontent",children:s})}},143:function(e,t,a){"use strict";var c=a(2),n=a(108),s=a(105);t.a=function(e){var t=e.children;return Object(c.jsx)(n.a,{overlay:Object(c.jsx)(s.a,{children:"Work In Progress"}),children:Object(c.jsx)("span",{children:t})})}},160:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return fe}));var c=a(2),n=a(81),s=a(86),i=a(94),l=a(126),r=a(125),j=a(39),d=a(20),o=a(0),b=a.n(o),u=a(134),h=a(123),x=a(114),O=a(225),m=a(171),f=a(11),v=a(121),p=a(93),g=a(31),y=a(30),N=a(153),S=a(41),k=a(91),K=a(143),C=a(112),I=a(117),w=a(83),B=a(101),T=a(88),_=a(90),V=a(80),W=a(218),A=a(140),E=a(116),F=a(82),U=a(95),L=a(130),z=a(149);var D=function(e){var t,a=e.character,s=e.character,i=s.characterKey,l=s.artifactConditionals,r=e.equippedBuild,j=e.newBuild,d=e.editable,o=e.forceUpdate,b=e.setState,u=e.setOverride,h=e.artifacts,x=j||r,O=j?null===(t=j.finalStats)||void 0===t?void 0:t.artifactsAssumeFull:a.artifactsAssumeFull;j&&(l=j.artifactConditionals);var m=T.a.getDisplayStatKeys(x.finalStats);return Object(c.jsxs)(c.Fragment,{children:[T.a.hasTalentPage(i)&&Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{xs:12,className:"mb-2",children:Object(c.jsx)(L.c,Object(n.a)({},{character:a,setState:b,setOverride:u,newBuild:j,equippedBuild:r}))})}),Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{className:"mb-2",children:Object(c.jsxs)(g.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(z.a,Object(n.a)({},{character:a,equippedBuild:r,newBuild:j,statsDisplayKeys:m,build:x,forceUpdate:o,setState:b,setOverride:u,editable:d}))}),j?Object(c.jsxs)(g.a.Footer,{children:[Object(c.jsx)(p.a,{onClick:function(){T.a.equipArtifacts(i,j.artifactIds),null===o||void 0===o||o()},children:"Equip All artifacts to current character"}),O&&Object(c.jsx)(W.a,{className:"float-right text-right mb-0 py-2",variant:"orange",children:Object(c.jsx)("b",{children:"Assume Main Stats are Fully Leveled"})})]}):null]})})}),Object(c.jsx)(S.a,{className:"mb-n2",children:Object(c.jsx)(y.a,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{sm:6,lg:4,className:"mb-2",children:Object(c.jsxs)(g.a,{className:"h-100 d-flex flex-column",bg:"lightcontent",text:"lightfont",children:[Object(c.jsx)(g.a.Header,{children:"Artifact Set Effects"}),Object(c.jsx)(g.a.Body,{className:"flex-grow-1",children:Object(c.jsx)(S.a,{children:Object.entries(k.a.getSetEffects(x.setToSlots)).map((function(e){var t=Object(V.a)(e,2),a=t[0],n=t[1];return Object(c.jsxs)(y.a,{xs:12,className:"mb-2",children:[Object(c.jsx)("h5",{children:k.a.getSetName(a)}),Object(c.jsx)(S.a,{children:n.map((function(e){var t=k.a.getArtifactSetNumStats(a,e),n=0,s=k.a.getSetEffectConditional(a,e);s&&(n=U.a.getConditionalNum(l,{srcKey:a,srcKey2:e}),Object.entries(k.a.getConditionalStats(a,e,n)).forEach((function(e){var a=Object(V.a)(e,2),c=a[0],n=a[1];return t[c]=(t[c]||0)+n})));var i=Object(c.jsx)(E.a,{disabled:!!j,conditional:s,conditionalNum:n,setConditional:function(t){return function(e,t,a){return null===b||void 0===b?void 0:b((function(c){return{artifactConditionals:U.a.setConditional(c.artifactConditionals,{srcKey:e,srcKey2:t},a)}}))}(a,e,t)},defEle:Object(c.jsxs)(v.a,{variant:"success",children:[e,"-Set"]})});return Object(c.jsxs)(y.a,{xs:12,className:"mb-2",children:[Object(c.jsxs)("h6",{children:[i," ",k.a.getSetEffectText(a,e,x.finalStats)]}),t?Object(c.jsx)(S.a,{children:Object.entries(t).map((function(e){var t=Object(V.a)(e,2),a=t[0],n=t[1];return Object(c.jsxs)(y.a,{xs:12,children:[F.a.getStatName(a),": ",n,F.a.getStatUnit(a)]},a)}))}):null]},e)}))})]},a)}))})})]})}),h?k.a.getSlotKeys().map((function(e){var t=h.find((function(t){return t.slotKey===e}));return t?Object(c.jsx)(y.a,{sm:6,lg:4,className:"mb-2",children:Object(c.jsx)(A.a,{artifactObj:t})},e):null})):k.a.getSlotKeys().map((function(e){return x.artifactIds[e]?Object(c.jsx)(y.a,{sm:6,lg:4,className:"mb-2",children:Object(c.jsx)(A.a,{artifactId:x.artifactIds[e],forceUpdate:o,assumeFull:O})},x.artifactIds[e]):null}))]})})})]})},P=a(99),q=a(85),M=a(162),H=a(108),R=a(105),G=a(103),X=a(107),J=a(104),Q=a(132),Y=a(124),Z=a(122),$=a(131);function ee(e){var t,a=e.character,s=e.character,i=s.characterKey,l=s.constellation,r=e.editable,b=e.setOverride,h=e.setConstellation,x=Object(o.useState)(!1),O=Object(V.a)(x,2),m=O[0],f=O[1],v=T.a.getElementalKey(i),N=T.a.getWeaponTypeKey(i),k=T.a.getStatValueWithOverride(a,"characterLevel");return Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{xs:12,md:3,children:Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Img,{src:T.a.getCard(i),className:"w-100 h-auto"}),Object(c.jsx)(g.a.Body,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsxs)(y.a,{xs:12,children:[Object(c.jsxs)("h3",{children:[T.a.getName(i)," ",Object(c.jsx)(u.a,{src:G.a.elements[v],className:"inline-icon"})," ",Object(c.jsx)(u.a,{src:null===(t=G.a.weaponTypes)||void 0===t?void 0:t[N],className:"inline-icon"})]}),Object(c.jsx)("h6",{children:Object(c.jsx)(J.a,{stars:T.a.getStar(i),colored:!0})})]}),Object(c.jsx)(y.a,{children:m?Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Object(c.jsxs)(M.a,{children:[Object(c.jsx)(M.a.Prepend,{children:Object(c.jsx)(M.a.Text,{children:"Lvl."})}),Object(c.jsx)(X.a,{onValueChange:function(e){return b("characterLevel",Object(w.a)(e,1,90))},value:k}),Object(c.jsx)(M.a.Append,{children:Object(c.jsx)(p.a,{children:Object(c.jsx)(d.a,{icon:j.F,size:"sm",onClick:function(){return b("characterLevel",T.a.getLevel(a.levelKey))}})})}),Object(c.jsx)(M.a.Append,{children:Object(c.jsx)(H.a,{placement:"bottom",overlay:Object(c.jsx)(R.a,{children:"Override the level value for calculations. Does not change Stats."}),children:Object(c.jsx)(p.a,{variant:"danger",onClick:function(){return f(!m)},size:"sm",children:Object(c.jsx)("span",{children:Object(c.jsx)(d.a,{icon:j.u})})})})})]})})}):Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{children:Object(c.jsxs)("h5",{children:["Level: ",k]})}),r?Object(c.jsx)(y.a,{xs:"auto",className:"pr-1 pl-1",children:Object(c.jsx)(p.a,{variant:"info",onClick:function(){return f(!m)},size:"sm",children:Object(c.jsx)("span",{children:Object(c.jsx)(d.a,{icon:j.h})})})}):null]})}),Object(c.jsx)(y.a,{xs:12,children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{xs:12,children:Object(c.jsx)("h5",{children:T.a.getConstellationName(i)})}),Object(c.jsx)(y.a,{children:Object(c.jsx)(S.a,{className:"px-2",children:Object(q.a)(Array(6).keys()).map((function(e){return Object(c.jsx)(y.a,{xs:4,className:"p-1",children:Object(c.jsx)(u.a,{src:T.a.getConstellationImg(i,e),className:"w-100 h-auto ".concat(l>e?"":"overlay-dark"," cursor-pointer"),roundedCircle:!0,onClick:r?function(){return h(e+1===l?e:e+1)}:null})},e)}))})})]})})]})})]})}),Object(c.jsxs)(y.a,{xs:12,md:9,children:[Object(c.jsx)(ce,Object(n.a)({},e)),Object(c.jsx)(ne,Object(n.a)({},e))]})]})}function te(e){var t,a=e.statKey,n=e.val;return a?Object(c.jsxs)(y.a,{xs:12,lg:6,className:"px-3",children:[Object(c.jsx)("span",{children:Object(c.jsxs)("b",{children:[Object(Y.a)(a)," ",F.a.getStatName(a)]})}),Object(c.jsxs)("span",{className:"float-right text-right text-".concat(F.a.getStatVariant(a)),children:[(null===n||void 0===n||null===(t=n.toFixed)||void 0===t?void 0:t.call(n,F.a.fixedUnit(a)))||n,F.a.getStatUnit(a)]})]}):null}function ae(e){var t=e.title,a=e.stats,n=void 0===a?{}:a,s=e.finalStats,i=void 0===s?{}:s;return 0===Object.keys(null!==n&&void 0!==n?n:{}).length?null:Object(c.jsxs)(g.a,{bg:"darkcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{className:"py-2 px-3",children:t}),Object(c.jsx)(g.a.Body,{className:"py-2 px-0",children:Object(c.jsx)(S.a,{children:Object.entries(n).map((function(e){var t=Object(V.a)(e,2),a=t[0],n=t[1];return"modifiers"===a?Object(c.jsx)(b.a.Fragment,{children:Object.entries(null!==n&&void 0!==n?n:{}).map((function(e){var t=Object(V.a)(e,2),a=t[0],n=t[1];return Object(c.jsx)(te,{statKey:a,val:Object.entries(null!==n&&void 0!==n?n:{}).reduce((function(e,t){var a=Object(V.a)(t,2),c=a[0],n=a[1];return e+i[c]*n}),0)},a)}))},a):Object(c.jsx)(te,{statKey:a,val:n},a)}))})})]})}function ce(e){var t=Object(o.useState)(!1),a=Object(V.a)(t,2),n=a[0],s=a[1],i=Object(o.useState)(!1),l=Object(V.a)(i,2),r=l[0],h=l[1],m=e.character,f=e.character,v=f.characterKey,N=f.weapon,k=void 0===N?{}:N,K=e.editable,I=e.setState,w=e.equippedBuild,_=e.newBuild,W=_||w,A=function(e,t){return I((function(a){return"key"===e&&(a.weapon.conditionalNum=0),a.weapon[e]=t,{weapon:a.weapon}}))},U=B.a.getWeaponSubStatKey(k.key),L=T.a.getWeaponTypeKey(v),z=k.overrideMainVal||B.a.getWeaponMainStatVal(k.key,k.levelKey),D=k.overrideSubVal||B.a.getWeaponSubStatVal(k.key,k.levelKey),M=B.a.getWeaponPassiveName(k.key),H=B.a.getWeaponBonusStat(k.key,k.refineIndex,void 0),R=B.a.getWeaponConditionalStat(k.key,k.refineIndex,k.conditionalNum,void 0),G=B.a.getWeaponConditional(k.key),X=k.conditionalNum,Q=Object(c.jsx)(E.a,{conditional:G,conditionalNum:X,setConditional:function(e){return A("conditionalNum",e)},defEle:Object(c.jsx)("span",{children:M})});return Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{children:Object(c.jsx)("span",{children:"Weapon"})}),Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:"info",size:"sm",onClick:function(){return h(!r)},children:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:j.t})," ",r?"Hide Desc.":"Show Desc."]})})}),K?Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:n?"danger":"info",onClick:function(){return s(!n)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:n?j.u:j.h})," ",n?"EXIT":"EDIT"]})})}):null]})}),Object(c.jsxs)(g.a.Body,{children:[Object(c.jsxs)(S.a,{className:"mb-2",children:[Object(c.jsx)(y.a,{xs:12,md:3,children:Object(c.jsx)(u.a,{src:B.a.getWeaponImg(k.key),className:"w-100 h-auto grad-".concat(B.a.getWeaponRarity(k.key),"star"),thumbnail:!0})}),n?Object(c.jsx)(y.a,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{lg:"auto",xs:6,className:"mb-2 pr-0",children:Object(c.jsx)(O.a,{title:B.a.getWeaponName(k.key),children:Object(q.a)(Array(5).keys()).reverse().map((function(e){return e+1})).map((function(e,t,a){return Object(c.jsxs)(b.a.Fragment,{children:[Object(c.jsx)(x.a.ItemText,{children:Object(c.jsx)(J.a,{stars:e})},"star"+e),Object.entries(B.a.getWeaponsOfType(L)).filter((function(t){var a=Object(V.a)(t,2);a[0];return a[1].rarity===e})).map((function(e){var t=Object(V.a)(e,2),a=t[0],n=t[1];return Object(c.jsx)(x.a.Item,{onClick:function(){return A("key",a)},children:n.name},a)})),t!==a.length-1&&Object(c.jsx)(x.a.Divider,{})]},e)}))})}),Object(c.jsx)(y.a,{lg:"auto",xs:6,className:"mb-2 pr-0",children:Object(c.jsxs)(O.a,{title:B.a.getLevelName(k.levelKey),children:[Object(c.jsx)(x.a.ItemText,{children:Object(c.jsx)("span",{children:"Select Weapon Level"})}),Object.entries(C.a).map((function(e){var t=Object(V.a)(e,2),a=t[0],n=t[1];return Object(c.jsx)(x.a.Item,{onClick:function(){return A("levelKey",a)},children:n},a)}))]})}),M&&Object(c.jsx)(y.a,{lg:"auto",xs:6,className:"mb-2",children:Object(c.jsxs)(O.a,{title:"Refinement ".concat(k.refineIndex+1),className:"w-100",children:[Object(c.jsx)(x.a.ItemText,{children:Object(c.jsx)("span",{children:"Select Weapon Refinement"})}),Object(c.jsx)(x.a.Divider,{}),Object(q.a)(Array(5).keys()).map((function(e){return Object(c.jsx)(x.a.Item,{onClick:function(){return A("refineIndex",e)},children:"Refinement ".concat(e+1)},e)}))]})}),Object(c.jsx)(y.a,{xs:12,className:"mb-2",children:Object(c.jsx)($.a,{name:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:j.l,className:"mr-2"}),"ATK"]}),placeholder:"Weapon Attack",value:z,percent:!1,onValueChange:function(e){return A("overrideMainVal",e)},defaultValue:B.a.getWeaponMainStatVal(k.key,k.levelKey)})}),U&&Object(c.jsx)(y.a,{xs:12,className:"mb-2",children:Object(c.jsx)($.a,{name:Object(c.jsxs)("span",{children:[Object(c.jsx)("span",{className:"mr-2",children:Object(Y.a)(U)}),F.a.getStatName(U)]}),placeholder:"Weapon Substat",value:D,percent:"%"===F.a.getStatUnit(U),onValueChange:function(e){return A("overrideSubVal",e)},defaultValue:B.a.getWeaponSubStatVal(k.key,k.levelKey)})})]})}):Object(c.jsxs)(y.a,{children:[Object(c.jsx)(S.a,{className:"mb-2",children:Object(c.jsxs)(y.a,{children:[Object(c.jsxs)("h5",{className:"mb-0",children:[B.a.getWeaponName(k.key)," ",B.a.getLevelName(k.levelKey)," ",M&&"(Refinement ".concat(k.refineIndex+1,")")]}),Object(c.jsx)("small",{children:Object(c.jsx)(J.a,{stars:B.a.getWeaponRarity(k.key)})})]})}),Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Q})}),Object(c.jsx)("p",{children:M&&B.a.getWeaponPassiveDescription(k.key,k.refineIndex,null===W||void 0===W?void 0:W.finalStats,m)}),Object(c.jsx)(ae,{title:"Main Stats",stats:Object(P.a)({atk:z},U,D),finalStats:null===W||void 0===W?void 0:W.finalStats}),Object(c.jsx)(ae,{title:"Bonus Stats",stats:H,finalStats:null===W||void 0===W?void 0:W.finalStats}),Object(c.jsx)(ae,{title:"Conditional Stats",stats:R,finalStats:null===W||void 0===W?void 0:W.finalStats})]})]}),r&&Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Object(c.jsx)("small",{children:B.a.getWeaponDescription(k.key)})})})]})]})}function ne(e){var t=e.editable,a=e.character,s=e.setOverride,i=e.equippedBuild,l=e.newBuild,r=Object(o.useState)(!1),b=Object(V.a)(r,2),u=b[0],h=b[1],m=Object(o.useState)(!1),f=Object(V.a)(m,2),v=f[0],N=f[1],k=Object(o.useState)(!1),K=Object(V.a)(k,2),C=K[0],I=K[1],w=["eleMas","critRate_","critDMG_","enerRech_","heal_"],B=["finalHP","finalATK","finalDEF"];B.push.apply(B,w);var _=["characterHP","hp","hp_","characterATK","atk","atk_","characterDEF","def","def_"];_.push.apply(_,w);var W=[];T.a.getElementalKeys().forEach((function(e){W.push("".concat(e,"_dmg_")),W.push("".concat(e,"_res_"))})),W.push("stamina","incHeal_","powShield_");var A=["normal_dmg_","normal_critRate_","charged_dmg_","charged_critRate_","skill_dmg_","skill_critRate_","burst_dmg_","burst_critRate_","dmg_","moveSPD_","atkSPD_","weakspotDMG_"],E=T.a.getStatValueWithOverride(a,"specializedStatKey"),U=T.a.getStatValueWithOverride(a,"specializedStatVal"),L=F.a.getStatUnit(E),z="%"===F.a.getStatUnit(E),D={character:a,equippedBuild:i,newBuild:l,editable:t};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{children:Object(c.jsx)("span",{children:"Main Base Stats"})}),t?Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:u?"danger":"info",onClick:function(){return h(!u)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:u?j.u:j.h})," ",u?"EXIT":"EDIT"]})})}):null]})}),u?Object(c.jsx)(g.a.Body,{children:Object(c.jsxs)(S.a,{className:"mb-2",children:[_.map((function(e){return Object(c.jsx)(y.a,{lg:6,xs:12,children:Object(c.jsx)($.a,{className:"mb-2",name:Object(c.jsxs)("span",{children:[Object(Y.a)(e)," ",F.a.getStatNamePretty(e)]}),placeholder:"Base ".concat(F.a.getStatName(e)),value:T.a.getStatValueWithOverride(a,e),percent:"%"===F.a.getStatUnit(e),onValueChange:function(t){return s(e,t)},defaultValue:T.a.getBaseStatValue(a,e)})},e)})),Object(c.jsx)(y.a,{lg:6,xs:12,children:Object(c.jsxs)(M.a,{children:[Object(c.jsxs)(O.a,{title:F.a.getStatNameWithPercent(E,"Specialized Stat"),as:M.a.Prepend,children:[Object(c.jsx)(x.a.ItemText,{children:"Select Specialized Stat "}),Z.c.map((function(e){return Object(c.jsx)(x.a.Item,{onClick:function(){return s("specializedStatKey",e)},children:F.a.getStatNameWithPercent(e)},e)}))]}),Object(c.jsx)(X.a,{float:z,placeholder:"Character Special Stat",value:T.a.getStatValueWithOverride(a,"specializedStatVal"),onValueChange:function(e){return s("specializedStatVal",e)}}),z&&Object(c.jsx)(M.a.Append,{children:Object(c.jsx)(M.a.Text,{children:"%"})})]})})]})}):Object(c.jsx)(g.a.Body,{children:Object(c.jsxs)(S.a,{className:"mb-2",children:[B.map((function(e){return Object(c.jsx)(y.a,{xs:12,lg:6,children:Object(c.jsx)(Q.a,Object(n.a)({statKey:e},D))},e)})),U?Object(c.jsxs)(y.a,{lg:6,xs:12,children:[Object(c.jsxs)("span",{children:[Object(c.jsx)("b",{children:"Specialized:"})," ",Object(c.jsx)("span",{className:T.a.hasOverride(a,"specializedStatKey")?"text-warning":"",children:F.a.getStatName(E)})]}),Object(c.jsx)("span",{className:"float-right ".concat(T.a.hasOverride(a,"specializedStatVal")?"text-warning":""),children:"".concat(U).concat(L)})]}):null]})})]}),Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{children:Object(c.jsx)("span",{children:"Other Stats"})}),t&&Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:v?"danger":"info",onClick:function(){return N(!v)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:v?j.u:j.h})," ",v?"EXIT":"EDIT"]})})})]})}),v?Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(S.a,{className:"mb-2",children:W.map((function(e){return Object(c.jsx)(y.a,{lg:6,xs:12,children:Object(c.jsx)($.a,{className:"mb-2",name:Object(c.jsxs)("span",{children:[Object(Y.a)(e)," ",F.a.getStatName(e)]}),placeholder:"Base ".concat(F.a.getStatNameRaw(e)),value:T.a.getStatValueWithOverride(a,e),percent:"%"===F.a.getStatUnit(e),onValueChange:function(t){return s(e,t)},defaultValue:T.a.getBaseStatValue(a,e)})},e)}))})}):Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(S.a,{className:"mb-2",children:W.map((function(e){return Object(c.jsx)(y.a,{xs:12,lg:6,children:Object(c.jsx)(Q.a,Object(n.a)({statKey:e},D))},e)}))})})]}),Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{children:Object(c.jsx)("span",{children:"Misc Stats"})}),t&&Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:C?"danger":"info",onClick:function(){return I(!C)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{icon:C?j.u:j.h})," ",C?"EXIT":"EDIT"]})})})]})}),C?Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(S.a,{className:"mb-2",children:A.map((function(e){return Object(c.jsx)(y.a,{xl:6,xs:12,children:Object(c.jsx)($.a,{className:"mb-2",name:Object(c.jsxs)("span",{children:[Object(Y.a)(e)," ",F.a.getStatName(e)]}),placeholder:"Base ".concat(F.a.getStatNameRaw(e)),value:T.a.getStatValueWithOverride(a,e),percent:"%"===F.a.getStatUnit(e),onValueChange:function(t){return s(e,t)},defaultValue:T.a.getBaseStatValue(a,e)})},e)}))})}):Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(S.a,{className:"mb-2",children:A.map((function(e){return Object(c.jsx)(y.a,{xs:12,lg:6,children:Object(c.jsx)(Q.a,Object(n.a)({statKey:e},D))},e)}))})})]})]})}var se=a(113),ie=a(239),le=a(100);function re(e){var t=e.character,a=e.character,s=a.characterKey,i=a.levelKey,l=a.constellation,r=e.editable,j=e.setState,d=e.setOverride,o=e.newBuild,b=e.equippedBuild,u=T.a.getAscension(i),h=Object(n.a)(Object(n.a)({},e),{},{ascension:u});return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{xs:12,className:"mb-2",children:Object(c.jsx)(L.c,Object(n.a)({},{character:t,setState:j,setOverride:d,newBuild:o,equippedBuild:b}))})}),Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Object(c.jsx)(de,Object(n.a)({},e))})}),Object(c.jsxs)(S.a,{children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var t=Object(V.a)(e,2),a=t[0],s=t[1];return Object(c.jsx)(y.a,{xs:12,md:6,lg:4,className:"mb-2",children:Object(c.jsx)(xe,Object(n.a)(Object(n.a)({},h),{},{talentKey:a,subtitle:s}))},a)})),T.a.getTalent(s,"sprint",!1)&&Object(c.jsx)(y.a,{xs:12,md:6,lg:4,className:"mb-2",children:Object(c.jsx)(xe,Object(n.a)(Object(n.a)({},h),{},{talentKey:"sprint",subtitle:"Alternative Sprint"}))})]}),Object(c.jsx)(S.a,{children:[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var t=Object(V.a)(e,3),a=t[0],s=t[1],i=t[2],l=u>=i;return Object(c.jsx)(y.a,{style:{opacity:l?1:.5},xs:12,md:4,className:"mb-2",children:Object(c.jsx)(xe,Object(n.a)(Object(n.a)({},h),{},{talentKey:a,subtitle:s}))},a)}))}),Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Object(c.jsxs)("h5",{className:"text-center",children:["Constellation Lv. ",l]})})}),Object(c.jsx)(S.a,{className:"mb-n2",children:Object(q.a)(Array(6).keys()).map((function(e){var t="constellation".concat(e+1);return Object(c.jsx)(y.a,{xs:12,md:4,className:"mb-2",style:{opacity:l>e?1:.5},children:Object(c.jsx)(xe,Object(n.a)(Object(n.a)({},h),{},{talentKey:t,subtitle:"Contellation Lv. ".concat(e+1),onClickTitle:r?function(){return j({constellation:e+1===l?e:e+1})}:void 0}))},e)}))})]})}var je={superconduct_hit:function(e){var t,a=e.stats,n="superconduct_hit";return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(g.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-superconduct",children:[F.a.getStatName(n)," ",Object(c.jsx)(u.a,{src:G.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:G.a.elements.cryo,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(F.a.fixedUnit(n))]})})})},electrocharged_hit:function(e){var t,a=e.stats,n="electrocharged_hit";return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(g.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-electrocharged",children:[F.a.getStatName(n)," ",Object(c.jsx)(u.a,{src:G.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:G.a.elements.hydro,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(F.a.fixedUnit(n))]})})})},overloaded_hit:function(e){var t,a=e.stats,n="overloaded_hit";return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(g.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-overloaded",children:[F.a.getStatName(n)," ",Object(c.jsx)(u.a,{src:G.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:G.a.elements.pyro,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(F.a.fixedUnit(n))]})})})},pyro_swirl_hit:function(e){var t,a=e.stats,n=Object(o.useState)(Object.keys(oe)[0]),s=Object(V.a)(n,2),i=s[0],l=s[1],r="".concat(i,"_swirl_hit");return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsxs)(g.a.Body,{className:"p-0",children:[Object(c.jsx)(O.a,{size:"sm",title:oe[i],className:"d-inline-block",children:Object.entries(oe).map((function(e){var t=Object(V.a)(e,2),a=t[0],n=t[1];return Object(c.jsx)(x.a.Item,{onClick:function(){return l(a)},children:n},a)}))}),Object(c.jsxs)("span",{className:"text-".concat(i," p-2"),children:[" ",null===(t=a[r])||void 0===t?void 0:t.toFixed(F.a.fixedUnit(r))]})]})})},shattered_hit:function(e){var t,a=e.stats,n="shattered_hit",s=Object(c.jsx)(H.a,{placement:"top",overlay:Object(c.jsxs)(R.a,{children:["Claymores, Plunging Attacks and ",Object(c.jsx)("span",{className:"text-geo",children:"Geo DMG"})]}),children:Object(c.jsx)(d.a,{icon:j.s,className:"ml-2",style:{cursor:"help"}})});return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(g.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-shattered",children:[F.a.getStatName(n)," ",Object(c.jsx)(u.a,{src:G.a.elements.hydro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:G.a.elements.cryo,className:"inline-icon"}),"+ ",Object(c.jsxs)("small",{className:"text-physical",children:["Heavy Attack",s," "]})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(F.a.fixedUnit(n))]})})})},crystalize_hit:function(e){var t,a=e.stats,n="crystalize_hit";return Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(g.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-crystalize",children:[F.a.getStatName(n)," ",Object(c.jsx)(u.a,{src:G.a.elements.electro,className:"inline-icon"}),"/",Object(c.jsx)(u.a,{src:G.a.elements.hydro,className:"inline-icon"}),"/",Object(c.jsx)(u.a,{src:G.a.elements.pyro,className:"inline-icon"}),"/",Object(c.jsx)(u.a,{src:G.a.elements.cryo,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:G.a.elements.geo,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(F.a.fixedUnit(n))]})})})}};function de(e){var t=e.character.characterKey,a=e.newBuild,n=e.equippedBuild,s=a||n,i=T.a.getElementalKey(t),l=Object(q.a)(le.a[i]||[]);return l.includes("shattered_hit")||"claymore"!==T.a.getWeaponTypeKey(t)||l.push("shattered_hit"),Object(c.jsx)(g.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:Object(c.jsx)(g.a.Body,{className:"px-3 py-2",children:Object(c.jsx)(S.a,{className:"mb-n2",children:l.map((function(e){var t=je[e];return t?Object(c.jsx)(y.a,{xs:"auto",className:"mb-2",children:Object(c.jsx)(t,{stats:null===s||void 0===s?void 0:s.finalStats})},e):null}))})})})}var oe={pyro:Object(c.jsxs)("span",{children:[F.a.getStatName("pyro_swirl_hit")," ",Object(c.jsx)(u.a,{src:G.a.elements.pyro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:G.a.elements.anemo,className:"inline-icon"})]}),electro:Object(c.jsxs)("span",{children:[F.a.getStatName("electro_swirl_hit")," ",Object(c.jsx)(u.a,{src:G.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:G.a.elements.anemo,className:"inline-icon"})]}),cryo:Object(c.jsxs)("span",{children:[F.a.getStatName("cryo_swirl_hit")," ",Object(c.jsx)(u.a,{src:G.a.elements.cryo,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:G.a.elements.anemo,className:"inline-icon"})]}),hydro:Object(c.jsxs)("span",{children:[F.a.getStatName("hydro_swirl_hit")," ",Object(c.jsx)(u.a,{src:G.a.elements.hydro,className:"inline-icon"}),"+",Object(c.jsx)(u.a,{src:G.a.elements.anemo,className:"inline-icon"})]})};function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).map((function(e){var a=Object(V.a)(e,2),n=a[0],s=a[1];return{text:F.a.getStatName(n),variant:F.a.getStatVariant(n),value:Object.entries(null!==s&&void 0!==s?s:{}).reduce((function(e,a){var c=Object(V.a)(a,2),n=c[0],s=c[1];return e+t[n]*s}),0),formulaText:Object(c.jsx)("span",{children:Object.entries(null!==s&&void 0!==s?s:{}).map((function(e,a){var n,s,i=Object(V.a)(e,2),l=i[0],r=i[1];return Object(c.jsxs)("span",{children:[0!==a?" + ":"",F.a.printStat(l,t)," * ",null!==(n=null===r||void 0===r||null===(s=r.toFixed)||void 0===s?void 0:s.call(r,3))&&void 0!==n?n:r]},a)}))}),fixed:F.a.fixedUnit(n),unit:F.a.getStatUnit(n)}}))}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).map((function(e){var a=Object(V.a)(e,2),c=a[0],n=a[1];return"modifiers"===c?be(n,t):{text:F.a.getStatName(c),variant:F.a.getStatVariant(c),value:n,fixed:F.a.fixedUnit(c),unit:F.a.getStatUnit(c)}})).flat()}var he=[1,1,2,4,6,8,10];function xe(e){var t=e.character,a=e.character,s=a.characterKey,i=a.constellation,l=a.talentLevelKeys,r=a.autoInfused,j=void 0!==r&&r,d=e.talentKey,o=e.subtitle,b=e.ascension,h=e.equippedBuild,m=e.newBuild,f=e.editable,v=e.setState,N=e.onClickTitle,k=void 0===N?null:N,K=Object(se.a)(e,["onClickTitle"]),C=m||h,I=null,w=null;if("auto"===d&&T.a.isAutoInfusable(s)){var B=T.a.getElementalKey(s);w=Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:j?B:"secondary",className:"text-white",disabled:!f,onClick:f?function(){return v((function(e){return{autoInfused:!e.autoInfused}}))}:void 0,size:f?null:"sm",children:j?Object(c.jsxs)("span",{children:["Infused with ",Object(c.jsx)("b",{children:T.a.getElementalName(B)})]}):"Not Infused"})})}var _=0;if(d in l){var V=l[d],W=T.a.getTalentLevelBoost(s,d,i);if(_=V+W,f){I=Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(O.a,{title:"Talent Lv. ".concat(_+1),children:Object(q.a)(Array(he[b]).keys()).map((function(e){return Object(c.jsxs)(x.a.Item,{onClick:function(){return t=d,a=e,v((function(e){var c=e.talentLevelKeys||{};return c[t]=a,{talentLevelKeys:c}}));var t,a},children:["Talent Lv. ",e+W+1]},e)}))})}),w]})})}else I=Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{xs:"auto",children:"Talent Level: ".concat(_+1)}),Object(c.jsx)(y.a,{xs:"auto",children:w})]})})}var A=T.a.getTalentStats(s,d,C.finalStats),F=A&&Object(c.jsx)(S.a,{children:Object(c.jsx)(y.a,{children:Object(c.jsx)(g.a,{bg:"darkcontent",text:"lightfont",className:"mt-2 ml-n2 mr-n2",children:Object(c.jsx)(ie.a,{className:"text-white",variant:"flush",children:ue(A,null===C||void 0===C?void 0:C.finalStats).map((function(e,t){return Object(c.jsx)(Oe,Object(n.a)({index:t},Object(n.a)({field:e},K)),t)}))})})})});return Object(c.jsxs)(g.a,{bg:"lightcontent",text:"lightfont",className:"h-100",children:[I,Object(c.jsxs)(g.a.Body,{children:[Object(c.jsxs)(S.a,{className:"d-flex flex-row mb-2 ".concat(f&&k?"cursor-pointer":""),onClick:k,children:[Object(c.jsx)(y.a,{xs:"auto",className:"flex-shrink-1 d-flex flex-column",children:Object(c.jsx)(u.a,{src:T.a.getTalentImg(s,d),className:"thumb-mid"})}),Object(c.jsxs)(y.a,{className:"flex-grow-1",children:[Object(c.jsx)(g.a.Title,{children:T.a.getTalentName(s,d)}),Object(c.jsx)(g.a.Subtitle,{children:o})]})]}),T.a.getTalentDocument(s,d).map((function(e,a){var s,i;if("function"===typeof e&&(e=e(C.finalStats)),!e)return null;var l=e.text;"function"===typeof l&&(l=l(C.finalStats));var r=null!==(s=e.fields)&&void 0!==s?s:[],j=e.conditional;"function"===typeof j&&(j=j(C.finalStats));var o=null;if(j){var b=U.a.getConditionalNum(t.talentConditionals,{srcKey:d,srcKey2:j.conditionalKey}),u=[];if(b){var h=T.a.getTalentConditionalStats(j,b,{});u=[].concat(Object(q.a)(T.a.getTalentConditionalFields(j,b,[])),Object(q.a)(ue(h,null===C||void 0===C?void 0:C.finalStats)))}o=Object(c.jsx)(y.a,{xs:12,children:Object(c.jsxs)(g.a,{bg:"darkcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsx)(E.a,{disabled:!f,conditional:j,conditionalNum:b,setConditional:function(e){return v((function(t){return{talentConditionals:U.a.setConditional(t.talentConditionals,{srcKey:d,srcKey2:j.conditionalKey},e)}}))},defEle:Object(c.jsx)("span",{children:j.condition})})}),Object(c.jsx)(ie.a,{className:"text-white",variant:"flush",children:u.map((function(e,t){return Object(c.jsx)(Oe,Object(n.a)({index:t},Object(n.a)({field:e},K)),t)}))})]})})}return Object(c.jsxs)(S.a,{className:"mt-2 mb-n2",children:[Object(c.jsxs)(y.a,{xs:12,children:[Object(c.jsx)("div",{className:"mb-2",children:l}),r.length>0&&Object(c.jsx)(ie.a,{className:"text-white mb-2",children:null===r||void 0===r||null===(i=r.map)||void 0===i?void 0:i.call(r,(function(e,t){return Object(c.jsx)(Oe,Object(n.a)({index:t},Object(n.a)({field:e},K)),t)}))})]}),o]},"section"+a)})),F]})]})}function Oe(e){var t,a,n,s,i,l=e.character.compareAgainstEquipped,r=e.field,o=e.index,b=e.equippedBuild,u=e.newBuild,h=u||b;if("function"===typeof r&&(r=r(h.finalStats)),!r)return null;var x=T.a.getTalentFieldValue(r,"text",h.finalStats),O=T.a.getTalentFieldValue(r,"variant",h.finalStats),m=T.a.getTalentFieldValue(r,"formulaText",h.finalStats),f=m?Object(c.jsx)(H.a,{placement:"top",overlay:Object(c.jsx)(R.a,{children:m}),children:Object(c.jsx)(d.a,{icon:j.s,className:"ml-2",style:{cursor:"help"}})}):null,v=null;r.value?v=T.a.getTalentFieldValue(r,"value",h.finalStats):r.formula&&(v=null===(t=T.a.getTalentFieldValue(r,"formula",h.finalStats))||void 0===t||null===(a=t[0])||void 0===a?void 0:a.call(t,h.finalStats));var p=r.fixed||0,g=T.a.getTalentFieldValue(r,"unit",h.finalStats);if(l&&b&&"number"===typeof v){var y,N,S,k,K,C,I,w,B,_,V=r.value?r.value:null===(y=(N=r).formula)||void 0===y||null===(S=y.call(N,b.finalStats))||void 0===S||null===(k=S[0])||void 0===k?void 0:k.call(S,b.finalStats);"function"===typeof V&&(V=parseInt(null===(K=V)||void 0===K||null===(C=K(b.finalStats))||void 0===C||null===(I=C.toFixed)||void 0===I?void 0:I.call(C,p)));var W=v-V;v=Object(c.jsxs)("span",{children:[null!==(w=null===(B=V)||void 0===B?void 0:B.toFixed(p))&&void 0!==w?w:V,W?Object(c.jsxs)("span",{className:W>0?"text-success":"text-danger",children:[" (",W>0?"+":"",(null===W||void 0===W||null===(_=W.toFixed)||void 0===_?void 0:_.call(W,p))||W,")"]}):""]})}return Object(c.jsx)(ie.a.Item,{variant:o%2?"customdark":"customdarker",className:"p-2",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:[Object(c.jsx)("b",{children:x}),f]}),Object(c.jsxs)("span",{className:"float-right text-right text-".concat(O),children:[null!==(n=null===(s=v)||void 0===s||null===(i=s.toFixed)||void 0===i?void 0:i.call(s,p))&&void 0!==n?n:v,g]})]})})}var me=b.a.forwardRef((function(e,t){var a=e.children,n=e.style,s=e.className,i=e["aria-labelledby"];return Object(c.jsx)("div",{ref:t,style:{style:n,minWidth:"25rem"},className:s,"aria-labelledby":i,children:Object(c.jsx)(S.a,{children:b.a.Children.toArray(a).map((function(e,t){return Object(c.jsx)(y.a,{xs:6,children:e},t)}))})})})),fe=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(e){var c;Object(s.a)(this,a),(c=t.call(this,e)).forceUpdateComponent=function(){c.state.characterKey&&c.setState(_.a.get(c.state.characterKey)),c.props.forceUpdate?c.props.forceUpdate():c.forceUpdate()},c.setCharacterKey=function(e){var t,s,i=a.getInitialState(),l=_.a.get(e);l?i=Object(n.a)(Object(n.a)({},i),l):(i=Object(n.a)(Object(n.a)({},i),{},{characterKey:e,weapon:a.getIntialWeapon(e)}),c.updateCharacter(c.state)),c.setState(i),null===(t=c.props)||void 0===t||null===(s=t.setCharacterKey)||void 0===s||s.call(t,e)},c.setLevelKey=function(e){return c.setState({levelKey:e})},c.setOverride=function(e,t){return c.setState((function(a){var n=a.baseStatOverrides;return T.a.getBaseStatValue(c.state,e)===t?(delete n[e],{baseStatOverrides:n}):(n[e]=t,{baseStatOverrides:n})}))},c.setConstellation=function(e){return c.setState({constellation:e})},Object(I.b)(),c.state=a.getInitialState();var i=e.characterKey,l=e.character;if(i){var r,j=null!==(r=_.a.get(i))&&void 0!==r?r:{characterKey:i,weapon:a.getIntialWeapon(i)};c.state=Object(n.a)(Object(n.a)({},c.state),j)}else l&&(c.state=Object(n.a)(Object(n.a)({},c.state),l));return c}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;Promise.all([T.a.getCharacterDataImport(),B.a.getWeaponDataImport(),k.a.getDataImport()]).then((function(){return e.forceUpdate()}))}},{key:"updateCharacter",value:function(e){delete(e=Object(w.e)(e)).compareAgainstEquipped,_.a.update(e)}},{key:"componentDidUpdate",value:function(e){e.characterKey!==this.props.characterKey&&this.props.characterKey!==this.state.characterKey&&this.setCharacterKey(this.props.characterKey),this.props.editable&&this.state.characterKey&&this.updateCharacter(this.state)}},{key:"render",value:function(){var e,t=this,a=this.props,s=a.footer,i=a.newBuild,l=a.editable,r=a.onClose,o=a.tabName,b=this.state;(null===(e=i)||void 0===e?void 0:e.finalStats)&&((i=Object(w.e)(i)).finalStats.hitMode=b.hitMode,i.finalStats.reactionMode=b.reactionMode);var k=b.characterKey,C=b.levelKey,I=b.compareAgainstEquipped,B=b.artifacts,_=T.a.calculateBuild(b),V=k?Object(c.jsxs)("span",{children:[Object(c.jsx)(u.a,{src:T.a.getThumb(k),className:"thumb-small my-n1 ml-n2",roundedCircle:!0}),Object(c.jsxs)("h6",{className:"d-inline",children:[" ",T.a.getName(k)," "]})]}):Object(c.jsx)("span",{children:"Select a Character"}),W={character:b,newBuild:i,equippedBuild:!i||I?_:void 0,editable:l,setState:function(e){return t.setState(e)},setOverride:this.setOverride,forceUpdate:this.forceUpdateComponent};return B&&(W.artifacts=B),Object(c.jsxs)(g.a,{bg:"darkcontent",text:"lightfont",children:[Object(c.jsx)(g.a.Header,{children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(y.a,{xs:"auto",className:"mr-auto",children:l?Object(c.jsxs)(h.a,{children:[Object(c.jsxs)(x.a,{as:h.a,children:[Object(c.jsx)(N.a,{as:p.a,children:V}),Object(c.jsx)(x.a.Menu,{as:me,children:T.a.getAllCharacterKeys().map((function(e){return Object(c.jsx)(x.a.Item,{onClick:function(){return t.setCharacterKey(e)},children:Object(c.jsxs)("span",{children:[Object(c.jsx)(u.a,{src:T.a.getThumb(e),className:"thumb-small p-0 m-n1 grad-".concat(T.a.getStar(e),"star"),thumbnail:!0}),Object(c.jsxs)("h6",{className:"d-inline ml-2",children:[T.a.getName(e)," "]})]})},e)}))})]}),Object(c.jsxs)(O.a,{as:h.a,disabled:!k,title:Object(c.jsxs)("h6",{className:"d-inline",children:[T.a.getlevelNames(C)," "]}),children:[Object(c.jsx)(x.a.ItemText,{children:Object(c.jsx)("span",{children:"Select Base Stat Template"})}),T.a.getlevelKeys().map((function(e){return Object(c.jsx)(x.a.Item,{onClick:function(){return t.setLevelKey(e)},children:Object(c.jsxs)("h6",{children:[T.a.getlevelNames(e)," "]})},e)}))]})]}):Object(c.jsxs)("span",{children:[V," Lvl. ",T.a.getStatValueWithOverride(b,"characterLevel")]})}),i?Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsxs)(h.a,{children:[Object(c.jsx)(p.a,{variant:I?"primary":"success",disabled:!I,onClick:function(){return t.setState({compareAgainstEquipped:!1})},children:Object(c.jsx)("small",{children:"Show New artifact Stats"})}),Object(c.jsx)(p.a,{variant:I?"success":"primary",disabled:I,onClick:function(){return t.setState({compareAgainstEquipped:!0})},children:Object(c.jsx)("small",{children:"Compare against equipped artifact"})})]})}):null,Boolean(r)&&Object(c.jsx)(y.a,{xs:"auto",children:Object(c.jsx)(p.a,{variant:"danger",onClick:r,children:Object(c.jsx)(d.a,{icon:j.B})})})]})}),Boolean(k)&&Object(c.jsx)(g.a.Body,{children:Object(c.jsxs)(m.a.Container,{defaultActiveKey:o||(i?"newartifacts":"character"),mountOnEnter:!0,unmountOnExit:!0,children:[Object(c.jsxs)(f.a,{variant:"pills",className:"mb-2 ml-2",children:[Object(c.jsx)(f.a.Item,{children:Object(c.jsx)(f.a.Link,{eventKey:"character",children:"Character"})}),i?Object(c.jsx)(f.a.Item,{children:Object(c.jsx)(f.a.Link,{eventKey:"newartifacts",children:"New Artifacts"})}):null,Object(c.jsx)(f.a.Item,{children:Object(c.jsx)(f.a.Link,{eventKey:"artifacts",children:i?"Current Artifacts":"Artifacts"})}),Object(c.jsx)(f.a.Item,{children:T.a.hasTalentPage(k)?Object(c.jsx)(f.a.Link,{eventKey:"talent",children:"Talents"}):Object(c.jsx)(K.a,{children:Object(c.jsxs)(f.a.Link,{eventKey:"talent",disabled:!0,children:["Talents ",Object(c.jsx)(v.a,{variant:"warning",children:"WIP"})]})})}),!B&&Object(c.jsx)(f.a.Item,{children:Object(c.jsx)(K.a,{children:Object(c.jsxs)(f.a.Link,{eventKey:"team",disabled:!0,children:["Team ",Object(c.jsx)(v.a,{variant:"warning",children:"WIP"})]})})})]}),Object(c.jsxs)(m.a.Content,{children:[Object(c.jsx)(m.a.Pane,{eventKey:"character",children:Object(c.jsx)(ee,Object(n.a)({setConstellation:this.setConstellation},W))}),Object(c.jsx)(m.a.Pane,{eventKey:"artifacts",children:Object(c.jsx)(D,Object(n.a)({},Object(n.a)(Object(n.a)({},W),{},{newBuild:void 0,equippedBuild:_})))}),i?Object(c.jsx)(m.a.Pane,{eventKey:"newartifacts",children:Object(c.jsx)(D,Object(n.a)({},W))}):null,Object(c.jsx)(m.a.Pane,{eventKey:"talent",children:Object(c.jsx)(re,Object(n.a)({},W))})]})]})}),s&&Object(c.jsx)(g.a.Footer,{children:s})]})}}]),a}(b.a.Component);fe.initialState={characterKey:"",levelKey:"L1",hitMode:"hit",reactionMode:null,equippedArtifacts:{},artifactConditionals:[],baseStatOverrides:{},weapon:{key:"",levelKey:C.d[0],refineIndex:0,overrideMainVal:0,overrideSubVal:0,conditionalNum:0},talentLevelKeys:{auto:0,skill:0,burst:0},autoInfused:!1,talentConditionals:[],constellation:0,compareAgainstEquipped:!1},fe.getIntialWeapon=function(e){var t=Object(w.e)(fe.initialState.weapon);return t.key=Object.keys(B.a.getWeaponsOfType(T.a.getWeaponTypeKey(e)))[0],t},fe.getInitialState=function(){return Object(w.e)(fe.initialState)}}}]);
//# sourceMappingURL=5.2ad24fcd.chunk.js.map