(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[21],{508:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return I}));var c=a(41),n=a.n(c),r=a(57),s=a(3),l=a(53),i=a(9),o=a(104),j=a(0),u=a.n(j),b=a(175),d=a(60),h=a(31),O=a(27),m=a(190),x=a(199),f=a(56),v=a(133),y=a(269),p=a(211),g=a(45),C=a(48),N=a(202),w=a(214),k=a(114),K=a(43),B=a(14),S=a(81),T=a(10),E=a(270),z=a(112),A=a(1),F=u.a.lazy((function(){return a.e(22).then(a.bind(null,506))})),R=Object(j.lazy)((function(){return Promise.all([a.e(2),a.e(1)]).then(a.bind(null,220))})),_={level:"Level",rarity:"Rarity",name:"Name"};function D(e,t){return t===e?"":t}function I(e){var t,a=Object(j.useState)(""),c=Object(s.a)(a,2),C=c[0],I=c[1],Y=Object(j.useState)((function(){return Object.keys(_)[0]})),J=Object(s.a)(Y,2),L=J[0],M=J[1],G=Object(j.useReducer)(D,""),H=Object(s.a)(G,2),V=H[0],q=H[1],Q=Object(j.useReducer)(D,""),U=Object(s.a)(Q,2),W=U[0],X=U[1],Z=Object(j.useState)(!1),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ae=Object(S.a)(),ce=Object(s.a)(ae,2)[1],ne=Object(j.useRef)(null);Object(j.useEffect)((function(){g.a.pageview("/character");var e=Object(T.l)("CharacterDisplay.state");if(e){var t=e.charIdToEdit,a=e.sortBy,c=e.elementalFilter,n=e.weaponFilter;I(t),M(a),B.d.includes(c)&&q(c),B.j.includes(n)&&X(n)}return K.a.followAnyChar(ce)}),[ce]);var re=null!==(t=Object(S.b)(z.b.getAll(),[]))&&void 0!==t?t:{},se=function(e){var t,a;return null!==(t=null===(a=K.a._getChar(e))||void 0===a?void 0:a.level)&&void 0!==t?t:0},le=function(e){var t;return null===(t=re[e])||void 0===t?void 0:t.star};Object(j.useEffect)((function(){var e={charIdToEdit:C,sortBy:L,elementalFilter:V,weaponFilter:W};Object(T.p)("CharacterDisplay.state",e)}),[C,L,V,W]);var ie=Object(j.useCallback)(function(){var e=Object(r.a)(n.a.mark((function e(t){var a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.b.get(t);case 2:if(a=e.sent,"object"===typeof(c=null===a||void 0===a?void 0:a.name)&&(c=o.a.t("char_".concat(t,"_gen:name"))),window.confirm("Are you sure you want to remove ".concat(c,"?"))){e.next=7;break}return e.abrupt("return");case 7:K.a.removeChar(t),C===t&&I("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[C,I]),oe=Object(j.useCallback)((function(e){I(e),setTimeout((function(){var e;null===(e=ne.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)}),[I,ne]),je=Object(j.useCallback)((function(){I(""),te(!1)}),[I]),ue=K.a._getCharKeys().filter((function(e){var t,a;return(!V||V===(null===(t=re[e])||void 0===t?void 0:t.elementKey))&&(!W||W===(null===(a=re[e])||void 0===a?void 0:a.weaponTypeKey))})).sort((function(e,t){if("name"===L)return e<t?-1:e>t?1:0;if("level"===L){var a=se(t)-se(e);return a||le(t)-le(e)}var c=le(t)-le(e);return c||se(t)-se(e)})),be=Boolean(C||ee);return Object(A.jsxs)(b.a,{ref:ne,className:"mt-2",children:[Object(A.jsx)(w.a,{pageKey:"characterPage",modalTitle:"Character Management Page Guide",text:["Every character will be tested with in-game numbers for maximum accuracy.","You can see the details of the calculations of every number.","You need to manually enable auto infusion for characters like Choungyun or Noelle.",'You can change character constellations in both "Character" tab and in "Talents" tab.',"Modified character Stats show up in yellow."],children:Object(A.jsx)(F,{})}),be?Object(A.jsx)(d.a,{className:"mt-2",children:Object(A.jsx)(h.a,{children:Object(A.jsx)(u.a.Suspense,{fallback:Object(A.jsx)(O.a,{bg:"darkcontent",text:"lightfont",children:Object(A.jsx)(O.a.Body,{children:Object(A.jsxs)("h3",{className:"text-center",children:["Loading... ",Object(A.jsx)(m.a,{animation:"border",variant:"primary"})]})})}),children:Object(A.jsx)(R,{character:void 0,newBuild:void 0,tabName:void 0,editable:!0,setCharacterKey:oe,characterKey:C,onClose:je,footer:Object(A.jsx)(P,{onClose:je,characterKey:C})})})})}):null,Object(A.jsx)(O.a,{bg:"darkcontent",text:"lightfont",className:"mt-2",children:Object(A.jsx)(O.a.Body,{className:"p-2",children:Object(A.jsxs)(d.a,{children:[Object(A.jsx)(h.a,{xs:"auto",children:Object(A.jsx)(x.a,{children:B.d.map((function(e){return Object(A.jsx)(f.a,{variant:V&&V!==e?"secondary":e,className:"py-1 px-2 text-white",onClick:function(){return q(e)},children:Object(A.jsx)("h3",{className:"mb-0",children:k.b[e]})},e)}))})}),Object(A.jsx)(h.a,{children:Object(A.jsx)(x.a,{children:B.j.map((function(e){var t;return Object(A.jsx)(f.a,{variant:W&&W!==e?"secondary":"success",className:"py-1 px-2",onClick:function(){return X(e)},children:Object(A.jsx)("h3",{className:"mb-0",children:Object(A.jsx)(v.a,{src:null===(t=N.a.weaponTypes)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(A.jsxs)(h.a,{xs:"auto",children:[Object(A.jsx)("span",{children:"Sort by: "}),Object(A.jsx)(y.a,{type:"radio",name:"level",value:L,onChange:M,children:Object.entries(_).map((function(e){var t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(A.jsx)(p.a,{value:a,variant:L===a?"success":"primary",children:Object(A.jsx)("h6",{className:"mb-0",children:c})},a)}))})]})]})})}),Object(A.jsxs)(d.a,{className:"mt-2",children:[!be&&Object(A.jsx)(h.a,{lg:4,md:6,className:"mb-2",children:Object(A.jsxs)(O.a,{className:"h-100",bg:"darkcontent",text:"lightfont",children:[Object(A.jsx)(O.a.Header,{className:"pr-2",children:Object(A.jsx)("span",{children:"Add New Character"})}),Object(A.jsx)(O.a.Body,{className:"d-flex flex-column justify-content-center",children:Object(A.jsx)(d.a,{className:"d-flex flex-row justify-content-center",children:Object(A.jsx)(h.a,{xs:"auto",children:Object(A.jsx)(f.a,{onClick:function(){return te(!0)},children:Object(A.jsx)("h1",{children:Object(A.jsx)(i.a,{icon:l.m,className:"fa-fw"})})})})})})]})}),ue.map((function(e){return Object(A.jsx)(h.a,{lg:4,md:6,className:"mb-2",children:Object(A.jsx)(E.a,{header:void 0,cardClassName:"h-100",characterKey:e,onDelete:ie,onEdit:oe,footer:!0})},e)}))]})]})}function P(e){var t=e.onClose,a=e.characterKey;return Object(A.jsxs)(d.a,{children:[Object(A.jsx)(h.a,{children:Object(A.jsxs)(f.a,{variant:"info",as:C.b,to:{pathname:"/flex",characterKey:a},children:[Object(A.jsx)(i.a,{icon:l.j})," Share Character"]})}),Object(A.jsx)(h.a,{xs:"auto",children:Object(A.jsx)(f.a,{variant:"danger",onClick:t,children:"Close"})})]})}}}]);
//# sourceMappingURL=21.b9d57a16.chunk.js.map