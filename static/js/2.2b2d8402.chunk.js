(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[2],{160:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var c=a(1),n=a(22),s=a(27),i=a(0),l=a(138),r=a(108),j=a(143),d=a(48),o=a(46),b=a(126),u=a(151),h=a(114),x=a(64),O=a(113),m=a(106),f=a(141),v=a(125),p=a(14),g=a(45),y=a(133),N=a(56),S=a(161);function k(e){var t,a,k=e.artifactId,K=e.artifactObj,C=e.editable,B=e.onEdit,w=e.onDelete,I=e.assumeFull,T=void 0!==I&&I,_=Object(y.a)();Object(i.useEffect)((function(){var e;return null===(e=N.a.getDataImport())||void 0===e||e.then(_),k&&p.a.registerArtListener(k,_),function(){return k&&p.a.unregisterArtListener(k,_)}}),[k,_]);var V=Object(i.useCallback)((function(e){return N.a.equipArtifactOnChar(k,e)}),[k]);if(!k&&!K)return null;var E=K||p.a.get(k);if(!E)return null;E.maximumEfficiency||N.a.substatsValidation(E);var D=E.setKey,A=E.slotKey,F=E.numStars,W=void 0===F?0:F,z=E.level,q=void 0===z?0:z,L=E.mainStatKey,M=E.substats,U=void 0===M?[]:M,P=E.location,R=void 0===P?"":P,H=E.lock,G=E.currentEfficiency,X=void 0===G?0:G,J=E.maximumEfficiency,Q=void 0===J?0:J,Y=T?4*W:q,Z=T&&q!==4*W,$=Object(c.jsxs)("span",{className:Z?"text-orange":"",children:[N.a.getMainStatValue(L,W,Y,""),g.a.getStatUnit(L)]}),ee=U.every((function(e){var t;return!e.key||e.key&&e.value&&(null===e||void 0===e||null===(t=e.rolls)||void 0===t?void 0:t.length)}));return Object(c.jsxs)(d.a,{className:"h-100",border:"".concat(W,"star"),bg:"lightcontent",text:"lightfont",children:[Object(c.jsx)(d.a.Header,{className:"p-0",children:Object(c.jsxs)(x.a,{children:[Object(c.jsx)(o.a,{xs:2,md:3,children:Object(c.jsx)(u.a,{src:N.a.getPieceIcon(D,A),className:"w-100 h-auto grad-".concat(W,"star m-1"),thumbnail:!0})}),Object(c.jsxs)(o.a,{className:"pt-3",children:[Object(c.jsx)("h6",{children:Object(c.jsx)("b",{children:N.a.getPieceName(D,A,"Unknown Piece Name")})}),Object(c.jsxs)("div",{children:[N.a.getSlotNameWithIcon(A)," +".concat(q)]})]})]})}),Object(c.jsxs)(d.a.Body,{className:"d-flex flex-column py-2",children:[Object(c.jsxs)(d.a.Title,{children:[Object(c.jsx)("div",{children:N.a.getSetName(D,"Artifact Set")}),Object(c.jsx)("small",{className:"text-halfsize",children:Object(c.jsx)(v.a,{stars:W})})]}),Object(c.jsx)("h5",{className:"mb-1",children:Object(c.jsxs)("b",{children:[g.a.getStatName(L)," ",$]})}),Object(c.jsx)(x.a,{className:"mb-0",children:U.map((function(e,t){var a;if(!e||!e.value)return null;var n=(null===e||void 0===e||null===(a=e.rolls)||void 0===a?void 0:a.length)||0,s=(null===e||void 0===e?void 0:e.efficiency)||0,i=.3+.7*s,r=g.a.getStatName(e.key);return Object(c.jsxs)(o.a,{xs:12,children:[Object(c.jsx)(l.a,{variant:n?"".concat(n,"roll"):"danger",className:"text-darkcontent",children:Object(c.jsx)("b",{children:n||"?"})})," ",Object(c.jsxs)("span",{className:"text-".concat(n,"roll"),children:[r,"+".concat(g.a.getStatUnit(e.key)?e.value.toFixed(1):e.value).concat(g.a.getStatUnit(e.key))]}),Object(c.jsxs)("span",{className:"float-right",style:{opacity:i},children:[s.toFixed(1),"%"]})]},t)}))}),Object(c.jsxs)(x.a,{className:"mt-auto",children:[Object(c.jsxs)(o.a,{children:["Current SS Eff.: ",Object(c.jsx)(S.a,{percent:X,valid:ee,className:"float-right",children:null!==(t=null===X||void 0===X?void 0:X.toFixed(2))&&void 0!==t?t:X+"%"})]}),X!==Q&&Object(c.jsxs)(o.a,{className:"text-right",children:["Max SS Eff.: ",Object(c.jsx)(S.a,{percent:Q,valid:ee,children:null!==(a=null===Q||void 0===Q?void 0:Q.toFixed(2))&&void 0!==a?a:Q+"%"})]})]})]}),Object(c.jsx)(d.a.Footer,{className:"pr-3",children:Object(c.jsxs)(x.a,{className:"d-flex justify-content-between no-gutters",children:[C?Object(c.jsx)(o.a,{xs:"auto",children:Object(c.jsxs)(b.a,{children:[Object(c.jsx)(b.a.Toggle,{size:"sm",className:"text-left",children:m.a.getName(R,"Inventory")}),Object(c.jsxs)(b.a.Menu,{children:[Object(c.jsx)(b.a.Item,{onClick:function(){return V("")},children:"Inventory"}),Object(c.jsx)(b.a.Divider,{}),Object(c.jsx)(f.a,{onSelect:function(e){return V(e)}})]})]})}):Object(c.jsx)(o.a,{xs:"auto",children:Object(c.jsx)("b",{children:m.a.getName(R,"Inventory")})}),Object(c.jsx)(o.a,{xs:"auto",children:Object(c.jsxs)(j.a,{children:[C?Object(c.jsx)(h.a,{placement:"top",overlay:Object(c.jsx)(O.a,{children:"Locking a artifact will prevent the build generator from picking it for builds. Artifacts on characters are locked by default."}),children:Object(c.jsx)("span",{className:"d-inline-block",children:Object(c.jsx)(r.a,{size:"sm",disabled:R,style:R?{pointerEvents:"none"}:{},onClick:function(){E.lock=!H,p.a.update(E)},children:Object(c.jsx)(s.a,{icon:H||R?n.o:n.p,className:"fa-fw"})})})}):null,Boolean(B)&&Object(c.jsx)(r.a,{variant:"info",size:"sm",onClick:B,children:Object(c.jsx)(s.a,{icon:n.h,className:"fa-fw"})}),Boolean(w)&&Object(c.jsx)(r.a,{variant:"danger",size:"sm",onClick:w,children:Object(c.jsx)(s.a,{icon:n.E,className:"fa-fw"})})]})})]})})]})}},161:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var c=a(1),n=a(138);function s(e){var t=e.percent,a=e.valid,s=e.children,i=a?isNaN(t)?"secondary":"".concat(Math.floor(.05*t)+1,"roll"):"danger";return Object(c.jsx)(n.a,{variant:i,className:"secondary"===i?"":"text-darkcontent",children:s})}},165:function(e,t,a){"use strict";var c=a(1),n=a(114),s=a(113);t.a=function(e){var t=e.children;return Object(c.jsx)(n.a,{overlay:Object(c.jsx)(s.a,{children:"Work In Progress"}),children:Object(c.jsx)("span",{children:t})})}},175:function(e,t,a){"use strict";a.r(t),a.d(t,"compareAgainstEquippedContext",(function(){return be})),a.d(t,"default",(function(){return Oe}));var c=a(1),n=a(3),s=a(11),i=a(22),l=a(27),r=a(0),j=a.n(r),d=a(151),o=a(143),b=a(126),u=a(233),h=a(176),x=a(17),O=a(138),m=a(108),f=a(48),v=a(46),p=a(167),g=a(64),y=a(56),N=a(165),S=a(128),k=a(5),K=a(118),C=a(106),B=a(13),w=a(226),I=a(10),T=a(160),_=a(150),V=a(45),E=a(55),D=a(157);var A=function(e){var t,a=e.character,i=e.character,l=i.characterKey,j=i.artifactConditionals,d=e.equippedBuild,o=e.newBuild,b=e.editable,u=e.characterDispatch,h=e.artifacts,x=Object(I.g)(),p=o||d,N=o?null===(t=o.finalStats)||void 0===t?void 0:t.artifactsAssumeFull:a.artifactsAssumeFull;o&&(j=o.artifactConditionals);var S=C.a.getDisplayStatKeys(p.finalStats),k=Object(r.useCallback)((function(e){return x.push({pathname:"/artifact",artToEditId:e})}),[x]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(g.a,{children:Object(c.jsx)(v.a,{className:"mb-2",children:Object(c.jsxs)(f.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(c.jsx)(f.a.Body,{children:Object(c.jsx)(D.a,Object(s.a)({},{character:a,equippedBuild:d,newBuild:o,statsDisplayKeys:S,editable:b}))}),o?Object(c.jsxs)(f.a.Footer,{children:[Object(c.jsx)(m.a,{onClick:function(){window.confirm("Do you want to equip this artifact build to this character?")&&(C.a.equipArtifacts(l,o.artifactIds),null===u||void 0===u||u({type:"fromDB"}))},children:"Equip all artifacts to current character"}),N&&Object(c.jsx)(w.a,{className:"float-right text-right mb-0 py-2",variant:"orange",children:Object(c.jsx)("b",{children:"Assume Main Stats are Fully Leveled"})})]}):b&&Object(c.jsxs)(f.a.Footer,{children:[Object(c.jsx)(m.a,{onClick:function(){window.confirm("Do you want to move all the artifacts equipped to inventory?")&&(C.a.equipArtifacts(l,Object.fromEntries(y.a.getSlotKeys().map((function(e){return[e,""]})))),null===u||void 0===u||u({type:"fromDB"}))},children:"Unequip all artifacts"}),N&&Object(c.jsx)(w.a,{className:"float-right text-right mb-0 py-2",variant:"orange",children:Object(c.jsx)("b",{children:"Assume Main Stats are Fully Leveled"})})]})]})})}),Object(c.jsx)(g.a,{className:"mb-n2",children:Object(c.jsx)(v.a,{children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{sm:6,lg:4,className:"mb-2",children:Object(c.jsxs)(f.a,{className:"h-100 d-flex flex-column",bg:"lightcontent",text:"lightfont",children:[Object(c.jsx)(f.a.Header,{children:"Artifact Set Effects"}),Object(c.jsx)(f.a.Body,{className:"flex-grow-1",children:Object(c.jsx)(g.a,{children:Object.entries(y.a.getSetEffects(p.setToSlots)).map((function(e){var t=Object(n.a)(e,2),a=t[0],s=t[1];return Object(c.jsxs)(v.a,{xs:12,className:"mb-2",children:[Object(c.jsx)("h5",{children:y.a.getSetName(a)}),Object(c.jsx)(g.a,{children:s.map((function(e){var t=y.a.getArtifactSetNumStats(a,e),s=0,i=y.a.getSetEffectConditional(a,e);i&&(s=E.a.getConditionalNum(j,{srcKey:a,srcKey2:e}),Object.entries(y.a.getConditionalStats(a,e,s)).forEach((function(e){var a=Object(n.a)(e,2),c=a[0],s=a[1];return t[c]=(t[c]||0)+s})));var l=Object(c.jsx)(_.a,{disabled:!!o,conditional:i,conditionalNum:s,setConditional:function(t){return function(e,t,a){return null===u||void 0===u?void 0:u({artifactConditionals:E.a.setConditional(j,{srcKey:e,srcKey2:t},a)})}(a,e,t)},defEle:Object(c.jsxs)(O.a,{variant:"success",children:[e,"-Set"]})});return Object(c.jsxs)(v.a,{xs:12,className:"mb-2",children:[Object(c.jsxs)("h6",{children:[l," ",y.a.getSetEffectText(a,e,p.finalStats)]}),t?Object(c.jsx)(g.a,{children:Object.entries(t).map((function(e){var t=Object(n.a)(e,2),a=t[0],s=t[1];return Object(c.jsxs)(v.a,{xs:12,children:[V.a.getStatName(a),": ",s,V.a.getStatUnit(a)]},a)}))}):null]},e)}))})]},a)}))})})]})}),h?y.a.getSlotKeys().map((function(e){var t=h.find((function(t){return t.slotKey===e}));return t?Object(c.jsx)(v.a,{sm:6,lg:4,className:"mb-2",children:Object(c.jsx)(T.a,{artifactObj:t})},e):null})):y.a.getSlotKeys().map((function(e){return p.artifactIds[e]?Object(c.jsx)(v.a,{sm:6,lg:4,className:"mb-2",children:Object(c.jsx)(T.a,{artifactId:p.artifactIds[e],editable:b,assumeFull:N,onEdit:function(){return k(p.artifactIds[e])}})},p.artifactIds[e]):null}))]})})})]})},F=a(59),W=a(28),z=a(163),q=a(114),L=a(113),M=a(124),U=a(123),P=a(125),R=a(145),H=a(134),G=a(132),X=a(144);function J(e){var t,a=e.editable,j=e.character,o=e.character,b=o.characterKey,u=o.constellation,h=e.characterDispatch,x=e.equippedBuild,O=e.newBuild,p=Object(r.useState)(!1),y=Object(n.a)(p,2),N=y[0],S=y[1],K=C.a.getElementalKey(b),B=C.a.getWeaponTypeKey(b),w=C.a.getStatValueWithOverride(j,"characterLevel");return Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{xs:12,md:3,children:Object(c.jsxs)(f.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(f.a.Img,{src:C.a.getCard(b),className:"w-100 h-auto"}),Object(c.jsx)(f.a.Body,{children:Object(c.jsxs)(g.a,{children:[Object(c.jsxs)(v.a,{xs:12,children:[Object(c.jsxs)("h3",{children:[C.a.getName(b)," ",Object(c.jsx)(d.a,{src:M.a.elements[K],className:"inline-icon"})," ",Object(c.jsx)(d.a,{src:null===(t=M.a.weaponTypes)||void 0===t?void 0:t[B],className:"inline-icon"})]}),Object(c.jsx)("h6",{children:Object(c.jsx)(P.a,{stars:C.a.getStar(b),colored:!0})})]}),Object(c.jsx)(v.a,{children:N?Object(c.jsx)(g.a,{children:Object(c.jsx)(v.a,{children:Object(c.jsxs)(z.a,{children:[Object(c.jsx)(z.a.Prepend,{children:Object(c.jsx)(z.a.Text,{children:"Lvl."})}),Object(c.jsx)(U.a,{onChange:function(e){return h({type:"statOverride",statKey:"characterLevel",value:Object(k.a)(e,1,90)})},value:w}),Object(c.jsx)(z.a.Append,{children:Object(c.jsx)(m.a,{children:Object(c.jsx)(l.a,{icon:i.F,size:"sm",onClick:function(){return h({type:"statOverride",statKey:"characterLevel",value:C.a.getLevel(j.levelKey)})}})})}),Object(c.jsx)(z.a.Append,{children:Object(c.jsx)(q.a,{placement:"bottom",overlay:Object(c.jsx)(L.a,{children:"Override the level value for calculations. Does not change Stats."}),children:Object(c.jsx)(m.a,{variant:"success",onClick:function(){return S(!N)},size:"sm",children:Object(c.jsx)("span",{children:Object(c.jsx)(l.a,{icon:i.u})})})})})]})})}):Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{children:Object(c.jsxs)("h5",{children:["Level: ",w]})}),a?Object(c.jsx)(v.a,{xs:"auto",className:"pr-1 pl-1",children:Object(c.jsx)(m.a,{variant:"info",onClick:function(){return S(!N)},size:"sm",children:Object(c.jsx)("span",{children:Object(c.jsx)(l.a,{icon:i.h})})})}):null]})}),Object(c.jsx)(v.a,{xs:12,children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{xs:12,children:Object(c.jsx)("h5",{children:C.a.getConstellationName(b)})}),Object(c.jsx)(v.a,{children:Object(c.jsx)(g.a,{className:"px-2",children:Object(W.a)(Array(6).keys()).map((function(e){return Object(c.jsx)(v.a,{xs:4,className:"p-1",children:Object(c.jsx)(d.a,{src:C.a.getConstellationImg(b,e),className:"w-100 h-auto ".concat(u>e?"":"overlay-dark"," cursor-pointer"),roundedCircle:!0,onClick:function(){return a&&h({constellation:e+1===u?e:e+1})}})},e)}))})})]})})]})})]})}),Object(c.jsxs)(v.a,{xs:12,md:9,children:[Object(c.jsx)(Z,Object(s.a)({},{editable:a,character:j,characterDispatch:h,equippedBuild:x,newBuild:O})),Object(c.jsx)($,Object(s.a)({},{editable:a,character:j,characterDispatch:h,equippedBuild:x,newBuild:O}))]})]})}function Q(e){var t,a=e.statKey,n=e.val;return a?Object(c.jsxs)(v.a,{xs:12,lg:6,className:"px-3",children:[Object(c.jsx)("span",{children:Object(c.jsxs)("b",{children:[Object(H.a)(a)," ",V.a.getStatName(a)]})}),Object(c.jsxs)("span",{className:"float-right text-right text-".concat(V.a.getStatVariant(a)),children:[(null===n||void 0===n||null===(t=n.toFixed)||void 0===t?void 0:t.call(n,V.a.fixedUnit(a)))||n,V.a.getStatUnit(a)]})]}):null}function Y(e){var t=e.title,a=e.stats,s=void 0===a?{}:a,i=e.finalStats,l=void 0===i?{}:i;return 0===Object.keys(null!==s&&void 0!==s?s:{}).length?null:Object(c.jsxs)(f.a,{bg:"darkcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(f.a.Header,{className:"py-2 px-3",children:t}),Object(c.jsx)(f.a.Body,{className:"py-2 px-0",children:Object(c.jsx)(g.a,{children:Object.entries(s).map((function(e){var t=Object(n.a)(e,2),a=t[0],s=t[1];return"modifiers"===a?Object(c.jsx)(j.a.Fragment,{children:Object.entries(null!==s&&void 0!==s?s:{}).map((function(e){var t=Object(n.a)(e,2),a=t[0],s=t[1];return Object(c.jsx)(Q,{statKey:a,val:Object.entries(null!==s&&void 0!==s?s:{}).reduce((function(e,t){var a=Object(n.a)(t,2),c=a[0],s=a[1];return e+l[c]*s}),0)},a)}))},a):Object(c.jsx)(Q,{statKey:a,val:s},a)}))})})]})}function Z(e){var t=e.editable,a=e.character,s=e.character,o=s.characterKey,h=s.weapon,x=void 0===h?{}:h,O=e.characterDispatch,p=e.equippedBuild,y=e.newBuild,N=Object(r.useState)(!1),k=Object(n.a)(N,2),B=k[0],w=k[1],I=Object(r.useState)(!1),T=Object(n.a)(I,2),E=T[0],D=T[1],A=y||p,z=function(e,t){"key"===e&&(a.weapon.conditionalNum=0),a.weapon[e]=t,O({weapon:a.weapon})},q=K.a.getWeaponSubStatKey(x.key),L=C.a.getWeaponTypeKey(o),M=x.overrideMainVal||K.a.getWeaponMainStatVal(x.key,x.levelKey),U=x.overrideSubVal||K.a.getWeaponSubStatVal(x.key,x.levelKey),R=K.a.getWeaponPassiveName(x.key),G=K.a.getWeaponBonusStat(x.key,x.refineIndex,void 0),J=K.a.getWeaponConditionalStat(x.key,x.refineIndex,x.conditionalNum,void 0),Q=K.a.getWeaponConditional(x.key),Z=x.conditionalNum,$=Object(c.jsx)(_.a,{conditional:Q,conditionalNum:Z,setConditional:function(e){return z("conditionalNum",e)},defEle:Object(c.jsx)("span",{children:R})});return Object(c.jsxs)(f.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(f.a.Header,{children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{children:Object(c.jsx)("span",{children:"Weapon"})}),Object(c.jsx)(v.a,{xs:"auto",children:Object(c.jsx)(m.a,{variant:"info",size:"sm",onClick:function(){return D(!E)},children:Object(c.jsxs)("span",{children:[Object(c.jsx)(l.a,{icon:i.t})," ",E?"Hide Desc.":"Show Desc."]})})}),t?Object(c.jsx)(v.a,{xs:"auto",children:Object(c.jsx)(m.a,{variant:B?"danger":"info",onClick:function(){return w(!B)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(l.a,{icon:B?i.u:i.h})," ",B?"EXIT":"EDIT"]})})}):null]})}),Object(c.jsxs)(f.a.Body,{children:[Object(c.jsxs)(g.a,{className:"mb-2",children:[Object(c.jsx)(v.a,{xs:12,md:3,children:Object(c.jsx)(d.a,{src:K.a.getWeaponImg(x.key),className:"w-100 h-auto grad-".concat(K.a.getWeaponRarity(x.key),"star"),thumbnail:!0})}),B?Object(c.jsx)(v.a,{children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{lg:"auto",xs:6,className:"mb-2 pr-0",children:Object(c.jsx)(u.a,{title:K.a.getWeaponName(x.key),children:Object(W.a)(Array(5).keys()).reverse().map((function(e){return e+1})).map((function(e,t,a){return Object(c.jsxs)(j.a.Fragment,{children:[Object(c.jsx)(b.a.ItemText,{children:Object(c.jsx)(P.a,{stars:e})},"star"+e),Object.entries(K.a.getWeaponsOfType(L)).filter((function(t){var a=Object(n.a)(t,2);a[0];return a[1].rarity===e})).map((function(e){var t=Object(n.a)(e,2),a=t[0],s=t[1];return Object(c.jsx)(b.a.Item,{onClick:function(){return z("key",a)},children:s.name},a)})),t!==a.length-1&&Object(c.jsx)(b.a.Divider,{})]},e)}))})}),Object(c.jsx)(v.a,{lg:"auto",xs:6,className:"mb-2 pr-0",children:Object(c.jsxs)(u.a,{title:K.a.getLevelName(x.levelKey),children:[Object(c.jsx)(b.a.ItemText,{children:Object(c.jsx)("span",{children:"Select Weapon Level"})}),Object.entries(S.a).map((function(e){var t=Object(n.a)(e,2),a=t[0],s=t[1];return Object(c.jsx)(b.a.Item,{onClick:function(){return z("levelKey",a)},children:s},a)}))]})}),R&&Object(c.jsx)(v.a,{lg:"auto",xs:6,className:"mb-2",children:Object(c.jsxs)(u.a,{title:"Refinement ".concat(x.refineIndex+1),className:"w-100",children:[Object(c.jsx)(b.a.ItemText,{children:Object(c.jsx)("span",{children:"Select Weapon Refinement"})}),Object(c.jsx)(b.a.Divider,{}),Object(W.a)(Array(5).keys()).map((function(e){return Object(c.jsx)(b.a.Item,{onClick:function(){return z("refineIndex",e)},children:"Refinement ".concat(e+1)},e)}))]})}),Object(c.jsx)(v.a,{xs:12,className:"mb-2",children:Object(c.jsx)(X.a,{name:Object(c.jsxs)("span",{children:[Object(c.jsx)(l.a,{icon:i.l,className:"mr-2"}),"ATK"]}),placeholder:"Weapon Attack",value:M,percent:!1,onValueChange:function(e){return z("overrideMainVal",e)},defaultValue:K.a.getWeaponMainStatVal(x.key,x.levelKey)})}),q&&Object(c.jsx)(v.a,{xs:12,className:"mb-2",children:Object(c.jsx)(X.a,{name:Object(c.jsxs)("span",{children:[Object(c.jsx)("span",{className:"mr-2",children:Object(H.a)(q)}),V.a.getStatName(q)]}),placeholder:"Weapon Substat",value:U,percent:"%"===V.a.getStatUnit(q),onValueChange:function(e){return z("overrideSubVal",e)},defaultValue:K.a.getWeaponSubStatVal(x.key,x.levelKey)})})]})}):Object(c.jsxs)(v.a,{children:[Object(c.jsx)(g.a,{className:"mb-2",children:Object(c.jsxs)(v.a,{children:[Object(c.jsxs)("h5",{className:"mb-0",children:[K.a.getWeaponName(x.key)," ",K.a.getLevelName(x.levelKey)," ",R&&"(Refinement ".concat(x.refineIndex+1,")")]}),Object(c.jsx)("small",{children:Object(c.jsx)(P.a,{stars:K.a.getWeaponRarity(x.key)})})]})}),Object(c.jsx)(g.a,{children:Object(c.jsx)(v.a,{children:$})}),Object(c.jsx)("p",{children:R&&K.a.getWeaponPassiveDescription(x.key,x.refineIndex,null===A||void 0===A?void 0:A.finalStats,a)}),Object(c.jsx)(Y,{title:"Main Stats",stats:Object(F.a)({atk:M},q,U),finalStats:null===A||void 0===A?void 0:A.finalStats}),Object(c.jsx)(Y,{title:"Bonus Stats",stats:G,finalStats:null===A||void 0===A?void 0:A.finalStats}),Object(c.jsx)(Y,{title:"Conditional Stats",stats:J,finalStats:null===A||void 0===A?void 0:A.finalStats})]})]}),E&&Object(c.jsx)(g.a,{children:Object(c.jsx)(v.a,{children:Object(c.jsx)("small",{children:K.a.getWeaponDescription(x.key)})})})]})]})}function $(e){var t=e.editable,a=e.character,j=e.characterDispatch,d=e.equippedBuild,o=e.newBuild,h=Object(r.useState)(!1),x=Object(n.a)(h,2),O=x[0],p=x[1],y=Object(r.useState)(!1),N=Object(n.a)(y,2),S=N[0],k=N[1],K=Object(r.useState)(!1),B=Object(n.a)(K,2),w=B[0],I=B[1],T=["eleMas","critRate_","critDMG_","enerRech_","heal_"],_=["finalHP","finalATK","finalDEF"];_.push.apply(_,T);var E=["characterHP","hp","hp_","characterATK","atk","atk_","characterDEF","def","def_"];E.push.apply(E,T);var D=[];C.a.getElementalKeys().forEach((function(e){D.push("".concat(e,"_dmg_")),D.push("".concat(e,"_res_"))})),D.push("stamina","incHeal_","powShield_");var A=["normal_dmg_","normal_critRate_","charged_dmg_","charged_critRate_","skill_dmg_","skill_critRate_","burst_dmg_","burst_critRate_","dmg_","moveSPD_","atkSPD_","weakspotDMG_"],F=C.a.getStatValueWithOverride(a,"specializedStatKey"),W=C.a.getStatValueWithOverride(a,"specializedStatVal"),q=V.a.getStatUnit(F),L="%"===V.a.getStatUnit(F),M={character:a,equippedBuild:d,newBuild:o,editable:t};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(f.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(f.a.Header,{children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{children:Object(c.jsx)("span",{children:"Main Base Stats"})}),t?Object(c.jsx)(v.a,{xs:"auto",children:Object(c.jsx)(m.a,{variant:O?"danger":"info",onClick:function(){return p(!O)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(l.a,{icon:O?i.u:i.h})," ",O?"EXIT":"EDIT"]})})}):null]})}),O?Object(c.jsx)(f.a.Body,{children:Object(c.jsxs)(g.a,{className:"mb-2",children:[E.map((function(e){return Object(c.jsx)(v.a,{lg:6,xs:12,children:Object(c.jsx)(X.a,{className:"mb-2",name:Object(c.jsxs)("span",{children:[Object(H.a)(e)," ",V.a.getStatNamePretty(e)]}),placeholder:"Base ".concat(V.a.getStatName(e)),value:C.a.getStatValueWithOverride(a,e),percent:"%"===V.a.getStatUnit(e),onValueChange:function(t){return j({type:"statOverride",statKey:e,value:t})},defaultValue:C.a.getBaseStatValue(a,e)})},e)})),Object(c.jsx)(v.a,{lg:6,xs:12,children:Object(c.jsxs)(z.a,{children:[Object(c.jsxs)(u.a,{title:V.a.getStatNameWithPercent(F,"Specialized Stat"),as:z.a.Prepend,children:[Object(c.jsx)(b.a.ItemText,{children:"Select Specialized Stat "}),G.c.map((function(e){return Object(c.jsx)(b.a.Item,{onClick:function(){return j({type:"statOverride",statKey:"specializedStatKey",value:e})},children:V.a.getStatNameWithPercent(e)},e)}))]}),Object(c.jsx)(U.a,{float:L,placeholder:"Character Special Stat",value:C.a.getStatValueWithOverride(a,"specializedStatVal"),onChange:function(e){return j({type:"statOverride",statKey:"specializedStatVal",value:e})}}),Object(c.jsxs)(z.a.Append,{children:[L&&Object(c.jsx)(z.a.Text,{children:"%"}),Object(c.jsx)(m.a,{onClick:function(){j({type:"statOverride",statKey:"specializedStatKey",value:C.a.getBaseStatValue(a,"specializedStatKey")}),j({type:"statOverride",statKey:"specializedStatVal",value:C.a.getBaseStatValue(a,"specializedStatVal")})},disabled:!C.a.hasOverride(a,"specializedStatKey")&&!C.a.hasOverride(a,"specializedStatVal"),children:Object(c.jsx)(l.a,{icon:i.F})})]})]})})]})}):Object(c.jsx)(f.a.Body,{children:Object(c.jsxs)(g.a,{className:"mb-2",children:[_.map((function(e){return Object(c.jsx)(v.a,{xs:12,lg:6,children:Object(c.jsx)(R.a,Object(s.a)({statKey:e},M))},e)})),Object(c.jsxs)(v.a,{lg:6,xs:12,children:[Object(c.jsxs)("span",{children:[Object(c.jsx)("b",{children:"Specialized:"})," ",Object(c.jsx)("span",{className:C.a.hasOverride(a,"specializedStatKey")?"text-warning":"",children:V.a.getStatName(F)})]}),Object(c.jsx)("span",{className:"float-right ".concat(C.a.hasOverride(a,"specializedStatVal")?"text-warning":""),children:"".concat(W).concat(q)})]})]})})]}),Object(c.jsxs)(f.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(f.a.Header,{children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{children:Object(c.jsx)("span",{children:"Other Stats"})}),t&&Object(c.jsx)(v.a,{xs:"auto",children:Object(c.jsx)(m.a,{variant:S?"danger":"info",onClick:function(){return k(!S)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(l.a,{icon:S?i.u:i.h})," ",S?"EXIT":"EDIT"]})})})]})}),S?Object(c.jsx)(f.a.Body,{children:Object(c.jsx)(g.a,{className:"mb-2",children:D.map((function(e){return Object(c.jsx)(v.a,{lg:6,xs:12,children:Object(c.jsx)(X.a,{className:"mb-2",name:Object(c.jsxs)("span",{children:[Object(H.a)(e)," ",V.a.getStatName(e)]}),placeholder:"Base ".concat(V.a.getStatNameRaw(e)),value:C.a.getStatValueWithOverride(a,e),percent:"%"===V.a.getStatUnit(e),onValueChange:function(t){return j({type:"statOverride",statKey:e,value:t})},defaultValue:C.a.getBaseStatValue(a,e)})},e)}))})}):Object(c.jsx)(f.a.Body,{children:Object(c.jsx)(g.a,{className:"mb-2",children:D.map((function(e){return Object(c.jsx)(v.a,{xs:12,lg:6,children:Object(c.jsx)(R.a,Object(s.a)({statKey:e},M))},e)}))})})]}),Object(c.jsxs)(f.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(f.a.Header,{children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{children:Object(c.jsx)("span",{children:"Misc Stats"})}),t&&Object(c.jsx)(v.a,{xs:"auto",children:Object(c.jsx)(m.a,{variant:w?"danger":"info",onClick:function(){return I(!w)},size:"sm",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(l.a,{icon:w?i.u:i.h})," ",w?"EXIT":"EDIT"]})})})]})}),w?Object(c.jsx)(f.a.Body,{children:Object(c.jsx)(g.a,{className:"mb-2",children:A.map((function(e){return Object(c.jsx)(v.a,{xl:6,xs:12,children:Object(c.jsx)(X.a,{className:"mb-2",name:Object(c.jsxs)("span",{children:[Object(H.a)(e)," ",V.a.getStatName(e)]}),placeholder:"Base ".concat(V.a.getStatNameRaw(e)),value:C.a.getStatValueWithOverride(a,e),percent:"%"===V.a.getStatUnit(e),onValueChange:function(t){return j({type:"statOverride",statKey:e,value:t})},defaultValue:C.a.getBaseStatValue(a,e)})},e)}))})}):Object(c.jsx)(f.a.Body,{children:Object(c.jsx)(g.a,{className:"mb-2",children:A.map((function(e){return Object(c.jsx)(v.a,{xs:12,lg:6,children:Object(c.jsx)(R.a,Object(s.a)({statKey:e},M))},e)}))})})]})]})}var ee=a(179),te=a(20);function ae(e){var t=e.character,a=e.character,i=a.characterKey,l=a.levelKey,r=a.constellation,j=e.editable,d=e.characterDispatch,o=e.newBuild,b=e.equippedBuild,u=C.a.getAscension(l),h=Object(s.a)(Object(s.a)({},e),{},{ascension:u});return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(g.a,{children:Object(c.jsx)(v.a,{children:Object(c.jsx)(ne,Object(s.a)({},{character:t,newBuild:o,equippedBuild:b}))})}),Object(c.jsxs)(g.a,{children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var t=Object(n.a)(e,2),a=t[0],i=t[1];return Object(c.jsx)(v.a,{xs:12,md:6,lg:4,className:"mb-2",children:Object(c.jsx)(je,Object(s.a)(Object(s.a)({},h),{},{talentKey:a,subtitle:i}))},a)})),C.a.getTalent(i,"sprint",!1)&&Object(c.jsx)(v.a,{xs:12,md:6,lg:4,className:"mb-2",children:Object(c.jsx)(je,Object(s.a)(Object(s.a)({},h),{},{talentKey:"sprint",subtitle:"Alternative Sprint"}))})]}),Object(c.jsx)(g.a,{children:[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var t=Object(n.a)(e,3),a=t[0],i=t[1],l=t[2],r=u>=l;return Object(c.jsx)(v.a,{style:{opacity:r?1:.5},xs:12,md:4,className:"mb-2",children:Object(c.jsx)(je,Object(s.a)(Object(s.a)({},h),{},{talentKey:a,subtitle:i}))},a)}))}),Object(c.jsx)(g.a,{children:Object(c.jsx)(v.a,{children:Object(c.jsxs)("h5",{className:"text-center",children:["Constellation Lv. ",r]})})}),Object(c.jsx)(g.a,{className:"mb-n2",children:Object(W.a)(Array(6).keys()).map((function(e){var t="constellation".concat(e+1);return Object(c.jsx)(v.a,{xs:12,md:4,className:"mb-2",style:{opacity:r>e?1:.5},children:Object(c.jsx)(je,Object(s.a)(Object(s.a)({},h),{},{talentKey:t,subtitle:"Contellation Lv. ".concat(e+1),onClickTitle:function(){return j&&d({constellation:e+1===r?e:e+1})}}))},e)}))})]})}var ce={superconduct_hit:function(e){var t,a=e.stats,n="superconduct_hit";return Object(c.jsx)(f.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(f.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-superconduct",children:[V.a.getStatName(n)," ",Object(c.jsx)(d.a,{src:M.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(d.a,{src:M.a.elements.cryo,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(V.a.fixedUnit(n))]})})})},electrocharged_hit:function(e){var t,a=e.stats,n="electrocharged_hit";return Object(c.jsx)(f.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(f.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-electrocharged",children:[V.a.getStatName(n)," ",Object(c.jsx)(d.a,{src:M.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(d.a,{src:M.a.elements.hydro,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(V.a.fixedUnit(n))]})})})},overloaded_hit:function(e){var t,a=e.stats,n="overloaded_hit";return Object(c.jsx)(f.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(f.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-overloaded",children:[V.a.getStatName(n)," ",Object(c.jsx)(d.a,{src:M.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(d.a,{src:M.a.elements.pyro,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(V.a.fixedUnit(n))]})})})},pyro_swirl_hit:function(e){var t,a=e.stats,s=Object(r.useState)(Object.keys(se)[0]),i=Object(n.a)(s,2),l=i[0],j=i[1],d="".concat(l,"_swirl_hit");return Object(c.jsx)(f.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsxs)(f.a.Body,{className:"p-0",children:[Object(c.jsx)(u.a,{size:"sm",title:se[l],className:"d-inline-block",variant:"success",children:Object.entries(se).map((function(e){var t=Object(n.a)(e,2),a=t[0],s=t[1];return Object(c.jsx)(b.a.Item,{onClick:function(){return j(a)},children:s},a)}))}),Object(c.jsxs)("span",{className:"text-".concat(l," p-2"),children:[" ",null===(t=a[d])||void 0===t?void 0:t.toFixed(V.a.fixedUnit(d))]})]})})},shattered_hit:function(e){var t,a=e.stats,n="shattered_hit",s=Object(c.jsx)(q.a,{placement:"top",overlay:Object(c.jsxs)(L.a,{children:["Claymores, Plunging Attacks and ",Object(c.jsx)("span",{className:"text-geo",children:"Geo DMG"})]}),children:Object(c.jsx)(l.a,{icon:i.s,className:"ml-2",style:{cursor:"help"}})});return Object(c.jsx)(f.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(f.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-shattered",children:[V.a.getStatName(n)," ",Object(c.jsx)(d.a,{src:M.a.elements.hydro,className:"inline-icon"}),"+",Object(c.jsx)(d.a,{src:M.a.elements.cryo,className:"inline-icon"}),"+ ",Object(c.jsxs)("small",{className:"text-physical",children:["Heavy Attack",s," "]})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(V.a.fixedUnit(n))]})})})},crystalize_hit:function(e){var t,a=e.stats,n="crystalize_hit";return Object(c.jsx)(f.a,{bg:"darkcontent",text:"lightfont",children:Object(c.jsx)(f.a.Body,{className:"p-2",children:Object(c.jsxs)("span",{className:"text-crystalize",children:[V.a.getStatName(n)," ",Object(c.jsx)(d.a,{src:M.a.elements.electro,className:"inline-icon"}),"/",Object(c.jsx)(d.a,{src:M.a.elements.hydro,className:"inline-icon"}),"/",Object(c.jsx)(d.a,{src:M.a.elements.pyro,className:"inline-icon"}),"/",Object(c.jsx)(d.a,{src:M.a.elements.cryo,className:"inline-icon"}),"+",Object(c.jsx)(d.a,{src:M.a.elements.geo,className:"inline-icon"})," ",null===(t=a[n])||void 0===t?void 0:t.toFixed(V.a.fixedUnit(n))]})})})}};function ne(e){var t=e.character.characterKey,a=e.newBuild,n=e.equippedBuild,s=a||n,i=C.a.getElementalKey(t),l=Object(W.a)(te.a[i]||[]);return l.includes("shattered_hit")||"claymore"!==C.a.getWeaponTypeKey(t)||l.push("shattered_hit"),Object(c.jsx)(f.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:Object(c.jsx)(f.a.Body,{className:"px-3 py-2",children:Object(c.jsx)(g.a,{className:"mb-n2",children:l.map((function(e){var t=ce[e];return t?Object(c.jsx)(v.a,{xs:"auto",className:"mb-2",children:Object(c.jsx)(t,{stats:null===s||void 0===s?void 0:s.finalStats})},e):null}))})})})}var se={pyro:Object(c.jsxs)("span",{children:[V.a.getStatName("pyro_swirl_hit")," ",Object(c.jsx)(d.a,{src:M.a.elements.pyro,className:"inline-icon"}),"+",Object(c.jsx)(d.a,{src:M.a.elements.anemo,className:"inline-icon"})]}),electro:Object(c.jsxs)("span",{children:[V.a.getStatName("electro_swirl_hit")," ",Object(c.jsx)(d.a,{src:M.a.elements.electro,className:"inline-icon"}),"+",Object(c.jsx)(d.a,{src:M.a.elements.anemo,className:"inline-icon"})]}),cryo:Object(c.jsxs)("span",{children:[V.a.getStatName("cryo_swirl_hit")," ",Object(c.jsx)(d.a,{src:M.a.elements.cryo,className:"inline-icon"}),"+",Object(c.jsx)(d.a,{src:M.a.elements.anemo,className:"inline-icon"})]}),hydro:Object(c.jsxs)("span",{children:[V.a.getStatName("hydro_swirl_hit")," ",Object(c.jsx)(d.a,{src:M.a.elements.hydro,className:"inline-icon"}),"+",Object(c.jsx)(d.a,{src:M.a.elements.anemo,className:"inline-icon"})]})};function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).map((function(e){var a=Object(n.a)(e,2),s=a[0],i=a[1];return{text:V.a.getStatName(s),variant:V.a.getStatVariant(s),value:Object.entries(null!==i&&void 0!==i?i:{}).reduce((function(e,a){var c=Object(n.a)(a,2),s=c[0],i=c[1];return e+t[s]*i}),0),formulaText:Object(c.jsx)("span",{children:Object.entries(null!==i&&void 0!==i?i:{}).map((function(e,a){var s,i,l=Object(n.a)(e,2),r=l[0],j=l[1];return Object(c.jsxs)("span",{children:[0!==a?" + ":"",V.a.printStat(r,t)," * ",null!==(s=null===j||void 0===j||null===(i=j.toFixed)||void 0===i?void 0:i.call(j,3))&&void 0!==s?s:j]},a)}))}),fixed:V.a.fixedUnit(s),unit:V.a.getStatUnit(s)}}))}function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).map((function(e){var a=Object(n.a)(e,2),c=a[0],s=a[1];return"modifiers"===c?ie(s,t):{text:V.a.getStatName(c),variant:V.a.getStatVariant(c),value:s,fixed:V.a.fixedUnit(c),unit:V.a.getStatUnit(c)}})).flat()}var re=[1,1,2,4,6,8,10];function je(e){var t=e.character,a=e.character,n=a.characterKey,i=a.constellation,l=a.talentLevelKeys,r=void 0===l?{}:l,j=a.autoInfused,o=void 0!==j&&j,h=e.characterDispatch,x=e.talentKey,O=e.subtitle,p=e.ascension,y=e.equippedBuild,N=e.newBuild,S=e.editable,k=e.onClickTitle,K=N||y,B=null,w=null;if("auto"===x&&C.a.isAutoInfusable(n)){var I=C.a.getElementalKey(n);w=Object(c.jsx)(v.a,{xs:"auto",children:Object(c.jsx)(m.a,{variant:o?I:"secondary",className:"text-white",disabled:!S,onClick:function(){return S&&h({autoInfused:!t.autoInfused})},size:S?null:"sm",children:o?Object(c.jsxs)("span",{children:["Infused with ",Object(c.jsx)("b",{children:C.a.getElementalName(I)})]}):"Not Infused"})})}var T=0;if(x in r){var V=r[x],D=C.a.getTalentLevelBoost(n,x,i);if(T=V+D,S){B=Object(c.jsx)(f.a.Header,{children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{xs:"auto",children:Object(c.jsx)(u.a,{title:"Talent Lv. ".concat(T+1),children:Object(W.a)(Array(re[p]+("auto"===x?1:0)).keys()).map((function(e){return Object(c.jsxs)(b.a.Item,{onClick:function(){return t=e,r[x]=t,void h({talentLevelKeys:r});var t},children:["Talent Lv. ",e+D+1]},e)}))})}),w]})})}else B=Object(c.jsx)(f.a.Header,{children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{xs:"auto",children:"Talent Level: ".concat(T+1)}),Object(c.jsx)(v.a,{xs:"auto",children:w})]})})}var A=C.a.getTalentStats(n,x,K.finalStats),F=A&&Object(c.jsx)(g.a,{children:Object(c.jsx)(v.a,{children:Object(c.jsx)(f.a,{bg:"darkcontent",text:"lightfont",className:"mt-2 ml-n2 mr-n2",children:Object(c.jsx)(ee.a,{className:"text-white",variant:"flush",children:le(A,null===K||void 0===K?void 0:K.finalStats).map((function(e,t){return Object(c.jsx)(de,Object(s.a)({index:t},{field:e,equippedBuild:y,newBuild:N}),t)}))})})})});return Object(c.jsxs)(f.a,{bg:"lightcontent",text:"lightfont",className:"h-100",children:[B,Object(c.jsxs)(f.a.Body,{children:[Object(c.jsxs)(g.a,{className:"d-flex flex-row mb-2 ".concat(S&&k?"cursor-pointer":""),onClick:k,children:[Object(c.jsx)(v.a,{xs:"auto",className:"flex-shrink-1 d-flex flex-column",children:Object(c.jsx)(d.a,{src:C.a.getTalentImg(n,x),className:"thumb-mid"})}),Object(c.jsxs)(v.a,{className:"flex-grow-1",children:[Object(c.jsx)(f.a.Title,{children:C.a.getTalentName(n,x)}),Object(c.jsx)(f.a.Subtitle,{children:O})]})]}),C.a.getTalentDocument(n,x).map((function(e,a){var n,i;if("function"===typeof e&&(e=e(K.finalStats)),!e)return null;var l=e.text;"function"===typeof l&&(l=l(K.finalStats));var r=null!==(n=e.fields)&&void 0!==n?n:[],j=e.conditional;"function"===typeof j&&(j=j(K.finalStats));var d=null;if(j){var o=E.a.getConditionalNum(t.talentConditionals,{srcKey:x,srcKey2:j.conditionalKey}),b=[];if(o){var u=C.a.getTalentConditionalStats(j,o,{});b=[].concat(Object(W.a)(C.a.getTalentConditionalFields(j,o,[])),Object(W.a)(le(u,null===K||void 0===K?void 0:K.finalStats)))}d=Object(c.jsx)(v.a,{xs:12,children:Object(c.jsxs)(f.a,{bg:"darkcontent",text:"lightfont",className:"mb-2",children:[Object(c.jsx)(f.a.Header,{children:Object(c.jsx)(_.a,{disabled:!S,conditional:j,conditionalNum:o,setConditional:function(e){return h({talentConditionals:E.a.setConditional(t.talentConditionals,{srcKey:x,srcKey2:j.conditionalKey},e)})},defEle:Object(c.jsx)("span",{children:j.condition})})}),Object(c.jsx)(ee.a,{className:"text-white",variant:"flush",children:b.map((function(e,t){return Object(c.jsx)(de,Object(s.a)({index:t},{field:e,equippedBuild:y,newBuild:N}),t)}))})]})})}return Object(c.jsxs)(g.a,{className:"mt-2 mb-n2",children:[Object(c.jsxs)(v.a,{xs:12,children:[Object(c.jsx)("div",{className:"mb-2",children:l}),r.length>0&&Object(c.jsx)(ee.a,{className:"text-white mb-2",children:null===r||void 0===r||null===(i=r.map)||void 0===i?void 0:i.call(r,(function(e,t){return Object(c.jsx)(de,Object(s.a)({index:t},{field:e,equippedBuild:y,newBuild:N}),t)}))})]}),d]},"section"+a)})),F]})]})}function de(e){var t,a,n,s,j,d=e.field,o=e.index,b=e.equippedBuild,u=e.newBuild,h=Object(r.useContext)(be),x=u||b;if("function"===typeof d&&(d=d(x.finalStats)),!d)return null;var O=C.a.getTalentFieldValue(d,"text",x.finalStats),m=C.a.getTalentFieldValue(d,"variant",x.finalStats),f=C.a.getTalentFieldValue(d,"formulaText",x.finalStats),v=f?Object(c.jsx)(q.a,{placement:"top",overlay:Object(c.jsx)(L.a,{children:f}),children:Object(c.jsx)(l.a,{icon:i.s,className:"ml-2",style:{cursor:"help"}})}):null,p=null;d.value?p=C.a.getTalentFieldValue(d,"value",x.finalStats):d.formula&&(p=null===(t=C.a.getTalentFieldValue(d,"formula",x.finalStats))||void 0===t||null===(a=t[0])||void 0===a?void 0:a.call(t,x.finalStats));var g=d.fixed||0,y=C.a.getTalentFieldValue(d,"unit",x.finalStats);if(h&&b&&"number"===typeof p){var N,S,k,K,B,w,I,T,_,V,E=d.value?d.value:null===(N=(S=d).formula)||void 0===N||null===(k=N.call(S,b.finalStats))||void 0===k||null===(K=k[0])||void 0===K?void 0:K.call(k,b.finalStats);"function"===typeof E&&(E=parseInt(null===(B=E)||void 0===B||null===(w=B(b.finalStats))||void 0===w||null===(I=w.toFixed)||void 0===I?void 0:I.call(w,g)));var D=p-E;p=Object(c.jsxs)("span",{children:[null!==(T=null===(_=E)||void 0===_?void 0:_.toFixed(g))&&void 0!==T?T:E,D?Object(c.jsxs)("span",{className:D>0?"text-success":"text-danger",children:[" (",D>0?"+":"",(null===D||void 0===D||null===(V=D.toFixed)||void 0===V?void 0:V.call(D,g))||D,")"]}):""]})}return Object(c.jsx)(ee.a.Item,{variant:o%2?"customdark":"customdarker",className:"p-2",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:[Object(c.jsx)("b",{children:O}),v]}),Object(c.jsxs)("span",{className:"float-right text-right text-".concat(m),children:[null!==(n=null===(s=p)||void 0===s||null===(j=s.toFixed)||void 0===j?void 0:j.call(s,g))&&void 0!==n?n:p,y]})]})})}var oe=a(156),be=Object(r.createContext)(),ue=j.a.forwardRef((function(e,t){var a=e.children,n=e.style,s=e.className,i=e["aria-labelledby"];return Object(c.jsx)("div",{ref:t,style:{style:n,minWidth:"25rem"},className:s,"aria-labelledby":i,children:Object(c.jsx)(g.a,{children:j.a.Children.toArray(a).map((function(e,t){return Object(c.jsx)(v.a,{xs:6,children:e},t)}))})})})),he=function(e){var t;return{characterKey:null!==e&&void 0!==e?e:"",levelKey:"L1",hitMode:"hit",reactionMode:null,equippedArtifacts:{},artifactConditionals:[],baseStatOverrides:{},weapon:{key:null!==(t=Object.keys(K.a.getWeaponsOfType(C.a.getWeaponTypeKey(e)))[0])&&void 0!==t?t:"",levelKey:S.d[0],refineIndex:0,overrideMainVal:0,overrideSubVal:0,conditionalNum:0},talentLevelKeys:{auto:0,skill:0,burst:0},autoInfused:!1,talentConditionals:[],constellation:0}};function xe(e,t){switch(t.type){case"overwrite":return Object(s.a)(Object(s.a)({},e),t.character);case"fromDB":return Object(s.a)(Object(s.a)({},e),B.a.get(e.characterKey,{}));case"statOverride":var a=t.statKey,c=t.value,n=e.baseStatOverrides;return C.a.getBaseStatValue(e,a)===c?delete n[a]:n[a]=c,Object(s.a)(Object(s.a)({},e),{},{baseStatOverrides:n})}return Object(s.a)(Object(s.a)({},e),t)}function Oe(e){var t,a=e.characterKey,j=e.character,S=e.setCharacterKey,w=e.footer,I=e.newBuild,T=e.editable,_=e.onClose,V=e.tabName,E=Object(r.useReducer)(xe,he(a)),D=Object(n.a)(E,2),F=D[0],W=D[1],z=Object(r.useState)(!1),q=Object(n.a)(z,2),L=q[0],M=q[1],U=Object(r.useRef)(!0),P=Object(r.useState)({}),R=Object(n.a)(P,2),H=R[0],G=R[1],X=Object(r.useCallback)((function(){return G({})}),[]);Object(r.useEffect)((function(){if(a){var e=Object(s.a)(Object(s.a)({},he(a)),B.a.get(a,{}));W({type:"overwrite",character:e})}}),[a]),Object(r.useEffect)((function(){if(j){var e=Object(s.a)(Object(s.a)({},he(j.characterKey)),j);W({type:"overwrite",character:e})}}),[j]),Object(r.useEffect)((function(){Promise.all([C.a.getCharacterDataImport(),K.a.getWeaponDataImport(),y.a.getDataImport()]).then(X)}),[X]),Object(r.useEffect)((function(){U.current?U.current=!1:T&&B.a.update(F)}),[F,T]);var Q=null!==(t=null===j||void 0===j?void 0:j.characterKey)&&void 0!==t?t:F.characterKey,Y=Object(r.useCallback)((function(e){var t=he(e),a=B.a.get(e);a&&(t=Object(s.a)(Object(s.a)({},t),a)),W({type:"overwrite",character:t}),e!==Q&&(null===S||void 0===S||S(e))}),[Q,W,S]),Z=Object(r.useMemo)((function(){var e=I&&Object(k.e)(I);return(null===e||void 0===e?void 0:e.finalStats)&&(e.finalStats.hitMode=F.hitMode,e.finalStats.reactionMode=F.reactionMode),e}),[I,F.hitMode,F.reactionMode]),$=F.levelKey,ee=F.artifacts,te=Object(r.useMemo)((function(){return H&&C.a.calculateBuild(F)}),[F,H]),ce=Q?Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{src:C.a.getThumb(Q),className:"thumb-small my-n1 ml-n2",roundedCircle:!0}),Object(c.jsxs)("h6",{className:"d-inline",children:[" ",C.a.getName(Q)," "]})]}):Object(c.jsx)("span",{children:"Select a Character"}),ne={character:F,newBuild:Z,equippedBuild:!Z||L?te:void 0,editable:T,characterDispatch:W,compareAgainstEquipped:L};return ee&&(ne.artifacts=ee),Object(c.jsxs)(f.a,{bg:"darkcontent",text:"lightfont",children:[Object(c.jsx)(f.a.Header,{children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{xs:"auto",className:"mr-auto",children:T?Object(c.jsxs)(o.a,{children:[Object(c.jsxs)(b.a,{as:o.a,children:[Object(c.jsx)(p.a,{as:m.a,children:ce}),Object(c.jsx)(b.a.Menu,{as:ue,children:C.a.getAllCharacterKeys().map((function(e){return Object(c.jsx)(b.a.Item,{onClick:function(){return Y(e)},children:Object(c.jsxs)("span",{children:[Object(c.jsx)(d.a,{src:C.a.getThumb(e),className:"thumb-small p-0 m-n1 grad-".concat(C.a.getStar(e),"star"),thumbnail:!0}),Object(c.jsxs)("h6",{className:"d-inline ml-2",children:[C.a.getName(e)," "]})]})},e)}))})]}),Object(c.jsxs)(u.a,{as:o.a,disabled:!Q,title:Object(c.jsxs)("h6",{className:"d-inline",children:["Stats Template: ",C.a.getlevelTemplateName($)," "]}),children:[Object(c.jsx)(b.a.ItemText,{children:Object(c.jsx)("span",{children:"Select Base Stat Template"})}),C.a.getlevelKeys().map((function(e){return Object(c.jsx)(b.a.Item,{onClick:function(){return W({levelKey:e})},children:Object(c.jsxs)("h6",{children:[C.a.getlevelTemplateName(e)," "]})},e)}))]})]}):Object(c.jsxs)("span",{children:[ce," ",C.a.getLevelString(F)]})}),Z?Object(c.jsx)(v.a,{xs:"auto",children:Object(c.jsxs)(o.a,{children:[Object(c.jsx)(m.a,{variant:L?"primary":"success",disabled:!L,onClick:function(){return M(!1)},children:Object(c.jsx)("small",{children:"Show New artifact Stats"})}),Object(c.jsx)(m.a,{variant:L?"success":"primary",disabled:L,onClick:function(){return M(!0)},children:Object(c.jsx)("small",{children:"Compare against equipped artifact"})})]})}):null,Boolean(_)&&Object(c.jsx)(v.a,{xs:"auto",children:Object(c.jsx)(m.a,{variant:"danger",onClick:_,children:Object(c.jsx)(l.a,{icon:i.B})})})]})}),Boolean(Q)&&Object(c.jsx)(f.a.Body,{children:Object(c.jsx)(be.Provider,{value:L,children:Object(c.jsxs)(h.a.Container,{defaultActiveKey:V||(Z?"newartifacts":"character"),mountOnEnter:!0,unmountOnExit:!0,children:[Object(c.jsxs)(x.a,{variant:"pills",className:"mb-2 mx-0",fill:!0,children:[Object(c.jsx)(x.a.Item,{children:Object(c.jsx)(x.a.Link,{eventKey:"character",children:Object(c.jsx)("h5",{className:"mb-0",children:"Character"})})}),Z?Object(c.jsx)(x.a.Item,{children:Object(c.jsx)(x.a.Link,{eventKey:"newartifacts",children:Object(c.jsx)("h5",{className:"mb-0",children:"New Artifacts"})})}):null,Object(c.jsx)(x.a.Item,{children:Object(c.jsx)(x.a.Link,{eventKey:"artifacts",children:Object(c.jsx)("h5",{className:"mb-0",children:Z?"Current Artifacts":"Artifacts"})})}),Object(c.jsx)(x.a.Item,{children:C.a.hasTalentPage(Q)?Object(c.jsx)(x.a.Link,{eventKey:"talent",children:Object(c.jsx)("h5",{className:"mb-0",children:"Talents"})}):Object(c.jsx)(N.a,{children:Object(c.jsxs)(x.a.Link,{eventKey:"talent",disabled:!0,children:[Object(c.jsx)("h5",{className:"mb-0",children:"Talents"})," ",Object(c.jsx)(O.a,{variant:"warning",children:"WIP"})]})})})]}),C.a.hasTalentPage(Q)&&Object(c.jsx)(oe.c,Object(s.a)(Object(s.a)({},{character:F,characterDispatch:W,newBuild:Z,equippedBuild:te}),{},{className:"mb-2"})),Object(c.jsxs)(h.a.Content,{children:[Object(c.jsx)(h.a.Pane,{eventKey:"character",children:Object(c.jsx)(J,Object(s.a)({},ne))}),Object(c.jsx)(h.a.Pane,{eventKey:"artifacts",children:Object(c.jsx)(A,Object(s.a)({},Object(s.a)(Object(s.a)({},ne),{},{newBuild:void 0,equippedBuild:te})))}),Z?Object(c.jsx)(h.a.Pane,{eventKey:"newartifacts",children:Object(c.jsx)(A,Object(s.a)({},ne))}):null,Object(c.jsx)(h.a.Pane,{eventKey:"talent",children:Object(c.jsx)(ae,Object(s.a)({},ne))})]})]})})}),w&&Object(c.jsx)(f.a.Footer,{children:w})]})}}}]);
//# sourceMappingURL=2.2b2d8402.chunk.js.map