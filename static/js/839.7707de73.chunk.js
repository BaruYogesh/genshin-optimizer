"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[839],{8375:function(e,n,t){t.d(n,{Z:function(){return C}});var r,i=t(1413),a=t(93433),s=t(29439),l=t(30168),c=t(45987),o=t(49670),u=t(23786),d=t(57064),x=t(49900),h=t(94721),f=t(20890),p=t(72791),m=t(22020),v=t(76899),Z=t(31148),j=t(42320),g=t(33890),y=t(55942),b=t(10157),k=t(80184),w=["selectedSetKey","onChange","artifactSetsByRarity","hasUnselect","titleTransKey"];function C(e){var n,t,C=e.selectedSetKey,S=void 0===C?"":C,P=e.onChange,D=e.artifactSetsByRarity,_=e.hasUnselect,O=void 0!==_&&_,E=e.titleTransKey,A=(0,c.Z)(e,w),R=(0,m.$)("artifact").t,K=(0,j.Z)(Z.y.getAll,[]),M=null===K||void 0===K?void 0:K[S],T=(0,p.useMemo)((function(){return D||(K?Z.y.setKeysByRarities(K):{})}),[K,D]);return(0,k.jsxs)(g.Z,(0,i.Z)((0,i.Z)({},A),{},{title:null!==(n=null!==(t=null===M||void 0===M?void 0:M.name)&&void 0!==t?t:E&&R(E))&&void 0!==n?n:R(r||(r=(0,l.Z)(["editor.set.artifactSet"]))),startIcon:(null===M||void 0===M?void 0:M.defIconSrc)&&(0,k.jsx)(y.Z,{src:null===M||void 0===M?void 0:M.defIconSrc}),color:M?"success":"primary",children:[O&&(0,k.jsxs)(u.Z,{onClick:function(){return P("")},selected:""===S,disabled:""===S,children:[(0,k.jsx)(d.Z,{children:(0,k.jsx)(o.Z,{})}),(0,k.jsx)(x.Z,{children:(0,k.jsx)(v.c,{t:R,i18nKey:"ui:unselect",children:"Unselect"})})]}),!!Object.keys(T).length&&Object.entries(T).reverse().flatMap((function(e,n){var t=(0,s.Z)(e,2),r=t[0],i=t[1];return[].concat((0,a.Z)((n>0||O)&&i.length?[(0,k.jsx)(h.Z,{},"".concat(r,"divi"))]:[]),(0,a.Z)(i.length?[(0,k.jsx)(u.Z,{children:(0,k.jsx)(f.Z,{children:(0,k.jsxs)(v.c,{t:R,i18nKey:"editor.set.maxRarity",children:["Max Rarity ",(0,k.jsx)(b.t,{stars:parseInt(r)})]})})},"".concat(r,"header"))]:[]),(0,a.Z)(i.map((function(e){var n,t;return(0,k.jsxs)(u.Z,{onClick:function(){return P(e)},selected:S===e,disabled:S===e,children:[(0,k.jsx)(d.Z,{children:(0,k.jsx)(y.Z,{src:null===K||void 0===K||null===(n=K[e])||void 0===n?void 0:n.defIconSrc,sx:{fontSize:"1.5em"}})}),(0,k.jsx)(x.Z,{children:null===K||void 0===K||null===(t=K[e])||void 0===t?void 0:t.name})]},e)}))))}))]}))}},37503:function(e,n,t){t.d(n,{Z:function(){return D}});var r=t(68870),i=t(39504),a=t(9585),s=t(94721),l=t(15021),c=t(72791),o=t(2693),u=t(60393),d=t(53174),x=t(54483),h=t(20890),f=t(78661),p=t(96106),m=t(3992),v=t(14763),Z=t(29439),j=t(72247),g=t(9912),y=t(24518),b=t(23786),k=t(33890),w=t(25617),C=t(80184);function S(e){var n=e.conditional,t=e.conditionalValue,r=e.disabled,i=void 0!==r&&r,a=(0,c.useContext)(o.R),l=a.character,d=a.characterDispatch,x=(0,c.useCallback)((function(e){var t=(0,u.I8)(l.conditional);e?(0,u.SR)(t,n.path,e):(0,u.uH)(t,n.path),d({conditional:t})}),[n,l,d]);if(1===Object.keys(n.states).length){var h=(0,Z.Z)(Object.entries(n.states)[0],2),f=h[0],p=h[1],m=p.name&&(0,C.jsx)(w.Z,{color:"success",children:p.name});return(0,C.jsxs)(y.Z,{fullWidth:!0,size:"small",onClick:function(){return x(t?void 0:f)},disabled:i,startIcon:t?(0,C.jsx)(j.Z,{}):(0,C.jsx)(g.Z,{}),children:[n.name," ",m]})}var v=t?n.states[t]:void 0,S=(null===v||void 0===v?void 0:v.name)&&(0,C.jsx)(w.Z,{color:v?"success":"secondary",children:v?v.name:"Not Active"});return(0,C.jsxs)(k.Z,{fullWidth:!0,size:"small",title:(0,C.jsxs)("span",{children:[n.name," ",S]}),disabled:i,children:[(0,C.jsx)(b.Z,{onClick:function(){return x()},selected:!v,disabled:!v,children:(0,C.jsx)("span",{children:"Not Active"})}),(0,C.jsx)(s.Z,{}),Object.entries(n.states).map((function(e){var n=(0,Z.Z)(e,2),r=n[0],i=n[1];return(0,C.jsx)(b.Z,{onClick:function(){return x(r)},selected:t===r,disabled:t===r,children:i.name},r)}))]})}function P(e){var n,t,r=e.conditional,Z=e.hideHeader,j=void 0!==Z&&Z,g=e.hideDesc,y=void 0!==g&&g,b=e.fieldContext,k=(0,c.useContext)(o.R).data;if(!(!r.canShow||!!(b?k.get((0,f.aT)(r.canShow,{target:b.data.data[0]})).value:k.get(r.canShow).value)))return null;var w=k.get(r.value).value,P=!y&&(0,u.mY)(r.description,k),D=null!==(n=r.header)&&void 0!==n?n:{},_=D.icon,O=D.title,E=D.action;_=(0,u.mY)(_,k);var A=w&&(null===(t=r.states[w])||void 0===t?void 0:t.fields),R=y?O:O&&(0,C.jsx)(p.Z,{placement:"top",title:(0,C.jsx)(h.Z,{children:P}),children:(0,C.jsxs)("span",{children:[O," ",(0,C.jsx)(x.G,{icon:d.sqG})]})});return(0,C.jsxs)(m.Z,{children:[!j&&r.header&&(0,C.jsx)(a.Z,{avatar:_,title:R,action:E,titleTypographyProps:{variant:"subtitle2"}}),!j&&r.header&&(0,C.jsx)(s.Z,{}),!!r.name&&(0,C.jsx)(i.Z,{children:(0,C.jsx)(S,{conditional:r,conditionalValue:w})}),A&&(0,C.jsx)(v.lD,{sx:{m:0},children:A.map((function(e,n){return(0,C.jsx)(v.ZP,{field:e,fieldContext:b,component:l.ZP},n)}))})]})}function D(e){var n=e.sections,t=e.teamBuffOnly,i=e.hideDesc,a=void 0!==i&&i,s=(0,c.useContext)(o.R).data;if(!n.length)return null;var l=n.map((function(e,n){var r;return e.canShow&&!e.canShow(s)?null:!t||e.teamBuff||null!==(r=e.conditional)&&void 0!==r&&r.teamBuff?t&&e.conditional&&e.conditional.teamBuff&&e.conditional.canShow&&!s.get(e.conditional.canShow).value?null:(0,C.jsx)(_,{section:e,teamBuffOnly:t,hideDesc:a},n):null})).filter((function(e){return e}));return l.length?(0,C.jsx)(r.Z,{display:"flex",flexDirection:"column",gap:1,children:l}):null}function _(e){var n,t,r,d=e.section,x=e.teamBuffOnly,h=e.hideDesc,f=void 0!==h&&h,p=(0,c.useContext)(o.R).data,Z=(0,u.mY)(d.text,p),j=(0,u.mY)(d.fieldsDescription,p),g=null!==(n=d.fields)&&void 0!==n?n:[],y=null!==(t=d.fieldsHeader)&&void 0!==t?t:{},b=y.icon,k=y.title,w=y.action;return b=(0,u.mY)(b,p),(0,C.jsxs)(C.Fragment,{children:[!x&&Z&&(0,C.jsx)("div",{children:Z}),(!x||d.teamBuff)&&(0,C.jsxs)(m.Z,{children:[x&&Z&&(0,C.jsx)(i.Z,{children:Z}),d.fieldsHeader&&(0,C.jsx)(a.Z,{avatar:b,title:k,action:w,titleTypographyProps:{variant:"subtitle2"}}),d.fieldsHeader&&(0,C.jsx)(s.Z,{}),x&&j&&(0,C.jsx)(i.Z,{children:j}),g.length>0&&(0,C.jsx)(v.lD,{children:null===g||void 0===g||null===(r=g.map)||void 0===r?void 0:r.call(g,(function(e,n){return(0,C.jsx)(v.ZP,{field:e,component:l.ZP},n)}))})]}),!!d.conditional&&(!x||d.conditional.teamBuff)&&(0,C.jsx)(P,{conditional:d.conditional,hideDesc:f})]})}},91732:function(e,n,t){var r=t(1413),i=t(45987),a=t(66934),s=t(13400),l=t(80184),c=["expand"],o=(0,a.ZP)((function(e){e.expand;var n=(0,i.Z)(e,c);return(0,l.jsx)(s.Z,(0,r.Z)({},n))}))((function(e){var n=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest})}}));n.Z=o},92443:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(1413),i=t(45987),a=t(66934),s=t(24518),l=t(80184),c=["children","disabled"],o=(0,a.ZP)(s.Z)((function(e){var n=e.theme;return{"&.Mui-disabled":{backgroundColor:n.palette.primary.dark,color:n.palette.text.secondary}}}));function u(e){var n=e.children,t=(e.disabled,(0,i.Z)(e,c));return(0,l.jsx)(o,(0,r.Z)((0,r.Z)({},t),{},{disabled:!0,children:n}))}},21206:function(e,n,t){t.d(n,{WC:function(){return Z},KX:function(){return g},SJ:function(){return j},r:function(){return P},Zu:function(){return y},xm:function(){return k},L1:function(){return S},_d:function(){return p},q8:function(){return C},qp:function(){return b},s_:function(){return w}});var r=t(4942),i=t(1413),a=t(93433),s=t(26138),l=t(87234),c=t(50609),o=t(78661),u=t(50765),d=t(60393),x=JSON.parse('{"GROW_CURVE_HP_S4":{"1":1,"2":1.083,"3":1.165,"4":1.248,"5":1.33,"6":1.413,"7":1.495,"8":1.578,"9":1.661,"10":1.743,"11":1.826,"12":1.908,"13":1.991,"14":2.073,"15":2.156,"16":2.239,"17":2.321,"18":2.404,"19":2.486,"20":2.569,"21":2.651,"22":2.734,"23":2.817,"24":2.899,"25":2.982,"26":3.064,"27":3.147,"28":3.229,"29":3.312,"30":3.394,"31":3.477,"32":3.56,"33":3.642,"34":3.725,"35":3.807,"36":3.89,"37":3.972,"38":4.055,"39":4.138,"40":4.22,"41":4.303,"42":4.385,"43":4.468,"44":4.55,"45":4.633,"46":4.716,"47":4.798,"48":4.881,"49":4.963,"50":5.046,"51":5.128,"52":5.211,"53":5.294,"54":5.376,"55":5.459,"56":5.541,"57":5.624,"58":5.706,"59":5.789,"60":5.872,"61":5.954,"62":6.037,"63":6.119,"64":6.202,"65":6.284,"66":6.367,"67":6.45,"68":6.532,"69":6.615,"70":6.697,"71":6.78,"72":6.862,"73":6.945,"74":7.028,"75":7.11,"76":7.193,"77":7.275,"78":7.358,"79":7.44,"80":7.523,"81":7.606,"82":7.688,"83":7.771,"84":7.853,"85":7.936,"86":8.018,"87":8.101,"88":8.183,"89":8.266,"90":8.349,"91":8.431,"92":8.514,"93":8.596,"94":8.679,"95":8.761,"96":8.844,"97":8.927,"98":9.009,"99":9.092,"100":9.174},"GROW_CURVE_ATTACK_S4":{"1":1,"2":1.083,"3":1.165,"4":1.248,"5":1.33,"6":1.413,"7":1.495,"8":1.578,"9":1.661,"10":1.743,"11":1.826,"12":1.908,"13":1.991,"14":2.073,"15":2.156,"16":2.239,"17":2.321,"18":2.404,"19":2.486,"20":2.569,"21":2.651,"22":2.734,"23":2.817,"24":2.899,"25":2.982,"26":3.064,"27":3.147,"28":3.229,"29":3.312,"30":3.394,"31":3.477,"32":3.56,"33":3.642,"34":3.725,"35":3.807,"36":3.89,"37":3.972,"38":4.055,"39":4.138,"40":4.22,"41":4.303,"42":4.385,"43":4.468,"44":4.55,"45":4.633,"46":4.716,"47":4.798,"48":4.881,"49":4.963,"50":5.046,"51":5.128,"52":5.211,"53":5.294,"54":5.376,"55":5.459,"56":5.541,"57":5.624,"58":5.706,"59":5.789,"60":5.872,"61":5.954,"62":6.037,"63":6.119,"64":6.202,"65":6.284,"66":6.367,"67":6.45,"68":6.532,"69":6.615,"70":6.697,"71":6.78,"72":6.862,"73":6.945,"74":7.028,"75":7.11,"76":7.193,"77":7.275,"78":7.358,"79":7.44,"80":7.523,"81":7.606,"82":7.688,"83":7.771,"84":7.853,"85":7.936,"86":8.018,"87":8.101,"88":8.183,"89":8.266,"90":8.349,"91":8.431,"92":8.514,"93":8.596,"94":8.679,"95":8.761,"96":8.844,"97":8.927,"98":9.009,"99":9.092,"100":9.174},"GROW_CURVE_HP_S5":{"1":1,"2":1.083,"3":1.166,"4":1.25,"5":1.333,"6":1.417,"7":1.5,"8":1.584,"9":1.668,"10":1.751,"11":1.835,"12":1.919,"13":2.003,"14":2.088,"15":2.172,"16":2.256,"17":2.341,"18":2.425,"19":2.51,"20":2.594,"21":2.679,"22":2.764,"23":2.849,"24":2.934,"25":3.019,"26":3.105,"27":3.19,"28":3.275,"29":3.361,"30":3.446,"31":3.532,"32":3.618,"33":3.704,"34":3.789,"35":3.875,"36":3.962,"37":4.048,"38":4.134,"39":4.22,"40":4.307,"41":4.393,"42":4.48,"43":4.567,"44":4.653,"45":4.74,"46":4.827,"47":4.914,"48":5.001,"49":5.089,"50":5.176,"51":5.263,"52":5.351,"53":5.438,"54":5.526,"55":5.614,"56":5.702,"57":5.79,"58":5.878,"59":5.966,"60":6.054,"61":6.142,"62":6.23,"63":6.319,"64":6.407,"65":6.496,"66":6.585,"67":6.673,"68":6.762,"69":6.851,"70":6.94,"71":7.029,"72":7.119,"73":7.208,"74":7.297,"75":7.387,"76":7.476,"77":7.566,"78":7.656,"79":7.746,"80":7.836,"81":7.926,"82":8.016,"83":8.106,"84":8.196,"85":8.286,"86":8.377,"87":8.467,"88":8.558,"89":8.649,"90":8.739,"91":8.83,"92":8.921,"93":9.012,"94":9.103,"95":9.195,"96":9.286,"97":9.377,"98":9.469,"99":9.56,"100":9.652},"GROW_CURVE_ATTACK_S5":{"1":1,"2":1.083,"3":1.166,"4":1.25,"5":1.333,"6":1.417,"7":1.5,"8":1.584,"9":1.668,"10":1.751,"11":1.835,"12":1.919,"13":2.003,"14":2.088,"15":2.172,"16":2.256,"17":2.341,"18":2.425,"19":2.51,"20":2.594,"21":2.679,"22":2.764,"23":2.849,"24":2.934,"25":3.019,"26":3.105,"27":3.19,"28":3.275,"29":3.361,"30":3.446,"31":3.532,"32":3.618,"33":3.704,"34":3.789,"35":3.875,"36":3.962,"37":4.048,"38":4.134,"39":4.22,"40":4.307,"41":4.393,"42":4.48,"43":4.567,"44":4.653,"45":4.74,"46":4.827,"47":4.914,"48":5.001,"49":5.089,"50":5.176,"51":5.263,"52":5.351,"53":5.438,"54":5.526,"55":5.614,"56":5.702,"57":5.79,"58":5.878,"59":5.966,"60":6.054,"61":6.142,"62":6.23,"63":6.319,"64":6.407,"65":6.496,"66":6.585,"67":6.673,"68":6.762,"69":6.851,"70":6.94,"71":7.029,"72":7.119,"73":7.208,"74":7.297,"75":7.387,"76":7.476,"77":7.566,"78":7.656,"79":7.746,"80":7.836,"81":7.926,"82":8.016,"83":8.106,"84":8.196,"85":8.286,"86":8.377,"87":8.467,"88":8.558,"89":8.649,"90":8.739,"91":8.83,"92":8.921,"93":9.012,"94":9.103,"95":9.195,"96":9.286,"97":9.377,"98":9.469,"99":9.56,"100":9.652}}'),h=(0,d.xh)(x,(function(e){return[0].concat((0,a.Z)(Object.values(e)))})),f=(0,d.O)(["hp","atk","def","eleMas","enerRech_","critRate_","critDMG_","heal_"],(function(e){return s.qH.total[e]}));f.critRate_=s.qH.total.cappedCritRate;var p=(0,o.Qq)(s.qH.infusion.nonOverridableSelf,s.qH.infusion.team,s.qH.infusion.overridableSelf),m=(0,o.Qq)((0,o.P5)(s.qH.hit.move,{skill:s.qH.charEle,burst:s.qH.charEle},void 0),(0,o.P5)(s.qH.weaponType,{sword:p,claymore:p,polearm:p,catalyst:s.qH.charEle},void 0),"physical");function v(e){switch(e){case"normal":case"charged":case"plunging":return"auto";case"skill":return"skill";case"burst":return"burst"}}function Z(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,o.aT)(s.qH.hit.dmg,(0,l.b3)([{hit:{base:e,move:(0,o.a9)(n),ele:null!==r&&void 0!==r&&null!==(t=r.hit)&&void 0!==t&&t.ele?void 0:m}},r]))}function j(e,n){var t=(0,o.WV)(e,(0,o.Sm)(o.bf,s.qH.total.shield_));return n?(0,o.aT)(t,n):t}function g(e,n){var t=(0,o.WV)(e,(0,o.Sm)(o.bf,s.qH.total.heal_,s.qH.total.incHeal_));return n?(0,o.aT)(t,n):t}function y(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=v(t);return Z((0,o.WV)((0,o.lp)(s.qH.total["".concat(i,"Index")],n,{key:"_"}),s.qH.total[e]),t,r)}function b(e,n,t,r){return j((0,o.Sm)((0,o.WV)(n,s.qH.total[e]),t),r)}function k(e,n,t,r){return g((0,o.Sm)((0,o.WV)(n,s.qH.total[e]),t),r)}function w(e,n,t,r,i){var a=v(r),l=s.qH.total["".concat(a,"Index")];return j((0,o.Sm)((0,o.WV)((0,o.lp)(l,n,{key:"_"}),s.qH.total[e]),(0,o.lp)(l,t)),i)}function C(e,n){return(0,o.ce)((0,o.WV)((0,o.aQ)("geo"===e?1.5:2.5),n),{variant:e})}function S(e,n,t,r,i){var a=v(r),l=s.qH.total["".concat(a,"Index")];return g((0,o.Sm)((0,o.WV)((0,o.lp)(l,n,{key:"_"}),s.qH.total[e]),(0,o.lp)(l,t)),i)}function P(e,n,t,x,p){var m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};function v(e,n){return(0,o.WV)(e,(0,o.lp)(s.qH.lvl,h[n]))}p.basic=(0,i.Z)({},f);var Z,j={charKey:(0,o.a9)(e),base:{},weaponType:(0,o.a9)(x.weaponTypeKey),premod:{},display:p};n&&(j.charEle=(0,o.a9)(n),j.teamBuff={tally:(0,r.Z)({},n,(0,o.a9)(1))},j.display.basic["".concat(n,"_dmg_")]=s.qH.total["".concat(n,"_dmg_")],j.display.reaction=c.gw[n]),t&&(0,d.SR)(j,["teamBuff","tally",t],(0,o.a9)(1)),"catalyst"!==x.weaponTypeKey&&(j.display.basic||(j.display.basic={}),j.display.basic.physical_dmg_=s.qH.total.physical_dmg_);for(var g=function(){var e=b[y],n=[];if(x.curves[e]&&n.push(v(x.base[e],x.curves[e])),x.ascensions.some((function(n){return n.props[e]}))&&n.push((0,o.lp)(s.qH.asc,x.ascensions.map((function(n){var t;return null!==(t=n.props[e])&&void 0!==t?t:NaN})))),!n.length)return"continue";var t=(0,o.ce)(1===n.length?n[0]:o.Sm.apply(void 0,n),{key:e,prefix:"char",asConst:!0});if(e.endsWith("_dmg_")&&(t.info.variant=e.slice(0,-5)),"atk"===e||"def"===e||"hp"===e)j.base[e]=t;else{if(Z)throw new Error("Duplicated Char Special");Z=!0,j.special=t,j.premod[e]=s.qH.special}},y=0,b=[].concat((0,a.Z)(u.r),["def"]);y<b.length;y++)g();return(0,l.b3)([j,(0,l.d1)(m)])}},50609:function(e,n,t){t.d(n,{gw:function(){return m}});var r=t(29439),i=t(1413),a=t(74954),s=t(24351),l=t(60393),c=t(26138),o=t(78661),u=(0,o.lp)(c.qH.lvl,[-1,91.1791,98.707664,106.23622,113.76477,121.29332,128.82188,136.35042,143.87898,151.40752,158.93608,169.99149,181.07625,192.19037,204.0482,215.939,227.86275,247.68594,267.5421,287.4312,303.82642,320.22522,336.62762,352.31927,368.01093,383.70255,394.43237,405.18146,415.94992,426.73764,437.5447,450.6,463.7003,476.84558,491.1275,502.55457,514.0121,531.4096,549.9796,568.5849,584.9965,605.67035,626.3862,646.0523,665.7556,685.4961,700.8394,723.3331,745.8653,768.4357,786.79193,809.5388,832.32904,855.16266,878.0396,899.4848,919.362,946.0396,974.7642,1003.5786,1030.077,1056.635,1085.2463,1113.9244,1149.2587,1178.0648,1200.2238,1227.6603,1257.243,1284.9174,1314.7529,1342.6652,1372.7524,1396.321,1427.3124,1458.3745,1482.3358,1511.9109,1541.5493,1569.1537,1596.8143,1622.4197,1648.074,1666.3761,1684.6782,1702.9803,1726.1047,1754.6715,1785.8666,1817.1375,1851.0603]),d=(0,o.WV)(40/9,(0,o.F9)(c.qH.total.eleMas,1400)),x=(0,o.ce)((0,o.WV)((0,o.Sm)(o.bf,d),u),{key:"crystallize",variant:"geo"}),h=(0,o.lp)(c.qH.lvl,[-1,17.165606,18.535048,19.904854,21.274902,22.6454,24.649612,26.640642,28.868587,31.36768,34.143345,37.201,40.66,44.446667,48.56352,53.74848,59.081898,64.420044,69.72446,75.12314,80.58478,86.11203,91.70374,97.24463,102.812645,108.40956,113.20169,118.102905,122.97932,129.72733,136.29291,142.67085,149.02902,155.41699,161.8255,169.10631,176.51808,184.07274,191.70952,199.55692,207.38205,215.3989,224.16566,233.50217,243.35057,256.06308,268.5435,281.52606,295.01364,309.0672,323.6016,336.75754,350.5303,364.4827,378.61917,398.6004,416.39825,434.387,452.95105,472.60623,492.8849,513.56854,539.1032,565.51056,592.53876,624.4434,651.47015,679.4968,707.79407,736.67145,765.64026,794.7734,824.67737,851.1578,877.74207,914.2291,946.74677,979.4114,1011.223,1044.7917,1077.4437,1109.9976,1142.9766,1176.3695,1210.1844,1253.8357,1288.9528,1325.4841,1363.4569,1405.0974,1446.8535]),f=(0,o.WV)(16,(0,o.F9)(c.qH.total.eleMas,2e3)),p=(0,i.Z)((0,i.Z)({},(0,l.O)(["overloaded","electrocharged","superconduct","shattered"],(function(e){var n=a.Ne[e],t=n.multi,i=(0,r.Z)(n.variants,1)[0];return(0,o.ce)((0,o.WV)((0,o.ce)((0,o.WV)(t,h),{asConst:true}),(0,o.Sm)(o.bf,f,c.qH.total["".concat(e,"_dmg_")]),c.qH.enemy["".concat(i,"_resMulti")]),{key:"".concat(e,"_hit"),variant:e})}))),{},{swirl:(0,l.O)(a.Ne.swirl.variants,(function(e){return(0,o.ce)((0,o.WV)((0,o.ce)((0,o.WV)(a.Ne.swirl.multi,h),{asConst:true}),(0,o.Sm)(o.bf,f,c.qH.total.swirl_dmg_),c.qH.enemy["".concat(e,"_resMulti")]),{key:"".concat(e,"_swirl_hit"),variant:e})}))}),m={anemo:{electroSwirl:p.swirl.electro,pyroSwirl:p.swirl.pyro,cryoSwirl:p.swirl.cryo,hydroSwirl:p.swirl.hydro,shattered:p.shattered},geo:(0,i.Z)((0,i.Z)({crystallize:x},Object.fromEntries(s.gs.map((function(e){return["".concat(e,"Crystallize"),(0,o.ce)((0,o.WV)((0,o.aQ)(2.5),x),{key:"".concat(e,"_crystallize"),variant:e})]})))),{},{shattered:p.shattered}),electro:{overloaded:p.overloaded,electrocharged:p.electrocharged,superconduct:p.superconduct,shattered:p.shattered},hydro:{electrocharged:p.electrocharged,shattered:p.shattered},pyro:{overloaded:p.overloaded,shattered:p.shattered},cryo:{superconduct:p.superconduct,shattered:p.shattered}}},51839:function(e,n,t){t.r(n),t.d(n,{default:function(){return _r}});var r=t(29439),i=t(1413),a=t(45987),s=t(63833),l=t(45781),c=t(19701),o=t(35893),u=t(66630),d=t(37355),x=t(47047),h=t(39504),f=t(61889),p=t(90388),m=t(57621),v=t(20890),Z=t(25228),j=t(43896),g=t(94721),y=t(24518),b=t(2199),k=t(23786),w=t(68870),C=t(56125),S=t(9585),P=t(89673),D=t(55818),_=t(3721),O=t(72791),E=t(3992),A=t(71310),R=t(3082),K=t(2380),M=t(68198),T=t(91702),I=t(10600),q=t(33890),H=t(53174),L=t(54483),V=t(81918),B=t(49670),N=t(66934),W=t(92443),z=t(80184),G=["name","children","value","placeholder","defaultValue","onValueChange","percent","disabled","onReset"],F=(0,N.ZP)(b.Z)({display:"flex"});function U(e){var n=e.name,t=e.children,r=e.value,s=e.placeholder,l=e.defaultValue,c=void 0===l?0:l,o=e.onValueChange,u=e.percent,d=void 0!==u&&u,x=e.disabled,h=void 0!==x&&x,f=e.onReset,p=(0,a.Z)(e,G);return(0,z.jsxs)(F,(0,i.Z)((0,i.Z)({},p),{},{children:[t,(0,z.jsx)(W.Z,{sx:{whiteSpace:"nowrap"},children:n}),(0,z.jsx)(I.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,z.jsx)(I.ZP,{sx:{px:1},inputProps:{sx:{textAlign:"right"}},float:d,placeholder:s,value:r,onChange:o,disabled:h,endAdornment:d?"%":void 0})}),(0,z.jsx)(y.Z,{onClick:function(){return f?f():o(c)},disabled:h||r===c,children:(0,z.jsx)(B.Z,{})})]}))}var J=t(2693),Y=t(26138),X=t(79406),Q=t(24351),$=t(91732),ee=t(75545);function ne(){var e=(0,O.useContext)(J.R).data,n=(0,O.useState)(!1),t=(0,r.Z)(n,2),i=t[0],a=t[1],s=(0,O.useCallback)((function(){return a(!i)}),[a,i]),l=e.get(Y.ri.enemy.level),c=e.get(Y.ri.enemy.defRed),o=e.get(Y.ri.enemy.defIgn);return(0,z.jsxs)(A.Z,{children:[(0,z.jsx)(h.Z,{children:(0,z.jsxs)(f.ZP,{container:!0,children:[(0,z.jsx)(f.ZP,{item:!0,flexGrow:1,alignItems:"center",children:(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(V.Z,{size:"small",color:"success",label:(0,z.jsxs)("span",{children:[X.ZP.get(l.info.key)," ",(0,z.jsx)("strong",{children:l.value})]})})}),Q.Kj.map((function(e){return(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(v.Z,{children:(0,z.jsx)(te,{element:e})},e)},e)})),(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsxs)(v.Z,{children:["DEF Reduction ",(0,X.EC)(c.value,c.unit)]})}),(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsxs)(v.Z,{children:["DEF Ignore ",(0,X.EC)(o.value,o.unit)]})})]})}),(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)($.Z,{expand:i,onClick:s,"aria-expanded":i,"aria-label":"show more",size:"small",sx:{p:0},children:(0,z.jsx)(d.Z,{})})})]})}),(0,z.jsx)(C.Z,{in:i,timeout:"auto",unmountOnExit:!0,children:(0,z.jsx)(h.Z,{sx:{pt:0},children:(0,z.jsx)(re,{})})})]})}function te(e){var n=e.element,t=(0,O.useContext)(J.R).data.get(Y.ri.enemy["".concat(n,"_res_")]),r=!isFinite(t.value)?(0,z.jsxs)("span",{children:[ee.h[n]," IMMUNE"]}):(0,z.jsxs)("span",{children:[ee.h[n],"RES ",(0,z.jsx)("strong",{children:(0,X.EC)(t.value,t.unit)})]});return(0,z.jsx)(T.Z,{color:n,children:r})}function re(e){var n,t,r,a=e.bsProps,s=void 0===a?{xs:12,md:6}:a,l=(0,O.useContext)(J.R),c=l.data,o=l.character.enemyOverride,u=l.characterDispatch,d=null!==(n=o.enemyLevel)&&void 0!==n?n:c.get(Y.ri.lvl).value,x=null!==(t=o.enemyDefIgn_)&&void 0!==t?t:0,h=null!==(r=o.enemyDefRed_)&&void 0!==r?r:0;return(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,(0,i.Z)((0,i.Z)({item:!0},s),{},{children:(0,z.jsx)(y.Z,{fullWidth:!0,sx:{height:"100%"},size:"small",component:"a",color:"warning",href:"https://genshin-impact.fandom.com/wiki/Resistance#Base_Enemy_Resistances",target:"_blank",rel:"noreferrer",children:"To get the specific resistance values of enemies, please visit the wiki."})})),(0,z.jsx)(f.ZP,(0,i.Z)((0,i.Z)({item:!0},s),{},{children:(0,z.jsx)(U,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,z.jsx)("b",{children:X.ZP.get("enemyLevel")}),value:d,placeholder:X.ZP.getStr("enemyLevel"),defaultValue:c.get(Y.ri.lvl).value,onValueChange:function(e){return u({type:"enemyOverride",statKey:"enemyLevel",value:e})},onReset:function(){return u({type:"enemyOverride",statKey:"enemyLevel",value:void 0})}})})),Q.Kj.map((function(e){var n="".concat(e,"_enemyRes_"),t=o[n],r=t===Number.MAX_VALUE;return(0,z.jsx)(f.ZP,(0,i.Z)((0,i.Z)({item:!0},s),{},{children:(0,z.jsx)(U,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,z.jsx)(T.Z,{color:e,children:(0,z.jsx)("b",{children:X.ZP.get(n)})}),value:t?r?1/0:t:10,placeholder:r?"Immune ":X.ZP.getStr(n),defaultValue:10,onValueChange:function(e){return u({type:"enemyOverride",statKey:n,value:e})},disabled:r,percent:!0,children:(0,z.jsxs)(y.Z,{color:e,onClick:function(){return u({type:"enemyOverride",statKey:n,value:r?10:Number.MAX_VALUE})},children:[(0,z.jsx)(L.G,{icon:r?H.a3n:H.pL1,className:"fa-fw"})," Immunity"]})})}),e)})),(0,z.jsx)(f.ZP,(0,i.Z)((0,i.Z)({item:!0},s),{},{children:(0,z.jsx)(U,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,z.jsx)("b",{children:X.ZP.get("enemyDefIgn_")}),value:x,placeholder:X.ZP.getStr("enemyDefIgn_"),defaultValue:0,onValueChange:function(e){return u({type:"enemyOverride",statKey:"enemyDefIgn_",value:e})},percent:!0})})),(0,z.jsx)(f.ZP,(0,i.Z)((0,i.Z)({item:!0},s),{},{children:(0,z.jsx)(U,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,z.jsx)("b",{children:X.ZP.get("enemyDefRed_")}),value:h,placeholder:X.ZP.getStr("enemyDefRed_"),defaultValue:0,onValueChange:function(e){return u({type:"enemyOverride",statKey:"enemyDefRed_",value:e})},percent:!0})})),(0,z.jsx)(f.ZP,{item:!0,xs:12,children:(0,z.jsx)("small",{children:"Note: Genshin Impact halves resistance shred values below 0%. For the sake of calculations enter the RAW value and GO will do the rest. (e.g. 10% - 20% = -10%)"})})]})}var ie=t(21206),ae=t(91839),se={"":(0,z.jsx)("span",{children:"No Team Melee Infusion"}),pyro:(0,z.jsxs)("span",{children:[ee.h.pyro," Pyro Team Melee Infusion"]}),cryo:(0,z.jsxs)("span",{children:[ee.h.cryo," Cryo Team Melee Infusion"]})};function le(e){var n=(0,O.useContext)(J.R),t=n.characterSheet,a=n.character.infusionAura,s=n.characterDispatch;return null!==t&&void 0!==t&&t.isMelee()?(0,z.jsx)(q.Z,(0,i.Z)((0,i.Z)({title:se[a],color:a||"secondary"},e),{},{children:Object.entries(se).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,z.jsx)(k.Z,{sx:t?{color:"".concat(t,".main")}:void 0,selected:t===a,disabled:t===a,onClick:function(){return s({infusionAura:t})},children:i},t)}))})):null}function ce(e){var n=(0,O.useContext)(J.R),t=n.data,r=n.character.reactionMode,a=n.characterDispatch,s=t.get(Y.ri.charEle).value,l=t.get(ie._d).value;return["pyro","hydro","cryo"].includes(s)||["pyro","hydro","cryo"].includes(l)?(0,z.jsxs)(ae.Z,(0,i.Z)((0,i.Z)({exclusive:!0,baseColor:"secondary",value:r,onChange:function(e,n){return a({reactionMode:n})}},e),{},{children:[(0,z.jsx)(p.Z,{value:"",children:"No Reactions"}),("pyro"===s||"pyro"===l)&&(0,z.jsx)(p.Z,{value:"pyro_vaporize",children:(0,z.jsxs)(T.Z,{color:"vaporize",children:["Vaporize(Pyro)",ee.Z.hydro,"+",ee.Z.pyro]})}),("pyro"===s||"pyro"===l)&&(0,z.jsx)(p.Z,{value:"pyro_melt",children:(0,z.jsxs)(T.Z,{color:"melt",children:["Melt(Pyro) ",ee.Z.cryo,"+",ee.Z.pyro]})}),("hydro"===s||"hydro"===l)&&(0,z.jsx)(p.Z,{value:"hydro_vaporize",children:(0,z.jsxs)(T.Z,{color:"vaporize",children:["Vaporize(Hydro) ",ee.Z.pyro,"+",ee.Z.hydro]})}),("cryo"===s||"cryo"===l)&&(0,z.jsx)(p.Z,{value:"cryo_melt",children:(0,z.jsxs)(T.Z,{color:"melt",children:["Melt(Cryo) ",ee.Z.pyro,"+",ee.Z.cryo]})})]})):null}function oe(e){var n=(0,O.useContext)(J.R),t=n.character.hitMode,r=n.characterDispatch;return(0,z.jsxs)(ae.Z,(0,i.Z)((0,i.Z)({exclusive:!0,baseColor:"secondary",value:t,onChange:function(e,n){return r({hitMode:n})}},e),{},{children:[(0,z.jsx)(p.Z,{value:"avgHit",children:"Avg. DMG"}),(0,z.jsx)(p.Z,{value:"hit",children:"Non Crit DMG"}),(0,z.jsx)(p.Z,{value:"critHit",children:"Crit Hit DMG"})]}))}var ue=t(55942),de=t(2139),xe=t(53343),he=t(93433),fe=t(15861),pe=t(87757),me=t.n(pe),ve=t(31148),Ze=t(947),je=t(25617),ge=t(60393),ye=t(66218),be={title:(0,z.jsx)(T.Z,{color:"warning",children:"ERROR"})},ke=(0,i.Z)({normal:"Normal Atk.",charged:"Charged Atk.",plunging:"Plunging Atk.",skill:"Ele. Skill",burst:"Ele. Burst",passive:"Passive",passive1:"1st Asc. Pass.",passive2:"4th Asc. Pass.",passive3:"Util. Pass."},Object.fromEntries((0,ge.w6)(1,6).map((function(e){return["constellation".concat(e),"Const. ".concat(e)]}))));function we(e,n){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,fe.Z)(me().mark((function e(n,t){var i,a,s,l,c,o,u,d,x,h,f,p,m;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",be);case 2:if("basic"!==t){e.next=6;break}return e.abrupt("return",{title:"Basic Stats"});case 6:if("reaction"!==t){e.next=10;break}return e.abrupt("return",{title:"Transformative Reactions"});case 10:if(!t.includes(":")){e.next=31;break}if(i=t.split(":"),a=(0,r.Z)(i,2),s=a[0],l=a[1],"artifact"!==s){e.next=21;break}return e.next=15,ve.y.get(l);case 15:if(c=e.sent){e.next=18;break}return e.abrupt("return",be);case 18:return e.abrupt("return",{title:c.name,icon:c.defIconSrc});case 21:if("weapon"!==s){e.next=29;break}return e.next=24,ye.ZP.get(l);case 24:if(o=e.sent){e.next=27;break}return e.abrupt("return",be);case 27:return u=n.get(Y.qH.weapon.asc).value,e.abrupt("return",{title:o.name,icon:u<2?o.img:o.imgAwaken});case 29:e.next=44;break;case 31:if(d=n.get(Y.qH.charKey).value,x=n.get(Y.qH.charEle).value,d&&x){e.next=35;break}return e.abrupt("return",be);case 35:return e.next=37,Ze.ZP.get(d);case 37:if(h=e.sent,f=["normal","charged","plunging"].includes(t)?"auto":t,p=null===h||void 0===h?void 0:h.getTalentOfKey(f,x)){e.next=42;break}return e.abrupt("return",be);case 42:return m=ke[t],e.abrupt("return",{icon:p.img,title:p.name,action:m?(0,z.jsx)(je.Z,{children:(0,z.jsx)(v.Z,{variant:"subtitle2",children:m})}):void 0});case 44:return e.abrupt("return",be);case 45:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){var n=e.getDisplay(),t=Object.entries(n),i=t.filter((function(e){return"basic"===(0,r.Z)(e,1)[0]})),a=t.filter((function(e){return"reaction"===(0,r.Z)(e,1)[0]})),s=t.filter((function(e){return(0,r.Z)(e,1)[0].startsWith("weapon")})),l=t.filter((function(e){return(0,r.Z)(e,1)[0].startsWith("artifact")})),c=t.filter((function(e){var n=(0,r.Z)(e,1)[0];return"basic"!==n&&"reaction"!==n&&!n.startsWith("weapon")&&!n.startsWith("artifact")}));return[].concat((0,he.Z)(i),(0,he.Z)(c),(0,he.Z)(s),(0,he.Z)(l),(0,he.Z)(a))}var Pe=t(72247),De=t(9912),_e=t(96739),Oe=t(19658),Ee=t(23060),Ae=t(16129),Re=t(91523);function Ke(){return new Worker(t.p+"static/js/BackgroundWorker.f9b19197.worker.js")}var Me=t(21977),Te=t(96106),Ie=t(14525),qe=t(56928),He=t(87234),Le=t(69292),Ve=t(20323),Be=t(16134),Ne=t(50920),We=t(17278),ze=t(68544),Ge=t(47639),Fe=t(77474),Ue=t(39738),Je=t(37762),Ye=t(94294),Xe=t(72456),Qe=t(18455),$e=t(19913),en=t(37389),nn=t(82839),tn=t(90466),rn=t(12891),an=t(42633),sn=t(27281),ln=t(64694),cn=t(62066);function on(e){var n=e.chartData,t=e.plotBase,i=e.setPlotBase,a=e.disabled,s=void 0!==a&&a,l=(0,O.useState)(!1),c=(0,r.Z)(l,2),o=c[0],u=c[1],d=(0,O.useState)(!0),x=(0,r.Z)(d,2),p=x[0],m=x[1],Z=(0,O.useContext)(J.R).data,j=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==Z.get(Y.ri.weaponType).value&&j.push("physical_dmg_"),j.push("".concat(Z.get(Y.ri.charEle).value,"_dmg_"));var b=(0,O.useMemo)((function(){var e,t;if(!n)return{displayData:null,downloadData:null};var r,i=n.data.map((function(e){var n=e.value;return{x:e.plot,y:n}})).sort((function(e,n){return e.x-n.x})),a=[],s=(0,Je.Z)(i);try{for(s.s();!(r=s.n()).done;){for(var l=r.value,c=void 0;c=a.pop();)if(c.y>l.y){a.push(c);break}a.push(l)}}catch(u){s.e(u)}finally{s.f()}(null===(e=a[0])||void 0===e?void 0:e.x)!==(null===(t=i[0])||void 0===t?void 0:t.x)&&(i[0].min=a[0].y),a.forEach((function(e){e.min=e.y}));var o={minimum:a.map((function(e){return[e.x,e.y]})),allData:i.map((function(e){return[e.x,e.y]}))};return{displayData:i,downloadData:o}}),[n]),w=b.displayData,S=b.downloadData;return(0,z.jsxs)(A.Z,{children:[(0,z.jsx)(h.Z,{children:(0,z.jsxs)(f.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(v.Z,{variant:"h6",children:"Optimization Target vs"})}),(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsxs)(q.Z,{title:t?X.ZP.get(t):"Not Selected",color:t?"success":"primary",disabled:s,children:[(0,z.jsx)(k.Z,{onClick:function(){i("")},children:"Unselect"}),(0,z.jsx)(g.Z,{}),j.map((function(e){return(0,z.jsx)(k.Z,{onClick:function(){i(e)},children:X.ZP.get(e)},e)}))]})}),(0,z.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,z.jsx)(Qe.Z,{placement:"top",title:"Using data from the builder, this will generate a graph to visualize Optimization Target vs. a selected stat. The graph will show the maximum Optimization Target value per 0.01 of the selected stat.",children:(0,z.jsx)(Ye.Z,{})})}),!!S&&(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(y.Z,{startIcon:p?(0,z.jsx)(Pe.Z,{}):(0,z.jsx)(De.Z,{}),color:p?"success":"secondary",onClick:function(){return m(!p)},children:"Show Min Stat Threshold"})}),!!S&&(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(y.Z,{color:"info",startIcon:(0,z.jsx)(Xe.Z,{}),onClick:function(){return u(!o)},children:"Download Data"})})]})}),!!w&&(0,z.jsx)(g.Z,{}),n&&!!w&&(0,z.jsxs)(h.Z,{children:[(0,z.jsx)(C.Z,{in:!!S&&o,children:(0,z.jsx)(E.Z,{sx:{mb:2},children:(0,z.jsxs)(h.Z,{children:[(0,z.jsx)(v.Z,{children:"Min Data"}),(0,z.jsx)(dn,{data:null===S||void 0===S?void 0:S.minimum}),(0,z.jsx)(v.Z,{children:"All Data"}),(0,z.jsx)(dn,{data:null===S||void 0===S?void 0:S.allData})]})})}),(0,z.jsx)(xn,{displayData:w,plotNode:n.plotNode,valueNode:n.valueNode,showMin:p})]})]})}var un=(0,N.ZP)("textarea")({width:"100%",fontFamily:"monospace",resize:"vertical",minHeight:"5em"});function dn(e){var n=e.data;return(0,z.jsx)(un,{readOnly:!0,value:JSON.stringify(n),onClick:function(e){var n=e.target;n.selectionStart=0,n.selectionEnd=n.value.length}})}function xn(e){var n,t,r=e.displayData,i=e.plotNode,a=e.valueNode,s=e.showMin,l=X.ZP.unit(null===(n=i.info)||void 0===n?void 0:n.key),c=X.ZP.unit(null===(t=a.info)||void 0===t?void 0:t.key);return(0,z.jsx)($e.h,{width:"100%",height:600,children:(0,z.jsxs)(en.c,{data:r,children:[(0,z.jsx)(nn.q,{strokeDasharray:"3 3"}),(0,z.jsx)(tn.K,{dataKey:"x",scale:"linear",unit:l,domain:["auto","auto"],tick:{fill:"white"},type:"number",tickFormatter:function(e){return e>1e4?e.toFixed():e.toFixed(1)}}),(0,z.jsx)(rn.B,{name:"DMG",domain:["auto","auto"],unit:c,allowDecimals:!1,tick:{fill:"white"},type:"number"}),(0,z.jsx)(an.d,{dataKey:"y",range:[3,25]}),(0,z.jsx)(sn.D,{}),(0,z.jsx)(ln.b,{name:"Optimization Target",dataKey:"y",fill:"#8884d8",line:!0,lineType:"fitting",isAnimationActive:!1}),s&&(0,z.jsx)(cn.x,{name:"Minimum Stat Requirement Threshold",dataKey:"min",stroke:"#ff7300",type:"stepBefore",connectNulls:!0,strokeWidth:2,isAnimationActive:!1})]})})}var hn=t(64737),fn=t(78661);function pn(e,n,t,r,a,s){for(var l=s,c={pruneNodeRange:!0},o={pruneNodeRange:!0},u={reaffine:!0},d={pruneOrder:!0,pruneArtRange:!0,pruneNodeRange:!0},x=0;Object.values(l).some((function(e){return e}))&&x++<20;){if(l.pruneOrder){delete l.pruneOrder;var h=vn(t,r,a);t!==h&&(t=h,l=(0,i.Z)((0,i.Z)({},l),c))}if(l.pruneArtRange){delete l.pruneArtRange;var f=Zn(e,t,n);t!==f&&(t=f,l=(0,i.Z)((0,i.Z)({},l),o))}if(l.pruneNodeRange){delete l.pruneNodeRange;var p=jn(e,t);e!==p&&(e=p,l=(0,i.Z)((0,i.Z)({},l),u))}if(l.reaffine){delete l.reaffine;var m=mn(e,t),v=m.nodes,Z=m.arts;e===v&&t===Z||(e=v,t=Z,l=(0,i.Z)((0,i.Z)({},l),d))}}return{nodes:e,arts:t}}function mn(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=new Set,s=new Set;function l(e,n){n?a.add(e):e.operands.forEach((function(e){var n=e;a.has(n)&&s.add(n)}))}var c=new Set;if((0,hn.aD)(e,(function(e){}),(function(e){var n=e.operation;switch(n){case"read":if("number"!==e.type||"dyn"!==e.path[0]||"add"!==e.accu)throw new Error("Found unsupported ".concat(n," node at path ").concat(e.path," when computing affine nodes"));c.add(e.path[1]),l(e,!0);break;case"add":l(e,e.operands.every((function(e){return a.has(e)})));break;case"mul":var t=e.operands.filter((function(e){return"const"!==e.operation}));l(e,0===t.length||1===t.length&&a.has(t[0]));break;case"const":if("string"===typeof e.value||void 0===e.value)throw new Error("Found constant ".concat(e.value," while compacting"));l(e,!0);break;case"res":case"threshold":case"sum_frac":case"max":case"min":l(e,!1);break;case"data":case"subscript":case"lookup":case"match":case"prio":case"small":throw new Error("Found unsupported ".concat(n," node when computing affine nodes"));default:(0,ge.UT)(n)}})),(0,he.Z)(s).every((function(e){var n=e.operation;return"read"===n||"const"===n}))&&Object.keys(n.base).length===c.size)return{nodes:e,arts:n};var o=-1;function u(){for(;c.has("".concat(++o)););return"".concat(o)}e.forEach((function(e){return a.has(e)&&s.add(e)}));var d=(0,he.Z)(s).filter((function(e){return"const"!==e.operation})),x=new Map(d.map((function(e){return[e,t||"read"!==e.operation||"dyn"!==e.path[0]?(0,i.Z)((0,i.Z)({},(0,fn.UF)(["dyn","".concat(u())])),{},{accu:"add"}):e]})));function h(e){var n=(0,Le.CG)((0,he.Z)(x.keys()),{dyn:(0,ge.xh)(e,(function(e){return(0,fn.a9)(e)}))},(function(e){return!0}));return Object.fromEntries((0,he.Z)(x.values()).map((function(e,t){return[e.path[1],n[t].value]})))}for(var f={nodes:e=(0,hn.uW)(e,(function(e){var n;return null!==(n=x.get(e))&&void 0!==n?n:e}),(function(e){return e})),arts:{base:h(n.base),values:(0,ge.O)(Q.eV,(function(e){return n.values[e].map((function(e){return{id:e.id,set:e.set,values:h(e.values)}}))}))}},p=Object.entries(h({})),m=0,v=Object.values(f.arts.values);m<v.length;m++){var Z,j=v[m],g=(0,Je.Z)(j);try{for(g.s();!(Z=g.n()).done;){var y,b=Z.value.values,k=(0,Je.Z)(p);try{for(k.s();!(y=k.n()).done;){var w=(0,r.Z)(y.value,2),C=w[0],S=w[1];b[C]-=S}}catch(P){k.e(P)}finally{k.f()}}}catch(P){g.e(P)}finally{g.f()}}return f}function vn(e,n,t){var i=!1,a=(0,ge.O)(Q.eV,(function(a){var s=e.values[a],l=s.filter((function(e){var i=0;return s.every((function(a){var s=Object.entries(a.values).every((function(n){var t=(0,r.Z)(n,2),i=t[0];return t[1]>=e.values[i]})),l=Object.entries(a.values).some((function(n){var t=(0,r.Z)(n,2),i=t[0];return t[1]>e.values[i]}));return s&&(l||a.id>e.id)&&(!t.has(e.set)||t.has(a.set))&&i++,i<n}))}));return l.length!==s.length&&(i=!0),l}));return i?{base:e.base,values:a}:e}function Zn(e,n,t){for(var i=Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return[t,{min:i,max:i}]}))),a={arts:n},s=function(){var n=(0,ge.O)(Q.eV,(function(e){return yn(a.arts.values[e])})),r=(0,ge.O)(Q.eV,(function(e){return gn(Object.entries(n).map((function(n){return n[0]===e?i:n[1]})).filter((function(e){return e})))})),s=!1,l=(0,ge.O)(Q.eV,(function(n){var i=a.arts.values[n].filter((function(i){var a=gn([yn([i]),r[n]]),s=bn(e,a);return e.every((function(e,n){var r;return s.get(e).max>=(null!==(r=t[n])&&void 0!==r?r:-1/0)}))}));return i.length!==a.arts.values[n].length&&(s=!0),i}));if(!s)return"break";a.arts={base:a.arts.base,values:l}};;){if("break"===s())break}return a.arts}function jn(e,n){var t=bn(e,gn([Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return[t,{min:i,max:i}]})))].concat((0,he.Z)(Object.values(n.values).map((function(e){return yn(e)}))))));return(0,hn.uW)(e,(function(e){var n=e.operation,i=e.operands.map((function(e){return t.get(e)}));switch(n){case"threshold":var a=(0,r.Z)(i,4),s=a[0],l=a[1],c=a[2],o=a[3];if(s.min>=l.max)return e.operands[2];if(s.max<l.min)return(0,fn.a9)(0);if(c.max===c.min&&o.max===o.min&&c.min===o.min&&isFinite(c.min))return(0,fn.a9)(c.max);break;case"min":var u=e.operands.filter((function(e,n){var t=i[n];return i.every((function(e,n){return t.min<=e.max}))}));if(u.length<i.length)return fn.VV.apply(void 0,(0,he.Z)(u));break;case"max":var d=e.operands.filter((function(e,n){var t=i[n];return i.every((function(e){return t.max>=e.min}))}));if(d.length<i.length)return fn.Fp.apply(void 0,(0,he.Z)(d))}return e}),(function(e){return e}))}function gn(e){var n={};return e.forEach((function(e){Object.entries(e).forEach((function(e){var t=(0,r.Z)(e,2),a=t[0],s=t[1];n[a]?(n[a].min+=s.min,n[a].max+=s.max):n[a]=(0,i.Z)({},s)}))})),n}function yn(e){var n={};return e.length&&(Object.keys(e[0].values).filter((function(n){return e.every((function(e){return e.values[n]}))})).forEach((function(t){return n[t]={min:e[0].values[t],max:e[0].values[t]}})),e.forEach((function(e){for(var t=e.values,i=0,a=Object.entries(t);i<a.length;i++){var s=(0,r.Z)(a[i],2),l=s[0],c=s[1];n[l]?(n[l].max<c&&(n[l].max=c),n[l].min>c&&(n[l].min=c)):n[l]={min:0,max:c}}}))),n}function bn(e,n){var t=new Map;return(0,hn.aD)(e,(function(e){}),(function(e){var i,a,s=e,l=s.operation,c=s.operands.map((function(e){return t.get(e)}));switch(l){case"read":if("dyn"!==s.path[0])throw new Error("Found non-dyn path ".concat(s.path," while computing range"));a=null!==(i=n[s.path[1]])&&void 0!==i?i:{min:0,max:0};break;case"const":a=kn([s.value]);break;case"subscript":a=kn(s.list);break;case"add":case"min":case"max":a={min:Le.aj[l](c.map((function(e){return e.min}))),max:Le.aj[l](c.map((function(e){return e.max})))};break;case"res":a={min:Le.aj[l]([c[0].max]),max:Le.aj[l]([c[0].min])};break;case"mul":a=c.reduce((function(e,n){return kn([e.min*n.min,e.min*n.max,e.max*n.min,e.max*n.max])}));break;case"threshold":a=c[0].min>=c[1].max?c[2]:c[0].max<c[1].min?kn([0]):kn([0],[c[2]]);break;case"sum_frac":var o=(0,r.Z)(c,2),u=o[0],d=o[1],x={min:u.min+d.min,max:u.max+d.max};a=x.min<=0&&x.max>=0?u.min<=0&&u.max>=0?{min:NaN,max:NaN}:{min:-1/0,max:1/0}:kn([u.min/x.min,u.min/x.max,u.max/x.min,u.max/x.max]);break;case"data":case"lookup":case"match":throw new Error("Unsupported ".concat(l," node"));default:(0,ge.UT)(l)}t.set(s,a)})),t}function kn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Math.max.apply(Math,(0,he.Z)(e).concat((0,he.Z)(n.map((function(e){return e.max}))))),r=Math.min.apply(Math,(0,he.Z)(e).concat((0,he.Z)(n.map((function(e){return e.min})))));return{min:r,max:t}}function wn(e,n){return{base:e.base,values:(0,ge.O)(Q.eV,(function(t){var r=n[t];switch(r.kind){case"id":return e.values[t].filter((function(e){return r.ids.has(e.id)}));case"exclude":return e.values[t].filter((function(e){return!r.sets.has(e.set)}));case"required":return e.values[t].filter((function(e){return r.sets.has(e.set)}))}}))}}function Cn(e,n){return e.flatMap((function(e){return e})).sort((function(e,n){return n.value-e.value})).slice(0,n)}function Sn(e){for(var n=.01,t=new Set(e.flatMap((function(e){return Object.values(e).map((function(e){return Math.round(e.plot/n)}))})));t.size>1500;)n*=2,t=new Set((0,he.Z)(t).map((function(e){return Math.round(e/2)})));var r,i={},a=(0,Je.Z)(e);try{for(a.s();!(r=a.n()).done;)for(var s=r.value,l=0,c=Object.values(s);l<c.length;l++){var o=c[l],u=Math.round(o.plot/n)*n;(!i[u]||i[u].value<o.value)&&(i[u]=o)}}catch(d){a.e(d)}finally{a.f()}return i}function Pn(e){return Q.eV.reduce((function(n,t){return n*e.values[t].length}),1)}var Dn=t(98268),_n=t(52791),On=t(79271),En=t(63204),An=t(66647),Rn=t(9350),Kn=t(19272),Mn=t(63372),Tn=t(42320),In=t(95614),qn=t(20005);function Hn(e){var n,t,r,i=e.artifactId,a=e.slotKey,s=e.mainStatAssumptionLevel,l=void 0===s?0:s,c=e.showLocation,o=void 0!==c&&c,u=e.onClick,d=e.BGComponent,h=void 0===d?E.Z:d,f=(0,Mn.Z)(i),p=(0,Tn.Z)(ve.y.get(null===f||void 0===f?void 0:f.setKey),[f]),m=(0,O.useCallback)((function(e){return(0,z.jsx)(An.Z,{onClick:u,sx:{height:"100%"},children:e})}),[u]);if(!f)return(0,z.jsx)(h,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,z.jsx)(w.Z,{component:"img",src:Rn.Z.slot[a],sx:{width:"25%",height:"auto",opacity:.7}})});var Z=f.slotKey,j=f.rarity,g=f.level,y=f.mainStatKey,b=f.substats,k=f.location,C=Math.max(Math.min(l,4*j),g),S=X.ZP.unit(y),P="roll"+(Math.floor(Math.max(g,0)/4)+1);return(0,z.jsx)(h,{sx:{height:"100%"},children:(0,z.jsx)(qn.Z,{condition:!!u,wrapper:m,children:(0,z.jsxs)(w.Z,{display:"flex",height:"100%",children:[(0,z.jsx)(Te.Z,{placement:"top",title:(0,z.jsx)(O.Suspense,{fallback:(0,z.jsxs)(w.Z,{children:[(0,z.jsx)(x.Z,{variant:"text",width:100}),(0,z.jsx)(x.Z,{variant:"text",width:100})]}),children:(0,z.jsxs)(w.Z,{children:[(0,z.jsx)(v.Z,{children:(0,z.jsx)("strong",{children:null===p||void 0===p?void 0:p.name})}),(0,z.jsxs)(v.Z,{children:[(0,In.Ir)(f.slotKey)," ",null===p||void 0===p||null===(n=p.getSlotName)||void 0===n?void 0:n.call(p,f.slotKey)]})]})}),disableInteractive:!0,children:(0,z.jsxs)(w.Z,{className:"grad-".concat(j,"star"),sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,z.jsx)(w.Z,{sx:{position:"absolute",width:"100%",height:"80%",textAlign:"center"},children:(0,z.jsx)(w.Z,{component:"img",src:null!==(t=null===p||void 0===p?void 0:p.slotIcons[Z])&&void 0!==t?t:"",sx:{m:-1,display:"inline",maxHeight:"110%",maxWidth:"110%"}})}),(0,z.jsxs)(w.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between"},children:[(0,z.jsx)(V.Z,{size:"small",label:(0,z.jsx)("strong",{children:" +".concat(g)}),color:P}),o&&(0,z.jsx)(V.Z,{size:"small",label:(0,z.jsx)(Vn,{location:k}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,z.jsx)(w.Z,{sx:{flexGrow:1,display:"flex",position:"relative",mt:-1,mx:-1}}),(0,z.jsxs)(v.Z,{variant:"h6",sx:{display:"flex",gap:1,px:1,zIndex:1},children:[(0,z.jsx)(Te.Z,{placement:"top",title:(0,z.jsx)(v.Z,{children:X.ZP.getArtStr(y)}),disableInteractive:!0,children:(0,z.jsx)(T.Z,{color:X.ZP.getVariant(y),children:ee.Z[y]})}),(0,z.jsxs)(T.Z,{color:C!==g?"warning":void 0,children:[(0,X.qs)(null!==(r=Kn.Z.mainStatValue(y,j,C))&&void 0!==r?r:0,X.ZP.unit(y)),S]})]})]})}),(0,z.jsx)(w.Z,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:b.map((function(e,n){return(0,z.jsx)(Ln,{stat:e},n+e.key)}))})]})})})}function Ln(e){var n,t,r=e.stat;if(!r.value)return null;var i=null!==(n=null===(t=r.rolls)||void 0===t?void 0:t.length)&&void 0!==n?n:0,a="roll".concat((0,ge.uZ)(i,1,6)),s=X.ZP.unit(r.key);return(0,z.jsx)(w.Z,{display:"flex",gap:1,alignContent:"center",children:(0,z.jsxs)(v.Z,{sx:{flexGrow:1,display:"flex",gap:1},color:i?"".concat(a,".main"):"error.main",component:"span",children:[(0,z.jsx)(Te.Z,{placement:"top",title:(0,z.jsx)(v.Z,{children:r.key&&X.ZP.getArtStr(r.key)}),disableInteractive:!0,children:(0,z.jsx)("span",{children:ee.Z[r.key]})}),(0,z.jsx)("span",{children:"".concat((0,X.qs)(r.value,X.ZP.unit(r.key))).concat(s)})]})})}function Vn(e){var n=e.location,t=(0,Tn.Z)(Ze.ZP.get(null!==n&&void 0!==n?n:""),[n]);return t?(0,z.jsx)(Te.Z,{placement:"right-end",title:(0,z.jsx)(v.Z,{children:t.name}),children:(0,z.jsx)(ue.Z,{src:t.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,z.jsx)(En.Z,{})}var Bn=t(78593),Nn=t(14763);function Wn(){var e=Se((0,O.useContext)(J.R).data);return(0,z.jsx)(_n.Z,{sx:{mr:-1,mb:-1},children:(0,z.jsx)(Bn.ZP,{columns:{xs:1,sm:2,md:3,xl:4},spacing:1,children:e.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,z.jsx)(zn,{displayNs:i,sectionKey:t},t)}))})})}function zn(e){var n=e.displayNs,t=e.sectionKey,i=(0,O.useContext)(J.R),a=i.data,s=i.oldData,l=(0,Tn.Z)(we(a,t),[a,t]),c=(0,O.useMemo)((function(){return(0,ge.xh)(n,(function(e,n){return(0,fn.UF)(["display",t,n])}))}),[n,t]);if(!l||Object.values(n).every((function(e){return e.isEmpty})))return null;var o=l.title,u=l.icon,d=l.action;return(0,z.jsxs)(E.Z,{children:[(0,z.jsx)(S.Z,{avatar:u&&(0,z.jsx)(ue.Z,{size:2,sx:{m:-1},src:u}),title:o,action:d,titleTypographyProps:{variant:"subtitle1"}}),(0,z.jsx)(g.Z,{}),(0,z.jsx)(h.Z,{children:Object.entries(n).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,z.jsx)(Nn.JW,{node:i,oldValue:s?s.get(c[t]).value:void 0},t)}))})]})}var Gn=t(9321),Fn=t(74480);function Un(e){var n,t=e.weaponId,r=e.onClick,i=e.BGComponent,a=void 0===i?E.Z:i,s=(0,Fn.Z)(t),l=(0,Tn.Z)((null===s||void 0===s?void 0:s.key)&&ye.ZP.get(s.key),[null===s||void 0===s?void 0:s.key]),c=(0,O.useCallback)((function(e){return(0,z.jsx)(An.Z,{sx:{height:"100%"},onClick:r,children:e})}),[r]),o=(0,O.useMemo)((function(){return l&&s&&(0,He.mP)([l.data,(0,He.v0)(s)])}),[l,s]);return s&&l&&o?(0,z.jsx)(a,{sx:{height:"100%"},children:(0,z.jsx)(qn.Z,{condition:!!r,wrapper:c,children:(0,z.jsxs)(w.Z,{display:"flex",height:"100%",children:[(0,z.jsx)(Te.Z,{placement:"top",title:(0,z.jsx)(O.Suspense,{fallback:(0,z.jsx)(x.Z,{variant:"text",width:100}),children:(0,z.jsxs)(v.Z,{children:[(0,z.jsx)(ue.Z,{src:null===(n=Rn.Z.weaponTypes)||void 0===n?void 0:n[l.weaponType]})," ",null===l||void 0===l?void 0:l.name]})}),disableInteractive:!0,children:(0,z.jsxs)(w.Z,{className:"grad-".concat(l.rarity,"star"),sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,z.jsx)(w.Z,{sx:{position:"absolute",width:"100%",height:"100%",textAlign:"center"},children:(0,z.jsx)(w.Z,{component:"img",src:l.img,sx:{m:-1,display:"inline",maxHeight:"110%",maxWidth:"110%"}})}),(0,z.jsx)(w.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85},children:(0,z.jsx)(V.Z,{size:"small",label:(0,z.jsx)("strong",{children:ye.ZP.getLevelString(s)}),color:"primary"})}),(0,z.jsx)(w.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:l.hasRefinement&&(0,z.jsx)(V.Z,{size:"small",color:"info",label:(0,z.jsxs)("strong",{children:["R",s.refinement]})})})]})}),(0,z.jsxs)(w.Z,{display:"flex",flexDirection:"column",sx:{p:1},children:[(0,z.jsx)(Jn,{node:o.get(Y.qH.weapon.main)}),(0,z.jsx)(Jn,{node:o.get(Y.qH.weapon.sub)})]})]})})}):null}function Jn(e){var n=e.node;if(!n.info.key)return null;var t=(0,X.EC)(n.value,n.unit,n.unit?void 0:0);return(0,z.jsx)(w.Z,{display:"flex",gap:1,alignContent:"center",children:(0,z.jsxs)(v.Z,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[(0,z.jsx)(Te.Z,{placement:"top",title:(0,z.jsx)(v.Z,{children:n.info.key&&X.ZP.getArtStr(n.info.key)}),disableInteractive:!0,children:(0,z.jsx)("span",{children:ee.Z[n.info.key]})}),(0,z.jsx)("span",{children:t})]})})}var Yn=t(72838);function Xn(e){var n=e.index,t=e.compareBuild,a=e.disabled,s=(0,O.useContext)(qe.t).database,l=(0,O.useContext)(J.R),c=l.character,o=l.data,u=l.oldData,d=l.mainStatAssumptionLevel,p=(0,Tn.Z)(ve.y.getAll,[]),m=(0,O.useState)(void 0),Z=(0,r.Z)(m,2),j=Z[0],g=Z[1],b=(0,O.useCallback)((function(){return g(void 0)}),[g]),k=(0,O.useCallback)((function(){if(window.confirm("Do you want to equip this artifact build to this character?")){var e=Object.fromEntries(Q.eV.map((function(e){return[e,o.get(Y.ri.art[e].id).value]})));s.equipArtifacts(c.key,e)}}),[c,o,s]);if(!c||!p||!u)return null;var w=Q.eV.every((function(e){return o.get(Y.ri.art[e].id).value===u.get(Y.ri.art[e].id).value})),C=(0,i.Z)({},l);t||(C.oldData=void 0);var S={};return Q.eV.forEach((function(e){var n=o.get(Y.ri.art[e].set).value;n&&(S[n]?S[n].push(e):S[n]=[e])})),(0,z.jsx)(A.Z,{children:(0,z.jsxs)(O.Suspense,{fallback:(0,z.jsx)(x.Z,{variant:"rectangular",width:"100%",height:600}),children:[j&&(0,z.jsx)(Qn,{newOld:j,mainStatAssumptionLevel:d,onClose:b}),(0,z.jsxs)(h.Z,{children:[(0,z.jsxs)(_n.Z,{display:"flex",gap:1,sx:{pb:1},flexWrap:"wrap",children:[(0,z.jsx)(v.Z,{variant:"h6",children:(0,z.jsx)(je.Z,{color:"info",children:(0,z.jsxs)("strong",{children:["#",n+1,w?" (Equipped)":""]})})}),Object.entries(S).sort((function(e,n){var t=(0,r.Z)(e,2),i=(t[0],t[1]),a=(0,r.Z)(n,2);a[0];return a[1].length-i.length})).map((function(e){var n,t=(0,r.Z)(e,2),i=t[0],a=t[1];return(0,z.jsx)(_n.Z,{children:(0,z.jsx)(v.Z,{variant:"h6",children:(0,z.jsxs)(je.Z,{color:w?"success":"primary",children:[a.map((function(e){return(0,In.Ir)(e)}))," ",null!==(n=null===p||void 0===p?void 0:p[i].name)&&void 0!==n?n:""]})})},i)})),(0,z.jsx)(_n.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),(0,z.jsx)(y.Z,{size:"small",color:"success",onClick:k,disabled:a||w,children:"Equip Artifacts"})]}),(0,z.jsxs)(f.ZP,{container:!0,spacing:1,sx:{pb:1},children:[(0,z.jsx)(f.ZP,{item:!0,xs:6,sm:4,md:3,lg:2,children:(0,z.jsx)(Un,{weaponId:c.equippedWeapon})}),Q.eV.map((function(e){return(0,z.jsx)(f.ZP,{item:!0,xs:6,sm:4,md:3,lg:2,children:(0,z.jsx)(Hn,{showLocation:!0,slotKey:e,artifactId:o.get(Y.ri.art[e].id).value,mainStatAssumptionLevel:d,onClick:function(){var n=c.equippedArtifacts[e],t=o.get(Y.ri.art[e].id).value;g({oldId:n!==t?n:void 0,newId:t})}})},e)}))]}),(0,z.jsx)(J.R.Provider,{value:C,children:(0,z.jsx)(Wn,{})})]})]})})}function Qn(e){var n=e.newOld,t=n.newId,r=n.oldId,i=e.mainStatAssumptionLevel,a=e.onClose;console.log("newOld",t,r);var s=(0,On.k6)(),l=(0,O.useCallback)((function(e){return s.push({pathname:"/artifact",state:{artToEditId:e}})}),[s]);return(0,z.jsx)(Gn.Z,{open:!!t,onClose:a,containerProps:{maxWidth:r?"md":"xs"},children:(0,z.jsx)(E.Z,{children:(0,z.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2,height:"100%"},children:[r&&(0,z.jsx)(_n.Z,{children:(0,z.jsx)(Yn.Z,{artifactId:r,mainStatAssumptionLevel:i,onEdit:l})}),r&&(0,z.jsx)(_n.Z,{display:"flex",flexGrow:1}),r&&(0,z.jsx)(_n.Z,{display:"flex",alignItems:"center",children:(0,z.jsx)(A.Z,{sx:{display:"flex"},children:(0,z.jsx)(Dn.Z,{sx:{fontSize:40}})})}),r&&(0,z.jsx)(_n.Z,{display:"flex",flexGrow:1}),(0,z.jsx)(_n.Z,{children:(0,z.jsx)(Yn.Z,{artifactId:t,mainStatAssumptionLevel:i,onEdit:l})})]})})})}var $n=t(37503);function et(e){var n=e.setKey,t=e.setNumKey,r=(0,Tn.Z)(ve.y.get(n),[n]);if(!r)return null;var i=r.setEffectDesc(t),a=r.setEffectDocument(t);return(0,z.jsxs)(w.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,z.jsx)(E.Z,{sx:{p:2},children:(0,z.jsxs)(v.Z,{variant:"h6",sx:{display:"flex",justifyContent:"space-between"},children:[(0,z.jsx)("span",{children:(0,z.jsxs)(je.Z,{color:"success",children:[t,"-Set"]})}),(0,z.jsx)(Te.Z,{placement:"top",title:(0,z.jsx)(v.Z,{children:i}),children:(0,z.jsx)("span",{children:(0,z.jsx)(L.G,{icon:H.sqG})})})]})}),a?(0,z.jsx)($n.Z,{sections:a}):null]})}var nt=t(10157);function tt(e){var n=e.disabled,t=(0,O.useContext)(J.R).character,i=(0,O.useState)(!1),a=(0,r.Z)(i,2),s=a[0],l=a[1],c=(0,O.useCallback)((function(){return l(!0)}),[l]),o=(0,O.useCallback)((function(){return l(!1)}),[l]),u=(0,O.useMemo)((function(){return Object.keys(t.conditional).filter((function(e){return Q.q2.includes(e)&&0!==Object.keys(t.conditional[e]).length})).length}),[t]);return(0,z.jsx)(A.Z,{children:(0,z.jsxs)(h.Z,{children:[(0,z.jsx)(y.Z,{fullWidth:!0,onClick:c,disabled:n,children:(0,z.jsxs)("span",{children:["Default Artifact Set Effects Conditionals ",!!u&&(0,z.jsxs)(je.Z,{color:"success",children:[u," Selected"]})]})}),(0,z.jsx)(rt,{open:s,onClose:o,artifactCondCount:u})]})})}function rt(e){var n=e.open,t=e.onClose,i=e.artifactCondCount,a=(0,O.useContext)(J.R),s=a.character,l=a.characterDispatch,c=(0,Tn.Z)(ve.y.getAll,[]),o=(0,O.useCallback)((function(){var e=Object.fromEntries(Object.entries(s.conditional).filter((function(e){var n=(0,r.Z)(e,2),t=n[0];n[1];return!Q.q2.includes(t)})));l({conditional:e})}),[s,l]);if(!c)return null;var u=Object.entries(ve.y.setKeysByRarities(c)).reverse().flatMap((function(e){return(0,r.Z)(e,2)[1]}));return(0,z.jsx)(Gn.Z,{open:n,onClose:t,children:(0,z.jsxs)(E.Z,{children:[(0,z.jsx)(h.Z,{children:(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,z.jsxs)(v.Z,{variant:"h6",children:["Default Artifact Set Effects ",!!i&&(0,z.jsxs)(je.Z,{color:"success",children:[i," Selected"]})]})}),(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(y.Z,{onClick:o,startIcon:(0,z.jsx)(B.Z,{}),children:"Reset All"})}),(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(M.Z,{onClick:t})})]})}),(0,z.jsx)(g.Z,{}),(0,z.jsxs)(h.Z,{children:[(0,z.jsx)(A.Z,{sx:{mb:1},children:(0,z.jsx)(h.Z,{children:(0,z.jsx)(v.Z,{children:"Some artifacts provide conditional stats. This windows allows you to select those stats, so they can take effect during build calculation, when artifact sets are not specified."})})}),(0,z.jsx)(f.ZP,{container:!0,spacing:1,children:u.map((function(e){var n,t=c[e];return Object.values(t.setEffects).some((function(e){return e.document&&e.document.some((function(e){return e.conditional}))}))?(0,z.jsx)(f.ZP,{item:!0,xs:6,lg:4,children:(0,z.jsxs)(A.Z,{sx:{height:"100%"},children:[(0,z.jsxs)(w.Z,{className:"grad-".concat(t.rarity[0],"star"),width:"100%",sx:{display:"flex"},children:[(0,z.jsx)(w.Z,{component:"img",src:t.defIconSrc,sx:{height:100,width:"auto"}}),(0,z.jsxs)(w.Z,{sx:{flexGrow:1,px:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,z.jsx)(v.Z,{variant:"h6",children:null!==(n=null===c||void 0===c?void 0:c[e].name)&&void 0!==n?n:""}),(0,z.jsx)(v.Z,{variant:"subtitle1",children:t.rarity.map((function(e,n){return(0,z.jsxs)("span",{children:[e,(0,z.jsx)(nt.t,{stars:1})," ",n<t.rarity.length-1?"/ ":null]},e)}))})]})]}),(0,z.jsx)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:Object.keys(t.setEffects).map((function(n){return(0,z.jsx)(et,{setKey:e,setNumKey:parseInt(n)},n)}))})]})},e):null}))})]}),(0,z.jsx)(g.Z,{}),(0,z.jsx)(h.Z,{sx:{py:1},children:(0,z.jsx)(M.Z,{large:!0,onClick:t})})]})})}var it=t(8375);function at(e){var n,t,i,a=e.index,s=e.setFilters,l=e.onChange,c=e.disabled,o=void 0!==c&&c,u=s[a],d=u.key,x=u.num,f=(0,Tn.Z)(ve.y.getAll,[]),p=(0,O.useMemo)((function(){if(f){var e=Object.fromEntries(Object.entries(ve.y.setKeysByRarities(f)).map((function(e){var n=(0,r.Z)(e,2);return[n[0],n[1].filter((function(e){var n,t;if(s.some((function(n){return n.key===e})))return!1;var r=Object.keys(null!==(n=null===f||void 0===f||null===(t=f[e])||void 0===t?void 0:t.setEffects)&&void 0!==n?n:{}),i=s.reduce((function(e,n,t){return n.key&&t!==a?e+n.num:e}),0);return!r.every((function(e){return parseInt(e)+i>5}))}))]})));return e}}),[f,s,a]),m=s.reduce((function(e,n){return n.key?e+n.num:e}),0);return(0,z.jsxs)(A.Z,{children:[(0,z.jsx)(h.Z,{children:(0,z.jsxs)(b.Z,{children:[f&&(0,z.jsx)(it.Z,{hasUnselect:!0,selectedSetKey:d,artifactSetsByRarity:p,disabled:o,onChange:function(e){var n,t,r;return l(a,e,null!==(n=parseInt(Object.keys(null!==(t=null===(r=f[e])||void 0===r?void 0:r.setEffects)&&void 0!==t?t:{})[0]))&&void 0!==n?n:0)},titleTransKey:"page_character:forceSet"}),(0,z.jsx)(q.Z,{title:"".concat(x,"-set"),disabled:o||!d||m>=5,children:Object.keys(null!==(n=null===f||void 0===f||null===(t=f[d])||void 0===t?void 0:t.setEffects)&&void 0!==n?n:{}).map((function(e){var n=s.reduce((function(e,n){return n.key&&n.key!==d?e+n.num:e}),0);return parseInt(e)+n<=5&&(0,z.jsx)(k.Z,{onClick:function(){var n;return l(a,s[a].key,null!==(n=parseInt(e))&&void 0!==n?n:0)},children:"".concat(e,"-set")},e)}))})]})}),!!d&&(0,z.jsx)(g.Z,{}),!!d&&(0,z.jsx)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:Object.keys(null!==(i=null===f||void 0===f?void 0:f[d].setEffects)&&void 0!==i?i:{}).map((function(e){return parseInt(e)})).filter((function(e){return e<=x})).map((function(e){return(0,z.jsx)(et,{setKey:d,setNumKey:e},d+e)}))})]})}var st={0:(0,z.jsx)("span",{children:"No Lv. assumption"}),4:(0,z.jsx)("span",{children:"Assume at least Lv. 4"}),8:(0,z.jsx)("span",{children:"Assume at least Lv. 8"}),12:(0,z.jsx)("span",{children:"Assume at least Lv. 12"}),16:(0,z.jsx)("span",{children:"Assume at least Lv. 16"}),20:(0,z.jsx)("span",{children:"Assume at least Lv. 20"})};function lt(e){var n=e.mainStatAssumptionLevel,t=void 0===n?0:n,i=e.setmainStatAssumptionLevel,a=e.disabled;return(0,z.jsx)(q.Z,{color:t?"warning":"primary",disabled:a,title:st[t],children:Object.entries(st).map((function(e){var n=(0,r.Z)(e,2),t=n[0],a=n[1];return(0,z.jsx)(k.Z,{onClick:function(){return i(parseInt(t))},children:a},t)}))})}var ct=t(15021);function ot(){var e=(0,O.useContext)(J.R),n=e.data,t=e.character,r=Object.keys(null===t||void 0===t?void 0:t.bonusStats);if(!r.length)return null;var i=r.map((function(e){return n.get(Y.ri.customBonus[e])}));return(0,z.jsxs)(A.Z,{children:[(0,z.jsx)(h.Z,{sx:{py:1},children:(0,z.jsx)(v.Z,{children:"Bonus Stats"})}),(0,z.jsx)(g.Z,{}),(0,z.jsx)(h.Z,{children:(0,z.jsx)(Nn.lD,{sx:{my:0},children:i.map((function(e){return(0,z.jsx)(ct.ZP,{children:(0,z.jsx)(Nn.JW,{node:e})},e.info.key)}))})})]})}var ut=t(57482),dt=t(52771),xt=1e7,ht=(0,N.ZP)("strong")({fontFamily:"monospace"}),ft=(0,N.ZP)(ut.Z)((function(e){e.theme;return{height:10,borderRadius:5}}));function pt(e){var n,t,r,i,a=e.totBuildNumber,s=e.generatingBuilds,l=e.generationSkipped,c=e.generationProgress,o=e.generationDuration,u=e.characterName,d=e.maxBuildsToShow,x=null!==(n=null===a||void 0===a?void 0:a.toLocaleString())&&void 0!==n?n:a,h=a-l,p=null!==(t=null===c||void 0===c?void 0:c.toLocaleString())&&void 0!==t?t:c,m=null!==(r=null===l||void 0===l?void 0:l.toLocaleString())&&void 0!==r?r:l,Z=null!==(i=null===h||void 0===h?void 0:h.toLocaleString())&&void 0!==i?i:h,j=!!l&&(0,z.jsxs)("span",{children:["(",(0,z.jsx)("b",{children:m})," skipped)"]}),g="success",y="",b="",k=void 0;return s?(k=100*c/h,y=(0,z.jsxs)(v.Z,{children:["Generating and testing ",(0,z.jsxs)(ht,{children:[p,"/",Z]})," build configurations against the criteria for ",(0,z.jsx)("b",{children:u}),". ",j]}),b=(0,z.jsxs)(v.Z,{children:["Time elapsed: ",(0,z.jsx)(ht,{children:(0,dt.e6)(Math.round(o))})]})):!s&&c?(k=100,y=(0,z.jsxs)(v.Z,{children:["Generated and tested ",(0,z.jsx)(ht,{children:Z})," Build configurations against the criteria for ",(0,z.jsx)("b",{children:u}),". ",j]}),b=(0,z.jsxs)(v.Z,{children:["Total duration: ",(0,z.jsx)(ht,{children:(0,dt.e6)(Math.round(o))})]})):0===a?(y=(0,z.jsxs)(v.Z,{children:["Current configuration will not generate any builds for ",(0,z.jsx)("b",{children:u}),". Please change your Artifact configurations, or add/include more Artifacts."]}),g="error"):a>xt?(y=(0,z.jsxs)(v.Z,{children:["Current configuration will generate ",(0,z.jsx)(ht,{children:x})," potential builds for ",(0,z.jsx)("b",{children:u}),". This might take quite a while to generate..."]}),g="warning"):y=(0,z.jsxs)(v.Z,{children:["Current configuration ",a<=d?"generated":"will generate"," ",(0,z.jsx)(ht,{children:x})," builds for ",(0,z.jsx)("b",{children:u}),"."]}),(0,z.jsxs)(Oe.Z,{severity:g,variant:"filled",sx:{"& .MuiAlert-message":{flexGrow:1}},children:[y&&y,b&&b,void 0!==k&&(0,z.jsxs)(f.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(v.Z,{children:"".concat(k.toFixed(1),"%")})}),(0,z.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,z.jsx)(ft,{variant:"determinate",value:k,color:"primary"})})]})]})}var mt=t(22020),vt=["sands","goblet","circlet"];function Zt(e){var n=e.mainStatKeys,t=e.onChangeMainStatKey,r=e.disabled,i=void 0!==r&&r,a=(0,mt.$)("artifact").t;return(0,z.jsx)(_n.Z,{display:"flex",flexDirection:"column",gap:1,children:vt.map((function(e){var r=n[e].length;return(0,z.jsxs)(_n.Z,{children:[(0,z.jsx)(g.Z,{}),(0,z.jsx)(h.Z,{children:(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsxs)(f.ZP,{item:!0,xs:12,sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,z.jsx)(Te.Z,{placement:"top",title:(0,z.jsx)(v.Z,{children:a("slotName.".concat(e))}),children:(0,z.jsx)("span",{children:(0,In.Ir)(e)})}),(0,z.jsx)(_n.Z,{flexGrow:1,children:(0,z.jsx)(je.Z,{color:"info",children:r?"".concat(r," Selected"):"Any"})}),(0,z.jsx)(y.Z,{color:"error",size:"small",disabled:!n[e].length||i,sx:{mt:-1,mb:-1},onClick:function(){return t(e)},children:(0,z.jsx)(B.Z,{})})]}),Kn.Z.slotMainStats(e).map((function(r,a){var s=n[e].includes(r);return(0,z.jsx)(f.ZP,{item:!0,xs:a<3?4:6,children:(0,z.jsx)(Te.Z,{placement:"top",title:(0,z.jsx)(v.Z,{children:(0,z.jsx)("strong",{children:X.ZP.getArtStr(r)})}),disableInteractive:!0,children:(0,z.jsx)(y.Z,{fullWidth:!0,size:"small",color:s?"success":"secondary",disabled:i,sx:{height:"100%"},onClick:function(){return t(e,r)},children:ee.Z[r]})})},r)}))]})})]},e)}))})}var jt=t(25028),gt=(0,N.ZP)(y.Z)({color:"black",backgroundColor:"white","&:hover":{backgroundColor:"#e1e1e1"}});function yt(e){var n=e.optimizationTarget,t=e.setTarget,i=e.disabled,a=void 0!==i&&i,s=(0,O.useState)(!1),l=(0,r.Z)(s,2),c=l[0],o=l[1],u=(0,O.useCallback)((function(){return!a&&o(!0)}),[o,a]),d=(0,O.useCallback)((function(){return o(!1)}),[o]),x=(0,O.useCallback)((function(e){d(),t(e)}),[d,t]),f=Se((0,O.useContext)(J.R).data);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt,{onClick:u,disabled:a,children:(0,z.jsx)(wt,{optimizationTarget:n})}),(0,z.jsx)(Gn.Z,{open:c,onClose:d,children:(0,z.jsx)(E.Z,{children:(0,z.jsx)(h.Z,{children:(0,z.jsx)(Bn.ZP,{columns:{xs:1,sm:2,md:3},spacing:1,children:f.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,z.jsx)(bt,{displayNs:i,sectionKey:t,setTarget:x},t)}))})})})})]})}function bt(e){var n=e.displayNs,t=e.sectionKey,i=e.setTarget,a=(0,O.useContext)(J.R).data,s=(0,Tn.Z)(we(a,t),[a,t]);return!s||Object.values(n).every((function(e){return e.isEmpty}))?null:(0,z.jsxs)(A.Z,{children:[(0,z.jsx)(S.Z,{avatar:s.icon&&(0,z.jsx)(ue.Z,{size:2,sx:{m:-1},src:s.icon}),title:s.title,action:s.action,titleTypographyProps:{variant:"subtitle1"}}),(0,z.jsx)(g.Z,{}),(0,z.jsx)(jt.Z,{children:Object.entries(n).map((function(e){var n=(0,r.Z)(e,2),a=n[0],s=n[1];return(0,z.jsx)(Ct,{node:s,onClick:function(){return i([t,a])}},a)}))})]},t)}function kt(){return(0,z.jsx)("b",{children:"Please select an Optimization Target"})}function wt(e){var n=e.optimizationTarget,t=(0,O.useContext)(J.R).data,r=(0,Tn.Z)(n&&we(t,n[0]),[t,n]);if(!n||!r)return(0,z.jsx)(kt,{});var i=(0,ge.Hm)(t.getDisplay(),n);return i?(0,z.jsxs)("b",{children:[r.title," : ",(0,z.jsx)(T.Z,{color:i.info.variant,children:X.ZP.get(i.info.key)})]}):(0,z.jsx)(kt,{})}function Ct(e){var n=e.node,t=e.onClick;return n.isEmpty?null:(0,z.jsx)(k.Z,{onClick:t,style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,z.jsx)(T.Z,{color:n.info.variant,children:X.ZP.get(n.info.key)})})}var St=t(4942);var Pt=t(50765),Dt=me().mark(Rt),_t=me().mark(Kt),Ot=me().mark(Mt),Et=(0,fn.yY)((0,ge.I8)({dyn:(0,i.Z)((0,i.Z)({},Y.qH.art),Y.qH.artSet)})),At={art:(0,ge.O)([].concat((0,he.Z)(Pt.r),(0,he.Z)(Pt.L)),(function(e){return Et.dyn[e]})),artSet:(0,ge.xh)(Y.qH.artSet,(function(e,n){return Et.dyn[n]}))};function Rt(e){var n,t;return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=function(e,r,a){var s,l,c,o,u,d,x;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.length){n.next=2;break}return n.abrupt("return");case 2:if(!r.some((function(e){return!Object.keys(e).length}))){n.next=6;break}return n.next=5,e;case 5:return n.abrupt("return");case 6:s=Q.eV[a-1],l=new Set(r.flatMap((function(e){return Object.keys(e)}))),c=(0,Je.Z)(l),n.prev=9,u=me().mark((function n(){var l,c,u;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=o.value,c=(0,i.Z)((0,i.Z)({},e),{},(0,St.Z)({},s,{kind:"required",sets:new Set([l])})),u=r.filter((function(e){return e[l]})).map((function(e){var n=(0,i.Z)({},e);return n[l]-=1,n[l]||delete n[l],n})),n.delegateYield(t(c,u,a-1),"t0",4);case 4:case"end":return n.stop()}}),n)})),c.s();case 12:if((o=c.n()).done){n.next=16;break}return n.delegateYield(u(),"t0",14);case 14:n.next=12;break;case 16:n.next=21;break;case 18:n.prev=18,n.t1=n.catch(9),c.e(n.t1);case 21:return n.prev=21,c.f(),n.finish(21);case 24:return d=(0,i.Z)((0,i.Z)({},e),{},(0,St.Z)({},s,{kind:"exclude",sets:l})),x=r.filter((function(e){return Object.values(e).reduce((function(e,n){return e+n}),0)<a})),n.delegateYield(t(d,x,a-1),"t2",27);case 27:case"end":return n.stop()}}),n,null,[[9,18,21,24]])},n=me().mark(t),r.delegateYield(t((0,ge.O)(Q.eV,(function(e){return Tt})),e.map((function(e){var n={};return e.forEach((function(e){var t,r=e.key,i=e.num;return r&&i&&(n[r]=(null!==(t=n[r])&&void 0!==t?t:0)+i)})),n})),5),"t0",3);case 3:case"end":return r.stop()}}),Dt)}function Kt(e,n,t){var r,a,s;return me().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:t<1e4&&(t=1e4),r=(0,Je.Z)(n),l.prev=2,s=me().mark((function n(){var r,s,l;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=a.value,s=[r],l=me().mark((function n(){var r,a,l,c,o,u,d;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=s.pop(),a=wn(e,r),!((l=Pn(a))<=t)){n.next=8;break}if(!l){n.next=7;break}return n.next=7,r;case 7:return n.abrupt("return","continue");case 8:if(c=Q.eV.map((function(e){return{slot:e,sets:new Set(a.values[e].map((function(e){return e.set})))}})).filter((function(e){return e.sets.size>1})),c.length){n.next=12;break}return n.delegateYield(Mt(a,r,t),"t0",11);case 11:return n.abrupt("return","continue");case 12:o=c.reduce((function(e,n){return e.sets.size<n.sets.size?e:n})),u=o.sets,d=o.slot,u.forEach((function(e){return s.push((0,i.Z)((0,i.Z)({},r),{},(0,St.Z)({},d,{kind:"required",sets:new Set([e])})))}));case 14:case"end":return n.stop()}}),n)}));case 3:if(!s.length){n.next=10;break}return n.delegateYield(l(),"t0",5);case 5:if("continue"!==n.t0){n.next=8;break}return n.abrupt("continue",3);case 8:n.next=3;break;case 10:case"end":return n.stop()}}),n)})),r.s();case 5:if((a=r.n()).done){l.next=9;break}return l.delegateYield(s(),"t0",7);case 7:l.next=5;break;case 9:l.next=14;break;case 11:l.prev=11,l.t1=l.catch(2),r.e(l.t1);case 14:return l.prev=14,r.f(),l.finish(14);case 17:case"end":return l.stop()}}),_t,null,[[2,11,14,17]])}function Mt(e,n,t){var r,a;return me().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=[n],a=me().mark((function n(){var a,s,l,c,o,u,d,x,h,f,p,m,v;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=r.pop(),s=wn(e,a),!((l=Pn(s))<=t)){n.next=8;break}if(!l){n.next=7;break}return n.next=7,a;case 7:return n.abrupt("return","continue");case 8:if(c=Q.eV.map((function(e){return{slot:e,length:s.values[e].length}})).filter((function(e){return e.length>1})),o=c.reduce((function(e,n){return e.length<n.length?e:n})),u=o.slot,d=o.length,x=Math.ceil(l/t),h=Math.min(x,d),f=Array(h).fill(0).map((function(e){return new Set})),s.values[u].forEach((function(e,n){var t=e.id;return f[n%h].add(t)})),!(x>d)){n.next=18;break}f.forEach((function(e){return r.push((0,i.Z)((0,i.Z)({},a),{},(0,St.Z)({},u,{kind:"id",ids:e})))})),n.next=35;break;case 18:p=(0,Je.Z)(f),n.prev=19,p.s();case 21:if((m=p.n()).done){n.next=27;break}return v=m.value,n.next=25,(0,i.Z)((0,i.Z)({},a),{},(0,St.Z)({},u,{kind:"id",ids:v}));case 25:n.next=21;break;case 27:n.next=32;break;case 29:n.prev=29,n.t0=n.catch(19),p.e(n.t0);case 32:return n.prev=32,p.f(),n.finish(32);case 35:case"end":return n.stop()}}),n,null,[[19,29,32,35]])}));case 2:if(!r.length){s.next=9;break}return s.delegateYield(a(),"t0",4);case 4:if("continue"!==s.t0){s.next=7;break}return s.abrupt("continue",2);case 7:s.next=2;break;case 9:case"end":return s.stop()}}),Ot)}var Tt={kind:"exclude",sets:new Set};function It(e,n){switch(n.type){case"mainStatKey":var t=n.slotKey,r=n.mainStatKey,a=(0,i.Z)({},e.mainStatKeys);return e.mainStatKeys[t].includes(r)?a[t]=a[t].filter((function(e){return e!==r})):a[t].push(r),(0,i.Z)((0,i.Z)({},e),{},{mainStatKeys:a});case"mainStatKeyReset":var s=n.slotKey,l=(0,i.Z)({},e.mainStatKeys);return l[s]=[],(0,i.Z)((0,i.Z)({},e),{},{mainStatKeys:l});case"setFilter":var c=n.index,o=n.key,u=n.num,d=void 0===u?0:u;return e.setFilters[c]={key:o,num:d},(0,i.Z)((0,i.Z)({},e),{},{setFilters:(0,he.Z)(e.setFilters)})}return(0,i.Z)((0,i.Z)({},e),n)}function qt(){var e,n,t,a,s=(0,O.useContext)(J.R),l=s.character,c=s.character.key,o=(0,We.Z)("GlobalSettings",Ve.c),u=(0,r.Z)(o,1)[0].tcMode,d=(0,O.useContext)(qe.t).database,x=(0,O.useState)(!1),m=(0,r.Z)(x,2),Z=m[0],j=m[1],C=(0,O.useState)(0),S=(0,r.Z)(C,2),P=S[0],D=S[1],_=(0,O.useState)(0),E=(0,r.Z)(_,2),R=E[0],K=E[1],M=(0,O.useState)(0),T=(0,r.Z)(M,2),I=T[0],V=T[1],B=(0,O.useState)(void 0),N=(0,r.Z)(B,2),W=N[0],G=N[1],F=(0,ze.Z)(),U=(0,r.Z)(F,2),Q=U[0],$=U[1],ee=(0,O.useState)(navigator.hardwareConcurrency||4),ne=(0,r.Z)(ee,2),te=ne[0],re=ne[1],ie=(0,Ne.Z)(c),se=null!==(e=null===l||void 0===l?void 0:l.buildSettings)&&void 0!==e?e:(0,Ue.$)(),le=se.plotBase,ce=se.setFilters,oe=se.statFilters,ue=se.mainStatKeys,de=se.optimizationTarget,xe=se.mainStatAssumptionLevel,pe=se.useExcludedArts,ve=se.useEquippedArts,Ze=se.builds,je=se.buildDate,ye=se.maxBuildsToShow,be=se.levelLow,ke=se.levelHigh,we=(0,O.useMemo)((function(){return Ze.map((function(e){return e.map((function(e){return d._getArt(e)}))}))}),[Ze,d]),Ce=(0,Ge.Z)(c,xe),Se=null!==(n=null===Ce||void 0===Ce?void 0:Ce[c])&&void 0!==n?n:{},Ye=Se.characterSheet,Xe=Se.target,Qe=null!==(t=null===l||void 0===l?void 0:l.compareData)&&void 0!==t&&t,$e=(0,O.useMemo)((function(){return!d._getArts().length}),[d]),en=(0,O.useCallback)((function(e){return ie&&ie({buildSettings:It(se,e)})}),[ie,se]),nn=(0,O.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;en(void 0===n?{type:"mainStatKeyReset",slotKey:e}:{type:"mainStatKey",slotKey:e,mainStatKey:n})}),[en]);(0,O.useEffect)((function(){return Ae.ZP.pageview("/build")}),[]),(0,O.useEffect)((function(){return d.followAnyArt($)}),[$,d]);var tn=(0,O.useMemo)((function(){if(!c)return{totBuildNumber:0};var e=function(e,n){var t,r={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},a=new Set,s=(0,Je.Z)(e);try{for(s.s();!(t=s.n()).done;){var l,c=t.value,o=Kn.Z.mainStatValue(c.mainStatKey,c.rarity,Math.max(Math.min(n,4*c.rarity),c.level)),u={id:c.id,set:c.setKey,values:(0,i.Z)((l={},(0,St.Z)(l,c.setKey,1),(0,St.Z)(l,c.mainStatKey,c.mainStatKey.endsWith("_")?o/100:o),l),Object.fromEntries(c.substats.map((function(e){return[e.key,e.key.endsWith("_")?e.accurateValue/100:e.accurateValue]}))))};delete u.values[""],r.values[c.slotKey].push(u),Object.keys(u.values).forEach((function(e){return a.add(e)}))}}catch(d){s.e(d)}finally{s.f()}return r.base=(0,ge.O)((0,he.Z)(a),(function(e){return 0})),r}(d._getArts().filter((function(e){if(e.level<be)return!1;if(e.level>ke)return!1;var n=ue[e.slotKey];return!(null!==n&&void 0!==n&&n.length&&!n.includes(e.mainStatKey))&&(e.location===c||!(e.exclude&&!pe)&&!(e.location&&!ve))})),xe),n=(0,he.Z)(Rt([ce])),t=(0,he.Z)(n).map((function(n){return Pn(wn(e,n))})).reduce((function(e,n){return e+n}),0);return Q&&{split:e,setPerms:n,totBuildNumber:t}}),[c,pe,ve,ue,ce,be,ke,Q,d,xe]),rn=tn.split,an=tn.setPerms,sn=tn.totBuildNumber;(0,O.useEffect)((function(){D(0)}),[sn]);var ln=(0,O.useRef)((function(){}));(0,O.useEffect)((function(){return function(){return ln.current()}}),[]);var cn=(0,O.useCallback)((0,fe.Z)(me().mark((function e(){var n,t,i,a,s,l,o,u,x,h,f,p,m,v,Z,g,y,b,k,w,C,S,P,_,O,E,A,R,M,T,I;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b=function(){var e=y.next(),n=e.done,t=e.value;return n?void 0:{command:"request",threshold:g.buildValues[ye-1],filter:t}},c&&de&&rn&&an){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,Ge.V)(d,c,xe,[]);case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(a=null===(n=(0,He.Qo)(i.teamData,c)[c])||void 0===n?void 0:n.target.data[0]){e.next=11;break}return e.abrupt("return");case 11:if(Object.assign(a,(0,He.b3)([a,At])),s=(0,ge.Hm)(null!==(t=a.display)&&void 0!==t?t:{},de)){e.next=15;break}return e.abrupt("return");case 15:for(l=s,o=Object.entries(oe).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return t.endsWith("_")&&(i/=100),{value:Y.ri.total[t],minimum:i}})).filter((function(e){return e.value&&e.minimum>-1/0})),u=performance.now(),j(!0),G(void 0),K(0),D(0),V(0),x=new Promise((function(e){return ln.current=e})),h=[].concat((0,he.Z)(o.map((function(e){return e.value}))),[s]),f=rn,p=sn,m=[].concat((0,he.Z)(o.map((function(e){return e.minimum}))),[-1/0]),le&&(h.push(Y.ri.total[le]),m.push(-1/0)),h=(0,Le.tL)(h,a,(function(e){return"dyn"!==(0,r.Z)(e.path,1)[0]})),v=pn(h,m,f,ye,new Set(ce.map((function(e){return e.key}))),{reaffine:!0,pruneArtRange:!0,pruneNodeRange:!0,pruneOrder:!0}),h=v.nodes,f=v.arts,Z=le?h.pop():void 0,s=h.pop(),g={buildCount:0,failedCount:0,skippedCount:p,buildValues:Array(ye).fill(0).map((function(e){return-1/0}))},an.forEach((function(e){return g.skippedCount-=Pn(wn(f,e))})),y=Kt(f,an,1===te?1/0:Math.min(p/te/4,1e6))[Symbol.iterator](),k=h.map((function(e,n){return{value:e,min:m[n]}})).filter((function(e){return e.min>-1/0})),w=[],C=function(e){var n=new Ke,t={command:"setup",id:"".concat(e),arts:f,optimizationTarget:s,plotBase:Z,maxBuilds:ye,filters:k};n.postMessage(t,void 0);var r=void 0,i=new Promise((function(e){return r=e}));n.onmessage=function(){var e=(0,fe.Z)(me().mark((function e(t){var i,a,s,l;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.data,e.t0=i.command,e.next="interim"===e.t0?4:"request"===e.t0?9:"finalize"===e.t0?12:15;break;case 4:return g.buildCount+=i.buildCount,g.failedCount+=i.failedCount,g.skippedCount+=i.skippedCount,i.buildValues&&((a=g.buildValues).push.apply(a,(0,he.Z)(i.buildValues)),g.buildValues.sort((function(e,n){return n-e})).splice(ye)),e.abrupt("break",16);case 9:return(s=b())?n.postMessage(s):(l={command:"finalize"},n.postMessage(l)),e.abrupt("break",16);case 12:return n.terminate(),r(i),e.abrupt("break",16);case 15:console.log("DEBUG",i);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x.then((function(){return n.terminate()})),w.push(i)},S=0;S<te;S++)C(S);return P=setInterval((function(){D(g.buildCount),V(g.skippedCount),K(performance.now()-u)}),100),e.next=43,Promise.any([Promise.all(w),x]);case 43:_=e.sent,clearInterval(P),ln.current=function(){},_?(le&&(A=Sn(_.map((function(e){return e.plotData}))),R=Y.ri.total[le],M=Object.values(A),"%"===X.ZP.unit(null===(O=l.info)||void 0===O?void 0:O.key)&&(M=M.map((function(e){return{value:100*e.value,plot:e.plot}}))),"%"===X.ZP.unit(null===(E=R.info)||void 0===E?void 0:E.key)&&(M=M.map((function(e){var n=e.value,t=e.plot;return{value:n,plot:100*(null!==t&&void 0!==t?t:0)}}))),G({valueNode:l,plotNode:R,data:M})),T=Cn(_.map((function(e){return e.builds})),ye),en({builds:T.map((function(e){return e.artifactIds})),buildDate:Date.now()}),I=performance.now()-u,D(g.buildCount),V(g.skippedCount),K(I),Ae.ZP.timing({category:"Build Generation",variable:"timing",value:I,label:sn.toString()})):(K(0),D(0),V(0)),j(!1);case 48:case"end":return e.stop()}}),e)}))),[c,d,sn,xe,ye,de,le,an,rn,en,ce,oe,te]),un=null!==(a=null===Ye||void 0===Ye?void 0:Ye.name)&&void 0!==a?a:"Character Name",dn=(0,O.useCallback)((function(e){en({plotBase:e}),G(void 0)}),[en]),xn=(0,O.useMemo)((function(){return Xe&&Ye&&l&&Ce&&{data:Xe,characterSheet:Ye,character:l,mainStatAssumptionLevel:xe,teamData:Ce,characterDispatch:ie}}),[Xe,Ye,l,Ce,ie,xe]);return(0,z.jsxs)(w.Z,{display:"flex",flexDirection:"column",gap:1,sx:{my:1},children:[$e&&(0,z.jsxs)(Oe.Z,{severity:"warning",variant:"filled",children:[" Opps! It looks like you haven't added any artifacts to GO yet! You should go to the ",(0,z.jsx)(Ee.Z,{component:Re.rU,to:"/artifact",children:"Artifacts"})," page and add some!"]}),xn&&(0,z.jsxs)(J.R.Provider,{value:xn,children:[(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:(0,z.jsx)(w.Z,{children:(0,z.jsx)(Be.Z,{characterKey:c})})}),(0,z.jsx)(f.ZP,{item:!0,xs:12,sm:6,lg:3,children:(0,z.jsxs)(A.Z,{children:[(0,z.jsxs)(h.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between",flexWrap:"wrap",alignItems:"center"},children:[(0,z.jsx)(v.Z,{children:"Main Stat"}),(0,z.jsx)(Te.Z,{placement:"top",title:(0,z.jsxs)(v.Z,{children:[(0,z.jsx)("strong",{children:"Level Assumption"})," changes mainstat value to be at least a specific level. Does not change substats."]}),children:(0,z.jsx)("span",{children:(0,z.jsx)(lt,{mainStatAssumptionLevel:xe,setmainStatAssumptionLevel:function(e){return en({mainStatAssumptionLevel:e})},disabled:Z})})})]}),(0,z.jsx)(Zt,{mainStatKeys:ue,onChangeMainStatKey:nn,disabled:Z})]})}),(0,z.jsxs)(f.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,z.jsx)(ot,{}),(0,z.jsx)(Ie.Z,{statFilters:oe,setStatFilters:function(e){return en({statFilters:e})},disabled:Z}),(0,z.jsx)(A.Z,{children:(0,z.jsx)(h.Z,{children:(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,z.jsx)(y.Z,{fullWidth:!0,onClick:function(){return en({useEquippedArts:!ve})},disabled:Z,startIcon:ve?(0,z.jsx)(Pe.Z,{}):(0,z.jsx)(De.Z,{}),children:"Use Equipped Artifacts"})}),(0,z.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,z.jsx)(y.Z,{fullWidth:!0,onClick:function(){return en({useExcludedArts:!pe})},disabled:Z,startIcon:pe?(0,z.jsx)(Pe.Z,{}):(0,z.jsx)(De.Z,{}),children:"Use Excluded Artifacts"})})]})})}),(0,z.jsxs)(A.Z,{children:[(0,z.jsx)(h.Z,{sx:{py:1},children:"Artifact Level Filter"}),(0,z.jsx)(g.Z,{}),(0,z.jsx)(h.Z,{children:(0,z.jsx)(Me.Z,{levelLow:be,levelHigh:ke,dark:!0,setLow:function(e){return en({levelLow:e})},setHigh:function(e){return en({levelHigh:e})},setBoth:function(e,n){return en({levelLow:e,levelHigh:n})},disabled:Z})})]})]}),(0,z.jsxs)(f.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,z.jsx)(tt,{disabled:Z}),ce.map((function(e,n){return n<=ce.filter((function(e){return e.key})).length&&(0,z.jsx)(at,{index:n,setFilters:ce,disabled:Z,onChange:function(e,n,t){return en({type:"setFilter",index:e,key:n,num:t})}},n)}))]})]}),(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,z.jsxs)(b.Z,{children:[(0,z.jsx)(y.Z,{disabled:!c||Z||!de||!sn||!(0,ge.Hm)(null===Xe||void 0===Xe?void 0:Xe.getDisplay(),de),color:c&&sn<=xt?"success":"warning",onClick:cn,startIcon:(0,z.jsx)(L.G,{icon:H.lTt}),children:"Generate"}),(0,z.jsxs)(q.Z,{disabled:Z||!c,title:(0,z.jsxs)("span",{children:[(0,z.jsx)("b",{children:ye})," ",1===ye?"Build":"Builds"]}),children:[(0,z.jsx)(k.Z,{children:(0,z.jsx)(v.Z,{variant:"caption",color:"info.main",children:"Decreasing the number of generated build will decrease build calculation time for large number of builds."})}),(0,z.jsx)(g.Z,{}),Fe.sY.map((function(e){return(0,z.jsxs)(k.Z,{onClick:function(){return en({maxBuildsToShow:e})},children:[e," ",1===e?"Build":"Builds"]},e)}))]}),(0,z.jsxs)(q.Z,{disabled:Z||!c,color:"info",title:(0,z.jsxs)("span",{children:[(0,z.jsx)("b",{children:te})," ",1===te?"Thread":"Threads"]}),children:[(0,z.jsx)(k.Z,{children:(0,z.jsx)(v.Z,{variant:"caption",color:"info.main",children:"Increasing the number of threads will speed up build time, but will use more CPU power."})}),(0,z.jsx)(g.Z,{}),(0,ge.w6)(1,navigator.hardwareConcurrency||4).reverse().map((function(e){return(0,z.jsxs)(k.Z,{onClick:function(){return re(e)},children:[e," ",1===e?"Thread":"Threads"]},e)}))]}),(0,z.jsx)(y.Z,{disabled:!Z,color:"error",onClick:function(){return ln.current()},startIcon:(0,z.jsx)(_e.Z,{}),children:"Cancel"})]})}),(0,z.jsxs)(f.ZP,{item:!0,children:[(0,z.jsx)("span",{children:"Optimization Target: "}),(0,z.jsx)(yt,{optimizationTarget:de,setTarget:function(e){return en({optimizationTarget:e})},disabled:!!Z})]})]}),!!c&&(0,z.jsx)(w.Z,{children:(0,z.jsx)(pt,{totBuildNumber:sn,generatingBuilds:Z,generationSkipped:I,generationProgress:P,generationDuration:R,characterName:un,maxBuildsToShow:ye})}),u&&(0,z.jsx)(w.Z,{children:(0,z.jsx)(on,{disabled:Z,chartData:W,plotBase:le,setPlotBase:dn})}),(0,z.jsx)(A.Z,{children:(0,z.jsx)(h.Z,{children:(0,z.jsxs)(w.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,z.jsx)(v.Z,{sx:{flexGrow:1},children:Ze?(0,z.jsxs)("span",{children:["Showing ",(0,z.jsx)("strong",{children:Ze.length})," Builds generated for ",un,". ",!!je&&(0,z.jsxs)("span",{children:["Build generated on: ",(0,z.jsx)("strong",{children:new Date(je).toLocaleString()})]})]}):(0,z.jsx)("span",{children:"Select a character to generate builds."})}),(0,z.jsx)(y.Z,{disabled:!Ze.length,color:"error",onClick:function(){return en({builds:[],buildDate:0})},children:"Clear Builds"}),(0,z.jsxs)(ae.Z,{exclusive:!0,value:Qe,onChange:function(e,n){return ie({compareData:n})},size:"small",children:[(0,z.jsx)(p.Z,{value:!1,disabled:!Qe,children:(0,z.jsx)("small",{children:"Show New artifact Stats"})}),(0,z.jsx)(p.Z,{value:!0,disabled:Qe,children:(0,z.jsx)("small",{children:"Compare against equipped artifacts"})})]})]})})}),(0,z.jsx)(Ht,{buildsArts:we,character:l,characterKey:c,characterSheet:Ye,data:Xe,compareData:Qe,mainStatAssumptionLevel:xe,characterDispatch:ie,disabled:!!Z})]})]})}function Ht(e){var n=e.buildsArts,t=e.character,r=e.characterKey,i=e.characterSheet,a=e.data,s=e.compareData,l=e.mainStatAssumptionLevel,c=e.characterDispatch,o=e.disabled;return(0,O.useMemo)((function(){return(0,z.jsx)(O.Suspense,{fallback:(0,z.jsx)(x.Z,{variant:"rectangular",width:"100%",height:600}),children:null===n||void 0===n?void 0:n.map((function(e,n){return t&&r&&i&&a&&(0,z.jsx)(Lt,{characterKey:r,character:t,build:e,characterSheet:i,oldData:a,mainStatAssumptionLevel:l,characterDispatch:c,children:(0,z.jsx)(Xn,{index:n,compareBuild:s,disabled:o})},n+e.join())}))})}),[n,t,r,i,a,s,l,c,o])}function Lt(e){var n=e.children,t=e.characterKey,r=e.character,i=e.build,a=e.characterDispatch,s=e.mainStatAssumptionLevel,l=void 0===s?0:s,c=e.characterSheet,o=e.oldData,u=(0,Ge.Z)(t,l,i);return u?(0,z.jsx)(J.R.Provider,{value:{characterSheet:c,character:r,characterDispatch:a,mainStatAssumptionLevel:l,data:u[t].target,teamData:u,oldData:o},children:n}):null}var Vt=t(53561),Bt=t(95193),Nt=t(30418),Wt=t(90543),zt=(0,O.lazy)((function(){return t.e(254).then(t.bind(t,2254))})),Gt=(0,O.lazy)((function(){return Promise.all([t.e(729),t.e(731),t.e(292)]).then(t.bind(t,29292))}));var Ft=function(){var e=(0,O.useContext)(J.R),n=e.teamData,t=e.data,i=e.character,a=e.character,s=a.equippedWeapon,l=a.key,c=e.mainStatAssumptionLevel,o=n[l].weaponSheet,u=(0,O.useState)(""),d=(0,r.Z)(u,2),x=d[0],p=d[1],Z=(0,O.useCallback)((function(){return p(s)}),[s]),j=(0,O.useCallback)((function(){return p("")}),[]);(0,O.useEffect)((function(){x&&x!==s&&p(s)}),[x,s]);var b=(0,O.useState)(""),k=(0,r.Z)(b,2),C=k[0],P=k[1],D=(0,O.useCallback)((function(e){return P(e)}),[]),_=(0,O.useCallback)((function(){return P("")}),[]),E=(0,O.useContext)(qe.t).database,R=(0,Tn.Z)(ve.y.getAll,[]),K=(0,ze.Z)(),M=(0,r.Z)(K,2)[1];(0,O.useEffect)((function(){return E.followAnyArt(M)}));var T=(0,O.useCallback)((function(){i&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&E.equipArtifacts(i.key,(0,ge.O)(Q.eV,(function(e){return""})))}),[i,E]),I=Q.eV.map((function(e){return t.get(Y.ri.art[e].id).value})),q=(0,O.useMemo)((function(){return R&&ve.y.setEffects(R,t)}),[R,t]),H=(0,Nt.Z)(),L=(0,Bt.Z)(H.breakpoints.up("xl")),V=(0,O.useMemo)((function(){return R&&q&&Object.entries(q).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,z.jsxs)(A.Z,{sx:{flexGrow:1},children:[(0,z.jsx)(S.Z,{avatar:(0,z.jsx)(ue.Z,{size:2,sx:{m:-1},src:R[t].defIconSrc}),title:R[t].name,titleTypographyProps:{variant:"subtitle1"}}),(0,z.jsx)(g.Z,{}),(0,z.jsx)(h.Z,{children:(0,z.jsx)(f.ZP,{container:!0,spacing:1,flexDirection:"column",height:"100%",children:(0,z.jsx)(f.ZP,{item:!0,display:"flex",flexDirection:"column",gap:2,children:i.map((function(e){return(0,z.jsx)(et,{setKey:t,setNumKey:e},t+e)}))})})})]},t)}))}),[R,q]),B=(0,O.useMemo)((function(){return o.document&&(0,z.jsx)(A.Z,{children:(0,z.jsx)(h.Z,{children:(0,z.jsx)($n.Z,{sections:o.document})})})}),[o]);return(0,z.jsxs)(w.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,z.jsx)(O.Suspense,{fallback:!1,children:(0,z.jsx)(zt,{weaponId:x,footer:!0,onClose:j})}),(0,z.jsx)(O.Suspense,{fallback:!1,children:(0,z.jsx)(Gt,{artifactIdToEdit:C,cancelEdit:_})}),(0,z.jsxs)(A.Z,{children:[(0,z.jsx)(h.Z,{children:(0,z.jsx)(Wn,{})}),(0,z.jsx)(g.Z,{}),(0,z.jsx)(h.Z,{children:(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(y.Z,{color:"error",onClick:T,children:"Unequip all artifacts"})}),(0,z.jsx)(f.ZP,{item:!0,flexGrow:1}),(0,z.jsx)(f.ZP,{item:!0,children:!!c&&(0,z.jsx)(m.Z,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:(0,z.jsx)(v.Z,{children:(0,z.jsxs)("strong",{children:["Assume Main Stats are Level ",c]})})})})]})})]}),(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[L&&(0,z.jsxs)(f.ZP,{item:!0,xs:12,md:12,xl:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[B,V]}),(0,z.jsxs)(f.ZP,{item:!0,xs:12,md:12,xl:9,container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:(0,z.jsx)(Wt.Z,{weaponId:s,onEdit:Z,canEquip:!0})}),I.map((function(e){return!!e&&(0,z.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,z.jsx)(Yn.Z,{artifactId:e,mainStatAssumptionLevel:c,onEdit:D})},e)}))]}),!L&&(0,z.jsxs)(f.ZP,{item:!0,xs:12,md:12,xl:3,container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,xs:12,md:6,lg:4,children:B}),(0,z.jsx)(f.ZP,{item:!0,xs:12,md:6,lg:4,children:V})]})]})]})},Ut=t(14361),Jt=t(90690),Yt=t(13400),Xt=t(58751),Qt=t(74954),$t=t(42700);function er(){var e,n=(0,O.useContext)(J.R),t=n.data,r=n.characterSheet,a=n.character,s=n.character.key,l=(0,Ne.Z)(s),c=t.get(Y.ri.charEle).value,o=r.weaponTypeKey,u=t.get(Y.ri.lvl).value,d=t.get(Y.ri.asc).value,x=t.get(Y.ri.constellation).value,p={auto:t.get(Y.ri.total.auto).value,skill:t.get(Y.ri.total.skill).value,burst:t.get(Y.ri.total.burst).value},m={auto:t.get(Y.ri.bonus.auto).value,skill:t.get(Y.ri.bonus.skill).value,burst:t.get(Y.ri.bonus.burst).value};return(0,z.jsxs)(f.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,z.jsx)(f.ZP,{item:!0,xs:8,md:2.5,children:(0,z.jsxs)(A.Z,{children:[(0,z.jsx)(w.Z,{src:r.cardImg,component:"img",width:"100%",height:"auto"}),(0,z.jsxs)(h.Z,{children:[(0,z.jsxs)(v.Z,{variant:"h5",children:[r.name,"\xa0",(0,z.jsx)(ue.Z,{sx:{pr:.5},src:null===(e=Rn.Z.weaponTypes)||void 0===e?void 0:e[o]}),ee.Z[c],(0,z.jsx)(Yt.Z,{sx:{p:.5,mt:-.5},onClick:function(){return l({favorite:!a.favorite})},children:a.favorite?(0,z.jsx)(Ut.Z,{}):(0,z.jsx)(Jt.Z,{})})]}),(0,z.jsx)(v.Z,{variant:"h6",children:(0,z.jsx)(nt.t,{stars:r.rarity,colored:!0})}),(0,z.jsxs)(v.Z,{variant:"h5",children:["Lvl. ",Ze.ZP.getLevelString(u,d)]}),(0,z.jsx)(f.ZP,{container:!0,spacing:1,mt:1,children:["auto","skill","burst"].map((function(e){var n;return(0,z.jsx)(f.ZP,{item:!0,xs:4,children:(0,z.jsx)(Xt.Z,{badgeContent:p[e],color:m[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,z.jsx)(w.Z,{component:"img",src:null===(n=r.getTalentOfKey(e,c))||void 0===n?void 0:n.img,width:"100%",height:"auto"})})},e)}))}),(0,z.jsx)(v.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:r.constellationName}),(0,z.jsx)(f.ZP,{container:!0,spacing:1,children:(0,ge.w6)(1,6).map((function(e){var n;return(0,z.jsx)(f.ZP,{item:!0,xs:4,children:(0,z.jsx)(w.Z,{component:"img",src:null===(n=r.getTalentOfKey("constellation".concat(e),c))||void 0===n?void 0:n.img,sx:(0,i.Z)({cursor:"pointer"},x>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto",onClick:function(){return l({constellation:e===x?e-1:e})}})},e)}))}),(0,z.jsx)(v.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:"Teammates"}),(0,z.jsx)(f.ZP,{container:!0,columns:3,spacing:1,children:(0,ge.w6)(0,2).map((function(e){return(0,z.jsx)(f.ZP,{item:!0,xs:1,height:"100%",children:(0,z.jsx)($t.Z,{characterKey:a.team[e],index:e})},e)}))})]})]})}),(0,z.jsxs)(f.ZP,{item:!0,xs:12,md:9.5,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,xs:6,sm:4,md:3,lg:2,children:(0,z.jsx)(Un,{weaponId:a.equippedWeapon,BGComponent:A.Z})}),Q.eV.map((function(e){return(0,z.jsx)(f.ZP,{item:!0,xs:6,sm:4,md:3,lg:2,children:(0,z.jsx)(Hn,{artifactId:t.get(Y.ri.art[e].id).value,slotKey:e,BGComponent:A.Z})},e)}))]}),(0,z.jsx)(ur,{})]})]})}var nr=["eleMas","critRate_","critDMG_","enerRech_","heal_"],tr=[].concat(["atk","hp","def"],nr).map((function(e){return Y.ri.total[e]})),rr=["atk_","atk","hp_","hp","def_","def"].concat(nr),ir=[].concat((0,he.Z)(Q.Kj.map((function(e){return Y.ri.total["".concat(e,"_dmg_")]}))),(0,he.Z)(Q.Kj.map((function(e){return Y.ri.total["".concat(e,"_res_")]}))),(0,he.Z)(["stamina","incHeal_","shield_","cdRed_"].map((function(e){return Y.ri.total[e]})))),ar=ir.map((function(e){return e.info.key})),sr=[Y.ri.total.all_dmg_].concat((0,he.Z)(Q.Kj.map((function(e){return Y.ri.total["".concat(e,"_enemyRes_")]}))),[Y.ri.total.normal_dmg_,Y.ri.total.normal_critRate_,Y.ri.total.charged_dmg_,Y.ri.total.charged_critRate_,Y.ri.total.plunging_dmg_,Y.ri.total.plunging_critRate_,Y.ri.total.skill_dmg_,Y.ri.total.skill_critRate_,Y.ri.total.burst_dmg_,Y.ri.total.burst_critRate_],(0,he.Z)(Object.keys(Qt.Ne).map((function(e){return Y.ri.total["".concat(e,"_dmg_")]}))),(0,he.Z)(Object.keys(Qt.UT).map((function(e){return Y.ri.total["".concat(e,"_dmg_")]}))),(0,he.Z)(["moveSPD_","atkSPD_","weakspotDMG_"].map((function(e){return Y.ri.total[e]}))),[Y.ri.total.dmgRed_]),lr=sr.map((function(e){return e.info.key})),cr={xs:12,sm:6,md:6,lg:4};function or(e){var n=e.nodes,t=e.statBreakpoint,r=e.extra,a=(0,O.useContext)(J.R),s=a.data,l=a.oldData;return(0,z.jsxs)(f.ZP,{container:!0,columnSpacing:{xs:2,lg:3},rowSpacing:1,children:[n.map((function(e){var n,r;return(0,z.jsx)(f.ZP,(0,i.Z)((0,i.Z)({item:!0},t),{},{children:(0,z.jsx)(Nn.JW,{node:s.get(e),oldValue:null===l||void 0===l||null===(r=l.get(e))||void 0===r?void 0:r.value})}),null===(n=e.info)||void 0===n?void 0:n.key)})),r]})}function ur(){var e=(0,O.useContext)(J.R),n=e.data,t=e.character,r=e.character.key,a=(0,Ne.Z)(r),s=n.get(Y.ri.special);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(dr,{title:"Main Stats",content:(0,z.jsx)(or,{statBreakpoint:cr,nodes:tr,extra:s&&(0,z.jsxs)(f.ZP,(0,i.Z)((0,i.Z)({item:!0},cr),{},{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[(0,z.jsxs)("span",{children:[(0,z.jsx)("b",{children:"Special:"})," ",(0,z.jsxs)(T.Z,{color:s.info.variant,children:[s.info.key&&ee.Z[s.info.key]," ",s.info.key&&X.ZP.get(s.info.key)]})]}),(0,z.jsx)("span",{children:(0,X.EC)(s.value,s.unit)})]}))}),editContent:(0,z.jsx)(f.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:rr.map((function(e){var n,r=X.ZP.get(e);return(0,z.jsx)(f.ZP,{item:!0,xs:12,lg:6,children:(0,z.jsx)(U,{name:(0,z.jsxs)("span",{children:[ee.Z[e]," ",r]}),placeholder:X.ZP.getStr(e),value:null!==(n=t.bonusStats[e])&&void 0!==n?n:0,percent:"%"===X.ZP.unit(e),onValueChange:function(n){return a({type:"editStats",statKey:e,value:n})}})},e)}))})}),(0,z.jsx)(dr,{title:"Other Stats",content:(0,z.jsx)(or,{statBreakpoint:cr,nodes:ir}),editContent:(0,z.jsx)(f.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:ar.map((function(e){var n,r=X.ZP.get(e);return(0,z.jsx)(f.ZP,{item:!0,xs:12,lg:6,children:(0,z.jsx)(U,{name:(0,z.jsxs)("span",{children:[ee.Z[e]," ",r]}),placeholder:X.ZP.getStr(e),value:null!==(n=t.bonusStats[e])&&void 0!==n?n:0,percent:"%"===X.ZP.unit(e),defaultValue:void 0,onValueChange:function(n){return a({type:"editStats",statKey:e,value:n})}})},e)}))})}),(0,z.jsx)(dr,{title:"Misc Stats",content:(0,z.jsx)(or,{statBreakpoint:{xs:12,sm:6,md:6},nodes:sr}),editContent:(0,z.jsx)(f.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:lr.map((function(e){var n,r=X.ZP.get(e);return(0,z.jsx)(f.ZP,{item:!0,xs:12,lg:6,children:(0,z.jsx)(U,{name:(0,z.jsxs)("span",{children:[ee.Z[e]," ",r]}),placeholder:X.ZP.getStr(e),value:null!==(n=t.bonusStats[e])&&void 0!==n?n:0,percent:"%"===X.ZP.unit(e),onValueChange:function(n){return a({type:"editStats",statKey:e,value:n})}})},e)}))})})]})}function dr(e){var n=e.title,t=e.content,i=e.editContent,a=(0,O.useState)(!1),s=(0,r.Z)(a,2),l=s[0],c=s[1];return(0,z.jsxs)(A.Z,{children:[(0,z.jsx)(h.Z,{sx:{py:1},children:(0,z.jsxs)(w.Z,{display:"flex",justifyContent:"space-between",children:[(0,z.jsx)(v.Z,{variant:"subtitle1",children:n}),(0,z.jsx)(y.Z,{size:"small",color:l?"error":"info",onClick:function(){return c(!l)},children:(0,z.jsxs)("span",{children:[(0,z.jsx)(L.G,{icon:l?H.r6l:H.Xcf})," ",l?"EXIT":"Edit Stats"]})})]})}),(0,z.jsx)(g.Z,{}),(0,z.jsx)(h.Z,{children:l?i:t})]})}var xr={xs:12,sm:6,md:4};function hr(){var e=(0,O.useContext)(J.R),n=e.data,t=e.character,a=e.characterSheet,s=(0,Ne.Z)(t.key),l=n.get(Y.ri.charEle).value,c=n.get(Y.ri.asc).value,o=n.get(Y.ri.constellation).value,u=(0,Nt.Z)(),d=(0,Bt.Z)(u.breakpoints.up("lg")),x=(0,O.useMemo)((function(){return(0,ge.w6)(1,6).map((function(e){return(0,z.jsx)(mr,{talentKey:"constellation".concat(e),subtitle:"Constellation Lv. ".concat(e),onClickTitle:function(){return s({constellation:e===o?e-1:e})}})}))}),[o,s]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(fr,{}),(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[d&&(0,z.jsxs)(f.ZP,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,z.jsx)(A.Z,{children:(0,z.jsx)(h.Z,{children:(0,z.jsxs)(v.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",o]})})}),x.map((function(e,n){return(0,z.jsx)(w.Z,{sx:{opacity:o>=n+1?1:.5},children:e},n)}))]}),(0,z.jsxs)(f.ZP,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var n=(0,r.Z)(e,2),t=n[0],a=n[1];return(0,z.jsx)(f.ZP,(0,i.Z)((0,i.Z)({item:!0},xr),{},{children:(0,z.jsx)(mr,{talentKey:t,subtitle:a})}),t)})),!!a.getTalentOfKey("sprint",l)&&(0,z.jsx)(f.ZP,(0,i.Z)((0,i.Z)({item:!0},xr),{},{children:(0,z.jsx)(mr,{talentKey:"sprint",subtitle:"Alternative Sprint"})})),!!a.getTalentOfKey("passive",l)&&(0,z.jsx)(f.ZP,(0,i.Z)((0,i.Z)({item:!0},xr),{},{children:(0,z.jsx)(mr,{talentKey:"passive",subtitle:"Passive"})})),[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var n=(0,r.Z)(e,3),t=n[0],s=n[1],o=n[2],u=c>=o;return a.getTalentOfKey(t,l)?(0,z.jsx)(f.ZP,(0,i.Z)((0,i.Z)({item:!0,style:{opacity:u?1:.5}},xr),{},{children:(0,z.jsx)(mr,{talentKey:t,subtitle:s})}),t):null}))]}),!d&&(0,z.jsxs)(f.ZP,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,xs:12,children:(0,z.jsx)(A.Z,{children:(0,z.jsx)(h.Z,{children:(0,z.jsxs)(v.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",o]})})})}),x.map((function(e,n){return(0,z.jsx)(f.ZP,(0,i.Z)((0,i.Z)({item:!0,sx:{opacity:o>=n+1?1:.5}},xr),{},{children:e}),n)}))]})]})]})}function fr(){var e=(0,O.useContext)(J.R).data.getDisplay().reaction;return(0,z.jsx)(A.Z,{sx:{mb:1},children:(0,z.jsx)(h.Z,{children:(0,z.jsx)(f.ZP,{container:!0,spacing:1,children:Object.entries(e).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(E.Z,{children:(0,z.jsx)(h.Z,{sx:{p:1,"&:last-child":{pb:1}},children:(0,z.jsx)(Nn.JW,{node:i})})})},t)}))})})})}var pr=[1,1,2,4,6,8,10];function mr(e){var n=e.talentKey,t=e.subtitle,r=e.onClickTitle,i=(0,O.useContext)(J.R),a=i.data,s=i.character.talent,l=i.characterSheet,c=i.characterDispatch,o=(0,O.useCallback)((function(e){return(0,z.jsx)(An.Z,{onClick:r,children:e})}),[r]),u=null;if(n in s){var d=a.get(Y.ri.bonus[n]).value,x=a.get(Y.ri.total[n]).value,p=a.get(Y.ri.asc).value;u=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{sx:{py:1},children:(0,z.jsx)(q.Z,{fullWidth:!0,title:"Talent Lv. ".concat(x),color:d?"info":"primary",children:(0,ge.w6)(1,pr[p]).map((function(e){return(0,z.jsxs)(k.Z,{selected:s[n]===e,disabled:s[n]===e,onClick:function(){return t=e,s[n]=t,void c({talent:s});var t},children:["Talent Lv. ",e+d]},e)}))})}),(0,z.jsx)(g.Z,{})]})}var m=l.getTalentOfKey(n,a.get(Y.ri.charEle).value);return(0,z.jsxs)(A.Z,{sx:{height:"100%"},children:[u,(0,z.jsxs)(h.Z,{children:[(0,z.jsx)(qn.Z,{condition:!!r,wrapper:o,children:(0,z.jsxs)(f.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(w.Z,{component:"img",src:null===m||void 0===m?void 0:m.img,sx:{width:60,height:"auto"}})}),(0,z.jsxs)(f.ZP,{item:!0,flexGrow:1,sx:{pl:1},children:[(0,z.jsx)(v.Z,{variant:"h6",children:null===m||void 0===m?void 0:m.name}),(0,z.jsx)(v.Z,{variant:"subtitle1",children:t})]})]})}),null!==m&&void 0!==m&&m.sections?(0,z.jsx)($n.Z,{sections:m.sections,hideDesc:!0}):null]})]})}var vr=t(43992),Zr=t(36944),jr=t(11741);function gr(){return(0,z.jsx)(_n.Z,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsxs)(f.ZP,{item:!0,xs:12,md:6,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,z.jsx)(yr,{}),(0,z.jsx)(br,{})]}),(0,ge.w6)(0,2).map((function(e){return(0,z.jsx)(f.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,z.jsx)(kr,{index:e})},e)}))]})})}function yr(){var e,n,t,i=(0,O.useContext)(J.R),a=i.data,s=i.oldData,l=a.getTeamBuff(),c=[];return Object.entries(null!==(e=l.total)&&void 0!==e?e:{}).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return!i.isEmpty&&0!==i.value&&c.push([["total",t],i])})),Object.entries(null!==(n=l.premod)&&void 0!==n?n:{}).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return!i.isEmpty&&0!==i.value&&c.push([["premod",t],i])})),Object.entries(null!==(t=l.enemy)&&void 0!==t?t:{}).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return!i.isEmpty&&0!==i.value&&c.push([["enemy",t],i])})),c.length?(0,z.jsxs)(A.Z,{children:[(0,z.jsx)(h.Z,{children:"Team Buffs"}),(0,z.jsx)(g.Z,{}),(0,z.jsx)(h.Z,{children:(0,z.jsx)(f.ZP,{container:!0,children:c.map((function(e,n){var t,i=(0,r.Z)(e,2),a=i[0],l=i[1];return l&&(0,z.jsx)(f.ZP,{item:!0,xs:12,children:(0,z.jsx)(Nn.JW,{node:l,oldValue:null===(t=(0,ge.Hm)(null===s||void 0===s?void 0:s.getTeamBuff(),a))||void 0===t?void 0:t.value})},l.info.key)}))})})]}):null}function br(){var e=(0,O.useContext)(J.R).data;return(0,z.jsx)(z.Fragment,{children:jr.J.map((function(n,t){return(0,z.jsxs)(A.Z,{sx:{opacity:n.canShow(e)?1:.5},children:[(0,z.jsx)(S.Z,{title:n.name,action:n.icon,titleTypographyProps:{variant:"subtitle2"}}),n.canShow(e)&&(0,z.jsx)(g.Z,{}),n.canShow(e)&&(0,z.jsx)(h.Z,{children:(0,z.jsx)($n.Z,{sections:n.sections,teamBuffOnly:!0})})]},t)}))})}function kr(e){var n=e.index,t=(0,O.useContext)(J.R),r=t.character,i=t.teamData,a=t.characterDispatch,s=r.key,l=r.team[n],c=(0,Ne.Z)(l),o=(0,Vt.Z)(),u=i[l],d=u&&c&&{character:u.character,characterSheet:u.characterSheet,data:u.target,teamData:i,mainStatAssumptionLevel:0,characterDispatch:c};return(0,z.jsxs)(A.Z,{children:[(0,z.jsx)(h.Z,{children:(0,z.jsx)(Zr.Z,{fullWidth:!0,value:l,onChange:function(e){return a({type:"team",index:n,charKey:e})},filter:function(e,n){return n!==s&&!r.team.includes(n)},unSelectText:"Teammate ".concat(n+1),unSelectIcon:(0,z.jsx)(vr.Z,{})})}),d&&(0,z.jsx)(J.R.Provider,{value:d,children:(0,z.jsx)(Be.Z,{characterKey:l,onClickHeader:o,artifactChildren:(0,z.jsx)(wr,{}),weaponChildren:(0,z.jsx)(Cr,{}),characterChildren:(0,z.jsx)(Sr,{}),isTeammateCard:!0})})]})}function wr(){var e=(0,O.useContext)(J.R).data,n=(0,Tn.Z)(ve.y.getAll,[]),t=(0,O.useMemo)((function(){return n&&Object.entries(ve.y.setEffects(n,e)).flatMap((function(e){var t=(0,r.Z)(e,2),i=t[0];return t[1].flatMap((function(e){return n[i].setEffectDocument(e)}))}))}),[n,e]);return t?(0,z.jsx)($n.Z,{sections:t,teamBuffOnly:!0}):null}function Cr(){var e=(0,O.useContext)(J.R),n=e.teamData[e.character.key].weaponSheet;return n.document?(0,z.jsx)($n.Z,{sections:n.document,teamBuffOnly:!0}):null}function Sr(){var e=(0,O.useContext)(J.R),n=e.data,t=e.teamData[e.character.key].characterSheet.getTalent(n.get(Y.ri.charEle).value),r=Object.values(t.sheets).flatMap((function(e){return e.sections}));return r?(0,z.jsx)($n.Z,{sections:r,teamBuffOnly:!0}):null}var Pr=["children","current","value"];function Dr(e){var n=e.children,t=e.current,r=e.value,s=(0,a.Z)(e,Pr);return r!==t?null:(0,z.jsx)(O.Suspense,{fallback:(0,z.jsx)(x.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,z.jsx)("div",(0,i.Z)((0,i.Z)({role:"tabpanel",hidden:r!==t,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},s),{},{children:n}))})}function _r(e){var n,t,i=e.characterKey,a=e.footer,d=e.newteamData,x=e.mainStatAssumptionLevel,y=void 0===x?0:x,b=e.onClose,k=e.tabName,w=(0,Ge.Z)(i,y),C=null!==(n=null===w||void 0===w?void 0:w[i])&&void 0!==n?n:{},S=C.character,P=C.characterSheet,D=C.target,_=(0,O.useState)(k||(d?"newartifacts":"character")),R=(0,r.Z)(_,2),K=R[0],T=R[1],I=(0,O.useCallback)((function(e,n){return T(n)}),[T]),q=(0,Ne.Z)(null!==(t=null===S||void 0===S?void 0:S.key)&&void 0!==t?t:""),H=(null!==S&&void 0!==S?S:{}).compareData,L=(0,O.useMemo)((function(){if(w&&S&&P&&D)return{character:S,characterSheet:P,mainStatAssumptionLevel:y,data:d?d[i].target:D,teamData:d||w,oldData:H&&d?D:void 0,characterDispatch:q}}),[S,P,y,d,D,w,q,i,H]);return w&&S&&P&&D&&L?(0,z.jsx)(E.Z,{children:(0,z.jsxs)(J.R.Provider,{value:L,children:[(0,z.jsxs)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(Or,{})}),(0,z.jsx)(f.ZP,{item:!0,children:!!d&&(0,z.jsxs)(ae.Z,{exclusive:!0,value:H,onChange:function(e,n){return q({compareData:n})},size:"small",children:[(0,z.jsx)(p.Z,{value:!1,disabled:!H,children:(0,z.jsx)("small",{children:"Show New artifact Stats"})}),(0,z.jsx)(p.Z,{value:!0,disabled:H,children:(0,z.jsx)("small",{children:"Compare against equipped artifacts"})})]})}),(0,z.jsx)(f.ZP,{item:!0,flexGrow:1}),!!y&&(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(m.Z,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:(0,z.jsx)(v.Z,{children:(0,z.jsxs)("strong",{children:["Assume Main Stats are Level ",y]})})})}),!!b&&(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(M.Z,{onClick:b})})]}),(0,z.jsx)(A.Z,{children:(0,z.jsxs)(Z.Z,{onChange:I,value:K,variant:"scrollable",allowScrollButtonsMobile:!0,children:[(0,z.jsx)(j.Z,{sx:{minWidth:"20%"},value:"character",label:"Character",icon:(0,z.jsx)(s.Z,{})}),(0,z.jsx)(j.Z,{sx:{minWidth:"20%"},value:"talent",label:"Talents",icon:(0,z.jsx)(l.Z,{})}),(0,z.jsx)(j.Z,{sx:{minWidth:"20%"},value:"equip",label:"Equipment",icon:(0,z.jsx)(c.Z,{})}),(0,z.jsx)(j.Z,{sx:{minWidth:"20%"},value:"buffs",label:"Team Buffs",icon:(0,z.jsx)(o.Z,{})}),(0,z.jsx)(j.Z,{sx:{minWidth:"20%"},value:"build",label:"Build",icon:(0,z.jsx)(u.Z,{})})]})}),(0,z.jsx)(Er,{}),(0,z.jsx)(ne,{}),(0,z.jsx)(Dr,{value:"character",current:K,children:(0,z.jsx)(er,{})}),(0,z.jsx)(Dr,{value:"equip",current:K,children:(0,z.jsx)(Ft,{})}),(0,z.jsx)(Dr,{value:"talent",current:K,children:(0,z.jsx)(hr,{})}),(0,z.jsx)(Dr,{value:"buffs",current:K,children:(0,z.jsx)(gr,{})}),(0,z.jsx)(Dr,{value:"build",current:K,children:(0,z.jsx)(qt,{})})]}),!!a&&(0,z.jsx)(g.Z,{}),a&&(0,z.jsx)(h.Z,{children:a})]})}):(0,z.jsx)(z.Fragment,{})}function Or(){var e,n=(0,O.useContext)(J.R),t=n.character,i=n.characterSheet,a=n.characterDispatch,s=(0,O.useState)(!1),l=(0,r.Z)(s,2),c=l[0],o=l[1],u=(0,Vt.Z)(),d=(0,O.useCallback)((function(e){e=(0,ge.uZ)(e,1,90);var n=de.SJ.findIndex((function(n){return e<=n}));a({level:e,ascension:n})}),[a]),x=(0,O.useCallback)((function(){if(t){var e=t.level,n=void 0===e?1:e,r=t.ascension,i=void 0===r?0:r,s=de.SJ.findIndex((function(e){return 90!==n&&n===e}));a(i===s?{ascension:i+1}:{ascension:s})}}),[a,t]),h=t.elementKey,p=void 0===h?"anemo":h,m=t.level,v=void 0===m?1:m,Z=t.ascension,j=void 0===Z?0:Z;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(R.w,{show:c,onHide:function(){return o(!1)},onSelect:u}),(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(y.Z,{onClick:function(){return o(!0)},startIcon:(0,z.jsx)(K.Z,{src:null===i||void 0===i?void 0:i.thumbImgSide}),children:null!==(e=null===i||void 0===i?void 0:i.name)&&void 0!==e?e:"Select a Character"})}),(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsxs)(b.Z,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[(null===i||void 0===i?void 0:i.sheet)&&"talents"in(null===i||void 0===i?void 0:i.sheet)&&(0,z.jsx)(q.Z,{title:(0,z.jsx)("strong",{children:(0,z.jsx)(T.Z,{color:p,children:(0,xe.Oy)("element.".concat(p))})}),children:Object.keys(i.sheet.talents).map((function(e){return(0,z.jsx)(k.Z,{selected:p===e,disabled:p===e,onClick:function(){return a({elementKey:e})},children:(0,z.jsx)("strong",{children:(0,z.jsx)(T.Z,{color:e,children:(0,xe.Oy)("element.".concat(e))})})},e)}))}),(0,z.jsx)(I.CC,{children:(0,z.jsx)(I.ZP,{onChange:d,value:v,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2},disabled:!i})}),(0,z.jsx)(y.Z,{sx:{pl:1},disabled:!(0,de.ek)(v)||!i,onClick:x,children:(0,z.jsxs)("strong",{children:["/ ",de.SJ[j]]})}),(0,z.jsx)(q.Z,{title:"Select Level",disabled:!i,children:de.D4.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],s=t===de.SJ[i]?"Lv. ".concat(t):"Lv. ".concat(t,"/").concat(de.SJ[i]),l=t===v&&i===j;return(0,z.jsx)(k.Z,{selected:l,disabled:l,onClick:function(){return a({level:t,ascension:i})},children:s},"".concat(t,"/").concat(i))}))})]})})]})]})}function Er(){var e=(0,O.useState)(!1),n=(0,r.Z)(e,2),t=n[0],i=n[1],a=(0,O.useCallback)((function(){return i(!t)}),[i,t]);return(0,z.jsxs)(A.Z,{children:[(0,z.jsxs)(h.Z,{sx:{display:"flex",gap:1},children:[(0,z.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(oe,{size:"small"})}),(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(le,{})}),(0,z.jsx)(f.ZP,{item:!0,children:(0,z.jsx)(ce,{size:"small"})})]}),(0,z.jsxs)(w.Z,{display:"flex",gap:1,children:[(0,z.jsxs)(w.Z,{children:[(0,z.jsxs)(v.Z,{variant:"subtitle2",children:["Formulas ","&"]}),(0,z.jsx)(v.Z,{variant:"subtitle2",children:"Calculations"})]}),(0,z.jsx)($.Z,{expand:t,onClick:a,"aria-expanded":t,"aria-label":"show more",size:"small",sx:{p:0},children:(0,z.jsx)(d.Z,{})})]})]}),(0,z.jsx)(C.Z,{in:t,timeout:"auto",unmountOnExit:!0,children:(0,z.jsx)(h.Z,{sx:{pt:0},children:(0,z.jsx)(Ar,{})})})]})}function Ar(){var e=Se((0,O.useContext)(J.R).data);return(0,z.jsx)(O.Suspense,{fallback:(0,z.jsx)(x.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,z.jsx)(w.Z,{sx:{mr:-1,mb:-1},children:e.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,z.jsx)(Rr,{displayNs:i,sectionKey:t},t)}))})})}function Rr(e){var n=e.sectionKey,t=e.displayNs,i=(0,O.useContext)(J.R).data,a=(0,Tn.Z)(we(i,n),[i,n]);if(!a)return null;if(Object.entries(t).every((function(e){var n=(0,r.Z)(e,2);n[0];return n[1].isEmpty})))return null;var s=a.title,l=a.icon,c=a.action;return(0,z.jsxs)(E.Z,{sx:{mb:1},children:[(0,z.jsx)(S.Z,{avatar:l&&(0,z.jsx)(ue.Z,{size:2,sx:{m:-1},src:l}),title:s,action:c,titleTypographyProps:{variant:"subtitle1"}}),(0,z.jsx)(g.Z,{}),(0,z.jsx)(h.Z,{children:Object.entries(t).map((function(e){var n,t=(0,r.Z)(e,2),i=t[0],a=t[1];return!a.isEmpty&&(0,z.jsxs)(P.Z,{sx:{bgcolor:"contentLight.main"},children:[(0,z.jsx)(D.Z,{expandIcon:(0,z.jsx)(d.Z,{}),children:(0,z.jsxs)(v.Z,{children:[(0,z.jsx)(T.Z,{color:a.info.variant,children:X.ZP.get(null!==(n=a.info.key)&&void 0!==n?n:"")})," ",(0,z.jsx)("strong",{children:(0,X.EC)(a.value,a.unit)})]})}),(0,z.jsx)(_.Z,{children:a.formulas.map((function(e,n){return(0,z.jsx)(v.Z,{children:e},n)}))})]},i)}))})]})}},90543:function(e,n,t){t.d(n,{Z:function(){return K}});var r=t(53174),i=t(54483),a=t(40117),s=t(62002),l=t(66647),c=t(47047),o=t(68870),u=t(13400),d=t(9585),x=t(20890),h=t(39504),f=t(2199),p=t(24518),m=t(72791),v=t(9350),Z=t(71310),j=t(36944),g=t(40020),y=t(20005),b=t(55942),k=t(10157),w=t(75545),C=t(2139),S=t(66218),P=t(56928),D=t(26138),_=t(87234),O=t(79406),E=t(42320),A=t(74480),R=t(80184);function K(e){var n,t=e.weaponId,K=e.onClick,M=e.onEdit,T=e.onDelete,I=e.canEquip,q=void 0!==I&&I,H=(0,m.useContext)(P.t).database,L=(0,A.Z)(t),V=(0,E.Z)(null!==L&&void 0!==L&&L.key?S.ZP.get(L.key):void 0,[null===L||void 0===L?void 0:L.key]),B=(0,m.useCallback)((function(e){return e.weaponTypeKey===(null===V||void 0===V?void 0:V.weaponType)}),[V]),N=(0,m.useCallback)((function(e){return(0,R.jsx)(l.Z,{onClick:function(){return null===K||void 0===K?void 0:K(t)},sx:{height:"100%"},children:e})}),[K,t]),W=(0,m.useCallback)((function(e){return H.setWeaponLocation(t,e)}),[H,t]),z=(0,m.useMemo)((function(){return V&&L&&(0,_.mP)([V.data,(0,_.v0)(L)])}),[V,L]);if(!L||!V||!z)return null;var G=L.level,F=L.ascension,U=L.refinement,J=L.id,Y=L.location,X=void 0===Y?"":Y,Q=L.lock,$=z.get(D.ri.weapon.type).value,ee=[D.ri.weapon.main,D.ri.weapon.sub,D.ri.weapon.sub2].map((function(e){return z.get(e)})),ne=F<2?null===V||void 0===V?void 0:V.img:null===V||void 0===V?void 0:V.imgAwaken;return(0,R.jsx)(m.Suspense,{fallback:(0,R.jsx)(c.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,R.jsx)(y.Z,{condition:!!K,wrapper:N,children:(0,R.jsxs)(Z.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,R.jsxs)(o.Z,{className:"grad-".concat(V.rarity,"star"),sx:{position:"relative"},children:[!K&&(0,R.jsx)(u.Z,{color:"primary",onClick:function(){return H.updateWeapon({lock:!Q},J)},sx:{position:"absolute",right:0,bottom:0},children:Q?(0,R.jsx)(a.Z,{}):(0,R.jsx)(s.Z,{})}),(0,R.jsxs)(o.Z,{sx:{position:"relative",zIndex:1},children:[(0,R.jsx)(d.Z,{sx:{pb:1},title:V.name,avatar:(0,R.jsx)(b.Z,{sx:{fontSize:"1.5em"},src:null===(n=v.Z.weaponTypes)||void 0===n?void 0:n[$]}),titleTypographyProps:{variant:"subtitle1"}}),(0,R.jsxs)(o.Z,{sx:{px:2},children:[(0,R.jsxs)(x.Z,{component:"span",variant:"h5",children:["Lv. ",G]}),(0,R.jsxs)(x.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",C.SJ[F]]}),(0,R.jsxs)(x.Z,{variant:"h6",children:["Refinement ",(0,R.jsx)("strong",{children:U})]}),(0,R.jsx)(x.Z,{children:(0,R.jsx)(k.t,{stars:V.rarity,colored:!0})})]})]}),(0,R.jsx)(o.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,R.jsx)(o.Z,{component:"img",src:null!==ne&&void 0!==ne?ne:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,R.jsx)(h.Z,{children:ee.map((function(e){if(!e.info.key)return null;var n=(0,O.EC)(e.value,e.unit,e.unit?void 0:0);return(0,R.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,R.jsxs)(x.Z,{flexGrow:1,children:[w.Z[e.info.key]," ",O.ZP.get(e.info.key)]}),(0,R.jsx)(x.Z,{children:n})]},e.info.key)}))}),(0,R.jsx)(o.Z,{flexGrow:1}),(0,R.jsxs)(o.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between"},children:[q?(0,R.jsx)(j.Z,{size:"small",noUnselect:!0,inventory:!0,value:X,onChange:W,filter:B}):(0,R.jsx)(g.Z,{location:X}),(0,R.jsxs)(f.Z,{children:[!!M&&(0,R.jsx)(p.Z,{color:"info",onClick:function(){return M(J)},children:(0,R.jsx)(i.G,{icon:r.Xcf,className:"fa-fw"})}),!!T&&(0,R.jsx)(p.Z,{color:"error",onClick:function(){return T(J)},disabled:!!X||Q,children:(0,R.jsx)(i.G,{icon:r.I7k,className:"fa-fw"})})]})]})]})})})}},74480:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(29439),i=t(72791),a=t(56928);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,i.useContext)(a.t),t=n.database,s=(0,i.useState)(t._getWeapon(e)),l=(0,r.Z)(s,2),c=l[0],o=l[1];return(0,i.useEffect)((function(){return o(t._getWeapon(e))}),[t,e]),(0,i.useEffect)((function(){return e?t.followWeapon(e,o):void 0}),[e,o,t]),c}},52771:function(e,n,t){t.d(n,{vL:function(){return i},g4:function(){return a},yJ:function(){return s},mf:function(){return l},JR:function(){return o},e6:function(){return u}});var r=t(60393),i=1e3,a=60*i,s=60*a,l=24*s;function c(e){var n=e%1e3,t=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:r,seconds:t,milliseconds:n}}function o(e){var n=c(e),t=n.hours,i=n.minutes,a=n.seconds,s="Minutes";return t&&(s="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2)," ").concat(s)}function u(e){var n=c(e),t=n.hours,i=n.minutes,a=n.seconds,s=n.milliseconds,l="Minutes";return t&&(l="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2),".").concat((0,r.H_)(s,"0",3)," ").concat(l)}}}]);
//# sourceMappingURL=839.7707de73.chunk.js.map