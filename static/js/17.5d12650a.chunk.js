(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[17],{190:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l}));var n=a(11),c=(a(16),a(96)),r=(a(4),a(78));a(44),a(9);function i(e,t){return function(e,t){for(var a=new Set(t.map((function(e){return e.key}))),r={},i=Object.keys(e),s=0,l=i;s<l.length;s++){var o,u,j=l[s],d={},b=Object(c.a)(null!==(o=e[j])&&void 0!==o?o:[]);try{for(b.s();!(u=b.n()).done;){var h=u.value;a.has(h.setKey)?d[h.setKey]?d[h.setKey].push(h):d[h.setKey]=[h]:d.null?d.null.push(h):d.null=[h]}}catch(x){b.e(x)}finally{b.f()}r[j]=Object.freeze(d)}var O={},m={},f=[];return function e(a){if(a>=i.length){var s,l=Object(c.a)(t);try{for(l.s();!(s=l.n()).done;){var o,u=s.value,j=u.key,d=u.num;if((null!==(o=O[j])&&void 0!==o?o:0)<d)return}}catch(x){l.e(x)}finally{l.f()}f.push(Object(n.a)({},m))}else{var b=i[a],h=r[b];for(var v in h){var p;O[v]=(null!==(p=O[v])&&void 0!==p?p:0)+1,m[b]=h[v],e(a+1),O[v]-=1}}}(0),f}(e,t).reduce((function(e,t){return e+Object.entries(t).reduce((function(e,t){return e*t[1].length}),1)}),0)}function s(e,t,a){var n=t.hitMode,c=void 0===n?"":n,i=t.infusionAura,s=void 0===i?"":i,l=t.infusionSelf,o=void 0===l?"":l,u=t.reactionMode,j=void 0===u?null:u,d=t.characterEle,b=void 0===d?"anemo":d,h=t.weaponType,O=void 0===h?"sword":h;if(Object.keys(r.a).includes(e))return"".concat(e,"_elemental_").concat(c);if(a||"catalyst"!==O||(a=b),"elemental"===e||"burst"===e||"skill"===e||a)return j&&j.startsWith(a||b)?"".concat(j,"_").concat(e,"_").concat(c):"".concat(a||b,"_").concat(e,"_").concat(c);var m="physical";return o?m=o:s&&(m=s),j&&j.startsWith(m)?"".concat(j,"_").concat(e,"_").concat(c):"".concat(m,"_").concat(e,"_").concat(c)}function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Object.keys(r.a).includes(e))return e;var n=t.infusionAura,c=void 0===n?"":n,i=t.infusionSelf,s=void 0===i?"":i,l=t.reactionMode,o=void 0===l?null:l,u=t.characterEle,j=void 0===u?"anemo":u,d=t.weaponType,b=void 0===d?"sword":d;if(a||"catalyst"!==b||(a=j),"elemental"===e||"burst"===e||"skill"===e||a){if(o&&o.startsWith(a||j)){if(["pyro_vaporize","hydro_vaporize"].includes(o))return"vaporize";if(["pyro_melt","cryo_melt"].includes(o))return"melt"}return a||j}var h="physical";if(s?h=s:c&&(h=c),o&&o.startsWith(h)){if(["pyro_vaporize","hydro_vaporize"].includes(o))return"vaporize";if(["pyro_melt","cryo_melt"].includes(o))return"melt"}return h}},229:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(9);function c(e){var t=e%1e3,a=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:n,seconds:a,milliseconds:t}}function r(e){var t=c(e),a=t.hours,r=t.minutes,i=t.seconds,s="Minutes";return a&&(s="Hours"),"".concat(a?"".concat(a,":"):"").concat(Object(n.q)(r,"0",2),":").concat(Object(n.q)(i,"0",2)," ").concat(s)}function i(e){var t=c(e),a=t.hours,r=t.minutes,i=t.seconds,s=t.milliseconds,l="Minutes";return a&&(l="Hours"),"".concat(a?"".concat(a,":"):"").concat(Object(n.q)(r,"0",2),":").concat(Object(n.q)(i,"0",2),".").concat(Object(n.q)(s,"0",3)," ").concat(l)}},347:function(e,t,a){"use strict";var n=a(2),c=a(5),r=a(6),i=a.n(r),s=a(0),l=a.n(s),o=a(8),u=a(197),j=["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"],d=["isChild"],b=["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"];function h(e,t,a){var n=(e-t)/(a-t)*100;return Math.round(1e3*n)/1e3}function O(e,t){var a,r=e.min,s=e.now,o=e.max,u=e.label,d=e.srOnly,b=e.striped,O=e.animated,m=e.className,f=e.style,x=e.variant,v=e.bsPrefix,p=Object(c.a)(e,j);return l.a.createElement("div",Object(n.a)({ref:t},p,{role:"progressbar",className:i()(m,v+"-bar",(a={},a["bg-"+x]=x,a[v+"-bar-animated"]=O,a[v+"-bar-striped"]=O||b,a)),style:Object(n.a)({width:h(s,r,o)+"%"},f),"aria-valuenow":s,"aria-valuemin":r,"aria-valuemax":o}),d?l.a.createElement("span",{className:"sr-only"},u):u)}var m=l.a.forwardRef((function(e,t){var a=e.isChild,r=Object(c.a)(e,d);if(r.bsPrefix=Object(o.a)(r.bsPrefix,"progress"),a)return O(r,t);var j=r.min,h=r.now,m=r.max,f=r.label,x=r.srOnly,v=r.striped,p=r.animated,g=r.bsPrefix,y=r.variant,S=r.className,k=r.children,N=Object(c.a)(r,b);return l.a.createElement("div",Object(n.a)({ref:t},N,{className:i()(S,g)}),k?Object(u.a)(k,(function(e){return Object(s.cloneElement)(e,{isChild:!0})})):O({min:j,now:h,max:m,label:f,srOnly:x,striped:v,animated:p,bsPrefix:g,variant:y},t))}));m.displayName="ProgressBar",m.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1},t.a=m},517:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return oe}));var n=a(111),c=a(96),r=a(40),i=a.n(r),s=a(58),l=a(4),o=a(16),u=a(11),j=a(14),d=a(52),b=a(0),h=a.n(b),O=a(82),m=a(269),f=a(173),x=a(61),v=a(30),p=a(26),g=a(57),y=a(153),S=a(196),k=a(222),N=a(219),w=a(518),C=a(508),A=a(202),B=a(226),K=a(179),M=a(347),E=a(45);function T(){return new Worker(a.p+"static/js/BuildWorker.f3365b19.worker.js")}var F=a(43),D=a(110),I=a(272),z=a(192),P=a(271),_=a(276),L=a(273),q=a(112),H=a(208),V=a(194),R=a(191),W=a(68),U=a(215),G=a(29),J=a(12),Y=a(79),X=a(229),Q=a(9),Z=a(114),$=a(190),ee=a(204),te=a(42),ae=a(227),ne=a(1),ce=h.a.lazy((function(){return a.e(20).then(a.bind(null,516))})),re=Object(b.lazy)((function(){return Promise.resolve().then(a.bind(null,221))})),ie=1e7,se=[50,25,10,5],le=["sands","goblet","circlet"];function oe(e){var t,a,n=e.location.characterKey,r=Object(b.useState)(""),h=Object(l.a)(r,2),C=h[0],A=h[1],B=Object(b.useState)([]),K=Object(l.a)(B,2),M=K[0],_=K[1],L=Object(b.useState)(25),V=Object(l.a)(L,2),R=V[0],X=V[1],re=Object(b.useState)(null),oe=Object(l.a)(re,2),be=oe[0],xe=oe[1],pe=Object(b.useState)(!1),ge=Object(l.a)(pe,2),ye=ge[0],Se=ge[1],ke=Object(b.useState)(!1),Ne=Object(l.a)(ke,2),we=Ne[0],Ce=Ne[1],Ae=Object(b.useState)(!1),Be=Object(l.a)(Ae,2),Ke=Be[0],Me=Be[1],Ee=Object(b.useState)(0),Te=Object(l.a)(Ee,2),Fe=Te[0],De=Te[1],Ie=Object(b.useState)(0),ze=Object(l.a)(Ie,2),Pe=ze[0],_e=ze[1],Le=Object(b.useState)(0),qe=Object(l.a)(Le,2),He=qe[0],Ve=qe[1],Re=Object(Y.a)(),We=Object(l.a)(Re,2),Ue=We[0],Ge=We[1],Je=Object(Y.b)(D.a.getAll(),[]),Ye=Object(Y.a)(),Xe=Object(l.a)(Ye,2),Qe=Xe[0],Ze=Xe[1],$e=Object(b.useRef)(!1),et=Object(b.useRef)(null),tt=Object(b.useState)({}),at=Object(l.a)(tt,2),nt=at[0],ct=nt.character,rt=nt.characterSheet,it=nt.weaponSheet,st=nt.initialStats,lt=nt.statsDisplayKeys,ot=at[1],ut=null!==(t=null===ct||void 0===ct?void 0:ct.buildSettings)&&void 0!==t?t:{setFilters:[{key:"",num:0},{key:"",num:0},{key:"",num:0}],statFilters:{},mainStatKeys:["","",""],optimizationTarget:"finalATK",mainStatAssumptionLevel:0,useLockedArts:!1,useEquippedArts:!1,ascending:!1},jt=ut.setFilters,dt=ut.statFilters,bt=ut.mainStatKeys,ht=ut.optimizationTarget,Ot=ut.mainStatAssumptionLevel,mt=ut.useLockedArts,ft=ut.useEquippedArts,xt=ut.ascending,vt=Object(b.useCallback)((function(e){ct&&(ct.buildSettings=function(e,t){switch(t.type){case"mainStatKey":var a=t.index,n=t.mainStatKey;return e.mainStatKeys[a]=n,Object(u.a)(Object(u.a)({},e),{},{mainStatKeys:Object(o.a)(e.mainStatKeys)});case"setFilter":var c=t.index,r=t.key,i=t.num,s=void 0===i?0:i;return e.setFilters[c]={key:r,num:s},Object(u.a)(Object(u.a)({},e),{},{setFilters:Object(o.a)(e.setFilters)})}return Object(u.a)(Object(u.a)({},e),t)}(ut,e),te.a.updateChar(ct))}),[ct,ut]);Object(b.useEffect)((function(){return E.a.pageview("/build")}),[]),Object(b.useEffect)((function(){Object(s.a)(i.a.mark((function e(){var t,a,n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&Je){e.next=2;break}return e.abrupt("return");case 2:if(t=te.a._getChar(C)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,q.b.get(C);case 7:return a=e.sent,e.next=10,Z.a.get(t.weapon.key);case 10:if(n=e.sent,a&&n){e.next=13;break}return e.abrupt("return");case 13:c=z.a.createInitialStats(t,a,n),r=z.a.getDisplayStatKeys(c,{characterSheet:a,weaponSheet:n,artifactSheets:Je}),ot({character:t,characterSheet:a,weaponSheet:n,initialStats:c,statsDisplayKeys:r});case 16:case"end":return e.stop()}}),e)})))()}),[Ue,C,Je]),Object(b.useEffect)((function(){return te.a.followAnyArt(Ze)}),[Ze]),Object(b.useEffect)((function(){return C?te.a.followChar(C,Ge):void 0}),[C,Ge]),Object(b.useEffect)((function(){return function(){var e;return null===(e=et.current)||void 0===e?void 0:e.terminate()}}),[]);var pt=Object(b.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";C!==e&&(A(e),_([]),Ge(),ot({}))}),[Ge,A,C]);Object(b.useEffect)((function(){var e;if("BuildsDisplay.state"in localStorage){var t=null!==(e=Object(Q.l)("BuildsDisplay.state"))&&void 0!==e?e:{},a=t.characterKey,n=void 0===a?"":a,c=t.maxBuildsToShow,r=void 0===c?25:c;n&&te.a._getChar(n)&&pt(n),X(r)}}),[]),Object(b.useEffect)((function(){return n&&pt(n)}),[n,pt]),Object(b.useEffect)((function(){$e.current?Object(Q.p)("BuildsDisplay.state",{characterKey:C,maxBuildsToShow:R}):$e.current=!0}),[C,R]),Object(b.useEffect)((function(){if(lt&&Array.isArray(ht)){for(var e in lt){var t,a=lt[e],n=Object(c.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(JSON.stringify(r)===JSON.stringify(ht))return}}catch(i){n.e(i)}finally{n.f()}}vt({optimizationTarget:"finalATK"})}}),[ht,lt,vt]);var gt=Object(b.useMemo)((function(){if(!C)return{split:Object.fromEntries(J.h.map((function(e){return[e,[]]}))),totBuildNumber:0};var e=te.a._getArts().filter((function(e){return e.location===C||!(e.lock&&!mt)&&!(e.location&&!ft)})),t=F.a.splitArtifactsBySlot(e);le.forEach((function(e,a){var n;return bt[a]&&(t[e]=null===(n=t[e])||void 0===n?void 0:n.filter((function(e){return e.mainStatKey===bt[a]})))}));var a=Object($.a)(t,jt);return Qe&&{split:t,totBuildNumber:a}}),[C,mt,ft,bt,jt,Qe]),yt=gt.split,St=gt.totBuildNumber,kt=Object(b.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(st&&Je){"boolean"!==typeof t&&(t=!1),_([]),Me(!0),_e(0),De(0),Ve(0),st.mainStatAssumptionLevel=Ot;var a=F.a.setEffectsObjs(Je,st),n=Object(Q.d)(yt);Object.values(n).forEach((function(e){e.forEach((function(e){var t;e.mainStatVal=null!==(t=F.a.mainStatValue(e.mainStatKey,e.numStars,Math.max(Math.min(Ot,4*e.numStars),e.level)))&&void 0!==t?t:0}))}));var c=Object.fromEntries(Object.entries(dt).map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1].min]})).filter((function(e){return"number"===typeof Object(l.a)(e,2)[1]}))),r=Object.fromEntries(Object.entries(dt).map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1].max]})).filter((function(e){return"number"===typeof Object(l.a)(e,2)[1]}))),i={splitArtifacts:n,initialStats:st,artifactSetEffects:a,setFilters:jt,minFilters:c,maxFilters:r,maxBuildsToShow:R,optimizationTarget:ht,ascending:xt,turbo:t};null===(e=et.current)||void 0===e||e.terminate(),et.current=new T,et.current.onmessage=function(e){var t;if("number"===typeof e.data.progress){var a=e.data,n=a.progress,c=a.timing,r=void 0===c?0:c,i=a.skipped,s=void 0===i?0:i;return De(n),_e(r),void Ve(s)}E.a.timing({category:"Build Generation",variable:"timing",value:e.data.timing,label:St.toString()});var l=e.data.builds.map((function(e){return z.a.calculateBuildwithArtifact(st,e.artifacts,Je)}));_(l),Me(!1),null===(t=et.current)||void 0===t||t.terminate(),et.current=null},et.current.postMessage(i)}}),[Je,yt,St,Ot,xt,st,R,ht,jt,dt]);Object(b.useEffect)((function(){St&&St<=100?kt():_([])}),[C,yt,St,ut,kt]);var Nt=Object(b.useCallback)((function(e,t){return Je&&D.a.setsWithMaxRarity(Je,e).map((function(e){var a,n,c=Object(l.a)(e,2),r=c[0],i=c[1];if(jt.some((function(e){return e.key===r})))return!1;var s=Object.keys(null!==(a=null===Je||void 0===Je||null===(n=Je[r])||void 0===n?void 0:n.setEffects)&&void 0!==a?a:{}),o=jt.reduce((function(e,a,n){return a.key&&n!==t?e+a.num:e}),0);return!s.every((function(e){return parseInt(e)+o>5}))&&Object(ne.jsx)(O.a.Item,{onClick:function(){var e;return vt({type:"setFilter",index:t,key:r,num:null!==(e=parseInt(s[0]))&&void 0!==e?e:0})},children:i.name},r)}))}),[jt,vt,Je]),wt=null!==(a=null===rt||void 0===rt?void 0:rt.name)&&void 0!==a?a:"Character Name",Ct=Object(b.useMemo)((function(){return Object(ne.jsxs)(m.a,{title:wt,disabled:Ke,children:[Object(ne.jsx)(O.a.Item,{onClick:function(){return pt("")},children:"Unselect Character"}),Object(ne.jsx)(O.a.Divider,{}),Object(ne.jsx)(H.a,{onSelect:function(e){return pt(e)}})]})}),[wt,Ke,pt]),At=Object(Y.b)(Array.isArray(ht)?W.a.get(ht):void 0,[ht]),Bt=Object(b.useMemo)((function(){if(!Array.isArray(ht))return Object(ne.jsxs)("b",{children:["Basic Stat: ",Object(ne.jsx)("span",{className:"text-".concat(G.b.getStatVariant(ht)),children:G.b.getStatNamePretty(ht)})]});if(!At)return null;var e,t=At.keys,a=Object(l.a)(t,3),n=a[0],c=a[2],r=At.field,i=z.a.getTalentFieldValue(r,"variant",st),s=z.a.getTalentFieldValue(r,"text",st);return"character"===n?("normal"!==c&&"charged"!==c&&"plunging"!==c||(c="auto"),Object(ne.jsxs)("b",{children:[null===rt||void 0===rt||null===(e=rt.getTalentOfKey(c,null===st||void 0===st?void 0:st.characterEle))||void 0===e?void 0:e.name,": ",Object(ne.jsx)("span",{className:"text-".concat(i),children:s})]})):"weapon"===n?Object(ne.jsxs)("b",{children:[null===it||void 0===it?void 0:it.name,": ",Object(ne.jsx)("span",{className:"text-".concat(i),children:s})]}):void 0}),[ht,At,st,rt,it]),Kt=jt.reduce((function(e,t){return t.key?e+t.num:e}),0),Mt=Object(b.useMemo)((function(){var e,t=0;return Object(Q.c)(null===st||void 0===st||null===(e=st.conditionalValues)||void 0===e?void 0:e.artifact,[],(function(e){return Array.isArray(e)}),(function(){return t++})),t}),[null===st||void 0===st?void 0:st.conditionalValues]),Et=Object(b.useCallback)((function(e){return te.a.updateChar(Object(u.a)(Object(u.a)({},ct),e))}),[ct]),Tt=Object.entries(dt).some((function(e){var t=Object(l.a)(e,2);t[0];return"number"===typeof t[1].min})),Ft=Object.entries(dt).some((function(e){var t=Object(l.a)(e,2);t[0];return"number"===typeof t[1].max})),Dt=xt?Tt:Ft;return Object(ne.jsxs)(f.a,{className:"mt-2",children:[Object(ne.jsx)(U.a,{pageKey:"buildPage",modalTitle:"Character Management Page Guide",text:["For self-infused attacks, like Noelle's Sweeping Time, enable the skill in the talent page.","You can compare the difference between equipped artifacts and generated builds.","TURBO mode can process millions of builds in seconds.","The more complex the formula, the longer the generation time."],children:Object(ne.jsx)(ce,{})}),Object(ne.jsx)(je,{build:be,showCharacterModal:we,characterKey:C,selectCharacter:pt,setmodalBuild:xe,setshowCharacterModal:Ce}),!!st&&Object(ne.jsx)(de,{showArtCondModal:ye,setshowArtCondModal:Se,initialStats:st,characterDispatch:Et,artifactCondCount:Mt}),Object(ne.jsx)(x.a,{className:"mt-2 mb-2",children:Object(ne.jsx)(v.a,{children:Object(ne.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(ne.jsx)(p.a.Header,{children:"Build Generator"}),Object(ne.jsxs)(p.a.Body,{children:[Object(ne.jsxs)(x.a,{children:[Object(ne.jsxs)(v.a,{xs:12,lg:6,children:[C?Object(ne.jsx)(P.a,{header:Ct,characterKey:C,bg:"lightcontent",cardClassName:"mb-2",onEdit:Ke?void 0:function(){return Ce(!0)}}):Object(ne.jsx)(p.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:Object(ne.jsx)(p.a.Header,{children:Ct})}),rt&&ct&&st&&Object(ne.jsx)(he,{build:st,characterSheet:rt,className:"mb-2",character:ct}),Boolean(lt)&&Object(ne.jsx)(Oe,{className:"mb-2",statFilters:dt,statKeys:null===lt||void 0===lt?void 0:lt.basicKeys,setStatFilters:function(e){return vt({statFilters:e})}})]}),Object(ne.jsx)(v.a,{xs:12,lg:6,children:Object(ne.jsxs)(x.a,{children:[Object(ne.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ne.jsx)(p.a,{bg:"lightcontent",text:"lightfont",children:Object(ne.jsx)(p.a.Body,{children:Object(ne.jsx)(g.a,{className:"w-100",onClick:function(){return Se(!0)},disabled:Ke,children:Object(ne.jsxs)("span",{children:["Default Artifact Set Effects ",Boolean(Mt)&&Object(ne.jsxs)(y.a,{variant:"success",children:[Mt," Selected"]})]})})})})}),jt.map((function(e,t){var a,n,c,r,i,s=e.key,l=e.num;return Object(ne.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ne.jsxs)(p.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(ne.jsx)(p.a.Header,{children:Object(ne.jsxs)(S.a,{children:[Object(ne.jsxs)(m.a,{as:S.a,title:null!==(a=null===Je||void 0===Je||null===(n=Je[s])||void 0===n?void 0:n.name)&&void 0!==a?a:"Artifact Set Filter",disabled:Ke,children:[Object(ne.jsx)(O.a.Item,{onClick:function(){return vt({type:"setFilter",index:t,key:""})},children:"Unselect Artifact"}),Object(ne.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),Nt(5,t),Object(ne.jsx)(O.a.Divider,{}),Object(ne.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),Nt(4,t),Object(ne.jsx)(O.a.Divider,{}),Object(ne.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca"}),Nt(3,t)]}),Object(ne.jsx)(m.a,{as:S.a,title:"".concat(l,"-set"),disabled:Ke||!s||Kt>=5,children:!!st&&Object.keys(null!==(c=null===Je||void 0===Je||null===(r=Je[s])||void 0===r?void 0:r.setEffects)&&void 0!==c?c:{}).map((function(e){var a=jt.reduce((function(e,t){return t.key&&t.key!==s?e+t.num:e}),0);return parseInt(e)+a<=5&&Object(ne.jsx)(O.a.Item,{onClick:function(){return vt({type:"setFilter",index:t,key:jt[t].key,num:parseInt(e)})},children:"".concat(e,"-set")},e)}))})]})}),s?Object(ne.jsx)(p.a.Body,{children:Object(ne.jsx)(x.a,{className:"mb-n2",children:!!st&&Object.keys(null!==(i=null===Je||void 0===Je?void 0:Je[s].setEffects)&&void 0!==i?i:{}).map((function(e){return parseInt(e)})).filter((function(e){return e<=l})).map((function(e){return Object(ne.jsx)(I.a,{newBuild:void 0,setKey:s,setNumKey:e,equippedBuild:st,characterDispatch:Et,editable:!0},s+e)}))})}):null]})},t)})),Object(ne.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ne.jsx)(p.a,{bg:"lightcontent",text:"lightfont",children:Object(ne.jsxs)(p.a.Body,{className:"mb-n2",children:[Object(ne.jsx)(g.a,{className:"w-100 mb-2",onClick:function(){return vt({useEquippedArts:!ft})},disabled:Ke,children:Object(ne.jsxs)("span",{children:[Object(ne.jsx)(d.a,{icon:ft?j.b:j.w})," Use Equipped Artifacts"]})}),Object(ne.jsx)(g.a,{className:"w-100 mb-2",onClick:function(){return vt({useLockedArts:!mt})},disabled:Ke,children:Object(ne.jsxs)("span",{children:[Object(ne.jsx)(d.a,{icon:mt?j.b:j.w})," Use Locked Artifacts"]})})]})})}),Object(ne.jsx)(v.a,{className:"mb-2",xs:12,children:Object(ne.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",children:[Object(ne.jsx)(p.a.Header,{children:Object(ne.jsxs)(x.a,{children:[Object(ne.jsx)(v.a,{children:"Artifact Main Stat"}),Object(ne.jsx)(v.a,{xs:"auto",children:Object(ne.jsx)(ve,{mainStatAssumptionLevel:Ot,setmainStatAssumptionLevel:function(e){return vt({mainStatAssumptionLevel:e})}})})]})}),Object(ne.jsx)(p.a.Body,{className:"mb-n2",children:le.map((function(e,t){return Object(ne.jsxs)("div",{className:"text-inline mb-1 d-flex justify-content-between",children:[Object(ne.jsx)("h6",{className:"d-inline mb-0",children:Object(ne.jsx)(ee.b,{slotKey:e})}),Object(ne.jsxs)(m.a,{disabled:Ke,size:"sm",title:bt[t]?G.b.getStatNameWithPercent(bt[t]):"Select a mainstat",className:"d-inline",children:[Object(ne.jsx)(O.a.Item,{onClick:function(){return vt({type:"mainStatKey",index:t,mainStatKey:""})},children:"No MainStat"}),F.a.slotMainStats(e).map((function(e){return Object(ne.jsx)(O.a.Item,{onClick:function(){return vt({type:"mainStatKey",index:t,mainStatKey:e})},children:G.b.getStatNameWithPercent(e)},e)}))]})]},e)}))})]})})]})})]}),Object(ne.jsx)(x.a,{className:"mb-2",children:Object(ne.jsx)(v.a,{children:!!C&&Object(ne.jsx)(fe,{totBuildNumber:St,generatingBuilds:Ke,generationSkipped:He,generationProgress:Fe,generationDuration:Pe,characterName:wt,maxBuildsToShow:R})})}),Object(ne.jsxs)(x.a,{className:"d-flex justify-content-between",children:[Object(ne.jsx)(v.a,{xs:"auto",children:Object(ne.jsxs)(S.a,{children:[Object(ne.jsx)(g.a,{className:"h-100",disabled:!C||Ke,variant:C&&St<=ie?"success":"warning",onClick:kt,children:Object(ne.jsx)("span",{children:"Generate Builds"})}),St>ie&&Object(ne.jsx)(k.a,{overlay:Object(ne.jsxs)(N.a,{id:"turbo-tooltip",children:[Object(ne.jsx)("div",{children:"Dramatically speeds up build time."}),Object(ne.jsx)("div",{children:"Yields only 1 build."}),Boolean(Dt)&&Object(ne.jsxs)("div",{className:"mt-2",children:["Does not work with ",Object(ne.jsxs)("b",{children:[Boolean(xt)?"min":"max","imum"]})," stat filter when sorting by ",Object(ne.jsxs)("b",{children:[Boolean(xt)?"as":"des","cending"]})]})]}),children:Object(ne.jsx)("span",{children:Object(ne.jsx)(g.a,{variant:"success",disabled:Dt,className:"rounded-0 ".concat(Dt?"cursor-pointer":""),onClick:function(){return kt(!0)},children:Object(ne.jsx)("strong",{children:"TURBO"})})})}),Object(ne.jsx)(g.a,{className:"h-100",disabled:!Ke,variant:"danger",onClick:function(){et.current&&(et.current.terminate(),et.current=null,Me(!1),_([]),_e(0),De(0),Ve(0))},children:Object(ne.jsx)("span",{children:"Cancel"})})]})}),Object(ne.jsx)(v.a,{xs:"auto",children:Object(ne.jsxs)(S.a,{children:[Object(ne.jsxs)(O.a,{as:S.a,drop:"up",children:[Object(ne.jsx)(O.a.Toggle,{disabled:Ke,variant:"light",children:Object(ne.jsxs)("span",{children:["Optimization Target: ",Bt]})}),Object(ne.jsx)(O.a.Menu,{align:"right",style:{minWidth:"40rem"},children:Object(ne.jsx)(x.a,{children:!!lt&&Object.entries(lt).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1],c=rt&&it&&Je?Object(ae.a)(a,{characterSheet:rt,weaponSheet:it,artifactSheets:Je},null===st||void 0===st?void 0:st.characterEle):a;return Object(ne.jsxs)(v.a,{xs:12,md:6,children:[Object(ne.jsx)(O.a.Header,{style:{overflow:"hidden",textOverflow:"ellipsis"},children:Object(ne.jsx)("b",{children:c})}),n.map((function(e,t){return Array.isArray(e)?Object(ne.jsx)(ue,{target:e,buildSettingsDispatch:vt,initialStats:st},t):"string"===typeof e?Object(ne.jsx)(O.a.Item,{onClick:function(){return vt({optimizationTarget:e})},children:G.b.getStatNamePretty(e)},t):null}))]},a)}))})})]}),Object(ne.jsxs)(g.a,{onClick:function(){return vt({ascending:!ut.ascending})},disabled:Ke,variant:xt?"danger":"primary",children:[Object(ne.jsx)(d.a,{icon:xt?j.u:j.v,className:"fa-fw"}),Object(ne.jsx)("span",{children:xt?"Ascending":"Descending"})]})]})})]})]})]})})}),Object(ne.jsx)(x.a,{className:"mb-2",children:Object(ne.jsx)(v.a,{children:Object(ne.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(ne.jsx)(p.a.Header,{children:Object(ne.jsxs)(x.a,{children:[Object(ne.jsx)(v.a,{children:C?Object(ne.jsxs)("span",{children:["Showing ",Object(ne.jsx)("b",{children:M.length})," Builds generated for ",wt]}):Object(ne.jsx)("span",{children:"Select a character to generate builds."})}),Object(ne.jsx)(v.a,{xs:"auto",children:Object(ne.jsx)(m.a,{title:Object(ne.jsxs)("span",{children:["Max builds to show: ",Object(ne.jsx)("b",{children:R})]}),size:"sm",children:se.map((function(e){return Object(ne.jsx)(O.a.Item,{onClick:function(){return X(e)},children:e},e)}))})})]})}),Object(ne.jsx)(w.a,{children:M.map((function(e,t){return t<R&&rt&&it&&Je&&Object(ne.jsx)(me,{sheets:{characterSheet:rt,weaponSheet:it,artifactSheets:Je},build:e,characterKey:C,index:t,statsDisplayKeys:lt,onClick:function(){return xe(e)}},t)}))})]})})})]})}function ue(e){var t=e.target,a=e.buildSettingsDispatch,n=e.initialStats,c=Object(Y.b)(W.a.get(t),[t]);if(!c)return null;var r=c.field;return Object(ne.jsx)(O.a.Item,{onClick:function(){return a({optimizationTarget:t})},style:{overflow:"hidden",textOverflow:"ellipsis"},children:Object(ne.jsx)("span",{className:"text-".concat(z.a.getTalentFieldValue(r,"variant",n)),children:z.a.getTalentFieldValue(r,"text",n)})})}function je(e){var t=e.build,a=e.showCharacterModal,n=e.characterKey,c=e.selectCharacter,r=e.setmodalBuild,i=e.setshowCharacterModal,s=Object(b.useCallback)((function(){r(null),i(!1)}),[r,i]);return Object(ne.jsx)(C.a,{show:Boolean(a||t),onHide:s,size:"xl",contentClassName:"bg-transparent",children:Object(ne.jsx)(h.a.Suspense,{fallback:Object(ne.jsx)("span",{children:"Loading..."}),children:Object(ne.jsx)(re,{character:void 0,tabName:void 0,characterKey:n,setCharacterKey:function(e){return c(e)},newBuild:t,onClose:s,editable:a,footer:Object(ne.jsx)(g.a,{variant:"danger",onClick:s,children:"Close"})})})})}function de(e){var t=e.showArtCondModal,a=e.setshowArtCondModal,n=e.initialStats,c=e.characterDispatch,r=e.artifactCondCount,i=Object(b.useCallback)((function(){return a(!1)}),[a]),s=Object(Y.b)(D.a.getAll(),[]);if(!s)return null;var u=Object.entries(D.a.setKeysByRarities(s)).reverse().flatMap((function(e){return Object(l.a)(e,2)[1]}));return Object(ne.jsx)(C.a,{show:t,onHide:i,size:"xl",contentClassName:"bg-transparent",children:Object(ne.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(ne.jsx)(p.a.Header,{children:Object(ne.jsxs)(x.a,{children:[Object(ne.jsx)(v.a,{children:Object(ne.jsxs)("h5",{children:["Default Artifact Set Effects  ",Boolean(r)&&Object(ne.jsxs)(y.a,{variant:"success",children:[r," Selected"]})]})}),Object(ne.jsx)(v.a,{xs:"auto",children:Object(ne.jsx)(g.a,{onClick:function(){n.conditionalValues.artifact&&(n.conditionalValues.artifact={}),c({conditionalValues:n.conditionalValues})},children:Object(ne.jsxs)("span",{children:[Object(ne.jsx)(d.a,{icon:j.D})," Reset All"]})})}),Object(ne.jsx)(v.a,{xs:"auto",children:Object(ne.jsx)(g.a,{variant:"danger",onClick:i,children:Object(ne.jsx)(d.a,{icon:j.z})})})]})}),Object(ne.jsx)(p.a.Body,{children:Object(ne.jsx)(x.a,{children:u.map((function(e){var t,a=s[e],r=Object.values(a.slotIcons)[0],i=Object(o.a)(a.rarity)[0];return Object(ne.jsx)(v.a,{className:"mb-2",xs:12,lg:6,xl:4,children:Object(ne.jsxs)(p.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(ne.jsx)(p.a.Header,{children:Object(ne.jsxs)(x.a,{children:[Object(ne.jsx)(v.a,{xs:"auto",className:"ml-n3 my-n2",children:Object(ne.jsx)(A.a,{src:r,className:"thumb-mid grad-".concat(i,"star m-1"),thumbnail:!0})}),Object(ne.jsxs)(v.a,{children:[Object(ne.jsx)("h6",{children:Object(ne.jsx)("b",{children:null!==(t=null===s||void 0===s?void 0:s[e].name)&&void 0!==t?t:""})}),Object(ne.jsx)("span",{children:Object(ne.jsx)(R.a,{stars:i})})]})]})}),Object(ne.jsx)(p.a.Body,{children:Object(ne.jsx)(x.a,{className:"mb-n2",children:Boolean(e)&&Object.keys(a.setEffects).map((function(e){return parseInt(e)})).map((function(t){return Object(ne.jsx)(I.a,{newBuild:void 0,setKey:e,setNumKey:t,equippedBuild:n,editable:!0,characterDispatch:c},e+t)}))})})]})},e)}))})}),Object(ne.jsx)(p.a.Footer,{children:Object(ne.jsxs)(g.a,{variant:"danger",onClick:i,children:[Object(ne.jsx)(d.a,{icon:j.z})," CLOSE"]})})]})})}function be(e){var t=e.statKey,a=e.statKeys,n=void 0===a?[]:a,c=e.min,r=e.max,i=e.close,s=e.setFilter,l="%"===G.b.getStatUnit(t),o={disabled:!t,allowEmpty:!0,float:l},b=Object(u.a)(Object(u.a)({},o),{},{placeholder:"MIN",value:c,onChange:function(e){return s(t,e,r)}}),h=Object(u.a)(Object(u.a)({},o),{},{placeholder:"MAX",value:r,onChange:function(e){return s(t,c,e)}});return Object(ne.jsxs)(B.a,{className:"mb-2",children:[Object(ne.jsx)(m.a,{as:B.a.Prepend,title:G.b.getStatNamePretty(t,"New Stat"),id:"input-group-dropdown-1",children:n.map((function(e){return Object(ne.jsx)(O.a.Item,{onClick:function(){null===i||void 0===i||i(),s(e,c,r)},children:G.b.getStatNamePretty(e)},e)}))}),Object(ne.jsx)(V.a,Object(u.a)({},b)),Object(ne.jsx)(V.a,Object(u.a)({},h)),Boolean(i)&&Object(ne.jsx)(B.a.Append,{children:Object(ne.jsx)(g.a,{variant:"danger",onClick:i,children:Object(ne.jsx)(d.a,{icon:j.B})})})]})}function he(e){var t=e.characterSheet,a=e.character,n=e.build,c=e.className,r=Object(b.useCallback)((function(e){var t=e.hitMode;return te.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{hitMode:t}))}),[a]),i=Object(b.useCallback)((function(e){var t=e.reactionMode;return te.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{reactionMode:t}))}),[a]),s=Object(b.useCallback)((function(e){var t=e.infusionAura;return te.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{infusionAura:t}))}),[a]);return a?Object(ne.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",className:c,children:[Object(ne.jsx)(p.a.Header,{children:Object(ne.jsxs)(x.a,{children:[Object(ne.jsx)(v.a,{children:"Hit Mode Options"}),Object(ne.jsx)(v.a,{xs:"auto",children:Object(ne.jsx)(_.b,{characterSheet:t,character:a,characterDispatch:s})})]})}),Object(ne.jsxs)(p.a.Body,{className:"mb-n2",children:[Object(ne.jsx)(_.a,{hitMode:a.hitMode,characterDispatch:r,className:"w-100 mb-2"}),Object(ne.jsx)(_.c,{build:n,character:a,characterDispatch:i,className:"w-100 mb-2"})]})]}):null}function Oe(e){var t=e.statKeys,a=void 0===t?[]:t,c=e.statFilters,r=void 0===c?{}:c,i=e.setStatFilters,s=e.className,o=a.filter((function(e){return!Object.keys(r).some((function(t){return t===e}))})),j=function(e,t,a){return i(Object(u.a)(Object(u.a)({},r),{},Object(n.a)({},e,{min:t,max:a})))};return Object(ne.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",className:s,children:[Object(ne.jsx)(p.a.Header,{children:"Final Stat Filter"}),Object(ne.jsx)(p.a.Body,{children:Object(ne.jsxs)(x.a,{className:"mb-n2",children:[Object.entries(r).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1],c=n.min,s=n.max;return Object(ne.jsx)(v.a,{xs:12,children:Object(ne.jsx)(be,{statKey:a,statKeys:o,setFilter:j,min:c,max:s,close:function(){delete r[a],i(Object(u.a)({},r))}})},a)})),Object(ne.jsx)(v.a,{xs:12,children:Object(ne.jsx)(be,{min:void 0,max:void 0,close:void 0,statKeys:o,setFilter:j})})]})})]})}function me(e){var t=e.sheets,a=e.sheets.artifactSheets,n=e.index,c=e.characterKey,r=e.build,i=e.statsDisplayKeys,s=e.onClick,o=te.a._getChar(c);if(!o)return null;var u=o.equippedArtifacts,j=J.h.every((function(e){var t;return u[e]===(null===(t=r.equippedArtifacts)||void 0===t?void 0:t[e])}));return Object(ne.jsx)("div",{children:Object(ne.jsxs)(w.a.Item,{variant:n%2?"customdark":"customdarker",className:"text-white",action:!0,onClick:s,children:[Object(ne.jsx)("h5",{className:"mb-2",children:Object(ne.jsxs)(x.a,{children:[Object(ne.jsx)(v.a,{xs:"auto",children:Object(ne.jsx)(y.a,{variant:"info",children:Object(ne.jsxs)("strong",{children:[n+1,j?" (Equipped)":""]})})}),Object(ne.jsx)(v.a,{xs:"auto",children:Object.entries(r.setToSlots).sort((function(e,t){var a=Object(l.a)(e,2),n=(a[0],a[1]),c=Object(l.a)(t,2);c[0];return c[1].length-n.length})).map((function(e){var t,n=Object(l.a)(e,2),c=n[0],r=n[1];return Object(ne.jsxs)(y.a,{variant:j?"success":"primary",className:"mr-2",children:[r.map((function(e){return Object(ee.a)(e)}))," ",null!==(t=null===a||void 0===a?void 0:a[c].name)&&void 0!==t?t:""]},c)}))})]})}),Object(ne.jsx)(L.a,{editable:!1,sheets:t,character:o,newBuild:r,statsDisplayKeys:i,cardbg:n%2?"lightcontent":"darkcontent"})]})})}function fe(e){var t,a,n,c,r=e.totBuildNumber,i=e.generatingBuilds,s=e.generationSkipped,l=e.generationProgress,o=e.generationDuration,u=e.characterName,j=e.maxBuildsToShow,d=null!==(t=null===r||void 0===r?void 0:r.toLocaleString())&&void 0!==t?t:r,b=r-s,h=null!==(a=null===l||void 0===l?void 0:l.toLocaleString())&&void 0!==a?a:l,O=null!==(n=null===s||void 0===s?void 0:s.toLocaleString())&&void 0!==n?n:s,m=null!==(c=null===b||void 0===b?void 0:b.toLocaleString())&&void 0!==c?c:b,f=Boolean(s)&&Object(ne.jsxs)("span",{children:["(",Object(ne.jsx)("b",{children:O})," skipped)"]});if(i){var x=100*l/b;return Object(ne.jsxs)(K.a,{variant:"success",children:[Object(ne.jsxs)("span",{children:["Generating and testing ",Object(ne.jsxs)("b",{className:"text-monospace",children:[h,"/",m]})," build configurations against the criteria for ",Object(ne.jsx)("b",{children:u}),". ",f]}),Object(ne.jsx)("br",{}),Object(ne.jsxs)("h6",{children:["Time elapsed: ",Object(ne.jsx)("strong",{className:"text-monospace",children:Object(X.b)(o)})]}),Object(ne.jsx)(M.a,{now:x,label:"".concat(x.toFixed(1),"%")})]})}return!i&&l?Object(ne.jsxs)(K.a,{variant:"success",children:[Object(ne.jsxs)("span",{children:["Generated and tested ",Object(ne.jsx)("b",{className:"text-monospace",children:m})," Build configurations against the criteria for ",Object(ne.jsx)("b",{children:u}),". ",f]}),Object(ne.jsxs)("h6",{children:["Total duration: ",Object(ne.jsx)("strong",{className:"text-monospace",children:Object(X.b)(o)})]}),Object(ne.jsx)(M.a,{now:100,variant:"success",label:"100%"})]}):0===r?Object(ne.jsx)(K.a,{variant:"warning",className:"mb-0",children:Object(ne.jsxs)("span",{children:["Current configuration will not generate any builds for ",Object(ne.jsx)("b",{children:u}),". Please change your Artifact configurations, or add/unlock more Artifacts."]})}):r>ie?Object(ne.jsx)(K.a,{variant:"warning",className:"mb-0",children:Object(ne.jsxs)("span",{children:["Current configuration will generate ",Object(ne.jsx)("b",{children:d})," builds for ",Object(ne.jsx)("b",{children:u}),". This might take quite a while to generate..."]})}):Object(ne.jsx)(K.a,{variant:"success",className:"mb-0",children:Object(ne.jsxs)("span",{children:["Current configuration ",r<=j?"generated":"will generate"," ",Object(ne.jsx)("b",{children:d})," builds for ",Object(ne.jsx)("b",{children:u}),"."]})})}var xe={0:Object(ne.jsx)("span",{children:"No level assumption"}),4:Object(ne.jsx)("span",{children:"Assume at least level 4"}),8:Object(ne.jsx)("span",{children:"Assume at least level 8"}),12:Object(ne.jsx)("span",{children:"Assume at least level 12"}),16:Object(ne.jsx)("span",{children:"Assume at least level 16"}),20:Object(ne.jsx)("span",{children:"Assume at least level 20"})};function ve(e){var t=e.mainStatAssumptionLevel,a=void 0===t?0:t,n=e.setmainStatAssumptionLevel;return Object(ne.jsx)(k.a,{overlay:Object(ne.jsx)(N.a,{id:"assume-level-tooltip",children:"Change Main Stat value to be at least a specific level. Does not change substats."}),children:Object(ne.jsxs)(O.a,{children:[Object(ne.jsx)(O.a.Toggle,{variant:a?"orange":"primary",children:xe[a]}),Object(ne.jsx)(O.a.Menu,{children:Object.entries(xe).map((function(e){var t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(ne.jsx)(O.a.Item,{onClick:function(){return n(parseInt(a))},children:c},a)}))})]})})}}}]);
//# sourceMappingURL=17.5d12650a.chunk.js.map