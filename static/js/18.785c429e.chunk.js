(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[18,23],{216:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));var n=a(4),c=a(189),r=a(72),s=a(14),i=a(1);function l(e,t){var a=t.characterSheet,r=t.weaponSheet,s=t.artifactSheets,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"anemo";if("basicKeys"===e)return"Basic Stats";if("genericAvgHit"===e)return"Generic Optimization Values";if("transReactions"===e)return"Transformation Reaction";if(e.startsWith("talentKey_")){var o,j,b=e.split("talentKey_")[1];return null!==(o=null===a||void 0===a||null===(j=a.getTalentOfKey(b,l))||void 0===j?void 0:j.name)&&void 0!==o?o:b}if(e.startsWith("weapon_")){var d,u=e.split("weapon_")[1];return null!==(d=null===r||void 0===r?void 0:r.name)&&void 0!==d?d:u}if(e.startsWith("artifact_")){var h,O=e.split("_"),x=Object(n.a)(O,3),m=x[1],v=x[2];return Object(i.jsxs)("span",{children:[null===(h=s[m])||void 0===h?void 0:h.name," ",Object(i.jsxs)(c.a,{variant:"success",children:[v,"-Set"]})]})}return""}function o(e){return{key:e,level:1,ascension:0,hitMode:"avgHit",reactionMode:null,equippedArtifacts:Object.fromEntries(s.h.map((function(e){return[e,""]}))),equippedWeapon:"",conditionalValues:{},baseStatOverrides:{},buildSettings:Object(r.a)(),talent:{auto:1,skill:1,burst:1},infusionAura:"",constellation:0}}},236:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var n=a(20),c=a(4),r=a(25),s=a(10),i=a(0),l=a(143),o=a(189),j=a(126),b=a(188),d=a(73),u=a(127),h=a(42),O=a(122),x=a(207),m=a(206),v=a(123),f=a(35),p=a(34),y=a(86),g=a(124),N=a(208),C=a(121),w=a(1);function k(e){var t,a=e.characterKey,k=e.onEdit,S=e.onDelete,K=e.cardClassName,T=void 0===K?"":K,_=e.bg,E=void 0===_?"":_,A=e.header,B=e.footer,M=void 0!==B&&B,F=Object(i.useContext)(f.b),W=Object(i.useState)(void 0),R=Object(c.a)(W,2),z=R[0],D=R[1];Object(i.useEffect)((function(){return a?F.followChar(a,D):void 0}),[a,D,F]);var H=Object(y.b)(O.a.getAll(),[]),L=z,U=Object(y.b)(C.b.get(a),[a]),V=(null===L||void 0===L?void 0:L.equippedWeapon)?F._getWeapon(L.equippedWeapon):void 0,q=Object(y.b)(V?g.a.get(V.key):void 0,[null===V||void 0===V?void 0:V.key]),G=Object(i.useMemo)((function(){return L&&U&&q&&H&&N.a.calculateBuild(L,F,U,q,H)}),[L,U,q,H,F]);if(!L||!V||!U||!q||!G)return null;var P=L.constellation,Y=V.level,I=V.ascension,J=G.tlvl,Q=U.name,X=G.characterEle,Z=U.weaponTypeKey,$=null===q||void 0===q?void 0:q.name,ee=q.getMainStatValue(Y,I).toFixed(p.b.fixedUnit("atk")),te=q.getSubStatKey(),ae=q.getSubStatValue(Y,I).toFixed(p.b.fixedUnit(te)),ne=g.a.getLevelString(V),ce=null===q||void 0===q?void 0:q.passiveName;return Object(w.jsxs)(b.a,{className:T,bg:E||"darkcontent",text:"lightfont",children:[Object(w.jsx)(b.a.Header,{className:"pr-2",children:Object(w.jsxs)(u.a,{className:"no-gutters",children:[Object(w.jsx)(d.a,{children:A||Object(w.jsx)("h5",{children:Object(w.jsx)("b",{children:Q})})}),Object(w.jsx)(d.a,{xs:"auto",children:Object(w.jsxs)("span",{className:"float-right align-top ml-1",children:[k&&Object(w.jsx)(j.a,{variant:"primary",size:"sm",className:"mr-1",onClick:function(){return k(a)},children:Object(w.jsx)(s.a,{icon:r.k})}),S&&Object(w.jsx)(j.a,{variant:"danger",size:"sm",onClick:function(){return S(a)},children:Object(w.jsx)(s.a,{icon:r.E})})]})})]})}),Object(w.jsxs)(b.a.Body,{onClick:function(){return null===k||void 0===k?void 0:k(a)},className:k?"cursor-pointer":"",children:[Object(w.jsxs)(u.a,{children:[Object(w.jsx)(d.a,{xs:"auto",className:"pr-0",children:Object(w.jsx)(l.a,{src:U.thumbImg,className:"thumb-big grad-".concat(U.star,"star p-0"),thumbnail:!0})}),Object(w.jsxs)(d.a,{children:[Object(w.jsxs)("h5",{className:"mb-0",children:["Lv. ",N.a.getLevelString(L)," ","C".concat(P)]}),Object(w.jsxs)("h6",{className:"mb-0",children:[Object(w.jsx)(o.a,{variant:"secondary",children:Object(w.jsx)("strong",{className:"mx-1",children:J.auto+1})})," ",Object(w.jsx)(o.a,{variant:"secondary",children:Object(w.jsx)("strong",{className:"mx-1",children:J.skill+1})})," ",Object(w.jsx)(o.a,{variant:"secondary",children:Object(w.jsx)("strong",{className:"mx-1",children:J.burst+1})})]}),Object(w.jsx)("h6",{className:"mb-0",children:Object(w.jsx)(m.a,{stars:U.star,colored:!0})}),Object(w.jsxs)("h3",{className:"mb-0",children:[v.a[X]," ",Object(w.jsx)(l.a,{src:null===(t=x.a.weaponTypes)||void 0===t?void 0:t[Z],className:"inline-icon"})]})]})]}),Object(w.jsx)(u.a,{className:"mb-2",children:Object(w.jsxs)(d.a,{children:[Object(w.jsxs)("h6",{className:"mb-0",children:[$,ce&&Object(w.jsx)(o.a,{variant:"info",className:"ml-1",children:V.refine})," ",ne]}),Object(w.jsxs)("span",{children:["ATK: ",ee,"  ",ce&&Object(w.jsxs)("span",{children:[p.b.getStatName(te),": ",ae,p.b.getStatUnit(te)]})]})]})}),Object(w.jsx)(u.a,{children:Object(w.jsx)(d.a,{children:H&&Object.entries(O.a.setEffects(H,G.setToSlots)).map((function(e){var t,a=Object(c.a)(e,2),r=a[0],s=a[1],i=null!==(t=null===H||void 0===H?void 0:H[r].name)&&void 0!==t?t:"",l=Math.max.apply(Math,Object(n.a)(s));return Object(w.jsx)("h5",{children:Object(w.jsxs)(o.a,{variant:"secondary",children:[i," ",Object(w.jsx)(o.a,{variant:"success",children:l})]})},r)}))})}),Object(w.jsx)(u.a,{children:["finalHP","finalATK","finalDEF","eleMas","critRate_","critDMG_","enerRech_"].map((function(e){var t=p.b.getStatUnit(e),a=G[e];return Object(w.jsxs)(d.a,{xs:12,children:[Object(w.jsxs)("h6",{className:"d-inline",children:[v.a[e]," ",p.b.getStatName(e)]}),Object(w.jsx)("span",{className:"float-right",children:(null===a||void 0===a?void 0:a.toFixed(p.b.fixedUnit(e)))+t})]},e)}))})]}),M&&Object(w.jsx)(b.a.Footer,{children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)(d.a,{children:Object(w.jsxs)(j.a,{as:h.b,to:{pathname:"/build",characterKey:a},children:[Object(w.jsx)(s.a,{icon:r.d})," Generate Builds"]})}),Object(w.jsx)(d.a,{children:Object(w.jsxs)(j.a,{variant:"info",as:h.b,to:{pathname:"/flex",characterKey:a},children:[Object(w.jsx)(s.a,{icon:r.r})," Share Character"]})})]})})]})}},536:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return L}));var n=a(47),c=a.n(n),r=a(57),s=a(4),i=a(25),l=a(10),o=a(111),j=a(0),b=a.n(j),d=a(191),u=a(127),h=a(73),O=a(188),x=a(199),m=a(224),v=a(126),f=a(143),p=a(534),y=a(330),g=a(49),N=a(42),C=a(207),w=a(209),k=a(231),S=a(123),K=a(35),T=a(28),_=a(14),E=a(86),A=a(213),B=a(236),M=a(121),F=a(216),W=a(1),R=b.a.lazy((function(){return a.e(24).then(a.bind(null,531))})),z=Object(j.lazy)((function(){return Promise.all([a.e(1),a.e(19)]).then(a.bind(null,229))})),D={level:"Level",rarity:"Rarity",name:"Name"};function H(e,t){return t===e?"":t}function L(e){var t,a=Object(j.useContext)(K.b),n=Object(j.useState)(""),N=Object(s.a)(n,2),L=N[0],V=N[1],q=Object(j.useState)((function(){return Object.keys(D)[0]})),G=Object(s.a)(q,2),P=G[0],Y=G[1],I=Object(j.useReducer)(H,""),J=Object(s.a)(I,2),Q=J[0],X=J[1],Z=Object(j.useReducer)(H,""),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ae=Object(j.useState)(!1),ne=Object(s.a)(ae,2),ce=ne[0],re=ne[1],se=Object(E.a)(),ie=Object(s.a)(se,2)[1],le=Object(j.useRef)(null);Object(j.useEffect)((function(){g.a.pageview("/character");var e=T.b.get("CharacterDisplay.state");if(e){var t=e.characterKeyToEdit,n=e.sortBy,c=e.elementalFilter,r=e.weaponFilter;t&&V(t),n&&Y(n),_.d.includes(c)&&X(c),_.j.includes(r)&&te(r)}return a.followAnyChar(ie)}),[ie,a]);var oe=null!==(t=Object(E.b)(M.b.getAll(),[]))&&void 0!==t?t:{},je=function(e){var t,n;return null!==(t=null===(n=a._getChar(e))||void 0===n?void 0:n.level)&&void 0!==t?t:0},be=function(e){var t;return null===(t=oe[e])||void 0===t?void 0:t.star};Object(j.useEffect)((function(){var e={characterKeyToEdit:L,sortBy:P,elementalFilter:Q,weaponFilter:ee};T.b.set("CharacterDisplay.state",e)}),[L,P,Q,ee]);var de=Object(j.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.b.get(t);case 2:if(n=e.sent,"object"===typeof(r=null===n||void 0===n?void 0:n.name)&&(r=o.a.t("char_".concat(t,"_gen:name"))),window.confirm("Are you sure you want to remove ".concat(r,"?"))){e.next=7;break}return e.abrupt("return");case 7:a.removeChar(t),L===t&&V("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[L,V,a]),ue=Object(j.useCallback)((function(e){a._getChar(e)?V(e):Object(r.a)(c.a.mark((function t(){var n,r,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(F.b)(e),a.updateChar(n),t.next=4,M.b.get(e);case 4:if(r=t.sent){t.next=7;break}return t.abrupt("return");case 7:s=Object(A.a)(r.weaponTypeKey),i=a.createWeapon(s),a.setWeaponLocation(i,e),V(e);case 11:case"end":return t.stop()}}),t)})))(),setTimeout((function(){var e;null===(e=le.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)}),[V,le,a]),he=Object(j.useCallback)((function(){V(""),re(!1)}),[V]),Oe=a._getCharKeys().filter((function(e){var t,a;return(!Q||Q===(null===(t=oe[e])||void 0===t?void 0:t.elementKey))&&(!ee||ee===(null===(a=oe[e])||void 0===a?void 0:a.weaponTypeKey))})).sort((function(e,t){if("name"===P)return e<t?-1:e>t?1:0;if("level"===P){var a=je(t)-je(e);return a||be(t)-be(e)}var n=be(t)-be(e);return n||je(t)-je(e)}));return Object(W.jsxs)(d.a,{ref:le,className:"mt-2",children:[Object(W.jsx)(k.a,{pageKey:"characterPage",modalTitle:"Character Management Page Guide",text:["Every character will be tested with in-game numbers for maximum accuracy.","You can see the details of the calculations of every number.","You need to manually enable auto infusion for characters like Choungyun or Noelle.",'You can change character constellations in both "Character" tab and in "Talents" tab.',"Modified character Stats show up in yellow."],children:Object(W.jsx)(R,{})}),L?Object(W.jsx)(u.a,{className:"mt-2",children:Object(W.jsx)(h.a,{children:Object(W.jsx)(b.a.Suspense,{fallback:Object(W.jsx)(O.a,{bg:"darkcontent",text:"lightfont",children:Object(W.jsx)(O.a.Body,{children:Object(W.jsxs)("h3",{className:"text-center",children:["Loading... ",Object(W.jsx)(x.a,{animation:"border",variant:"primary"})]})})}),children:Object(W.jsx)(z,{newBuild:void 0,tabName:void 0,editable:!0,setCharacterKey:ue,characterKey:L,onClose:he,footer:Object(W.jsx)(U,{onClose:he,characterKey:L})})})})}):null,Object(W.jsx)(O.a,{bg:"darkcontent",text:"lightfont",className:"mt-2",children:Object(W.jsx)(O.a.Body,{className:"p-2",children:Object(W.jsxs)(u.a,{children:[Object(W.jsx)(h.a,{xs:"auto",children:Object(W.jsx)(m.a,{children:_.d.map((function(e){return Object(W.jsx)(v.a,{variant:Q&&Q!==e?"secondary":e,className:"py-1 px-2 text-white",onClick:function(){return X(e)},children:Object(W.jsx)("h3",{className:"mb-0",children:S.b[e]})},e)}))})}),Object(W.jsx)(h.a,{children:Object(W.jsx)(m.a,{children:_.j.map((function(e){var t;return Object(W.jsx)(v.a,{variant:ee&&ee!==e?"secondary":"success",className:"py-1 px-2",onClick:function(){return te(e)},children:Object(W.jsx)("h3",{className:"mb-0",children:Object(W.jsx)(f.a,{src:null===(t=C.a.weaponTypes)||void 0===t?void 0:t[e],className:"inline-icon"})})},e)}))})}),Object(W.jsxs)(h.a,{xs:"auto",children:[Object(W.jsx)("span",{children:"Sort by: "}),Object(W.jsx)(p.a,{type:"radio",name:"level",value:P,onChange:Y,children:Object.entries(D).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(W.jsx)(y.a,{value:a,variant:P===a?"success":"primary",children:Object(W.jsx)("h6",{className:"mb-0",children:n})},a)}))})]})]})})}),Object(W.jsxs)(u.a,{className:"mt-2",children:[!L&&Object(W.jsx)(h.a,{lg:4,md:6,className:"mb-2",children:Object(W.jsxs)(O.a,{className:"h-100",bg:"darkcontent",text:"lightfont",children:[Object(W.jsx)(O.a.Header,{className:"pr-2",children:Object(W.jsx)("span",{children:"Add New Character"})}),Object(W.jsx)(O.a.Body,{className:"d-flex flex-column justify-content-center",children:Object(W.jsx)(u.a,{className:"d-flex flex-row justify-content-center",children:Object(W.jsxs)(h.a,{xs:"auto",children:[Object(W.jsx)(v.a,{onClick:function(){return re(!0)},children:Object(W.jsx)("h1",{children:Object(W.jsx)(l.a,{icon:i.u,className:"fa-fw"})})}),Object(W.jsx)(w.c,{show:ce,onHide:function(){return re(!1)},onSelect:ue})]})})})]})}),Oe.map((function(e){return Object(W.jsx)(h.a,{lg:4,md:6,className:"mb-2",children:Object(W.jsx)(B.a,{header:void 0,cardClassName:"h-100",characterKey:e,onDelete:de,onEdit:ue,footer:!0})},e)}))]})]})}function U(e){var t=e.onClose,a=e.characterKey;return Object(W.jsxs)(u.a,{children:[Object(W.jsx)(h.a,{children:Object(W.jsxs)(v.a,{variant:"info",as:N.b,to:{pathname:"/flex",characterKey:a},children:[Object(W.jsx)(l.a,{icon:i.r})," Share Character"]})}),Object(W.jsx)(h.a,{xs:"auto",children:Object(W.jsx)(v.a,{variant:"danger",onClick:t,children:"Close"})})]})}}}]);
//# sourceMappingURL=18.785c429e.chunk.js.map