(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[17],{193:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l}));var n=a(12),c=(a(17),a(98)),r=(a(3),a(80));a(44),a(10);function i(e,t){return function(e,t){for(var a=new Set(t.map((function(e){return e.key}))),r={},i=Object.keys(e),s=0,l=i;s<l.length;s++){var o,u,j=l[s],d={},b=Object(c.a)(null!==(o=e[j])&&void 0!==o?o:[]);try{for(b.s();!(u=b.n()).done;){var h=u.value;a.has(h.setKey)?d[h.setKey]?d[h.setKey].push(h):d[h.setKey]=[h]:d.null?d.null.push(h):d.null=[h]}}catch(m){b.e(m)}finally{b.f()}r[j]=Object.freeze(d)}var O={},x={},f=[];return function e(a){if(a>=i.length){var s,l=Object(c.a)(t);try{for(l.s();!(s=l.n()).done;){var o,u=s.value,j=u.key,d=u.num;if((null!==(o=O[j])&&void 0!==o?o:0)<d)return}}catch(m){l.e(m)}finally{l.f()}f.push(Object(n.a)({},x))}else{var b=i[a],h=r[b];for(var v in h){var p;O[v]=(null!==(p=O[v])&&void 0!==p?p:0)+1,x[b]=h[v],e(a+1),O[v]-=1}}}(0),f}(e,t).reduce((function(e,t){return e+Object.entries(t).reduce((function(e,t){return e*t[1].length}),1)}),0)}function s(e,t,a){var n=t.hitMode,c=void 0===n?"":n,i=t.infusionAura,s=void 0===i?"":i,l=t.infusionSelf,o=void 0===l?"":l,u=t.reactionMode,j=void 0===u?null:u,d=t.characterEle,b=void 0===d?"anemo":d,h=t.weaponType,O=void 0===h?"sword":h;if(Object.keys(r.a).includes(e))return"".concat(e,"_elemental_").concat(c);if(a||"catalyst"!==O||(a=b),"elemental"===e||"burst"===e||"skill"===e||a)return j&&j.startsWith(a||b)?"".concat(j,"_").concat(e,"_").concat(c):"".concat(a||b,"_").concat(e,"_").concat(c);var x="physical";return o?x=o:s&&(x=s),j&&j.startsWith(x)?"".concat(j,"_").concat(e,"_").concat(c):"".concat(x,"_").concat(e,"_").concat(c)}function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Object.keys(r.a).includes(e))return e;var n=t.infusionAura,c=void 0===n?"":n,i=t.infusionSelf,s=void 0===i?"":i,l=t.reactionMode,o=void 0===l?null:l,u=t.characterEle,j=void 0===u?"anemo":u,d=t.weaponType,b=void 0===d?"sword":d;if(a||"catalyst"!==b||(a=j),"elemental"===e||"burst"===e||"skill"===e||a){if(o&&o.startsWith(a||j)){if(["pyro_vaporize","hydro_vaporize"].includes(o))return"vaporize";if(["pyro_melt","cryo_melt"].includes(o))return"melt"}return a||j}var h="physical";if(s?h=s:c&&(h=c),o&&o.startsWith(h)){if(["pyro_vaporize","hydro_vaporize"].includes(o))return"vaporize";if(["pyro_melt","cryo_melt"].includes(o))return"melt"}return h}},229:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(10);function c(e){var t=e%1e3,a=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:n,seconds:a,milliseconds:t}}function r(e){var t=c(e),a=t.hours,r=t.minutes,i=t.seconds,s="Minutes";return a&&(s="Hours"),"".concat(a?"".concat(a,":"):"").concat(Object(n.q)(r,"0",2),":").concat(Object(n.q)(i,"0",2)," ").concat(s)}function i(e){var t=c(e),a=t.hours,r=t.minutes,i=t.seconds,s=t.milliseconds,l="Minutes";return a&&(l="Hours"),"".concat(a?"".concat(a,":"):"").concat(Object(n.q)(r,"0",2),":").concat(Object(n.q)(i,"0",2),".").concat(Object(n.q)(s,"0",3)," ").concat(l)}},349:function(e,t,a){"use strict";var n=a(2),c=a(5),r=a(7),i=a.n(r),s=a(0),l=a.n(s),o=a(8),u=a(201),j=["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"],d=["isChild"],b=["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"];function h(e,t,a){var n=(e-t)/(a-t)*100;return Math.round(1e3*n)/1e3}function O(e,t){var a,r=e.min,s=e.now,o=e.max,u=e.label,d=e.srOnly,b=e.striped,O=e.animated,x=e.className,f=e.style,m=e.variant,v=e.bsPrefix,p=Object(c.a)(e,j);return l.a.createElement("div",Object(n.a)({ref:t},p,{role:"progressbar",className:i()(x,v+"-bar",(a={},a["bg-"+m]=m,a[v+"-bar-animated"]=O,a[v+"-bar-striped"]=O||b,a)),style:Object(n.a)({width:h(s,r,o)+"%"},f),"aria-valuenow":s,"aria-valuemin":r,"aria-valuemax":o}),d?l.a.createElement("span",{className:"sr-only"},u):u)}var x=l.a.forwardRef((function(e,t){var a=e.isChild,r=Object(c.a)(e,d);if(r.bsPrefix=Object(o.a)(r.bsPrefix,"progress"),a)return O(r,t);var j=r.min,h=r.now,x=r.max,f=r.label,m=r.srOnly,v=r.striped,p=r.animated,g=r.bsPrefix,y=r.variant,S=r.className,k=r.children,N=Object(c.a)(r,b);return l.a.createElement("div",Object(n.a)({ref:t},N,{className:i()(S,g)}),k?Object(u.a)(k,(function(e){return Object(s.cloneElement)(e,{isChild:!0})})):O({min:j,now:h,max:x,label:f,srOnly:m,striped:v,animated:p,bsPrefix:g,variant:y},t))}));x.displayName="ProgressBar",x.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1},t.a=x},521:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return je}));var n=a(112),c=a(98),r=a(41),i=a.n(r),s=a(57),l=a(3),o=a(17),u=a(12),j=a(53),d=a(9),b=a(0),h=a.n(b),O=a(83),x=a(269),f=a(176),m=a(60),v=a(31),p=a(27),g=a(56),y=a(156),S=a(200),k=a(222),N=a(219),w=a(522),C=a(512),A=a(134),B=a(226),K=a(182),M=a(349),E=a(45);function F(){return new Worker(a.p+"static/js/BuildWorker.3f6b91bd.worker.js")}var T=a(68),D=a(111),I=a(272),z=a(116),P=a(195),_=a(271),q=a(276),H=a(273),L=a(113),W=a(227),V=a(208),R=a(198),G=a(215),U=a(194),J=a(115),X=a(43),Y=a(69),Q=a(30),Z=a(14),$=a(81),ee=a(229),te=a(10),ae=a(117),ne=a(193),ce=a(85),re=a(1),ie=h.a.lazy((function(){return a.e(20).then(a.bind(null,520))})),se=Object(b.lazy)((function(){return Promise.resolve().then(a.bind(null,221))})),le=1e7,oe=[1,2,3,4,5,8,10],ue=["sands","goblet","circlet"];function je(e){var t,a=e.location.characterKey,n=Object(b.useState)((function(){var e,t=(null!==(e=Object(te.l)("BuildsDisplay.state"))&&void 0!==e?e:{}).characterKey;return null!==a&&void 0!==a?a:void 0===t?"":t})),r=Object(l.a)(n,2),h=r[0],C=r[1],A=Object(b.useState)([]),B=Object(l.a)(A,2),K=B[0],M=B[1],q=Object(b.useState)((function(){var e,t=(null!==(e=Object(te.l)("BuildsDisplay.state"))&&void 0!==e?e:{}).maxBuildsToShow;return void 0===t?5:t})),H=Object(l.a)(q,2),R=H[0],U=H[1],ee=Object(b.useState)(null),se=Object(l.a)(ee,2),je=se[0],Oe=se[1],pe=Object(b.useState)(!1),ye=Object(l.a)(pe,2),Se=ye[0],ke=ye[1],Ne=Object(b.useState)(!1),we=Object(l.a)(Ne,2),Ce=we[0],Ae=we[1],Be=Object(b.useState)(!1),Ke=Object(l.a)(Be,2),Me=Ke[0],Ee=Ke[1],Fe=Object(b.useState)(0),Te=Object(l.a)(Fe,2),De=Te[0],Ie=Te[1],ze=Object(b.useState)(0),Pe=Object(l.a)(ze,2),_e=Pe[0],qe=Pe[1],He=Object(b.useState)(0),Le=Object(l.a)(He,2),We=Le[0],Ve=Le[1],Re=Object($.a)(),Ge=Object(l.a)(Re,2),Ue=Ge[0],Je=Ge[1],Xe=Object($.b)(D.a.getAll(),[]),Ye=Object($.a)(),Qe=Object(l.a)(Ye,2),Ze=Qe[0],$e=Qe[1],et=Object(b.useRef)(!1),tt=Object(b.useRef)(null),at=Object(b.useState)({}),nt=Object(l.a)(at,2),ct=nt[0],rt=ct.character,it=ct.characterSheet,st=ct.weaponSheet,lt=ct.initialStats,ot=ct.statsDisplayKeys,ut=nt[1],jt=Object(b.useMemo)((function(){var e;return null!==(e=null===rt||void 0===rt?void 0:rt.buildSettings)&&void 0!==e?e:Object(ce.a)()}),[rt]);0===jt.setFilters.length&&(jt.setFilters=Object(ce.a)().setFilters);var dt=jt.setFilters,bt=jt.statFilters,ht=jt.mainStatKeys,Ot=jt.optimizationTarget,xt=jt.mainStatAssumptionLevel,ft=jt.useLockedArts,mt=jt.useEquippedArts,vt=jt.ascending,pt=Object(b.useCallback)((function(e){rt&&(rt.buildSettings=function(e,t){switch(t.type){case"mainStatKey":var a=t.slotKey,n=t.mainStatKey,c=Object(u.a)({},e.mainStatKeys);return e.mainStatKeys[a].includes(n)?c[a]=c[a].filter((function(e){return e!==n})):c[a].push(n),Object(u.a)(Object(u.a)({},e),{},{mainStatKeys:c});case"setFilter":var r=t.index,i=t.key,s=t.num,l=void 0===s?0:s;return e.setFilters[r]={key:i,num:l},Object(u.a)(Object(u.a)({},e),{},{setFilters:Object(o.a)(e.setFilters)})}return Object(u.a)(Object(u.a)({},e),t)}(jt,e),X.a.updateChar(rt))}),[rt,jt]);Object(b.useEffect)((function(){return E.a.pageview("/build")}),[]);var gt=Object(b.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";h!==e&&(C(e),M([]),Je(),ut({}))}),[Je,C,h]);Object(b.useEffect)((function(){Object(s.a)(i.a.mark((function e(){var t,a,n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&Xe){e.next=2;break}return e.abrupt("return");case 2:if(t=X.a._getChar(h)){e.next=5;break}return e.abrupt("return",gt(""));case 5:return e.next=7,L.b.get(h);case 7:return a=e.sent,e.next=10,ae.a.get(t.weapon.key);case 10:if(n=e.sent,a&&n){e.next=13;break}return e.abrupt("return");case 13:c=P.a.createInitialStats(t,a,n),r=P.a.getDisplayStatKeys(c,{characterSheet:a,weaponSheet:n,artifactSheets:Xe}),ut({character:t,characterSheet:a,weaponSheet:n,initialStats:c,statsDisplayKeys:r});case 16:case"end":return e.stop()}}),e)})))()}),[Ue,h,Xe,gt]),Object(b.useEffect)((function(){return X.a.followAnyArt($e)}),[$e]),Object(b.useEffect)((function(){return h?X.a.followChar(h,Je):void 0}),[h,Je]),Object(b.useEffect)((function(){return function(){var e;return null===(e=tt.current)||void 0===e?void 0:e.terminate()}}),[]),Object(b.useEffect)((function(){et.current?Object(te.p)("BuildsDisplay.state",{characterKey:h,maxBuildsToShow:R}):et.current=!0}),[h,R]),Object(b.useEffect)((function(){if(ot&&Array.isArray(Ot)){for(var e in ot){var t,a=ot[e],n=Object(c.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(JSON.stringify(r)===JSON.stringify(Ot))return}}catch(i){n.e(i)}finally{n.f()}}pt({optimizationTarget:Object(ce.a)().optimizationTarget})}}),[Ot,ot,pt]);var yt=Object(b.useMemo)((function(){if(!h)return{split:Object.fromEntries(Z.h.map((function(e){return[e,[]]}))),totBuildNumber:0};var e=X.a._getArts().filter((function(e){return e.location===h||!(e.lock&&!ft)&&!(e.location&&!mt)})),t=T.a.splitArtifactsBySlot(e);ue.forEach((function(e){var a;return ht[e].length&&(t[e]=null===(a=t[e])||void 0===a?void 0:a.filter((function(t){return ht[e].includes(t.mainStatKey)})))}));var a=Object(ne.a)(t,dt);return Ze&&{split:t,totBuildNumber:a}}),[h,ft,mt,ht,dt,Ze]),St=yt.split,kt=yt.totBuildNumber,Nt=Object(b.useCallback)((function(){var e;if(lt&&Xe){M([]),Ee(!0),qe(0),Ie(0),Ve(0),lt.mainStatAssumptionLevel=xt;var t=T.a.setEffectsObjs(Xe,lt),a=Object(te.d)(St);Object.values(a).forEach((function(e){e.forEach((function(e){var t;e.mainStatVal=null!==(t=T.a.mainStatValue(e.mainStatKey,e.numStars,Math.max(Math.min(xt,4*e.numStars),e.level)))&&void 0!==t?t:0}))}));var n=Object.fromEntries(Object.entries(bt).map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1].min]})).filter((function(e){return"number"===typeof Object(l.a)(e,2)[1]}))),c=Object.fromEntries(Object.entries(bt).map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1].max]})).filter((function(e){return"number"===typeof Object(l.a)(e,2)[1]}))),r={splitArtifacts:a,initialStats:lt,artifactSetEffects:t,setFilters:dt,minFilters:n,maxFilters:c,maxBuildsToShow:R,optimizationTarget:Ot,ascending:vt};null===(e=tt.current)||void 0===e||e.terminate(),tt.current=new F,tt.current.onmessage=function(e){var t;if("number"===typeof e.data.progress){var a=e.data,n=a.progress,c=a.timing,r=void 0===c?0:c,i=a.skipped,s=void 0===i?0:i;return Ie(n),qe(r),void Ve(s)}E.a.timing({category:"Build Generation",variable:"timing",value:e.data.timing,label:kt.toString()});var l=e.data.builds.map((function(e){return P.a.calculateBuildwithArtifact(lt,e.artifacts,Xe)}));M(l),Ee(!1),null===(t=tt.current)||void 0===t||t.terminate(),tt.current=null},tt.current.postMessage(r)}}),[Xe,St,kt,xt,vt,lt,R,Ot,dt,bt]);Object(b.useEffect)((function(){kt&&kt<=100?Nt():M([])}),[h,St,kt,jt,Nt]);var wt=Object(b.useCallback)((function(e,t){return Xe&&D.a.setsWithMaxRarity(Xe,e).map((function(e){var a,n,c=Object(l.a)(e,2),r=c[0],i=c[1];if(dt.some((function(e){return e.key===r})))return!1;var s=Object.keys(null!==(a=null===Xe||void 0===Xe||null===(n=Xe[r])||void 0===n?void 0:n.setEffects)&&void 0!==a?a:{}),o=dt.reduce((function(e,a,n){return a.key&&n!==t?e+a.num:e}),0);return!s.every((function(e){return parseInt(e)+o>5}))&&Object(re.jsx)(O.a.Item,{onClick:function(){var e;return pt({type:"setFilter",index:t,key:r,num:null!==(e=parseInt(s[0]))&&void 0!==e?e:0})},children:i.nameWithIcon},r)}))}),[dt,pt,Xe]),Ct=null!==(t=null===it||void 0===it?void 0:it.name)&&void 0!==t?t:"Character Name",At=Object(b.useMemo)((function(){return Object(re.jsxs)(x.a,{title:Ct,disabled:Me,children:[Object(re.jsx)(O.a.Item,{onClick:function(){return gt("")},children:"Unselect Character"}),Object(re.jsx)(O.a.Divider,{}),Object(re.jsx)(V.a,{onSelect:function(e){return gt(e)}})]})}),[Ct,Me,gt]),Bt=Object($.b)(Array.isArray(Ot)?Y.a.get(Ot):void 0,[Ot]),Kt=Object(b.useMemo)((function(){if(!Array.isArray(Ot))return Object(re.jsxs)("b",{children:["Basic Stat: ",Object(re.jsx)("span",{className:"text-".concat(Q.b.getStatVariant(Ot)),children:Q.b.getStatNameWithPercent(Ot)})]});if(!Bt)return null;var e,t=Bt.keys,a=Object(l.a)(t,3),n=a[0],c=a[2],r=Bt.field,i=P.a.getTalentFieldValue(r,"variant",lt),s=P.a.getTalentFieldValue(r,"text",lt);return"character"===n?("normal"!==c&&"charged"!==c&&"plunging"!==c||(c="auto"),Object(re.jsxs)("b",{children:[null===it||void 0===it||null===(e=it.getTalentOfKey(c,null===lt||void 0===lt?void 0:lt.characterEle))||void 0===e?void 0:e.name,": ",Object(re.jsx)("span",{className:"text-".concat(i),children:s})]})):"weapon"===n?Object(re.jsxs)("b",{children:[null===st||void 0===st?void 0:st.name,": ",Object(re.jsx)("span",{className:"text-".concat(i),children:s})]}):void 0}),[Ot,Bt,lt,it,st]),Mt=dt.reduce((function(e,t){return t.key?e+t.num:e}),0),Et=Object(b.useMemo)((function(){var e,t=0;return Object(te.c)(null===lt||void 0===lt||null===(e=lt.conditionalValues)||void 0===e?void 0:e.artifact,[],(function(e){return Array.isArray(e)}),(function(){return t++})),t}),[null===lt||void 0===lt?void 0:lt.conditionalValues]),Ft=Object(b.useCallback)((function(e){return X.a.updateChar(Object(u.a)(Object(u.a)({},rt),e))}),[rt]);return Object(re.jsxs)(f.a,{className:"mt-2",children:[Object(re.jsx)(G.a,{pageKey:"buildPage",modalTitle:"Character Management Page Guide",text:["For self-infused attacks, like Noelle's Sweeping Time, enable the skill in the talent page.","You can compare the difference between equipped artifacts and generated builds.","The more complex the formula, the longer the generation time."],children:Object(re.jsx)(ie,{})}),Object(re.jsx)(be,{build:je,showCharacterModal:Ce,characterKey:h,selectCharacter:gt,setmodalBuild:Oe,setshowCharacterModal:Ae}),!!lt&&Object(re.jsx)(he,{showArtCondModal:Se,setshowArtCondModal:ke,initialStats:lt,characterDispatch:Ft,artifactCondCount:Et}),Object(re.jsx)(m.a,{className:"mt-2 mb-2",children:Object(re.jsx)(v.a,{children:Object(re.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(re.jsx)(p.a.Header,{children:"Build Generator"}),Object(re.jsxs)(p.a.Body,{children:[Object(re.jsxs)(m.a,{children:[Object(re.jsxs)(v.a,{xs:12,lg:6,children:[h?Object(re.jsx)(_.a,{header:At,characterKey:h,bg:"lightcontent",cardClassName:"mb-2",onEdit:Me?void 0:function(){return Ae(!0)}}):Object(re.jsx)(p.a,{bg:"lightcontent",text:"lightfont",className:"mb-2",children:Object(re.jsx)(p.a.Header,{children:At})}),it&&rt&&lt&&Object(re.jsx)(xe,{build:lt,characterSheet:it,className:"mb-2",character:rt}),Boolean(ot)&&Object(re.jsx)(fe,{className:"mb-2",statFilters:bt,statKeys:null===ot||void 0===ot?void 0:ot.basicKeys,setStatFilters:function(e){return pt({statFilters:e})}})]}),Object(re.jsx)(v.a,{xs:12,lg:6,children:Object(re.jsxs)(m.a,{children:[Object(re.jsx)(v.a,{className:"mb-2",xs:12,children:Object(re.jsx)(p.a,{bg:"lightcontent",text:"lightfont",children:Object(re.jsx)(p.a.Body,{children:Object(re.jsx)(g.a,{className:"w-100",onClick:function(){return ke(!0)},disabled:Me,children:Object(re.jsxs)("span",{children:["Default Artifact Set Effects ",Boolean(Et)&&Object(re.jsxs)(y.a,{variant:"success",children:[Et," Selected"]})]})})})})}),dt.map((function(e,t){var a,n,c,r,i,s=e.key,l=e.num;return Object(re.jsx)(v.a,{className:"mb-2",xs:12,children:Object(re.jsxs)(p.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(re.jsx)(p.a.Header,{children:Object(re.jsxs)(S.a,{children:[Object(re.jsxs)(x.a,{as:S.a,title:null!==(a=null===Xe||void 0===Xe||null===(n=Xe[s])||void 0===n?void 0:n.nameWithIcon)&&void 0!==a?a:"Artifact Set Filter",disabled:Me,children:[Object(re.jsx)(O.a.Item,{onClick:function(){return pt({type:"setFilter",index:t,key:""})},children:"Unselect Artifact"}),Object(re.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),wt(5,t),Object(re.jsx)(O.a.Divider,{}),Object(re.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),wt(4,t),Object(re.jsx)(O.a.Divider,{}),Object(re.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca"}),wt(3,t)]}),Object(re.jsx)(x.a,{as:S.a,title:"".concat(l,"-set"),disabled:Me||!s||Mt>=5,children:!!lt&&Object.keys(null!==(c=null===Xe||void 0===Xe||null===(r=Xe[s])||void 0===r?void 0:r.setEffects)&&void 0!==c?c:{}).map((function(e){var a=dt.reduce((function(e,t){return t.key&&t.key!==s?e+t.num:e}),0);return parseInt(e)+a<=5&&Object(re.jsx)(O.a.Item,{onClick:function(){return pt({type:"setFilter",index:t,key:dt[t].key,num:parseInt(e)})},children:"".concat(e,"-set")},e)}))})]})}),s?Object(re.jsx)(p.a.Body,{children:Object(re.jsx)(m.a,{className:"mb-n2",children:!!lt&&Object.keys(null!==(i=null===Xe||void 0===Xe?void 0:Xe[s].setEffects)&&void 0!==i?i:{}).map((function(e){return parseInt(e)})).filter((function(e){return e<=l})).map((function(e){return Object(re.jsx)(I.a,{newBuild:void 0,setKey:s,setNumKey:e,equippedBuild:lt,characterDispatch:Ft,editable:!0},s+e)}))})}):null]})},t)})),Object(re.jsx)(v.a,{className:"mb-2",xs:12,children:Object(re.jsx)(p.a,{bg:"lightcontent",text:"lightfont",children:Object(re.jsxs)(p.a.Body,{className:"mb-n2",children:[Object(re.jsx)(g.a,{className:"w-100 mb-2",onClick:function(){return pt({useEquippedArts:!mt})},disabled:Me,children:Object(re.jsxs)("span",{children:[Object(re.jsx)(d.a,{icon:mt?j.c:j.r})," Use Equipped Artifacts"]})}),Object(re.jsx)(g.a,{className:"w-100 mb-2",onClick:function(){return pt({useLockedArts:!ft})},disabled:Me,children:Object(re.jsxs)("span",{children:[Object(re.jsx)(d.a,{icon:ft?j.c:j.r})," Use Locked Artifacts"]})})]})})}),Object(re.jsx)(v.a,{className:"mb-2",xs:12,children:Object(re.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",children:[Object(re.jsx)(p.a.Header,{children:Object(re.jsxs)(m.a,{children:[Object(re.jsx)(v.a,{children:"Artifact Main Stat"}),Object(re.jsx)(v.a,{xs:"auto",children:Object(re.jsx)(ge,{mainStatAssumptionLevel:xt,setmainStatAssumptionLevel:function(e){return pt({mainStatAssumptionLevel:e})}})})]})}),Object(re.jsx)(p.a.Body,{className:"mb-n2",children:ue.map((function(e){var t=ht[e].length;return Object(re.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",className:"mb-2",children:[Object(re.jsx)(p.a.Header,{className:"p-2",children:Object(re.jsxs)(m.a,{children:[Object(re.jsx)(v.a,{className:"ml-2",children:Object(re.jsx)(z.b,{slotKey:e})}),Object(re.jsx)(v.a,{xs:"auto",children:Object(re.jsx)(y.a,{variant:"info",children:t?"".concat(t," Selected"):"Any"})})]})}),Object(re.jsx)(p.a.Body,{className:"p-0",children:Object(re.jsx)(m.a,{className:"no-gutters",children:T.a.slotMainStats(e).map((function(t,a){var n=ht[e].includes(t);return Object(re.jsx)(v.a,{xs:a<3?4:6,children:Object(re.jsxs)(g.a,{className:"w-100 rounded-0",size:"sm",variant:n?"success":"secondary",onClick:function(){return pt({type:"mainStatKey",slotKey:e,mainStatKey:t})},children:[J.a[t]," ",Q.b.getStatNameWithPercent(t,"",!1)]})},t)}))})})]},e)}))})]})})]})})]}),Object(re.jsxs)(m.a,{className:"d-flex justify-content-between mb-2",children:[Object(re.jsx)(v.a,{xs:"auto",children:Object(re.jsxs)(S.a,{children:[Object(re.jsx)(g.a,{className:"h-100",disabled:!h||Me,variant:h&&kt<=le?"success":"warning",onClick:Nt,children:Object(re.jsx)("span",{children:"Generate"})}),Object(re.jsxs)(O.a,{as:S.a,children:[Object(re.jsx)(k.a,{overlay:Object(re.jsx)(N.a,{id:"max-build-tooltip",children:"Decreasing the number of generated build will decrease build calculation time for large number of builds."}),children:Object(re.jsxs)(O.a.Toggle,{children:[Object(re.jsx)("b",{children:R})," ",1===R?"Build":"Builds"]})}),Object(re.jsx)(O.a.Menu,{children:oe.map((function(e){return Object(re.jsxs)(O.a.Item,{onClick:function(){return U(e)},children:[e," ",1===e?"Build":"Builds"]},e)}))})]}),Object(re.jsx)(g.a,{className:"h-100",disabled:!Me,variant:"danger",onClick:function(){tt.current&&(tt.current.terminate(),tt.current=null,Ee(!1),M([]),qe(0),Ie(0),Ve(0))},children:Object(re.jsx)("span",{children:"Cancel"})})]})}),Object(re.jsx)(v.a,{xs:"auto",children:Object(re.jsxs)(S.a,{children:[Object(re.jsxs)(O.a,{as:S.a,drop:"up",children:[Object(re.jsx)(O.a.Toggle,{disabled:Me,variant:"light",children:Object(re.jsxs)("span",{children:["Optimization Target: ",Kt]})}),Object(re.jsx)(O.a.Menu,{align:"right",style:{minWidth:"40rem"},children:Object(re.jsx)(m.a,{children:!!ot&&Object.entries(ot).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1],c=it&&st&&Xe?Object(W.a)(a,{characterSheet:it,weaponSheet:st,artifactSheets:Xe},null===lt||void 0===lt?void 0:lt.characterEle):a;return Object(re.jsxs)(v.a,{xs:12,md:6,children:[Object(re.jsx)(O.a.Header,{style:{overflow:"hidden",textOverflow:"ellipsis"},children:Object(re.jsx)("b",{children:c})}),n.map((function(e,t){return Array.isArray(e)?Object(re.jsx)(de,{target:e,buildSettingsDispatch:pt,initialStats:lt},t):"string"===typeof e?Object(re.jsx)(O.a.Item,{onClick:function(){return pt({optimizationTarget:e})},children:Q.b.getStatNameWithPercent(e)},t):null}))]},a)}))})})]}),Object(re.jsxs)(g.a,{onClick:function(){return pt({ascending:!jt.ascending})},disabled:Me,variant:vt?"danger":"primary",children:[Object(re.jsx)(d.a,{icon:vt?j.p:j.q,className:"fa-fw"}),Object(re.jsx)("span",{children:vt?"Ascending":"Descending"})]})]})})]}),Object(re.jsx)(m.a,{className:"",children:Object(re.jsx)(v.a,{children:!!h&&Object(re.jsx)(ve,{totBuildNumber:kt,generatingBuilds:Me,generationSkipped:We,generationProgress:De,generationDuration:_e,characterName:Ct,maxBuildsToShow:R})})})]})]})})}),Object(re.jsx)(m.a,{className:"mb-2",children:Object(re.jsx)(v.a,{children:Object(re.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(re.jsx)(p.a.Header,{children:Object(re.jsx)(m.a,{children:Object(re.jsx)(v.a,{children:h?Object(re.jsxs)("span",{children:["Showing ",Object(re.jsx)("b",{children:K.length})," Builds generated for ",Ct]}):Object(re.jsx)("span",{children:"Select a character to generate builds."})})})}),Object(re.jsx)(w.a,{children:K.map((function(e,t){return t<R&&it&&st&&Xe&&Object(re.jsx)(me,{sheets:{characterSheet:it,weaponSheet:st,artifactSheets:Xe},build:e,characterKey:h,index:t,statsDisplayKeys:ot,onClick:function(){return Oe(e)}},t)}))})]})})})]})}function de(e){var t=e.target,a=e.buildSettingsDispatch,n=e.initialStats,c=Object($.b)(Y.a.get(t),[t]);if(!c)return null;var r=c.field;return Object(re.jsx)(O.a.Item,{onClick:function(){return a({optimizationTarget:t})},style:{overflow:"hidden",textOverflow:"ellipsis"},children:Object(re.jsx)("span",{className:"text-".concat(P.a.getTalentFieldValue(r,"variant",n)),children:P.a.getTalentFieldValue(r,"text",n)})})}function be(e){var t=e.build,a=e.showCharacterModal,n=e.characterKey,c=e.selectCharacter,r=e.setmodalBuild,i=e.setshowCharacterModal,s=Object(b.useCallback)((function(){r(null),i(!1)}),[r,i]);return Object(re.jsx)(C.a,{show:Boolean(a||t),onHide:s,size:"xl",contentClassName:"bg-transparent",children:Object(re.jsx)(h.a.Suspense,{fallback:Object(re.jsx)("span",{children:"Loading..."}),children:Object(re.jsx)(se,{character:void 0,tabName:void 0,characterKey:n,setCharacterKey:function(e){return c(e)},newBuild:t,onClose:s,editable:a,footer:Object(re.jsx)(g.a,{variant:"danger",onClick:s,children:"Close"})})})})}function he(e){var t=e.showArtCondModal,a=e.setshowArtCondModal,n=e.initialStats,c=e.characterDispatch,r=e.artifactCondCount,i=Object(b.useCallback)((function(){return a(!1)}),[a]),s=Object($.b)(D.a.getAll(),[]);if(!s)return null;var o=Object.entries(D.a.setKeysByRarities(s)).reverse().flatMap((function(e){return Object(l.a)(e,2)[1]}));return Object(re.jsx)(C.a,{show:t,onHide:i,size:"xl",contentClassName:"bg-transparent",children:Object(re.jsxs)(p.a,{bg:"darkcontent",text:"lightfont",children:[Object(re.jsx)(p.a.Header,{children:Object(re.jsxs)(m.a,{children:[Object(re.jsx)(v.a,{children:Object(re.jsxs)("h5",{children:["Default Artifact Set Effects  ",Boolean(r)&&Object(re.jsxs)(y.a,{variant:"success",children:[r," Selected"]})]})}),Object(re.jsx)(v.a,{xs:"auto",children:Object(re.jsx)(g.a,{onClick:function(){n.conditionalValues.artifact&&(n.conditionalValues.artifact={}),c({conditionalValues:n.conditionalValues})},children:Object(re.jsxs)("span",{children:[Object(re.jsx)(d.a,{icon:j.x})," Reset All"]})})}),Object(re.jsx)(v.a,{xs:"auto",children:Object(re.jsx)(g.a,{variant:"danger",onClick:i,children:Object(re.jsx)(d.a,{icon:j.t})})})]})}),Object(re.jsx)(p.a.Body,{children:Object(re.jsx)(m.a,{children:o.map((function(e){var t,a=s[e],r=Object.values(a.slotIcons)[0],i=a.rarity,l=i[0];return Object(re.jsx)(v.a,{className:"mb-2",xs:12,lg:6,xl:4,children:Object(re.jsxs)(p.a,{className:"h-100",bg:"lightcontent",text:"lightfont",children:[Object(re.jsx)(p.a.Header,{children:Object(re.jsxs)(m.a,{children:[Object(re.jsx)(v.a,{xs:"auto",className:"ml-n3 my-n2",children:Object(re.jsx)(A.a,{src:r,className:"thumb-mid grad-".concat(l,"star m-1"),thumbnail:!0})}),Object(re.jsxs)(v.a,{children:[Object(re.jsx)("h6",{children:Object(re.jsx)("b",{children:null!==(t=null===s||void 0===s?void 0:s[e].name)&&void 0!==t?t:""})}),Object(re.jsx)("span",{children:i.map((function(e,t){return Object(re.jsxs)("span",{children:[e,Object(re.jsx)(U.a,{stars:1})," ",t<i.length-1?"/ ":null]},e)}))})]})]})}),Object(re.jsx)(p.a.Body,{children:Object(re.jsx)(m.a,{className:"mb-n2",children:Boolean(e)&&Object.keys(a.setEffects).map((function(e){return parseInt(e)})).map((function(t){return Object(re.jsx)(I.a,{newBuild:void 0,setKey:e,setNumKey:t,equippedBuild:n,editable:!0,characterDispatch:c},e+t)}))})})]})},e)}))})}),Object(re.jsx)(p.a.Footer,{children:Object(re.jsxs)(g.a,{variant:"danger",onClick:i,children:[Object(re.jsx)(d.a,{icon:j.t})," CLOSE"]})})]})})}function Oe(e){var t=e.statKey,a=e.statKeys,n=void 0===a?[]:a,c=e.min,r=e.max,i=e.close,s=e.setFilter,l="%"===Q.b.getStatUnit(t),o={disabled:!t,allowEmpty:!0,float:l},b=Object(u.a)(Object(u.a)({},o),{},{placeholder:"MIN",value:c,onChange:function(e){return s(t,e,r)}}),h=Object(u.a)(Object(u.a)({},o),{},{placeholder:"MAX",value:r,onChange:function(e){return s(t,c,e)}});return Object(re.jsxs)(B.a,{className:"mb-2",children:[Object(re.jsx)(x.a,{as:B.a.Prepend,title:Q.b.getStatNameWithPercent(t,"New Stat"),id:"input-group-dropdown-1",children:n.map((function(e){return Object(re.jsx)(O.a.Item,{onClick:function(){null===i||void 0===i||i(),s(e,c,r)},children:Q.b.getStatNameWithPercent(e)},e)}))}),Object(re.jsx)(R.a,Object(u.a)({},b)),Object(re.jsx)(R.a,Object(u.a)({},h)),Boolean(i)&&Object(re.jsx)(B.a.Append,{children:Object(re.jsx)(g.a,{variant:"danger",onClick:i,children:Object(re.jsx)(d.a,{icon:j.v})})})]})}function xe(e){var t=e.characterSheet,a=e.character,n=e.build,c=e.className,r=Object(b.useCallback)((function(e){var t=e.hitMode;return X.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{hitMode:t}))}),[a]),i=Object(b.useCallback)((function(e){var t=e.reactionMode;return X.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{reactionMode:t}))}),[a]),s=Object(b.useCallback)((function(e){var t=e.infusionAura;return X.a.updateChar(Object(u.a)(Object(u.a)({},a),{},{infusionAura:t}))}),[a]);return a?Object(re.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",className:c,children:[Object(re.jsx)(p.a.Header,{children:Object(re.jsxs)(m.a,{children:[Object(re.jsx)(v.a,{children:"Hit Mode Options"}),Object(re.jsx)(v.a,{xs:"auto",children:Object(re.jsx)(q.b,{characterSheet:t,character:a,characterDispatch:s})})]})}),Object(re.jsxs)(p.a.Body,{className:"mb-n2",children:[Object(re.jsx)(q.a,{hitMode:a.hitMode,characterDispatch:r,className:"w-100 mb-2"}),Object(re.jsx)(q.c,{build:n,character:a,characterDispatch:i,className:"w-100 mb-2"})]})]}):null}function fe(e){var t=e.statKeys,a=void 0===t?[]:t,c=e.statFilters,r=void 0===c?{}:c,i=e.setStatFilters,s=e.className,o=a.filter((function(e){return!Object.keys(r).some((function(t){return t===e}))})),j=function(e,t,a){return i(Object(u.a)(Object(u.a)({},r),{},Object(n.a)({},e,{min:t,max:a})))};return Object(re.jsxs)(p.a,{bg:"lightcontent",text:"lightfont",className:s,children:[Object(re.jsx)(p.a.Header,{children:"Final Stat Filter"}),Object(re.jsx)(p.a.Body,{children:Object(re.jsxs)(m.a,{className:"mb-n2",children:[Object.entries(r).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1],c=n.min,s=n.max;return Object(re.jsx)(v.a,{xs:12,children:Object(re.jsx)(Oe,{statKey:a,statKeys:o,setFilter:j,min:c,max:s,close:function(){delete r[a],i(Object(u.a)({},r))}})},a)})),Object(re.jsx)(v.a,{xs:12,children:Object(re.jsx)(Oe,{min:void 0,max:void 0,close:void 0,statKeys:o,setFilter:j})})]})})]})}function me(e){var t=e.sheets,a=e.sheets.artifactSheets,n=e.index,c=e.characterKey,r=e.build,i=e.statsDisplayKeys,s=e.onClick,o=X.a._getChar(c);if(!o)return null;var u=o.equippedArtifacts,j=Z.h.every((function(e){var t;return u[e]===(null===(t=r.equippedArtifacts)||void 0===t?void 0:t[e])}));return Object(re.jsx)("div",{children:Object(re.jsxs)(w.a.Item,{variant:n%2?"customdark":"customdarker",className:"text-white",action:!0,onClick:s,children:[Object(re.jsx)("h5",{className:"mb-2",children:Object(re.jsxs)(m.a,{children:[Object(re.jsx)(v.a,{xs:"auto",children:Object(re.jsx)(y.a,{variant:"info",children:Object(re.jsxs)("strong",{children:[n+1,j?" (Equipped)":""]})})}),Object(re.jsx)(v.a,{xs:"auto",children:Object.entries(r.setToSlots).sort((function(e,t){var a=Object(l.a)(e,2),n=(a[0],a[1]),c=Object(l.a)(t,2);c[0];return c[1].length-n.length})).map((function(e){var t,n=Object(l.a)(e,2),c=n[0],r=n[1];return Object(re.jsxs)(y.a,{variant:j?"success":"primary",className:"mr-2",children:[r.map((function(e){return Object(z.a)(e)}))," ",null!==(t=null===a||void 0===a?void 0:a[c].name)&&void 0!==t?t:""]},c)}))})]})}),Object(re.jsx)(H.a,{editable:!1,sheets:t,character:o,newBuild:r,statsDisplayKeys:i,cardbg:n%2?"lightcontent":"darkcontent"})]})})}function ve(e){var t,a,n,c,r=e.totBuildNumber,i=e.generatingBuilds,s=e.generationSkipped,l=e.generationProgress,o=e.generationDuration,u=e.characterName,j=e.maxBuildsToShow,d=null!==(t=null===r||void 0===r?void 0:r.toLocaleString())&&void 0!==t?t:r,b=r-s,h=null!==(a=null===l||void 0===l?void 0:l.toLocaleString())&&void 0!==a?a:l,O=null!==(n=null===s||void 0===s?void 0:s.toLocaleString())&&void 0!==n?n:s,x=null!==(c=null===b||void 0===b?void 0:b.toLocaleString())&&void 0!==c?c:b,f=Boolean(s)&&Object(re.jsxs)("span",{children:["(",Object(re.jsx)("b",{children:O})," skipped)"]});if(i){var m=100*l/b;return Object(re.jsxs)(K.a,{variant:"success",children:[Object(re.jsxs)("span",{children:["Generating and testing ",Object(re.jsxs)("b",{className:"text-monospace",children:[h,"/",x]})," build configurations against the criteria for ",Object(re.jsx)("b",{children:u}),". ",f]}),Object(re.jsx)("br",{}),Object(re.jsxs)("h6",{children:["Time elapsed: ",Object(re.jsx)("strong",{className:"text-monospace",children:Object(ee.b)(o)})]}),Object(re.jsx)(M.a,{now:m,label:"".concat(m.toFixed(1),"%")})]})}return!i&&l?Object(re.jsxs)(K.a,{variant:"success",children:[Object(re.jsxs)("span",{children:["Generated and tested ",Object(re.jsx)("b",{className:"text-monospace",children:x})," Build configurations against the criteria for ",Object(re.jsx)("b",{children:u}),". ",f]}),Object(re.jsxs)("h6",{children:["Total duration: ",Object(re.jsx)("strong",{className:"text-monospace",children:Object(ee.b)(o)})]}),Object(re.jsx)(M.a,{now:100,variant:"success",label:"100%"})]}):0===r?Object(re.jsx)(K.a,{variant:"warning",className:"mb-0",children:Object(re.jsxs)("span",{children:["Current configuration will not generate any builds for ",Object(re.jsx)("b",{children:u}),". Please change your Artifact configurations, or add/unlock more Artifacts."]})}):r>le?Object(re.jsx)(K.a,{variant:"warning",className:"mb-0",children:Object(re.jsxs)("span",{children:["Current configuration will generate ",Object(re.jsx)("b",{children:d})," builds for ",Object(re.jsx)("b",{children:u}),". This might take quite a while to generate..."]})}):Object(re.jsx)(K.a,{variant:"success",className:"mb-0",children:Object(re.jsxs)("span",{children:["Current configuration ",r<=j?"generated":"will generate"," ",Object(re.jsx)("b",{children:d})," builds for ",Object(re.jsx)("b",{children:u}),"."]})})}var pe={0:Object(re.jsx)("span",{children:"No level assumption"}),4:Object(re.jsx)("span",{children:"Assume at least level 4"}),8:Object(re.jsx)("span",{children:"Assume at least level 8"}),12:Object(re.jsx)("span",{children:"Assume at least level 12"}),16:Object(re.jsx)("span",{children:"Assume at least level 16"}),20:Object(re.jsx)("span",{children:"Assume at least level 20"})};function ge(e){var t=e.mainStatAssumptionLevel,a=void 0===t?0:t,n=e.setmainStatAssumptionLevel;return Object(re.jsx)(k.a,{overlay:Object(re.jsx)(N.a,{id:"assume-level-tooltip",children:"Change Main Stat value to be at least a specific level. Does not change substats."}),children:Object(re.jsxs)(O.a,{children:[Object(re.jsx)(O.a.Toggle,{variant:a?"orange":"primary",children:pe[a]}),Object(re.jsx)(O.a.Menu,{children:Object.entries(pe).map((function(e){var t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(re.jsx)(O.a.Item,{onClick:function(){return n(parseInt(a))},children:c},a)}))})]})})}}}]);
//# sourceMappingURL=17.0e948807.chunk.js.map