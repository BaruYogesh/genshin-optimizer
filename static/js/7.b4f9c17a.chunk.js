(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[7],{284:function(e,t,a){"use strict";var n={weaponTypes:{bow:a.p+"static/media/icon_bow.7ceaa8e2.png",catalyst:a.p+"static/media/icon_catalyst.db078b7b.png",claymore:a.p+"static/media/icon_claymore.63b1abb8.png",polearm:a.p+"static/media/icon_polearm.e5f4a2a1.png",sword:a.p+"static/media/icon_sword.619c9c2d.png"},resin:{fragile:a.p+"static/media/Item_Fragile_Resin.f9ec8223.png",condensed:a.p+"static/media/Item_Condensed_Resin.1cecf64a.png"},exp_books:{advice:a.p+"static/media/Item_Wanderer's_Advice.58c62cf7.png",wit:a.p+"static/media/Item_Hero's_Wit.a79e36d0.png",experience:a.p+"static/media/Item_Adventurer's_Experience.92b5d195.png"}};t.a=n},303:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n,c=a(46),i=a(358),r=a(79),l=a(131),s=a(136),o=a(133),j=a(0);function d(e){var t=e.location,a=Object(l.a)("ui").t,d=Object(o.a)(s.b.get(null!==t&&void 0!==t?t:""),[t]);return Object(j.jsx)(r.a,{component:"span",children:(null===d||void 0===d?void 0:d.name)?d.nameWIthIcon:Object(j.jsxs)("span",{children:[Object(j.jsx)(i.a,{sx:{verticalAlign:"text-bottom"}})," ",a(n||(n=Object(c.a)(["inventory"])))]})})}},304:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(5),c=a(132),i=a(1013),r=a(1),l=a(284),s=a(20),o=a(98),j=a(289),d=a(0);function u(e){var t=e.value,a=e.onChange,u=Object(c.a)(e,["value","onChange"]),b=Object(r.useCallback)((function(e,t){return a(t||"")}),[a]);return Object(d.jsx)(j.a,Object(n.a)(Object(n.a)({exclusive:!0,onChange:b,value:t||s.j},u),{},{children:s.j.map((function(e){var t;return Object(d.jsx)(i.a,{value:e,children:Object(d.jsx)(o.a,{src:null===(t=l.a.weaponTypes)||void 0===t?void 0:t[e],size:2})},e)}))}))}},309:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return i}));var n=a(3);function c(e,t,a){function n(e,t,a,n){var c=n.getValue(e),i=n.getValue(t);return(a?-1:1)*("string"===typeof c&&"string"===typeof i?c.localeCompare(i):i-c)}return function(c,i){if(!a[e])return 0;var r=a[e],l=n(c,i,t,r);return!l&&r.tieBreaker&&a[r.tieBreaker]&&(l=n(c,i,t,a[r.tieBreaker])),l}}function i(e,t){return function(a){return Object.entries(e).every((function(e){var c=Object(n.a)(e,2),i=c[0],r=c[1];return t[i](a,r)}))}}},310:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(5),c=a(132),i=a(51),r=a(17),l=a(962),s=a(1012),o=a(272),j=a(131),d=a(95),u=a(279),b=a(0);function h(e){var t=e.sortKeys,a=e.value,h=e.onChange,x=e.ascending,O=e.onChangeAsc,v=Object(c.a)(e,["sortKeys","value","onChange","ascending","onChangeAsc"]),p=Object(j.a)("ui").t;return Object(b.jsxs)(l.a,Object(n.a)(Object(n.a)({},v),{},{children:[Object(b.jsx)(u.a,{title:Object(b.jsxs)(d.a,{t:p,i18nKey:"sortByFormat",value:p("sortMap.".concat(a)),children:["Sort By: ",{value:p("sortMap.".concat(a))}]}),children:t.map((function(e){return Object(b.jsx)(s.a,{selected:a===e,disabled:a===e,onClick:function(){return h(e)},children:p("sortMap.".concat(e))},e)}))}),Object(b.jsx)(o.a,{onClick:function(){return O(!x)},startIcon:Object(b.jsx)(r.a,{icon:x?i.x:i.y,className:"fa-fw"}),children:x?Object(b.jsx)(d.a,{t:p,i18nKey:"ascending",children:"Ascending"}):Object(b.jsx)(d.a,{t:p,i18nKey:"descending",children:"Descending"})})]}))}},312:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(3),c=a(21),i=a(7),r=a(5),l=a(11),s=a(15),o=a(81),j=a(116),d=[3,4,6],u={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3},b={};function h(e,t,a,n){if(5!==e.length)for(var c=0,o=d;c<o.length;c++){var j=o[c];t[j]>0&&h([].concat(Object(l.a)(e),[j]),Object(r.a)(Object(r.a)({},t),{},Object(i.a)({},j,t[j]-j)),a-j,n*t[j]/a)}else Object(s.k)(b,e,n)}h([0],{3:6,4:20,6:18},44,1),h([3],{3:3,4:20,6:18},41,1),h([4],{3:6,4:16,6:18},40,1),h([6],{3:6,4:20,6:12},38,1);for(var x=Array(6).fill(0).map((function(e,t){for(var a=[1],n=0,c=1;++n<=t;)c*=t-n+1,c/=n,a.push(c);return a})),O=[[1]],v=function(){var e=O[O.length-1],t=Array(e.length+3).fill(0);e.forEach((function(e,a){for(var n=0,c=[0,1,2,3];n<c.length;n++){t[a+c[n]]+=e}})),O.push(t.map((function(e){return e/4})))};O.length<6;)v();for(var p=function(){var e=m[f],t=e.reduce((function(e,t){return e+t}));e.forEach((function(e,a,n){n[a]=t,t-=e}))},f=0,m=O;f<m.length;f++)p();function g(e,t){if(e.rarity<=2)return NaN;var a=e.rarity,l=e.level,h=e.substats,v=Object(r.a)({},t),p=new Set(Object.keys(v)),f=0,m=e.mainStatKey;if(m in v){var g=4*a;if(j[a][m][g]<v[m])return 0;delete v[m],p.delete(m)}var y,w=Object(c.a)(h);try{for(w.s();!(y=w.n()).done;){var S=y.value,k=S.key,C=S.value;k?p.has(k)&&(p.delete(k),v[k]>C?v[k]-=C:delete v[k]):f+=1}}catch(M){w.e(M)}finally{w.f()}if(f+=4-h.length,p.size>f||Object.keys(v).length>4)return 0;for(var _=o.a.rollsRemaining(l,a)-f,K=0,B=Object.entries(v);K<B.length;K++){var A=Object(n.a)(B[K],2),T=A[0],N=A[1];v[T]=Math.max(Math.ceil(10*N/o.a.maxSubstatValues(T,a)),1)}var E=0,W=Object.entries(v).map((function(e){var t=Object(n.a)(e,2),a=t[0],c=t[1],i=p.has(a)?1:0,r=Math.ceil(c/10)-i;return E+=r,{target:c,filler:i,minUpgrade:r}})).reverse();if(E>_)return 0;var q=Object(i.a)({},_,1),F=_-E;return W.forEach((function(e,t){for(var a,c,i,r=e.target,l=e.filler,s=e.minUpgrade,o={},j=s;j<=s+F;j++)for(var d=r-7*(j+l),u=d>0?O[j+l][d]:1,b=0,h=Object.entries(q);b<h.length;b++){var v,p=Object(n.a)(h[b],2),f=p[0],m=p[1],g=parseInt(f);if(!(g<j)){var y=(c=j,i=4-t,x[a=g][c]*Math.pow(i-1,a-c)/Math.pow(i,a)),w=g-j;o[w]=(null!==(v=o[w])&&void 0!==v?v:0)+m*u*y}}q=o})),function(e,t,a){var n,i,r=null!==(n=u[e])&&void 0!==n?n:0,l=0,o={3:2,4:5,6:3},j=b[r],h=Object(c.a)(t);try{for(h.s();!(i=h.n()).done;){var O=i.value.key;if(O){var v=u[O];j=j[v],o[v]-=1}}}catch(M){h.e(M)}finally{h.f()}r&&(o[r]-=1);var p,f={3:0,4:0,6:0},m=Object(c.a)(a);try{for(m.s();!(p=m.n()).done;){var g=p.value;f[u[g]]+=1}}catch(M){m.e(M)}finally{m.f()}var y=0;Object(s.c)(j,[],(function(e){return"number"===typeof e}),(function(e,t){y+=e;var a,n={3:0,4:0,6:0},i=Object(c.a)(t);try{for(i.s();!(a=i.n()).done;){n[a.value]+=1}}catch(M){i.e(M)}finally{i.f()}var r,s=e,o=Object(c.a)(d);try{for(o.s();!(r=o.n()).done;){var j=r.value,u=n[j],b=f[j];if(u<b)return;s*=x[u][b]}}catch(M){o.e(M)}finally{o.f()}l+=s}));var w,S=Object(c.a)(d);try{for(S.s();!(w=S.n()).done;){var k=w.value;l/=x[o[k]][f[k]]}}catch(M){S.e(M)}finally{S.f()}return l/y}(e.mainStatKey,h,p)*Object.values(q).reduce((function(e,t){return e+t}))}},313:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(3),c=a(281),i=a(15),r=a(0);function l(e){var t=e.value,a=e.valid,l="number"===typeof t?["roll".concat(Object(i.a)(Math.floor(.05*t)+1,1,6)),t.toFixed(2)+"%"]:["secondary",t],s=Object(n.a)(l,2),o=s[0],j=s[1];return a||(o="error"),Object(r.jsx)(c.a,{color:o,children:j})}},317:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var n,c,i,r=a(46),l=a(3),s=a(51),o=a(17),j=a(375),d=a(376),u=a(79),b=a(170),h=a(468),x=a(221),O=a(396),v=a(273),p=a(265),f=a(397),m=a(470),g=a(962),y=a(272),w=a(998),S=a(1),k=a(131),C=a(297),_=a(276),K=a(296),B=a(303),A=a(32),T=a(281),N=a(282),E=a(174),W=a(133),q=a(40),F=a(70),M=a(139),D=a(15),z=a(81),I=a(134),L=a(140),G=a(313),V=a(312),U=a(0),R=new Set(F.b);function P(e){var t,a,F,P,H=e.artifactId,J=e.artifactObj,X=e.onEdit,Q=e.onDelete,Y=e.mainStatAssumptionLevel,Z=void 0===Y?0:Y,$=e.effFilter,ee=void 0===$?R:$,te=e.probabilityFilter,ae=Object(k.a)(["artifact"]).t,ne=Object(S.useContext)(E.b),ce=Object(S.useState)(void 0),ie=Object(l.a)(ce,2),re=ie[0],le=ie[1];Object(S.useEffect)((function(){return H?ne.followArt(H,le):void 0}),[H,le,ne]);var se=Object(W.a)(I.a.get(null===(t=null!==J&&void 0!==J?J:H?ne._getArt(H):void 0)||void 0===t?void 0:t.setKey),[J,H]),oe=!J&&ne===E.c,je=null!==J&&void 0!==J?J:re;if(!je)return null;var de=je.id,ue=je.lock,be=je.slotKey,he=je.rarity,xe=je.level,Oe=je.mainStatKey,ve=je.substats,pe=je.exclude,fe=je.location,me=void 0===fe?"":fe,ge=Math.max(Math.min(Z,4*he),xe),ye="roll"+(Math.floor(Math.max(xe,0)/4)+1),we=Object(U.jsx)(A.a,{color:ge!==xe?"warning":void 0,children:Object(M.b)(null!==(a=z.a.mainStatValue(Oe,he,ge))&&void 0!==a?a:0,q.b.getStatUnit(Oe))}),Se=z.a.getArtifactEfficiency(je,ee),ke=Se.currentEfficiency,Ce=Se.maxEfficiency,_e=0!==Ce,Ke=(null===se||void 0===se?void 0:se.getSlotName(be))||"Unknown Piece Name",Be=null===se||void 0===se?void 0:se.getSlotDesc(be),Ae=Be&&Object(U.jsx)(C.a,{placement:"top",title:Object(U.jsx)(u.a,{children:Be}),children:Object(U.jsx)("span",{children:Object(U.jsx)(o.a,{icon:s.s})})}),Te=null===se||void 0===se?void 0:se.setEffects,Ne=se&&Te&&Object(U.jsx)(C.a,{placement:"top",title:Object(U.jsx)("span",{children:Object.keys(Te).map((function(e){return Object(U.jsxs)("span",{children:[Object(U.jsx)(u.a,{variant:"h6",children:Object(U.jsx)(T.a,{color:"success",children:ae("setEffectNum",{setNum:e})})}),Object(U.jsx)(u.a,{children:se.setEffectDesc(e)})]},e)}))}),children:Object(U.jsx)("span",{children:Object(U.jsx)(o.a,{icon:s.s})})});return Object(U.jsx)(S.Suspense,{fallback:Object(U.jsx)(b.a,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:Object(U.jsxs)(_.a,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(U.jsxs)(h.a,{className:"grad-".concat(he,"star"),sx:{pt:1,pb:0,pr:0},children:[Object(U.jsxs)(x.a,{component:"div",sx:{display:"flex",alignItems:"center",pr:1},children:[Object(U.jsx)(O.a,{size:"small",label:Object(U.jsx)("strong",{children:" +".concat(xe)}),color:ye}),Object(U.jsxs)(u.a,{sx:{pl:1,flexGrow:1},children:[Ke," ",Ae]}),Object(U.jsx)(v.a,{color:"primary",disabled:!oe,onClick:function(){return ne.updateArt({lock:!ue},de)},children:ue?Object(U.jsx)(j.a,{}):Object(U.jsx)(d.a,{})})]}),Object(U.jsxs)(p.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(U.jsxs)(p.a,{item:!0,flexGrow:1,children:[Object(U.jsx)(u.a,{color:"text.secondary",variant:"body2",children:Object(U.jsx)(L.c,{slotKey:be})}),Object(U.jsx)(u.a,{variant:"h6",children:q.b.getStatName(Oe)}),Object(U.jsx)(u.a,{variant:"h5",children:Object(U.jsx)("strong",{children:we})}),Object(U.jsx)(N.a,{stars:he,colored:!0})]}),Object(U.jsx)(p.a,{item:!0,maxWidth:"40%",sx:{mt:-3,mb:-1,pl:-2},alignSelf:"flex-end",children:Object(U.jsx)(f.a,{component:"img",image:null!==(F=null===se||void 0===se?void 0:se.slotIcons[be])&&void 0!==F?F:"",width:"100%",height:"auto"})})]})]}),Object(U.jsxs)(h.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:0},children:[ve.map((function(e,t){var a,n,c;if(!e.value)return null;var i=null!==(a=null===(n=e.rolls)||void 0===n?void 0:n.length)&&void 0!==a?a:0,r="roll".concat(Object(D.a)(i,1,6)),l=null!==(c=e.efficiency)&&void 0!==c?c:0,s=.3+l/100*.7,o=q.b.getStatName(e.key);return Object(U.jsxs)(x.a,{sx:{display:"flex"},children:[Object(U.jsxs)(x.a,{sx:{flexGrow:1},children:[Object(U.jsx)(T.a,{color:i?r:"error",sx:{mr:1},children:Object(U.jsx)("strong",{children:i||"?"})}),Object(U.jsxs)(u.a,{color:i?"".concat(r,".main"):"error.main",component:"span",children:[o,"+".concat(Object(M.b)(e.value,q.b.getStatUnit(e.key)))]})]}),Object(U.jsx)(u.a,{sx:{opacity:s},children:e.key&&ee.has(e.key)?Object(M.b)(l,"eff"):"-"})]},t)})),Object(U.jsxs)(x.a,{sx:{display:"flex",my:1},children:[Object(U.jsx)(u.a,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:ae(n||(n=Object(r.a)(["editor.curSubEff"])))}),Object(U.jsx)(G.a,{value:ke,valid:_e})]}),ke!==Ce&&Object(U.jsxs)(x.a,{sx:{display:"flex",mb:1},children:[Object(U.jsx)(u.a,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:ae(c||(c=Object(r.a)(["editor.maxSubEff"])))}),Object(U.jsx)(G.a,{value:Ce,valid:_e})]}),Object(U.jsx)(x.a,{flexGrow:1}),te&&Object(U.jsxs)("strong",{children:["Probability: ",(100*Object(V.a)(je,te)).toFixed(2),"%"]}),Object(U.jsxs)(u.a,{color:"success.main",children:[null!==(P=null===se||void 0===se?void 0:se.name)&&void 0!==P?P:"Artifact Set"," ",Ne]})]}),Object(U.jsx)(m.a,{children:Object(U.jsxs)(p.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(U.jsx)(p.a,{item:!0,xs:"auto",flexShrink:1,children:oe?Object(U.jsx)(K.b,{size:"small",inventory:!0,value:me,onChange:function(e){return ne.setArtLocation(H,e)}}):Object(U.jsx)(B.a,{location:me})}),Object(U.jsx)(p.a,{item:!0,flexGrow:1,sx:{mr:1}}),oe&&Object(U.jsx)(p.a,{item:!0,xs:"auto",children:Object(U.jsxs)(g.a,{sx:{height:"100%"},children:[!!X&&Object(U.jsx)(y.a,{color:"info",onClick:function(){return X(de)},size:"small",children:Object(U.jsx)(o.a,{icon:s.m,className:"fa-fw"})}),Object(U.jsx)(w.a,{title:Object(U.jsx)(u.a,{children:ae(i||(i=Object(r.a)(["excludeArtifactTip"])))}),placement:"top",arrow:!0,children:Object(U.jsx)(y.a,{onClick:function(){return ne.updateArt({exclude:!pe},de)},color:pe?"error":"success",size:"small",children:Object(U.jsx)(o.a,{icon:pe?s.b:s.e,className:"fa-fw"})})}),!!Q&&Object(U.jsx)(y.a,{color:"error",size:"small",onClick:function(){return Q(de)},disabled:ue,children:Object(U.jsx)(o.a,{icon:s.D,className:"fa-fw"})})]})})]})})]})})}},320:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a(11),c=a(3),i=a(468),r=a(265),l=a(254),s=a(398),o=a(221),j=a(79),d=a(1),u=a(284),b=a(133),h=a(20),x=a(137),O=a(278),v=a(276),p=a(285),f=a(98),m=a(288),g=a(282),y=a(304),w=a(0);function S(e){var t=e.show,a=e.onHide,S=e.onSelect,k=e.filter,C=void 0===k?function(){return!0}:k,_=e.weaponFilter,K=Object(b.a)(x.a.getAll(),[]),B=Object(d.useState)(null!==_&&void 0!==_?_:""),A=Object(c.a)(B,2),T=A[0],N=A[1];Object(d.useEffect)((function(){return _&&N(_)}),[_]);var E=K?Object(n.a)(new Set(h.i)).filter((function(e){return C(K[e])})).filter((function(e){var t;return!T||T===(null===K||void 0===K||null===(t=K[e])||void 0===t?void 0:t.weaponType)})).sort((function(e,t){var a,n,c,i;return(null!==(a=null===K||void 0===K||null===(n=K[t])||void 0===n?void 0:n.rarity)&&void 0!==a?a:0)-(null!==(c=null===K||void 0===K||null===(i=K[e])||void 0===i?void 0:i.rarity)&&void 0!==c?c:0)})):[];return K?Object(w.jsx)(m.a,{open:t,onClose:a,children:Object(w.jsxs)(O.a,{children:[Object(w.jsx)(i.a,{sx:{py:1},children:Object(w.jsxs)(r.a,{container:!0,children:[Object(w.jsx)(r.a,{item:!0,flexGrow:1,children:Object(w.jsx)(y.a,{value:T,onChange:N,disabled:!!_,size:"small"})}),Object(w.jsx)(r.a,{item:!0,children:Object(w.jsx)(p.a,{onClick:a})})]})}),Object(w.jsx)(l.a,{}),Object(w.jsx)(i.a,{children:Object(w.jsx)(r.a,{container:!0,spacing:1,children:E.map((function(e){var t,n=K[e];return Object(w.jsx)(r.a,{item:!0,lg:3,md:4,children:Object(w.jsx)(v.a,{sx:{height:"100%"},children:Object(w.jsxs)(s.a,{onClick:function(){a(),S(e)},sx:{display:"flex"},children:[Object(w.jsx)(o.a,{component:"img",src:n.img,sx:{width:100,height:"auto"},className:" grad-".concat(n.rarity,"star")}),Object(w.jsxs)(o.a,{sx:{flexGrow:1,px:1},children:[Object(w.jsx)(j.a,{variant:"subtitle1",children:n.name}),Object(w.jsxs)(j.a,{children:[Object(w.jsx)(f.a,{src:null===(t=u.a.weaponTypes)||void 0===t?void 0:t[n.weaponType]})," ",Object(w.jsx)(g.a,{stars:n.rarity,colored:!0})]})]})]})})},e)}))})}),Object(w.jsx)(l.a,{}),Object(w.jsx)(i.a,{sx:{py:1},children:Object(w.jsx)(p.a,{large:!0,onClick:a})})]})}):null}},321:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a(3),c=a(51),i=a(17),r=a(375),l=a(376),s=a(398),o=a(170),j=a(350),d=a(273),u=a(265),b=a(79),h=a(221),x=a(468),O=a(962),v=a(272),p=a(1),f=a(284),m=a(276),g=a(296),y=a(303),w=a(305),S=a(98),k=a(282),C=a(135),_=a(47),K=a(174),B=a(133),A=a(40),T=a(137),N=a(0);function E(e){var t,a=e.weaponId,E=e.onClick,W=e.onEdit,q=e.onDelete,F=e.canEquip,M=void 0!==F&&F,D=Object(p.useContext)(K.b),z=Object(p.useState)(void 0),I=Object(n.a)(z,2),L=I[0],G=I[1];Object(p.useEffect)((function(){return a?D.followWeapon(a,G):void 0}),[a,G,D]);var V=L,U=Object(B.a)((null===V||void 0===V?void 0:V.key)&&T.a.get(V.key),[null===V||void 0===V?void 0:V.key]),R=Object(p.useCallback)((function(e){return e.weaponTypeKey===(null===U||void 0===U?void 0:U.weaponType)}),[U]),P=Object(p.useCallback)((function(e){return Object(N.jsx)(s.a,{onClick:function(){return null===E||void 0===E?void 0:E(a)},sx:{height:"100%"},children:e})}),[E,a]),H=Object(p.useCallback)((function(e){return D.setWeaponLocation(a,e)}),[D,a]);if(!V||!U)return null;var J=V.level,X=V.ascension,Q=V.refinement,Y=V.id,Z=V.location,$=void 0===Z?"":Z,ee=V.lock,te=U.weaponType,ae=U.getMainStatValue(J,X).toFixed(A.b.fixedUnit("atk")),ne=U.getSubStatKey(),ce=U.getSubStatValue(J,X).toFixed(A.b.fixedUnit(ne)),ie=[["weaponATK",ae]];(null===U||void 0===U?void 0:U.passiveName)&&ie.push([ne,ce]);var re=X<2?null===U||void 0===U?void 0:U.img:null===U||void 0===U?void 0:U.imgAwaken;return Object(N.jsx)(p.Suspense,{fallback:Object(N.jsx)(o.a,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:Object(N.jsx)(w.a,{condition:!!E,wrapper:P,children:Object(N.jsxs)(m.a,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(N.jsxs)("div",{className:"grad-".concat(U.rarity,"star"),children:[Object(N.jsx)(j.a,{title:U.name,avatar:Object(N.jsx)(S.a,{sx:{fontSize:"2em"},src:null===(t=f.a.weaponTypes)||void 0===t?void 0:t[te]}),titleTypographyProps:{variant:"h6"},action:!E&&Object(N.jsx)(d.a,{color:"primary",onClick:function(){return D.updateWeapon({lock:!ee},Y)},children:ee?Object(N.jsx)(r.a,{}):Object(N.jsx)(l.a,{})})}),Object(N.jsxs)(u.a,{container:!0,sx:{flexWrap:"nowrap",pl:2},children:[Object(N.jsxs)(u.a,{item:!0,flexGrow:1,children:[Object(N.jsxs)(b.a,{component:"span",variant:"h4",children:["Lv. ",J]}),Object(N.jsxs)(b.a,{component:"span",variant:"h4",color:"text.secondary",children:["/",_.b[X]]}),Object(N.jsxs)(b.a,{variant:"h6",children:["Refinement ",Object(N.jsx)("strong",{children:Q})]}),Object(N.jsx)(b.a,{children:Object(N.jsx)(k.a,{stars:U.rarity,colored:!0})})]}),Object(N.jsx)(u.a,{item:!0,container:!0,maxWidth:"40%",alignContent:"flex-end",sx:{mt:-3},children:Object(N.jsx)(h.a,{component:"img",src:re,width:"100%",height:"auto"})})]})]}),Object(N.jsx)(x.a,{children:ie.map((function(e){var t=Object(n.a)(e,2),a=t[0],c=t[1],i=A.b.getStatUnit(a);return Object(N.jsxs)(h.a,{sx:{display:"flex"},children:[Object(N.jsxs)(b.a,{flexGrow:1,children:[C.a[a]," ",A.b.getStatName(a)]}),Object(N.jsx)(b.a,{children:c+i})]},a)}))}),Object(N.jsx)(h.a,{flexGrow:1}),Object(N.jsx)(x.a,{sx:{py:1},children:Object(N.jsxs)(u.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(N.jsx)(u.a,{item:!0,xs:"auto",flexShrink:1,children:M?Object(N.jsx)(g.b,{size:"small",noUnselect:!0,inventory:!0,value:$,onChange:H,filter:R}):Object(N.jsx)(y.a,{location:$})}),Object(N.jsx)(u.a,{item:!0,flexGrow:1,sx:{mr:1}}),Object(N.jsx)(u.a,{item:!0,xs:"auto",children:Object(N.jsxs)(O.a,{sx:{height:"100%"},children:[!!W&&Object(N.jsx)(v.a,{color:"info",size:"small",onClick:function(){return W(Y)},children:Object(N.jsx)(i.a,{icon:c.m,className:"fa-fw"})}),!!q&&Object(N.jsx)(v.a,{color:"error",size:"small",onClick:function(){return q(Y)},disabled:!!$||ee,children:Object(N.jsx)(i.a,{icon:c.D,className:"fa-fw"})})]})})]})})]})})})}},332:function(e,t,a){"use strict";a.d(t,"a",(function(){return q}));var n=a(11),c=a(3),i=a(468),r=a(265),l=a(254),s=a(398),o=a(221),j=a(79),d=a(1),u=a(134),b=a(284),h=a(283),x=a(136),O=a(174),v=a(133),p=a(20),f=a(333),m=a(309),g=a(137),y=a(278),w=a(276),S=a(285),k=a(98),C=a(288),_=a(310),K=a(281),B=a(282),A=a(135),T=a(334),N=a(304),E=a(0),W=["level","rarity","name"];function q(e){var t=e.show,a=e.onHide,s=e.onSelect,o=e.filter,j=void 0===o?function(){return!0}:o,u=e.newFirst,b=void 0!==u&&u,h=Object(d.useMemo)((function(){return b?["new"].concat(W):W}),[b]),g=Object(d.useContext)(O.b),w=Object(d.useState)(h[0]),k=Object(c.a)(w,2),K=k[0],B=k[1],A=Object(d.useState)(!1),q=Object(c.a)(A,2),M=q[0],D=q[1],z=Object(d.useState)(""),I=Object(c.a)(z,2),L=I[0],G=I[1],V=Object(d.useState)(""),U=Object(c.a)(V,2),R=U[0],P=U[1],H=Object(v.a)(x.b.getAll(),[]),J=Object(d.useMemo)((function(){return H&&Object(f.b)(g,H)}),[g,H]),X=Object(d.useMemo)((function(){return H&&Object(f.a)(H)}),[H]),Q=Object(d.useMemo)((function(){return H&&J&&X?Object(n.a)(new Set(p.c)).filter((function(e){return j(g._getChar(e),H[e])})).filter(Object(m.a)({element:L,weaponType:R},X)).sort(Object(m.b)(K,M,J)):[]}),[g,H,j,L,R,K,M,J,X]);return H?Object(E.jsx)(C.a,{open:t,onClose:a,children:Object(E.jsxs)(y.a,{children:[Object(E.jsx)(i.a,{sx:{py:1},children:Object(E.jsxs)(r.a,{container:!0,spacing:1,children:[Object(E.jsx)(r.a,{item:!0,children:Object(E.jsx)(N.a,{sx:{height:"100%"},onChange:P,value:R,size:"small"})}),Object(E.jsx)(r.a,{item:!0,flexGrow:1,children:Object(E.jsx)(T.a,{sx:{height:"100%"},onChange:G,value:L,size:"small"})}),Object(E.jsx)(r.a,{item:!0,flexGrow:1}),Object(E.jsx)(r.a,{item:!0,children:Object(E.jsx)(_.a,{sx:{height:"100%"},sortKeys:h,value:K,onChange:B,ascending:M,onChangeAsc:D})}),Object(E.jsx)(r.a,{item:!0,children:Object(E.jsx)(S.a,{onClick:a})})]})}),Object(E.jsx)(l.a,{}),Object(E.jsx)(i.a,{children:Object(E.jsx)(r.a,{container:!0,spacing:1,children:Q.map((function(e){return Object(E.jsx)(r.a,{item:!0,xs:6,md:4,lg:3,children:Object(E.jsx)(F,{characterKey:e,onClick:function(){a(),null===s||void 0===s||s(e)}},e)},e)}))})})]})}):null}function F(e){var t,a=e.onClick,n=e.characterKey,c=Object(d.useContext)(O.b),i=c._getChar(n),r=Object(v.a)(x.b.get(n),[n]),l=(null===i||void 0===i?void 0:i.equippedWeapon)?c._getWeapon(i.equippedWeapon):void 0,p=Object(v.a)(l?g.a.get(l.key):void 0,[null===l||void 0===l?void 0:l.key]),f=Object(v.a)(u.a.getAll(),[]),m=Object(d.useMemo)((function(){return i&&r&&p&&f&&h.a.calculateBuild(i,c,r,p,f)}),[i,r,p,f,c]);if(!r)return null;var y=r.star;return Object(E.jsx)(s.a,{onClick:a,children:Object(E.jsxs)(w.a,{sx:{display:"flex",alignItems:"center"},children:[Object(E.jsx)(o.a,{component:"img",src:r.thumbImg,sx:{width:130,height:"auto"},className:"grad-".concat(y,"star")}),Object(E.jsxs)(o.a,{sx:{pl:1},children:[Object(E.jsx)(j.a,{children:Object(E.jsx)("strong",{children:r.name})}),m&&i?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(j.a,{variant:"h6",children:[" ",r.elementKey&&A.a[r.elementKey]," ",Object(E.jsx)(k.a,{src:null===(t=b.a.weaponTypes)||void 0===t?void 0:t[r.weaponTypeKey]})," ",h.a.getLevelString(i)]}),Object(E.jsxs)(j.a,{children:[Object(E.jsx)(K.a,{color:"success",children:"C".concat(i.constellation)})," ",Object(E.jsx)(K.a,{color:"secondary",children:Object(E.jsx)("strong",{children:m.tlvl.auto+1})})," ",Object(E.jsx)(K.a,{color:m.skillBoost?"info":"secondary",children:Object(E.jsx)("strong",{children:m.tlvl.skill+1})})," ",Object(E.jsx)(K.a,{color:m.burstBoost?"info":"secondary",children:Object(E.jsx)("strong",{children:m.tlvl.burst+1})})]})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(j.a,{variant:"h6",children:Object(E.jsx)(K.a,{color:"primary",children:"NEW"})})}),Object(E.jsx)("small",{children:Object(E.jsx)(B.a,{stars:r.star,colored:!0})})]})]})})}},333:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return i}));var n=["level","rarity","name"];function c(e,t){return{new:{getValue:function(t){return e._getChar(t)?0:1},tieBreaker:"name"},name:{getValue:function(e){return e}},level:{getValue:function(t){var a,n;return null!==(a=null===(n=e._getChar(t))||void 0===n?void 0:n.level)&&void 0!==a?a:0},tieBreaker:"rarity"},rarity:{getValue:function(e){var a;return null===t||void 0===t||null===(a=t[e])||void 0===a?void 0:a.star},tieBreaker:"level"}}}function i(e){return{element:function(t,a){var n;return!a||a===(null===e||void 0===e||null===(n=e[t])||void 0===n?void 0:n.elementKey)},weaponType:function(t,a){var n;return!a||a===(null===e||void 0===e||null===(n=e[t])||void 0===n?void 0:n.weaponTypeKey)}}}},334:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(5),c=a(132),i=a(1013),r=a(221),l=a(1),s=a(20),o=a(289),j=a(135),d=a(0);function u(e){var t=e.value,a=e.onChange,u=Object(c.a)(e,["value","onChange"]),b=Object(l.useCallback)((function(e,t){return a(t||"")}),[a]);return Object(d.jsx)(o.a,Object(n.a)(Object(n.a)({exclusive:!0,onChange:b,value:t||s.d},u),{},{children:s.d.map((function(e){return Object(d.jsx)(i.a,{value:e,children:Object(d.jsx)(r.a,{sx:{fontSize:"2em",lineHeight:1},children:j.b[e]})},e)}))}))}},343:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return R}));var n=a(7),c=a(11),i=a(5),r=a(3),l=a(375),s=a(376),o=a(430),j=a(468),d=a(265),u=a(962),b=a(272),h=a(1012),x=a(254),O=a(221),v=a(79),p=a(1),f=a(284),m=a(112),g=a(136),y=a(278),w=a(276),S=a(296),k=a(285),C=(a(32),a(291)),_=a(300),K=a(279),B=a(98),A=a(288),T=a(281),N=a(282),E=a(320),W=a(47),q=a(174),F=a(290),M=a(133),D=a(15),z=a(321),I=a(137),L=a(287),G=a(113),V=a(0);function U(e){var t=e.title,a=e.statsVals,n=void 0===a?{}:a,c=e.stats;if(0===Object.keys(n).filter((function(e){return"modifiers"!==e})).length)return null;var i=Object(G.a)(n,c);return Object(V.jsxs)(y.a,{sx:{mb:1},children:[Object(V.jsx)(j.a,{children:Object(V.jsx)(v.a,{children:t})}),Object(V.jsx)(L.a,{children:i.map((function(e,t){return Object(V.jsx)(L.b,{field:e},t)}))})]})}function R(e){var t,a,o=e.weaponId,f=e.charData,y=e.footer,B=void 0!==y&&y,A=e.onClose,z=Object(p.useContext)(q.b),L=Object(F.a)(),G=Object(r.a)(L,2),R=G[0],H=G[1],J=Object(p.useContext)(m.a),X=Object(p.useMemo)((function(){return R&&z._getWeapon(o)}),[o,R,z]),Q=X.key,Y=X.level,Z=X.refinement,$=X.ascension,ee=X.lock,te=X,ae=te.location,ne=void 0===ae?"":ae,ce=te.id,ie=Object(M.a)(I.a.get(Q),[Q]),re=null===ie||void 0===ie?void 0:ie.weaponType;Object(p.useEffect)((function(){return o?z.followWeapon(o,H):void 0}),[o,H,z]);var le=Object(p.useCallback)((function(e){z.updateWeapon(e,o)}),[o,z]),se=Object(p.useCallback)((function(e){e=Object(D.a)(e,1,90);var t=W.b.findIndex((function(t){return e<=t}));le({level:e,ascension:t})}),[le]),oe=Object(p.useCallback)((function(){var e=W.b.findIndex((function(e){return 90!==Y&&Y===e}));le($===e?{ascension:$+1}:{ascension:e})}),[le,$,Y]),je=Object(i.a)({},f?null!==(t=f.newBuild)&&void 0!==t?t:f.equippedBuild:{weapon:{refineIndex:Z-1,level:Y,ascension:$}}),de=Object(M.a)(ne?g.b.get(ne):void 0,[ne]),ue=de?function(e){return e.weaponType===de.weaponTypeKey}:void 0,be=de&&de.weaponTypeKey,he=Object(p.useCallback)((function(e){return ce&&z.setWeaponLocation(ce,e)}),[z,ce]),xe=Object(p.useCallback)((function(e){return e.weaponTypeKey===(null===ie||void 0===ie?void 0:ie.weaponType)}),[ie]),Oe=Object(p.useState)(!1),ve=Object(r.a)(Oe,2),pe=ve[0],fe=ve[1],me=$<2?null===ie||void 0===ie?void 0:ie.img:null===ie||void 0===ie?void 0:ie.imgAwaken;return Object(V.jsxs)(w.a,{children:[Object(V.jsx)(j.a,{sx:{py:1},children:Object(V.jsxs)(d.a,{container:!0,spacing:1,children:[Object(V.jsx)(d.a,{item:!0,flexGrow:1,children:Object(V.jsxs)(d.a,{container:!0,spacing:1,children:[Object(V.jsxs)(d.a,{item:!0,children:[Object(V.jsx)(E.a,{show:pe,onHide:function(){return fe(!1)},onSelect:function(e){return le({key:e})},filter:ue,weaponFilter:be}),Object(V.jsxs)(u.a,{children:[Object(V.jsx)(b.a,{onClick:function(){return fe(!0)},children:null!==(a=null===ie||void 0===ie?void 0:ie.name)&&void 0!==a?a:"Select a Weapon"}),Object(V.jsxs)(K.a,{title:"Refinement ".concat(Z),children:[Object(V.jsx)(h.a,{children:"Select Weapon Refinement"}),Object(V.jsx)(x.a,{}),Object(c.a)(Array(5).keys()).map((function(e){return Object(V.jsx)(h.a,{onClick:function(){return le({refinement:e+1})},selected:Z===e+1,disabled:Z===e+1,children:"Refinement ".concat(e+1)},e)}))]})]})]}),Object(V.jsx)(d.a,{item:!0,children:Object(V.jsxs)(u.a,{sx:{bgcolor:function(e){return e.palette.contentLight.main}},children:[Object(V.jsx)(C.a,{children:Object(V.jsx)(C.c,{onChange:se,value:Y,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),Object(V.jsx)(b.a,{sx:{pl:1},disabled:!Object(W.a)(Y),onClick:oe,children:Object(V.jsxs)("strong",{children:["/ ",W.b[$]]})}),Object(V.jsx)(K.a,{title:"Select Level",children:W.c.map((function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1],c=a===W.b[n]?"Lv. ".concat(a):"Lv. ".concat(a,"/").concat(W.b[n]),i=a===Y&&n===$;return Object(V.jsx)(h.a,{selected:i,disabled:i,onClick:function(){return le({level:a,ascension:n})},children:c},"".concat(a,"/").concat(n))}))})]})}),Object(V.jsx)(d.a,{item:!0,children:Object(V.jsx)(b.a,{color:"error",onClick:function(){return ce&&z.updateWeapon({lock:!ee},ce)},startIcon:ee?Object(V.jsx)(l.a,{}):Object(V.jsx)(s.a,{}),children:ee?"Locked":"Unlocked"})})]})}),!!A&&Object(V.jsx)(d.a,{item:!0,children:Object(V.jsx)(k.a,{onClick:A})}),!!f&&z===q.c&&Object(V.jsx)(d.a,{item:!0,children:Object(V.jsx)(P,{weaponTypeKey:re,onChangeId:function(e){return z.setWeaponLocation(e,f.character.key)}})})]})}),Object(V.jsx)(x.a,{}),Object(V.jsx)(j.a,{children:function(){if(!ie)return null;var e=ie.getSubStatKey(),t=ie.getMainStatValue(Y,$),a=ie.getSubStatValue(Y,$),c=ie.passiveName,i=ie.stats(je),r=ie.document;return Object(V.jsxs)(O.a,{display:"flex",gap:{xs:1,md:1.5,lg:2},children:[Object(V.jsxs)(O.a,{sx:{maxWidth:256},flexShrink:1,minWidth:"25%",children:[Object(V.jsx)(O.a,{component:"img",src:me,className:"grad-".concat(ie.rarity,"star"),sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}}),Object(V.jsx)(v.a,{children:Object(V.jsx)("small",{children:ie.description})})]}),Object(V.jsxs)(O.a,{sx:{mb:-1},flexGrow:1,children:[Object(V.jsxs)(v.a,{variant:"h6",children:[!1,ie.name," Lv. ",I.a.getLevelString(X)," ",c&&Object(V.jsxs)(T.a,{color:"info",children:["Refinement ",Z]})]}),Object(V.jsx)(v.a,{children:Object(V.jsx)(N.a,{stars:ie.rarity})}),Object(V.jsx)(v.a,{variant:"subtitle1",children:c}),Object(V.jsx)(v.a,{gutterBottom:!0,children:c&&ie.passiveDescription(je)}),je&&Object(V.jsxs)(m.a.Provider,{value:f?J:{equippedBuild:je,newBuild:void 0,compareBuild:!1,setCompareBuild:void 0},children:[Object(V.jsx)(U,{title:"Main Stats",statsVals:Object(n.a)({atk:t},e,e?a:void 0),stats:je}),Object(V.jsx)(U,{title:"Bonus Stats",statsVals:i,stats:je})]}),f&&r?function(){var e,t=f.equippedBuild,a=f.newBuild,n=null===(e=a||t)||void 0===e?void 0:e.characterKey;return!!n&&Object(V.jsx)(_.a,{sections:r,equippedBuild:t,newBuild:a,characterKey:n})}():null]})]})}()}),B&&ce&&Object(V.jsx)(j.a,{sx:{py:1},children:Object(V.jsxs)(d.a,{container:!0,children:[Object(V.jsx)(d.a,{item:!0,flexGrow:1,children:Object(V.jsx)(S.b,{noUnselect:!0,inventory:!0,value:ne,onChange:he,filter:xe})}),!!A&&Object(V.jsx)(d.a,{item:!0,children:Object(V.jsx)(k.a,{large:!0,onClick:A})})]})})]})}function P(e){var t=e.onChangeId,a=e.weaponTypeKey,n=Object(p.useContext)(q.b),c=Object(p.useState)(!1),i=Object(r.a)(c,2),l=i[0],s=i[1],u=function(){return s(!1)},h=function(e){t(e),u()},O=Object(M.a)(I.a.getAll(),[]),m=n.weapons.keys.filter((function(e){var t,c=n._getWeapon(e);return!!c&&(!a||a===(null===O||void 0===O||null===(t=O[c.key])||void 0===t?void 0:t.weaponType))}));return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(b.a,{color:"info",onClick:function(){return s(!0)},startIcon:Object(V.jsx)(o.a,{}),children:"SWAP WEAPON"}),Object(V.jsx)(A.a,{open:l,onClose:u,children:Object(V.jsxs)(y.a,{children:[Object(V.jsx)(j.a,{sx:{py:1},children:Object(V.jsxs)(d.a,{container:!0,children:[Object(V.jsx)(d.a,{item:!0,flexGrow:1,children:Object(V.jsxs)(v.a,{variant:"h6",children:[a?Object(V.jsx)(B.a,{src:f.a.weaponTypes[a]}):null," Swap Weapon"]})}),Object(V.jsx)(d.a,{item:!0,children:Object(V.jsx)(k.a,{onClick:u})})]})}),Object(V.jsx)(x.a,{}),Object(V.jsx)(j.a,{children:Object(V.jsx)(d.a,{container:!0,spacing:1,children:m.map((function(e){return Object(V.jsx)(d.a,{item:!0,xs:6,sm:6,md:4,lg:3,children:Object(V.jsx)(z.a,{weaponId:e,onClick:h})},e)}))})})]})})]})}},349:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return He}));var n=a(3),c=a(5),i=a(132),r=a(170),l=a(468),s=a(265),o=a(467),j=a(79),d=a(262),u=a(269),b=a(254),h=a(962),x=a(272),O=a(1012),v=a(1),p=a(134),f=a(112),m=a(278),g=a(276),y=a(332),w=a(302),S=a(285),k=a(291),C=a(279),_=a(340),K=a(353),B=a(372),A=a(577),T=a(578),N=a(579),E=a(221),W=a(283),q=a(299),F=a(83),M=a(133),D=a(40),z=a(307),I=a(32),L=a(301),G=a(0);function V(e){var t=e.sheets,a=Object(v.useState)(!1),c=Object(n.a)(a,2),i=c[0],r=c[1],o=Object(v.useCallback)((function(){return r(!i)}),[r,i]),d=Object(v.useContext)(f.a),u=d.newBuild,b=d.equippedBuild,h=u||b;return Object(G.jsxs)(g.a,{children:[Object(G.jsx)(l.a,{children:Object(G.jsxs)(s.a,{container:!0,children:[Object(G.jsxs)(s.a,{item:!0,flexGrow:1,children:[Object(G.jsxs)(j.a,{children:["Formulas ","&"," Calculations"]}),Object(G.jsx)(j.a,{variant:"caption",color:"text.secondary",children:"Expand to see every formula and all their calculations."})]}),Object(G.jsx)(s.a,{item:!0,children:Object(G.jsx)(L.a,{expand:i,onClick:o,"aria-expanded":i,"aria-label":"show more",children:Object(G.jsx)(K.a,{})})})]})}),Object(G.jsx)(B.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(G.jsx)(l.a,{sx:{pt:0},children:Object(G.jsx)(U,{sheets:t,build:h})})})]})}function U(e){var t=e.sheets,a=e.build,c=Object(v.useMemo)((function(){return a&&W.a.getDisplayStatKeys(a,t)}),[a,t]);return a?Object(G.jsx)(v.Suspense,{fallback:Object(G.jsx)(r.a,{variant:"rectangular",width:"100%",height:1e3}),children:Object.entries(c).map((function(e){var c=Object(n.a)(e,2),i=c[0],r=c[1],s=Object(q.a)(i,t,a.characterEle);return Object(G.jsxs)(m.a,{sx:{mb:1},children:[Object(G.jsx)(l.a,{sx:{pb:1},children:Object(G.jsx)(j.a,{variant:"h6",children:s})}),Object(G.jsx)(b.a,{}),Object(G.jsx)(l.a,{children:r.map((function(e,t){if(Array.isArray(e))return Object(G.jsx)(R,{fieldKeys:e,build:a},t);if("string"===typeof e){var n=D.b.getPrintableFormulaStatKeyList(Object(z.a)(a,null===a||void 0===a?void 0:a.modifiers,[e]),null===a||void 0===a?void 0:a.modifiers).reverse();return Boolean(n.length)&&Object(G.jsxs)(A.a,{sx:{bgcolor:"contentLight.main"},children:[Object(G.jsx)(T.a,{expandIcon:Object(G.jsx)(K.a,{}),children:Object(G.jsx)(j.a,{children:D.b.printStat(e,a)})}),Object(G.jsx)(N.a,{children:n.map((function(e){return Object(G.jsxs)(j.a,{children:[D.b.printStat(e,a)," = ",Object(G.jsx)("small",{children:Object(G.jsx)(D.a,{statKey:e,stats:a,modifiers:a.modifiers,expand:!1})})]},e)}))})]},t)}return null}))})]},i)}))}):null}function R(e){var t,a,c,i,r=e.fieldKeys,l=e.build,s=Object(M.a)(F.a.get(r),[r]);if(!s)return null;var o=s.field,d=W.a.getTalentFieldValue(o,"text",l),u=W.a.getTalentFieldValue(o,"variant",l),b=W.a.getTalentFieldValue(o,"formulaText",l),h=null!==(t=W.a.getTalentFieldValue(o,"fixed",l))&&void 0!==t?t:0,x=null!==(a=W.a.getTalentFieldValue(o,"unit",l))&&void 0!==a?a:"",O=W.a.getTalentFieldValue(o,"formula",l,[]),v=Object(n.a)(O,2),p=v[0],f=v[1];if(!p||!f)return null;var m=null===p||void 0===p||null===(c=p(l))||void 0===c||null===(i=c.toFixed)||void 0===i?void 0:i.call(c,h),g=D.b.getPrintableFormulaStatKeyList(Object(z.a)(l,null===l||void 0===l?void 0:l.modifiers,f),null===l||void 0===l?void 0:l.modifiers).reverse();return Object(G.jsxs)(A.a,{sx:{bgcolor:"contentLight.main"},children:[Object(G.jsx)(T.a,{expandIcon:Object(G.jsx)(K.a,{}),children:Object(G.jsxs)(j.a,{children:[Object(G.jsx)(E.a,{color:"".concat(u,".main"),component:"strong",children:d})," ",Object(G.jsxs)(I.a,{color:"info",children:[m,x]})]})}),Object(G.jsxs)(N.a,{children:[Object(G.jsxs)(j.a,{children:[Object(G.jsx)(E.a,{color:"".concat(u,".main"),component:"strong",children:d})," ",Object(G.jsx)(I.a,{color:"info",children:m})," = ",Object(G.jsx)("small",{children:b})]}),g.map((function(e){return Object(G.jsxs)(j.a,{children:[D.b.printStat(e,l)," = ",Object(G.jsx)("small",{children:Object(G.jsx)(D.a,{statKey:e,stats:l,modifiers:l.modifiers,expand:!1})})]},e)}))]})]})}var P=a(341),H=a(98),J=a(63),X=a(47),Q=a(174),Y=a(286),Z=a(290),$=a(15),ee=a(137),te=a(1013),ae=a(24),ne=a(317),ce=a(328),ie=a(289),re=a(20),le=a(339);var se=function(e){var t,a=e.sheets,c=e.character,i=e.character.key,r=Object(v.useContext)(f.a),d=r.newBuild,u=r.equippedBuild,h=r.compareBuild,O=r.setCompareBuild,m=Object(v.useContext)(Q.b),y=Object(ae.g)(),w=d||u,S=null!==(t=null===w||void 0===w?void 0:w.mainStatAssumptionLevel)&&void 0!==t?t:0,k=Object(v.useMemo)((function(){return w&&W.a.getDisplayStatKeys(w,a)}),[w,a]),C=Object(v.useCallback)((function(e){return y.push({pathname:"/artifact",artToEditId:e})}),[y]),_=Object(M.a)(p.a.getAll(),[]),K=Object(Z.a)(),B=Object(n.a)(K,2)[1];Object(v.useEffect)((function(){return m.followAnyArt(B)}));var A=Object(v.useCallback)((function(){window.confirm("Do you want to equip this artifact build to this character?")&&d&&d.equippedArtifacts&&m.equipArtifacts(i,d.equippedArtifacts)}),[i,d,m]),T=Object(v.useCallback)((function(){window.confirm("Do you want to move all the artifacts equipped to inventory?")&&m.equipArtifacts(i,Object($.o)(re.h,(function(){return""})))}),[i,m]);return w?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)(g.a,{sx:{mb:1},children:[Object(G.jsx)(l.a,{children:Object(G.jsx)(le.a,{sheets:a,character:c,equippedBuild:d&&!h?void 0:u,newBuild:d,statsDisplayKeys:k})}),Object(G.jsx)(b.a,{}),Object(G.jsx)(l.a,{sx:{py:1},children:Object(G.jsxs)(s.a,{container:!0,spacing:1,children:[Object(G.jsx)(s.a,{item:!0,children:d?Object(G.jsx)(x.a,{onClick:A,className:"mr-2",children:"Equip artifacts"}):m===Q.c&&Object(G.jsx)(x.a,{color:"error",onClick:T,children:"Unequip all artifacts"})}),Object(G.jsx)(s.a,{item:!0,children:!!d&&Object(G.jsxs)(ie.a,{exclusive:!0,value:h,onChange:function(e,t){return null===O||void 0===O?void 0:O(t)},size:"small",children:[Object(G.jsx)(te.a,{value:!1,children:Object(G.jsx)("small",{children:"Show New artifact Stats"})}),Object(G.jsx)(te.a,{value:!0,children:Object(G.jsx)("small",{children:"Compare against equipped artifacts"})})]})}),Object(G.jsx)(s.a,{item:!0,flexGrow:1}),Object(G.jsx)(s.a,{item:!0,children:!!S&&Object(G.jsx)(o.a,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:Object(G.jsx)(j.a,{children:Object(G.jsxs)("strong",{children:["Assume Main Stats are Level ",S]})})})})]})})]}),Object(G.jsxs)(s.a,{container:!0,spacing:1,children:[Object(G.jsx)(s.a,{item:!0,xs:12,sm:6,md:4,children:Object(G.jsx)(g.a,{sx:{height:"100%"},children:Object(G.jsx)(l.a,{sx:{height:"100%"},children:Object(G.jsx)(s.a,{container:!0,spacing:2,flexDirection:"column",height:"100%",children:_&&Object.entries(p.a.setEffects(_,w.setToSlots)).map((function(e){var t,a=Object(n.a)(e,2),c=a[0],r=a[1];return Object(G.jsxs)(s.a,{item:!0,children:[Object(G.jsx)(j.a,{variant:"subtitle1",gutterBottom:!0,children:null!==(t=null===_||void 0===_?void 0:_[c].name)&&void 0!==t?t:""}),r.map((function(e){return Object(G.jsx)(ce.a,{setKey:c,setNumKey:e,equippedBuild:u,newBuild:d,characterKey:i},c+e)}))]},c)}))})})})}),re.h.map((function(e){var t,a,n;return!!(null===w||void 0===w||null===(t=w.equippedArtifacts)||void 0===t?void 0:t[e])&&Object(G.jsx)(s.a,{item:!0,xs:6,md:4,children:Object(G.jsx)(ne.a,{artifactId:null===w||void 0===w||null===(n=w.equippedArtifacts)||void 0===n?void 0:n[e],mainStatAssumptionLevel:S,onEdit:function(){var t;return C(null===w||void 0===w||null===(t=w.equippedArtifacts)||void 0===t?void 0:t[e])}})},null===w||void 0===w||null===(a=w.equippedArtifacts)||void 0===a?void 0:a[e])}))]})]}):null},oe=a(11),je=a(51),de=a(17),ue=a(397),be=a(576),he=a(284),xe=a(282),Oe=a(315),ve=a(135),pe=a(42),fe=a(343),me=a(316);function ge(e){var t,a=e.characterSheet,n=e.character,i=e.character,r=i.constellation,o=i.key,d=Object(v.useContext)(f.a),u=d.newBuild,b=d.equippedBuild,h=Object(Y.a)(o),x=u||b;if(!x)return null;var O=x.tlvl,p=x.characterEle,m=a.weaponTypeKey;return Object(G.jsxs)(s.a,{container:!0,spacing:1,children:[Object(G.jsx)(s.a,{item:!0,xs:12,md:3,children:Object(G.jsxs)(g.a,{children:[Object(G.jsx)(ue.a,{src:a.cardImg,component:"img",width:"100%",height:"auto"}),Object(G.jsxs)(l.a,{children:[Object(G.jsxs)(j.a,{variant:"h4",children:[a.name," ",Object(G.jsx)(H.a,{src:null===(t=he.a.weaponTypes)||void 0===t?void 0:t[m]})," ",ve.a[p]," "]}),Object(G.jsx)(j.a,{variant:"h6",children:Object(G.jsx)(xe.a,{stars:a.star,colored:!0})}),Object(G.jsxs)(j.a,{variant:"h5",children:["Lvl. ",W.a.getLevelString(n)]}),Object(G.jsx)(s.a,{container:!0,spacing:1,mt:1,children:["auto","skill","burst"].map((function(e){var t;return Object(G.jsx)(s.a,{item:!0,xs:4,children:Object(G.jsx)(be.a,{badgeContent:O[e]+1,color:"skill"===e&&x.skillBoost||"burst"===e&&x.burstBoost?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{"& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:Object(G.jsx)(E.a,{component:"img",src:null===(t=a.getTalentOfKey(e,x.characterEle))||void 0===t?void 0:t.img,width:"100%",height:"auto"})})},e)}))}),Object(G.jsx)(j.a,{sx:{textAlign:"center",mt:1},variant:"h6",children:a.constellationName}),Object(G.jsx)(s.a,{container:!0,spacing:1,children:Object(oe.a)(Array(6).keys()).map((function(e){var t;return Object(G.jsx)(s.a,{item:!0,xs:4,children:Object(G.jsx)(E.a,{component:"img",src:null===(t=a.getTalentOfKey("constellation".concat(e+1),x.characterEle))||void 0===t?void 0:t.img,sx:Object(c.a)({cursor:"pointer"},r>e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto",onClick:function(){return h({constellation:e+1===r?e:e+1})}})},e)}))})]})]})}),Object(G.jsxs)(s.a,{item:!0,xs:12,md:9,sx:{"> div:not(:last-child)":{mb:1}},children:[Object(G.jsx)(fe.default,{charData:{character:n,characterSheet:a,equippedBuild:b,newBuild:u,characterDispatch:h},weaponId:n.equippedWeapon}),Object(G.jsx)(Be,{characterSheet:a,character:n,equippedBuild:b,newBuild:u})]})]})}var ye=["eleMas","critRate_","critDMG_","enerRech_","heal_"],we=["characterATK","finalATK","finalHP","finalDEF"];we.push.apply(we,ye);var Se=["hp","hp_","def","def_","atk","atk_"];Se.push.apply(Se,ye);var ke=[];["physical"].concat(Object(oe.a)(re.d)).forEach((function(e){ke.push("".concat(e,"_dmg_")),ke.push("".concat(e,"_res_"))})),ke.push("stamina","incHeal_","shield_","cdRed_");var Ce=["normal_dmg_","normal_critRate_","charged_dmg_","charged_critRate_","plunging_dmg_","plunging_critRate_","skill_dmg_","skill_critRate_","burst_dmg_","burst_critRate_","dmg_","electrocharged_dmg_","vaporize_dmg_","swirl_dmg_","moveSPD_","atkSPD_","weakspotDMG_"],_e={characterATK:"Override Base ATK",characterHP:"Override Base HP",characterDEF:"Override Base DEF"},Ke={xs:12,sm:6,md:6,lg:4};function Be(e){var t=e.characterSheet,a=e.character,n=e.character,i=n.key,r=n.level,l=n.ascension,o=e.equippedBuild,j=e.newBuild,d=Object(Y.a)(i),u=t.getSpecializedStat(a.ascension),b=t.getSpecializedStatVal(a.ascension),h=D.b.getStatUnit(u),x={character:a,equippedBuild:o,newBuild:j};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Ae,{title:"Main Stats",content:Object(G.jsxs)(s.a,{container:!0,columnSpacing:{xs:2,lg:3},rowSpacing:1,children:[we.map((function(e){return Object(G.jsx)(s.a,Object(c.a)(Object(c.a)({item:!0},Ke),{},{children:Object(G.jsx)(Oe.a,Object(c.a)({statKey:e},x))}),e)})),Object(G.jsxs)(s.a,Object(c.a)(Object(c.a)({item:!0},Ke),{},{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(G.jsxs)("span",{children:[Object(G.jsx)("b",{children:"Specialized:"})," ",Object(G.jsxs)("span",{children:[u&&ve.a[u]," ",D.b.getStatName(u)]})]}),Object(G.jsx)("span",{children:"".concat(b.toFixed(D.b.fixedUnit(u))).concat(h)})]}))]}),editContent:Object(G.jsxs)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:[pe.b.map((function(e){var n,c=Math.round(t.getBase(e,r,l));return Object(G.jsx)(s.a,{item:!0,xs:12,lg:6,children:Object(G.jsx)(me.a,{name:Object(G.jsxs)("span",{children:[ve.a[e]," ",_e[e]]}),placeholder:D.b.getStatNameRaw(e),value:null!==(n=a.bonusStats[e])&&void 0!==n?n:c,defaultValue:c,percent:"%"===D.b.getStatUnit(e),onValueChange:function(t){return d({type:"editStats",statKey:e,value:t})},onReset:function(){return d({type:"resetStats",statKey:e})}})},e)})),Se.map((function(e){var t;return Object(G.jsx)(s.a,{item:!0,xs:12,lg:6,children:Object(G.jsx)(me.a,{name:Object(G.jsxs)("span",{children:[ve.a[e]," ",D.b.getStatNameWithPercent(e)]}),placeholder:D.b.getStatNameRaw(e),value:null!==(t=a.bonusStats[e])&&void 0!==t?t:0,percent:"%"===D.b.getStatUnit(e),onValueChange:function(t){return d({type:"editStats",statKey:e,value:t})}})},e)}))]})}),Object(G.jsx)(Ae,{title:"Other Stats",content:Object(G.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:ke.map((function(e){return Object(v.createElement)(s.a,Object(c.a)(Object(c.a)({item:!0},Ke),{},{key:e}),Object(G.jsx)(Oe.a,Object(c.a)({statKey:e},x)))}))}),editContent:Object(G.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:ke.map((function(e){var t;return Object(G.jsx)(s.a,{item:!0,xs:12,lg:6,children:Object(G.jsx)(me.a,{name:Object(G.jsxs)("span",{children:[ve.a[e]," ",D.b.getStatName(e)]}),placeholder:D.b.getStatNameRaw(e),value:null!==(t=a.bonusStats[e])&&void 0!==t?t:"stamina"===e?100:0,percent:"%"===D.b.getStatUnit(e),defaultValue:"stamina"===e?100:void 0,onValueChange:function(t){return d({type:"editStats",statKey:e,value:t})}})},e)}))})}),Object(G.jsx)(Ae,{title:"Misc Stats",content:Object(G.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:Ce.map((function(e){return Object(v.createElement)(s.a,Object(c.a)(Object(c.a)({item:!0},Ke),{},{key:e}),Object(G.jsx)(Oe.a,Object(c.a)({statKey:e},x)))}))}),editContent:Object(G.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:Ce.map((function(e){var t;return Object(G.jsx)(s.a,{item:!0,xs:12,lg:6,children:Object(G.jsx)(me.a,{name:Object(G.jsxs)("span",{children:[ve.a[e]," ",D.b.getStatName(e)]}),placeholder:D.b.getStatNameRaw(e),value:null!==(t=a.bonusStats[e])&&void 0!==t?t:0,percent:"%"===D.b.getStatUnit(e),onValueChange:function(t){return d({type:"editStats",statKey:e,value:t})}})},e)}))})})]})}function Ae(e){var t=e.title,a=e.content,c=e.editContent,i=Object(v.useState)(!1),r=Object(n.a)(i,2),s=r[0],o=r[1];return Object(G.jsxs)(g.a,{children:[Object(G.jsx)(l.a,{sx:{py:1},children:Object(G.jsxs)(E.a,{display:"flex",justifyContent:"space-between",children:[Object(G.jsx)(j.a,{variant:"subtitle1",children:t}),Object(G.jsx)(x.a,{size:"small",color:s?"error":"info",onClick:function(){return o(!s)},children:Object(G.jsxs)("span",{children:[Object(G.jsx)(de.a,{icon:s?je.w:je.m})," ",s?"EXIT":"Edit Stats"]})})]})}),Object(G.jsx)(b.a,{}),Object(G.jsx)(l.a,{children:s?c:a})]})}var Te=a(398),Ne=a(297),Ee=a(305),We=a(300),qe=a(287),Fe=a(48),Me=a(113);function De(e){var t=e.characterSheet,a=e.character,c=e.character,i=c.ascension,r=c.constellation,l=c.key,o=Object(v.useContext)(f.a),d=o.newBuild,u=o.equippedBuild,b=Object(Y.a)(l),h=d||u;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Ie,{characterSheet:t}),Object(G.jsxs)(s.a,{container:!0,spacing:1,sx:{mb:1},children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var c=Object(n.a)(e,2),i=c[0],r=c[1];return Object(G.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,children:Object(G.jsx)(Ue,{characterSheet:t,character:a,characterDispatch:b,talentKey:i,subtitle:r})},i)})),!!t.getTalentOfKey("sprint",null===h||void 0===h?void 0:h.characterEle)&&Object(G.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,children:Object(G.jsx)(Ue,{characterSheet:t,character:a,characterDispatch:b,talentKey:"sprint",subtitle:"Alternative Sprint"})}),!!t.getTalentOfKey("passive",null===h||void 0===h?void 0:h.characterEle)&&Object(G.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,children:Object(G.jsx)(Ue,{characterSheet:t,character:a,characterDispatch:b,talentKey:"passive",subtitle:"Passive"})})]}),Object(G.jsx)(s.a,{container:!0,spacing:1,children:[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var c=Object(n.a)(e,3),r=c[0],l=c[1],o=c[2],j=i>=o;return t.getTalentOfKey(r,null===h||void 0===h?void 0:h.characterEle)?Object(G.jsx)(s.a,{item:!0,style:{opacity:j?1:.5},xs:12,md:4,children:Object(G.jsx)(Ue,{characterSheet:t,character:a,characterDispatch:b,talentKey:r,subtitle:l})},r):null}))}),Object(G.jsxs)(j.a,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",r]}),Object(G.jsx)(s.a,{container:!0,spacing:1,children:Object(oe.a)(Array(6).keys()).map((function(e){var n="constellation".concat(e+1);return Object(G.jsx)(s.a,{item:!0,xs:12,md:4,style:{opacity:r>e?1:.5},children:Object(G.jsx)(Ue,{characterSheet:t,character:a,characterDispatch:b,talentKey:n,subtitle:"Contellation Lv. ".concat(e+1),onClickTitle:function(){return b({constellation:e+1===r?e:e+1})}})},e)}))})]})}var ze={superconduct_hit:function(e){var t,a=e.stats,n="superconduct_hit";return Object(G.jsx)(m.a,{children:Object(G.jsx)(l.a,{sx:{p:1},children:Object(G.jsxs)(j.a,{color:"superconduct.main",children:[D.b.getStatName(n)," ",ve.a.electro,"+",ve.a.cryo," ",Object(G.jsx)("strong",{children:null===(t=a[n])||void 0===t?void 0:t.toFixed(D.b.fixedUnit(n))})]})})})},electrocharged_hit:function(e){var t,a=e.stats,n="electrocharged_hit";return Object(G.jsx)(m.a,{children:Object(G.jsx)(l.a,{sx:{p:1},children:Object(G.jsxs)(j.a,{color:"electrocharged.main",children:[D.b.getStatName(n)," ",ve.a.electro,"+",ve.a.hydro," ",Object(G.jsx)("strong",{children:null===(t=a[n])||void 0===t?void 0:t.toFixed(D.b.fixedUnit(n))})]})})})},overloaded_hit:function(e){var t,a=e.stats,n="overloaded_hit";return Object(G.jsx)(m.a,{children:Object(G.jsx)(l.a,{sx:{p:1},children:Object(G.jsxs)(j.a,{color:"overloaded.main",children:[D.b.getStatName(n)," ",ve.a.electro,"+",ve.a.pyro," ",Object(G.jsx)("strong",{children:null===(t=a[n])||void 0===t?void 0:t.toFixed(D.b.fixedUnit(n))})]})})})},pyro_swirl_hit:function(e){var t,a=e.stats,c=Object(v.useState)(Object.keys(Le)[0]),i=Object(n.a)(c,2),r=i[0],l=i[1],s="".concat(r,"_swirl_hit");return Object(G.jsxs)(m.a,{sx:{display:"flex"},children:[Object(G.jsx)(C.a,{size:"small",title:Le[r],color:"success",children:Object.entries(Le).map((function(e){var t=Object(n.a)(e,2),a=t[0],c=t[1];return Object(G.jsx)(O.a,{selected:r===a,disabled:r===a,onClick:function(){return l(a)},children:c},a)}))}),Object(G.jsx)(E.a,{sx:{color:"".concat(r,".main"),p:1},children:Object(G.jsx)("strong",{children:null===(t=a[s])||void 0===t?void 0:t.toFixed(D.b.fixedUnit(s))})})]})},shattered_hit:function(e){var t,a=e.stats,n="shattered_hit",c=Object(G.jsx)(Ne.a,{placement:"top",title:Object(G.jsxs)(j.a,{children:["Claymores, Plunging Attacks and ",Object(G.jsx)(I.a,{color:"geo",children:"Geo DMG"})]}),children:Object(G.jsx)(E.a,{component:"span",sx:{cursor:"help"},children:Object(G.jsx)(de.a,{icon:je.v})})});return Object(G.jsx)(m.a,{children:Object(G.jsx)(l.a,{sx:{p:1},children:Object(G.jsxs)(I.a,{color:"shattered",children:[D.b.getStatName(n)," ",ve.a.hydro,"+",ve.a.cryo,"+ ",Object(G.jsx)(I.a,{color:"physical",children:Object(G.jsxs)("small",{children:["Heavy Attack",c," "]})})," ",Object(G.jsx)("strong",{children:null===(t=a[n])||void 0===t?void 0:t.toFixed(D.b.fixedUnit(n))})]})})})},crystalize_hit:function(e){var t,a=e.stats,c=Object(v.useState)(Object.keys(Ge)[0]),i=Object(n.a)(c,2),r=i[0],l=i[1],s="default"===r?"crystalize_hit":"".concat(r,"_crystalize_hit");return Object(G.jsxs)(m.a,{sx:{display:"flex"},children:[Object(G.jsx)(C.a,{size:"small",title:Ge[r],color:"success",children:Object.entries(Ge).map((function(e){var t=Object(n.a)(e,2),a=t[0],c=t[1];return Object(G.jsx)(O.a,{selected:r===a,disabled:r===a,onClick:function(){return l(a)},children:c},a)}))}),Object(G.jsx)(E.a,{sx:{color:"".concat(r,".main"),p:1},children:Object(G.jsx)("strong",{children:null===(t=a[s])||void 0===t?void 0:t.toFixed(D.b.fixedUnit(s))})})]})}};function Ie(e){var t=e.characterSheet,a=Object(v.useContext)(f.a),n=a.newBuild,c=a.equippedBuild,i=n||c;if(!i)return null;var r=i.characterEle,o=Object(oe.a)(Fe.a[r]||[]);return o.includes("shattered_hit")||"claymore"!==t.weaponTypeKey||o.push("shattered_hit"),Object(G.jsx)(g.a,{sx:{mb:1},children:Object(G.jsx)(l.a,{children:Object(G.jsx)(s.a,{container:!0,spacing:1,children:o.map((function(e){var t=ze[e];return t?Object(G.jsx)(s.a,{item:!0,children:Object(G.jsx)(t,{stats:i})},e):null}))})})})}var Le={pyro:Object(G.jsxs)("span",{children:[D.b.getStatName("pyro_swirl_hit")," ",ve.a.pyro," + ",ve.a.anemo]}),electro:Object(G.jsxs)("span",{children:[D.b.getStatName("electro_swirl_hit")," ",ve.a.electro,"+",ve.a.anemo]}),cryo:Object(G.jsxs)("span",{children:[D.b.getStatName("cryo_swirl_hit")," ",ve.a.cryo," + ",ve.a.anemo]}),hydro:Object(G.jsxs)("span",{children:[D.b.getStatName("hydro_swirl_hit")," ",ve.a.hydro," + ",ve.a.anemo]})};var Ge={default:Object(G.jsxs)(I.a,{color:"crystalize",children:[D.b.getStatName("crystalize_hit")," ",ve.a.electro,"/",ve.a.hydro,"/",ve.a.pyro,"/",ve.a.cryo,"+",ve.a.geo]}),pyro:Object(G.jsxs)("span",{children:[D.b.getStatName("pyro_crystalize_hit")," ",ve.a.pyro,"+",ve.a.geo]}),electro:Object(G.jsxs)("span",{children:[D.b.getStatName("electro_crystalize_hit")," ",ve.a.electro,"+",ve.a.geo]}),cryo:Object(G.jsxs)("span",{children:[D.b.getStatName("cryo_crystalize_hit")," ",ve.a.cryo,"+",ve.a.geo]}),hydro:Object(G.jsxs)("span",{children:[D.b.getStatName("hydro_crystalize_hit")," ",ve.a.hydro,"+",ve.a.geo]})};var Ve=[1,1,2,4,6,8,10];function Ue(e){var t=e.characterSheet,a=e.character,n=a.talent,c=a.ascension,i=a.key,r=e.characterDispatch,o=e.talentKey,d=e.subtitle,u=e.onClickTitle,h=Object(v.useContext)(f.a),x=h.newBuild,p=h.equippedBuild,m=x||p,y=Object(v.useCallback)((function(e){return Object(G.jsx)(Te.a,{onClick:u,children:e})}),[u]);if(!m)return null;var w=null;if(o in n){var S,k=null!==(S=m["".concat(o,"Boost")])&&void 0!==S?S:0,_=n[o]+k;w=Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(l.a,{sx:{py:1},children:Object(G.jsx)(C.a,{fullWidth:!0,title:"Talent Lv. ".concat(_),color:k?"info":"primary",children:Object(oe.a)(Array(Ve[c]+("auto"!==o||k?0:1)).keys()).map((function(e){return Object(G.jsxs)(O.a,{selected:n[o]===e+1,disabled:n[o]===e+1,onClick:function(){return t=e+1,n[o]=t,void r({talent:n});var t},children:["Talent Lv. ",e+k+1]},e)}))})}),Object(G.jsx)(b.a,{})]})}var K=t.getTalentStats(o,m),B=K&&Object(Me.a)(K,m),A=B&&!!B.length&&Object(G.jsx)(qe.a,{children:B.map((function(e,t){return Object(G.jsx)(qe.b,{field:e},t)}))}),T=t.getTalentOfKey(o,m.characterEle),N=null===T||void 0===T?void 0:T.sections;return Object(G.jsxs)(g.a,{sx:{height:"100%"},children:[w,Object(G.jsxs)(l.a,{children:[Object(G.jsx)(Ee.a,{condition:!!u,wrapper:y,children:Object(G.jsxs)(s.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(G.jsx)(s.a,{item:!0,children:Object(G.jsx)(E.a,{component:"img",src:null===T||void 0===T?void 0:T.img,sx:{width:60,height:"auto"}})}),Object(G.jsxs)(s.a,{item:!0,flexGrow:1,sx:{pl:1},children:[Object(G.jsx)(j.a,{variant:"h6",children:null===T||void 0===T?void 0:T.name}),Object(G.jsx)(j.a,{variant:"subtitle1",children:d})]})]})}),N?Object(G.jsx)(We.a,{sections:N,characterKey:i,equippedBuild:p,newBuild:x}):null,A]})]})}var Re=a(136);function Pe(e){var t=e.children,a=e.current,n=e.value,l=Object(i.a)(e,["children","current","value"]);return n!==a?null:Object(G.jsx)(v.Suspense,{fallback:Object(G.jsx)(r.a,{variant:"rectangular",width:"100%",height:1e3}),children:Object(G.jsx)("div",Object(c.a)(Object(c.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},l),{},{children:t}))})}function He(e){var t,a=e.characterKey,c=e.setCharacterKey,i=e.footer,r=e.newBuild,h=e.onClose,x=e.tabName,O=Object(v.useContext)(Q.b),y=Object(v.useState)(!1),w=Object(n.a)(y,2),k=w[0],C=w[1],K=Object(Z.a)(),B=Object(n.a)(K,2),A=B[0],T=B[1],N=Object(M.a)(ee.a.getAll(),[]),E=Object(M.a)(Re.b.getAll(),[]),F=Object(M.a)(p.a.getAll(),[]),D=Object(v.useMemo)((function(){var e;return A&&(null!==(e=O._getChar(a))&&void 0!==e?e:Object(q.b)(a))}),[a,A,O]),z=Object(v.useMemo)((function(){return A&&O._getWeapon(D.equippedWeapon)}),[D.equippedWeapon,A,O]),I=null===E||void 0===E?void 0:E[a],L=z?null===N||void 0===N?void 0:N[z.key]:void 0,U=I&&L&&F&&{characterSheet:I,weaponSheet:L,artifactSheets:F};Object(v.useEffect)((function(){return O.followChar(a,T)}),[a,T,O]),Object(v.useEffect)((function(){return O.followWeapon(D.equippedWeapon,T)}),[D.equippedWeapon,T,O]);var R=Object(v.useMemo)((function(){if(r)return Object($.d)(r)}),[r]),H=Object(v.useState)(x||(R?"newartifacts":"character")),J=Object(n.a)(H,2),X=J[0],Y=J[1],te=Object(v.useCallback)((function(e,t){return Y(t)}),[Y]),ae=null!==(t=null===R||void 0===R?void 0:R.mainStatAssumptionLevel)&&void 0!==t?t:0,ne=Object(v.useMemo)((function(){return A&&I&&L&&F&&W.a.calculateBuild(D,O,I,L,F,ae)}),[A,D,I,L,F,ae,O]);return Object(G.jsx)(m.a,{children:Object(G.jsxs)(f.a.Provider,{value:{newBuild:R,equippedBuild:ne,compareBuild:k,setCompareBuild:C},children:[Object(G.jsxs)(l.a,{sx:{"> div:not(:last-child)":{mb:1}},children:[Object(G.jsxs)(s.a,{container:!0,spacing:1,children:[Object(G.jsx)(s.a,{item:!0,flexGrow:1,children:Object(G.jsx)(Je,{characterSheet:I,character:D,setCharacterKey:c})}),!!ae&&Object(G.jsx)(s.a,{item:!0,children:Object(G.jsx)(o.a,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:Object(G.jsx)(j.a,{children:Object(G.jsxs)("strong",{children:["Assume Main Stats are Level ",ae]})})})}),!!h&&Object(G.jsx)(s.a,{item:!0,children:Object(G.jsx)(S.a,{onClick:h})})]}),Object(G.jsx)(g.a,{children:Object(G.jsxs)(d.a,{onChange:te,value:X,variant:"fullWidth",children:[Object(G.jsx)(u.a,{value:"character",label:"Character"}),!!R&&Object(G.jsx)(u.a,{value:"newartifacts",label:"New Artifacts"}),Object(G.jsx)(u.a,{value:"artifacts",label:R?"Current Artifacts":"Artifacts"}),Object(G.jsx)(u.a,{value:"talent",label:"Talents"})]})}),Object(G.jsx)(P.a,{character:D}),!!U&&Object(G.jsx)(V,{sheets:U}),Object(G.jsx)(_.b,{character:D}),I&&Object(G.jsx)(Pe,{value:"character",current:X,children:Object(G.jsx)(ge,{characterSheet:I,character:D})}),U&&Object(G.jsx)(f.a.Provider,{value:{newBuild:void 0,equippedBuild:ne,compareBuild:k,setCompareBuild:C},children:Object(G.jsx)(Pe,{value:"artifacts",current:X,children:Object(G.jsx)(se,{sheets:U,character:D})})}),R&&U&&Object(G.jsx)(Pe,{value:"newartifacts",current:X,children:Object(G.jsx)(se,{sheets:U,character:D})}),I&&Object(G.jsx)(Pe,{value:"talent",current:X,children:Object(G.jsx)(De,{characterSheet:I,character:D})})]}),!!i&&Object(G.jsx)(b.a,{}),i&&Object(G.jsx)(l.a,{sx:{py:1},children:i})]})})}function Je(e){var t,a=e.characterSheet,c=e.character,i=e.character,r=i.key,l=i.elementKey,s=void 0===l?"anemo":l,o=i.level,d=void 0===o?1:o,u=i.ascension,b=void 0===u?0:u,p=e.disabled,f=e.setCharacterKey,m=Object(v.useState)(!1),g=Object(n.a)(m,2),S=g[0],_=g[1],K=Object(Y.a)(r),B=a?Object(G.jsxs)("span",{children:[Object(G.jsx)(H.a,{src:a.thumbImg,sx:{mr:1}}),a.name]}):Object(G.jsx)("span",{children:"Select a Character"}),A=Object(v.useCallback)((function(e){e=Object($.a)(e,1,90);var t=X.b.findIndex((function(t){return e<=t}));K({level:e,ascension:t})}),[K]),T=Object(v.useCallback)((function(){var e=X.b.findIndex((function(e){return 90!==d&&d===e}));K(b===e?{ascension:b+1}:{ascension:e})}),[K,b,d]);return Object(G.jsx)(G.Fragment,{children:p?Object(G.jsxs)(j.a,{variant:"h6",children:[B," ",a&&W.a.getLevelString(c)]}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(y.a,{show:S,onHide:function(){return _(!1)},onSelect:f}),Object(G.jsxs)(h.a,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[Object(G.jsx)(x.a,{disabled:!f,onClick:function(){return _(!0)},startIcon:Object(G.jsx)(w.a,{src:null===a||void 0===a?void 0:a.thumbImgSide}),children:null!==(t=null===a||void 0===a?void 0:a.name)&&void 0!==t?t:"Select a Character"}),(null===a||void 0===a?void 0:a.sheet)&&"talents"in(null===a||void 0===a?void 0:a.sheet)&&Object(G.jsx)(C.a,{title:J.a[s].name,children:Object.keys(a.sheet.talents).map((function(e){return Object(G.jsx)(O.a,{selected:s===e,disabled:s===e,onClick:function(){return K({elementKey:e})},children:Object(G.jsx)("strong",{children:J.a[e].name})},e)}))}),Object(G.jsx)(k.a,{children:Object(G.jsx)(k.c,{onChange:A,value:d,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2},disabled:!a})}),Object(G.jsx)(x.a,{sx:{pl:1},disabled:!Object(X.a)(d)||!a,onClick:T,children:Object(G.jsxs)("strong",{children:["/ ",X.b[b]]})}),Object(G.jsx)(C.a,{title:"Select Level",disabled:!a,children:X.c.map((function(e){var t=Object(n.a)(e,2),a=t[0],c=t[1],i=a===X.b[c]?"Lv. ".concat(a):"Lv. ".concat(a,"/").concat(X.b[c]),r=a===d&&c===b;return Object(G.jsx)(O.a,{selected:r,disabled:r,onClick:function(){return K({level:a,ascension:c})},children:i},"".concat(a,"/").concat(c))}))})]})]})})}}}]);
//# sourceMappingURL=7.b4f9c17a.chunk.js.map